var Fv=Object.defineProperty;var Av=Mt=>{throw TypeError(Mt)};var Bv=(Mt,st,nn)=>st in Mt?Fv(Mt,st,{enumerable:!0,configurable:!0,writable:!0,value:nn}):Mt[st]=nn;var Fp=(Mt,st,nn)=>Bv(Mt,typeof st!="symbol"?st+"":st,nn),tv=(Mt,st,nn)=>st.has(Mt)||Av("Cannot "+nn);var Lp=(Mt,st,nn)=>(tv(Mt,st,"read from private field"),nn?nn.call(Mt):st.get(Mt)),bm=(Mt,st,nn)=>st.has(Mt)?Av("Cannot add the same private member more than once"):st instanceof WeakSet?st.add(Mt):st.set(Mt,nn),cm=(Mt,st,nn,rn)=>(tv(Mt,st,"write to private field"),rn?rn.call(Mt,nn):st.set(Mt,nn),nn),Rm=(Mt,st,nn)=>(tv(Mt,st,"access private method"),nn);var Yy=(Mt,st,nn,rn)=>({set _(on){cm(Mt,st,on,nn)},get _(){return Lp(Mt,st,rn)}});function _mergeNamespaces(Mt,st){for(var nn=0;nn<st.length;nn++){const rn=st[nn];if(typeof rn!="string"&&!Array.isArray(rn)){for(const on in rn)if(on!=="default"&&!(on in Mt)){const an=Object.getOwnPropertyDescriptor(rn,on);an&&Object.defineProperty(Mt,on,an.get?an:{enumerable:!0,get:()=>rn[on]})}}}return Object.freeze(Object.defineProperty(Mt,Symbol.toStringTag,{value:"Module"}))}(function(){const st=document.createElement("link").relList;if(st&&st.supports&&st.supports("modulepreload"))return;for(const on of document.querySelectorAll('link[rel="modulepreload"]'))rn(on);new MutationObserver(on=>{for(const an of on)if(an.type==="childList")for(const sn of an.addedNodes)sn.tagName==="LINK"&&sn.rel==="modulepreload"&&rn(sn)}).observe(document,{childList:!0,subtree:!0});function nn(on){const an={};return on.integrity&&(an.integrity=on.integrity),on.referrerPolicy&&(an.referrerPolicy=on.referrerPolicy),on.crossOrigin==="use-credentials"?an.credentials="include":on.crossOrigin==="anonymous"?an.credentials="omit":an.credentials="same-origin",an}function rn(on){if(on.ep)return;on.ep=!0;const an=nn(on);fetch(on.href,an)}})();var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(Mt){return Mt&&Mt.__esModule&&Object.prototype.hasOwnProperty.call(Mt,"default")?Mt.default:Mt}function getAugmentedNamespace(Mt){if(Mt.__esModule)return Mt;var st=Mt.default;if(typeof st=="function"){var nn=function rn(){return this instanceof rn?Reflect.construct(st,arguments,this.constructor):st.apply(this,arguments)};nn.prototype=st.prototype}else nn={};return Object.defineProperty(nn,"__esModule",{value:!0}),Object.keys(Mt).forEach(function(rn){var on=Object.getOwnPropertyDescriptor(Mt,rn);Object.defineProperty(nn,rn,on.get?on:{enumerable:!0,get:function(){return Mt[rn]}})}),nn}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l$4=Symbol.for("react.element"),n$4=Symbol.for("react.portal"),p$5=Symbol.for("react.fragment"),q$4=Symbol.for("react.strict_mode"),r$4=Symbol.for("react.profiler"),t$3=Symbol.for("react.provider"),u$3=Symbol.for("react.context"),v$2=Symbol.for("react.forward_ref"),w$1=Symbol.for("react.suspense"),x$2=Symbol.for("react.memo"),y$1=Symbol.for("react.lazy"),z$2=Symbol.iterator;function A$2(Mt){return Mt===null||typeof Mt!="object"?null:(Mt=z$2&&Mt[z$2]||Mt["@@iterator"],typeof Mt=="function"?Mt:null)}var B$2={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C$2=Object.assign,D$2={};function E$2(Mt,st,nn){this.props=Mt,this.context=st,this.refs=D$2,this.updater=nn||B$2}E$2.prototype.isReactComponent={};E$2.prototype.setState=function(Mt,st){if(typeof Mt!="object"&&typeof Mt!="function"&&Mt!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Mt,st,"setState")};E$2.prototype.forceUpdate=function(Mt){this.updater.enqueueForceUpdate(this,Mt,"forceUpdate")};function F$1(){}F$1.prototype=E$2.prototype;function G$2(Mt,st,nn){this.props=Mt,this.context=st,this.refs=D$2,this.updater=nn||B$2}var H$2=G$2.prototype=new F$1;H$2.constructor=G$2;C$2(H$2,E$2.prototype);H$2.isPureReactComponent=!0;var I$2=Array.isArray,J$1=Object.prototype.hasOwnProperty,K$2={current:null},L$2={key:!0,ref:!0,__self:!0,__source:!0};function M$2(Mt,st,nn){var rn,on={},an=null,sn=null;if(st!=null)for(rn in st.ref!==void 0&&(sn=st.ref),st.key!==void 0&&(an=""+st.key),st)J$1.call(st,rn)&&!L$2.hasOwnProperty(rn)&&(on[rn]=st[rn]);var un=arguments.length-2;if(un===1)on.children=nn;else if(1<un){for(var Xr=Array(un),to=0;to<un;to++)Xr[to]=arguments[to+2];on.children=Xr}if(Mt&&Mt.defaultProps)for(rn in un=Mt.defaultProps,un)on[rn]===void 0&&(on[rn]=un[rn]);return{$$typeof:l$4,type:Mt,key:an,ref:sn,props:on,_owner:K$2.current}}function N$2(Mt,st){return{$$typeof:l$4,type:Mt.type,key:st,ref:Mt.ref,props:Mt.props,_owner:Mt._owner}}function O$2(Mt){return typeof Mt=="object"&&Mt!==null&&Mt.$$typeof===l$4}function escape(Mt){var st={"=":"=0",":":"=2"};return"$"+Mt.replace(/[=:]/g,function(nn){return st[nn]})}var P$3=/\/+/g;function Q$2(Mt,st){return typeof Mt=="object"&&Mt!==null&&Mt.key!=null?escape(""+Mt.key):st.toString(36)}function R$2(Mt,st,nn,rn,on){var an=typeof Mt;(an==="undefined"||an==="boolean")&&(Mt=null);var sn=!1;if(Mt===null)sn=!0;else switch(an){case"string":case"number":sn=!0;break;case"object":switch(Mt.$$typeof){case l$4:case n$4:sn=!0}}if(sn)return sn=Mt,on=on(sn),Mt=rn===""?"."+Q$2(sn,0):rn,I$2(on)?(nn="",Mt!=null&&(nn=Mt.replace(P$3,"$&/")+"/"),R$2(on,st,nn,"",function(to){return to})):on!=null&&(O$2(on)&&(on=N$2(on,nn+(!on.key||sn&&sn.key===on.key?"":(""+on.key).replace(P$3,"$&/")+"/")+Mt)),st.push(on)),1;if(sn=0,rn=rn===""?".":rn+":",I$2(Mt))for(var un=0;un<Mt.length;un++){an=Mt[un];var Xr=rn+Q$2(an,un);sn+=R$2(an,st,nn,Xr,on)}else if(Xr=A$2(Mt),typeof Xr=="function")for(Mt=Xr.call(Mt),un=0;!(an=Mt.next()).done;)an=an.value,Xr=rn+Q$2(an,un++),sn+=R$2(an,st,nn,Xr,on);else if(an==="object")throw st=String(Mt),Error("Objects are not valid as a React child (found: "+(st==="[object Object]"?"object with keys {"+Object.keys(Mt).join(", ")+"}":st)+"). If you meant to render a collection of children, use an array instead.");return sn}function S$2(Mt,st,nn){if(Mt==null)return Mt;var rn=[],on=0;return R$2(Mt,rn,"","",function(an){return st.call(nn,an,on++)}),rn}function T$2(Mt){if(Mt._status===-1){var st=Mt._result;st=st(),st.then(function(nn){(Mt._status===0||Mt._status===-1)&&(Mt._status=1,Mt._result=nn)},function(nn){(Mt._status===0||Mt._status===-1)&&(Mt._status=2,Mt._result=nn)}),Mt._status===-1&&(Mt._status=0,Mt._result=st)}if(Mt._status===1)return Mt._result.default;throw Mt._result}var U$2={current:null},V$2={transition:null},W$2={ReactCurrentDispatcher:U$2,ReactCurrentBatchConfig:V$2,ReactCurrentOwner:K$2};function X$3(){throw Error("act(...) is not supported in production builds of React.")}react_production_min.Children={map:S$2,forEach:function(Mt,st,nn){S$2(Mt,function(){st.apply(this,arguments)},nn)},count:function(Mt){var st=0;return S$2(Mt,function(){st++}),st},toArray:function(Mt){return S$2(Mt,function(st){return st})||[]},only:function(Mt){if(!O$2(Mt))throw Error("React.Children.only expected to receive a single React element child.");return Mt}};react_production_min.Component=E$2;react_production_min.Fragment=p$5;react_production_min.Profiler=r$4;react_production_min.PureComponent=G$2;react_production_min.StrictMode=q$4;react_production_min.Suspense=w$1;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W$2;react_production_min.act=X$3;react_production_min.cloneElement=function(Mt,st,nn){if(Mt==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+Mt+".");var rn=C$2({},Mt.props),on=Mt.key,an=Mt.ref,sn=Mt._owner;if(st!=null){if(st.ref!==void 0&&(an=st.ref,sn=K$2.current),st.key!==void 0&&(on=""+st.key),Mt.type&&Mt.type.defaultProps)var un=Mt.type.defaultProps;for(Xr in st)J$1.call(st,Xr)&&!L$2.hasOwnProperty(Xr)&&(rn[Xr]=st[Xr]===void 0&&un!==void 0?un[Xr]:st[Xr])}var Xr=arguments.length-2;if(Xr===1)rn.children=nn;else if(1<Xr){un=Array(Xr);for(var to=0;to<Xr;to++)un[to]=arguments[to+2];rn.children=un}return{$$typeof:l$4,type:Mt.type,key:on,ref:an,props:rn,_owner:sn}};react_production_min.createContext=function(Mt){return Mt={$$typeof:u$3,_currentValue:Mt,_currentValue2:Mt,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},Mt.Provider={$$typeof:t$3,_context:Mt},Mt.Consumer=Mt};react_production_min.createElement=M$2;react_production_min.createFactory=function(Mt){var st=M$2.bind(null,Mt);return st.type=Mt,st};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(Mt){return{$$typeof:v$2,render:Mt}};react_production_min.isValidElement=O$2;react_production_min.lazy=function(Mt){return{$$typeof:y$1,_payload:{_status:-1,_result:Mt},_init:T$2}};react_production_min.memo=function(Mt,st){return{$$typeof:x$2,type:Mt,compare:st===void 0?null:st}};react_production_min.startTransition=function(Mt){var st=V$2.transition;V$2.transition={};try{Mt()}finally{V$2.transition=st}};react_production_min.unstable_act=X$3;react_production_min.useCallback=function(Mt,st){return U$2.current.useCallback(Mt,st)};react_production_min.useContext=function(Mt){return U$2.current.useContext(Mt)};react_production_min.useDebugValue=function(){};react_production_min.useDeferredValue=function(Mt){return U$2.current.useDeferredValue(Mt)};react_production_min.useEffect=function(Mt,st){return U$2.current.useEffect(Mt,st)};react_production_min.useId=function(){return U$2.current.useId()};react_production_min.useImperativeHandle=function(Mt,st,nn){return U$2.current.useImperativeHandle(Mt,st,nn)};react_production_min.useInsertionEffect=function(Mt,st){return U$2.current.useInsertionEffect(Mt,st)};react_production_min.useLayoutEffect=function(Mt,st){return U$2.current.useLayoutEffect(Mt,st)};react_production_min.useMemo=function(Mt,st){return U$2.current.useMemo(Mt,st)};react_production_min.useReducer=function(Mt,st,nn){return U$2.current.useReducer(Mt,st,nn)};react_production_min.useRef=function(Mt){return U$2.current.useRef(Mt)};react_production_min.useState=function(Mt){return U$2.current.useState(Mt)};react_production_min.useSyncExternalStore=function(Mt,st,nn){return U$2.current.useSyncExternalStore(Mt,st,nn)};react_production_min.useTransition=function(){return U$2.current.useTransition()};react_production_min.version="18.3.1";react.exports=react_production_min;var reactExports=react.exports;const React=getDefaultExportFromCjs(reactExports),React$1=_mergeNamespaces({__proto__:null,default:React},[reactExports]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f$2=reactExports,k$4=Symbol.for("react.element"),l$3=Symbol.for("react.fragment"),m$3=Object.prototype.hasOwnProperty,n$3=f$2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p$4={key:!0,ref:!0,__self:!0,__source:!0};function q$3(Mt,st,nn){var rn,on={},an=null,sn=null;nn!==void 0&&(an=""+nn),st.key!==void 0&&(an=""+st.key),st.ref!==void 0&&(sn=st.ref);for(rn in st)m$3.call(st,rn)&&!p$4.hasOwnProperty(rn)&&(on[rn]=st[rn]);if(Mt&&Mt.defaultProps)for(rn in st=Mt.defaultProps,st)on[rn]===void 0&&(on[rn]=st[rn]);return{$$typeof:k$4,type:Mt,key:an,ref:sn,props:on,_owner:n$3.current}}reactJsxRuntime_production_min.Fragment=l$3;reactJsxRuntime_production_min.jsx=q$3;reactJsxRuntime_production_min.jsxs=q$3;jsxRuntime.exports=reactJsxRuntime_production_min;var jsxRuntimeExports=jsxRuntime.exports,reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(Mt){function st(gp,mp){var xp=gp.length;gp.push(mp);e:for(;0<xp;){var _p=xp-1>>>1,Sp=gp[_p];if(0<on(Sp,mp))gp[_p]=mp,gp[xp]=Sp,xp=_p;else break e}}function nn(gp){return gp.length===0?null:gp[0]}function rn(gp){if(gp.length===0)return null;var mp=gp[0],xp=gp.pop();if(xp!==mp){gp[0]=xp;e:for(var _p=0,Sp=gp.length,Cp=Sp>>>1;_p<Cp;){var jp=2*(_p+1)-1,Dp=gp[jp],Vp=jp+1,Up=gp[Vp];if(0>on(Dp,xp))Vp<Sp&&0>on(Up,Dp)?(gp[_p]=Up,gp[Vp]=xp,_p=Vp):(gp[_p]=Dp,gp[jp]=xp,_p=jp);else if(Vp<Sp&&0>on(Up,xp))gp[_p]=Up,gp[Vp]=xp,_p=Vp;else break e}}return mp}function on(gp,mp){var xp=gp.sortIndex-mp.sortIndex;return xp!==0?xp:gp.id-mp.id}if(typeof performance=="object"&&typeof performance.now=="function"){var an=performance;Mt.unstable_now=function(){return an.now()}}else{var sn=Date,un=sn.now();Mt.unstable_now=function(){return sn.now()-un}}var Xr=[],to=[],uo=1,hn=null,fn=3,co=!1,lo=!1,fo=!1,ho=typeof setTimeout=="function"?setTimeout:null,mo=typeof clearTimeout=="function"?clearTimeout:null,Uo=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _d(gp){for(var mp=nn(to);mp!==null;){if(mp.callback===null)rn(to);else if(mp.startTime<=gp)rn(to),mp.sortIndex=mp.expirationTime,st(Xr,mp);else break;mp=nn(to)}}function tp(gp){if(fo=!1,_d(gp),!lo)if(nn(Xr)!==null)lo=!0,cp(ep);else{var mp=nn(to);mp!==null&&fp(tp,mp.startTime-gp)}}function ep(gp,mp){lo=!1,fo&&(fo=!1,mo(ip),ip=-1),co=!0;var xp=fn;try{for(_d(mp),hn=nn(Xr);hn!==null&&(!(hn.expirationTime>mp)||gp&&!sp());){var _p=hn.callback;if(typeof _p=="function"){hn.callback=null,fn=hn.priorityLevel;var Sp=_p(hn.expirationTime<=mp);mp=Mt.unstable_now(),typeof Sp=="function"?hn.callback=Sp:hn===nn(Xr)&&rn(Xr),_d(mp)}else rn(Xr);hn=nn(Xr)}if(hn!==null)var Cp=!0;else{var jp=nn(to);jp!==null&&fp(tp,jp.startTime-mp),Cp=!1}return Cp}finally{hn=null,fn=xp,co=!1}}var np=!1,rp=null,ip=-1,op=5,ap=-1;function sp(){return!(Mt.unstable_now()-ap<op)}function up(){if(rp!==null){var gp=Mt.unstable_now();ap=gp;var mp=!0;try{mp=rp(!0,gp)}finally{mp?pp():(np=!1,rp=null)}}else np=!1}var pp;if(typeof Uo=="function")pp=function(){Uo(up)};else if(typeof MessageChannel<"u"){var lp=new MessageChannel,dp=lp.port2;lp.port1.onmessage=up,pp=function(){dp.postMessage(null)}}else pp=function(){ho(up,0)};function cp(gp){rp=gp,np||(np=!0,pp())}function fp(gp,mp){ip=ho(function(){gp(Mt.unstable_now())},mp)}Mt.unstable_IdlePriority=5,Mt.unstable_ImmediatePriority=1,Mt.unstable_LowPriority=4,Mt.unstable_NormalPriority=3,Mt.unstable_Profiling=null,Mt.unstable_UserBlockingPriority=2,Mt.unstable_cancelCallback=function(gp){gp.callback=null},Mt.unstable_continueExecution=function(){lo||co||(lo=!0,cp(ep))},Mt.unstable_forceFrameRate=function(gp){0>gp||125<gp?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):op=0<gp?Math.floor(1e3/gp):5},Mt.unstable_getCurrentPriorityLevel=function(){return fn},Mt.unstable_getFirstCallbackNode=function(){return nn(Xr)},Mt.unstable_next=function(gp){switch(fn){case 1:case 2:case 3:var mp=3;break;default:mp=fn}var xp=fn;fn=mp;try{return gp()}finally{fn=xp}},Mt.unstable_pauseExecution=function(){},Mt.unstable_requestPaint=function(){},Mt.unstable_runWithPriority=function(gp,mp){switch(gp){case 1:case 2:case 3:case 4:case 5:break;default:gp=3}var xp=fn;fn=gp;try{return mp()}finally{fn=xp}},Mt.unstable_scheduleCallback=function(gp,mp,xp){var _p=Mt.unstable_now();switch(typeof xp=="object"&&xp!==null?(xp=xp.delay,xp=typeof xp=="number"&&0<xp?_p+xp:_p):xp=_p,gp){case 1:var Sp=-1;break;case 2:Sp=250;break;case 5:Sp=1073741823;break;case 4:Sp=1e4;break;default:Sp=5e3}return Sp=xp+Sp,gp={id:uo++,callback:mp,priorityLevel:gp,startTime:xp,expirationTime:Sp,sortIndex:-1},xp>_p?(gp.sortIndex=xp,st(to,gp),nn(Xr)===null&&gp===nn(to)&&(fo?(mo(ip),ip=-1):fo=!0,fp(tp,xp-_p))):(gp.sortIndex=Sp,st(Xr,gp),lo||co||(lo=!0,cp(ep))),gp},Mt.unstable_shouldYield=sp,Mt.unstable_wrapCallback=function(gp){var mp=fn;return function(){var xp=fn;fn=mp;try{return gp.apply(this,arguments)}finally{fn=xp}}}})(scheduler_production_min);scheduler.exports=scheduler_production_min;var schedulerExports=scheduler.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa$1=reactExports,ca$1=schedulerExports;function p$3(Mt){for(var st="https://reactjs.org/docs/error-decoder.html?invariant="+Mt,nn=1;nn<arguments.length;nn++)st+="&args[]="+encodeURIComponent(arguments[nn]);return"Minified React error #"+Mt+"; visit "+st+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var da$1=new Set,ea$1={};function fa$1(Mt,st){ha$1(Mt,st),ha$1(Mt+"Capture",st)}function ha$1(Mt,st){for(ea$1[Mt]=st,Mt=0;Mt<st.length;Mt++)da$1.add(st[Mt])}var ia$1=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ja$1=Object.prototype.hasOwnProperty,ka$2=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,la$1={},ma$1={};function oa$1(Mt){return ja$1.call(ma$1,Mt)?!0:ja$1.call(la$1,Mt)?!1:ka$2.test(Mt)?ma$1[Mt]=!0:(la$1[Mt]=!0,!1)}function pa$1(Mt,st,nn,rn){if(nn!==null&&nn.type===0)return!1;switch(typeof st){case"function":case"symbol":return!0;case"boolean":return rn?!1:nn!==null?!nn.acceptsBooleans:(Mt=Mt.toLowerCase().slice(0,5),Mt!=="data-"&&Mt!=="aria-");default:return!1}}function qa$1(Mt,st,nn,rn){if(st===null||typeof st>"u"||pa$1(Mt,st,nn,rn))return!0;if(rn)return!1;if(nn!==null)switch(nn.type){case 3:return!st;case 4:return st===!1;case 5:return isNaN(st);case 6:return isNaN(st)||1>st}return!1}function v$1(Mt,st,nn,rn,on,an,sn){this.acceptsBooleans=st===2||st===3||st===4,this.attributeName=rn,this.attributeNamespace=on,this.mustUseProperty=nn,this.propertyName=Mt,this.type=st,this.sanitizeURL=an,this.removeEmptyString=sn}var z$1={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(Mt){z$1[Mt]=new v$1(Mt,0,!1,Mt,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(Mt){var st=Mt[0];z$1[st]=new v$1(st,1,!1,Mt[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(Mt){z$1[Mt]=new v$1(Mt,2,!1,Mt.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(Mt){z$1[Mt]=new v$1(Mt,2,!1,Mt,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(Mt){z$1[Mt]=new v$1(Mt,3,!1,Mt.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(Mt){z$1[Mt]=new v$1(Mt,3,!0,Mt,null,!1,!1)});["capture","download"].forEach(function(Mt){z$1[Mt]=new v$1(Mt,4,!1,Mt,null,!1,!1)});["cols","rows","size","span"].forEach(function(Mt){z$1[Mt]=new v$1(Mt,6,!1,Mt,null,!1,!1)});["rowSpan","start"].forEach(function(Mt){z$1[Mt]=new v$1(Mt,5,!1,Mt.toLowerCase(),null,!1,!1)});var ra$1=/[\-:]([a-z])/g;function sa$1(Mt){return Mt[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(Mt){var st=Mt.replace(ra$1,sa$1);z$1[st]=new v$1(st,1,!1,Mt,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(Mt){var st=Mt.replace(ra$1,sa$1);z$1[st]=new v$1(st,1,!1,Mt,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(Mt){var st=Mt.replace(ra$1,sa$1);z$1[st]=new v$1(st,1,!1,Mt,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(Mt){z$1[Mt]=new v$1(Mt,1,!1,Mt.toLowerCase(),null,!1,!1)});z$1.xlinkHref=new v$1("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(Mt){z$1[Mt]=new v$1(Mt,1,!1,Mt.toLowerCase(),null,!0,!0)});function ta$1(Mt,st,nn,rn){var on=z$1.hasOwnProperty(st)?z$1[st]:null;(on!==null?on.type!==0:rn||!(2<st.length)||st[0]!=="o"&&st[0]!=="O"||st[1]!=="n"&&st[1]!=="N")&&(qa$1(st,nn,on,rn)&&(nn=null),rn||on===null?oa$1(st)&&(nn===null?Mt.removeAttribute(st):Mt.setAttribute(st,""+nn)):on.mustUseProperty?Mt[on.propertyName]=nn===null?on.type===3?!1:"":nn:(st=on.attributeName,rn=on.attributeNamespace,nn===null?Mt.removeAttribute(st):(on=on.type,nn=on===3||on===4&&nn===!0?"":""+nn,rn?Mt.setAttributeNS(rn,st,nn):Mt.setAttribute(st,nn))))}var ua$1=aa$1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va$1=Symbol.for("react.element"),wa$1=Symbol.for("react.portal"),ya$1=Symbol.for("react.fragment"),za$1=Symbol.for("react.strict_mode"),Aa$1=Symbol.for("react.profiler"),Ba$1=Symbol.for("react.provider"),Ca$1=Symbol.for("react.context"),Da$1=Symbol.for("react.forward_ref"),Ea$1=Symbol.for("react.suspense"),Fa$1=Symbol.for("react.suspense_list"),Ga$1=Symbol.for("react.memo"),Ha$1=Symbol.for("react.lazy"),Ia$1=Symbol.for("react.offscreen"),Ja$1=Symbol.iterator;function Ka$1(Mt){return Mt===null||typeof Mt!="object"?null:(Mt=Ja$1&&Mt[Ja$1]||Mt["@@iterator"],typeof Mt=="function"?Mt:null)}var A$1=Object.assign,La$1;function Ma$1(Mt){if(La$1===void 0)try{throw Error()}catch(nn){var st=nn.stack.trim().match(/\n( *(at )?)/);La$1=st&&st[1]||""}return`
`+La$1+Mt}var Na$1=!1;function Oa$1(Mt,st){if(!Mt||Na$1)return"";Na$1=!0;var nn=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(st)if(st=function(){throw Error()},Object.defineProperty(st.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(st,[])}catch(to){var rn=to}Reflect.construct(Mt,[],st)}else{try{st.call()}catch(to){rn=to}Mt.call(st.prototype)}else{try{throw Error()}catch(to){rn=to}Mt()}}catch(to){if(to&&rn&&typeof to.stack=="string"){for(var on=to.stack.split(`
`),an=rn.stack.split(`
`),sn=on.length-1,un=an.length-1;1<=sn&&0<=un&&on[sn]!==an[un];)un--;for(;1<=sn&&0<=un;sn--,un--)if(on[sn]!==an[un]){if(sn!==1||un!==1)do if(sn--,un--,0>un||on[sn]!==an[un]){var Xr=`
`+on[sn].replace(" at new "," at ");return Mt.displayName&&Xr.includes("<anonymous>")&&(Xr=Xr.replace("<anonymous>",Mt.displayName)),Xr}while(1<=sn&&0<=un);break}}}finally{Na$1=!1,Error.prepareStackTrace=nn}return(Mt=Mt?Mt.displayName||Mt.name:"")?Ma$1(Mt):""}function Pa$1(Mt){switch(Mt.tag){case 5:return Ma$1(Mt.type);case 16:return Ma$1("Lazy");case 13:return Ma$1("Suspense");case 19:return Ma$1("SuspenseList");case 0:case 2:case 15:return Mt=Oa$1(Mt.type,!1),Mt;case 11:return Mt=Oa$1(Mt.type.render,!1),Mt;case 1:return Mt=Oa$1(Mt.type,!0),Mt;default:return""}}function Qa$1(Mt){if(Mt==null)return null;if(typeof Mt=="function")return Mt.displayName||Mt.name||null;if(typeof Mt=="string")return Mt;switch(Mt){case ya$1:return"Fragment";case wa$1:return"Portal";case Aa$1:return"Profiler";case za$1:return"StrictMode";case Ea$1:return"Suspense";case Fa$1:return"SuspenseList"}if(typeof Mt=="object")switch(Mt.$$typeof){case Ca$1:return(Mt.displayName||"Context")+".Consumer";case Ba$1:return(Mt._context.displayName||"Context")+".Provider";case Da$1:var st=Mt.render;return Mt=Mt.displayName,Mt||(Mt=st.displayName||st.name||"",Mt=Mt!==""?"ForwardRef("+Mt+")":"ForwardRef"),Mt;case Ga$1:return st=Mt.displayName||null,st!==null?st:Qa$1(Mt.type)||"Memo";case Ha$1:st=Mt._payload,Mt=Mt._init;try{return Qa$1(Mt(st))}catch{}}return null}function Ra$1(Mt){var st=Mt.type;switch(Mt.tag){case 24:return"Cache";case 9:return(st.displayName||"Context")+".Consumer";case 10:return(st._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return Mt=st.render,Mt=Mt.displayName||Mt.name||"",st.displayName||(Mt!==""?"ForwardRef("+Mt+")":"ForwardRef");case 7:return"Fragment";case 5:return st;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qa$1(st);case 8:return st===za$1?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof st=="function")return st.displayName||st.name||null;if(typeof st=="string")return st}return null}function Sa$1(Mt){switch(typeof Mt){case"boolean":case"number":case"string":case"undefined":return Mt;case"object":return Mt;default:return""}}function Ta$1(Mt){var st=Mt.type;return(Mt=Mt.nodeName)&&Mt.toLowerCase()==="input"&&(st==="checkbox"||st==="radio")}function Ua$1(Mt){var st=Ta$1(Mt)?"checked":"value",nn=Object.getOwnPropertyDescriptor(Mt.constructor.prototype,st),rn=""+Mt[st];if(!Mt.hasOwnProperty(st)&&typeof nn<"u"&&typeof nn.get=="function"&&typeof nn.set=="function"){var on=nn.get,an=nn.set;return Object.defineProperty(Mt,st,{configurable:!0,get:function(){return on.call(this)},set:function(sn){rn=""+sn,an.call(this,sn)}}),Object.defineProperty(Mt,st,{enumerable:nn.enumerable}),{getValue:function(){return rn},setValue:function(sn){rn=""+sn},stopTracking:function(){Mt._valueTracker=null,delete Mt[st]}}}}function Va$1(Mt){Mt._valueTracker||(Mt._valueTracker=Ua$1(Mt))}function Wa$1(Mt){if(!Mt)return!1;var st=Mt._valueTracker;if(!st)return!0;var nn=st.getValue(),rn="";return Mt&&(rn=Ta$1(Mt)?Mt.checked?"true":"false":Mt.value),Mt=rn,Mt!==nn?(st.setValue(Mt),!0):!1}function Xa$1(Mt){if(Mt=Mt||(typeof document<"u"?document:void 0),typeof Mt>"u")return null;try{return Mt.activeElement||Mt.body}catch{return Mt.body}}function Ya$1(Mt,st){var nn=st.checked;return A$1({},st,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:nn??Mt._wrapperState.initialChecked})}function Za$1(Mt,st){var nn=st.defaultValue==null?"":st.defaultValue,rn=st.checked!=null?st.checked:st.defaultChecked;nn=Sa$1(st.value!=null?st.value:nn),Mt._wrapperState={initialChecked:rn,initialValue:nn,controlled:st.type==="checkbox"||st.type==="radio"?st.checked!=null:st.value!=null}}function ab(Mt,st){st=st.checked,st!=null&&ta$1(Mt,"checked",st,!1)}function bb(Mt,st){ab(Mt,st);var nn=Sa$1(st.value),rn=st.type;if(nn!=null)rn==="number"?(nn===0&&Mt.value===""||Mt.value!=nn)&&(Mt.value=""+nn):Mt.value!==""+nn&&(Mt.value=""+nn);else if(rn==="submit"||rn==="reset"){Mt.removeAttribute("value");return}st.hasOwnProperty("value")?cb(Mt,st.type,nn):st.hasOwnProperty("defaultValue")&&cb(Mt,st.type,Sa$1(st.defaultValue)),st.checked==null&&st.defaultChecked!=null&&(Mt.defaultChecked=!!st.defaultChecked)}function db(Mt,st,nn){if(st.hasOwnProperty("value")||st.hasOwnProperty("defaultValue")){var rn=st.type;if(!(rn!=="submit"&&rn!=="reset"||st.value!==void 0&&st.value!==null))return;st=""+Mt._wrapperState.initialValue,nn||st===Mt.value||(Mt.value=st),Mt.defaultValue=st}nn=Mt.name,nn!==""&&(Mt.name=""),Mt.defaultChecked=!!Mt._wrapperState.initialChecked,nn!==""&&(Mt.name=nn)}function cb(Mt,st,nn){(st!=="number"||Xa$1(Mt.ownerDocument)!==Mt)&&(nn==null?Mt.defaultValue=""+Mt._wrapperState.initialValue:Mt.defaultValue!==""+nn&&(Mt.defaultValue=""+nn))}var eb=Array.isArray;function fb(Mt,st,nn,rn){if(Mt=Mt.options,st){st={};for(var on=0;on<nn.length;on++)st["$"+nn[on]]=!0;for(nn=0;nn<Mt.length;nn++)on=st.hasOwnProperty("$"+Mt[nn].value),Mt[nn].selected!==on&&(Mt[nn].selected=on),on&&rn&&(Mt[nn].defaultSelected=!0)}else{for(nn=""+Sa$1(nn),st=null,on=0;on<Mt.length;on++){if(Mt[on].value===nn){Mt[on].selected=!0,rn&&(Mt[on].defaultSelected=!0);return}st!==null||Mt[on].disabled||(st=Mt[on])}st!==null&&(st.selected=!0)}}function gb(Mt,st){if(st.dangerouslySetInnerHTML!=null)throw Error(p$3(91));return A$1({},st,{value:void 0,defaultValue:void 0,children:""+Mt._wrapperState.initialValue})}function hb(Mt,st){var nn=st.value;if(nn==null){if(nn=st.children,st=st.defaultValue,nn!=null){if(st!=null)throw Error(p$3(92));if(eb(nn)){if(1<nn.length)throw Error(p$3(93));nn=nn[0]}st=nn}st==null&&(st=""),nn=st}Mt._wrapperState={initialValue:Sa$1(nn)}}function ib(Mt,st){var nn=Sa$1(st.value),rn=Sa$1(st.defaultValue);nn!=null&&(nn=""+nn,nn!==Mt.value&&(Mt.value=nn),st.defaultValue==null&&Mt.defaultValue!==nn&&(Mt.defaultValue=nn)),rn!=null&&(Mt.defaultValue=""+rn)}function jb(Mt){var st=Mt.textContent;st===Mt._wrapperState.initialValue&&st!==""&&st!==null&&(Mt.value=st)}function kb(Mt){switch(Mt){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lb(Mt,st){return Mt==null||Mt==="http://www.w3.org/1999/xhtml"?kb(st):Mt==="http://www.w3.org/2000/svg"&&st==="foreignObject"?"http://www.w3.org/1999/xhtml":Mt}var mb,nb=function(Mt){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(st,nn,rn,on){MSApp.execUnsafeLocalFunction(function(){return Mt(st,nn,rn,on)})}:Mt}(function(Mt,st){if(Mt.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in Mt)Mt.innerHTML=st;else{for(mb=mb||document.createElement("div"),mb.innerHTML="<svg>"+st.valueOf().toString()+"</svg>",st=mb.firstChild;Mt.firstChild;)Mt.removeChild(Mt.firstChild);for(;st.firstChild;)Mt.appendChild(st.firstChild)}});function ob(Mt,st){if(st){var nn=Mt.firstChild;if(nn&&nn===Mt.lastChild&&nn.nodeType===3){nn.nodeValue=st;return}}Mt.textContent=st}var pb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qb=["Webkit","ms","Moz","O"];Object.keys(pb).forEach(function(Mt){qb.forEach(function(st){st=st+Mt.charAt(0).toUpperCase()+Mt.substring(1),pb[st]=pb[Mt]})});function rb(Mt,st,nn){return st==null||typeof st=="boolean"||st===""?"":nn||typeof st!="number"||st===0||pb.hasOwnProperty(Mt)&&pb[Mt]?(""+st).trim():st+"px"}function sb(Mt,st){Mt=Mt.style;for(var nn in st)if(st.hasOwnProperty(nn)){var rn=nn.indexOf("--")===0,on=rb(nn,st[nn],rn);nn==="float"&&(nn="cssFloat"),rn?Mt.setProperty(nn,on):Mt[nn]=on}}var tb=A$1({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ub(Mt,st){if(st){if(tb[Mt]&&(st.children!=null||st.dangerouslySetInnerHTML!=null))throw Error(p$3(137,Mt));if(st.dangerouslySetInnerHTML!=null){if(st.children!=null)throw Error(p$3(60));if(typeof st.dangerouslySetInnerHTML!="object"||!("__html"in st.dangerouslySetInnerHTML))throw Error(p$3(61))}if(st.style!=null&&typeof st.style!="object")throw Error(p$3(62))}}function vb(Mt,st){if(Mt.indexOf("-")===-1)return typeof st.is=="string";switch(Mt){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wb=null;function xb(Mt){return Mt=Mt.target||Mt.srcElement||window,Mt.correspondingUseElement&&(Mt=Mt.correspondingUseElement),Mt.nodeType===3?Mt.parentNode:Mt}var yb=null,zb=null,Ab=null;function Bb(Mt){if(Mt=Cb(Mt)){if(typeof yb!="function")throw Error(p$3(280));var st=Mt.stateNode;st&&(st=Db(st),yb(Mt.stateNode,Mt.type,st))}}function Eb(Mt){zb?Ab?Ab.push(Mt):Ab=[Mt]:zb=Mt}function Fb(){if(zb){var Mt=zb,st=Ab;if(Ab=zb=null,Bb(Mt),st)for(Mt=0;Mt<st.length;Mt++)Bb(st[Mt])}}function Gb(Mt,st){return Mt(st)}function Hb(){}var Ib=!1;function Jb(Mt,st,nn){if(Ib)return Mt(st,nn);Ib=!0;try{return Gb(Mt,st,nn)}finally{Ib=!1,(zb!==null||Ab!==null)&&(Hb(),Fb())}}function Kb(Mt,st){var nn=Mt.stateNode;if(nn===null)return null;var rn=Db(nn);if(rn===null)return null;nn=rn[st];e:switch(st){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(rn=!rn.disabled)||(Mt=Mt.type,rn=!(Mt==="button"||Mt==="input"||Mt==="select"||Mt==="textarea")),Mt=!rn;break e;default:Mt=!1}if(Mt)return null;if(nn&&typeof nn!="function")throw Error(p$3(231,st,typeof nn));return nn}var Lb=!1;if(ia$1)try{var Mb={};Object.defineProperty(Mb,"passive",{get:function(){Lb=!0}}),window.addEventListener("test",Mb,Mb),window.removeEventListener("test",Mb,Mb)}catch{Lb=!1}function Nb(Mt,st,nn,rn,on,an,sn,un,Xr){var to=Array.prototype.slice.call(arguments,3);try{st.apply(nn,to)}catch(uo){this.onError(uo)}}var Ob=!1,Pb=null,Qb=!1,Rb=null,Sb={onError:function(Mt){Ob=!0,Pb=Mt}};function Tb(Mt,st,nn,rn,on,an,sn,un,Xr){Ob=!1,Pb=null,Nb.apply(Sb,arguments)}function Ub(Mt,st,nn,rn,on,an,sn,un,Xr){if(Tb.apply(this,arguments),Ob){if(Ob){var to=Pb;Ob=!1,Pb=null}else throw Error(p$3(198));Qb||(Qb=!0,Rb=to)}}function Vb(Mt){var st=Mt,nn=Mt;if(Mt.alternate)for(;st.return;)st=st.return;else{Mt=st;do st=Mt,st.flags&4098&&(nn=st.return),Mt=st.return;while(Mt)}return st.tag===3?nn:null}function Wb(Mt){if(Mt.tag===13){var st=Mt.memoizedState;if(st===null&&(Mt=Mt.alternate,Mt!==null&&(st=Mt.memoizedState)),st!==null)return st.dehydrated}return null}function Xb(Mt){if(Vb(Mt)!==Mt)throw Error(p$3(188))}function Yb(Mt){var st=Mt.alternate;if(!st){if(st=Vb(Mt),st===null)throw Error(p$3(188));return st!==Mt?null:Mt}for(var nn=Mt,rn=st;;){var on=nn.return;if(on===null)break;var an=on.alternate;if(an===null){if(rn=on.return,rn!==null){nn=rn;continue}break}if(on.child===an.child){for(an=on.child;an;){if(an===nn)return Xb(on),Mt;if(an===rn)return Xb(on),st;an=an.sibling}throw Error(p$3(188))}if(nn.return!==rn.return)nn=on,rn=an;else{for(var sn=!1,un=on.child;un;){if(un===nn){sn=!0,nn=on,rn=an;break}if(un===rn){sn=!0,rn=on,nn=an;break}un=un.sibling}if(!sn){for(un=an.child;un;){if(un===nn){sn=!0,nn=an,rn=on;break}if(un===rn){sn=!0,rn=an,nn=on;break}un=un.sibling}if(!sn)throw Error(p$3(189))}}if(nn.alternate!==rn)throw Error(p$3(190))}if(nn.tag!==3)throw Error(p$3(188));return nn.stateNode.current===nn?Mt:st}function Zb(Mt){return Mt=Yb(Mt),Mt!==null?$b(Mt):null}function $b(Mt){if(Mt.tag===5||Mt.tag===6)return Mt;for(Mt=Mt.child;Mt!==null;){var st=$b(Mt);if(st!==null)return st;Mt=Mt.sibling}return null}var ac$1=ca$1.unstable_scheduleCallback,bc$1=ca$1.unstable_cancelCallback,cc$1=ca$1.unstable_shouldYield,dc$1=ca$1.unstable_requestPaint,B$1=ca$1.unstable_now,ec$1=ca$1.unstable_getCurrentPriorityLevel,fc$1=ca$1.unstable_ImmediatePriority,gc$1=ca$1.unstable_UserBlockingPriority,hc$1=ca$1.unstable_NormalPriority,ic$1=ca$1.unstable_LowPriority,jc$1=ca$1.unstable_IdlePriority,kc$1=null,lc$1=null;function mc$1(Mt){if(lc$1&&typeof lc$1.onCommitFiberRoot=="function")try{lc$1.onCommitFiberRoot(kc$1,Mt,void 0,(Mt.current.flags&128)===128)}catch{}}var oc$1=Math.clz32?Math.clz32:nc$1,pc$1=Math.log,qc$1=Math.LN2;function nc$1(Mt){return Mt>>>=0,Mt===0?32:31-(pc$1(Mt)/qc$1|0)|0}var rc$1=64,sc$1=4194304;function tc$1(Mt){switch(Mt&-Mt){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return Mt&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return Mt&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return Mt}}function uc$1(Mt,st){var nn=Mt.pendingLanes;if(nn===0)return 0;var rn=0,on=Mt.suspendedLanes,an=Mt.pingedLanes,sn=nn&268435455;if(sn!==0){var un=sn&~on;un!==0?rn=tc$1(un):(an&=sn,an!==0&&(rn=tc$1(an)))}else sn=nn&~on,sn!==0?rn=tc$1(sn):an!==0&&(rn=tc$1(an));if(rn===0)return 0;if(st!==0&&st!==rn&&!(st&on)&&(on=rn&-rn,an=st&-st,on>=an||on===16&&(an&4194240)!==0))return st;if(rn&4&&(rn|=nn&16),st=Mt.entangledLanes,st!==0)for(Mt=Mt.entanglements,st&=rn;0<st;)nn=31-oc$1(st),on=1<<nn,rn|=Mt[nn],st&=~on;return rn}function vc$1(Mt,st){switch(Mt){case 1:case 2:case 4:return st+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return st+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wc$1(Mt,st){for(var nn=Mt.suspendedLanes,rn=Mt.pingedLanes,on=Mt.expirationTimes,an=Mt.pendingLanes;0<an;){var sn=31-oc$1(an),un=1<<sn,Xr=on[sn];Xr===-1?(!(un&nn)||un&rn)&&(on[sn]=vc$1(un,st)):Xr<=st&&(Mt.expiredLanes|=un),an&=~un}}function xc$1(Mt){return Mt=Mt.pendingLanes&-1073741825,Mt!==0?Mt:Mt&1073741824?1073741824:0}function yc$1(){var Mt=rc$1;return rc$1<<=1,!(rc$1&4194240)&&(rc$1=64),Mt}function zc$1(Mt){for(var st=[],nn=0;31>nn;nn++)st.push(Mt);return st}function Ac$1(Mt,st,nn){Mt.pendingLanes|=st,st!==536870912&&(Mt.suspendedLanes=0,Mt.pingedLanes=0),Mt=Mt.eventTimes,st=31-oc$1(st),Mt[st]=nn}function Bc$1(Mt,st){var nn=Mt.pendingLanes&~st;Mt.pendingLanes=st,Mt.suspendedLanes=0,Mt.pingedLanes=0,Mt.expiredLanes&=st,Mt.mutableReadLanes&=st,Mt.entangledLanes&=st,st=Mt.entanglements;var rn=Mt.eventTimes;for(Mt=Mt.expirationTimes;0<nn;){var on=31-oc$1(nn),an=1<<on;st[on]=0,rn[on]=-1,Mt[on]=-1,nn&=~an}}function Cc$1(Mt,st){var nn=Mt.entangledLanes|=st;for(Mt=Mt.entanglements;nn;){var rn=31-oc$1(nn),on=1<<rn;on&st|Mt[rn]&st&&(Mt[rn]|=st),nn&=~on}}var C$1=0;function Dc$1(Mt){return Mt&=-Mt,1<Mt?4<Mt?Mt&268435455?16:536870912:4:1}var Ec$1,Fc$1,Gc$1,Hc$1,Ic$1,Jc$1=!1,Kc$1=[],Lc$1=null,Mc$1=null,Nc$1=null,Oc$1=new Map,Pc$1=new Map,Qc$1=[],Rc$1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sc$1(Mt,st){switch(Mt){case"focusin":case"focusout":Lc$1=null;break;case"dragenter":case"dragleave":Mc$1=null;break;case"mouseover":case"mouseout":Nc$1=null;break;case"pointerover":case"pointerout":Oc$1.delete(st.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pc$1.delete(st.pointerId)}}function Tc$1(Mt,st,nn,rn,on,an){return Mt===null||Mt.nativeEvent!==an?(Mt={blockedOn:st,domEventName:nn,eventSystemFlags:rn,nativeEvent:an,targetContainers:[on]},st!==null&&(st=Cb(st),st!==null&&Fc$1(st)),Mt):(Mt.eventSystemFlags|=rn,st=Mt.targetContainers,on!==null&&st.indexOf(on)===-1&&st.push(on),Mt)}function Uc$1(Mt,st,nn,rn,on){switch(st){case"focusin":return Lc$1=Tc$1(Lc$1,Mt,st,nn,rn,on),!0;case"dragenter":return Mc$1=Tc$1(Mc$1,Mt,st,nn,rn,on),!0;case"mouseover":return Nc$1=Tc$1(Nc$1,Mt,st,nn,rn,on),!0;case"pointerover":var an=on.pointerId;return Oc$1.set(an,Tc$1(Oc$1.get(an)||null,Mt,st,nn,rn,on)),!0;case"gotpointercapture":return an=on.pointerId,Pc$1.set(an,Tc$1(Pc$1.get(an)||null,Mt,st,nn,rn,on)),!0}return!1}function Vc$1(Mt){var st=Wc$1(Mt.target);if(st!==null){var nn=Vb(st);if(nn!==null){if(st=nn.tag,st===13){if(st=Wb(nn),st!==null){Mt.blockedOn=st,Ic$1(Mt.priority,function(){Gc$1(nn)});return}}else if(st===3&&nn.stateNode.current.memoizedState.isDehydrated){Mt.blockedOn=nn.tag===3?nn.stateNode.containerInfo:null;return}}}Mt.blockedOn=null}function Xc$1(Mt){if(Mt.blockedOn!==null)return!1;for(var st=Mt.targetContainers;0<st.length;){var nn=Yc$1(Mt.domEventName,Mt.eventSystemFlags,st[0],Mt.nativeEvent);if(nn===null){nn=Mt.nativeEvent;var rn=new nn.constructor(nn.type,nn);wb=rn,nn.target.dispatchEvent(rn),wb=null}else return st=Cb(nn),st!==null&&Fc$1(st),Mt.blockedOn=nn,!1;st.shift()}return!0}function Zc$1(Mt,st,nn){Xc$1(Mt)&&nn.delete(st)}function $c$1(){Jc$1=!1,Lc$1!==null&&Xc$1(Lc$1)&&(Lc$1=null),Mc$1!==null&&Xc$1(Mc$1)&&(Mc$1=null),Nc$1!==null&&Xc$1(Nc$1)&&(Nc$1=null),Oc$1.forEach(Zc$1),Pc$1.forEach(Zc$1)}function ad$1(Mt,st){Mt.blockedOn===st&&(Mt.blockedOn=null,Jc$1||(Jc$1=!0,ca$1.unstable_scheduleCallback(ca$1.unstable_NormalPriority,$c$1)))}function bd$1(Mt){function st(on){return ad$1(on,Mt)}if(0<Kc$1.length){ad$1(Kc$1[0],Mt);for(var nn=1;nn<Kc$1.length;nn++){var rn=Kc$1[nn];rn.blockedOn===Mt&&(rn.blockedOn=null)}}for(Lc$1!==null&&ad$1(Lc$1,Mt),Mc$1!==null&&ad$1(Mc$1,Mt),Nc$1!==null&&ad$1(Nc$1,Mt),Oc$1.forEach(st),Pc$1.forEach(st),nn=0;nn<Qc$1.length;nn++)rn=Qc$1[nn],rn.blockedOn===Mt&&(rn.blockedOn=null);for(;0<Qc$1.length&&(nn=Qc$1[0],nn.blockedOn===null);)Vc$1(nn),nn.blockedOn===null&&Qc$1.shift()}var cd$1=ua$1.ReactCurrentBatchConfig,dd=!0;function ed$1(Mt,st,nn,rn){var on=C$1,an=cd$1.transition;cd$1.transition=null;try{C$1=1,fd(Mt,st,nn,rn)}finally{C$1=on,cd$1.transition=an}}function gd(Mt,st,nn,rn){var on=C$1,an=cd$1.transition;cd$1.transition=null;try{C$1=4,fd(Mt,st,nn,rn)}finally{C$1=on,cd$1.transition=an}}function fd(Mt,st,nn,rn){if(dd){var on=Yc$1(Mt,st,nn,rn);if(on===null)hd(Mt,st,rn,id$3,nn),Sc$1(Mt,rn);else if(Uc$1(on,Mt,st,nn,rn))rn.stopPropagation();else if(Sc$1(Mt,rn),st&4&&-1<Rc$1.indexOf(Mt)){for(;on!==null;){var an=Cb(on);if(an!==null&&Ec$1(an),an=Yc$1(Mt,st,nn,rn),an===null&&hd(Mt,st,rn,id$3,nn),an===on)break;on=an}on!==null&&rn.stopPropagation()}else hd(Mt,st,rn,null,nn)}}var id$3=null;function Yc$1(Mt,st,nn,rn){if(id$3=null,Mt=xb(rn),Mt=Wc$1(Mt),Mt!==null)if(st=Vb(Mt),st===null)Mt=null;else if(nn=st.tag,nn===13){if(Mt=Wb(st),Mt!==null)return Mt;Mt=null}else if(nn===3){if(st.stateNode.current.memoizedState.isDehydrated)return st.tag===3?st.stateNode.containerInfo:null;Mt=null}else st!==Mt&&(Mt=null);return id$3=Mt,null}function jd(Mt){switch(Mt){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ec$1()){case fc$1:return 1;case gc$1:return 4;case hc$1:case ic$1:return 16;case jc$1:return 536870912;default:return 16}default:return 16}}var kd$1=null,ld=null,md=null;function nd$1(){if(md)return md;var Mt,st=ld,nn=st.length,rn,on="value"in kd$1?kd$1.value:kd$1.textContent,an=on.length;for(Mt=0;Mt<nn&&st[Mt]===on[Mt];Mt++);var sn=nn-Mt;for(rn=1;rn<=sn&&st[nn-rn]===on[an-rn];rn++);return md=on.slice(Mt,1<rn?1-rn:void 0)}function od(Mt){var st=Mt.keyCode;return"charCode"in Mt?(Mt=Mt.charCode,Mt===0&&st===13&&(Mt=13)):Mt=st,Mt===10&&(Mt=13),32<=Mt||Mt===13?Mt:0}function pd(){return!0}function qd(){return!1}function rd(Mt){function st(nn,rn,on,an,sn){this._reactName=nn,this._targetInst=on,this.type=rn,this.nativeEvent=an,this.target=sn,this.currentTarget=null;for(var un in Mt)Mt.hasOwnProperty(un)&&(nn=Mt[un],this[un]=nn?nn(an):an[un]);return this.isDefaultPrevented=(an.defaultPrevented!=null?an.defaultPrevented:an.returnValue===!1)?pd:qd,this.isPropagationStopped=qd,this}return A$1(st.prototype,{preventDefault:function(){this.defaultPrevented=!0;var nn=this.nativeEvent;nn&&(nn.preventDefault?nn.preventDefault():typeof nn.returnValue!="unknown"&&(nn.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var nn=this.nativeEvent;nn&&(nn.stopPropagation?nn.stopPropagation():typeof nn.cancelBubble!="unknown"&&(nn.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd}),st}var sd$1={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(Mt){return Mt.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td$1=rd(sd$1),ud$1=A$1({},sd$1,{view:0,detail:0}),vd=rd(ud$1),wd$1,xd$1,yd,Ad=A$1({},ud$1,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(Mt){return Mt.relatedTarget===void 0?Mt.fromElement===Mt.srcElement?Mt.toElement:Mt.fromElement:Mt.relatedTarget},movementX:function(Mt){return"movementX"in Mt?Mt.movementX:(Mt!==yd&&(yd&&Mt.type==="mousemove"?(wd$1=Mt.screenX-yd.screenX,xd$1=Mt.screenY-yd.screenY):xd$1=wd$1=0,yd=Mt),wd$1)},movementY:function(Mt){return"movementY"in Mt?Mt.movementY:xd$1}}),Bd=rd(Ad),Cd$1=A$1({},Ad,{dataTransfer:0}),Dd=rd(Cd$1),Ed$1=A$1({},ud$1,{relatedTarget:0}),Fd=rd(Ed$1),Gd=A$1({},sd$1,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id$1=A$1({},sd$1,{clipboardData:function(Mt){return"clipboardData"in Mt?Mt.clipboardData:window.clipboardData}}),Jd=rd(Id$1),Kd=A$1({},sd$1,{data:0}),Ld=rd(Kd),Md={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd(Mt){var st=this.nativeEvent;return st.getModifierState?st.getModifierState(Mt):(Mt=Od[Mt])?!!st[Mt]:!1}function zd(){return Pd}var Qd=A$1({},ud$1,{key:function(Mt){if(Mt.key){var st=Md[Mt.key]||Mt.key;if(st!=="Unidentified")return st}return Mt.type==="keypress"?(Mt=od(Mt),Mt===13?"Enter":String.fromCharCode(Mt)):Mt.type==="keydown"||Mt.type==="keyup"?Nd[Mt.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(Mt){return Mt.type==="keypress"?od(Mt):0},keyCode:function(Mt){return Mt.type==="keydown"||Mt.type==="keyup"?Mt.keyCode:0},which:function(Mt){return Mt.type==="keypress"?od(Mt):Mt.type==="keydown"||Mt.type==="keyup"?Mt.keyCode:0}}),Rd$1=rd(Qd),Sd=A$1({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=A$1({},ud$1,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=A$1({},sd$1,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=A$1({},Ad,{deltaX:function(Mt){return"deltaX"in Mt?Mt.deltaX:"wheelDeltaX"in Mt?-Mt.wheelDeltaX:0},deltaY:function(Mt){return"deltaY"in Mt?Mt.deltaY:"wheelDeltaY"in Mt?-Mt.wheelDeltaY:"wheelDelta"in Mt?-Mt.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae$1=ia$1&&"CompositionEvent"in window,be$1=null;ia$1&&"documentMode"in document&&(be$1=document.documentMode);var ce$1=ia$1&&"TextEvent"in window&&!be$1,de$1=ia$1&&(!ae$1||be$1&&8<be$1&&11>=be$1),ee$1=" ",fe$1=!1;function ge$1(Mt,st){switch(Mt){case"keyup":return $d.indexOf(st.keyCode)!==-1;case"keydown":return st.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he$1(Mt){return Mt=Mt.detail,typeof Mt=="object"&&"data"in Mt?Mt.data:null}var ie$1=!1;function je(Mt,st){switch(Mt){case"compositionend":return he$1(st);case"keypress":return st.which!==32?null:(fe$1=!0,ee$1);case"textInput":return Mt=st.data,Mt===ee$1&&fe$1?null:Mt;default:return null}}function ke$1(Mt,st){if(ie$1)return Mt==="compositionend"||!ae$1&&ge$1(Mt,st)?(Mt=nd$1(),md=ld=kd$1=null,ie$1=!1,Mt):null;switch(Mt){case"paste":return null;case"keypress":if(!(st.ctrlKey||st.altKey||st.metaKey)||st.ctrlKey&&st.altKey){if(st.char&&1<st.char.length)return st.char;if(st.which)return String.fromCharCode(st.which)}return null;case"compositionend":return de$1&&st.locale!=="ko"?null:st.data;default:return null}}var le$1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me$1(Mt){var st=Mt&&Mt.nodeName&&Mt.nodeName.toLowerCase();return st==="input"?!!le$1[Mt.type]:st==="textarea"}function ne$1(Mt,st,nn,rn){Eb(rn),st=oe$1(st,"onChange"),0<st.length&&(nn=new td$1("onChange","change",null,nn,rn),Mt.push({event:nn,listeners:st}))}var pe$1=null,qe=null;function re$2(Mt){se$1(Mt,0)}function te$1(Mt){var st=ue$1(Mt);if(Wa$1(st))return Mt}function ve$1(Mt,st){if(Mt==="change")return st}var we$1=!1;if(ia$1){var xe$1;if(ia$1){var ye$1="oninput"in document;if(!ye$1){var ze$1=document.createElement("div");ze$1.setAttribute("oninput","return;"),ye$1=typeof ze$1.oninput=="function"}xe$1=ye$1}else xe$1=!1;we$1=xe$1&&(!document.documentMode||9<document.documentMode)}function Ae$1(){pe$1&&(pe$1.detachEvent("onpropertychange",Be$1),qe=pe$1=null)}function Be$1(Mt){if(Mt.propertyName==="value"&&te$1(qe)){var st=[];ne$1(st,qe,Mt,xb(Mt)),Jb(re$2,st)}}function Ce$1(Mt,st,nn){Mt==="focusin"?(Ae$1(),pe$1=st,qe=nn,pe$1.attachEvent("onpropertychange",Be$1)):Mt==="focusout"&&Ae$1()}function De$1(Mt){if(Mt==="selectionchange"||Mt==="keyup"||Mt==="keydown")return te$1(qe)}function Ee$1(Mt,st){if(Mt==="click")return te$1(st)}function Fe$1(Mt,st){if(Mt==="input"||Mt==="change")return te$1(st)}function Ge(Mt,st){return Mt===st&&(Mt!==0||1/Mt===1/st)||Mt!==Mt&&st!==st}var He$1=typeof Object.is=="function"?Object.is:Ge;function Ie$1(Mt,st){if(He$1(Mt,st))return!0;if(typeof Mt!="object"||Mt===null||typeof st!="object"||st===null)return!1;var nn=Object.keys(Mt),rn=Object.keys(st);if(nn.length!==rn.length)return!1;for(rn=0;rn<nn.length;rn++){var on=nn[rn];if(!ja$1.call(st,on)||!He$1(Mt[on],st[on]))return!1}return!0}function Je(Mt){for(;Mt&&Mt.firstChild;)Mt=Mt.firstChild;return Mt}function Ke(Mt,st){var nn=Je(Mt);Mt=0;for(var rn;nn;){if(nn.nodeType===3){if(rn=Mt+nn.textContent.length,Mt<=st&&rn>=st)return{node:nn,offset:st-Mt};Mt=rn}e:{for(;nn;){if(nn.nextSibling){nn=nn.nextSibling;break e}nn=nn.parentNode}nn=void 0}nn=Je(nn)}}function Le$1(Mt,st){return Mt&&st?Mt===st?!0:Mt&&Mt.nodeType===3?!1:st&&st.nodeType===3?Le$1(Mt,st.parentNode):"contains"in Mt?Mt.contains(st):Mt.compareDocumentPosition?!!(Mt.compareDocumentPosition(st)&16):!1:!1}function Me$1(){for(var Mt=window,st=Xa$1();st instanceof Mt.HTMLIFrameElement;){try{var nn=typeof st.contentWindow.location.href=="string"}catch{nn=!1}if(nn)Mt=st.contentWindow;else break;st=Xa$1(Mt.document)}return st}function Ne$1(Mt){var st=Mt&&Mt.nodeName&&Mt.nodeName.toLowerCase();return st&&(st==="input"&&(Mt.type==="text"||Mt.type==="search"||Mt.type==="tel"||Mt.type==="url"||Mt.type==="password")||st==="textarea"||Mt.contentEditable==="true")}function Oe$1(Mt){var st=Me$1(),nn=Mt.focusedElem,rn=Mt.selectionRange;if(st!==nn&&nn&&nn.ownerDocument&&Le$1(nn.ownerDocument.documentElement,nn)){if(rn!==null&&Ne$1(nn)){if(st=rn.start,Mt=rn.end,Mt===void 0&&(Mt=st),"selectionStart"in nn)nn.selectionStart=st,nn.selectionEnd=Math.min(Mt,nn.value.length);else if(Mt=(st=nn.ownerDocument||document)&&st.defaultView||window,Mt.getSelection){Mt=Mt.getSelection();var on=nn.textContent.length,an=Math.min(rn.start,on);rn=rn.end===void 0?an:Math.min(rn.end,on),!Mt.extend&&an>rn&&(on=rn,rn=an,an=on),on=Ke(nn,an);var sn=Ke(nn,rn);on&&sn&&(Mt.rangeCount!==1||Mt.anchorNode!==on.node||Mt.anchorOffset!==on.offset||Mt.focusNode!==sn.node||Mt.focusOffset!==sn.offset)&&(st=st.createRange(),st.setStart(on.node,on.offset),Mt.removeAllRanges(),an>rn?(Mt.addRange(st),Mt.extend(sn.node,sn.offset)):(st.setEnd(sn.node,sn.offset),Mt.addRange(st)))}}for(st=[],Mt=nn;Mt=Mt.parentNode;)Mt.nodeType===1&&st.push({element:Mt,left:Mt.scrollLeft,top:Mt.scrollTop});for(typeof nn.focus=="function"&&nn.focus(),nn=0;nn<st.length;nn++)Mt=st[nn],Mt.element.scrollLeft=Mt.left,Mt.element.scrollTop=Mt.top}}var Pe$1=ia$1&&"documentMode"in document&&11>=document.documentMode,Qe=null,Re$1=null,Se$1=null,Te$1=!1;function Ue$1(Mt,st,nn){var rn=nn.window===nn?nn.document:nn.nodeType===9?nn:nn.ownerDocument;Te$1||Qe==null||Qe!==Xa$1(rn)||(rn=Qe,"selectionStart"in rn&&Ne$1(rn)?rn={start:rn.selectionStart,end:rn.selectionEnd}:(rn=(rn.ownerDocument&&rn.ownerDocument.defaultView||window).getSelection(),rn={anchorNode:rn.anchorNode,anchorOffset:rn.anchorOffset,focusNode:rn.focusNode,focusOffset:rn.focusOffset}),Se$1&&Ie$1(Se$1,rn)||(Se$1=rn,rn=oe$1(Re$1,"onSelect"),0<rn.length&&(st=new td$1("onSelect","select",null,st,nn),Mt.push({event:st,listeners:rn}),st.target=Qe)))}function Ve$1(Mt,st){var nn={};return nn[Mt.toLowerCase()]=st.toLowerCase(),nn["Webkit"+Mt]="webkit"+st,nn["Moz"+Mt]="moz"+st,nn}var We$1={animationend:Ve$1("Animation","AnimationEnd"),animationiteration:Ve$1("Animation","AnimationIteration"),animationstart:Ve$1("Animation","AnimationStart"),transitionend:Ve$1("Transition","TransitionEnd")},Xe$1={},Ye={};ia$1&&(Ye=document.createElement("div").style,"AnimationEvent"in window||(delete We$1.animationend.animation,delete We$1.animationiteration.animation,delete We$1.animationstart.animation),"TransitionEvent"in window||delete We$1.transitionend.transition);function Ze$1(Mt){if(Xe$1[Mt])return Xe$1[Mt];if(!We$1[Mt])return Mt;var st=We$1[Mt],nn;for(nn in st)if(st.hasOwnProperty(nn)&&nn in Ye)return Xe$1[Mt]=st[nn];return Mt}var $e=Ze$1("animationend"),af$1=Ze$1("animationiteration"),bf$1=Ze$1("animationstart"),cf$1=Ze$1("transitionend"),df$1=new Map,ef$1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ff$1(Mt,st){df$1.set(Mt,st),fa$1(st,[Mt])}for(var gf$1=0;gf$1<ef$1.length;gf$1++){var hf$1=ef$1[gf$1],jf$1=hf$1.toLowerCase(),kf$1=hf$1[0].toUpperCase()+hf$1.slice(1);ff$1(jf$1,"on"+kf$1)}ff$1($e,"onAnimationEnd");ff$1(af$1,"onAnimationIteration");ff$1(bf$1,"onAnimationStart");ff$1("dblclick","onDoubleClick");ff$1("focusin","onFocus");ff$1("focusout","onBlur");ff$1(cf$1,"onTransitionEnd");ha$1("onMouseEnter",["mouseout","mouseover"]);ha$1("onMouseLeave",["mouseout","mouseover"]);ha$1("onPointerEnter",["pointerout","pointerover"]);ha$1("onPointerLeave",["pointerout","pointerover"]);fa$1("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fa$1("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fa$1("onBeforeInput",["compositionend","keypress","textInput","paste"]);fa$1("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fa$1("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fa$1("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf$1="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mf$1=new Set("cancel close invalid load scroll toggle".split(" ").concat(lf$1));function nf$1(Mt,st,nn){var rn=Mt.type||"unknown-event";Mt.currentTarget=nn,Ub(rn,st,void 0,Mt),Mt.currentTarget=null}function se$1(Mt,st){st=(st&4)!==0;for(var nn=0;nn<Mt.length;nn++){var rn=Mt[nn],on=rn.event;rn=rn.listeners;e:{var an=void 0;if(st)for(var sn=rn.length-1;0<=sn;sn--){var un=rn[sn],Xr=un.instance,to=un.currentTarget;if(un=un.listener,Xr!==an&&on.isPropagationStopped())break e;nf$1(on,un,to),an=Xr}else for(sn=0;sn<rn.length;sn++){if(un=rn[sn],Xr=un.instance,to=un.currentTarget,un=un.listener,Xr!==an&&on.isPropagationStopped())break e;nf$1(on,un,to),an=Xr}}}if(Qb)throw Mt=Rb,Qb=!1,Rb=null,Mt}function D$1(Mt,st){var nn=st[of$1];nn===void 0&&(nn=st[of$1]=new Set);var rn=Mt+"__bubble";nn.has(rn)||(pf$1(st,Mt,2,!1),nn.add(rn))}function qf$1(Mt,st,nn){var rn=0;st&&(rn|=4),pf$1(nn,Mt,rn,st)}var rf$1="_reactListening"+Math.random().toString(36).slice(2);function sf$1(Mt){if(!Mt[rf$1]){Mt[rf$1]=!0,da$1.forEach(function(nn){nn!=="selectionchange"&&(mf$1.has(nn)||qf$1(nn,!1,Mt),qf$1(nn,!0,Mt))});var st=Mt.nodeType===9?Mt:Mt.ownerDocument;st===null||st[rf$1]||(st[rf$1]=!0,qf$1("selectionchange",!1,st))}}function pf$1(Mt,st,nn,rn){switch(jd(st)){case 1:var on=ed$1;break;case 4:on=gd;break;default:on=fd}nn=on.bind(null,st,nn,Mt),on=void 0,!Lb||st!=="touchstart"&&st!=="touchmove"&&st!=="wheel"||(on=!0),rn?on!==void 0?Mt.addEventListener(st,nn,{capture:!0,passive:on}):Mt.addEventListener(st,nn,!0):on!==void 0?Mt.addEventListener(st,nn,{passive:on}):Mt.addEventListener(st,nn,!1)}function hd(Mt,st,nn,rn,on){var an=rn;if(!(st&1)&&!(st&2)&&rn!==null)e:for(;;){if(rn===null)return;var sn=rn.tag;if(sn===3||sn===4){var un=rn.stateNode.containerInfo;if(un===on||un.nodeType===8&&un.parentNode===on)break;if(sn===4)for(sn=rn.return;sn!==null;){var Xr=sn.tag;if((Xr===3||Xr===4)&&(Xr=sn.stateNode.containerInfo,Xr===on||Xr.nodeType===8&&Xr.parentNode===on))return;sn=sn.return}for(;un!==null;){if(sn=Wc$1(un),sn===null)return;if(Xr=sn.tag,Xr===5||Xr===6){rn=an=sn;continue e}un=un.parentNode}}rn=rn.return}Jb(function(){var to=an,uo=xb(nn),hn=[];e:{var fn=df$1.get(Mt);if(fn!==void 0){var co=td$1,lo=Mt;switch(Mt){case"keypress":if(od(nn)===0)break e;case"keydown":case"keyup":co=Rd$1;break;case"focusin":lo="focus",co=Fd;break;case"focusout":lo="blur",co=Fd;break;case"beforeblur":case"afterblur":co=Fd;break;case"click":if(nn.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":co=Bd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":co=Dd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":co=Vd;break;case $e:case af$1:case bf$1:co=Hd;break;case cf$1:co=Xd;break;case"scroll":co=vd;break;case"wheel":co=Zd;break;case"copy":case"cut":case"paste":co=Jd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":co=Td}var fo=(st&4)!==0,ho=!fo&&Mt==="scroll",mo=fo?fn!==null?fn+"Capture":null:fn;fo=[];for(var Uo=to,_d;Uo!==null;){_d=Uo;var tp=_d.stateNode;if(_d.tag===5&&tp!==null&&(_d=tp,mo!==null&&(tp=Kb(Uo,mo),tp!=null&&fo.push(tf$1(Uo,tp,_d)))),ho)break;Uo=Uo.return}0<fo.length&&(fn=new co(fn,lo,null,nn,uo),hn.push({event:fn,listeners:fo}))}}if(!(st&7)){e:{if(fn=Mt==="mouseover"||Mt==="pointerover",co=Mt==="mouseout"||Mt==="pointerout",fn&&nn!==wb&&(lo=nn.relatedTarget||nn.fromElement)&&(Wc$1(lo)||lo[uf$1]))break e;if((co||fn)&&(fn=uo.window===uo?uo:(fn=uo.ownerDocument)?fn.defaultView||fn.parentWindow:window,co?(lo=nn.relatedTarget||nn.toElement,co=to,lo=lo?Wc$1(lo):null,lo!==null&&(ho=Vb(lo),lo!==ho||lo.tag!==5&&lo.tag!==6)&&(lo=null)):(co=null,lo=to),co!==lo)){if(fo=Bd,tp="onMouseLeave",mo="onMouseEnter",Uo="mouse",(Mt==="pointerout"||Mt==="pointerover")&&(fo=Td,tp="onPointerLeave",mo="onPointerEnter",Uo="pointer"),ho=co==null?fn:ue$1(co),_d=lo==null?fn:ue$1(lo),fn=new fo(tp,Uo+"leave",co,nn,uo),fn.target=ho,fn.relatedTarget=_d,tp=null,Wc$1(uo)===to&&(fo=new fo(mo,Uo+"enter",lo,nn,uo),fo.target=_d,fo.relatedTarget=ho,tp=fo),ho=tp,co&&lo)t:{for(fo=co,mo=lo,Uo=0,_d=fo;_d;_d=vf$1(_d))Uo++;for(_d=0,tp=mo;tp;tp=vf$1(tp))_d++;for(;0<Uo-_d;)fo=vf$1(fo),Uo--;for(;0<_d-Uo;)mo=vf$1(mo),_d--;for(;Uo--;){if(fo===mo||mo!==null&&fo===mo.alternate)break t;fo=vf$1(fo),mo=vf$1(mo)}fo=null}else fo=null;co!==null&&wf$1(hn,fn,co,fo,!1),lo!==null&&ho!==null&&wf$1(hn,ho,lo,fo,!0)}}e:{if(fn=to?ue$1(to):window,co=fn.nodeName&&fn.nodeName.toLowerCase(),co==="select"||co==="input"&&fn.type==="file")var ep=ve$1;else if(me$1(fn))if(we$1)ep=Fe$1;else{ep=De$1;var np=Ce$1}else(co=fn.nodeName)&&co.toLowerCase()==="input"&&(fn.type==="checkbox"||fn.type==="radio")&&(ep=Ee$1);if(ep&&(ep=ep(Mt,to))){ne$1(hn,ep,nn,uo);break e}np&&np(Mt,fn,to),Mt==="focusout"&&(np=fn._wrapperState)&&np.controlled&&fn.type==="number"&&cb(fn,"number",fn.value)}switch(np=to?ue$1(to):window,Mt){case"focusin":(me$1(np)||np.contentEditable==="true")&&(Qe=np,Re$1=to,Se$1=null);break;case"focusout":Se$1=Re$1=Qe=null;break;case"mousedown":Te$1=!0;break;case"contextmenu":case"mouseup":case"dragend":Te$1=!1,Ue$1(hn,nn,uo);break;case"selectionchange":if(Pe$1)break;case"keydown":case"keyup":Ue$1(hn,nn,uo)}var rp;if(ae$1)e:{switch(Mt){case"compositionstart":var ip="onCompositionStart";break e;case"compositionend":ip="onCompositionEnd";break e;case"compositionupdate":ip="onCompositionUpdate";break e}ip=void 0}else ie$1?ge$1(Mt,nn)&&(ip="onCompositionEnd"):Mt==="keydown"&&nn.keyCode===229&&(ip="onCompositionStart");ip&&(de$1&&nn.locale!=="ko"&&(ie$1||ip!=="onCompositionStart"?ip==="onCompositionEnd"&&ie$1&&(rp=nd$1()):(kd$1=uo,ld="value"in kd$1?kd$1.value:kd$1.textContent,ie$1=!0)),np=oe$1(to,ip),0<np.length&&(ip=new Ld(ip,Mt,null,nn,uo),hn.push({event:ip,listeners:np}),rp?ip.data=rp:(rp=he$1(nn),rp!==null&&(ip.data=rp)))),(rp=ce$1?je(Mt,nn):ke$1(Mt,nn))&&(to=oe$1(to,"onBeforeInput"),0<to.length&&(uo=new Ld("onBeforeInput","beforeinput",null,nn,uo),hn.push({event:uo,listeners:to}),uo.data=rp))}se$1(hn,st)})}function tf$1(Mt,st,nn){return{instance:Mt,listener:st,currentTarget:nn}}function oe$1(Mt,st){for(var nn=st+"Capture",rn=[];Mt!==null;){var on=Mt,an=on.stateNode;on.tag===5&&an!==null&&(on=an,an=Kb(Mt,nn),an!=null&&rn.unshift(tf$1(Mt,an,on)),an=Kb(Mt,st),an!=null&&rn.push(tf$1(Mt,an,on))),Mt=Mt.return}return rn}function vf$1(Mt){if(Mt===null)return null;do Mt=Mt.return;while(Mt&&Mt.tag!==5);return Mt||null}function wf$1(Mt,st,nn,rn,on){for(var an=st._reactName,sn=[];nn!==null&&nn!==rn;){var un=nn,Xr=un.alternate,to=un.stateNode;if(Xr!==null&&Xr===rn)break;un.tag===5&&to!==null&&(un=to,on?(Xr=Kb(nn,an),Xr!=null&&sn.unshift(tf$1(nn,Xr,un))):on||(Xr=Kb(nn,an),Xr!=null&&sn.push(tf$1(nn,Xr,un)))),nn=nn.return}sn.length!==0&&Mt.push({event:st,listeners:sn})}var xf$1=/\r\n?/g,yf$1=/\u0000|\uFFFD/g;function zf$1(Mt){return(typeof Mt=="string"?Mt:""+Mt).replace(xf$1,`
`).replace(yf$1,"")}function Af$1(Mt,st,nn){if(st=zf$1(st),zf$1(Mt)!==st&&nn)throw Error(p$3(425))}function Bf$1(){}var Cf$1=null,Df$1=null;function Ef$1(Mt,st){return Mt==="textarea"||Mt==="noscript"||typeof st.children=="string"||typeof st.children=="number"||typeof st.dangerouslySetInnerHTML=="object"&&st.dangerouslySetInnerHTML!==null&&st.dangerouslySetInnerHTML.__html!=null}var Ff$1=typeof setTimeout=="function"?setTimeout:void 0,Gf$1=typeof clearTimeout=="function"?clearTimeout:void 0,Hf$1=typeof Promise=="function"?Promise:void 0,Jf$1=typeof queueMicrotask=="function"?queueMicrotask:typeof Hf$1<"u"?function(Mt){return Hf$1.resolve(null).then(Mt).catch(If$2)}:Ff$1;function If$2(Mt){setTimeout(function(){throw Mt})}function Kf$1(Mt,st){var nn=st,rn=0;do{var on=nn.nextSibling;if(Mt.removeChild(nn),on&&on.nodeType===8)if(nn=on.data,nn==="/$"){if(rn===0){Mt.removeChild(on),bd$1(st);return}rn--}else nn!=="$"&&nn!=="$?"&&nn!=="$!"||rn++;nn=on}while(nn);bd$1(st)}function Lf$1(Mt){for(;Mt!=null;Mt=Mt.nextSibling){var st=Mt.nodeType;if(st===1||st===3)break;if(st===8){if(st=Mt.data,st==="$"||st==="$!"||st==="$?")break;if(st==="/$")return null}}return Mt}function Mf$1(Mt){Mt=Mt.previousSibling;for(var st=0;Mt;){if(Mt.nodeType===8){var nn=Mt.data;if(nn==="$"||nn==="$!"||nn==="$?"){if(st===0)return Mt;st--}else nn==="/$"&&st++}Mt=Mt.previousSibling}return null}var Nf$1=Math.random().toString(36).slice(2),Of$1="__reactFiber$"+Nf$1,Pf$1="__reactProps$"+Nf$1,uf$1="__reactContainer$"+Nf$1,of$1="__reactEvents$"+Nf$1,Qf$1="__reactListeners$"+Nf$1,Rf$1="__reactHandles$"+Nf$1;function Wc$1(Mt){var st=Mt[Of$1];if(st)return st;for(var nn=Mt.parentNode;nn;){if(st=nn[uf$1]||nn[Of$1]){if(nn=st.alternate,st.child!==null||nn!==null&&nn.child!==null)for(Mt=Mf$1(Mt);Mt!==null;){if(nn=Mt[Of$1])return nn;Mt=Mf$1(Mt)}return st}Mt=nn,nn=Mt.parentNode}return null}function Cb(Mt){return Mt=Mt[Of$1]||Mt[uf$1],!Mt||Mt.tag!==5&&Mt.tag!==6&&Mt.tag!==13&&Mt.tag!==3?null:Mt}function ue$1(Mt){if(Mt.tag===5||Mt.tag===6)return Mt.stateNode;throw Error(p$3(33))}function Db(Mt){return Mt[Pf$1]||null}var Sf$1=[],Tf$1=-1;function Uf$1(Mt){return{current:Mt}}function E$1(Mt){0>Tf$1||(Mt.current=Sf$1[Tf$1],Sf$1[Tf$1]=null,Tf$1--)}function G$1(Mt,st){Tf$1++,Sf$1[Tf$1]=Mt.current,Mt.current=st}var Vf$1={},H$1=Uf$1(Vf$1),Wf$1=Uf$1(!1),Xf$1=Vf$1;function Yf$1(Mt,st){var nn=Mt.type.contextTypes;if(!nn)return Vf$1;var rn=Mt.stateNode;if(rn&&rn.__reactInternalMemoizedUnmaskedChildContext===st)return rn.__reactInternalMemoizedMaskedChildContext;var on={},an;for(an in nn)on[an]=st[an];return rn&&(Mt=Mt.stateNode,Mt.__reactInternalMemoizedUnmaskedChildContext=st,Mt.__reactInternalMemoizedMaskedChildContext=on),on}function Zf$1(Mt){return Mt=Mt.childContextTypes,Mt!=null}function $f$1(){E$1(Wf$1),E$1(H$1)}function ag(Mt,st,nn){if(H$1.current!==Vf$1)throw Error(p$3(168));G$1(H$1,st),G$1(Wf$1,nn)}function bg(Mt,st,nn){var rn=Mt.stateNode;if(st=st.childContextTypes,typeof rn.getChildContext!="function")return nn;rn=rn.getChildContext();for(var on in rn)if(!(on in st))throw Error(p$3(108,Ra$1(Mt)||"Unknown",on));return A$1({},nn,rn)}function cg(Mt){return Mt=(Mt=Mt.stateNode)&&Mt.__reactInternalMemoizedMergedChildContext||Vf$1,Xf$1=H$1.current,G$1(H$1,Mt),G$1(Wf$1,Wf$1.current),!0}function dg(Mt,st,nn){var rn=Mt.stateNode;if(!rn)throw Error(p$3(169));nn?(Mt=bg(Mt,st,Xf$1),rn.__reactInternalMemoizedMergedChildContext=Mt,E$1(Wf$1),E$1(H$1),G$1(H$1,Mt)):E$1(Wf$1),G$1(Wf$1,nn)}var eg=null,fg=!1,gg=!1;function hg(Mt){eg===null?eg=[Mt]:eg.push(Mt)}function ig(Mt){fg=!0,hg(Mt)}function jg(){if(!gg&&eg!==null){gg=!0;var Mt=0,st=C$1;try{var nn=eg;for(C$1=1;Mt<nn.length;Mt++){var rn=nn[Mt];do rn=rn(!0);while(rn!==null)}eg=null,fg=!1}catch(on){throw eg!==null&&(eg=eg.slice(Mt+1)),ac$1(fc$1,jg),on}finally{C$1=st,gg=!1}}return null}var kg=[],lg=0,mg=null,ng=0,og=[],pg=0,qg=null,rg=1,sg="";function tg(Mt,st){kg[lg++]=ng,kg[lg++]=mg,mg=Mt,ng=st}function ug(Mt,st,nn){og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,qg=Mt;var rn=rg;Mt=sg;var on=32-oc$1(rn)-1;rn&=~(1<<on),nn+=1;var an=32-oc$1(st)+on;if(30<an){var sn=on-on%5;an=(rn&(1<<sn)-1).toString(32),rn>>=sn,on-=sn,rg=1<<32-oc$1(st)+on|nn<<on|rn,sg=an+Mt}else rg=1<<an|nn<<on|rn,sg=Mt}function vg(Mt){Mt.return!==null&&(tg(Mt,1),ug(Mt,1,0))}function wg(Mt){for(;Mt===mg;)mg=kg[--lg],kg[lg]=null,ng=kg[--lg],kg[lg]=null;for(;Mt===qg;)qg=og[--pg],og[pg]=null,sg=og[--pg],og[pg]=null,rg=og[--pg],og[pg]=null}var xg=null,yg=null,I$1=!1,zg=null;function Ag(Mt,st){var nn=Bg(5,null,null,0);nn.elementType="DELETED",nn.stateNode=st,nn.return=Mt,st=Mt.deletions,st===null?(Mt.deletions=[nn],Mt.flags|=16):st.push(nn)}function Cg(Mt,st){switch(Mt.tag){case 5:var nn=Mt.type;return st=st.nodeType!==1||nn.toLowerCase()!==st.nodeName.toLowerCase()?null:st,st!==null?(Mt.stateNode=st,xg=Mt,yg=Lf$1(st.firstChild),!0):!1;case 6:return st=Mt.pendingProps===""||st.nodeType!==3?null:st,st!==null?(Mt.stateNode=st,xg=Mt,yg=null,!0):!1;case 13:return st=st.nodeType!==8?null:st,st!==null?(nn=qg!==null?{id:rg,overflow:sg}:null,Mt.memoizedState={dehydrated:st,treeContext:nn,retryLane:1073741824},nn=Bg(18,null,null,0),nn.stateNode=st,nn.return=Mt,Mt.child=nn,xg=Mt,yg=null,!0):!1;default:return!1}}function Dg(Mt){return(Mt.mode&1)!==0&&(Mt.flags&128)===0}function Eg(Mt){if(I$1){var st=yg;if(st){var nn=st;if(!Cg(Mt,st)){if(Dg(Mt))throw Error(p$3(418));st=Lf$1(nn.nextSibling);var rn=xg;st&&Cg(Mt,st)?Ag(rn,nn):(Mt.flags=Mt.flags&-4097|2,I$1=!1,xg=Mt)}}else{if(Dg(Mt))throw Error(p$3(418));Mt.flags=Mt.flags&-4097|2,I$1=!1,xg=Mt}}}function Fg(Mt){for(Mt=Mt.return;Mt!==null&&Mt.tag!==5&&Mt.tag!==3&&Mt.tag!==13;)Mt=Mt.return;xg=Mt}function Gg(Mt){if(Mt!==xg)return!1;if(!I$1)return Fg(Mt),I$1=!0,!1;var st;if((st=Mt.tag!==3)&&!(st=Mt.tag!==5)&&(st=Mt.type,st=st!=="head"&&st!=="body"&&!Ef$1(Mt.type,Mt.memoizedProps)),st&&(st=yg)){if(Dg(Mt))throw Hg(),Error(p$3(418));for(;st;)Ag(Mt,st),st=Lf$1(st.nextSibling)}if(Fg(Mt),Mt.tag===13){if(Mt=Mt.memoizedState,Mt=Mt!==null?Mt.dehydrated:null,!Mt)throw Error(p$3(317));e:{for(Mt=Mt.nextSibling,st=0;Mt;){if(Mt.nodeType===8){var nn=Mt.data;if(nn==="/$"){if(st===0){yg=Lf$1(Mt.nextSibling);break e}st--}else nn!=="$"&&nn!=="$!"&&nn!=="$?"||st++}Mt=Mt.nextSibling}yg=null}}else yg=xg?Lf$1(Mt.stateNode.nextSibling):null;return!0}function Hg(){for(var Mt=yg;Mt;)Mt=Lf$1(Mt.nextSibling)}function Ig(){yg=xg=null,I$1=!1}function Jg(Mt){zg===null?zg=[Mt]:zg.push(Mt)}var Kg=ua$1.ReactCurrentBatchConfig;function Lg(Mt,st,nn){if(Mt=nn.ref,Mt!==null&&typeof Mt!="function"&&typeof Mt!="object"){if(nn._owner){if(nn=nn._owner,nn){if(nn.tag!==1)throw Error(p$3(309));var rn=nn.stateNode}if(!rn)throw Error(p$3(147,Mt));var on=rn,an=""+Mt;return st!==null&&st.ref!==null&&typeof st.ref=="function"&&st.ref._stringRef===an?st.ref:(st=function(sn){var un=on.refs;sn===null?delete un[an]:un[an]=sn},st._stringRef=an,st)}if(typeof Mt!="string")throw Error(p$3(284));if(!nn._owner)throw Error(p$3(290,Mt))}return Mt}function Mg(Mt,st){throw Mt=Object.prototype.toString.call(st),Error(p$3(31,Mt==="[object Object]"?"object with keys {"+Object.keys(st).join(", ")+"}":Mt))}function Ng(Mt){var st=Mt._init;return st(Mt._payload)}function Og(Mt){function st(mo,Uo){if(Mt){var _d=mo.deletions;_d===null?(mo.deletions=[Uo],mo.flags|=16):_d.push(Uo)}}function nn(mo,Uo){if(!Mt)return null;for(;Uo!==null;)st(mo,Uo),Uo=Uo.sibling;return null}function rn(mo,Uo){for(mo=new Map;Uo!==null;)Uo.key!==null?mo.set(Uo.key,Uo):mo.set(Uo.index,Uo),Uo=Uo.sibling;return mo}function on(mo,Uo){return mo=Pg(mo,Uo),mo.index=0,mo.sibling=null,mo}function an(mo,Uo,_d){return mo.index=_d,Mt?(_d=mo.alternate,_d!==null?(_d=_d.index,_d<Uo?(mo.flags|=2,Uo):_d):(mo.flags|=2,Uo)):(mo.flags|=1048576,Uo)}function sn(mo){return Mt&&mo.alternate===null&&(mo.flags|=2),mo}function un(mo,Uo,_d,tp){return Uo===null||Uo.tag!==6?(Uo=Qg(_d,mo.mode,tp),Uo.return=mo,Uo):(Uo=on(Uo,_d),Uo.return=mo,Uo)}function Xr(mo,Uo,_d,tp){var ep=_d.type;return ep===ya$1?uo(mo,Uo,_d.props.children,tp,_d.key):Uo!==null&&(Uo.elementType===ep||typeof ep=="object"&&ep!==null&&ep.$$typeof===Ha$1&&Ng(ep)===Uo.type)?(tp=on(Uo,_d.props),tp.ref=Lg(mo,Uo,_d),tp.return=mo,tp):(tp=Rg(_d.type,_d.key,_d.props,null,mo.mode,tp),tp.ref=Lg(mo,Uo,_d),tp.return=mo,tp)}function to(mo,Uo,_d,tp){return Uo===null||Uo.tag!==4||Uo.stateNode.containerInfo!==_d.containerInfo||Uo.stateNode.implementation!==_d.implementation?(Uo=Sg(_d,mo.mode,tp),Uo.return=mo,Uo):(Uo=on(Uo,_d.children||[]),Uo.return=mo,Uo)}function uo(mo,Uo,_d,tp,ep){return Uo===null||Uo.tag!==7?(Uo=Tg(_d,mo.mode,tp,ep),Uo.return=mo,Uo):(Uo=on(Uo,_d),Uo.return=mo,Uo)}function hn(mo,Uo,_d){if(typeof Uo=="string"&&Uo!==""||typeof Uo=="number")return Uo=Qg(""+Uo,mo.mode,_d),Uo.return=mo,Uo;if(typeof Uo=="object"&&Uo!==null){switch(Uo.$$typeof){case va$1:return _d=Rg(Uo.type,Uo.key,Uo.props,null,mo.mode,_d),_d.ref=Lg(mo,null,Uo),_d.return=mo,_d;case wa$1:return Uo=Sg(Uo,mo.mode,_d),Uo.return=mo,Uo;case Ha$1:var tp=Uo._init;return hn(mo,tp(Uo._payload),_d)}if(eb(Uo)||Ka$1(Uo))return Uo=Tg(Uo,mo.mode,_d,null),Uo.return=mo,Uo;Mg(mo,Uo)}return null}function fn(mo,Uo,_d,tp){var ep=Uo!==null?Uo.key:null;if(typeof _d=="string"&&_d!==""||typeof _d=="number")return ep!==null?null:un(mo,Uo,""+_d,tp);if(typeof _d=="object"&&_d!==null){switch(_d.$$typeof){case va$1:return _d.key===ep?Xr(mo,Uo,_d,tp):null;case wa$1:return _d.key===ep?to(mo,Uo,_d,tp):null;case Ha$1:return ep=_d._init,fn(mo,Uo,ep(_d._payload),tp)}if(eb(_d)||Ka$1(_d))return ep!==null?null:uo(mo,Uo,_d,tp,null);Mg(mo,_d)}return null}function co(mo,Uo,_d,tp,ep){if(typeof tp=="string"&&tp!==""||typeof tp=="number")return mo=mo.get(_d)||null,un(Uo,mo,""+tp,ep);if(typeof tp=="object"&&tp!==null){switch(tp.$$typeof){case va$1:return mo=mo.get(tp.key===null?_d:tp.key)||null,Xr(Uo,mo,tp,ep);case wa$1:return mo=mo.get(tp.key===null?_d:tp.key)||null,to(Uo,mo,tp,ep);case Ha$1:var np=tp._init;return co(mo,Uo,_d,np(tp._payload),ep)}if(eb(tp)||Ka$1(tp))return mo=mo.get(_d)||null,uo(Uo,mo,tp,ep,null);Mg(Uo,tp)}return null}function lo(mo,Uo,_d,tp){for(var ep=null,np=null,rp=Uo,ip=Uo=0,op=null;rp!==null&&ip<_d.length;ip++){rp.index>ip?(op=rp,rp=null):op=rp.sibling;var ap=fn(mo,rp,_d[ip],tp);if(ap===null){rp===null&&(rp=op);break}Mt&&rp&&ap.alternate===null&&st(mo,rp),Uo=an(ap,Uo,ip),np===null?ep=ap:np.sibling=ap,np=ap,rp=op}if(ip===_d.length)return nn(mo,rp),I$1&&tg(mo,ip),ep;if(rp===null){for(;ip<_d.length;ip++)rp=hn(mo,_d[ip],tp),rp!==null&&(Uo=an(rp,Uo,ip),np===null?ep=rp:np.sibling=rp,np=rp);return I$1&&tg(mo,ip),ep}for(rp=rn(mo,rp);ip<_d.length;ip++)op=co(rp,mo,ip,_d[ip],tp),op!==null&&(Mt&&op.alternate!==null&&rp.delete(op.key===null?ip:op.key),Uo=an(op,Uo,ip),np===null?ep=op:np.sibling=op,np=op);return Mt&&rp.forEach(function(sp){return st(mo,sp)}),I$1&&tg(mo,ip),ep}function fo(mo,Uo,_d,tp){var ep=Ka$1(_d);if(typeof ep!="function")throw Error(p$3(150));if(_d=ep.call(_d),_d==null)throw Error(p$3(151));for(var np=ep=null,rp=Uo,ip=Uo=0,op=null,ap=_d.next();rp!==null&&!ap.done;ip++,ap=_d.next()){rp.index>ip?(op=rp,rp=null):op=rp.sibling;var sp=fn(mo,rp,ap.value,tp);if(sp===null){rp===null&&(rp=op);break}Mt&&rp&&sp.alternate===null&&st(mo,rp),Uo=an(sp,Uo,ip),np===null?ep=sp:np.sibling=sp,np=sp,rp=op}if(ap.done)return nn(mo,rp),I$1&&tg(mo,ip),ep;if(rp===null){for(;!ap.done;ip++,ap=_d.next())ap=hn(mo,ap.value,tp),ap!==null&&(Uo=an(ap,Uo,ip),np===null?ep=ap:np.sibling=ap,np=ap);return I$1&&tg(mo,ip),ep}for(rp=rn(mo,rp);!ap.done;ip++,ap=_d.next())ap=co(rp,mo,ip,ap.value,tp),ap!==null&&(Mt&&ap.alternate!==null&&rp.delete(ap.key===null?ip:ap.key),Uo=an(ap,Uo,ip),np===null?ep=ap:np.sibling=ap,np=ap);return Mt&&rp.forEach(function(up){return st(mo,up)}),I$1&&tg(mo,ip),ep}function ho(mo,Uo,_d,tp){if(typeof _d=="object"&&_d!==null&&_d.type===ya$1&&_d.key===null&&(_d=_d.props.children),typeof _d=="object"&&_d!==null){switch(_d.$$typeof){case va$1:e:{for(var ep=_d.key,np=Uo;np!==null;){if(np.key===ep){if(ep=_d.type,ep===ya$1){if(np.tag===7){nn(mo,np.sibling),Uo=on(np,_d.props.children),Uo.return=mo,mo=Uo;break e}}else if(np.elementType===ep||typeof ep=="object"&&ep!==null&&ep.$$typeof===Ha$1&&Ng(ep)===np.type){nn(mo,np.sibling),Uo=on(np,_d.props),Uo.ref=Lg(mo,np,_d),Uo.return=mo,mo=Uo;break e}nn(mo,np);break}else st(mo,np);np=np.sibling}_d.type===ya$1?(Uo=Tg(_d.props.children,mo.mode,tp,_d.key),Uo.return=mo,mo=Uo):(tp=Rg(_d.type,_d.key,_d.props,null,mo.mode,tp),tp.ref=Lg(mo,Uo,_d),tp.return=mo,mo=tp)}return sn(mo);case wa$1:e:{for(np=_d.key;Uo!==null;){if(Uo.key===np)if(Uo.tag===4&&Uo.stateNode.containerInfo===_d.containerInfo&&Uo.stateNode.implementation===_d.implementation){nn(mo,Uo.sibling),Uo=on(Uo,_d.children||[]),Uo.return=mo,mo=Uo;break e}else{nn(mo,Uo);break}else st(mo,Uo);Uo=Uo.sibling}Uo=Sg(_d,mo.mode,tp),Uo.return=mo,mo=Uo}return sn(mo);case Ha$1:return np=_d._init,ho(mo,Uo,np(_d._payload),tp)}if(eb(_d))return lo(mo,Uo,_d,tp);if(Ka$1(_d))return fo(mo,Uo,_d,tp);Mg(mo,_d)}return typeof _d=="string"&&_d!==""||typeof _d=="number"?(_d=""+_d,Uo!==null&&Uo.tag===6?(nn(mo,Uo.sibling),Uo=on(Uo,_d),Uo.return=mo,mo=Uo):(nn(mo,Uo),Uo=Qg(_d,mo.mode,tp),Uo.return=mo,mo=Uo),sn(mo)):nn(mo,Uo)}return ho}var Ug=Og(!0),Vg=Og(!1),Wg=Uf$1(null),Xg=null,Yg=null,Zg=null;function $g(){Zg=Yg=Xg=null}function ah$1(Mt){var st=Wg.current;E$1(Wg),Mt._currentValue=st}function bh$1(Mt,st,nn){for(;Mt!==null;){var rn=Mt.alternate;if((Mt.childLanes&st)!==st?(Mt.childLanes|=st,rn!==null&&(rn.childLanes|=st)):rn!==null&&(rn.childLanes&st)!==st&&(rn.childLanes|=st),Mt===nn)break;Mt=Mt.return}}function ch$1(Mt,st){Xg=Mt,Zg=Yg=null,Mt=Mt.dependencies,Mt!==null&&Mt.firstContext!==null&&(Mt.lanes&st&&(dh$1=!0),Mt.firstContext=null)}function eh$1(Mt){var st=Mt._currentValue;if(Zg!==Mt)if(Mt={context:Mt,memoizedValue:st,next:null},Yg===null){if(Xg===null)throw Error(p$3(308));Yg=Mt,Xg.dependencies={lanes:0,firstContext:Mt}}else Yg=Yg.next=Mt;return st}var fh$1=null;function gh$1(Mt){fh$1===null?fh$1=[Mt]:fh$1.push(Mt)}function hh$1(Mt,st,nn,rn){var on=st.interleaved;return on===null?(nn.next=nn,gh$1(st)):(nn.next=on.next,on.next=nn),st.interleaved=nn,ih$1(Mt,rn)}function ih$1(Mt,st){Mt.lanes|=st;var nn=Mt.alternate;for(nn!==null&&(nn.lanes|=st),nn=Mt,Mt=Mt.return;Mt!==null;)Mt.childLanes|=st,nn=Mt.alternate,nn!==null&&(nn.childLanes|=st),nn=Mt,Mt=Mt.return;return nn.tag===3?nn.stateNode:null}var jh$1=!1;function kh$1(Mt){Mt.updateQueue={baseState:Mt.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function lh$1(Mt,st){Mt=Mt.updateQueue,st.updateQueue===Mt&&(st.updateQueue={baseState:Mt.baseState,firstBaseUpdate:Mt.firstBaseUpdate,lastBaseUpdate:Mt.lastBaseUpdate,shared:Mt.shared,effects:Mt.effects})}function mh$1(Mt,st){return{eventTime:Mt,lane:st,tag:0,payload:null,callback:null,next:null}}function nh$1(Mt,st,nn){var rn=Mt.updateQueue;if(rn===null)return null;if(rn=rn.shared,K$1&2){var on=rn.pending;return on===null?st.next=st:(st.next=on.next,on.next=st),rn.pending=st,ih$1(Mt,nn)}return on=rn.interleaved,on===null?(st.next=st,gh$1(rn)):(st.next=on.next,on.next=st),rn.interleaved=st,ih$1(Mt,nn)}function oh$1(Mt,st,nn){if(st=st.updateQueue,st!==null&&(st=st.shared,(nn&4194240)!==0)){var rn=st.lanes;rn&=Mt.pendingLanes,nn|=rn,st.lanes=nn,Cc$1(Mt,nn)}}function ph$1(Mt,st){var nn=Mt.updateQueue,rn=Mt.alternate;if(rn!==null&&(rn=rn.updateQueue,nn===rn)){var on=null,an=null;if(nn=nn.firstBaseUpdate,nn!==null){do{var sn={eventTime:nn.eventTime,lane:nn.lane,tag:nn.tag,payload:nn.payload,callback:nn.callback,next:null};an===null?on=an=sn:an=an.next=sn,nn=nn.next}while(nn!==null);an===null?on=an=st:an=an.next=st}else on=an=st;nn={baseState:rn.baseState,firstBaseUpdate:on,lastBaseUpdate:an,shared:rn.shared,effects:rn.effects},Mt.updateQueue=nn;return}Mt=nn.lastBaseUpdate,Mt===null?nn.firstBaseUpdate=st:Mt.next=st,nn.lastBaseUpdate=st}function qh$1(Mt,st,nn,rn){var on=Mt.updateQueue;jh$1=!1;var an=on.firstBaseUpdate,sn=on.lastBaseUpdate,un=on.shared.pending;if(un!==null){on.shared.pending=null;var Xr=un,to=Xr.next;Xr.next=null,sn===null?an=to:sn.next=to,sn=Xr;var uo=Mt.alternate;uo!==null&&(uo=uo.updateQueue,un=uo.lastBaseUpdate,un!==sn&&(un===null?uo.firstBaseUpdate=to:un.next=to,uo.lastBaseUpdate=Xr))}if(an!==null){var hn=on.baseState;sn=0,uo=to=Xr=null,un=an;do{var fn=un.lane,co=un.eventTime;if((rn&fn)===fn){uo!==null&&(uo=uo.next={eventTime:co,lane:0,tag:un.tag,payload:un.payload,callback:un.callback,next:null});e:{var lo=Mt,fo=un;switch(fn=st,co=nn,fo.tag){case 1:if(lo=fo.payload,typeof lo=="function"){hn=lo.call(co,hn,fn);break e}hn=lo;break e;case 3:lo.flags=lo.flags&-65537|128;case 0:if(lo=fo.payload,fn=typeof lo=="function"?lo.call(co,hn,fn):lo,fn==null)break e;hn=A$1({},hn,fn);break e;case 2:jh$1=!0}}un.callback!==null&&un.lane!==0&&(Mt.flags|=64,fn=on.effects,fn===null?on.effects=[un]:fn.push(un))}else co={eventTime:co,lane:fn,tag:un.tag,payload:un.payload,callback:un.callback,next:null},uo===null?(to=uo=co,Xr=hn):uo=uo.next=co,sn|=fn;if(un=un.next,un===null){if(un=on.shared.pending,un===null)break;fn=un,un=fn.next,fn.next=null,on.lastBaseUpdate=fn,on.shared.pending=null}}while(!0);if(uo===null&&(Xr=hn),on.baseState=Xr,on.firstBaseUpdate=to,on.lastBaseUpdate=uo,st=on.shared.interleaved,st!==null){on=st;do sn|=on.lane,on=on.next;while(on!==st)}else an===null&&(on.shared.lanes=0);rh$1|=sn,Mt.lanes=sn,Mt.memoizedState=hn}}function sh$1(Mt,st,nn){if(Mt=st.effects,st.effects=null,Mt!==null)for(st=0;st<Mt.length;st++){var rn=Mt[st],on=rn.callback;if(on!==null){if(rn.callback=null,rn=nn,typeof on!="function")throw Error(p$3(191,on));on.call(rn)}}}var th$1={},uh$1=Uf$1(th$1),vh$2=Uf$1(th$1),wh$1=Uf$1(th$1);function xh$1(Mt){if(Mt===th$1)throw Error(p$3(174));return Mt}function yh$1(Mt,st){switch(G$1(wh$1,st),G$1(vh$2,Mt),G$1(uh$1,th$1),Mt=st.nodeType,Mt){case 9:case 11:st=(st=st.documentElement)?st.namespaceURI:lb(null,"");break;default:Mt=Mt===8?st.parentNode:st,st=Mt.namespaceURI||null,Mt=Mt.tagName,st=lb(st,Mt)}E$1(uh$1),G$1(uh$1,st)}function zh$1(){E$1(uh$1),E$1(vh$2),E$1(wh$1)}function Ah$1(Mt){xh$1(wh$1.current);var st=xh$1(uh$1.current),nn=lb(st,Mt.type);st!==nn&&(G$1(vh$2,Mt),G$1(uh$1,nn))}function Bh$1(Mt){vh$2.current===Mt&&(E$1(uh$1),E$1(vh$2))}var L$1=Uf$1(0);function Ch$1(Mt){for(var st=Mt;st!==null;){if(st.tag===13){var nn=st.memoizedState;if(nn!==null&&(nn=nn.dehydrated,nn===null||nn.data==="$?"||nn.data==="$!"))return st}else if(st.tag===19&&st.memoizedProps.revealOrder!==void 0){if(st.flags&128)return st}else if(st.child!==null){st.child.return=st,st=st.child;continue}if(st===Mt)break;for(;st.sibling===null;){if(st.return===null||st.return===Mt)return null;st=st.return}st.sibling.return=st.return,st=st.sibling}return null}var Dh$1=[];function Eh$1(){for(var Mt=0;Mt<Dh$1.length;Mt++)Dh$1[Mt]._workInProgressVersionPrimary=null;Dh$1.length=0}var Fh$1=ua$1.ReactCurrentDispatcher,Gh$1=ua$1.ReactCurrentBatchConfig,Hh$1=0,M$1=null,N$1=null,O$1=null,Ih$1=!1,Jh$1=!1,Kh$1=0,Lh$1=0;function P$2(){throw Error(p$3(321))}function Mh$1(Mt,st){if(st===null)return!1;for(var nn=0;nn<st.length&&nn<Mt.length;nn++)if(!He$1(Mt[nn],st[nn]))return!1;return!0}function Nh$1(Mt,st,nn,rn,on,an){if(Hh$1=an,M$1=st,st.memoizedState=null,st.updateQueue=null,st.lanes=0,Fh$1.current=Mt===null||Mt.memoizedState===null?Oh$1:Ph$1,Mt=nn(rn,on),Jh$1){an=0;do{if(Jh$1=!1,Kh$1=0,25<=an)throw Error(p$3(301));an+=1,O$1=N$1=null,st.updateQueue=null,Fh$1.current=Qh$1,Mt=nn(rn,on)}while(Jh$1)}if(Fh$1.current=Rh$1,st=N$1!==null&&N$1.next!==null,Hh$1=0,O$1=N$1=M$1=null,Ih$1=!1,st)throw Error(p$3(300));return Mt}function Sh$1(){var Mt=Kh$1!==0;return Kh$1=0,Mt}function Th$1(){var Mt={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return O$1===null?M$1.memoizedState=O$1=Mt:O$1=O$1.next=Mt,O$1}function Uh$1(){if(N$1===null){var Mt=M$1.alternate;Mt=Mt!==null?Mt.memoizedState:null}else Mt=N$1.next;var st=O$1===null?M$1.memoizedState:O$1.next;if(st!==null)O$1=st,N$1=Mt;else{if(Mt===null)throw Error(p$3(310));N$1=Mt,Mt={memoizedState:N$1.memoizedState,baseState:N$1.baseState,baseQueue:N$1.baseQueue,queue:N$1.queue,next:null},O$1===null?M$1.memoizedState=O$1=Mt:O$1=O$1.next=Mt}return O$1}function Vh$1(Mt,st){return typeof st=="function"?st(Mt):st}function Wh$1(Mt){var st=Uh$1(),nn=st.queue;if(nn===null)throw Error(p$3(311));nn.lastRenderedReducer=Mt;var rn=N$1,on=rn.baseQueue,an=nn.pending;if(an!==null){if(on!==null){var sn=on.next;on.next=an.next,an.next=sn}rn.baseQueue=on=an,nn.pending=null}if(on!==null){an=on.next,rn=rn.baseState;var un=sn=null,Xr=null,to=an;do{var uo=to.lane;if((Hh$1&uo)===uo)Xr!==null&&(Xr=Xr.next={lane:0,action:to.action,hasEagerState:to.hasEagerState,eagerState:to.eagerState,next:null}),rn=to.hasEagerState?to.eagerState:Mt(rn,to.action);else{var hn={lane:uo,action:to.action,hasEagerState:to.hasEagerState,eagerState:to.eagerState,next:null};Xr===null?(un=Xr=hn,sn=rn):Xr=Xr.next=hn,M$1.lanes|=uo,rh$1|=uo}to=to.next}while(to!==null&&to!==an);Xr===null?sn=rn:Xr.next=un,He$1(rn,st.memoizedState)||(dh$1=!0),st.memoizedState=rn,st.baseState=sn,st.baseQueue=Xr,nn.lastRenderedState=rn}if(Mt=nn.interleaved,Mt!==null){on=Mt;do an=on.lane,M$1.lanes|=an,rh$1|=an,on=on.next;while(on!==Mt)}else on===null&&(nn.lanes=0);return[st.memoizedState,nn.dispatch]}function Xh$1(Mt){var st=Uh$1(),nn=st.queue;if(nn===null)throw Error(p$3(311));nn.lastRenderedReducer=Mt;var rn=nn.dispatch,on=nn.pending,an=st.memoizedState;if(on!==null){nn.pending=null;var sn=on=on.next;do an=Mt(an,sn.action),sn=sn.next;while(sn!==on);He$1(an,st.memoizedState)||(dh$1=!0),st.memoizedState=an,st.baseQueue===null&&(st.baseState=an),nn.lastRenderedState=an}return[an,rn]}function Yh$1(){}function Zh$1(Mt,st){var nn=M$1,rn=Uh$1(),on=st(),an=!He$1(rn.memoizedState,on);if(an&&(rn.memoizedState=on,dh$1=!0),rn=rn.queue,$h$1(ai$1.bind(null,nn,rn,Mt),[Mt]),rn.getSnapshot!==st||an||O$1!==null&&O$1.memoizedState.tag&1){if(nn.flags|=2048,bi$1(9,ci$1.bind(null,nn,rn,on,st),void 0,null),Q$1===null)throw Error(p$3(349));Hh$1&30||di$1(nn,st,on)}return on}function di$1(Mt,st,nn){Mt.flags|=16384,Mt={getSnapshot:st,value:nn},st=M$1.updateQueue,st===null?(st={lastEffect:null,stores:null},M$1.updateQueue=st,st.stores=[Mt]):(nn=st.stores,nn===null?st.stores=[Mt]:nn.push(Mt))}function ci$1(Mt,st,nn,rn){st.value=nn,st.getSnapshot=rn,ei$1(st)&&fi$1(Mt)}function ai$1(Mt,st,nn){return nn(function(){ei$1(st)&&fi$1(Mt)})}function ei$1(Mt){var st=Mt.getSnapshot;Mt=Mt.value;try{var nn=st();return!He$1(Mt,nn)}catch{return!0}}function fi$1(Mt){var st=ih$1(Mt,1);st!==null&&gi$1(st,Mt,1,-1)}function hi$1(Mt){var st=Th$1();return typeof Mt=="function"&&(Mt=Mt()),st.memoizedState=st.baseState=Mt,Mt={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vh$1,lastRenderedState:Mt},st.queue=Mt,Mt=Mt.dispatch=ii$1.bind(null,M$1,Mt),[st.memoizedState,Mt]}function bi$1(Mt,st,nn,rn){return Mt={tag:Mt,create:st,destroy:nn,deps:rn,next:null},st=M$1.updateQueue,st===null?(st={lastEffect:null,stores:null},M$1.updateQueue=st,st.lastEffect=Mt.next=Mt):(nn=st.lastEffect,nn===null?st.lastEffect=Mt.next=Mt:(rn=nn.next,nn.next=Mt,Mt.next=rn,st.lastEffect=Mt)),Mt}function ji$1(){return Uh$1().memoizedState}function ki$1(Mt,st,nn,rn){var on=Th$1();M$1.flags|=Mt,on.memoizedState=bi$1(1|st,nn,void 0,rn===void 0?null:rn)}function li$1(Mt,st,nn,rn){var on=Uh$1();rn=rn===void 0?null:rn;var an=void 0;if(N$1!==null){var sn=N$1.memoizedState;if(an=sn.destroy,rn!==null&&Mh$1(rn,sn.deps)){on.memoizedState=bi$1(st,nn,an,rn);return}}M$1.flags|=Mt,on.memoizedState=bi$1(1|st,nn,an,rn)}function mi$1(Mt,st){return ki$1(8390656,8,Mt,st)}function $h$1(Mt,st){return li$1(2048,8,Mt,st)}function ni$1(Mt,st){return li$1(4,2,Mt,st)}function oi$1(Mt,st){return li$1(4,4,Mt,st)}function pi$3(Mt,st){if(typeof st=="function")return Mt=Mt(),st(Mt),function(){st(null)};if(st!=null)return Mt=Mt(),st.current=Mt,function(){st.current=null}}function qi$1(Mt,st,nn){return nn=nn!=null?nn.concat([Mt]):null,li$1(4,4,pi$3.bind(null,st,Mt),nn)}function ri$1(){}function si$1(Mt,st){var nn=Uh$1();st=st===void 0?null:st;var rn=nn.memoizedState;return rn!==null&&st!==null&&Mh$1(st,rn[1])?rn[0]:(nn.memoizedState=[Mt,st],Mt)}function ti$1(Mt,st){var nn=Uh$1();st=st===void 0?null:st;var rn=nn.memoizedState;return rn!==null&&st!==null&&Mh$1(st,rn[1])?rn[0]:(Mt=Mt(),nn.memoizedState=[Mt,st],Mt)}function ui$1(Mt,st,nn){return Hh$1&21?(He$1(nn,st)||(nn=yc$1(),M$1.lanes|=nn,rh$1|=nn,Mt.baseState=!0),st):(Mt.baseState&&(Mt.baseState=!1,dh$1=!0),Mt.memoizedState=nn)}function vi$1(Mt,st){var nn=C$1;C$1=nn!==0&&4>nn?nn:4,Mt(!0);var rn=Gh$1.transition;Gh$1.transition={};try{Mt(!1),st()}finally{C$1=nn,Gh$1.transition=rn}}function wi$1(){return Uh$1().memoizedState}function xi$1(Mt,st,nn){var rn=yi$1(Mt);if(nn={lane:rn,action:nn,hasEagerState:!1,eagerState:null,next:null},zi$1(Mt))Ai$1(st,nn);else if(nn=hh$1(Mt,st,nn,rn),nn!==null){var on=R$1();gi$1(nn,Mt,rn,on),Bi$1(nn,st,rn)}}function ii$1(Mt,st,nn){var rn=yi$1(Mt),on={lane:rn,action:nn,hasEagerState:!1,eagerState:null,next:null};if(zi$1(Mt))Ai$1(st,on);else{var an=Mt.alternate;if(Mt.lanes===0&&(an===null||an.lanes===0)&&(an=st.lastRenderedReducer,an!==null))try{var sn=st.lastRenderedState,un=an(sn,nn);if(on.hasEagerState=!0,on.eagerState=un,He$1(un,sn)){var Xr=st.interleaved;Xr===null?(on.next=on,gh$1(st)):(on.next=Xr.next,Xr.next=on),st.interleaved=on;return}}catch{}finally{}nn=hh$1(Mt,st,on,rn),nn!==null&&(on=R$1(),gi$1(nn,Mt,rn,on),Bi$1(nn,st,rn))}}function zi$1(Mt){var st=Mt.alternate;return Mt===M$1||st!==null&&st===M$1}function Ai$1(Mt,st){Jh$1=Ih$1=!0;var nn=Mt.pending;nn===null?st.next=st:(st.next=nn.next,nn.next=st),Mt.pending=st}function Bi$1(Mt,st,nn){if(nn&4194240){var rn=st.lanes;rn&=Mt.pendingLanes,nn|=rn,st.lanes=nn,Cc$1(Mt,nn)}}var Rh$1={readContext:eh$1,useCallback:P$2,useContext:P$2,useEffect:P$2,useImperativeHandle:P$2,useInsertionEffect:P$2,useLayoutEffect:P$2,useMemo:P$2,useReducer:P$2,useRef:P$2,useState:P$2,useDebugValue:P$2,useDeferredValue:P$2,useTransition:P$2,useMutableSource:P$2,useSyncExternalStore:P$2,useId:P$2,unstable_isNewReconciler:!1},Oh$1={readContext:eh$1,useCallback:function(Mt,st){return Th$1().memoizedState=[Mt,st===void 0?null:st],Mt},useContext:eh$1,useEffect:mi$1,useImperativeHandle:function(Mt,st,nn){return nn=nn!=null?nn.concat([Mt]):null,ki$1(4194308,4,pi$3.bind(null,st,Mt),nn)},useLayoutEffect:function(Mt,st){return ki$1(4194308,4,Mt,st)},useInsertionEffect:function(Mt,st){return ki$1(4,2,Mt,st)},useMemo:function(Mt,st){var nn=Th$1();return st=st===void 0?null:st,Mt=Mt(),nn.memoizedState=[Mt,st],Mt},useReducer:function(Mt,st,nn){var rn=Th$1();return st=nn!==void 0?nn(st):st,rn.memoizedState=rn.baseState=st,Mt={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Mt,lastRenderedState:st},rn.queue=Mt,Mt=Mt.dispatch=xi$1.bind(null,M$1,Mt),[rn.memoizedState,Mt]},useRef:function(Mt){var st=Th$1();return Mt={current:Mt},st.memoizedState=Mt},useState:hi$1,useDebugValue:ri$1,useDeferredValue:function(Mt){return Th$1().memoizedState=Mt},useTransition:function(){var Mt=hi$1(!1),st=Mt[0];return Mt=vi$1.bind(null,Mt[1]),Th$1().memoizedState=Mt,[st,Mt]},useMutableSource:function(){},useSyncExternalStore:function(Mt,st,nn){var rn=M$1,on=Th$1();if(I$1){if(nn===void 0)throw Error(p$3(407));nn=nn()}else{if(nn=st(),Q$1===null)throw Error(p$3(349));Hh$1&30||di$1(rn,st,nn)}on.memoizedState=nn;var an={value:nn,getSnapshot:st};return on.queue=an,mi$1(ai$1.bind(null,rn,an,Mt),[Mt]),rn.flags|=2048,bi$1(9,ci$1.bind(null,rn,an,nn,st),void 0,null),nn},useId:function(){var Mt=Th$1(),st=Q$1.identifierPrefix;if(I$1){var nn=sg,rn=rg;nn=(rn&~(1<<32-oc$1(rn)-1)).toString(32)+nn,st=":"+st+"R"+nn,nn=Kh$1++,0<nn&&(st+="H"+nn.toString(32)),st+=":"}else nn=Lh$1++,st=":"+st+"r"+nn.toString(32)+":";return Mt.memoizedState=st},unstable_isNewReconciler:!1},Ph$1={readContext:eh$1,useCallback:si$1,useContext:eh$1,useEffect:$h$1,useImperativeHandle:qi$1,useInsertionEffect:ni$1,useLayoutEffect:oi$1,useMemo:ti$1,useReducer:Wh$1,useRef:ji$1,useState:function(){return Wh$1(Vh$1)},useDebugValue:ri$1,useDeferredValue:function(Mt){var st=Uh$1();return ui$1(st,N$1.memoizedState,Mt)},useTransition:function(){var Mt=Wh$1(Vh$1)[0],st=Uh$1().memoizedState;return[Mt,st]},useMutableSource:Yh$1,useSyncExternalStore:Zh$1,useId:wi$1,unstable_isNewReconciler:!1},Qh$1={readContext:eh$1,useCallback:si$1,useContext:eh$1,useEffect:$h$1,useImperativeHandle:qi$1,useInsertionEffect:ni$1,useLayoutEffect:oi$1,useMemo:ti$1,useReducer:Xh$1,useRef:ji$1,useState:function(){return Xh$1(Vh$1)},useDebugValue:ri$1,useDeferredValue:function(Mt){var st=Uh$1();return N$1===null?st.memoizedState=Mt:ui$1(st,N$1.memoizedState,Mt)},useTransition:function(){var Mt=Xh$1(Vh$1)[0],st=Uh$1().memoizedState;return[Mt,st]},useMutableSource:Yh$1,useSyncExternalStore:Zh$1,useId:wi$1,unstable_isNewReconciler:!1};function Ci$1(Mt,st){if(Mt&&Mt.defaultProps){st=A$1({},st),Mt=Mt.defaultProps;for(var nn in Mt)st[nn]===void 0&&(st[nn]=Mt[nn]);return st}return st}function Di$1(Mt,st,nn,rn){st=Mt.memoizedState,nn=nn(rn,st),nn=nn==null?st:A$1({},st,nn),Mt.memoizedState=nn,Mt.lanes===0&&(Mt.updateQueue.baseState=nn)}var Ei$1={isMounted:function(Mt){return(Mt=Mt._reactInternals)?Vb(Mt)===Mt:!1},enqueueSetState:function(Mt,st,nn){Mt=Mt._reactInternals;var rn=R$1(),on=yi$1(Mt),an=mh$1(rn,on);an.payload=st,nn!=null&&(an.callback=nn),st=nh$1(Mt,an,on),st!==null&&(gi$1(st,Mt,on,rn),oh$1(st,Mt,on))},enqueueReplaceState:function(Mt,st,nn){Mt=Mt._reactInternals;var rn=R$1(),on=yi$1(Mt),an=mh$1(rn,on);an.tag=1,an.payload=st,nn!=null&&(an.callback=nn),st=nh$1(Mt,an,on),st!==null&&(gi$1(st,Mt,on,rn),oh$1(st,Mt,on))},enqueueForceUpdate:function(Mt,st){Mt=Mt._reactInternals;var nn=R$1(),rn=yi$1(Mt),on=mh$1(nn,rn);on.tag=2,st!=null&&(on.callback=st),st=nh$1(Mt,on,rn),st!==null&&(gi$1(st,Mt,rn,nn),oh$1(st,Mt,rn))}};function Fi$1(Mt,st,nn,rn,on,an,sn){return Mt=Mt.stateNode,typeof Mt.shouldComponentUpdate=="function"?Mt.shouldComponentUpdate(rn,an,sn):st.prototype&&st.prototype.isPureReactComponent?!Ie$1(nn,rn)||!Ie$1(on,an):!0}function Gi$1(Mt,st,nn){var rn=!1,on=Vf$1,an=st.contextType;return typeof an=="object"&&an!==null?an=eh$1(an):(on=Zf$1(st)?Xf$1:H$1.current,rn=st.contextTypes,an=(rn=rn!=null)?Yf$1(Mt,on):Vf$1),st=new st(nn,an),Mt.memoizedState=st.state!==null&&st.state!==void 0?st.state:null,st.updater=Ei$1,Mt.stateNode=st,st._reactInternals=Mt,rn&&(Mt=Mt.stateNode,Mt.__reactInternalMemoizedUnmaskedChildContext=on,Mt.__reactInternalMemoizedMaskedChildContext=an),st}function Hi$1(Mt,st,nn,rn){Mt=st.state,typeof st.componentWillReceiveProps=="function"&&st.componentWillReceiveProps(nn,rn),typeof st.UNSAFE_componentWillReceiveProps=="function"&&st.UNSAFE_componentWillReceiveProps(nn,rn),st.state!==Mt&&Ei$1.enqueueReplaceState(st,st.state,null)}function Ii$1(Mt,st,nn,rn){var on=Mt.stateNode;on.props=nn,on.state=Mt.memoizedState,on.refs={},kh$1(Mt);var an=st.contextType;typeof an=="object"&&an!==null?on.context=eh$1(an):(an=Zf$1(st)?Xf$1:H$1.current,on.context=Yf$1(Mt,an)),on.state=Mt.memoizedState,an=st.getDerivedStateFromProps,typeof an=="function"&&(Di$1(Mt,st,an,nn),on.state=Mt.memoizedState),typeof st.getDerivedStateFromProps=="function"||typeof on.getSnapshotBeforeUpdate=="function"||typeof on.UNSAFE_componentWillMount!="function"&&typeof on.componentWillMount!="function"||(st=on.state,typeof on.componentWillMount=="function"&&on.componentWillMount(),typeof on.UNSAFE_componentWillMount=="function"&&on.UNSAFE_componentWillMount(),st!==on.state&&Ei$1.enqueueReplaceState(on,on.state,null),qh$1(Mt,nn,on,rn),on.state=Mt.memoizedState),typeof on.componentDidMount=="function"&&(Mt.flags|=4194308)}function Ji$1(Mt,st){try{var nn="",rn=st;do nn+=Pa$1(rn),rn=rn.return;while(rn);var on=nn}catch(an){on=`
Error generating stack: `+an.message+`
`+an.stack}return{value:Mt,source:st,stack:on,digest:null}}function Ki$1(Mt,st,nn){return{value:Mt,source:null,stack:nn??null,digest:st??null}}function Li$1(Mt,st){try{console.error(st.value)}catch(nn){setTimeout(function(){throw nn})}}var Mi=typeof WeakMap=="function"?WeakMap:Map;function Ni$1(Mt,st,nn){nn=mh$1(-1,nn),nn.tag=3,nn.payload={element:null};var rn=st.value;return nn.callback=function(){Oi$1||(Oi$1=!0,Pi$1=rn),Li$1(Mt,st)},nn}function Qi$1(Mt,st,nn){nn=mh$1(-1,nn),nn.tag=3;var rn=Mt.type.getDerivedStateFromError;if(typeof rn=="function"){var on=st.value;nn.payload=function(){return rn(on)},nn.callback=function(){Li$1(Mt,st)}}var an=Mt.stateNode;return an!==null&&typeof an.componentDidCatch=="function"&&(nn.callback=function(){Li$1(Mt,st),typeof rn!="function"&&(Ri$1===null?Ri$1=new Set([this]):Ri$1.add(this));var sn=st.stack;this.componentDidCatch(st.value,{componentStack:sn!==null?sn:""})}),nn}function Si$1(Mt,st,nn){var rn=Mt.pingCache;if(rn===null){rn=Mt.pingCache=new Mi;var on=new Set;rn.set(st,on)}else on=rn.get(st),on===void 0&&(on=new Set,rn.set(st,on));on.has(nn)||(on.add(nn),Mt=Ti$1.bind(null,Mt,st,nn),st.then(Mt,Mt))}function Ui$1(Mt){do{var st;if((st=Mt.tag===13)&&(st=Mt.memoizedState,st=st!==null?st.dehydrated!==null:!0),st)return Mt;Mt=Mt.return}while(Mt!==null);return null}function Vi$1(Mt,st,nn,rn,on){return Mt.mode&1?(Mt.flags|=65536,Mt.lanes=on,Mt):(Mt===st?Mt.flags|=65536:(Mt.flags|=128,nn.flags|=131072,nn.flags&=-52805,nn.tag===1&&(nn.alternate===null?nn.tag=17:(st=mh$1(-1,1),st.tag=2,nh$1(nn,st,1))),nn.lanes|=1),Mt)}var Wi$1=ua$1.ReactCurrentOwner,dh$1=!1;function Xi$1(Mt,st,nn,rn){st.child=Mt===null?Vg(st,null,nn,rn):Ug(st,Mt.child,nn,rn)}function Yi$1(Mt,st,nn,rn,on){nn=nn.render;var an=st.ref;return ch$1(st,on),rn=Nh$1(Mt,st,nn,rn,an,on),nn=Sh$1(),Mt!==null&&!dh$1?(st.updateQueue=Mt.updateQueue,st.flags&=-2053,Mt.lanes&=~on,Zi$1(Mt,st,on)):(I$1&&nn&&vg(st),st.flags|=1,Xi$1(Mt,st,rn,on),st.child)}function $i$1(Mt,st,nn,rn,on){if(Mt===null){var an=nn.type;return typeof an=="function"&&!aj(an)&&an.defaultProps===void 0&&nn.compare===null&&nn.defaultProps===void 0?(st.tag=15,st.type=an,bj(Mt,st,an,rn,on)):(Mt=Rg(nn.type,null,rn,st,st.mode,on),Mt.ref=st.ref,Mt.return=st,st.child=Mt)}if(an=Mt.child,!(Mt.lanes&on)){var sn=an.memoizedProps;if(nn=nn.compare,nn=nn!==null?nn:Ie$1,nn(sn,rn)&&Mt.ref===st.ref)return Zi$1(Mt,st,on)}return st.flags|=1,Mt=Pg(an,rn),Mt.ref=st.ref,Mt.return=st,st.child=Mt}function bj(Mt,st,nn,rn,on){if(Mt!==null){var an=Mt.memoizedProps;if(Ie$1(an,rn)&&Mt.ref===st.ref)if(dh$1=!1,st.pendingProps=rn=an,(Mt.lanes&on)!==0)Mt.flags&131072&&(dh$1=!0);else return st.lanes=Mt.lanes,Zi$1(Mt,st,on)}return cj(Mt,st,nn,rn,on)}function dj(Mt,st,nn){var rn=st.pendingProps,on=rn.children,an=Mt!==null?Mt.memoizedState:null;if(rn.mode==="hidden")if(!(st.mode&1))st.memoizedState={baseLanes:0,cachePool:null,transitions:null},G$1(ej,fj),fj|=nn;else{if(!(nn&1073741824))return Mt=an!==null?an.baseLanes|nn:nn,st.lanes=st.childLanes=1073741824,st.memoizedState={baseLanes:Mt,cachePool:null,transitions:null},st.updateQueue=null,G$1(ej,fj),fj|=Mt,null;st.memoizedState={baseLanes:0,cachePool:null,transitions:null},rn=an!==null?an.baseLanes:nn,G$1(ej,fj),fj|=rn}else an!==null?(rn=an.baseLanes|nn,st.memoizedState=null):rn=nn,G$1(ej,fj),fj|=rn;return Xi$1(Mt,st,on,nn),st.child}function gj(Mt,st){var nn=st.ref;(Mt===null&&nn!==null||Mt!==null&&Mt.ref!==nn)&&(st.flags|=512,st.flags|=2097152)}function cj(Mt,st,nn,rn,on){var an=Zf$1(nn)?Xf$1:H$1.current;return an=Yf$1(st,an),ch$1(st,on),nn=Nh$1(Mt,st,nn,rn,an,on),rn=Sh$1(),Mt!==null&&!dh$1?(st.updateQueue=Mt.updateQueue,st.flags&=-2053,Mt.lanes&=~on,Zi$1(Mt,st,on)):(I$1&&rn&&vg(st),st.flags|=1,Xi$1(Mt,st,nn,on),st.child)}function hj(Mt,st,nn,rn,on){if(Zf$1(nn)){var an=!0;cg(st)}else an=!1;if(ch$1(st,on),st.stateNode===null)ij(Mt,st),Gi$1(st,nn,rn),Ii$1(st,nn,rn,on),rn=!0;else if(Mt===null){var sn=st.stateNode,un=st.memoizedProps;sn.props=un;var Xr=sn.context,to=nn.contextType;typeof to=="object"&&to!==null?to=eh$1(to):(to=Zf$1(nn)?Xf$1:H$1.current,to=Yf$1(st,to));var uo=nn.getDerivedStateFromProps,hn=typeof uo=="function"||typeof sn.getSnapshotBeforeUpdate=="function";hn||typeof sn.UNSAFE_componentWillReceiveProps!="function"&&typeof sn.componentWillReceiveProps!="function"||(un!==rn||Xr!==to)&&Hi$1(st,sn,rn,to),jh$1=!1;var fn=st.memoizedState;sn.state=fn,qh$1(st,rn,sn,on),Xr=st.memoizedState,un!==rn||fn!==Xr||Wf$1.current||jh$1?(typeof uo=="function"&&(Di$1(st,nn,uo,rn),Xr=st.memoizedState),(un=jh$1||Fi$1(st,nn,un,rn,fn,Xr,to))?(hn||typeof sn.UNSAFE_componentWillMount!="function"&&typeof sn.componentWillMount!="function"||(typeof sn.componentWillMount=="function"&&sn.componentWillMount(),typeof sn.UNSAFE_componentWillMount=="function"&&sn.UNSAFE_componentWillMount()),typeof sn.componentDidMount=="function"&&(st.flags|=4194308)):(typeof sn.componentDidMount=="function"&&(st.flags|=4194308),st.memoizedProps=rn,st.memoizedState=Xr),sn.props=rn,sn.state=Xr,sn.context=to,rn=un):(typeof sn.componentDidMount=="function"&&(st.flags|=4194308),rn=!1)}else{sn=st.stateNode,lh$1(Mt,st),un=st.memoizedProps,to=st.type===st.elementType?un:Ci$1(st.type,un),sn.props=to,hn=st.pendingProps,fn=sn.context,Xr=nn.contextType,typeof Xr=="object"&&Xr!==null?Xr=eh$1(Xr):(Xr=Zf$1(nn)?Xf$1:H$1.current,Xr=Yf$1(st,Xr));var co=nn.getDerivedStateFromProps;(uo=typeof co=="function"||typeof sn.getSnapshotBeforeUpdate=="function")||typeof sn.UNSAFE_componentWillReceiveProps!="function"&&typeof sn.componentWillReceiveProps!="function"||(un!==hn||fn!==Xr)&&Hi$1(st,sn,rn,Xr),jh$1=!1,fn=st.memoizedState,sn.state=fn,qh$1(st,rn,sn,on);var lo=st.memoizedState;un!==hn||fn!==lo||Wf$1.current||jh$1?(typeof co=="function"&&(Di$1(st,nn,co,rn),lo=st.memoizedState),(to=jh$1||Fi$1(st,nn,to,rn,fn,lo,Xr)||!1)?(uo||typeof sn.UNSAFE_componentWillUpdate!="function"&&typeof sn.componentWillUpdate!="function"||(typeof sn.componentWillUpdate=="function"&&sn.componentWillUpdate(rn,lo,Xr),typeof sn.UNSAFE_componentWillUpdate=="function"&&sn.UNSAFE_componentWillUpdate(rn,lo,Xr)),typeof sn.componentDidUpdate=="function"&&(st.flags|=4),typeof sn.getSnapshotBeforeUpdate=="function"&&(st.flags|=1024)):(typeof sn.componentDidUpdate!="function"||un===Mt.memoizedProps&&fn===Mt.memoizedState||(st.flags|=4),typeof sn.getSnapshotBeforeUpdate!="function"||un===Mt.memoizedProps&&fn===Mt.memoizedState||(st.flags|=1024),st.memoizedProps=rn,st.memoizedState=lo),sn.props=rn,sn.state=lo,sn.context=Xr,rn=to):(typeof sn.componentDidUpdate!="function"||un===Mt.memoizedProps&&fn===Mt.memoizedState||(st.flags|=4),typeof sn.getSnapshotBeforeUpdate!="function"||un===Mt.memoizedProps&&fn===Mt.memoizedState||(st.flags|=1024),rn=!1)}return jj(Mt,st,nn,rn,an,on)}function jj(Mt,st,nn,rn,on,an){gj(Mt,st);var sn=(st.flags&128)!==0;if(!rn&&!sn)return on&&dg(st,nn,!1),Zi$1(Mt,st,an);rn=st.stateNode,Wi$1.current=st;var un=sn&&typeof nn.getDerivedStateFromError!="function"?null:rn.render();return st.flags|=1,Mt!==null&&sn?(st.child=Ug(st,Mt.child,null,an),st.child=Ug(st,null,un,an)):Xi$1(Mt,st,un,an),st.memoizedState=rn.state,on&&dg(st,nn,!0),st.child}function kj(Mt){var st=Mt.stateNode;st.pendingContext?ag(Mt,st.pendingContext,st.pendingContext!==st.context):st.context&&ag(Mt,st.context,!1),yh$1(Mt,st.containerInfo)}function lj(Mt,st,nn,rn,on){return Ig(),Jg(on),st.flags|=256,Xi$1(Mt,st,nn,rn),st.child}var mj={dehydrated:null,treeContext:null,retryLane:0};function nj(Mt){return{baseLanes:Mt,cachePool:null,transitions:null}}function oj(Mt,st,nn){var rn=st.pendingProps,on=L$1.current,an=!1,sn=(st.flags&128)!==0,un;if((un=sn)||(un=Mt!==null&&Mt.memoizedState===null?!1:(on&2)!==0),un?(an=!0,st.flags&=-129):(Mt===null||Mt.memoizedState!==null)&&(on|=1),G$1(L$1,on&1),Mt===null)return Eg(st),Mt=st.memoizedState,Mt!==null&&(Mt=Mt.dehydrated,Mt!==null)?(st.mode&1?Mt.data==="$!"?st.lanes=8:st.lanes=1073741824:st.lanes=1,null):(sn=rn.children,Mt=rn.fallback,an?(rn=st.mode,an=st.child,sn={mode:"hidden",children:sn},!(rn&1)&&an!==null?(an.childLanes=0,an.pendingProps=sn):an=pj(sn,rn,0,null),Mt=Tg(Mt,rn,nn,null),an.return=st,Mt.return=st,an.sibling=Mt,st.child=an,st.child.memoizedState=nj(nn),st.memoizedState=mj,Mt):qj(st,sn));if(on=Mt.memoizedState,on!==null&&(un=on.dehydrated,un!==null))return rj(Mt,st,sn,rn,un,on,nn);if(an){an=rn.fallback,sn=st.mode,on=Mt.child,un=on.sibling;var Xr={mode:"hidden",children:rn.children};return!(sn&1)&&st.child!==on?(rn=st.child,rn.childLanes=0,rn.pendingProps=Xr,st.deletions=null):(rn=Pg(on,Xr),rn.subtreeFlags=on.subtreeFlags&14680064),un!==null?an=Pg(un,an):(an=Tg(an,sn,nn,null),an.flags|=2),an.return=st,rn.return=st,rn.sibling=an,st.child=rn,rn=an,an=st.child,sn=Mt.child.memoizedState,sn=sn===null?nj(nn):{baseLanes:sn.baseLanes|nn,cachePool:null,transitions:sn.transitions},an.memoizedState=sn,an.childLanes=Mt.childLanes&~nn,st.memoizedState=mj,rn}return an=Mt.child,Mt=an.sibling,rn=Pg(an,{mode:"visible",children:rn.children}),!(st.mode&1)&&(rn.lanes=nn),rn.return=st,rn.sibling=null,Mt!==null&&(nn=st.deletions,nn===null?(st.deletions=[Mt],st.flags|=16):nn.push(Mt)),st.child=rn,st.memoizedState=null,rn}function qj(Mt,st){return st=pj({mode:"visible",children:st},Mt.mode,0,null),st.return=Mt,Mt.child=st}function sj(Mt,st,nn,rn){return rn!==null&&Jg(rn),Ug(st,Mt.child,null,nn),Mt=qj(st,st.pendingProps.children),Mt.flags|=2,st.memoizedState=null,Mt}function rj(Mt,st,nn,rn,on,an,sn){if(nn)return st.flags&256?(st.flags&=-257,rn=Ki$1(Error(p$3(422))),sj(Mt,st,sn,rn)):st.memoizedState!==null?(st.child=Mt.child,st.flags|=128,null):(an=rn.fallback,on=st.mode,rn=pj({mode:"visible",children:rn.children},on,0,null),an=Tg(an,on,sn,null),an.flags|=2,rn.return=st,an.return=st,rn.sibling=an,st.child=rn,st.mode&1&&Ug(st,Mt.child,null,sn),st.child.memoizedState=nj(sn),st.memoizedState=mj,an);if(!(st.mode&1))return sj(Mt,st,sn,null);if(on.data==="$!"){if(rn=on.nextSibling&&on.nextSibling.dataset,rn)var un=rn.dgst;return rn=un,an=Error(p$3(419)),rn=Ki$1(an,rn,void 0),sj(Mt,st,sn,rn)}if(un=(sn&Mt.childLanes)!==0,dh$1||un){if(rn=Q$1,rn!==null){switch(sn&-sn){case 4:on=2;break;case 16:on=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:on=32;break;case 536870912:on=268435456;break;default:on=0}on=on&(rn.suspendedLanes|sn)?0:on,on!==0&&on!==an.retryLane&&(an.retryLane=on,ih$1(Mt,on),gi$1(rn,Mt,on,-1))}return tj(),rn=Ki$1(Error(p$3(421))),sj(Mt,st,sn,rn)}return on.data==="$?"?(st.flags|=128,st.child=Mt.child,st=uj.bind(null,Mt),on._reactRetry=st,null):(Mt=an.treeContext,yg=Lf$1(on.nextSibling),xg=st,I$1=!0,zg=null,Mt!==null&&(og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,rg=Mt.id,sg=Mt.overflow,qg=st),st=qj(st,rn.children),st.flags|=4096,st)}function vj(Mt,st,nn){Mt.lanes|=st;var rn=Mt.alternate;rn!==null&&(rn.lanes|=st),bh$1(Mt.return,st,nn)}function wj(Mt,st,nn,rn,on){var an=Mt.memoizedState;an===null?Mt.memoizedState={isBackwards:st,rendering:null,renderingStartTime:0,last:rn,tail:nn,tailMode:on}:(an.isBackwards=st,an.rendering=null,an.renderingStartTime=0,an.last=rn,an.tail=nn,an.tailMode=on)}function xj(Mt,st,nn){var rn=st.pendingProps,on=rn.revealOrder,an=rn.tail;if(Xi$1(Mt,st,rn.children,nn),rn=L$1.current,rn&2)rn=rn&1|2,st.flags|=128;else{if(Mt!==null&&Mt.flags&128)e:for(Mt=st.child;Mt!==null;){if(Mt.tag===13)Mt.memoizedState!==null&&vj(Mt,nn,st);else if(Mt.tag===19)vj(Mt,nn,st);else if(Mt.child!==null){Mt.child.return=Mt,Mt=Mt.child;continue}if(Mt===st)break e;for(;Mt.sibling===null;){if(Mt.return===null||Mt.return===st)break e;Mt=Mt.return}Mt.sibling.return=Mt.return,Mt=Mt.sibling}rn&=1}if(G$1(L$1,rn),!(st.mode&1))st.memoizedState=null;else switch(on){case"forwards":for(nn=st.child,on=null;nn!==null;)Mt=nn.alternate,Mt!==null&&Ch$1(Mt)===null&&(on=nn),nn=nn.sibling;nn=on,nn===null?(on=st.child,st.child=null):(on=nn.sibling,nn.sibling=null),wj(st,!1,on,nn,an);break;case"backwards":for(nn=null,on=st.child,st.child=null;on!==null;){if(Mt=on.alternate,Mt!==null&&Ch$1(Mt)===null){st.child=on;break}Mt=on.sibling,on.sibling=nn,nn=on,on=Mt}wj(st,!0,nn,null,an);break;case"together":wj(st,!1,null,null,void 0);break;default:st.memoizedState=null}return st.child}function ij(Mt,st){!(st.mode&1)&&Mt!==null&&(Mt.alternate=null,st.alternate=null,st.flags|=2)}function Zi$1(Mt,st,nn){if(Mt!==null&&(st.dependencies=Mt.dependencies),rh$1|=st.lanes,!(nn&st.childLanes))return null;if(Mt!==null&&st.child!==Mt.child)throw Error(p$3(153));if(st.child!==null){for(Mt=st.child,nn=Pg(Mt,Mt.pendingProps),st.child=nn,nn.return=st;Mt.sibling!==null;)Mt=Mt.sibling,nn=nn.sibling=Pg(Mt,Mt.pendingProps),nn.return=st;nn.sibling=null}return st.child}function yj(Mt,st,nn){switch(st.tag){case 3:kj(st),Ig();break;case 5:Ah$1(st);break;case 1:Zf$1(st.type)&&cg(st);break;case 4:yh$1(st,st.stateNode.containerInfo);break;case 10:var rn=st.type._context,on=st.memoizedProps.value;G$1(Wg,rn._currentValue),rn._currentValue=on;break;case 13:if(rn=st.memoizedState,rn!==null)return rn.dehydrated!==null?(G$1(L$1,L$1.current&1),st.flags|=128,null):nn&st.child.childLanes?oj(Mt,st,nn):(G$1(L$1,L$1.current&1),Mt=Zi$1(Mt,st,nn),Mt!==null?Mt.sibling:null);G$1(L$1,L$1.current&1);break;case 19:if(rn=(nn&st.childLanes)!==0,Mt.flags&128){if(rn)return xj(Mt,st,nn);st.flags|=128}if(on=st.memoizedState,on!==null&&(on.rendering=null,on.tail=null,on.lastEffect=null),G$1(L$1,L$1.current),rn)break;return null;case 22:case 23:return st.lanes=0,dj(Mt,st,nn)}return Zi$1(Mt,st,nn)}var zj,Aj,Bj,Cj;zj=function(Mt,st){for(var nn=st.child;nn!==null;){if(nn.tag===5||nn.tag===6)Mt.appendChild(nn.stateNode);else if(nn.tag!==4&&nn.child!==null){nn.child.return=nn,nn=nn.child;continue}if(nn===st)break;for(;nn.sibling===null;){if(nn.return===null||nn.return===st)return;nn=nn.return}nn.sibling.return=nn.return,nn=nn.sibling}};Aj=function(){};Bj=function(Mt,st,nn,rn){var on=Mt.memoizedProps;if(on!==rn){Mt=st.stateNode,xh$1(uh$1.current);var an=null;switch(nn){case"input":on=Ya$1(Mt,on),rn=Ya$1(Mt,rn),an=[];break;case"select":on=A$1({},on,{value:void 0}),rn=A$1({},rn,{value:void 0}),an=[];break;case"textarea":on=gb(Mt,on),rn=gb(Mt,rn),an=[];break;default:typeof on.onClick!="function"&&typeof rn.onClick=="function"&&(Mt.onclick=Bf$1)}ub(nn,rn);var sn;nn=null;for(to in on)if(!rn.hasOwnProperty(to)&&on.hasOwnProperty(to)&&on[to]!=null)if(to==="style"){var un=on[to];for(sn in un)un.hasOwnProperty(sn)&&(nn||(nn={}),nn[sn]="")}else to!=="dangerouslySetInnerHTML"&&to!=="children"&&to!=="suppressContentEditableWarning"&&to!=="suppressHydrationWarning"&&to!=="autoFocus"&&(ea$1.hasOwnProperty(to)?an||(an=[]):(an=an||[]).push(to,null));for(to in rn){var Xr=rn[to];if(un=on!=null?on[to]:void 0,rn.hasOwnProperty(to)&&Xr!==un&&(Xr!=null||un!=null))if(to==="style")if(un){for(sn in un)!un.hasOwnProperty(sn)||Xr&&Xr.hasOwnProperty(sn)||(nn||(nn={}),nn[sn]="");for(sn in Xr)Xr.hasOwnProperty(sn)&&un[sn]!==Xr[sn]&&(nn||(nn={}),nn[sn]=Xr[sn])}else nn||(an||(an=[]),an.push(to,nn)),nn=Xr;else to==="dangerouslySetInnerHTML"?(Xr=Xr?Xr.__html:void 0,un=un?un.__html:void 0,Xr!=null&&un!==Xr&&(an=an||[]).push(to,Xr)):to==="children"?typeof Xr!="string"&&typeof Xr!="number"||(an=an||[]).push(to,""+Xr):to!=="suppressContentEditableWarning"&&to!=="suppressHydrationWarning"&&(ea$1.hasOwnProperty(to)?(Xr!=null&&to==="onScroll"&&D$1("scroll",Mt),an||un===Xr||(an=[])):(an=an||[]).push(to,Xr))}nn&&(an=an||[]).push("style",nn);var to=an;(st.updateQueue=to)&&(st.flags|=4)}};Cj=function(Mt,st,nn,rn){nn!==rn&&(st.flags|=4)};function Dj(Mt,st){if(!I$1)switch(Mt.tailMode){case"hidden":st=Mt.tail;for(var nn=null;st!==null;)st.alternate!==null&&(nn=st),st=st.sibling;nn===null?Mt.tail=null:nn.sibling=null;break;case"collapsed":nn=Mt.tail;for(var rn=null;nn!==null;)nn.alternate!==null&&(rn=nn),nn=nn.sibling;rn===null?st||Mt.tail===null?Mt.tail=null:Mt.tail.sibling=null:rn.sibling=null}}function S$1(Mt){var st=Mt.alternate!==null&&Mt.alternate.child===Mt.child,nn=0,rn=0;if(st)for(var on=Mt.child;on!==null;)nn|=on.lanes|on.childLanes,rn|=on.subtreeFlags&14680064,rn|=on.flags&14680064,on.return=Mt,on=on.sibling;else for(on=Mt.child;on!==null;)nn|=on.lanes|on.childLanes,rn|=on.subtreeFlags,rn|=on.flags,on.return=Mt,on=on.sibling;return Mt.subtreeFlags|=rn,Mt.childLanes=nn,st}function Ej(Mt,st,nn){var rn=st.pendingProps;switch(wg(st),st.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return S$1(st),null;case 1:return Zf$1(st.type)&&$f$1(),S$1(st),null;case 3:return rn=st.stateNode,zh$1(),E$1(Wf$1),E$1(H$1),Eh$1(),rn.pendingContext&&(rn.context=rn.pendingContext,rn.pendingContext=null),(Mt===null||Mt.child===null)&&(Gg(st)?st.flags|=4:Mt===null||Mt.memoizedState.isDehydrated&&!(st.flags&256)||(st.flags|=1024,zg!==null&&(Fj(zg),zg=null))),Aj(Mt,st),S$1(st),null;case 5:Bh$1(st);var on=xh$1(wh$1.current);if(nn=st.type,Mt!==null&&st.stateNode!=null)Bj(Mt,st,nn,rn,on),Mt.ref!==st.ref&&(st.flags|=512,st.flags|=2097152);else{if(!rn){if(st.stateNode===null)throw Error(p$3(166));return S$1(st),null}if(Mt=xh$1(uh$1.current),Gg(st)){rn=st.stateNode,nn=st.type;var an=st.memoizedProps;switch(rn[Of$1]=st,rn[Pf$1]=an,Mt=(st.mode&1)!==0,nn){case"dialog":D$1("cancel",rn),D$1("close",rn);break;case"iframe":case"object":case"embed":D$1("load",rn);break;case"video":case"audio":for(on=0;on<lf$1.length;on++)D$1(lf$1[on],rn);break;case"source":D$1("error",rn);break;case"img":case"image":case"link":D$1("error",rn),D$1("load",rn);break;case"details":D$1("toggle",rn);break;case"input":Za$1(rn,an),D$1("invalid",rn);break;case"select":rn._wrapperState={wasMultiple:!!an.multiple},D$1("invalid",rn);break;case"textarea":hb(rn,an),D$1("invalid",rn)}ub(nn,an),on=null;for(var sn in an)if(an.hasOwnProperty(sn)){var un=an[sn];sn==="children"?typeof un=="string"?rn.textContent!==un&&(an.suppressHydrationWarning!==!0&&Af$1(rn.textContent,un,Mt),on=["children",un]):typeof un=="number"&&rn.textContent!==""+un&&(an.suppressHydrationWarning!==!0&&Af$1(rn.textContent,un,Mt),on=["children",""+un]):ea$1.hasOwnProperty(sn)&&un!=null&&sn==="onScroll"&&D$1("scroll",rn)}switch(nn){case"input":Va$1(rn),db(rn,an,!0);break;case"textarea":Va$1(rn),jb(rn);break;case"select":case"option":break;default:typeof an.onClick=="function"&&(rn.onclick=Bf$1)}rn=on,st.updateQueue=rn,rn!==null&&(st.flags|=4)}else{sn=on.nodeType===9?on:on.ownerDocument,Mt==="http://www.w3.org/1999/xhtml"&&(Mt=kb(nn)),Mt==="http://www.w3.org/1999/xhtml"?nn==="script"?(Mt=sn.createElement("div"),Mt.innerHTML="<script><\/script>",Mt=Mt.removeChild(Mt.firstChild)):typeof rn.is=="string"?Mt=sn.createElement(nn,{is:rn.is}):(Mt=sn.createElement(nn),nn==="select"&&(sn=Mt,rn.multiple?sn.multiple=!0:rn.size&&(sn.size=rn.size))):Mt=sn.createElementNS(Mt,nn),Mt[Of$1]=st,Mt[Pf$1]=rn,zj(Mt,st,!1,!1),st.stateNode=Mt;e:{switch(sn=vb(nn,rn),nn){case"dialog":D$1("cancel",Mt),D$1("close",Mt),on=rn;break;case"iframe":case"object":case"embed":D$1("load",Mt),on=rn;break;case"video":case"audio":for(on=0;on<lf$1.length;on++)D$1(lf$1[on],Mt);on=rn;break;case"source":D$1("error",Mt),on=rn;break;case"img":case"image":case"link":D$1("error",Mt),D$1("load",Mt),on=rn;break;case"details":D$1("toggle",Mt),on=rn;break;case"input":Za$1(Mt,rn),on=Ya$1(Mt,rn),D$1("invalid",Mt);break;case"option":on=rn;break;case"select":Mt._wrapperState={wasMultiple:!!rn.multiple},on=A$1({},rn,{value:void 0}),D$1("invalid",Mt);break;case"textarea":hb(Mt,rn),on=gb(Mt,rn),D$1("invalid",Mt);break;default:on=rn}ub(nn,on),un=on;for(an in un)if(un.hasOwnProperty(an)){var Xr=un[an];an==="style"?sb(Mt,Xr):an==="dangerouslySetInnerHTML"?(Xr=Xr?Xr.__html:void 0,Xr!=null&&nb(Mt,Xr)):an==="children"?typeof Xr=="string"?(nn!=="textarea"||Xr!=="")&&ob(Mt,Xr):typeof Xr=="number"&&ob(Mt,""+Xr):an!=="suppressContentEditableWarning"&&an!=="suppressHydrationWarning"&&an!=="autoFocus"&&(ea$1.hasOwnProperty(an)?Xr!=null&&an==="onScroll"&&D$1("scroll",Mt):Xr!=null&&ta$1(Mt,an,Xr,sn))}switch(nn){case"input":Va$1(Mt),db(Mt,rn,!1);break;case"textarea":Va$1(Mt),jb(Mt);break;case"option":rn.value!=null&&Mt.setAttribute("value",""+Sa$1(rn.value));break;case"select":Mt.multiple=!!rn.multiple,an=rn.value,an!=null?fb(Mt,!!rn.multiple,an,!1):rn.defaultValue!=null&&fb(Mt,!!rn.multiple,rn.defaultValue,!0);break;default:typeof on.onClick=="function"&&(Mt.onclick=Bf$1)}switch(nn){case"button":case"input":case"select":case"textarea":rn=!!rn.autoFocus;break e;case"img":rn=!0;break e;default:rn=!1}}rn&&(st.flags|=4)}st.ref!==null&&(st.flags|=512,st.flags|=2097152)}return S$1(st),null;case 6:if(Mt&&st.stateNode!=null)Cj(Mt,st,Mt.memoizedProps,rn);else{if(typeof rn!="string"&&st.stateNode===null)throw Error(p$3(166));if(nn=xh$1(wh$1.current),xh$1(uh$1.current),Gg(st)){if(rn=st.stateNode,nn=st.memoizedProps,rn[Of$1]=st,(an=rn.nodeValue!==nn)&&(Mt=xg,Mt!==null))switch(Mt.tag){case 3:Af$1(rn.nodeValue,nn,(Mt.mode&1)!==0);break;case 5:Mt.memoizedProps.suppressHydrationWarning!==!0&&Af$1(rn.nodeValue,nn,(Mt.mode&1)!==0)}an&&(st.flags|=4)}else rn=(nn.nodeType===9?nn:nn.ownerDocument).createTextNode(rn),rn[Of$1]=st,st.stateNode=rn}return S$1(st),null;case 13:if(E$1(L$1),rn=st.memoizedState,Mt===null||Mt.memoizedState!==null&&Mt.memoizedState.dehydrated!==null){if(I$1&&yg!==null&&st.mode&1&&!(st.flags&128))Hg(),Ig(),st.flags|=98560,an=!1;else if(an=Gg(st),rn!==null&&rn.dehydrated!==null){if(Mt===null){if(!an)throw Error(p$3(318));if(an=st.memoizedState,an=an!==null?an.dehydrated:null,!an)throw Error(p$3(317));an[Of$1]=st}else Ig(),!(st.flags&128)&&(st.memoizedState=null),st.flags|=4;S$1(st),an=!1}else zg!==null&&(Fj(zg),zg=null),an=!0;if(!an)return st.flags&65536?st:null}return st.flags&128?(st.lanes=nn,st):(rn=rn!==null,rn!==(Mt!==null&&Mt.memoizedState!==null)&&rn&&(st.child.flags|=8192,st.mode&1&&(Mt===null||L$1.current&1?T$1===0&&(T$1=3):tj())),st.updateQueue!==null&&(st.flags|=4),S$1(st),null);case 4:return zh$1(),Aj(Mt,st),Mt===null&&sf$1(st.stateNode.containerInfo),S$1(st),null;case 10:return ah$1(st.type._context),S$1(st),null;case 17:return Zf$1(st.type)&&$f$1(),S$1(st),null;case 19:if(E$1(L$1),an=st.memoizedState,an===null)return S$1(st),null;if(rn=(st.flags&128)!==0,sn=an.rendering,sn===null)if(rn)Dj(an,!1);else{if(T$1!==0||Mt!==null&&Mt.flags&128)for(Mt=st.child;Mt!==null;){if(sn=Ch$1(Mt),sn!==null){for(st.flags|=128,Dj(an,!1),rn=sn.updateQueue,rn!==null&&(st.updateQueue=rn,st.flags|=4),st.subtreeFlags=0,rn=nn,nn=st.child;nn!==null;)an=nn,Mt=rn,an.flags&=14680066,sn=an.alternate,sn===null?(an.childLanes=0,an.lanes=Mt,an.child=null,an.subtreeFlags=0,an.memoizedProps=null,an.memoizedState=null,an.updateQueue=null,an.dependencies=null,an.stateNode=null):(an.childLanes=sn.childLanes,an.lanes=sn.lanes,an.child=sn.child,an.subtreeFlags=0,an.deletions=null,an.memoizedProps=sn.memoizedProps,an.memoizedState=sn.memoizedState,an.updateQueue=sn.updateQueue,an.type=sn.type,Mt=sn.dependencies,an.dependencies=Mt===null?null:{lanes:Mt.lanes,firstContext:Mt.firstContext}),nn=nn.sibling;return G$1(L$1,L$1.current&1|2),st.child}Mt=Mt.sibling}an.tail!==null&&B$1()>Gj&&(st.flags|=128,rn=!0,Dj(an,!1),st.lanes=4194304)}else{if(!rn)if(Mt=Ch$1(sn),Mt!==null){if(st.flags|=128,rn=!0,nn=Mt.updateQueue,nn!==null&&(st.updateQueue=nn,st.flags|=4),Dj(an,!0),an.tail===null&&an.tailMode==="hidden"&&!sn.alternate&&!I$1)return S$1(st),null}else 2*B$1()-an.renderingStartTime>Gj&&nn!==1073741824&&(st.flags|=128,rn=!0,Dj(an,!1),st.lanes=4194304);an.isBackwards?(sn.sibling=st.child,st.child=sn):(nn=an.last,nn!==null?nn.sibling=sn:st.child=sn,an.last=sn)}return an.tail!==null?(st=an.tail,an.rendering=st,an.tail=st.sibling,an.renderingStartTime=B$1(),st.sibling=null,nn=L$1.current,G$1(L$1,rn?nn&1|2:nn&1),st):(S$1(st),null);case 22:case 23:return Hj(),rn=st.memoizedState!==null,Mt!==null&&Mt.memoizedState!==null!==rn&&(st.flags|=8192),rn&&st.mode&1?fj&1073741824&&(S$1(st),st.subtreeFlags&6&&(st.flags|=8192)):S$1(st),null;case 24:return null;case 25:return null}throw Error(p$3(156,st.tag))}function Ij(Mt,st){switch(wg(st),st.tag){case 1:return Zf$1(st.type)&&$f$1(),Mt=st.flags,Mt&65536?(st.flags=Mt&-65537|128,st):null;case 3:return zh$1(),E$1(Wf$1),E$1(H$1),Eh$1(),Mt=st.flags,Mt&65536&&!(Mt&128)?(st.flags=Mt&-65537|128,st):null;case 5:return Bh$1(st),null;case 13:if(E$1(L$1),Mt=st.memoizedState,Mt!==null&&Mt.dehydrated!==null){if(st.alternate===null)throw Error(p$3(340));Ig()}return Mt=st.flags,Mt&65536?(st.flags=Mt&-65537|128,st):null;case 19:return E$1(L$1),null;case 4:return zh$1(),null;case 10:return ah$1(st.type._context),null;case 22:case 23:return Hj(),null;case 24:return null;default:return null}}var Jj=!1,U$1=!1,Kj=typeof WeakSet=="function"?WeakSet:Set,V$1=null;function Lj(Mt,st){var nn=Mt.ref;if(nn!==null)if(typeof nn=="function")try{nn(null)}catch(rn){W$1(Mt,st,rn)}else nn.current=null}function Mj(Mt,st,nn){try{nn()}catch(rn){W$1(Mt,st,rn)}}var Nj=!1;function Oj(Mt,st){if(Cf$1=dd,Mt=Me$1(),Ne$1(Mt)){if("selectionStart"in Mt)var nn={start:Mt.selectionStart,end:Mt.selectionEnd};else e:{nn=(nn=Mt.ownerDocument)&&nn.defaultView||window;var rn=nn.getSelection&&nn.getSelection();if(rn&&rn.rangeCount!==0){nn=rn.anchorNode;var on=rn.anchorOffset,an=rn.focusNode;rn=rn.focusOffset;try{nn.nodeType,an.nodeType}catch{nn=null;break e}var sn=0,un=-1,Xr=-1,to=0,uo=0,hn=Mt,fn=null;t:for(;;){for(var co;hn!==nn||on!==0&&hn.nodeType!==3||(un=sn+on),hn!==an||rn!==0&&hn.nodeType!==3||(Xr=sn+rn),hn.nodeType===3&&(sn+=hn.nodeValue.length),(co=hn.firstChild)!==null;)fn=hn,hn=co;for(;;){if(hn===Mt)break t;if(fn===nn&&++to===on&&(un=sn),fn===an&&++uo===rn&&(Xr=sn),(co=hn.nextSibling)!==null)break;hn=fn,fn=hn.parentNode}hn=co}nn=un===-1||Xr===-1?null:{start:un,end:Xr}}else nn=null}nn=nn||{start:0,end:0}}else nn=null;for(Df$1={focusedElem:Mt,selectionRange:nn},dd=!1,V$1=st;V$1!==null;)if(st=V$1,Mt=st.child,(st.subtreeFlags&1028)!==0&&Mt!==null)Mt.return=st,V$1=Mt;else for(;V$1!==null;){st=V$1;try{var lo=st.alternate;if(st.flags&1024)switch(st.tag){case 0:case 11:case 15:break;case 1:if(lo!==null){var fo=lo.memoizedProps,ho=lo.memoizedState,mo=st.stateNode,Uo=mo.getSnapshotBeforeUpdate(st.elementType===st.type?fo:Ci$1(st.type,fo),ho);mo.__reactInternalSnapshotBeforeUpdate=Uo}break;case 3:var _d=st.stateNode.containerInfo;_d.nodeType===1?_d.textContent="":_d.nodeType===9&&_d.documentElement&&_d.removeChild(_d.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p$3(163))}}catch(tp){W$1(st,st.return,tp)}if(Mt=st.sibling,Mt!==null){Mt.return=st.return,V$1=Mt;break}V$1=st.return}return lo=Nj,Nj=!1,lo}function Pj(Mt,st,nn){var rn=st.updateQueue;if(rn=rn!==null?rn.lastEffect:null,rn!==null){var on=rn=rn.next;do{if((on.tag&Mt)===Mt){var an=on.destroy;on.destroy=void 0,an!==void 0&&Mj(st,nn,an)}on=on.next}while(on!==rn)}}function Qj(Mt,st){if(st=st.updateQueue,st=st!==null?st.lastEffect:null,st!==null){var nn=st=st.next;do{if((nn.tag&Mt)===Mt){var rn=nn.create;nn.destroy=rn()}nn=nn.next}while(nn!==st)}}function Rj(Mt){var st=Mt.ref;if(st!==null){var nn=Mt.stateNode;switch(Mt.tag){case 5:Mt=nn;break;default:Mt=nn}typeof st=="function"?st(Mt):st.current=Mt}}function Sj(Mt){var st=Mt.alternate;st!==null&&(Mt.alternate=null,Sj(st)),Mt.child=null,Mt.deletions=null,Mt.sibling=null,Mt.tag===5&&(st=Mt.stateNode,st!==null&&(delete st[Of$1],delete st[Pf$1],delete st[of$1],delete st[Qf$1],delete st[Rf$1])),Mt.stateNode=null,Mt.return=null,Mt.dependencies=null,Mt.memoizedProps=null,Mt.memoizedState=null,Mt.pendingProps=null,Mt.stateNode=null,Mt.updateQueue=null}function Tj(Mt){return Mt.tag===5||Mt.tag===3||Mt.tag===4}function Uj(Mt){e:for(;;){for(;Mt.sibling===null;){if(Mt.return===null||Tj(Mt.return))return null;Mt=Mt.return}for(Mt.sibling.return=Mt.return,Mt=Mt.sibling;Mt.tag!==5&&Mt.tag!==6&&Mt.tag!==18;){if(Mt.flags&2||Mt.child===null||Mt.tag===4)continue e;Mt.child.return=Mt,Mt=Mt.child}if(!(Mt.flags&2))return Mt.stateNode}}function Vj(Mt,st,nn){var rn=Mt.tag;if(rn===5||rn===6)Mt=Mt.stateNode,st?nn.nodeType===8?nn.parentNode.insertBefore(Mt,st):nn.insertBefore(Mt,st):(nn.nodeType===8?(st=nn.parentNode,st.insertBefore(Mt,nn)):(st=nn,st.appendChild(Mt)),nn=nn._reactRootContainer,nn!=null||st.onclick!==null||(st.onclick=Bf$1));else if(rn!==4&&(Mt=Mt.child,Mt!==null))for(Vj(Mt,st,nn),Mt=Mt.sibling;Mt!==null;)Vj(Mt,st,nn),Mt=Mt.sibling}function Wj(Mt,st,nn){var rn=Mt.tag;if(rn===5||rn===6)Mt=Mt.stateNode,st?nn.insertBefore(Mt,st):nn.appendChild(Mt);else if(rn!==4&&(Mt=Mt.child,Mt!==null))for(Wj(Mt,st,nn),Mt=Mt.sibling;Mt!==null;)Wj(Mt,st,nn),Mt=Mt.sibling}var X$2=null,Xj=!1;function Yj(Mt,st,nn){for(nn=nn.child;nn!==null;)Zj(Mt,st,nn),nn=nn.sibling}function Zj(Mt,st,nn){if(lc$1&&typeof lc$1.onCommitFiberUnmount=="function")try{lc$1.onCommitFiberUnmount(kc$1,nn)}catch{}switch(nn.tag){case 5:U$1||Lj(nn,st);case 6:var rn=X$2,on=Xj;X$2=null,Yj(Mt,st,nn),X$2=rn,Xj=on,X$2!==null&&(Xj?(Mt=X$2,nn=nn.stateNode,Mt.nodeType===8?Mt.parentNode.removeChild(nn):Mt.removeChild(nn)):X$2.removeChild(nn.stateNode));break;case 18:X$2!==null&&(Xj?(Mt=X$2,nn=nn.stateNode,Mt.nodeType===8?Kf$1(Mt.parentNode,nn):Mt.nodeType===1&&Kf$1(Mt,nn),bd$1(Mt)):Kf$1(X$2,nn.stateNode));break;case 4:rn=X$2,on=Xj,X$2=nn.stateNode.containerInfo,Xj=!0,Yj(Mt,st,nn),X$2=rn,Xj=on;break;case 0:case 11:case 14:case 15:if(!U$1&&(rn=nn.updateQueue,rn!==null&&(rn=rn.lastEffect,rn!==null))){on=rn=rn.next;do{var an=on,sn=an.destroy;an=an.tag,sn!==void 0&&(an&2||an&4)&&Mj(nn,st,sn),on=on.next}while(on!==rn)}Yj(Mt,st,nn);break;case 1:if(!U$1&&(Lj(nn,st),rn=nn.stateNode,typeof rn.componentWillUnmount=="function"))try{rn.props=nn.memoizedProps,rn.state=nn.memoizedState,rn.componentWillUnmount()}catch(un){W$1(nn,st,un)}Yj(Mt,st,nn);break;case 21:Yj(Mt,st,nn);break;case 22:nn.mode&1?(U$1=(rn=U$1)||nn.memoizedState!==null,Yj(Mt,st,nn),U$1=rn):Yj(Mt,st,nn);break;default:Yj(Mt,st,nn)}}function ak(Mt){var st=Mt.updateQueue;if(st!==null){Mt.updateQueue=null;var nn=Mt.stateNode;nn===null&&(nn=Mt.stateNode=new Kj),st.forEach(function(rn){var on=bk.bind(null,Mt,rn);nn.has(rn)||(nn.add(rn),rn.then(on,on))})}}function ck(Mt,st){var nn=st.deletions;if(nn!==null)for(var rn=0;rn<nn.length;rn++){var on=nn[rn];try{var an=Mt,sn=st,un=sn;e:for(;un!==null;){switch(un.tag){case 5:X$2=un.stateNode,Xj=!1;break e;case 3:X$2=un.stateNode.containerInfo,Xj=!0;break e;case 4:X$2=un.stateNode.containerInfo,Xj=!0;break e}un=un.return}if(X$2===null)throw Error(p$3(160));Zj(an,sn,on),X$2=null,Xj=!1;var Xr=on.alternate;Xr!==null&&(Xr.return=null),on.return=null}catch(to){W$1(on,st,to)}}if(st.subtreeFlags&12854)for(st=st.child;st!==null;)dk(st,Mt),st=st.sibling}function dk(Mt,st){var nn=Mt.alternate,rn=Mt.flags;switch(Mt.tag){case 0:case 11:case 14:case 15:if(ck(st,Mt),ek(Mt),rn&4){try{Pj(3,Mt,Mt.return),Qj(3,Mt)}catch(fo){W$1(Mt,Mt.return,fo)}try{Pj(5,Mt,Mt.return)}catch(fo){W$1(Mt,Mt.return,fo)}}break;case 1:ck(st,Mt),ek(Mt),rn&512&&nn!==null&&Lj(nn,nn.return);break;case 5:if(ck(st,Mt),ek(Mt),rn&512&&nn!==null&&Lj(nn,nn.return),Mt.flags&32){var on=Mt.stateNode;try{ob(on,"")}catch(fo){W$1(Mt,Mt.return,fo)}}if(rn&4&&(on=Mt.stateNode,on!=null)){var an=Mt.memoizedProps,sn=nn!==null?nn.memoizedProps:an,un=Mt.type,Xr=Mt.updateQueue;if(Mt.updateQueue=null,Xr!==null)try{un==="input"&&an.type==="radio"&&an.name!=null&&ab(on,an),vb(un,sn);var to=vb(un,an);for(sn=0;sn<Xr.length;sn+=2){var uo=Xr[sn],hn=Xr[sn+1];uo==="style"?sb(on,hn):uo==="dangerouslySetInnerHTML"?nb(on,hn):uo==="children"?ob(on,hn):ta$1(on,uo,hn,to)}switch(un){case"input":bb(on,an);break;case"textarea":ib(on,an);break;case"select":var fn=on._wrapperState.wasMultiple;on._wrapperState.wasMultiple=!!an.multiple;var co=an.value;co!=null?fb(on,!!an.multiple,co,!1):fn!==!!an.multiple&&(an.defaultValue!=null?fb(on,!!an.multiple,an.defaultValue,!0):fb(on,!!an.multiple,an.multiple?[]:"",!1))}on[Pf$1]=an}catch(fo){W$1(Mt,Mt.return,fo)}}break;case 6:if(ck(st,Mt),ek(Mt),rn&4){if(Mt.stateNode===null)throw Error(p$3(162));on=Mt.stateNode,an=Mt.memoizedProps;try{on.nodeValue=an}catch(fo){W$1(Mt,Mt.return,fo)}}break;case 3:if(ck(st,Mt),ek(Mt),rn&4&&nn!==null&&nn.memoizedState.isDehydrated)try{bd$1(st.containerInfo)}catch(fo){W$1(Mt,Mt.return,fo)}break;case 4:ck(st,Mt),ek(Mt);break;case 13:ck(st,Mt),ek(Mt),on=Mt.child,on.flags&8192&&(an=on.memoizedState!==null,on.stateNode.isHidden=an,!an||on.alternate!==null&&on.alternate.memoizedState!==null||(fk=B$1())),rn&4&&ak(Mt);break;case 22:if(uo=nn!==null&&nn.memoizedState!==null,Mt.mode&1?(U$1=(to=U$1)||uo,ck(st,Mt),U$1=to):ck(st,Mt),ek(Mt),rn&8192){if(to=Mt.memoizedState!==null,(Mt.stateNode.isHidden=to)&&!uo&&Mt.mode&1)for(V$1=Mt,uo=Mt.child;uo!==null;){for(hn=V$1=uo;V$1!==null;){switch(fn=V$1,co=fn.child,fn.tag){case 0:case 11:case 14:case 15:Pj(4,fn,fn.return);break;case 1:Lj(fn,fn.return);var lo=fn.stateNode;if(typeof lo.componentWillUnmount=="function"){rn=fn,nn=fn.return;try{st=rn,lo.props=st.memoizedProps,lo.state=st.memoizedState,lo.componentWillUnmount()}catch(fo){W$1(rn,nn,fo)}}break;case 5:Lj(fn,fn.return);break;case 22:if(fn.memoizedState!==null){gk(hn);continue}}co!==null?(co.return=fn,V$1=co):gk(hn)}uo=uo.sibling}e:for(uo=null,hn=Mt;;){if(hn.tag===5){if(uo===null){uo=hn;try{on=hn.stateNode,to?(an=on.style,typeof an.setProperty=="function"?an.setProperty("display","none","important"):an.display="none"):(un=hn.stateNode,Xr=hn.memoizedProps.style,sn=Xr!=null&&Xr.hasOwnProperty("display")?Xr.display:null,un.style.display=rb("display",sn))}catch(fo){W$1(Mt,Mt.return,fo)}}}else if(hn.tag===6){if(uo===null)try{hn.stateNode.nodeValue=to?"":hn.memoizedProps}catch(fo){W$1(Mt,Mt.return,fo)}}else if((hn.tag!==22&&hn.tag!==23||hn.memoizedState===null||hn===Mt)&&hn.child!==null){hn.child.return=hn,hn=hn.child;continue}if(hn===Mt)break e;for(;hn.sibling===null;){if(hn.return===null||hn.return===Mt)break e;uo===hn&&(uo=null),hn=hn.return}uo===hn&&(uo=null),hn.sibling.return=hn.return,hn=hn.sibling}}break;case 19:ck(st,Mt),ek(Mt),rn&4&&ak(Mt);break;case 21:break;default:ck(st,Mt),ek(Mt)}}function ek(Mt){var st=Mt.flags;if(st&2){try{e:{for(var nn=Mt.return;nn!==null;){if(Tj(nn)){var rn=nn;break e}nn=nn.return}throw Error(p$3(160))}switch(rn.tag){case 5:var on=rn.stateNode;rn.flags&32&&(ob(on,""),rn.flags&=-33);var an=Uj(Mt);Wj(Mt,an,on);break;case 3:case 4:var sn=rn.stateNode.containerInfo,un=Uj(Mt);Vj(Mt,un,sn);break;default:throw Error(p$3(161))}}catch(Xr){W$1(Mt,Mt.return,Xr)}Mt.flags&=-3}st&4096&&(Mt.flags&=-4097)}function hk(Mt,st,nn){V$1=Mt,ik(Mt)}function ik(Mt,st,nn){for(var rn=(Mt.mode&1)!==0;V$1!==null;){var on=V$1,an=on.child;if(on.tag===22&&rn){var sn=on.memoizedState!==null||Jj;if(!sn){var un=on.alternate,Xr=un!==null&&un.memoizedState!==null||U$1;un=Jj;var to=U$1;if(Jj=sn,(U$1=Xr)&&!to)for(V$1=on;V$1!==null;)sn=V$1,Xr=sn.child,sn.tag===22&&sn.memoizedState!==null?jk(on):Xr!==null?(Xr.return=sn,V$1=Xr):jk(on);for(;an!==null;)V$1=an,ik(an),an=an.sibling;V$1=on,Jj=un,U$1=to}kk(Mt)}else on.subtreeFlags&8772&&an!==null?(an.return=on,V$1=an):kk(Mt)}}function kk(Mt){for(;V$1!==null;){var st=V$1;if(st.flags&8772){var nn=st.alternate;try{if(st.flags&8772)switch(st.tag){case 0:case 11:case 15:U$1||Qj(5,st);break;case 1:var rn=st.stateNode;if(st.flags&4&&!U$1)if(nn===null)rn.componentDidMount();else{var on=st.elementType===st.type?nn.memoizedProps:Ci$1(st.type,nn.memoizedProps);rn.componentDidUpdate(on,nn.memoizedState,rn.__reactInternalSnapshotBeforeUpdate)}var an=st.updateQueue;an!==null&&sh$1(st,an,rn);break;case 3:var sn=st.updateQueue;if(sn!==null){if(nn=null,st.child!==null)switch(st.child.tag){case 5:nn=st.child.stateNode;break;case 1:nn=st.child.stateNode}sh$1(st,sn,nn)}break;case 5:var un=st.stateNode;if(nn===null&&st.flags&4){nn=un;var Xr=st.memoizedProps;switch(st.type){case"button":case"input":case"select":case"textarea":Xr.autoFocus&&nn.focus();break;case"img":Xr.src&&(nn.src=Xr.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(st.memoizedState===null){var to=st.alternate;if(to!==null){var uo=to.memoizedState;if(uo!==null){var hn=uo.dehydrated;hn!==null&&bd$1(hn)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(p$3(163))}U$1||st.flags&512&&Rj(st)}catch(fn){W$1(st,st.return,fn)}}if(st===Mt){V$1=null;break}if(nn=st.sibling,nn!==null){nn.return=st.return,V$1=nn;break}V$1=st.return}}function gk(Mt){for(;V$1!==null;){var st=V$1;if(st===Mt){V$1=null;break}var nn=st.sibling;if(nn!==null){nn.return=st.return,V$1=nn;break}V$1=st.return}}function jk(Mt){for(;V$1!==null;){var st=V$1;try{switch(st.tag){case 0:case 11:case 15:var nn=st.return;try{Qj(4,st)}catch(Xr){W$1(st,nn,Xr)}break;case 1:var rn=st.stateNode;if(typeof rn.componentDidMount=="function"){var on=st.return;try{rn.componentDidMount()}catch(Xr){W$1(st,on,Xr)}}var an=st.return;try{Rj(st)}catch(Xr){W$1(st,an,Xr)}break;case 5:var sn=st.return;try{Rj(st)}catch(Xr){W$1(st,sn,Xr)}}}catch(Xr){W$1(st,st.return,Xr)}if(st===Mt){V$1=null;break}var un=st.sibling;if(un!==null){un.return=st.return,V$1=un;break}V$1=st.return}}var lk=Math.ceil,mk=ua$1.ReactCurrentDispatcher,nk=ua$1.ReactCurrentOwner,ok=ua$1.ReactCurrentBatchConfig,K$1=0,Q$1=null,Y$1=null,Z$1=0,fj=0,ej=Uf$1(0),T$1=0,pk=null,rh$1=0,qk=0,rk=0,sk=null,tk=null,fk=0,Gj=1/0,uk=null,Oi$1=!1,Pi$1=null,Ri$1=null,vk=!1,wk=null,xk=0,yk=0,zk=null,Ak=-1,Bk=0;function R$1(){return K$1&6?B$1():Ak!==-1?Ak:Ak=B$1()}function yi$1(Mt){return Mt.mode&1?K$1&2&&Z$1!==0?Z$1&-Z$1:Kg.transition!==null?(Bk===0&&(Bk=yc$1()),Bk):(Mt=C$1,Mt!==0||(Mt=window.event,Mt=Mt===void 0?16:jd(Mt.type)),Mt):1}function gi$1(Mt,st,nn,rn){if(50<yk)throw yk=0,zk=null,Error(p$3(185));Ac$1(Mt,nn,rn),(!(K$1&2)||Mt!==Q$1)&&(Mt===Q$1&&(!(K$1&2)&&(qk|=nn),T$1===4&&Ck(Mt,Z$1)),Dk(Mt,rn),nn===1&&K$1===0&&!(st.mode&1)&&(Gj=B$1()+500,fg&&jg()))}function Dk(Mt,st){var nn=Mt.callbackNode;wc$1(Mt,st);var rn=uc$1(Mt,Mt===Q$1?Z$1:0);if(rn===0)nn!==null&&bc$1(nn),Mt.callbackNode=null,Mt.callbackPriority=0;else if(st=rn&-rn,Mt.callbackPriority!==st){if(nn!=null&&bc$1(nn),st===1)Mt.tag===0?ig(Ek.bind(null,Mt)):hg(Ek.bind(null,Mt)),Jf$1(function(){!(K$1&6)&&jg()}),nn=null;else{switch(Dc$1(rn)){case 1:nn=fc$1;break;case 4:nn=gc$1;break;case 16:nn=hc$1;break;case 536870912:nn=jc$1;break;default:nn=hc$1}nn=Fk(nn,Gk.bind(null,Mt))}Mt.callbackPriority=st,Mt.callbackNode=nn}}function Gk(Mt,st){if(Ak=-1,Bk=0,K$1&6)throw Error(p$3(327));var nn=Mt.callbackNode;if(Hk()&&Mt.callbackNode!==nn)return null;var rn=uc$1(Mt,Mt===Q$1?Z$1:0);if(rn===0)return null;if(rn&30||rn&Mt.expiredLanes||st)st=Ik(Mt,rn);else{st=rn;var on=K$1;K$1|=2;var an=Jk();(Q$1!==Mt||Z$1!==st)&&(uk=null,Gj=B$1()+500,Kk(Mt,st));do try{Lk();break}catch(un){Mk(Mt,un)}while(!0);$g(),mk.current=an,K$1=on,Y$1!==null?st=0:(Q$1=null,Z$1=0,st=T$1)}if(st!==0){if(st===2&&(on=xc$1(Mt),on!==0&&(rn=on,st=Nk(Mt,on))),st===1)throw nn=pk,Kk(Mt,0),Ck(Mt,rn),Dk(Mt,B$1()),nn;if(st===6)Ck(Mt,rn);else{if(on=Mt.current.alternate,!(rn&30)&&!Ok(on)&&(st=Ik(Mt,rn),st===2&&(an=xc$1(Mt),an!==0&&(rn=an,st=Nk(Mt,an))),st===1))throw nn=pk,Kk(Mt,0),Ck(Mt,rn),Dk(Mt,B$1()),nn;switch(Mt.finishedWork=on,Mt.finishedLanes=rn,st){case 0:case 1:throw Error(p$3(345));case 2:Pk(Mt,tk,uk);break;case 3:if(Ck(Mt,rn),(rn&130023424)===rn&&(st=fk+500-B$1(),10<st)){if(uc$1(Mt,0)!==0)break;if(on=Mt.suspendedLanes,(on&rn)!==rn){R$1(),Mt.pingedLanes|=Mt.suspendedLanes&on;break}Mt.timeoutHandle=Ff$1(Pk.bind(null,Mt,tk,uk),st);break}Pk(Mt,tk,uk);break;case 4:if(Ck(Mt,rn),(rn&4194240)===rn)break;for(st=Mt.eventTimes,on=-1;0<rn;){var sn=31-oc$1(rn);an=1<<sn,sn=st[sn],sn>on&&(on=sn),rn&=~an}if(rn=on,rn=B$1()-rn,rn=(120>rn?120:480>rn?480:1080>rn?1080:1920>rn?1920:3e3>rn?3e3:4320>rn?4320:1960*lk(rn/1960))-rn,10<rn){Mt.timeoutHandle=Ff$1(Pk.bind(null,Mt,tk,uk),rn);break}Pk(Mt,tk,uk);break;case 5:Pk(Mt,tk,uk);break;default:throw Error(p$3(329))}}}return Dk(Mt,B$1()),Mt.callbackNode===nn?Gk.bind(null,Mt):null}function Nk(Mt,st){var nn=sk;return Mt.current.memoizedState.isDehydrated&&(Kk(Mt,st).flags|=256),Mt=Ik(Mt,st),Mt!==2&&(st=tk,tk=nn,st!==null&&Fj(st)),Mt}function Fj(Mt){tk===null?tk=Mt:tk.push.apply(tk,Mt)}function Ok(Mt){for(var st=Mt;;){if(st.flags&16384){var nn=st.updateQueue;if(nn!==null&&(nn=nn.stores,nn!==null))for(var rn=0;rn<nn.length;rn++){var on=nn[rn],an=on.getSnapshot;on=on.value;try{if(!He$1(an(),on))return!1}catch{return!1}}}if(nn=st.child,st.subtreeFlags&16384&&nn!==null)nn.return=st,st=nn;else{if(st===Mt)break;for(;st.sibling===null;){if(st.return===null||st.return===Mt)return!0;st=st.return}st.sibling.return=st.return,st=st.sibling}}return!0}function Ck(Mt,st){for(st&=~rk,st&=~qk,Mt.suspendedLanes|=st,Mt.pingedLanes&=~st,Mt=Mt.expirationTimes;0<st;){var nn=31-oc$1(st),rn=1<<nn;Mt[nn]=-1,st&=~rn}}function Ek(Mt){if(K$1&6)throw Error(p$3(327));Hk();var st=uc$1(Mt,0);if(!(st&1))return Dk(Mt,B$1()),null;var nn=Ik(Mt,st);if(Mt.tag!==0&&nn===2){var rn=xc$1(Mt);rn!==0&&(st=rn,nn=Nk(Mt,rn))}if(nn===1)throw nn=pk,Kk(Mt,0),Ck(Mt,st),Dk(Mt,B$1()),nn;if(nn===6)throw Error(p$3(345));return Mt.finishedWork=Mt.current.alternate,Mt.finishedLanes=st,Pk(Mt,tk,uk),Dk(Mt,B$1()),null}function Qk(Mt,st){var nn=K$1;K$1|=1;try{return Mt(st)}finally{K$1=nn,K$1===0&&(Gj=B$1()+500,fg&&jg())}}function Rk(Mt){wk!==null&&wk.tag===0&&!(K$1&6)&&Hk();var st=K$1;K$1|=1;var nn=ok.transition,rn=C$1;try{if(ok.transition=null,C$1=1,Mt)return Mt()}finally{C$1=rn,ok.transition=nn,K$1=st,!(K$1&6)&&jg()}}function Hj(){fj=ej.current,E$1(ej)}function Kk(Mt,st){Mt.finishedWork=null,Mt.finishedLanes=0;var nn=Mt.timeoutHandle;if(nn!==-1&&(Mt.timeoutHandle=-1,Gf$1(nn)),Y$1!==null)for(nn=Y$1.return;nn!==null;){var rn=nn;switch(wg(rn),rn.tag){case 1:rn=rn.type.childContextTypes,rn!=null&&$f$1();break;case 3:zh$1(),E$1(Wf$1),E$1(H$1),Eh$1();break;case 5:Bh$1(rn);break;case 4:zh$1();break;case 13:E$1(L$1);break;case 19:E$1(L$1);break;case 10:ah$1(rn.type._context);break;case 22:case 23:Hj()}nn=nn.return}if(Q$1=Mt,Y$1=Mt=Pg(Mt.current,null),Z$1=fj=st,T$1=0,pk=null,rk=qk=rh$1=0,tk=sk=null,fh$1!==null){for(st=0;st<fh$1.length;st++)if(nn=fh$1[st],rn=nn.interleaved,rn!==null){nn.interleaved=null;var on=rn.next,an=nn.pending;if(an!==null){var sn=an.next;an.next=on,rn.next=sn}nn.pending=rn}fh$1=null}return Mt}function Mk(Mt,st){do{var nn=Y$1;try{if($g(),Fh$1.current=Rh$1,Ih$1){for(var rn=M$1.memoizedState;rn!==null;){var on=rn.queue;on!==null&&(on.pending=null),rn=rn.next}Ih$1=!1}if(Hh$1=0,O$1=N$1=M$1=null,Jh$1=!1,Kh$1=0,nk.current=null,nn===null||nn.return===null){T$1=1,pk=st,Y$1=null;break}e:{var an=Mt,sn=nn.return,un=nn,Xr=st;if(st=Z$1,un.flags|=32768,Xr!==null&&typeof Xr=="object"&&typeof Xr.then=="function"){var to=Xr,uo=un,hn=uo.tag;if(!(uo.mode&1)&&(hn===0||hn===11||hn===15)){var fn=uo.alternate;fn?(uo.updateQueue=fn.updateQueue,uo.memoizedState=fn.memoizedState,uo.lanes=fn.lanes):(uo.updateQueue=null,uo.memoizedState=null)}var co=Ui$1(sn);if(co!==null){co.flags&=-257,Vi$1(co,sn,un,an,st),co.mode&1&&Si$1(an,to,st),st=co,Xr=to;var lo=st.updateQueue;if(lo===null){var fo=new Set;fo.add(Xr),st.updateQueue=fo}else lo.add(Xr);break e}else{if(!(st&1)){Si$1(an,to,st),tj();break e}Xr=Error(p$3(426))}}else if(I$1&&un.mode&1){var ho=Ui$1(sn);if(ho!==null){!(ho.flags&65536)&&(ho.flags|=256),Vi$1(ho,sn,un,an,st),Jg(Ji$1(Xr,un));break e}}an=Xr=Ji$1(Xr,un),T$1!==4&&(T$1=2),sk===null?sk=[an]:sk.push(an),an=sn;do{switch(an.tag){case 3:an.flags|=65536,st&=-st,an.lanes|=st;var mo=Ni$1(an,Xr,st);ph$1(an,mo);break e;case 1:un=Xr;var Uo=an.type,_d=an.stateNode;if(!(an.flags&128)&&(typeof Uo.getDerivedStateFromError=="function"||_d!==null&&typeof _d.componentDidCatch=="function"&&(Ri$1===null||!Ri$1.has(_d)))){an.flags|=65536,st&=-st,an.lanes|=st;var tp=Qi$1(an,un,st);ph$1(an,tp);break e}}an=an.return}while(an!==null)}Sk(nn)}catch(ep){st=ep,Y$1===nn&&nn!==null&&(Y$1=nn=nn.return);continue}break}while(!0)}function Jk(){var Mt=mk.current;return mk.current=Rh$1,Mt===null?Rh$1:Mt}function tj(){(T$1===0||T$1===3||T$1===2)&&(T$1=4),Q$1===null||!(rh$1&268435455)&&!(qk&268435455)||Ck(Q$1,Z$1)}function Ik(Mt,st){var nn=K$1;K$1|=2;var rn=Jk();(Q$1!==Mt||Z$1!==st)&&(uk=null,Kk(Mt,st));do try{Tk();break}catch(on){Mk(Mt,on)}while(!0);if($g(),K$1=nn,mk.current=rn,Y$1!==null)throw Error(p$3(261));return Q$1=null,Z$1=0,T$1}function Tk(){for(;Y$1!==null;)Uk(Y$1)}function Lk(){for(;Y$1!==null&&!cc$1();)Uk(Y$1)}function Uk(Mt){var st=Vk(Mt.alternate,Mt,fj);Mt.memoizedProps=Mt.pendingProps,st===null?Sk(Mt):Y$1=st,nk.current=null}function Sk(Mt){var st=Mt;do{var nn=st.alternate;if(Mt=st.return,st.flags&32768){if(nn=Ij(nn,st),nn!==null){nn.flags&=32767,Y$1=nn;return}if(Mt!==null)Mt.flags|=32768,Mt.subtreeFlags=0,Mt.deletions=null;else{T$1=6,Y$1=null;return}}else if(nn=Ej(nn,st,fj),nn!==null){Y$1=nn;return}if(st=st.sibling,st!==null){Y$1=st;return}Y$1=st=Mt}while(st!==null);T$1===0&&(T$1=5)}function Pk(Mt,st,nn){var rn=C$1,on=ok.transition;try{ok.transition=null,C$1=1,Wk(Mt,st,nn,rn)}finally{ok.transition=on,C$1=rn}return null}function Wk(Mt,st,nn,rn){do Hk();while(wk!==null);if(K$1&6)throw Error(p$3(327));nn=Mt.finishedWork;var on=Mt.finishedLanes;if(nn===null)return null;if(Mt.finishedWork=null,Mt.finishedLanes=0,nn===Mt.current)throw Error(p$3(177));Mt.callbackNode=null,Mt.callbackPriority=0;var an=nn.lanes|nn.childLanes;if(Bc$1(Mt,an),Mt===Q$1&&(Y$1=Q$1=null,Z$1=0),!(nn.subtreeFlags&2064)&&!(nn.flags&2064)||vk||(vk=!0,Fk(hc$1,function(){return Hk(),null})),an=(nn.flags&15990)!==0,nn.subtreeFlags&15990||an){an=ok.transition,ok.transition=null;var sn=C$1;C$1=1;var un=K$1;K$1|=4,nk.current=null,Oj(Mt,nn),dk(nn,Mt),Oe$1(Df$1),dd=!!Cf$1,Df$1=Cf$1=null,Mt.current=nn,hk(nn),dc$1(),K$1=un,C$1=sn,ok.transition=an}else Mt.current=nn;if(vk&&(vk=!1,wk=Mt,xk=on),an=Mt.pendingLanes,an===0&&(Ri$1=null),mc$1(nn.stateNode),Dk(Mt,B$1()),st!==null)for(rn=Mt.onRecoverableError,nn=0;nn<st.length;nn++)on=st[nn],rn(on.value,{componentStack:on.stack,digest:on.digest});if(Oi$1)throw Oi$1=!1,Mt=Pi$1,Pi$1=null,Mt;return xk&1&&Mt.tag!==0&&Hk(),an=Mt.pendingLanes,an&1?Mt===zk?yk++:(yk=0,zk=Mt):yk=0,jg(),null}function Hk(){if(wk!==null){var Mt=Dc$1(xk),st=ok.transition,nn=C$1;try{if(ok.transition=null,C$1=16>Mt?16:Mt,wk===null)var rn=!1;else{if(Mt=wk,wk=null,xk=0,K$1&6)throw Error(p$3(331));var on=K$1;for(K$1|=4,V$1=Mt.current;V$1!==null;){var an=V$1,sn=an.child;if(V$1.flags&16){var un=an.deletions;if(un!==null){for(var Xr=0;Xr<un.length;Xr++){var to=un[Xr];for(V$1=to;V$1!==null;){var uo=V$1;switch(uo.tag){case 0:case 11:case 15:Pj(8,uo,an)}var hn=uo.child;if(hn!==null)hn.return=uo,V$1=hn;else for(;V$1!==null;){uo=V$1;var fn=uo.sibling,co=uo.return;if(Sj(uo),uo===to){V$1=null;break}if(fn!==null){fn.return=co,V$1=fn;break}V$1=co}}}var lo=an.alternate;if(lo!==null){var fo=lo.child;if(fo!==null){lo.child=null;do{var ho=fo.sibling;fo.sibling=null,fo=ho}while(fo!==null)}}V$1=an}}if(an.subtreeFlags&2064&&sn!==null)sn.return=an,V$1=sn;else e:for(;V$1!==null;){if(an=V$1,an.flags&2048)switch(an.tag){case 0:case 11:case 15:Pj(9,an,an.return)}var mo=an.sibling;if(mo!==null){mo.return=an.return,V$1=mo;break e}V$1=an.return}}var Uo=Mt.current;for(V$1=Uo;V$1!==null;){sn=V$1;var _d=sn.child;if(sn.subtreeFlags&2064&&_d!==null)_d.return=sn,V$1=_d;else e:for(sn=Uo;V$1!==null;){if(un=V$1,un.flags&2048)try{switch(un.tag){case 0:case 11:case 15:Qj(9,un)}}catch(ep){W$1(un,un.return,ep)}if(un===sn){V$1=null;break e}var tp=un.sibling;if(tp!==null){tp.return=un.return,V$1=tp;break e}V$1=un.return}}if(K$1=on,jg(),lc$1&&typeof lc$1.onPostCommitFiberRoot=="function")try{lc$1.onPostCommitFiberRoot(kc$1,Mt)}catch{}rn=!0}return rn}finally{C$1=nn,ok.transition=st}}return!1}function Xk(Mt,st,nn){st=Ji$1(nn,st),st=Ni$1(Mt,st,1),Mt=nh$1(Mt,st,1),st=R$1(),Mt!==null&&(Ac$1(Mt,1,st),Dk(Mt,st))}function W$1(Mt,st,nn){if(Mt.tag===3)Xk(Mt,Mt,nn);else for(;st!==null;){if(st.tag===3){Xk(st,Mt,nn);break}else if(st.tag===1){var rn=st.stateNode;if(typeof st.type.getDerivedStateFromError=="function"||typeof rn.componentDidCatch=="function"&&(Ri$1===null||!Ri$1.has(rn))){Mt=Ji$1(nn,Mt),Mt=Qi$1(st,Mt,1),st=nh$1(st,Mt,1),Mt=R$1(),st!==null&&(Ac$1(st,1,Mt),Dk(st,Mt));break}}st=st.return}}function Ti$1(Mt,st,nn){var rn=Mt.pingCache;rn!==null&&rn.delete(st),st=R$1(),Mt.pingedLanes|=Mt.suspendedLanes&nn,Q$1===Mt&&(Z$1&nn)===nn&&(T$1===4||T$1===3&&(Z$1&130023424)===Z$1&&500>B$1()-fk?Kk(Mt,0):rk|=nn),Dk(Mt,st)}function Yk(Mt,st){st===0&&(Mt.mode&1?(st=sc$1,sc$1<<=1,!(sc$1&130023424)&&(sc$1=4194304)):st=1);var nn=R$1();Mt=ih$1(Mt,st),Mt!==null&&(Ac$1(Mt,st,nn),Dk(Mt,nn))}function uj(Mt){var st=Mt.memoizedState,nn=0;st!==null&&(nn=st.retryLane),Yk(Mt,nn)}function bk(Mt,st){var nn=0;switch(Mt.tag){case 13:var rn=Mt.stateNode,on=Mt.memoizedState;on!==null&&(nn=on.retryLane);break;case 19:rn=Mt.stateNode;break;default:throw Error(p$3(314))}rn!==null&&rn.delete(st),Yk(Mt,nn)}var Vk;Vk=function(Mt,st,nn){if(Mt!==null)if(Mt.memoizedProps!==st.pendingProps||Wf$1.current)dh$1=!0;else{if(!(Mt.lanes&nn)&&!(st.flags&128))return dh$1=!1,yj(Mt,st,nn);dh$1=!!(Mt.flags&131072)}else dh$1=!1,I$1&&st.flags&1048576&&ug(st,ng,st.index);switch(st.lanes=0,st.tag){case 2:var rn=st.type;ij(Mt,st),Mt=st.pendingProps;var on=Yf$1(st,H$1.current);ch$1(st,nn),on=Nh$1(null,st,rn,Mt,on,nn);var an=Sh$1();return st.flags|=1,typeof on=="object"&&on!==null&&typeof on.render=="function"&&on.$$typeof===void 0?(st.tag=1,st.memoizedState=null,st.updateQueue=null,Zf$1(rn)?(an=!0,cg(st)):an=!1,st.memoizedState=on.state!==null&&on.state!==void 0?on.state:null,kh$1(st),on.updater=Ei$1,st.stateNode=on,on._reactInternals=st,Ii$1(st,rn,Mt,nn),st=jj(null,st,rn,!0,an,nn)):(st.tag=0,I$1&&an&&vg(st),Xi$1(null,st,on,nn),st=st.child),st;case 16:rn=st.elementType;e:{switch(ij(Mt,st),Mt=st.pendingProps,on=rn._init,rn=on(rn._payload),st.type=rn,on=st.tag=Zk(rn),Mt=Ci$1(rn,Mt),on){case 0:st=cj(null,st,rn,Mt,nn);break e;case 1:st=hj(null,st,rn,Mt,nn);break e;case 11:st=Yi$1(null,st,rn,Mt,nn);break e;case 14:st=$i$1(null,st,rn,Ci$1(rn.type,Mt),nn);break e}throw Error(p$3(306,rn,""))}return st;case 0:return rn=st.type,on=st.pendingProps,on=st.elementType===rn?on:Ci$1(rn,on),cj(Mt,st,rn,on,nn);case 1:return rn=st.type,on=st.pendingProps,on=st.elementType===rn?on:Ci$1(rn,on),hj(Mt,st,rn,on,nn);case 3:e:{if(kj(st),Mt===null)throw Error(p$3(387));rn=st.pendingProps,an=st.memoizedState,on=an.element,lh$1(Mt,st),qh$1(st,rn,null,nn);var sn=st.memoizedState;if(rn=sn.element,an.isDehydrated)if(an={element:rn,isDehydrated:!1,cache:sn.cache,pendingSuspenseBoundaries:sn.pendingSuspenseBoundaries,transitions:sn.transitions},st.updateQueue.baseState=an,st.memoizedState=an,st.flags&256){on=Ji$1(Error(p$3(423)),st),st=lj(Mt,st,rn,nn,on);break e}else if(rn!==on){on=Ji$1(Error(p$3(424)),st),st=lj(Mt,st,rn,nn,on);break e}else for(yg=Lf$1(st.stateNode.containerInfo.firstChild),xg=st,I$1=!0,zg=null,nn=Vg(st,null,rn,nn),st.child=nn;nn;)nn.flags=nn.flags&-3|4096,nn=nn.sibling;else{if(Ig(),rn===on){st=Zi$1(Mt,st,nn);break e}Xi$1(Mt,st,rn,nn)}st=st.child}return st;case 5:return Ah$1(st),Mt===null&&Eg(st),rn=st.type,on=st.pendingProps,an=Mt!==null?Mt.memoizedProps:null,sn=on.children,Ef$1(rn,on)?sn=null:an!==null&&Ef$1(rn,an)&&(st.flags|=32),gj(Mt,st),Xi$1(Mt,st,sn,nn),st.child;case 6:return Mt===null&&Eg(st),null;case 13:return oj(Mt,st,nn);case 4:return yh$1(st,st.stateNode.containerInfo),rn=st.pendingProps,Mt===null?st.child=Ug(st,null,rn,nn):Xi$1(Mt,st,rn,nn),st.child;case 11:return rn=st.type,on=st.pendingProps,on=st.elementType===rn?on:Ci$1(rn,on),Yi$1(Mt,st,rn,on,nn);case 7:return Xi$1(Mt,st,st.pendingProps,nn),st.child;case 8:return Xi$1(Mt,st,st.pendingProps.children,nn),st.child;case 12:return Xi$1(Mt,st,st.pendingProps.children,nn),st.child;case 10:e:{if(rn=st.type._context,on=st.pendingProps,an=st.memoizedProps,sn=on.value,G$1(Wg,rn._currentValue),rn._currentValue=sn,an!==null)if(He$1(an.value,sn)){if(an.children===on.children&&!Wf$1.current){st=Zi$1(Mt,st,nn);break e}}else for(an=st.child,an!==null&&(an.return=st);an!==null;){var un=an.dependencies;if(un!==null){sn=an.child;for(var Xr=un.firstContext;Xr!==null;){if(Xr.context===rn){if(an.tag===1){Xr=mh$1(-1,nn&-nn),Xr.tag=2;var to=an.updateQueue;if(to!==null){to=to.shared;var uo=to.pending;uo===null?Xr.next=Xr:(Xr.next=uo.next,uo.next=Xr),to.pending=Xr}}an.lanes|=nn,Xr=an.alternate,Xr!==null&&(Xr.lanes|=nn),bh$1(an.return,nn,st),un.lanes|=nn;break}Xr=Xr.next}}else if(an.tag===10)sn=an.type===st.type?null:an.child;else if(an.tag===18){if(sn=an.return,sn===null)throw Error(p$3(341));sn.lanes|=nn,un=sn.alternate,un!==null&&(un.lanes|=nn),bh$1(sn,nn,st),sn=an.sibling}else sn=an.child;if(sn!==null)sn.return=an;else for(sn=an;sn!==null;){if(sn===st){sn=null;break}if(an=sn.sibling,an!==null){an.return=sn.return,sn=an;break}sn=sn.return}an=sn}Xi$1(Mt,st,on.children,nn),st=st.child}return st;case 9:return on=st.type,rn=st.pendingProps.children,ch$1(st,nn),on=eh$1(on),rn=rn(on),st.flags|=1,Xi$1(Mt,st,rn,nn),st.child;case 14:return rn=st.type,on=Ci$1(rn,st.pendingProps),on=Ci$1(rn.type,on),$i$1(Mt,st,rn,on,nn);case 15:return bj(Mt,st,st.type,st.pendingProps,nn);case 17:return rn=st.type,on=st.pendingProps,on=st.elementType===rn?on:Ci$1(rn,on),ij(Mt,st),st.tag=1,Zf$1(rn)?(Mt=!0,cg(st)):Mt=!1,ch$1(st,nn),Gi$1(st,rn,on),Ii$1(st,rn,on,nn),jj(null,st,rn,!0,Mt,nn);case 19:return xj(Mt,st,nn);case 22:return dj(Mt,st,nn)}throw Error(p$3(156,st.tag))};function Fk(Mt,st){return ac$1(Mt,st)}function $k(Mt,st,nn,rn){this.tag=Mt,this.key=nn,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=st,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=rn,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bg(Mt,st,nn,rn){return new $k(Mt,st,nn,rn)}function aj(Mt){return Mt=Mt.prototype,!(!Mt||!Mt.isReactComponent)}function Zk(Mt){if(typeof Mt=="function")return aj(Mt)?1:0;if(Mt!=null){if(Mt=Mt.$$typeof,Mt===Da$1)return 11;if(Mt===Ga$1)return 14}return 2}function Pg(Mt,st){var nn=Mt.alternate;return nn===null?(nn=Bg(Mt.tag,st,Mt.key,Mt.mode),nn.elementType=Mt.elementType,nn.type=Mt.type,nn.stateNode=Mt.stateNode,nn.alternate=Mt,Mt.alternate=nn):(nn.pendingProps=st,nn.type=Mt.type,nn.flags=0,nn.subtreeFlags=0,nn.deletions=null),nn.flags=Mt.flags&14680064,nn.childLanes=Mt.childLanes,nn.lanes=Mt.lanes,nn.child=Mt.child,nn.memoizedProps=Mt.memoizedProps,nn.memoizedState=Mt.memoizedState,nn.updateQueue=Mt.updateQueue,st=Mt.dependencies,nn.dependencies=st===null?null:{lanes:st.lanes,firstContext:st.firstContext},nn.sibling=Mt.sibling,nn.index=Mt.index,nn.ref=Mt.ref,nn}function Rg(Mt,st,nn,rn,on,an){var sn=2;if(rn=Mt,typeof Mt=="function")aj(Mt)&&(sn=1);else if(typeof Mt=="string")sn=5;else e:switch(Mt){case ya$1:return Tg(nn.children,on,an,st);case za$1:sn=8,on|=8;break;case Aa$1:return Mt=Bg(12,nn,st,on|2),Mt.elementType=Aa$1,Mt.lanes=an,Mt;case Ea$1:return Mt=Bg(13,nn,st,on),Mt.elementType=Ea$1,Mt.lanes=an,Mt;case Fa$1:return Mt=Bg(19,nn,st,on),Mt.elementType=Fa$1,Mt.lanes=an,Mt;case Ia$1:return pj(nn,on,an,st);default:if(typeof Mt=="object"&&Mt!==null)switch(Mt.$$typeof){case Ba$1:sn=10;break e;case Ca$1:sn=9;break e;case Da$1:sn=11;break e;case Ga$1:sn=14;break e;case Ha$1:sn=16,rn=null;break e}throw Error(p$3(130,Mt==null?Mt:typeof Mt,""))}return st=Bg(sn,nn,st,on),st.elementType=Mt,st.type=rn,st.lanes=an,st}function Tg(Mt,st,nn,rn){return Mt=Bg(7,Mt,rn,st),Mt.lanes=nn,Mt}function pj(Mt,st,nn,rn){return Mt=Bg(22,Mt,rn,st),Mt.elementType=Ia$1,Mt.lanes=nn,Mt.stateNode={isHidden:!1},Mt}function Qg(Mt,st,nn){return Mt=Bg(6,Mt,null,st),Mt.lanes=nn,Mt}function Sg(Mt,st,nn){return st=Bg(4,Mt.children!==null?Mt.children:[],Mt.key,st),st.lanes=nn,st.stateNode={containerInfo:Mt.containerInfo,pendingChildren:null,implementation:Mt.implementation},st}function al$1(Mt,st,nn,rn,on){this.tag=st,this.containerInfo=Mt,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zc$1(0),this.expirationTimes=zc$1(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zc$1(0),this.identifierPrefix=rn,this.onRecoverableError=on,this.mutableSourceEagerHydrationData=null}function bl$1(Mt,st,nn,rn,on,an,sn,un,Xr){return Mt=new al$1(Mt,st,nn,un,Xr),st===1?(st=1,an===!0&&(st|=8)):st=0,an=Bg(3,null,null,st),Mt.current=an,an.stateNode=Mt,an.memoizedState={element:rn,isDehydrated:nn,cache:null,transitions:null,pendingSuspenseBoundaries:null},kh$1(an),Mt}function cl$1(Mt,st,nn){var rn=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wa$1,key:rn==null?null:""+rn,children:Mt,containerInfo:st,implementation:nn}}function dl$1(Mt){if(!Mt)return Vf$1;Mt=Mt._reactInternals;e:{if(Vb(Mt)!==Mt||Mt.tag!==1)throw Error(p$3(170));var st=Mt;do{switch(st.tag){case 3:st=st.stateNode.context;break e;case 1:if(Zf$1(st.type)){st=st.stateNode.__reactInternalMemoizedMergedChildContext;break e}}st=st.return}while(st!==null);throw Error(p$3(171))}if(Mt.tag===1){var nn=Mt.type;if(Zf$1(nn))return bg(Mt,nn,st)}return st}function el$1(Mt,st,nn,rn,on,an,sn,un,Xr){return Mt=bl$1(nn,rn,!0,Mt,on,an,sn,un,Xr),Mt.context=dl$1(null),nn=Mt.current,rn=R$1(),on=yi$1(nn),an=mh$1(rn,on),an.callback=st??null,nh$1(nn,an,on),Mt.current.lanes=on,Ac$1(Mt,on,rn),Dk(Mt,rn),Mt}function fl$1(Mt,st,nn,rn){var on=st.current,an=R$1(),sn=yi$1(on);return nn=dl$1(nn),st.context===null?st.context=nn:st.pendingContext=nn,st=mh$1(an,sn),st.payload={element:Mt},rn=rn===void 0?null:rn,rn!==null&&(st.callback=rn),Mt=nh$1(on,st,sn),Mt!==null&&(gi$1(Mt,on,sn,an),oh$1(Mt,on,sn)),sn}function gl$1(Mt){if(Mt=Mt.current,!Mt.child)return null;switch(Mt.child.tag){case 5:return Mt.child.stateNode;default:return Mt.child.stateNode}}function hl$1(Mt,st){if(Mt=Mt.memoizedState,Mt!==null&&Mt.dehydrated!==null){var nn=Mt.retryLane;Mt.retryLane=nn!==0&&nn<st?nn:st}}function il$1(Mt,st){hl$1(Mt,st),(Mt=Mt.alternate)&&hl$1(Mt,st)}function jl$1(){return null}var kl$1=typeof reportError=="function"?reportError:function(Mt){console.error(Mt)};function ll$1(Mt){this._internalRoot=Mt}ml$1.prototype.render=ll$1.prototype.render=function(Mt){var st=this._internalRoot;if(st===null)throw Error(p$3(409));fl$1(Mt,st,null,null)};ml$1.prototype.unmount=ll$1.prototype.unmount=function(){var Mt=this._internalRoot;if(Mt!==null){this._internalRoot=null;var st=Mt.containerInfo;Rk(function(){fl$1(null,Mt,null,null)}),st[uf$1]=null}};function ml$1(Mt){this._internalRoot=Mt}ml$1.prototype.unstable_scheduleHydration=function(Mt){if(Mt){var st=Hc$1();Mt={blockedOn:null,target:Mt,priority:st};for(var nn=0;nn<Qc$1.length&&st!==0&&st<Qc$1[nn].priority;nn++);Qc$1.splice(nn,0,Mt),nn===0&&Vc$1(Mt)}};function nl$1(Mt){return!(!Mt||Mt.nodeType!==1&&Mt.nodeType!==9&&Mt.nodeType!==11)}function ol$1(Mt){return!(!Mt||Mt.nodeType!==1&&Mt.nodeType!==9&&Mt.nodeType!==11&&(Mt.nodeType!==8||Mt.nodeValue!==" react-mount-point-unstable "))}function pl$1(){}function ql$1(Mt,st,nn,rn,on){if(on){if(typeof rn=="function"){var an=rn;rn=function(){var to=gl$1(sn);an.call(to)}}var sn=el$1(st,rn,Mt,0,null,!1,!1,"",pl$1);return Mt._reactRootContainer=sn,Mt[uf$1]=sn.current,sf$1(Mt.nodeType===8?Mt.parentNode:Mt),Rk(),sn}for(;on=Mt.lastChild;)Mt.removeChild(on);if(typeof rn=="function"){var un=rn;rn=function(){var to=gl$1(Xr);un.call(to)}}var Xr=bl$1(Mt,0,!1,null,null,!1,!1,"",pl$1);return Mt._reactRootContainer=Xr,Mt[uf$1]=Xr.current,sf$1(Mt.nodeType===8?Mt.parentNode:Mt),Rk(function(){fl$1(st,Xr,nn,rn)}),Xr}function rl$1(Mt,st,nn,rn,on){var an=nn._reactRootContainer;if(an){var sn=an;if(typeof on=="function"){var un=on;on=function(){var Xr=gl$1(sn);un.call(Xr)}}fl$1(st,sn,Mt,on)}else sn=ql$1(nn,st,Mt,on,rn);return gl$1(sn)}Ec$1=function(Mt){switch(Mt.tag){case 3:var st=Mt.stateNode;if(st.current.memoizedState.isDehydrated){var nn=tc$1(st.pendingLanes);nn!==0&&(Cc$1(st,nn|1),Dk(st,B$1()),!(K$1&6)&&(Gj=B$1()+500,jg()))}break;case 13:Rk(function(){var rn=ih$1(Mt,1);if(rn!==null){var on=R$1();gi$1(rn,Mt,1,on)}}),il$1(Mt,1)}};Fc$1=function(Mt){if(Mt.tag===13){var st=ih$1(Mt,134217728);if(st!==null){var nn=R$1();gi$1(st,Mt,134217728,nn)}il$1(Mt,134217728)}};Gc$1=function(Mt){if(Mt.tag===13){var st=yi$1(Mt),nn=ih$1(Mt,st);if(nn!==null){var rn=R$1();gi$1(nn,Mt,st,rn)}il$1(Mt,st)}};Hc$1=function(){return C$1};Ic$1=function(Mt,st){var nn=C$1;try{return C$1=Mt,st()}finally{C$1=nn}};yb=function(Mt,st,nn){switch(st){case"input":if(bb(Mt,nn),st=nn.name,nn.type==="radio"&&st!=null){for(nn=Mt;nn.parentNode;)nn=nn.parentNode;for(nn=nn.querySelectorAll("input[name="+JSON.stringify(""+st)+'][type="radio"]'),st=0;st<nn.length;st++){var rn=nn[st];if(rn!==Mt&&rn.form===Mt.form){var on=Db(rn);if(!on)throw Error(p$3(90));Wa$1(rn),bb(rn,on)}}}break;case"textarea":ib(Mt,nn);break;case"select":st=nn.value,st!=null&&fb(Mt,!!nn.multiple,st,!1)}};Gb=Qk;Hb=Rk;var sl$1={usingClientEntryPoint:!1,Events:[Cb,ue$1,Db,Eb,Fb,Qk]},tl$1={findFiberByHostInstance:Wc$1,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ul$1={bundleType:tl$1.bundleType,version:tl$1.version,rendererPackageName:tl$1.rendererPackageName,rendererConfig:tl$1.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ua$1.ReactCurrentDispatcher,findHostInstanceByFiber:function(Mt){return Mt=Zb(Mt),Mt===null?null:Mt.stateNode},findFiberByHostInstance:tl$1.findFiberByHostInstance||jl$1,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vl$1=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vl$1.isDisabled&&vl$1.supportsFiber)try{kc$1=vl$1.inject(ul$1),lc$1=vl$1}catch{}}reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sl$1;reactDom_production_min.createPortal=function(Mt,st){var nn=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!nl$1(st))throw Error(p$3(200));return cl$1(Mt,st,null,nn)};reactDom_production_min.createRoot=function(Mt,st){if(!nl$1(Mt))throw Error(p$3(299));var nn=!1,rn="",on=kl$1;return st!=null&&(st.unstable_strictMode===!0&&(nn=!0),st.identifierPrefix!==void 0&&(rn=st.identifierPrefix),st.onRecoverableError!==void 0&&(on=st.onRecoverableError)),st=bl$1(Mt,1,!1,null,null,nn,!1,rn,on),Mt[uf$1]=st.current,sf$1(Mt.nodeType===8?Mt.parentNode:Mt),new ll$1(st)};reactDom_production_min.findDOMNode=function(Mt){if(Mt==null)return null;if(Mt.nodeType===1)return Mt;var st=Mt._reactInternals;if(st===void 0)throw typeof Mt.render=="function"?Error(p$3(188)):(Mt=Object.keys(Mt).join(","),Error(p$3(268,Mt)));return Mt=Zb(st),Mt=Mt===null?null:Mt.stateNode,Mt};reactDom_production_min.flushSync=function(Mt){return Rk(Mt)};reactDom_production_min.hydrate=function(Mt,st,nn){if(!ol$1(st))throw Error(p$3(200));return rl$1(null,Mt,st,!0,nn)};reactDom_production_min.hydrateRoot=function(Mt,st,nn){if(!nl$1(Mt))throw Error(p$3(405));var rn=nn!=null&&nn.hydratedSources||null,on=!1,an="",sn=kl$1;if(nn!=null&&(nn.unstable_strictMode===!0&&(on=!0),nn.identifierPrefix!==void 0&&(an=nn.identifierPrefix),nn.onRecoverableError!==void 0&&(sn=nn.onRecoverableError)),st=el$1(st,null,Mt,1,nn??null,on,!1,an,sn),Mt[uf$1]=st.current,sf$1(Mt),rn)for(Mt=0;Mt<rn.length;Mt++)nn=rn[Mt],on=nn._getVersion,on=on(nn._source),st.mutableSourceEagerHydrationData==null?st.mutableSourceEagerHydrationData=[nn,on]:st.mutableSourceEagerHydrationData.push(nn,on);return new ml$1(st)};reactDom_production_min.render=function(Mt,st,nn){if(!ol$1(st))throw Error(p$3(200));return rl$1(null,Mt,st,!1,nn)};reactDom_production_min.unmountComponentAtNode=function(Mt){if(!ol$1(Mt))throw Error(p$3(40));return Mt._reactRootContainer?(Rk(function(){rl$1(null,null,Mt,!1,function(){Mt._reactRootContainer=null,Mt[uf$1]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Qk;reactDom_production_min.unstable_renderSubtreeIntoContainer=function(Mt,st,nn,rn){if(!ol$1(nn))throw Error(p$3(200));if(Mt==null||Mt._reactInternals===void 0)throw Error(p$3(38));return rl$1(Mt,st,nn,!1,rn)};reactDom_production_min.version="18.3.1-next-f1338f8080-20240426";function checkDCE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(Mt){console.error(Mt)}}checkDCE(),reactDom.exports=reactDom_production_min;var reactDomExports=reactDom.exports;const ReactDOM=getDefaultExportFromCjs(reactDomExports);var createRoot,m$2=reactDomExports;createRoot=m$2.createRoot,m$2.hydrateRoot;function parse$2(Mt,st){if(Mt instanceof RegExp)return{keys:!1,pattern:Mt};var nn,rn,on,an,sn=[],un="",Xr=Mt.split("/");for(Xr[0]||Xr.shift();on=Xr.shift();)nn=on[0],nn==="*"?(sn.push(nn),un+=on[1]==="?"?"(?:/(.*))?":"/(.*)"):nn===":"?(rn=on.indexOf("?",1),an=on.indexOf(".",1),sn.push(on.substring(1,~rn?rn:~an?an:on.length)),un+=~rn&&!~an?"(?:/([^/]+?))?":"/([^/]+?)",~an&&(un+=(~rn?"?":"")+"\\"+on.substring(an))):un+="/"+on;return{keys:sn,pattern:new RegExp("^"+un+(st?"(?=$|/)":"/?$"),"i")}}var shim={exports:{}},useSyncExternalStoreShim_production_min={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e$2=reactExports;function h$2(Mt,st){return Mt===st&&(Mt!==0||1/Mt===1/st)||Mt!==Mt&&st!==st}var k$3=typeof Object.is=="function"?Object.is:h$2,l$2=e$2.useState,m$1=e$2.useEffect,n$2=e$2.useLayoutEffect,p$2=e$2.useDebugValue;function q$2(Mt,st){var nn=st(),rn=l$2({inst:{value:nn,getSnapshot:st}}),on=rn[0].inst,an=rn[1];return n$2(function(){on.value=nn,on.getSnapshot=st,r$3(on)&&an({inst:on})},[Mt,nn,st]),m$1(function(){return r$3(on)&&an({inst:on}),Mt(function(){r$3(on)&&an({inst:on})})},[Mt]),p$2(nn),nn}function r$3(Mt){var st=Mt.getSnapshot;Mt=Mt.value;try{var nn=st();return!k$3(Mt,nn)}catch{return!0}}function t$2(Mt,st){return st()}var u$2=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?t$2:q$2;useSyncExternalStoreShim_production_min.useSyncExternalStore=e$2.useSyncExternalStore!==void 0?e$2.useSyncExternalStore:u$2;shim.exports=useSyncExternalStoreShim_production_min;var shimExports=shim.exports;const useBuiltinInsertionEffect=React$1.useInsertionEffect,canUseDOM=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",useIsomorphicLayoutEffect$2=canUseDOM?reactExports.useLayoutEffect:reactExports.useEffect,useInsertionEffect=useBuiltinInsertionEffect||useIsomorphicLayoutEffect$2,useEvent=Mt=>{const st=reactExports.useRef([Mt,(...nn)=>st[0](...nn)]).current;return useInsertionEffect(()=>{st[0]=Mt}),st[1]},eventPopstate="popstate",eventPushState="pushState",eventReplaceState="replaceState",eventHashchange="hashchange",events=[eventPopstate,eventPushState,eventReplaceState,eventHashchange],subscribeToLocationUpdates=Mt=>{for(const st of events)addEventListener(st,Mt);return()=>{for(const st of events)removeEventListener(st,Mt)}},useLocationProperty=(Mt,st)=>shimExports.useSyncExternalStore(subscribeToLocationUpdates,Mt,st),currentSearch=()=>location.search,useSearch=({ssrSearch:Mt=""}={})=>useLocationProperty(currentSearch,()=>Mt),currentPathname=()=>location.pathname,usePathname=({ssrPath:Mt}={})=>useLocationProperty(currentPathname,Mt?()=>Mt:currentPathname),navigate=(Mt,{replace:st=!1,state:nn=null}={})=>history[st?eventReplaceState:eventPushState](nn,"",Mt),useBrowserLocation=(Mt={})=>[usePathname(Mt),navigate],patchKey=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[patchKey]>"u"){for(const Mt of[eventPushState,eventReplaceState]){const st=history[Mt];history[Mt]=function(){const nn=st.apply(this,arguments),rn=new Event(Mt);return rn.arguments=arguments,dispatchEvent(rn),nn}}Object.defineProperty(window,patchKey,{value:!0})}const _relativePath=(Mt,st)=>st.toLowerCase().indexOf(Mt.toLowerCase())?"~"+st:st.slice(Mt.length)||"/",baseDefaults=(Mt="")=>Mt==="/"?"":Mt,absolutePath=(Mt,st)=>Mt[0]==="~"?Mt.slice(1):baseDefaults(st)+Mt,relativePath=(Mt="",st)=>_relativePath(unescape(baseDefaults(Mt)),unescape(st)),unescape=Mt=>{try{return decodeURI(Mt)}catch{return Mt}},defaultRouter={hook:useBrowserLocation,searchHook:useSearch,parser:parse$2,base:"",ssrPath:void 0,ssrSearch:void 0,hrefs:Mt=>Mt},RouterCtx=reactExports.createContext(defaultRouter),useRouter=()=>reactExports.useContext(RouterCtx),Params0={},ParamsCtx=reactExports.createContext(Params0),useParams=()=>reactExports.useContext(ParamsCtx),useLocationFromRouter=Mt=>{const[st,nn]=Mt.hook(Mt);return[relativePath(Mt.base,st),useEvent((rn,on)=>nn(absolutePath(rn,Mt.base),on))]},useLocation=()=>useLocationFromRouter(useRouter()),matchRoute=(Mt,st,nn,rn)=>{const{pattern:on,keys:an}=st instanceof RegExp?{keys:!1,pattern:st}:Mt(st||"*",rn),sn=on.exec(nn)||[],[un,...Xr]=sn;return un!==void 0?[!0,(()=>{const to=an!==!1?Object.fromEntries(an.map((hn,fn)=>[hn,Xr[fn]])):sn.groups;let uo={...Xr};return to&&Object.assign(uo,to),uo})(),...rn?[un]:[]]:[!1,null]},Router$1=({children:Mt,...st})=>{var uo,hn;const nn=useRouter(),rn=st.hook?defaultRouter:nn;let on=rn;const[an,sn]=((uo=st.ssrPath)==null?void 0:uo.split("?"))??[];sn&&(st.ssrSearch=sn,st.ssrPath=an),st.hrefs=st.hrefs??((hn=st.hook)==null?void 0:hn.hrefs);let un=reactExports.useRef({}),Xr=un.current,to=Xr;for(let fn in rn){const co=fn==="base"?rn[fn]+(st[fn]||""):st[fn]||rn[fn];Xr===to&&co!==to[fn]&&(un.current=to={...to}),to[fn]=co,co!==rn[fn]&&(on=to)}return reactExports.createElement(RouterCtx.Provider,{value:on,children:Mt})},h_route=({children:Mt,component:st},nn)=>st?reactExports.createElement(st,{params:nn}):typeof Mt=="function"?Mt(nn):Mt,useCachedParams=Mt=>{let st=reactExports.useRef(Params0),nn=st.current;for(const rn in Mt)Mt[rn]!==nn[rn]&&(nn=Mt);return Object.keys(Mt).length===0&&(nn=Mt),st.current=nn},Route=({path:Mt,nest:st,match:nn,...rn})=>{const on=useRouter(),[an]=useLocationFromRouter(on),[sn,un,Xr]=nn??matchRoute(on.parser,Mt,an,st),to=useCachedParams({...useParams(),...un});if(!sn)return null;const uo=Xr?reactExports.createElement(Router$1,{base:Xr},h_route(rn,to)):h_route(rn,to);return reactExports.createElement(ParamsCtx.Provider,{value:to,children:uo})},Link=reactExports.forwardRef((Mt,st)=>{const nn=useRouter(),[rn,on]=useLocationFromRouter(nn),{to:an="",href:sn=an,onClick:un,asChild:Xr,children:to,className:uo,replace:hn,state:fn,...co}=Mt,lo=useEvent(ho=>{ho.ctrlKey||ho.metaKey||ho.altKey||ho.shiftKey||ho.button!==0||(un==null||un(ho),ho.defaultPrevented||(ho.preventDefault(),on(sn,Mt)))}),fo=nn.hrefs(sn[0]==="~"?sn.slice(1):nn.base+sn,nn);return Xr&&reactExports.isValidElement(to)?reactExports.cloneElement(to,{onClick:lo,href:fo}):reactExports.createElement("a",{...co,onClick:lo,href:fo,className:uo!=null&&uo.call?uo(rn===sn):uo,children:to,ref:st})}),flattenChildren=Mt=>Array.isArray(Mt)?Mt.flatMap(st=>flattenChildren(st&&st.type===reactExports.Fragment?st.props.children:st)):[Mt],Switch=({children:Mt,location:st})=>{const nn=useRouter(),[rn]=useLocationFromRouter(nn);for(const on of flattenChildren(Mt)){let an=0;if(reactExports.isValidElement(on)&&(an=matchRoute(nn.parser,on.props.path,st||rn,on.props.nest))[0])return reactExports.cloneElement(on,{match:an})}return null};var Subscribable=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(Mt){return this.listeners.add(Mt),this.onSubscribe(),()=>{this.listeners.delete(Mt),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},isServer=typeof window>"u"||"Deno"in globalThis;function noop$4(){}function functionalUpdate(Mt,st){return typeof Mt=="function"?Mt(st):Mt}function isValidTimeout(Mt){return typeof Mt=="number"&&Mt>=0&&Mt!==1/0}function timeUntilStale(Mt,st){return Math.max(Mt+(st||0)-Date.now(),0)}function resolveStaleTime(Mt,st){return typeof Mt=="function"?Mt(st):Mt}function resolveEnabled(Mt,st){return typeof Mt=="function"?Mt(st):Mt}function matchQuery(Mt,st){const{type:nn="all",exact:rn,fetchStatus:on,predicate:an,queryKey:sn,stale:un}=Mt;if(sn){if(rn){if(st.queryHash!==hashQueryKeyByOptions(sn,st.options))return!1}else if(!partialMatchKey(st.queryKey,sn))return!1}if(nn!=="all"){const Xr=st.isActive();if(nn==="active"&&!Xr||nn==="inactive"&&Xr)return!1}return!(typeof un=="boolean"&&st.isStale()!==un||on&&on!==st.state.fetchStatus||an&&!an(st))}function matchMutation(Mt,st){const{exact:nn,status:rn,predicate:on,mutationKey:an}=Mt;if(an){if(!st.options.mutationKey)return!1;if(nn){if(hashKey(st.options.mutationKey)!==hashKey(an))return!1}else if(!partialMatchKey(st.options.mutationKey,an))return!1}return!(rn&&st.state.status!==rn||on&&!on(st))}function hashQueryKeyByOptions(Mt,st){return((st==null?void 0:st.queryKeyHashFn)||hashKey)(Mt)}function hashKey(Mt){return JSON.stringify(Mt,(st,nn)=>isPlainObject$2(nn)?Object.keys(nn).sort().reduce((rn,on)=>(rn[on]=nn[on],rn),{}):nn)}function partialMatchKey(Mt,st){return Mt===st?!0:typeof Mt!=typeof st?!1:Mt&&st&&typeof Mt=="object"&&typeof st=="object"?!Object.keys(st).some(nn=>!partialMatchKey(Mt[nn],st[nn])):!1}function replaceEqualDeep(Mt,st){if(Mt===st)return Mt;const nn=isPlainArray(Mt)&&isPlainArray(st);if(nn||isPlainObject$2(Mt)&&isPlainObject$2(st)){const rn=nn?Mt:Object.keys(Mt),on=rn.length,an=nn?st:Object.keys(st),sn=an.length,un=nn?[]:{};let Xr=0;for(let to=0;to<sn;to++){const uo=nn?to:an[to];(!nn&&rn.includes(uo)||nn)&&Mt[uo]===void 0&&st[uo]===void 0?(un[uo]=void 0,Xr++):(un[uo]=replaceEqualDeep(Mt[uo],st[uo]),un[uo]===Mt[uo]&&Mt[uo]!==void 0&&Xr++)}return on===sn&&Xr===on?Mt:un}return st}function isPlainArray(Mt){return Array.isArray(Mt)&&Mt.length===Object.keys(Mt).length}function isPlainObject$2(Mt){if(!hasObjectPrototype(Mt))return!1;const st=Mt.constructor;if(st===void 0)return!0;const nn=st.prototype;return!(!hasObjectPrototype(nn)||!nn.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(Mt)!==Object.prototype)}function hasObjectPrototype(Mt){return Object.prototype.toString.call(Mt)==="[object Object]"}function sleep(Mt){return new Promise(st=>{setTimeout(st,Mt)})}function replaceData(Mt,st,nn){return typeof nn.structuralSharing=="function"?nn.structuralSharing(Mt,st):nn.structuralSharing!==!1?replaceEqualDeep(Mt,st):st}function addToEnd(Mt,st,nn=0){const rn=[...Mt,st];return nn&&rn.length>nn?rn.slice(1):rn}function addToStart(Mt,st,nn=0){const rn=[st,...Mt];return nn&&rn.length>nn?rn.slice(0,-1):rn}var skipToken=Symbol();function ensureQueryFn(Mt,st){return!Mt.queryFn&&(st!=null&&st.initialPromise)?()=>st.initialPromise:!Mt.queryFn||Mt.queryFn===skipToken?()=>Promise.reject(new Error(`Missing queryFn: '${Mt.queryHash}'`)):Mt.queryFn}var fy,ry,yy,$v,FocusManager=($v=class extends Subscribable{constructor(){super();bm(this,fy);bm(this,ry);bm(this,yy);cm(this,yy,st=>{if(!isServer&&window.addEventListener){const nn=()=>st();return window.addEventListener("visibilitychange",nn,!1),()=>{window.removeEventListener("visibilitychange",nn)}}})}onSubscribe(){Lp(this,ry)||this.setEventListener(Lp(this,yy))}onUnsubscribe(){var st;this.hasListeners()||((st=Lp(this,ry))==null||st.call(this),cm(this,ry,void 0))}setEventListener(st){var nn;cm(this,yy,st),(nn=Lp(this,ry))==null||nn.call(this),cm(this,ry,st(rn=>{typeof rn=="boolean"?this.setFocused(rn):this.onFocus()}))}setFocused(st){Lp(this,fy)!==st&&(cm(this,fy,st),this.onFocus())}onFocus(){const st=this.isFocused();this.listeners.forEach(nn=>{nn(st)})}isFocused(){var st;return typeof Lp(this,fy)=="boolean"?Lp(this,fy):((st=globalThis.document)==null?void 0:st.visibilityState)!=="hidden"}},fy=new WeakMap,ry=new WeakMap,yy=new WeakMap,$v),focusManager=new FocusManager,vy,oy,xy,Pv,OnlineManager=(Pv=class extends Subscribable{constructor(){super();bm(this,vy,!0);bm(this,oy);bm(this,xy);cm(this,xy,st=>{if(!isServer&&window.addEventListener){const nn=()=>st(!0),rn=()=>st(!1);return window.addEventListener("online",nn,!1),window.addEventListener("offline",rn,!1),()=>{window.removeEventListener("online",nn),window.removeEventListener("offline",rn)}}})}onSubscribe(){Lp(this,oy)||this.setEventListener(Lp(this,xy))}onUnsubscribe(){var st;this.hasListeners()||((st=Lp(this,oy))==null||st.call(this),cm(this,oy,void 0))}setEventListener(st){var nn;cm(this,xy,st),(nn=Lp(this,oy))==null||nn.call(this),cm(this,oy,st(this.setOnline.bind(this)))}setOnline(st){Lp(this,vy)!==st&&(cm(this,vy,st),this.listeners.forEach(rn=>{rn(st)}))}isOnline(){return Lp(this,vy)}},vy=new WeakMap,oy=new WeakMap,xy=new WeakMap,Pv),onlineManager=new OnlineManager;function pendingThenable(){let Mt,st;const nn=new Promise((on,an)=>{Mt=on,st=an});nn.status="pending",nn.catch(()=>{});function rn(on){Object.assign(nn,on),delete nn.resolve,delete nn.reject}return nn.resolve=on=>{rn({status:"fulfilled",value:on}),Mt(on)},nn.reject=on=>{rn({status:"rejected",reason:on}),st(on)},nn}function defaultRetryDelay(Mt){return Math.min(1e3*2**Mt,3e4)}function canFetch(Mt){return(Mt??"online")==="online"?onlineManager.isOnline():!0}var CancelledError=class extends Error{constructor(Mt){super("CancelledError"),this.revert=Mt==null?void 0:Mt.revert,this.silent=Mt==null?void 0:Mt.silent}};function isCancelledError(Mt){return Mt instanceof CancelledError}function createRetryer(Mt){let st=!1,nn=0,rn=!1,on;const an=pendingThenable(),sn=fo=>{var ho;rn||(fn(new CancelledError(fo)),(ho=Mt.abort)==null||ho.call(Mt))},un=()=>{st=!0},Xr=()=>{st=!1},to=()=>focusManager.isFocused()&&(Mt.networkMode==="always"||onlineManager.isOnline())&&Mt.canRun(),uo=()=>canFetch(Mt.networkMode)&&Mt.canRun(),hn=fo=>{var ho;rn||(rn=!0,(ho=Mt.onSuccess)==null||ho.call(Mt,fo),on==null||on(),an.resolve(fo))},fn=fo=>{var ho;rn||(rn=!0,(ho=Mt.onError)==null||ho.call(Mt,fo),on==null||on(),an.reject(fo))},co=()=>new Promise(fo=>{var ho;on=mo=>{(rn||to())&&fo(mo)},(ho=Mt.onPause)==null||ho.call(Mt)}).then(()=>{var fo;on=void 0,rn||(fo=Mt.onContinue)==null||fo.call(Mt)}),lo=()=>{if(rn)return;let fo;const ho=nn===0?Mt.initialPromise:void 0;try{fo=ho??Mt.fn()}catch(mo){fo=Promise.reject(mo)}Promise.resolve(fo).then(hn).catch(mo=>{var np;if(rn)return;const Uo=Mt.retry??(isServer?0:3),_d=Mt.retryDelay??defaultRetryDelay,tp=typeof _d=="function"?_d(nn,mo):_d,ep=Uo===!0||typeof Uo=="number"&&nn<Uo||typeof Uo=="function"&&Uo(nn,mo);if(st||!ep){fn(mo);return}nn++,(np=Mt.onFail)==null||np.call(Mt,nn,mo),sleep(tp).then(()=>to()?void 0:co()).then(()=>{st?fn(mo):lo()})})};return{promise:an,cancel:sn,continue:()=>(on==null||on(),an),cancelRetry:un,continueRetry:Xr,canStart:uo,start:()=>(uo()?lo():co().then(lo),an)}}function createNotifyManager(){let Mt=[],st=0,nn=un=>{un()},rn=un=>{un()},on=un=>setTimeout(un,0);const an=un=>{st?Mt.push(un):on(()=>{nn(un)})},sn=()=>{const un=Mt;Mt=[],un.length&&on(()=>{rn(()=>{un.forEach(Xr=>{nn(Xr)})})})};return{batch:un=>{let Xr;st++;try{Xr=un()}finally{st--,st||sn()}return Xr},batchCalls:un=>(...Xr)=>{an(()=>{un(...Xr)})},schedule:an,setNotifyFunction:un=>{nn=un},setBatchNotifyFunction:un=>{rn=un},setScheduler:un=>{on=un}}}var notifyManager=createNotifyManager(),py,Cv,Removable=(Cv=class{constructor(){bm(this,py)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),isValidTimeout(this.gcTime)&&cm(this,py,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(Mt){this.gcTime=Math.max(this.gcTime||0,Mt??(isServer?1/0:5*60*1e3))}clearGcTimeout(){Lp(this,py)&&(clearTimeout(Lp(this,py)),cm(this,py,void 0))}},py=new WeakMap,Cv),by,_y,Um,km,Vy,hy,Gm,_g,Ov,Query=(Ov=class extends Removable{constructor(st){super();bm(this,Gm);bm(this,by);bm(this,_y);bm(this,Um);bm(this,km);bm(this,Vy);bm(this,hy);cm(this,hy,!1),cm(this,Vy,st.defaultOptions),this.setOptions(st.options),this.observers=[],cm(this,Um,st.cache),this.queryKey=st.queryKey,this.queryHash=st.queryHash,cm(this,by,getDefaultState$1(this.options)),this.state=st.state??Lp(this,by),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var st;return(st=Lp(this,km))==null?void 0:st.promise}setOptions(st){this.options={...Lp(this,Vy),...st},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&Lp(this,Um).remove(this)}setData(st,nn){const rn=replaceData(this.state.data,st,this.options);return Rm(this,Gm,_g).call(this,{data:rn,type:"success",dataUpdatedAt:nn==null?void 0:nn.updatedAt,manual:nn==null?void 0:nn.manual}),rn}setState(st,nn){Rm(this,Gm,_g).call(this,{type:"setState",state:st,setStateOptions:nn})}cancel(st){var rn,on;const nn=(rn=Lp(this,km))==null?void 0:rn.promise;return(on=Lp(this,km))==null||on.cancel(st),nn?nn.then(noop$4).catch(noop$4):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(Lp(this,by))}isActive(){return this.observers.some(st=>resolveEnabled(st.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===skipToken||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(st=>st.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(st=0){return this.state.isInvalidated||this.state.data===void 0||!timeUntilStale(this.state.dataUpdatedAt,st)}onFocus(){var nn;const st=this.observers.find(rn=>rn.shouldFetchOnWindowFocus());st==null||st.refetch({cancelRefetch:!1}),(nn=Lp(this,km))==null||nn.continue()}onOnline(){var nn;const st=this.observers.find(rn=>rn.shouldFetchOnReconnect());st==null||st.refetch({cancelRefetch:!1}),(nn=Lp(this,km))==null||nn.continue()}addObserver(st){this.observers.includes(st)||(this.observers.push(st),this.clearGcTimeout(),Lp(this,Um).notify({type:"observerAdded",query:this,observer:st}))}removeObserver(st){this.observers.includes(st)&&(this.observers=this.observers.filter(nn=>nn!==st),this.observers.length||(Lp(this,km)&&(Lp(this,hy)?Lp(this,km).cancel({revert:!0}):Lp(this,km).cancelRetry()),this.scheduleGc()),Lp(this,Um).notify({type:"observerRemoved",query:this,observer:st}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Rm(this,Gm,_g).call(this,{type:"invalidate"})}fetch(st,nn){var Xr,to,uo;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(nn!=null&&nn.cancelRefetch))this.cancel({silent:!0});else if(Lp(this,km))return Lp(this,km).continueRetry(),Lp(this,km).promise}if(st&&this.setOptions(st),!this.options.queryFn){const hn=this.observers.find(fn=>fn.options.queryFn);hn&&this.setOptions(hn.options)}const rn=new AbortController,on=hn=>{Object.defineProperty(hn,"signal",{enumerable:!0,get:()=>(cm(this,hy,!0),rn.signal)})},an=()=>{const hn=ensureQueryFn(this.options,nn),fn={queryKey:this.queryKey,meta:this.meta};return on(fn),cm(this,hy,!1),this.options.persister?this.options.persister(hn,fn,this):hn(fn)},sn={fetchOptions:nn,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:an};on(sn),(Xr=this.options.behavior)==null||Xr.onFetch(sn,this),cm(this,_y,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((to=sn.fetchOptions)==null?void 0:to.meta))&&Rm(this,Gm,_g).call(this,{type:"fetch",meta:(uo=sn.fetchOptions)==null?void 0:uo.meta});const un=hn=>{var fn,co,lo,fo;isCancelledError(hn)&&hn.silent||Rm(this,Gm,_g).call(this,{type:"error",error:hn}),isCancelledError(hn)||((co=(fn=Lp(this,Um).config).onError)==null||co.call(fn,hn,this),(fo=(lo=Lp(this,Um).config).onSettled)==null||fo.call(lo,this.state.data,hn,this)),this.scheduleGc()};return cm(this,km,createRetryer({initialPromise:nn==null?void 0:nn.initialPromise,fn:sn.fetchFn,abort:rn.abort.bind(rn),onSuccess:hn=>{var fn,co,lo,fo;if(hn===void 0){un(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(hn)}catch(ho){un(ho);return}(co=(fn=Lp(this,Um).config).onSuccess)==null||co.call(fn,hn,this),(fo=(lo=Lp(this,Um).config).onSettled)==null||fo.call(lo,hn,this.state.error,this),this.scheduleGc()},onError:un,onFail:(hn,fn)=>{Rm(this,Gm,_g).call(this,{type:"failed",failureCount:hn,error:fn})},onPause:()=>{Rm(this,Gm,_g).call(this,{type:"pause"})},onContinue:()=>{Rm(this,Gm,_g).call(this,{type:"continue"})},retry:sn.options.retry,retryDelay:sn.options.retryDelay,networkMode:sn.options.networkMode,canRun:()=>!0})),Lp(this,km).start()}},by=new WeakMap,_y=new WeakMap,Um=new WeakMap,km=new WeakMap,Vy=new WeakMap,hy=new WeakMap,Gm=new WeakSet,_g=function(st){const nn=rn=>{switch(st.type){case"failed":return{...rn,fetchFailureCount:st.failureCount,fetchFailureReason:st.error};case"pause":return{...rn,fetchStatus:"paused"};case"continue":return{...rn,fetchStatus:"fetching"};case"fetch":return{...rn,...fetchState(rn.data,this.options),fetchMeta:st.meta??null};case"success":return{...rn,data:st.data,dataUpdateCount:rn.dataUpdateCount+1,dataUpdatedAt:st.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!st.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const on=st.error;return isCancelledError(on)&&on.revert&&Lp(this,_y)?{...Lp(this,_y),fetchStatus:"idle"}:{...rn,error:on,errorUpdateCount:rn.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:rn.fetchFailureCount+1,fetchFailureReason:on,fetchStatus:"idle",status:"error"};case"invalidate":return{...rn,isInvalidated:!0};case"setState":return{...rn,...st.state}}};this.state=nn(this.state),notifyManager.batch(()=>{this.observers.forEach(rn=>{rn.onQueryUpdate()}),Lp(this,Um).notify({query:this,type:"updated",action:st})})},Ov);function fetchState(Mt,st){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:canFetch(st.networkMode)?"fetching":"paused",...Mt===void 0&&{error:null,status:"pending"}}}function getDefaultState$1(Mt){const st=typeof Mt.initialData=="function"?Mt.initialData():Mt.initialData,nn=st!==void 0,rn=nn?typeof Mt.initialDataUpdatedAt=="function"?Mt.initialDataUpdatedAt():Mt.initialDataUpdatedAt:0;return{data:st,dataUpdateCount:0,dataUpdatedAt:nn?rn??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:nn?"success":"pending",fetchStatus:"idle"}}var qm,Mv,QueryCache=(Mv=class extends Subscribable{constructor(st={}){super();bm(this,qm);this.config=st,cm(this,qm,new Map)}build(st,nn,rn){const on=nn.queryKey,an=nn.queryHash??hashQueryKeyByOptions(on,nn);let sn=this.get(an);return sn||(sn=new Query({cache:this,queryKey:on,queryHash:an,options:st.defaultQueryOptions(nn),state:rn,defaultOptions:st.getQueryDefaults(on)}),this.add(sn)),sn}add(st){Lp(this,qm).has(st.queryHash)||(Lp(this,qm).set(st.queryHash,st),this.notify({type:"added",query:st}))}remove(st){const nn=Lp(this,qm).get(st.queryHash);nn&&(st.destroy(),nn===st&&Lp(this,qm).delete(st.queryHash),this.notify({type:"removed",query:st}))}clear(){notifyManager.batch(()=>{this.getAll().forEach(st=>{this.remove(st)})})}get(st){return Lp(this,qm).get(st)}getAll(){return[...Lp(this,qm).values()]}find(st){const nn={exact:!0,...st};return this.getAll().find(rn=>matchQuery(nn,rn))}findAll(st={}){const nn=this.getAll();return Object.keys(st).length>0?nn.filter(rn=>matchQuery(st,rn)):nn}notify(st){notifyManager.batch(()=>{this.listeners.forEach(nn=>{nn(st)})})}onFocus(){notifyManager.batch(()=>{this.getAll().forEach(st=>{st.onFocus()})})}onOnline(){notifyManager.batch(()=>{this.getAll().forEach(st=>{st.onOnline()})})}},qm=new WeakMap,Mv),Km,Nm,my,Ym,ny,Rv,Mutation=(Rv=class extends Removable{constructor(st){super();bm(this,Ym);bm(this,Km);bm(this,Nm);bm(this,my);this.mutationId=st.mutationId,cm(this,Nm,st.mutationCache),cm(this,Km,[]),this.state=st.state||getDefaultState(),this.setOptions(st.options),this.scheduleGc()}setOptions(st){this.options=st,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(st){Lp(this,Km).includes(st)||(Lp(this,Km).push(st),this.clearGcTimeout(),Lp(this,Nm).notify({type:"observerAdded",mutation:this,observer:st}))}removeObserver(st){cm(this,Km,Lp(this,Km).filter(nn=>nn!==st)),this.scheduleGc(),Lp(this,Nm).notify({type:"observerRemoved",mutation:this,observer:st})}optionalRemove(){Lp(this,Km).length||(this.state.status==="pending"?this.scheduleGc():Lp(this,Nm).remove(this))}continue(){var st;return((st=Lp(this,my))==null?void 0:st.continue())??this.execute(this.state.variables)}async execute(st){var on,an,sn,un,Xr,to,uo,hn,fn,co,lo,fo,ho,mo,Uo,_d,tp,ep,np,rp;cm(this,my,createRetryer({fn:()=>this.options.mutationFn?this.options.mutationFn(st):Promise.reject(new Error("No mutationFn found")),onFail:(ip,op)=>{Rm(this,Ym,ny).call(this,{type:"failed",failureCount:ip,error:op})},onPause:()=>{Rm(this,Ym,ny).call(this,{type:"pause"})},onContinue:()=>{Rm(this,Ym,ny).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>Lp(this,Nm).canRun(this)}));const nn=this.state.status==="pending",rn=!Lp(this,my).canStart();try{if(!nn){Rm(this,Ym,ny).call(this,{type:"pending",variables:st,isPaused:rn}),await((an=(on=Lp(this,Nm).config).onMutate)==null?void 0:an.call(on,st,this));const op=await((un=(sn=this.options).onMutate)==null?void 0:un.call(sn,st));op!==this.state.context&&Rm(this,Ym,ny).call(this,{type:"pending",context:op,variables:st,isPaused:rn})}const ip=await Lp(this,my).start();return await((to=(Xr=Lp(this,Nm).config).onSuccess)==null?void 0:to.call(Xr,ip,st,this.state.context,this)),await((hn=(uo=this.options).onSuccess)==null?void 0:hn.call(uo,ip,st,this.state.context)),await((co=(fn=Lp(this,Nm).config).onSettled)==null?void 0:co.call(fn,ip,null,this.state.variables,this.state.context,this)),await((fo=(lo=this.options).onSettled)==null?void 0:fo.call(lo,ip,null,st,this.state.context)),Rm(this,Ym,ny).call(this,{type:"success",data:ip}),ip}catch(ip){try{throw await((mo=(ho=Lp(this,Nm).config).onError)==null?void 0:mo.call(ho,ip,st,this.state.context,this)),await((_d=(Uo=this.options).onError)==null?void 0:_d.call(Uo,ip,st,this.state.context)),await((ep=(tp=Lp(this,Nm).config).onSettled)==null?void 0:ep.call(tp,void 0,ip,this.state.variables,this.state.context,this)),await((rp=(np=this.options).onSettled)==null?void 0:rp.call(np,void 0,ip,st,this.state.context)),ip}finally{Rm(this,Ym,ny).call(this,{type:"error",error:ip})}}finally{Lp(this,Nm).runNext(this)}}},Km=new WeakMap,Nm=new WeakMap,my=new WeakMap,Ym=new WeakSet,ny=function(st){const nn=rn=>{switch(st.type){case"failed":return{...rn,failureCount:st.failureCount,failureReason:st.error};case"pause":return{...rn,isPaused:!0};case"continue":return{...rn,isPaused:!1};case"pending":return{...rn,context:st.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:st.isPaused,status:"pending",variables:st.variables,submittedAt:Date.now()};case"success":return{...rn,data:st.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...rn,data:void 0,error:st.error,failureCount:rn.failureCount+1,failureReason:st.error,isPaused:!1,status:"error"}}};this.state=nn(this.state),notifyManager.batch(()=>{Lp(this,Km).forEach(rn=>{rn.onMutationUpdate(st)}),Lp(this,Nm).notify({mutation:this,type:"updated",action:st})})},Rv);function getDefaultState(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Fm,zy,kv,MutationCache=(kv=class extends Subscribable{constructor(st={}){super();bm(this,Fm);bm(this,zy);this.config=st,cm(this,Fm,new Map),cm(this,zy,Date.now())}build(st,nn,rn){const on=new Mutation({mutationCache:this,mutationId:++Yy(this,zy)._,options:st.defaultMutationOptions(nn),state:rn});return this.add(on),on}add(st){const nn=scopeFor(st),rn=Lp(this,Fm).get(nn)??[];rn.push(st),Lp(this,Fm).set(nn,rn),this.notify({type:"added",mutation:st})}remove(st){var rn;const nn=scopeFor(st);if(Lp(this,Fm).has(nn)){const on=(rn=Lp(this,Fm).get(nn))==null?void 0:rn.filter(an=>an!==st);on&&(on.length===0?Lp(this,Fm).delete(nn):Lp(this,Fm).set(nn,on))}this.notify({type:"removed",mutation:st})}canRun(st){var rn;const nn=(rn=Lp(this,Fm).get(scopeFor(st)))==null?void 0:rn.find(on=>on.state.status==="pending");return!nn||nn===st}runNext(st){var rn;const nn=(rn=Lp(this,Fm).get(scopeFor(st)))==null?void 0:rn.find(on=>on!==st&&on.state.isPaused);return(nn==null?void 0:nn.continue())??Promise.resolve()}clear(){notifyManager.batch(()=>{this.getAll().forEach(st=>{this.remove(st)})})}getAll(){return[...Lp(this,Fm).values()].flat()}find(st){const nn={exact:!0,...st};return this.getAll().find(rn=>matchMutation(nn,rn))}findAll(st={}){return this.getAll().filter(nn=>matchMutation(st,nn))}notify(st){notifyManager.batch(()=>{this.listeners.forEach(nn=>{nn(st)})})}resumePausedMutations(){const st=this.getAll().filter(nn=>nn.state.isPaused);return notifyManager.batch(()=>Promise.all(st.map(nn=>nn.continue().catch(noop$4))))}},Fm=new WeakMap,zy=new WeakMap,kv);function scopeFor(Mt){var st;return((st=Mt.options.scope)==null?void 0:st.id)??String(Mt.mutationId)}function infiniteQueryBehavior(Mt){return{onFetch:(st,nn)=>{var uo,hn,fn,co,lo;const rn=st.options,on=(fn=(hn=(uo=st.fetchOptions)==null?void 0:uo.meta)==null?void 0:hn.fetchMore)==null?void 0:fn.direction,an=((co=st.state.data)==null?void 0:co.pages)||[],sn=((lo=st.state.data)==null?void 0:lo.pageParams)||[];let un={pages:[],pageParams:[]},Xr=0;const to=async()=>{let fo=!1;const ho=_d=>{Object.defineProperty(_d,"signal",{enumerable:!0,get:()=>(st.signal.aborted?fo=!0:st.signal.addEventListener("abort",()=>{fo=!0}),st.signal)})},mo=ensureQueryFn(st.options,st.fetchOptions),Uo=async(_d,tp,ep)=>{if(fo)return Promise.reject();if(tp==null&&_d.pages.length)return Promise.resolve(_d);const np={queryKey:st.queryKey,pageParam:tp,direction:ep?"backward":"forward",meta:st.options.meta};ho(np);const rp=await mo(np),{maxPages:ip}=st.options,op=ep?addToStart:addToEnd;return{pages:op(_d.pages,rp,ip),pageParams:op(_d.pageParams,tp,ip)}};if(on&&an.length){const _d=on==="backward",tp=_d?getPreviousPageParam:getNextPageParam,ep={pages:an,pageParams:sn},np=tp(rn,ep);un=await Uo(ep,np,_d)}else{const _d=Mt??an.length;do{const tp=Xr===0?sn[0]??rn.initialPageParam:getNextPageParam(rn,un);if(Xr>0&&tp==null)break;un=await Uo(un,tp),Xr++}while(Xr<_d)}return un};st.options.persister?st.fetchFn=()=>{var fo,ho;return(ho=(fo=st.options).persister)==null?void 0:ho.call(fo,to,{queryKey:st.queryKey,meta:st.options.meta,signal:st.signal},nn)}:st.fetchFn=to}}}function getNextPageParam(Mt,{pages:st,pageParams:nn}){const rn=st.length-1;return st.length>0?Mt.getNextPageParam(st[rn],st,nn[rn],nn):void 0}function getPreviousPageParam(Mt,{pages:st,pageParams:nn}){var rn;return st.length>0?(rn=Mt.getPreviousPageParam)==null?void 0:rn.call(Mt,st[0],st,nn[0],nn):void 0}var $m,iy,ay,wy,Ey,sy,Sy,Ty,Iv,QueryClient=(Iv=class{constructor(Mt={}){bm(this,$m);bm(this,iy);bm(this,ay);bm(this,wy);bm(this,Ey);bm(this,sy);bm(this,Sy);bm(this,Ty);cm(this,$m,Mt.queryCache||new QueryCache),cm(this,iy,Mt.mutationCache||new MutationCache),cm(this,ay,Mt.defaultOptions||{}),cm(this,wy,new Map),cm(this,Ey,new Map),cm(this,sy,0)}mount(){Yy(this,sy)._++,Lp(this,sy)===1&&(cm(this,Sy,focusManager.subscribe(async Mt=>{Mt&&(await this.resumePausedMutations(),Lp(this,$m).onFocus())})),cm(this,Ty,onlineManager.subscribe(async Mt=>{Mt&&(await this.resumePausedMutations(),Lp(this,$m).onOnline())})))}unmount(){var Mt,st;Yy(this,sy)._--,Lp(this,sy)===0&&((Mt=Lp(this,Sy))==null||Mt.call(this),cm(this,Sy,void 0),(st=Lp(this,Ty))==null||st.call(this),cm(this,Ty,void 0))}isFetching(Mt){return Lp(this,$m).findAll({...Mt,fetchStatus:"fetching"}).length}isMutating(Mt){return Lp(this,iy).findAll({...Mt,status:"pending"}).length}getQueryData(Mt){var nn;const st=this.defaultQueryOptions({queryKey:Mt});return(nn=Lp(this,$m).get(st.queryHash))==null?void 0:nn.state.data}ensureQueryData(Mt){const st=this.getQueryData(Mt.queryKey);if(st===void 0)return this.fetchQuery(Mt);{const nn=this.defaultQueryOptions(Mt),rn=Lp(this,$m).build(this,nn);return Mt.revalidateIfStale&&rn.isStaleByTime(resolveStaleTime(nn.staleTime,rn))&&this.prefetchQuery(nn),Promise.resolve(st)}}getQueriesData(Mt){return Lp(this,$m).findAll(Mt).map(({queryKey:st,state:nn})=>{const rn=nn.data;return[st,rn]})}setQueryData(Mt,st,nn){const rn=this.defaultQueryOptions({queryKey:Mt}),on=Lp(this,$m).get(rn.queryHash),an=on==null?void 0:on.state.data,sn=functionalUpdate(st,an);if(sn!==void 0)return Lp(this,$m).build(this,rn).setData(sn,{...nn,manual:!0})}setQueriesData(Mt,st,nn){return notifyManager.batch(()=>Lp(this,$m).findAll(Mt).map(({queryKey:rn})=>[rn,this.setQueryData(rn,st,nn)]))}getQueryState(Mt){var nn;const st=this.defaultQueryOptions({queryKey:Mt});return(nn=Lp(this,$m).get(st.queryHash))==null?void 0:nn.state}removeQueries(Mt){const st=Lp(this,$m);notifyManager.batch(()=>{st.findAll(Mt).forEach(nn=>{st.remove(nn)})})}resetQueries(Mt,st){const nn=Lp(this,$m),rn={type:"active",...Mt};return notifyManager.batch(()=>(nn.findAll(Mt).forEach(on=>{on.reset()}),this.refetchQueries(rn,st)))}cancelQueries(Mt={},st={}){const nn={revert:!0,...st},rn=notifyManager.batch(()=>Lp(this,$m).findAll(Mt).map(on=>on.cancel(nn)));return Promise.all(rn).then(noop$4).catch(noop$4)}invalidateQueries(Mt={},st={}){return notifyManager.batch(()=>{if(Lp(this,$m).findAll(Mt).forEach(rn=>{rn.invalidate()}),Mt.refetchType==="none")return Promise.resolve();const nn={...Mt,type:Mt.refetchType??Mt.type??"active"};return this.refetchQueries(nn,st)})}refetchQueries(Mt={},st){const nn={...st,cancelRefetch:(st==null?void 0:st.cancelRefetch)??!0},rn=notifyManager.batch(()=>Lp(this,$m).findAll(Mt).filter(on=>!on.isDisabled()).map(on=>{let an=on.fetch(void 0,nn);return nn.throwOnError||(an=an.catch(noop$4)),on.state.fetchStatus==="paused"?Promise.resolve():an}));return Promise.all(rn).then(noop$4)}fetchQuery(Mt){const st=this.defaultQueryOptions(Mt);st.retry===void 0&&(st.retry=!1);const nn=Lp(this,$m).build(this,st);return nn.isStaleByTime(resolveStaleTime(st.staleTime,nn))?nn.fetch(st):Promise.resolve(nn.state.data)}prefetchQuery(Mt){return this.fetchQuery(Mt).then(noop$4).catch(noop$4)}fetchInfiniteQuery(Mt){return Mt.behavior=infiniteQueryBehavior(Mt.pages),this.fetchQuery(Mt)}prefetchInfiniteQuery(Mt){return this.fetchInfiniteQuery(Mt).then(noop$4).catch(noop$4)}ensureInfiniteQueryData(Mt){return Mt.behavior=infiniteQueryBehavior(Mt.pages),this.ensureQueryData(Mt)}resumePausedMutations(){return onlineManager.isOnline()?Lp(this,iy).resumePausedMutations():Promise.resolve()}getQueryCache(){return Lp(this,$m)}getMutationCache(){return Lp(this,iy)}getDefaultOptions(){return Lp(this,ay)}setDefaultOptions(Mt){cm(this,ay,Mt)}setQueryDefaults(Mt,st){Lp(this,wy).set(hashKey(Mt),{queryKey:Mt,defaultOptions:st})}getQueryDefaults(Mt){const st=[...Lp(this,wy).values()];let nn={};return st.forEach(rn=>{partialMatchKey(Mt,rn.queryKey)&&(nn={...nn,...rn.defaultOptions})}),nn}setMutationDefaults(Mt,st){Lp(this,Ey).set(hashKey(Mt),{mutationKey:Mt,defaultOptions:st})}getMutationDefaults(Mt){const st=[...Lp(this,Ey).values()];let nn={};return st.forEach(rn=>{partialMatchKey(Mt,rn.mutationKey)&&(nn={...nn,...rn.defaultOptions})}),nn}defaultQueryOptions(Mt){if(Mt._defaulted)return Mt;const st={...Lp(this,ay).queries,...this.getQueryDefaults(Mt.queryKey),...Mt,_defaulted:!0};return st.queryHash||(st.queryHash=hashQueryKeyByOptions(st.queryKey,st)),st.refetchOnReconnect===void 0&&(st.refetchOnReconnect=st.networkMode!=="always"),st.throwOnError===void 0&&(st.throwOnError=!!st.suspense),!st.networkMode&&st.persister&&(st.networkMode="offlineFirst"),st.enabled!==!0&&st.queryFn===skipToken&&(st.enabled=!1),st}defaultMutationOptions(Mt){return Mt!=null&&Mt._defaulted?Mt:{...Lp(this,ay).mutations,...(Mt==null?void 0:Mt.mutationKey)&&this.getMutationDefaults(Mt.mutationKey),...Mt,_defaulted:!0}}clear(){Lp(this,$m).clear(),Lp(this,iy).clear()}},$m=new WeakMap,iy=new WeakMap,ay=new WeakMap,wy=new WeakMap,Ey=new WeakMap,sy=new WeakMap,Sy=new WeakMap,Ty=new WeakMap,Iv),QueryClientContext=reactExports.createContext(void 0),QueryClientProvider=({client:Mt,children:st})=>(reactExports.useEffect(()=>(Mt.mount(),()=>{Mt.unmount()}),[Mt]),jsxRuntimeExports.jsx(QueryClientContext.Provider,{value:Mt,children:st}));async function throwIfResNotOk(Mt){if(!Mt.ok){const st=await Mt.text()||Mt.statusText;throw new Error(`${Mt.status}: ${st}`)}}const getQueryFn=({on401:Mt})=>async({queryKey:st})=>{const nn=await fetch(st[0],{credentials:"include"});return Mt==="returnNull"&&nn.status===401?null:(await throwIfResNotOk(nn),await nn.json())},queryClient=new QueryClient({defaultOptions:{queries:{queryFn:getQueryFn({on401:"throw"}),refetchInterval:!1,refetchOnWindowFocus:!1,staleTime:1/0,retry:!1},mutations:{retry:!1}}}),TOAST_LIMIT=1,TOAST_REMOVE_DELAY=1e6;let count$2=0;function genId(){return count$2=(count$2+1)%Number.MAX_SAFE_INTEGER,count$2.toString()}const toastTimeouts=new Map,addToRemoveQueue=Mt=>{if(toastTimeouts.has(Mt))return;const st=setTimeout(()=>{toastTimeouts.delete(Mt),dispatch({type:"REMOVE_TOAST",toastId:Mt})},TOAST_REMOVE_DELAY);toastTimeouts.set(Mt,st)},reducer=(Mt,st)=>{switch(st.type){case"ADD_TOAST":return{...Mt,toasts:[st.toast,...Mt.toasts].slice(0,TOAST_LIMIT)};case"UPDATE_TOAST":return{...Mt,toasts:Mt.toasts.map(nn=>nn.id===st.toast.id?{...nn,...st.toast}:nn)};case"DISMISS_TOAST":{const{toastId:nn}=st;return nn?addToRemoveQueue(nn):Mt.toasts.forEach(rn=>{addToRemoveQueue(rn.id)}),{...Mt,toasts:Mt.toasts.map(rn=>rn.id===nn||nn===void 0?{...rn,open:!1}:rn)}}case"REMOVE_TOAST":return st.toastId===void 0?{...Mt,toasts:[]}:{...Mt,toasts:Mt.toasts.filter(nn=>nn.id!==st.toastId)}}},listeners=[];let memoryState={toasts:[]};function dispatch(Mt){memoryState=reducer(memoryState,Mt),listeners.forEach(st=>{st(memoryState)})}function toast({...Mt}){const st=genId(),nn=on=>dispatch({type:"UPDATE_TOAST",toast:{...on,id:st}}),rn=()=>dispatch({type:"DISMISS_TOAST",toastId:st});return dispatch({type:"ADD_TOAST",toast:{...Mt,id:st,open:!0,onOpenChange:on=>{on||rn()}}}),{id:st,dismiss:rn,update:nn}}function useToast(){const[Mt,st]=reactExports.useState(memoryState);return reactExports.useEffect(()=>(listeners.push(st),()=>{const nn=listeners.indexOf(st);nn>-1&&listeners.splice(nn,1)}),[Mt]),{...Mt,toast,dismiss:nn=>dispatch({type:"DISMISS_TOAST",toastId:nn})}}function composeEventHandlers(Mt,st,{checkForDefaultPrevented:nn=!0}={}){return function(on){if(Mt==null||Mt(on),nn===!1||!on.defaultPrevented)return st==null?void 0:st(on)}}function setRef(Mt,st){typeof Mt=="function"?Mt(st):Mt!=null&&(Mt.current=st)}function composeRefs(...Mt){return st=>Mt.forEach(nn=>setRef(nn,st))}function useComposedRefs(...Mt){return reactExports.useCallback(composeRefs(...Mt),Mt)}function createContextScope$4(Mt,st=[]){let nn=[];function rn(an,sn){const un=reactExports.createContext(sn),Xr=nn.length;nn=[...nn,sn];function to(hn){const{scope:fn,children:co,...lo}=hn,fo=(fn==null?void 0:fn[Mt][Xr])||un,ho=reactExports.useMemo(()=>lo,Object.values(lo));return jsxRuntimeExports.jsx(fo.Provider,{value:ho,children:co})}function uo(hn,fn){const co=(fn==null?void 0:fn[Mt][Xr])||un,lo=reactExports.useContext(co);if(lo)return lo;if(sn!==void 0)return sn;throw new Error(`\`${hn}\` must be used within \`${an}\``)}return to.displayName=an+"Provider",[to,uo]}const on=()=>{const an=nn.map(sn=>reactExports.createContext(sn));return function(un){const Xr=(un==null?void 0:un[Mt])||an;return reactExports.useMemo(()=>({[`__scope${Mt}`]:{...un,[Mt]:Xr}}),[un,Xr])}};return on.scopeName=Mt,[rn,composeContextScopes$4(on,...st)]}function composeContextScopes$4(...Mt){const st=Mt[0];if(Mt.length===1)return st;const nn=()=>{const rn=Mt.map(on=>({useScope:on(),scopeName:on.scopeName}));return function(an){const sn=rn.reduce((un,{useScope:Xr,scopeName:to})=>{const hn=Xr(an)[`__scope${to}`];return{...un,...hn}},{});return reactExports.useMemo(()=>({[`__scope${st.scopeName}`]:sn}),[sn])}};return nn.scopeName=st.scopeName,nn}var Slot=reactExports.forwardRef((Mt,st)=>{const{children:nn,...rn}=Mt,on=reactExports.Children.toArray(nn),an=on.find(isSlottable);if(an){const sn=an.props.children,un=on.map(Xr=>Xr===an?reactExports.Children.count(sn)>1?reactExports.Children.only(null):reactExports.isValidElement(sn)?sn.props.children:null:Xr);return jsxRuntimeExports.jsx(SlotClone,{...rn,ref:st,children:reactExports.isValidElement(sn)?reactExports.cloneElement(sn,void 0,un):null})}return jsxRuntimeExports.jsx(SlotClone,{...rn,ref:st,children:nn})});Slot.displayName="Slot";var SlotClone=reactExports.forwardRef((Mt,st)=>{const{children:nn,...rn}=Mt;if(reactExports.isValidElement(nn)){const on=getElementRef$1(nn);return reactExports.cloneElement(nn,{...mergeProps(rn,nn.props),ref:st?composeRefs(st,on):on})}return reactExports.Children.count(nn)>1?reactExports.Children.only(null):null});SlotClone.displayName="SlotClone";var Slottable=({children:Mt})=>jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:Mt});function isSlottable(Mt){return reactExports.isValidElement(Mt)&&Mt.type===Slottable}function mergeProps(Mt,st){const nn={...st};for(const rn in st){const on=Mt[rn],an=st[rn];/^on[A-Z]/.test(rn)?on&&an?nn[rn]=(...un)=>{an(...un),on(...un)}:on&&(nn[rn]=on):rn==="style"?nn[rn]={...on,...an}:rn==="className"&&(nn[rn]=[on,an].filter(Boolean).join(" "))}return{...Mt,...nn}}function getElementRef$1(Mt){var rn,on;let st=(rn=Object.getOwnPropertyDescriptor(Mt.props,"ref"))==null?void 0:rn.get,nn=st&&"isReactWarning"in st&&st.isReactWarning;return nn?Mt.ref:(st=(on=Object.getOwnPropertyDescriptor(Mt,"ref"))==null?void 0:on.get,nn=st&&"isReactWarning"in st&&st.isReactWarning,nn?Mt.props.ref:Mt.props.ref||Mt.ref)}function createCollection(Mt){const st=Mt+"CollectionProvider",[nn,rn]=createContextScope$4(st),[on,an]=nn(st,{collectionRef:{current:null},itemMap:new Map}),sn=co=>{const{scope:lo,children:fo}=co,ho=React.useRef(null),mo=React.useRef(new Map).current;return jsxRuntimeExports.jsx(on,{scope:lo,itemMap:mo,collectionRef:ho,children:fo})};sn.displayName=st;const un=Mt+"CollectionSlot",Xr=React.forwardRef((co,lo)=>{const{scope:fo,children:ho}=co,mo=an(un,fo),Uo=useComposedRefs(lo,mo.collectionRef);return jsxRuntimeExports.jsx(Slot,{ref:Uo,children:ho})});Xr.displayName=un;const to=Mt+"CollectionItemSlot",uo="data-radix-collection-item",hn=React.forwardRef((co,lo)=>{const{scope:fo,children:ho,...mo}=co,Uo=React.useRef(null),_d=useComposedRefs(lo,Uo),tp=an(to,fo);return React.useEffect(()=>(tp.itemMap.set(Uo,{ref:Uo,...mo}),()=>void tp.itemMap.delete(Uo))),jsxRuntimeExports.jsx(Slot,{[uo]:"",ref:_d,children:ho})});hn.displayName=to;function fn(co){const lo=an(Mt+"CollectionConsumer",co);return React.useCallback(()=>{const ho=lo.collectionRef.current;if(!ho)return[];const mo=Array.from(ho.querySelectorAll(`[${uo}]`));return Array.from(lo.itemMap.values()).sort((tp,ep)=>mo.indexOf(tp.ref.current)-mo.indexOf(ep.ref.current))},[lo.collectionRef,lo.itemMap])}return[{Provider:sn,Slot:Xr,ItemSlot:hn},fn,rn]}function createContext2(Mt,st){const nn=reactExports.createContext(st),rn=an=>{const{children:sn,...un}=an,Xr=reactExports.useMemo(()=>un,Object.values(un));return jsxRuntimeExports.jsx(nn.Provider,{value:Xr,children:sn})};rn.displayName=Mt+"Provider";function on(an){const sn=reactExports.useContext(nn);if(sn)return sn;if(st!==void 0)return st;throw new Error(`\`${an}\` must be used within \`${Mt}\``)}return[rn,on]}function createContextScope$3(Mt,st=[]){let nn=[];function rn(an,sn){const un=reactExports.createContext(sn),Xr=nn.length;nn=[...nn,sn];const to=hn=>{var mo;const{scope:fn,children:co,...lo}=hn,fo=((mo=fn==null?void 0:fn[Mt])==null?void 0:mo[Xr])||un,ho=reactExports.useMemo(()=>lo,Object.values(lo));return jsxRuntimeExports.jsx(fo.Provider,{value:ho,children:co})};to.displayName=an+"Provider";function uo(hn,fn){var fo;const co=((fo=fn==null?void 0:fn[Mt])==null?void 0:fo[Xr])||un,lo=reactExports.useContext(co);if(lo)return lo;if(sn!==void 0)return sn;throw new Error(`\`${hn}\` must be used within \`${an}\``)}return[to,uo]}const on=()=>{const an=nn.map(sn=>reactExports.createContext(sn));return function(un){const Xr=(un==null?void 0:un[Mt])||an;return reactExports.useMemo(()=>({[`__scope${Mt}`]:{...un,[Mt]:Xr}}),[un,Xr])}};return on.scopeName=Mt,[rn,composeContextScopes$3(on,...st)]}function composeContextScopes$3(...Mt){const st=Mt[0];if(Mt.length===1)return st;const nn=()=>{const rn=Mt.map(on=>({useScope:on(),scopeName:on.scopeName}));return function(an){const sn=rn.reduce((un,{useScope:Xr,scopeName:to})=>{const hn=Xr(an)[`__scope${to}`];return{...un,...hn}},{});return reactExports.useMemo(()=>({[`__scope${st.scopeName}`]:sn}),[sn])}};return nn.scopeName=st.scopeName,nn}var NODES=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Primitive=NODES.reduce((Mt,st)=>{const nn=reactExports.forwardRef((rn,on)=>{const{asChild:an,...sn}=rn,un=an?Slot:st;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),jsxRuntimeExports.jsx(un,{...sn,ref:on})});return nn.displayName=`Primitive.${st}`,{...Mt,[st]:nn}},{});function dispatchDiscreteCustomEvent(Mt,st){Mt&&reactDomExports.flushSync(()=>Mt.dispatchEvent(st))}function useCallbackRef$1(Mt){const st=reactExports.useRef(Mt);return reactExports.useEffect(()=>{st.current=Mt}),reactExports.useMemo(()=>(...nn)=>{var rn;return(rn=st.current)==null?void 0:rn.call(st,...nn)},[])}function useEscapeKeydown(Mt,st=globalThis==null?void 0:globalThis.document){const nn=useCallbackRef$1(Mt);reactExports.useEffect(()=>{const rn=on=>{on.key==="Escape"&&nn(on)};return st.addEventListener("keydown",rn,{capture:!0}),()=>st.removeEventListener("keydown",rn,{capture:!0})},[nn,st])}var DISMISSABLE_LAYER_NAME="DismissableLayer",CONTEXT_UPDATE="dismissableLayer.update",POINTER_DOWN_OUTSIDE="dismissableLayer.pointerDownOutside",FOCUS_OUTSIDE="dismissableLayer.focusOutside",originalBodyPointerEvents,DismissableLayerContext=reactExports.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),DismissableLayer=reactExports.forwardRef((Mt,st)=>{const{disableOutsidePointerEvents:nn=!1,onEscapeKeyDown:rn,onPointerDownOutside:on,onFocusOutside:an,onInteractOutside:sn,onDismiss:un,...Xr}=Mt,to=reactExports.useContext(DismissableLayerContext),[uo,hn]=reactExports.useState(null),fn=(uo==null?void 0:uo.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,co]=reactExports.useState({}),lo=useComposedRefs(st,rp=>hn(rp)),fo=Array.from(to.layers),[ho]=[...to.layersWithOutsidePointerEventsDisabled].slice(-1),mo=fo.indexOf(ho),Uo=uo?fo.indexOf(uo):-1,_d=to.layersWithOutsidePointerEventsDisabled.size>0,tp=Uo>=mo,ep=usePointerDownOutside(rp=>{const ip=rp.target,op=[...to.branches].some(ap=>ap.contains(ip));!tp||op||(on==null||on(rp),sn==null||sn(rp),rp.defaultPrevented||un==null||un())},fn),np=useFocusOutside(rp=>{const ip=rp.target;[...to.branches].some(ap=>ap.contains(ip))||(an==null||an(rp),sn==null||sn(rp),rp.defaultPrevented||un==null||un())},fn);return useEscapeKeydown(rp=>{Uo===to.layers.size-1&&(rn==null||rn(rp),!rp.defaultPrevented&&un&&(rp.preventDefault(),un()))},fn),reactExports.useEffect(()=>{if(uo)return nn&&(to.layersWithOutsidePointerEventsDisabled.size===0&&(originalBodyPointerEvents=fn.body.style.pointerEvents,fn.body.style.pointerEvents="none"),to.layersWithOutsidePointerEventsDisabled.add(uo)),to.layers.add(uo),dispatchUpdate(),()=>{nn&&to.layersWithOutsidePointerEventsDisabled.size===1&&(fn.body.style.pointerEvents=originalBodyPointerEvents)}},[uo,fn,nn,to]),reactExports.useEffect(()=>()=>{uo&&(to.layers.delete(uo),to.layersWithOutsidePointerEventsDisabled.delete(uo),dispatchUpdate())},[uo,to]),reactExports.useEffect(()=>{const rp=()=>co({});return document.addEventListener(CONTEXT_UPDATE,rp),()=>document.removeEventListener(CONTEXT_UPDATE,rp)},[]),jsxRuntimeExports.jsx(Primitive.div,{...Xr,ref:lo,style:{pointerEvents:_d?tp?"auto":"none":void 0,...Mt.style},onFocusCapture:composeEventHandlers(Mt.onFocusCapture,np.onFocusCapture),onBlurCapture:composeEventHandlers(Mt.onBlurCapture,np.onBlurCapture),onPointerDownCapture:composeEventHandlers(Mt.onPointerDownCapture,ep.onPointerDownCapture)})});DismissableLayer.displayName=DISMISSABLE_LAYER_NAME;var BRANCH_NAME="DismissableLayerBranch",DismissableLayerBranch=reactExports.forwardRef((Mt,st)=>{const nn=reactExports.useContext(DismissableLayerContext),rn=reactExports.useRef(null),on=useComposedRefs(st,rn);return reactExports.useEffect(()=>{const an=rn.current;if(an)return nn.branches.add(an),()=>{nn.branches.delete(an)}},[nn.branches]),jsxRuntimeExports.jsx(Primitive.div,{...Mt,ref:on})});DismissableLayerBranch.displayName=BRANCH_NAME;function usePointerDownOutside(Mt,st=globalThis==null?void 0:globalThis.document){const nn=useCallbackRef$1(Mt),rn=reactExports.useRef(!1),on=reactExports.useRef(()=>{});return reactExports.useEffect(()=>{const an=un=>{if(un.target&&!rn.current){let Xr=function(){handleAndDispatchCustomEvent$1(POINTER_DOWN_OUTSIDE,nn,to,{discrete:!0})};const to={originalEvent:un};un.pointerType==="touch"?(st.removeEventListener("click",on.current),on.current=Xr,st.addEventListener("click",on.current,{once:!0})):Xr()}else st.removeEventListener("click",on.current);rn.current=!1},sn=window.setTimeout(()=>{st.addEventListener("pointerdown",an)},0);return()=>{window.clearTimeout(sn),st.removeEventListener("pointerdown",an),st.removeEventListener("click",on.current)}},[st,nn]),{onPointerDownCapture:()=>rn.current=!0}}function useFocusOutside(Mt,st=globalThis==null?void 0:globalThis.document){const nn=useCallbackRef$1(Mt),rn=reactExports.useRef(!1);return reactExports.useEffect(()=>{const on=an=>{an.target&&!rn.current&&handleAndDispatchCustomEvent$1(FOCUS_OUTSIDE,nn,{originalEvent:an},{discrete:!1})};return st.addEventListener("focusin",on),()=>st.removeEventListener("focusin",on)},[st,nn]),{onFocusCapture:()=>rn.current=!0,onBlurCapture:()=>rn.current=!1}}function dispatchUpdate(){const Mt=new CustomEvent(CONTEXT_UPDATE);document.dispatchEvent(Mt)}function handleAndDispatchCustomEvent$1(Mt,st,nn,{discrete:rn}){const on=nn.originalEvent.target,an=new CustomEvent(Mt,{bubbles:!1,cancelable:!0,detail:nn});st&&on.addEventListener(Mt,st,{once:!0}),rn?dispatchDiscreteCustomEvent(on,an):on.dispatchEvent(an)}var Root$6=DismissableLayer,Branch=DismissableLayerBranch,useLayoutEffect2=globalThis!=null&&globalThis.document?reactExports.useLayoutEffect:()=>{},PORTAL_NAME$3="Portal",Portal$2=reactExports.forwardRef((Mt,st)=>{var un;const{container:nn,...rn}=Mt,[on,an]=reactExports.useState(!1);useLayoutEffect2(()=>an(!0),[]);const sn=nn||on&&((un=globalThis==null?void 0:globalThis.document)==null?void 0:un.body);return sn?ReactDOM.createPortal(jsxRuntimeExports.jsx(Primitive.div,{...rn,ref:st}),sn):null});Portal$2.displayName=PORTAL_NAME$3;function useStateMachine(Mt,st){return reactExports.useReducer((nn,rn)=>st[nn][rn]??nn,Mt)}var Presence=Mt=>{const{present:st,children:nn}=Mt,rn=usePresence$1(st),on=typeof nn=="function"?nn({present:rn.isPresent}):reactExports.Children.only(nn),an=useComposedRefs(rn.ref,getElementRef(on));return typeof nn=="function"||rn.isPresent?reactExports.cloneElement(on,{ref:an}):null};Presence.displayName="Presence";function usePresence$1(Mt){const[st,nn]=reactExports.useState(),rn=reactExports.useRef({}),on=reactExports.useRef(Mt),an=reactExports.useRef("none"),sn=Mt?"mounted":"unmounted",[un,Xr]=useStateMachine(sn,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return reactExports.useEffect(()=>{const to=getAnimationName(rn.current);an.current=un==="mounted"?to:"none"},[un]),useLayoutEffect2(()=>{const to=rn.current,uo=on.current;if(uo!==Mt){const fn=an.current,co=getAnimationName(to);Mt?Xr("MOUNT"):co==="none"||(to==null?void 0:to.display)==="none"?Xr("UNMOUNT"):Xr(uo&&fn!==co?"ANIMATION_OUT":"UNMOUNT"),on.current=Mt}},[Mt,Xr]),useLayoutEffect2(()=>{if(st){let to;const uo=st.ownerDocument.defaultView??window,hn=co=>{const fo=getAnimationName(rn.current).includes(co.animationName);if(co.target===st&&fo&&(Xr("ANIMATION_END"),!on.current)){const ho=st.style.animationFillMode;st.style.animationFillMode="forwards",to=uo.setTimeout(()=>{st.style.animationFillMode==="forwards"&&(st.style.animationFillMode=ho)})}},fn=co=>{co.target===st&&(an.current=getAnimationName(rn.current))};return st.addEventListener("animationstart",fn),st.addEventListener("animationcancel",hn),st.addEventListener("animationend",hn),()=>{uo.clearTimeout(to),st.removeEventListener("animationstart",fn),st.removeEventListener("animationcancel",hn),st.removeEventListener("animationend",hn)}}else Xr("ANIMATION_END")},[st,Xr]),{isPresent:["mounted","unmountSuspended"].includes(un),ref:reactExports.useCallback(to=>{to&&(rn.current=getComputedStyle(to)),nn(to)},[])}}function getAnimationName(Mt){return(Mt==null?void 0:Mt.animationName)||"none"}function getElementRef(Mt){var rn,on;let st=(rn=Object.getOwnPropertyDescriptor(Mt.props,"ref"))==null?void 0:rn.get,nn=st&&"isReactWarning"in st&&st.isReactWarning;return nn?Mt.ref:(st=(on=Object.getOwnPropertyDescriptor(Mt,"ref"))==null?void 0:on.get,nn=st&&"isReactWarning"in st&&st.isReactWarning,nn?Mt.props.ref:Mt.props.ref||Mt.ref)}function useControllableState({prop:Mt,defaultProp:st,onChange:nn=()=>{}}){const[rn,on]=useUncontrolledState({defaultProp:st,onChange:nn}),an=Mt!==void 0,sn=an?Mt:rn,un=useCallbackRef$1(nn),Xr=reactExports.useCallback(to=>{if(an){const hn=typeof to=="function"?to(Mt):to;hn!==Mt&&un(hn)}else on(to)},[an,Mt,on,un]);return[sn,Xr]}function useUncontrolledState({defaultProp:Mt,onChange:st}){const nn=reactExports.useState(Mt),[rn]=nn,on=reactExports.useRef(rn),an=useCallbackRef$1(st);return reactExports.useEffect(()=>{on.current!==rn&&(an(rn),on.current=rn)},[rn,on,an]),nn}var NAME$1="VisuallyHidden",VisuallyHidden=reactExports.forwardRef((Mt,st)=>jsxRuntimeExports.jsx(Primitive.span,{...Mt,ref:st,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...Mt.style}}));VisuallyHidden.displayName=NAME$1;var PROVIDER_NAME="ToastProvider",[Collection$4,useCollection$4,createCollectionScope$4]=createCollection("Toast"),[createToastContext,createToastScope]=createContextScope$3("Toast",[createCollectionScope$4]),[ToastProviderProvider,useToastProviderContext]=createToastContext(PROVIDER_NAME),ToastProvider$1=Mt=>{const{__scopeToast:st,label:nn="Notification",duration:rn=5e3,swipeDirection:on="right",swipeThreshold:an=50,children:sn}=Mt,[un,Xr]=reactExports.useState(null),[to,uo]=reactExports.useState(0),hn=reactExports.useRef(!1),fn=reactExports.useRef(!1);return nn.trim()||console.error(`Invalid prop \`label\` supplied to \`${PROVIDER_NAME}\`. Expected non-empty \`string\`.`),jsxRuntimeExports.jsx(Collection$4.Provider,{scope:st,children:jsxRuntimeExports.jsx(ToastProviderProvider,{scope:st,label:nn,duration:rn,swipeDirection:on,swipeThreshold:an,toastCount:to,viewport:un,onViewportChange:Xr,onToastAdd:reactExports.useCallback(()=>uo(co=>co+1),[]),onToastRemove:reactExports.useCallback(()=>uo(co=>co-1),[]),isFocusedToastEscapeKeyDownRef:hn,isClosePausedRef:fn,children:sn})})};ToastProvider$1.displayName=PROVIDER_NAME;var VIEWPORT_NAME="ToastViewport",VIEWPORT_DEFAULT_HOTKEY=["F8"],VIEWPORT_PAUSE="toast.viewportPause",VIEWPORT_RESUME="toast.viewportResume",ToastViewport$1=reactExports.forwardRef((Mt,st)=>{const{__scopeToast:nn,hotkey:rn=VIEWPORT_DEFAULT_HOTKEY,label:on="Notifications ({hotkey})",...an}=Mt,sn=useToastProviderContext(VIEWPORT_NAME,nn),un=useCollection$4(nn),Xr=reactExports.useRef(null),to=reactExports.useRef(null),uo=reactExports.useRef(null),hn=reactExports.useRef(null),fn=useComposedRefs(st,hn,sn.onViewportChange),co=rn.join("+").replace(/Key/g,"").replace(/Digit/g,""),lo=sn.toastCount>0;reactExports.useEffect(()=>{const ho=mo=>{var _d;rn.length!==0&&rn.every(tp=>mo[tp]||mo.code===tp)&&((_d=hn.current)==null||_d.focus())};return document.addEventListener("keydown",ho),()=>document.removeEventListener("keydown",ho)},[rn]),reactExports.useEffect(()=>{const ho=Xr.current,mo=hn.current;if(lo&&ho&&mo){const Uo=()=>{if(!sn.isClosePausedRef.current){const np=new CustomEvent(VIEWPORT_PAUSE);mo.dispatchEvent(np),sn.isClosePausedRef.current=!0}},_d=()=>{if(sn.isClosePausedRef.current){const np=new CustomEvent(VIEWPORT_RESUME);mo.dispatchEvent(np),sn.isClosePausedRef.current=!1}},tp=np=>{!ho.contains(np.relatedTarget)&&_d()},ep=()=>{ho.contains(document.activeElement)||_d()};return ho.addEventListener("focusin",Uo),ho.addEventListener("focusout",tp),ho.addEventListener("pointermove",Uo),ho.addEventListener("pointerleave",ep),window.addEventListener("blur",Uo),window.addEventListener("focus",_d),()=>{ho.removeEventListener("focusin",Uo),ho.removeEventListener("focusout",tp),ho.removeEventListener("pointermove",Uo),ho.removeEventListener("pointerleave",ep),window.removeEventListener("blur",Uo),window.removeEventListener("focus",_d)}}},[lo,sn.isClosePausedRef]);const fo=reactExports.useCallback(({tabbingDirection:ho})=>{const Uo=un().map(_d=>{const tp=_d.ref.current,ep=[tp,...getTabbableCandidates$1(tp)];return ho==="forwards"?ep:ep.reverse()});return(ho==="forwards"?Uo.reverse():Uo).flat()},[un]);return reactExports.useEffect(()=>{const ho=hn.current;if(ho){const mo=Uo=>{var ep,np,rp;const _d=Uo.altKey||Uo.ctrlKey||Uo.metaKey;if(Uo.key==="Tab"&&!_d){const ip=document.activeElement,op=Uo.shiftKey;if(Uo.target===ho&&op){(ep=to.current)==null||ep.focus();return}const up=fo({tabbingDirection:op?"backwards":"forwards"}),pp=up.findIndex(lp=>lp===ip);focusFirst$3(up.slice(pp+1))?Uo.preventDefault():op?(np=to.current)==null||np.focus():(rp=uo.current)==null||rp.focus()}};return ho.addEventListener("keydown",mo),()=>ho.removeEventListener("keydown",mo)}},[un,fo]),jsxRuntimeExports.jsxs(Branch,{ref:Xr,role:"region","aria-label":on.replace("{hotkey}",co),tabIndex:-1,style:{pointerEvents:lo?void 0:"none"},children:[lo&&jsxRuntimeExports.jsx(FocusProxy,{ref:to,onFocusFromOutsideViewport:()=>{const ho=fo({tabbingDirection:"forwards"});focusFirst$3(ho)}}),jsxRuntimeExports.jsx(Collection$4.Slot,{scope:nn,children:jsxRuntimeExports.jsx(Primitive.ol,{tabIndex:-1,...an,ref:fn})}),lo&&jsxRuntimeExports.jsx(FocusProxy,{ref:uo,onFocusFromOutsideViewport:()=>{const ho=fo({tabbingDirection:"backwards"});focusFirst$3(ho)}})]})});ToastViewport$1.displayName=VIEWPORT_NAME;var FOCUS_PROXY_NAME="ToastFocusProxy",FocusProxy=reactExports.forwardRef((Mt,st)=>{const{__scopeToast:nn,onFocusFromOutsideViewport:rn,...on}=Mt,an=useToastProviderContext(FOCUS_PROXY_NAME,nn);return jsxRuntimeExports.jsx(VisuallyHidden,{"aria-hidden":!0,tabIndex:0,...on,ref:st,style:{position:"fixed"},onFocus:sn=>{var to;const un=sn.relatedTarget;!((to=an.viewport)!=null&&to.contains(un))&&rn()}})});FocusProxy.displayName=FOCUS_PROXY_NAME;var TOAST_NAME="Toast",TOAST_SWIPE_START="toast.swipeStart",TOAST_SWIPE_MOVE="toast.swipeMove",TOAST_SWIPE_CANCEL="toast.swipeCancel",TOAST_SWIPE_END="toast.swipeEnd",Toast$1=reactExports.forwardRef((Mt,st)=>{const{forceMount:nn,open:rn,defaultOpen:on,onOpenChange:an,...sn}=Mt,[un=!0,Xr]=useControllableState({prop:rn,defaultProp:on,onChange:an});return jsxRuntimeExports.jsx(Presence,{present:nn||un,children:jsxRuntimeExports.jsx(ToastImpl,{open:un,...sn,ref:st,onClose:()=>Xr(!1),onPause:useCallbackRef$1(Mt.onPause),onResume:useCallbackRef$1(Mt.onResume),onSwipeStart:composeEventHandlers(Mt.onSwipeStart,to=>{to.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:composeEventHandlers(Mt.onSwipeMove,to=>{const{x:uo,y:hn}=to.detail.delta;to.currentTarget.setAttribute("data-swipe","move"),to.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${uo}px`),to.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${hn}px`)}),onSwipeCancel:composeEventHandlers(Mt.onSwipeCancel,to=>{to.currentTarget.setAttribute("data-swipe","cancel"),to.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),to.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),to.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),to.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:composeEventHandlers(Mt.onSwipeEnd,to=>{const{x:uo,y:hn}=to.detail.delta;to.currentTarget.setAttribute("data-swipe","end"),to.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),to.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),to.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${uo}px`),to.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${hn}px`),Xr(!1)})})})});Toast$1.displayName=TOAST_NAME;var[ToastInteractiveProvider,useToastInteractiveContext]=createToastContext(TOAST_NAME,{onClose(){}}),ToastImpl=reactExports.forwardRef((Mt,st)=>{const{__scopeToast:nn,type:rn="foreground",duration:on,open:an,onClose:sn,onEscapeKeyDown:un,onPause:Xr,onResume:to,onSwipeStart:uo,onSwipeMove:hn,onSwipeCancel:fn,onSwipeEnd:co,...lo}=Mt,fo=useToastProviderContext(TOAST_NAME,nn),[ho,mo]=reactExports.useState(null),Uo=useComposedRefs(st,lp=>mo(lp)),_d=reactExports.useRef(null),tp=reactExports.useRef(null),ep=on||fo.duration,np=reactExports.useRef(0),rp=reactExports.useRef(ep),ip=reactExports.useRef(0),{onToastAdd:op,onToastRemove:ap}=fo,sp=useCallbackRef$1(()=>{var dp;(ho==null?void 0:ho.contains(document.activeElement))&&((dp=fo.viewport)==null||dp.focus()),sn()}),up=reactExports.useCallback(lp=>{!lp||lp===1/0||(window.clearTimeout(ip.current),np.current=new Date().getTime(),ip.current=window.setTimeout(sp,lp))},[sp]);reactExports.useEffect(()=>{const lp=fo.viewport;if(lp){const dp=()=>{up(rp.current),to==null||to()},cp=()=>{const fp=new Date().getTime()-np.current;rp.current=rp.current-fp,window.clearTimeout(ip.current),Xr==null||Xr()};return lp.addEventListener(VIEWPORT_PAUSE,cp),lp.addEventListener(VIEWPORT_RESUME,dp),()=>{lp.removeEventListener(VIEWPORT_PAUSE,cp),lp.removeEventListener(VIEWPORT_RESUME,dp)}}},[fo.viewport,ep,Xr,to,up]),reactExports.useEffect(()=>{an&&!fo.isClosePausedRef.current&&up(ep)},[an,ep,fo.isClosePausedRef,up]),reactExports.useEffect(()=>(op(),()=>ap()),[op,ap]);const pp=reactExports.useMemo(()=>ho?getAnnounceTextContent(ho):null,[ho]);return fo.viewport?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[pp&&jsxRuntimeExports.jsx(ToastAnnounce,{__scopeToast:nn,role:"status","aria-live":rn==="foreground"?"assertive":"polite","aria-atomic":!0,children:pp}),jsxRuntimeExports.jsx(ToastInteractiveProvider,{scope:nn,onClose:sp,children:reactDomExports.createPortal(jsxRuntimeExports.jsx(Collection$4.ItemSlot,{scope:nn,children:jsxRuntimeExports.jsx(Root$6,{asChild:!0,onEscapeKeyDown:composeEventHandlers(un,()=>{fo.isFocusedToastEscapeKeyDownRef.current||sp(),fo.isFocusedToastEscapeKeyDownRef.current=!1}),children:jsxRuntimeExports.jsx(Primitive.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":an?"open":"closed","data-swipe-direction":fo.swipeDirection,...lo,ref:Uo,style:{userSelect:"none",touchAction:"none",...Mt.style},onKeyDown:composeEventHandlers(Mt.onKeyDown,lp=>{lp.key==="Escape"&&(un==null||un(lp.nativeEvent),lp.nativeEvent.defaultPrevented||(fo.isFocusedToastEscapeKeyDownRef.current=!0,sp()))}),onPointerDown:composeEventHandlers(Mt.onPointerDown,lp=>{lp.button===0&&(_d.current={x:lp.clientX,y:lp.clientY})}),onPointerMove:composeEventHandlers(Mt.onPointerMove,lp=>{if(!_d.current)return;const dp=lp.clientX-_d.current.x,cp=lp.clientY-_d.current.y,fp=!!tp.current,gp=["left","right"].includes(fo.swipeDirection),mp=["left","up"].includes(fo.swipeDirection)?Math.min:Math.max,xp=gp?mp(0,dp):0,_p=gp?0:mp(0,cp),Sp=lp.pointerType==="touch"?10:2,Cp={x:xp,y:_p},jp={originalEvent:lp,delta:Cp};fp?(tp.current=Cp,handleAndDispatchCustomEvent(TOAST_SWIPE_MOVE,hn,jp,{discrete:!1})):isDeltaInDirection(Cp,fo.swipeDirection,Sp)?(tp.current=Cp,handleAndDispatchCustomEvent(TOAST_SWIPE_START,uo,jp,{discrete:!1}),lp.target.setPointerCapture(lp.pointerId)):(Math.abs(dp)>Sp||Math.abs(cp)>Sp)&&(_d.current=null)}),onPointerUp:composeEventHandlers(Mt.onPointerUp,lp=>{const dp=tp.current,cp=lp.target;if(cp.hasPointerCapture(lp.pointerId)&&cp.releasePointerCapture(lp.pointerId),tp.current=null,_d.current=null,dp){const fp=lp.currentTarget,gp={originalEvent:lp,delta:dp};isDeltaInDirection(dp,fo.swipeDirection,fo.swipeThreshold)?handleAndDispatchCustomEvent(TOAST_SWIPE_END,co,gp,{discrete:!0}):handleAndDispatchCustomEvent(TOAST_SWIPE_CANCEL,fn,gp,{discrete:!0}),fp.addEventListener("click",mp=>mp.preventDefault(),{once:!0})}})})})}),fo.viewport)})]}):null}),ToastAnnounce=Mt=>{const{__scopeToast:st,children:nn,...rn}=Mt,on=useToastProviderContext(TOAST_NAME,st),[an,sn]=reactExports.useState(!1),[un,Xr]=reactExports.useState(!1);return useNextFrame(()=>sn(!0)),reactExports.useEffect(()=>{const to=window.setTimeout(()=>Xr(!0),1e3);return()=>window.clearTimeout(to)},[]),un?null:jsxRuntimeExports.jsx(Portal$2,{asChild:!0,children:jsxRuntimeExports.jsx(VisuallyHidden,{...rn,children:an&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[on.label," ",nn]})})})},TITLE_NAME$1="ToastTitle",ToastTitle$1=reactExports.forwardRef((Mt,st)=>{const{__scopeToast:nn,...rn}=Mt;return jsxRuntimeExports.jsx(Primitive.div,{...rn,ref:st})});ToastTitle$1.displayName=TITLE_NAME$1;var DESCRIPTION_NAME$1="ToastDescription",ToastDescription$1=reactExports.forwardRef((Mt,st)=>{const{__scopeToast:nn,...rn}=Mt;return jsxRuntimeExports.jsx(Primitive.div,{...rn,ref:st})});ToastDescription$1.displayName=DESCRIPTION_NAME$1;var ACTION_NAME="ToastAction",ToastAction$1=reactExports.forwardRef((Mt,st)=>{const{altText:nn,...rn}=Mt;return nn.trim()?jsxRuntimeExports.jsx(ToastAnnounceExclude,{altText:nn,asChild:!0,children:jsxRuntimeExports.jsx(ToastClose$1,{...rn,ref:st})}):(console.error(`Invalid prop \`altText\` supplied to \`${ACTION_NAME}\`. Expected non-empty \`string\`.`),null)});ToastAction$1.displayName=ACTION_NAME;var CLOSE_NAME$1="ToastClose",ToastClose$1=reactExports.forwardRef((Mt,st)=>{const{__scopeToast:nn,...rn}=Mt,on=useToastInteractiveContext(CLOSE_NAME$1,nn);return jsxRuntimeExports.jsx(ToastAnnounceExclude,{asChild:!0,children:jsxRuntimeExports.jsx(Primitive.button,{type:"button",...rn,ref:st,onClick:composeEventHandlers(Mt.onClick,on.onClose)})})});ToastClose$1.displayName=CLOSE_NAME$1;var ToastAnnounceExclude=reactExports.forwardRef((Mt,st)=>{const{__scopeToast:nn,altText:rn,...on}=Mt;return jsxRuntimeExports.jsx(Primitive.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":rn||void 0,...on,ref:st})});function getAnnounceTextContent(Mt){const st=[];return Array.from(Mt.childNodes).forEach(rn=>{if(rn.nodeType===rn.TEXT_NODE&&rn.textContent&&st.push(rn.textContent),isHTMLElement$1(rn)){const on=rn.ariaHidden||rn.hidden||rn.style.display==="none",an=rn.dataset.radixToastAnnounceExclude==="";if(!on)if(an){const sn=rn.dataset.radixToastAnnounceAlt;sn&&st.push(sn)}else st.push(...getAnnounceTextContent(rn))}}),st}function handleAndDispatchCustomEvent(Mt,st,nn,{discrete:rn}){const on=nn.originalEvent.currentTarget,an=new CustomEvent(Mt,{bubbles:!0,cancelable:!0,detail:nn});st&&on.addEventListener(Mt,st,{once:!0}),rn?dispatchDiscreteCustomEvent(on,an):on.dispatchEvent(an)}var isDeltaInDirection=(Mt,st,nn=0)=>{const rn=Math.abs(Mt.x),on=Math.abs(Mt.y),an=rn>on;return st==="left"||st==="right"?an&&rn>nn:!an&&on>nn};function useNextFrame(Mt=()=>{}){const st=useCallbackRef$1(Mt);useLayoutEffect2(()=>{let nn=0,rn=0;return nn=window.requestAnimationFrame(()=>rn=window.requestAnimationFrame(st)),()=>{window.cancelAnimationFrame(nn),window.cancelAnimationFrame(rn)}},[st])}function isHTMLElement$1(Mt){return Mt.nodeType===Mt.ELEMENT_NODE}function getTabbableCandidates$1(Mt){const st=[],nn=document.createTreeWalker(Mt,NodeFilter.SHOW_ELEMENT,{acceptNode:rn=>{const on=rn.tagName==="INPUT"&&rn.type==="hidden";return rn.disabled||rn.hidden||on?NodeFilter.FILTER_SKIP:rn.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;nn.nextNode();)st.push(nn.currentNode);return st}function focusFirst$3(Mt){const st=document.activeElement;return Mt.some(nn=>nn===st?!0:(nn.focus(),document.activeElement!==st))}var Provider=ToastProvider$1,Viewport=ToastViewport$1,Root2$4=Toast$1,Title$1=ToastTitle$1,Description$1=ToastDescription$1,Action=ToastAction$1,Close$1=ToastClose$1;function r$2(Mt){var st,nn,rn="";if(typeof Mt=="string"||typeof Mt=="number")rn+=Mt;else if(typeof Mt=="object")if(Array.isArray(Mt))for(st=0;st<Mt.length;st++)Mt[st]&&(nn=r$2(Mt[st]))&&(rn&&(rn+=" "),rn+=nn);else for(st in Mt)Mt[st]&&(rn&&(rn+=" "),rn+=st);return rn}function clsx$1(){for(var Mt,st,nn=0,rn="";nn<arguments.length;)(Mt=arguments[nn++])&&(st=r$2(Mt))&&(rn&&(rn+=" "),rn+=st);return rn}const falsyToString=Mt=>typeof Mt=="boolean"?"".concat(Mt):Mt===0?"0":Mt,cx=clsx$1,cva=(Mt,st)=>nn=>{var rn;if((st==null?void 0:st.variants)==null)return cx(Mt,nn==null?void 0:nn.class,nn==null?void 0:nn.className);const{variants:on,defaultVariants:an}=st,sn=Object.keys(on).map(to=>{const uo=nn==null?void 0:nn[to],hn=an==null?void 0:an[to];if(uo===null)return null;const fn=falsyToString(uo)||falsyToString(hn);return on[to][fn]}),un=nn&&Object.entries(nn).reduce((to,uo)=>{let[hn,fn]=uo;return fn===void 0||(to[hn]=fn),to},{}),Xr=st==null||(rn=st.compoundVariants)===null||rn===void 0?void 0:rn.reduce((to,uo)=>{let{class:hn,className:fn,...co}=uo;return Object.entries(co).every(lo=>{let[fo,ho]=lo;return Array.isArray(ho)?ho.includes({...an,...un}[fo]):{...an,...un}[fo]===ho})?[...to,hn,fn]:to},[]);return cx(Mt,sn,Xr,nn==null?void 0:nn.class,nn==null?void 0:nn.className)};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const toKebabCase=Mt=>Mt.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),mergeClasses=(...Mt)=>Mt.filter((st,nn,rn)=>!!st&&rn.indexOf(st)===nn).join(" ");/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var defaultAttributes={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Icon=reactExports.forwardRef(({color:Mt="currentColor",size:st=24,strokeWidth:nn=2,absoluteStrokeWidth:rn,className:on="",children:an,iconNode:sn,...un},Xr)=>reactExports.createElement("svg",{ref:Xr,...defaultAttributes,width:st,height:st,stroke:Mt,strokeWidth:rn?Number(nn)*24/Number(st):nn,className:mergeClasses("lucide",on),...un},[...sn.map(([to,uo])=>reactExports.createElement(to,uo)),...Array.isArray(an)?an:[an]]));/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const createLucideIcon=(Mt,st)=>{const nn=reactExports.forwardRef(({className:rn,...on},an)=>reactExports.createElement(Icon,{ref:an,iconNode:st,className:mergeClasses(`lucide-${toKebabCase(Mt)}`,rn),...on}));return nn.displayName=`${Mt}`,nn};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ArrowLeft=createLucideIcon("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Baby=createLucideIcon("Baby",[["path",{d:"M9 12h.01",key:"157uk2"}],["path",{d:"M15 12h.01",key:"1k8ypt"}],["path",{d:"M10 16c.5.3 1.2.5 2 .5s1.5-.2 2-.5",key:"1u7htd"}],["path",{d:"M19 6.3a9 9 0 0 1 1.8 3.9 2 2 0 0 1 0 3.6 9 9 0 0 1-17.6 0 2 2 0 0 1 0-3.6A9 9 0 0 1 12 3c2 0 3.5 1.1 3.5 2.5s-.9 2.5-2 2.5c-.8 0-1.5-.4-1.5-1",key:"5yv0yz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BookOpen=createLucideIcon("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bookmark=createLucideIcon("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Brain=createLucideIcon("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CameraOff=createLucideIcon("CameraOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16",key:"qmtpty"}],["path",{d:"M9.5 4h5L17 7h3a2 2 0 0 1 2 2v7.5",key:"1ufyfc"}],["path",{d:"M14.121 15.121A3 3 0 1 1 9.88 10.88",key:"11zox6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Camera=createLucideIcon("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ChartLine=createLucideIcon("ChartLine",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ChartNoAxesColumnIncreasing=createLucideIcon("ChartNoAxesColumnIncreasing",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ChartNoAxesColumn=createLucideIcon("ChartNoAxesColumn",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ChartPie=createLucideIcon("ChartPie",[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CheckCheck=createLucideIcon("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Check=createLucideIcon("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ChevronDown=createLucideIcon("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ChevronLeft=createLucideIcon("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ChevronRight=createLucideIcon("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CircleAlert=createLucideIcon("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CircleCheckBig=createLucideIcon("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CirclePause=createLucideIcon("CirclePause",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"10",x2:"10",y1:"15",y2:"9",key:"c1nkhi"}],["line",{x1:"14",x2:"14",y1:"15",y2:"9",key:"h65svq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CirclePlay=createLucideIcon("CirclePlay",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Circle=createLucideIcon("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Clock=createLucideIcon("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cloud=createLucideIcon("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FileText=createLucideIcon("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Frown=createLucideIcon("Frown",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M16 16s-1.5-2-4-2-4 2-4 2",key:"epbg0q"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Heart=createLucideIcon("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const House=createLucideIcon("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Info=createLucideIcon("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Layers=createLucideIcon("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lightbulb=createLucideIcon("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const List$1=createLucideIcon("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lock=createLucideIcon("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Maximize2=createLucideIcon("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Menu$1=createLucideIcon("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MessageCircle=createLucideIcon("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mic=createLucideIcon("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Minimize2=createLucideIcon("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Music=createLucideIcon("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RefreshCw=createLucideIcon("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const School=createLucideIcon("School",[["path",{d:"M14 22v-4a2 2 0 1 0-4 0v4",key:"hhkicm"}],["path",{d:"m18 10 4 2v8a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-8l4-2",key:"1vwozw"}],["path",{d:"M18 5v17",key:"1sw6gf"}],["path",{d:"m4 6 8-4 8 4",key:"1q0ilc"}],["path",{d:"M6 5v17",key:"1xfsm0"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Send=createLucideIcon("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ShieldCheck=createLucideIcon("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ShieldPlus=createLucideIcon("ShieldPlus",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M9 12h6",key:"1c52cq"}],["path",{d:"M12 9v6",key:"199k2o"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Shield=createLucideIcon("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SmilePlus=createLucideIcon("SmilePlus",[["path",{d:"M22 11v1a10 10 0 1 1-9-10",key:"ew0xw9"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}],["path",{d:"M16 5h6",key:"1vod17"}],["path",{d:"M19 2v6",key:"4bpg5p"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Smile=createLucideIcon("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sparkles=createLucideIcon("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sun=createLucideIcon("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Trees=createLucideIcon("Trees",[["path",{d:"M10 10v.2A3 3 0 0 1 8.9 16H5a3 3 0 0 1-1-5.8V10a3 3 0 0 1 6 0Z",key:"1l6gj6"}],["path",{d:"M7 16v6",key:"1a82de"}],["path",{d:"M13 19v3",key:"13sx9i"}],["path",{d:"M12 19h8.3a1 1 0 0 0 .7-1.7L18 14h.3a1 1 0 0 0 .7-1.7L16 9h.2a1 1 0 0 0 .8-1.7L13 3l-1.4 1.5",key:"1sj9kv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const User=createLucideIcon("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Volume2=createLucideIcon("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VolumeX=createLucideIcon("VolumeX",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Waves=createLucideIcon("Waves",[["path",{d:"M2 6c.6.5 1.2 1 2.5 1C7 7 7 5 9.5 5c2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"knzxuh"}],["path",{d:"M2 12c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"2jd2cc"}],["path",{d:"M2 18c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"rd2r6e"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X$1=createLucideIcon("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zap=createLucideIcon("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);function r$1(Mt){var st,nn,rn="";if(typeof Mt=="string"||typeof Mt=="number")rn+=Mt;else if(typeof Mt=="object")if(Array.isArray(Mt)){var on=Mt.length;for(st=0;st<on;st++)Mt[st]&&(nn=r$1(Mt[st]))&&(rn&&(rn+=" "),rn+=nn)}else for(nn in Mt)Mt[nn]&&(rn&&(rn+=" "),rn+=nn);return rn}function clsx(){for(var Mt,st,nn=0,rn="",on=arguments.length;nn<on;nn++)(Mt=arguments[nn])&&(st=r$1(Mt))&&(rn&&(rn+=" "),rn+=st);return rn}const CLASS_PART_SEPARATOR="-",createClassGroupUtils=Mt=>{const st=createClassMap(Mt),{conflictingClassGroups:nn,conflictingClassGroupModifiers:rn}=Mt;return{getClassGroupId:sn=>{const un=sn.split(CLASS_PART_SEPARATOR);return un[0]===""&&un.length!==1&&un.shift(),getGroupRecursive(un,st)||getGroupIdForArbitraryProperty(sn)},getConflictingClassGroupIds:(sn,un)=>{const Xr=nn[sn]||[];return un&&rn[sn]?[...Xr,...rn[sn]]:Xr}}},getGroupRecursive=(Mt,st)=>{var sn;if(Mt.length===0)return st.classGroupId;const nn=Mt[0],rn=st.nextPart.get(nn),on=rn?getGroupRecursive(Mt.slice(1),rn):void 0;if(on)return on;if(st.validators.length===0)return;const an=Mt.join(CLASS_PART_SEPARATOR);return(sn=st.validators.find(({validator:un})=>un(an)))==null?void 0:sn.classGroupId},arbitraryPropertyRegex=/^\[(.+)\]$/,getGroupIdForArbitraryProperty=Mt=>{if(arbitraryPropertyRegex.test(Mt)){const st=arbitraryPropertyRegex.exec(Mt)[1],nn=st==null?void 0:st.substring(0,st.indexOf(":"));if(nn)return"arbitrary.."+nn}},createClassMap=Mt=>{const{theme:st,prefix:nn}=Mt,rn={nextPart:new Map,validators:[]};return getPrefixedClassGroupEntries(Object.entries(Mt.classGroups),nn).forEach(([an,sn])=>{processClassesRecursively(sn,rn,an,st)}),rn},processClassesRecursively=(Mt,st,nn,rn)=>{Mt.forEach(on=>{if(typeof on=="string"){const an=on===""?st:getPart(st,on);an.classGroupId=nn;return}if(typeof on=="function"){if(isThemeGetter(on)){processClassesRecursively(on(rn),st,nn,rn);return}st.validators.push({validator:on,classGroupId:nn});return}Object.entries(on).forEach(([an,sn])=>{processClassesRecursively(sn,getPart(st,an),nn,rn)})})},getPart=(Mt,st)=>{let nn=Mt;return st.split(CLASS_PART_SEPARATOR).forEach(rn=>{nn.nextPart.has(rn)||nn.nextPart.set(rn,{nextPart:new Map,validators:[]}),nn=nn.nextPart.get(rn)}),nn},isThemeGetter=Mt=>Mt.isThemeGetter,getPrefixedClassGroupEntries=(Mt,st)=>st?Mt.map(([nn,rn])=>{const on=rn.map(an=>typeof an=="string"?st+an:typeof an=="object"?Object.fromEntries(Object.entries(an).map(([sn,un])=>[st+sn,un])):an);return[nn,on]}):Mt,createLruCache=Mt=>{if(Mt<1)return{get:()=>{},set:()=>{}};let st=0,nn=new Map,rn=new Map;const on=(an,sn)=>{nn.set(an,sn),st++,st>Mt&&(st=0,rn=nn,nn=new Map)};return{get(an){let sn=nn.get(an);if(sn!==void 0)return sn;if((sn=rn.get(an))!==void 0)return on(an,sn),sn},set(an,sn){nn.has(an)?nn.set(an,sn):on(an,sn)}}},IMPORTANT_MODIFIER="!",createParseClassName=Mt=>{const{separator:st,experimentalParseClassName:nn}=Mt,rn=st.length===1,on=st[0],an=st.length,sn=un=>{const Xr=[];let to=0,uo=0,hn;for(let ho=0;ho<un.length;ho++){let mo=un[ho];if(to===0){if(mo===on&&(rn||un.slice(ho,ho+an)===st)){Xr.push(un.slice(uo,ho)),uo=ho+an;continue}if(mo==="/"){hn=ho;continue}}mo==="["?to++:mo==="]"&&to--}const fn=Xr.length===0?un:un.substring(uo),co=fn.startsWith(IMPORTANT_MODIFIER),lo=co?fn.substring(1):fn,fo=hn&&hn>uo?hn-uo:void 0;return{modifiers:Xr,hasImportantModifier:co,baseClassName:lo,maybePostfixModifierPosition:fo}};return nn?un=>nn({className:un,parseClassName:sn}):sn},sortModifiers=Mt=>{if(Mt.length<=1)return Mt;const st=[];let nn=[];return Mt.forEach(rn=>{rn[0]==="["?(st.push(...nn.sort(),rn),nn=[]):nn.push(rn)}),st.push(...nn.sort()),st},createConfigUtils=Mt=>({cache:createLruCache(Mt.cacheSize),parseClassName:createParseClassName(Mt),...createClassGroupUtils(Mt)}),SPLIT_CLASSES_REGEX=/\s+/,mergeClassList=(Mt,st)=>{const{parseClassName:nn,getClassGroupId:rn,getConflictingClassGroupIds:on}=st,an=[],sn=Mt.trim().split(SPLIT_CLASSES_REGEX);let un="";for(let Xr=sn.length-1;Xr>=0;Xr-=1){const to=sn[Xr],{modifiers:uo,hasImportantModifier:hn,baseClassName:fn,maybePostfixModifierPosition:co}=nn(to);let lo=!!co,fo=rn(lo?fn.substring(0,co):fn);if(!fo){if(!lo){un=to+(un.length>0?" "+un:un);continue}if(fo=rn(fn),!fo){un=to+(un.length>0?" "+un:un);continue}lo=!1}const ho=sortModifiers(uo).join(":"),mo=hn?ho+IMPORTANT_MODIFIER:ho,Uo=mo+fo;if(an.includes(Uo))continue;an.push(Uo);const _d=on(fo,lo);for(let tp=0;tp<_d.length;++tp){const ep=_d[tp];an.push(mo+ep)}un=to+(un.length>0?" "+un:un)}return un};function twJoin(){let Mt=0,st,nn,rn="";for(;Mt<arguments.length;)(st=arguments[Mt++])&&(nn=toValue(st))&&(rn&&(rn+=" "),rn+=nn);return rn}const toValue=Mt=>{if(typeof Mt=="string")return Mt;let st,nn="";for(let rn=0;rn<Mt.length;rn++)Mt[rn]&&(st=toValue(Mt[rn]))&&(nn&&(nn+=" "),nn+=st);return nn};function createTailwindMerge(Mt,...st){let nn,rn,on,an=sn;function sn(Xr){const to=st.reduce((uo,hn)=>hn(uo),Mt());return nn=createConfigUtils(to),rn=nn.cache.get,on=nn.cache.set,an=un,un(Xr)}function un(Xr){const to=rn(Xr);if(to)return to;const uo=mergeClassList(Xr,nn);return on(Xr,uo),uo}return function(){return an(twJoin.apply(null,arguments))}}const fromTheme=Mt=>{const st=nn=>nn[Mt]||[];return st.isThemeGetter=!0,st},arbitraryValueRegex=/^\[(?:([a-z-]+):)?(.+)\]$/i,fractionRegex=/^\d+\/\d+$/,stringLengths=new Set(["px","full","screen"]),tshirtUnitRegex=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,lengthUnitRegex=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,colorFunctionRegex=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,shadowRegex=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,imageRegex=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,isLength$4=Mt=>isNumber$6(Mt)||stringLengths.has(Mt)||fractionRegex.test(Mt),isArbitraryLength=Mt=>getIsArbitraryValue(Mt,"length",isLengthOnly),isNumber$6=Mt=>!!Mt&&!Number.isNaN(Number(Mt)),isArbitraryNumber=Mt=>getIsArbitraryValue(Mt,"number",isNumber$6),isInteger$1=Mt=>!!Mt&&Number.isInteger(Number(Mt)),isPercent$1=Mt=>Mt.endsWith("%")&&isNumber$6(Mt.slice(0,-1)),isArbitraryValue=Mt=>arbitraryValueRegex.test(Mt),isTshirtSize=Mt=>tshirtUnitRegex.test(Mt),sizeLabels=new Set(["length","size","percentage"]),isArbitrarySize=Mt=>getIsArbitraryValue(Mt,sizeLabels,isNever),isArbitraryPosition=Mt=>getIsArbitraryValue(Mt,"position",isNever),imageLabels=new Set(["image","url"]),isArbitraryImage=Mt=>getIsArbitraryValue(Mt,imageLabels,isImage),isArbitraryShadow=Mt=>getIsArbitraryValue(Mt,"",isShadow),isAny=()=>!0,getIsArbitraryValue=(Mt,st,nn)=>{const rn=arbitraryValueRegex.exec(Mt);return rn?rn[1]?typeof st=="string"?rn[1]===st:st.has(rn[1]):nn(rn[2]):!1},isLengthOnly=Mt=>lengthUnitRegex.test(Mt)&&!colorFunctionRegex.test(Mt),isNever=()=>!1,isShadow=Mt=>shadowRegex.test(Mt),isImage=Mt=>imageRegex.test(Mt),getDefaultConfig=()=>{const Mt=fromTheme("colors"),st=fromTheme("spacing"),nn=fromTheme("blur"),rn=fromTheme("brightness"),on=fromTheme("borderColor"),an=fromTheme("borderRadius"),sn=fromTheme("borderSpacing"),un=fromTheme("borderWidth"),Xr=fromTheme("contrast"),to=fromTheme("grayscale"),uo=fromTheme("hueRotate"),hn=fromTheme("invert"),fn=fromTheme("gap"),co=fromTheme("gradientColorStops"),lo=fromTheme("gradientColorStopPositions"),fo=fromTheme("inset"),ho=fromTheme("margin"),mo=fromTheme("opacity"),Uo=fromTheme("padding"),_d=fromTheme("saturate"),tp=fromTheme("scale"),ep=fromTheme("sepia"),np=fromTheme("skew"),rp=fromTheme("space"),ip=fromTheme("translate"),op=()=>["auto","contain","none"],ap=()=>["auto","hidden","clip","visible","scroll"],sp=()=>["auto",isArbitraryValue,st],up=()=>[isArbitraryValue,st],pp=()=>["",isLength$4,isArbitraryLength],lp=()=>["auto",isNumber$6,isArbitraryValue],dp=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],cp=()=>["solid","dashed","dotted","double","none"],fp=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],gp=()=>["start","end","center","between","around","evenly","stretch"],mp=()=>["","0",isArbitraryValue],xp=()=>["auto","avoid","all","avoid-page","page","left","right","column"],_p=()=>[isNumber$6,isArbitraryValue];return{cacheSize:500,separator:":",theme:{colors:[isAny],spacing:[isLength$4,isArbitraryLength],blur:["none","",isTshirtSize,isArbitraryValue],brightness:_p(),borderColor:[Mt],borderRadius:["none","","full",isTshirtSize,isArbitraryValue],borderSpacing:up(),borderWidth:pp(),contrast:_p(),grayscale:mp(),hueRotate:_p(),invert:mp(),gap:up(),gradientColorStops:[Mt],gradientColorStopPositions:[isPercent$1,isArbitraryLength],inset:sp(),margin:sp(),opacity:_p(),padding:up(),saturate:_p(),scale:_p(),sepia:mp(),skew:_p(),space:up(),translate:up()},classGroups:{aspect:[{aspect:["auto","square","video",isArbitraryValue]}],container:["container"],columns:[{columns:[isTshirtSize]}],"break-after":[{"break-after":xp()}],"break-before":[{"break-before":xp()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...dp(),isArbitraryValue]}],overflow:[{overflow:ap()}],"overflow-x":[{"overflow-x":ap()}],"overflow-y":[{"overflow-y":ap()}],overscroll:[{overscroll:op()}],"overscroll-x":[{"overscroll-x":op()}],"overscroll-y":[{"overscroll-y":op()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[fo]}],"inset-x":[{"inset-x":[fo]}],"inset-y":[{"inset-y":[fo]}],start:[{start:[fo]}],end:[{end:[fo]}],top:[{top:[fo]}],right:[{right:[fo]}],bottom:[{bottom:[fo]}],left:[{left:[fo]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",isInteger$1,isArbitraryValue]}],basis:[{basis:sp()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",isArbitraryValue]}],grow:[{grow:mp()}],shrink:[{shrink:mp()}],order:[{order:["first","last","none",isInteger$1,isArbitraryValue]}],"grid-cols":[{"grid-cols":[isAny]}],"col-start-end":[{col:["auto",{span:["full",isInteger$1,isArbitraryValue]},isArbitraryValue]}],"col-start":[{"col-start":lp()}],"col-end":[{"col-end":lp()}],"grid-rows":[{"grid-rows":[isAny]}],"row-start-end":[{row:["auto",{span:[isInteger$1,isArbitraryValue]},isArbitraryValue]}],"row-start":[{"row-start":lp()}],"row-end":[{"row-end":lp()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",isArbitraryValue]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",isArbitraryValue]}],gap:[{gap:[fn]}],"gap-x":[{"gap-x":[fn]}],"gap-y":[{"gap-y":[fn]}],"justify-content":[{justify:["normal",...gp()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...gp(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...gp(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[Uo]}],px:[{px:[Uo]}],py:[{py:[Uo]}],ps:[{ps:[Uo]}],pe:[{pe:[Uo]}],pt:[{pt:[Uo]}],pr:[{pr:[Uo]}],pb:[{pb:[Uo]}],pl:[{pl:[Uo]}],m:[{m:[ho]}],mx:[{mx:[ho]}],my:[{my:[ho]}],ms:[{ms:[ho]}],me:[{me:[ho]}],mt:[{mt:[ho]}],mr:[{mr:[ho]}],mb:[{mb:[ho]}],ml:[{ml:[ho]}],"space-x":[{"space-x":[rp]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[rp]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",isArbitraryValue,st]}],"min-w":[{"min-w":[isArbitraryValue,st,"min","max","fit"]}],"max-w":[{"max-w":[isArbitraryValue,st,"none","full","min","max","fit","prose",{screen:[isTshirtSize]},isTshirtSize]}],h:[{h:[isArbitraryValue,st,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[isArbitraryValue,st,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[isArbitraryValue,st,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[isArbitraryValue,st,"auto","min","max","fit"]}],"font-size":[{text:["base",isTshirtSize,isArbitraryLength]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",isArbitraryNumber]}],"font-family":[{font:[isAny]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",isArbitraryValue]}],"line-clamp":[{"line-clamp":["none",isNumber$6,isArbitraryNumber]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",isLength$4,isArbitraryValue]}],"list-image":[{"list-image":["none",isArbitraryValue]}],"list-style-type":[{list:["none","disc","decimal",isArbitraryValue]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[Mt]}],"placeholder-opacity":[{"placeholder-opacity":[mo]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[Mt]}],"text-opacity":[{"text-opacity":[mo]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...cp(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",isLength$4,isArbitraryLength]}],"underline-offset":[{"underline-offset":["auto",isLength$4,isArbitraryValue]}],"text-decoration-color":[{decoration:[Mt]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:up()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",isArbitraryValue]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",isArbitraryValue]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[mo]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...dp(),isArbitraryPosition]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",isArbitrarySize]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},isArbitraryImage]}],"bg-color":[{bg:[Mt]}],"gradient-from-pos":[{from:[lo]}],"gradient-via-pos":[{via:[lo]}],"gradient-to-pos":[{to:[lo]}],"gradient-from":[{from:[co]}],"gradient-via":[{via:[co]}],"gradient-to":[{to:[co]}],rounded:[{rounded:[an]}],"rounded-s":[{"rounded-s":[an]}],"rounded-e":[{"rounded-e":[an]}],"rounded-t":[{"rounded-t":[an]}],"rounded-r":[{"rounded-r":[an]}],"rounded-b":[{"rounded-b":[an]}],"rounded-l":[{"rounded-l":[an]}],"rounded-ss":[{"rounded-ss":[an]}],"rounded-se":[{"rounded-se":[an]}],"rounded-ee":[{"rounded-ee":[an]}],"rounded-es":[{"rounded-es":[an]}],"rounded-tl":[{"rounded-tl":[an]}],"rounded-tr":[{"rounded-tr":[an]}],"rounded-br":[{"rounded-br":[an]}],"rounded-bl":[{"rounded-bl":[an]}],"border-w":[{border:[un]}],"border-w-x":[{"border-x":[un]}],"border-w-y":[{"border-y":[un]}],"border-w-s":[{"border-s":[un]}],"border-w-e":[{"border-e":[un]}],"border-w-t":[{"border-t":[un]}],"border-w-r":[{"border-r":[un]}],"border-w-b":[{"border-b":[un]}],"border-w-l":[{"border-l":[un]}],"border-opacity":[{"border-opacity":[mo]}],"border-style":[{border:[...cp(),"hidden"]}],"divide-x":[{"divide-x":[un]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[un]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[mo]}],"divide-style":[{divide:cp()}],"border-color":[{border:[on]}],"border-color-x":[{"border-x":[on]}],"border-color-y":[{"border-y":[on]}],"border-color-s":[{"border-s":[on]}],"border-color-e":[{"border-e":[on]}],"border-color-t":[{"border-t":[on]}],"border-color-r":[{"border-r":[on]}],"border-color-b":[{"border-b":[on]}],"border-color-l":[{"border-l":[on]}],"divide-color":[{divide:[on]}],"outline-style":[{outline:["",...cp()]}],"outline-offset":[{"outline-offset":[isLength$4,isArbitraryValue]}],"outline-w":[{outline:[isLength$4,isArbitraryLength]}],"outline-color":[{outline:[Mt]}],"ring-w":[{ring:pp()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[Mt]}],"ring-opacity":[{"ring-opacity":[mo]}],"ring-offset-w":[{"ring-offset":[isLength$4,isArbitraryLength]}],"ring-offset-color":[{"ring-offset":[Mt]}],shadow:[{shadow:["","inner","none",isTshirtSize,isArbitraryShadow]}],"shadow-color":[{shadow:[isAny]}],opacity:[{opacity:[mo]}],"mix-blend":[{"mix-blend":[...fp(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":fp()}],filter:[{filter:["","none"]}],blur:[{blur:[nn]}],brightness:[{brightness:[rn]}],contrast:[{contrast:[Xr]}],"drop-shadow":[{"drop-shadow":["","none",isTshirtSize,isArbitraryValue]}],grayscale:[{grayscale:[to]}],"hue-rotate":[{"hue-rotate":[uo]}],invert:[{invert:[hn]}],saturate:[{saturate:[_d]}],sepia:[{sepia:[ep]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[nn]}],"backdrop-brightness":[{"backdrop-brightness":[rn]}],"backdrop-contrast":[{"backdrop-contrast":[Xr]}],"backdrop-grayscale":[{"backdrop-grayscale":[to]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[uo]}],"backdrop-invert":[{"backdrop-invert":[hn]}],"backdrop-opacity":[{"backdrop-opacity":[mo]}],"backdrop-saturate":[{"backdrop-saturate":[_d]}],"backdrop-sepia":[{"backdrop-sepia":[ep]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[sn]}],"border-spacing-x":[{"border-spacing-x":[sn]}],"border-spacing-y":[{"border-spacing-y":[sn]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",isArbitraryValue]}],duration:[{duration:_p()}],ease:[{ease:["linear","in","out","in-out",isArbitraryValue]}],delay:[{delay:_p()}],animate:[{animate:["none","spin","ping","pulse","bounce",isArbitraryValue]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[tp]}],"scale-x":[{"scale-x":[tp]}],"scale-y":[{"scale-y":[tp]}],rotate:[{rotate:[isInteger$1,isArbitraryValue]}],"translate-x":[{"translate-x":[ip]}],"translate-y":[{"translate-y":[ip]}],"skew-x":[{"skew-x":[np]}],"skew-y":[{"skew-y":[np]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",isArbitraryValue]}],accent:[{accent:["auto",Mt]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",isArbitraryValue]}],"caret-color":[{caret:[Mt]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":up()}],"scroll-mx":[{"scroll-mx":up()}],"scroll-my":[{"scroll-my":up()}],"scroll-ms":[{"scroll-ms":up()}],"scroll-me":[{"scroll-me":up()}],"scroll-mt":[{"scroll-mt":up()}],"scroll-mr":[{"scroll-mr":up()}],"scroll-mb":[{"scroll-mb":up()}],"scroll-ml":[{"scroll-ml":up()}],"scroll-p":[{"scroll-p":up()}],"scroll-px":[{"scroll-px":up()}],"scroll-py":[{"scroll-py":up()}],"scroll-ps":[{"scroll-ps":up()}],"scroll-pe":[{"scroll-pe":up()}],"scroll-pt":[{"scroll-pt":up()}],"scroll-pr":[{"scroll-pr":up()}],"scroll-pb":[{"scroll-pb":up()}],"scroll-pl":[{"scroll-pl":up()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",isArbitraryValue]}],fill:[{fill:[Mt,"none"]}],"stroke-w":[{stroke:[isLength$4,isArbitraryLength,isArbitraryNumber]}],stroke:[{stroke:[Mt,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},twMerge=createTailwindMerge(getDefaultConfig);function cn(...Mt){return twMerge(clsx(Mt))}const ToastProvider=Provider,ToastViewport=reactExports.forwardRef(({className:Mt,...st},nn)=>jsxRuntimeExports.jsx(Viewport,{ref:nn,className:cn("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",Mt),...st}));ToastViewport.displayName=Viewport.displayName;const toastVariants=cva("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),Toast=reactExports.forwardRef(({className:Mt,variant:st,...nn},rn)=>jsxRuntimeExports.jsx(Root2$4,{ref:rn,className:cn(toastVariants({variant:st}),Mt),...nn}));Toast.displayName=Root2$4.displayName;const ToastAction=reactExports.forwardRef(({className:Mt,...st},nn)=>jsxRuntimeExports.jsx(Action,{ref:nn,className:cn("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",Mt),...st}));ToastAction.displayName=Action.displayName;const ToastClose=reactExports.forwardRef(({className:Mt,...st},nn)=>jsxRuntimeExports.jsx(Close$1,{ref:nn,className:cn("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",Mt),"toast-close":"",...st,children:jsxRuntimeExports.jsx(X$1,{className:"h-4 w-4"})}));ToastClose.displayName=Close$1.displayName;const ToastTitle=reactExports.forwardRef(({className:Mt,...st},nn)=>jsxRuntimeExports.jsx(Title$1,{ref:nn,className:cn("text-sm font-semibold",Mt),...st}));ToastTitle.displayName=Title$1.displayName;const ToastDescription=reactExports.forwardRef(({className:Mt,...st},nn)=>jsxRuntimeExports.jsx(Description$1,{ref:nn,className:cn("text-sm opacity-90",Mt),...st}));ToastDescription.displayName=Description$1.displayName;function Toaster(){const{toasts:Mt}=useToast();return jsxRuntimeExports.jsxs(ToastProvider,{children:[Mt.map(function({id:st,title:nn,description:rn,action:on,...an}){return jsxRuntimeExports.jsxs(Toast,{...an,children:[jsxRuntimeExports.jsxs("div",{className:"grid gap-1",children:[nn&&jsxRuntimeExports.jsx(ToastTitle,{children:nn}),rn&&jsxRuntimeExports.jsx(ToastDescription,{children:rn})]}),on,jsxRuntimeExports.jsx(ToastClose,{})]},st)}),jsxRuntimeExports.jsx(ToastViewport,{})]})}const Card=reactExports.forwardRef(({className:Mt,...st},nn)=>jsxRuntimeExports.jsx("div",{ref:nn,className:cn("rounded-lg border bg-card text-card-foreground shadow-sm",Mt),...st}));Card.displayName="Card";const CardHeader=reactExports.forwardRef(({className:Mt,...st},nn)=>jsxRuntimeExports.jsx("div",{ref:nn,className:cn("flex flex-col space-y-1.5 p-6",Mt),...st}));CardHeader.displayName="CardHeader";const CardTitle=reactExports.forwardRef(({className:Mt,...st},nn)=>jsxRuntimeExports.jsx("h3",{ref:nn,className:cn("text-2xl font-semibold leading-none tracking-tight",Mt),...st}));CardTitle.displayName="CardTitle";const CardDescription=reactExports.forwardRef(({className:Mt,...st},nn)=>jsxRuntimeExports.jsx("p",{ref:nn,className:cn("text-sm text-muted-foreground",Mt),...st}));CardDescription.displayName="CardDescription";const CardContent=reactExports.forwardRef(({className:Mt,...st},nn)=>jsxRuntimeExports.jsx("div",{ref:nn,className:cn("p-6 pt-0",Mt),...st}));CardContent.displayName="CardContent";const CardFooter=reactExports.forwardRef(({className:Mt,...st},nn)=>jsxRuntimeExports.jsx("div",{ref:nn,className:cn("flex items-center p-6 pt-0",Mt),...st}));CardFooter.displayName="CardFooter";function NotFound(){return jsxRuntimeExports.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-gray-50",children:jsxRuntimeExports.jsx(Card,{className:"w-full max-w-md mx-4",children:jsxRuntimeExports.jsxs(CardContent,{className:"pt-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex mb-4 gap-2",children:[jsxRuntimeExports.jsx(CircleAlert,{className:"h-8 w-8 text-red-500"}),jsxRuntimeExports.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"404 Page Not Found"})]}),jsxRuntimeExports.jsx("p",{className:"mt-4 text-sm text-gray-600",children:"Did you forget to add the page to the router?"})]})})})}const buttonVariants=cva("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Button=reactExports.forwardRef(({className:Mt,variant:st,size:nn,asChild:rn=!1,...on},an)=>{const sn=rn?Slot:"button";return jsxRuntimeExports.jsx(sn,{className:cn(buttonVariants({variant:st,size:nn,className:Mt})),ref:an,...on})});Button.displayName="Button";const LayoutGroupContext=reactExports.createContext({});function useConstant(Mt){const st=reactExports.useRef(null);return st.current===null&&(st.current=Mt()),st.current}const PresenceContext=reactExports.createContext(null),MotionConfigContext=reactExports.createContext({transformPagePoint:Mt=>Mt,isStatic:!1,reducedMotion:"never"});class PopChildMeasure extends reactExports.Component{getSnapshotBeforeUpdate(st){const nn=this.props.childRef.current;if(nn&&st.isPresent&&!this.props.isPresent){const rn=this.props.sizeRef.current;rn.height=nn.offsetHeight||0,rn.width=nn.offsetWidth||0,rn.top=nn.offsetTop,rn.left=nn.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function PopChild({children:Mt,isPresent:st}){const nn=reactExports.useId(),rn=reactExports.useRef(null),on=reactExports.useRef({width:0,height:0,top:0,left:0}),{nonce:an}=reactExports.useContext(MotionConfigContext);return reactExports.useInsertionEffect(()=>{const{width:sn,height:un,top:Xr,left:to}=on.current;if(st||!rn.current||!sn||!un)return;rn.current.dataset.motionPopId=nn;const uo=document.createElement("style");return an&&(uo.nonce=an),document.head.appendChild(uo),uo.sheet&&uo.sheet.insertRule(`
          [data-motion-pop-id="${nn}"] {
            position: absolute !important;
            width: ${sn}px !important;
            height: ${un}px !important;
            top: ${Xr}px !important;
            left: ${to}px !important;
          }
        `),()=>{document.head.removeChild(uo)}},[st]),jsxRuntimeExports.jsx(PopChildMeasure,{isPresent:st,childRef:rn,sizeRef:on,children:reactExports.cloneElement(Mt,{ref:rn})})}const PresenceChild=({children:Mt,initial:st,isPresent:nn,onExitComplete:rn,custom:on,presenceAffectsLayout:an,mode:sn})=>{const un=useConstant(newChildrenMap),Xr=reactExports.useId(),to=reactExports.useCallback(hn=>{un.set(hn,!0);for(const fn of un.values())if(!fn)return;rn&&rn()},[un,rn]),uo=reactExports.useMemo(()=>({id:Xr,initial:st,isPresent:nn,custom:on,onExitComplete:to,register:hn=>(un.set(hn,!1),()=>un.delete(hn))}),an?[Math.random(),to]:[nn,to]);return reactExports.useMemo(()=>{un.forEach((hn,fn)=>un.set(fn,!1))},[nn]),reactExports.useEffect(()=>{!nn&&!un.size&&rn&&rn()},[nn]),sn==="popLayout"&&(Mt=jsxRuntimeExports.jsx(PopChild,{isPresent:nn,children:Mt})),jsxRuntimeExports.jsx(PresenceContext.Provider,{value:uo,children:Mt})};function newChildrenMap(){return new Map}function usePresence(Mt=!0){const st=reactExports.useContext(PresenceContext);if(st===null)return[!0,null];const{isPresent:nn,onExitComplete:rn,register:on}=st,an=reactExports.useId();reactExports.useEffect(()=>{Mt&&on(an)},[Mt]);const sn=reactExports.useCallback(()=>Mt&&rn&&rn(an),[an,rn,Mt]);return!nn&&rn?[!1,sn]:[!0]}const getChildKey=Mt=>Mt.key||"";function onlyElements(Mt){const st=[];return reactExports.Children.forEach(Mt,nn=>{reactExports.isValidElement(nn)&&st.push(nn)}),st}const isBrowser$1=typeof window<"u",useIsomorphicLayoutEffect$1=isBrowser$1?reactExports.useLayoutEffect:reactExports.useEffect,AnimatePresence=({children:Mt,custom:st,initial:nn=!0,onExitComplete:rn,presenceAffectsLayout:on=!0,mode:an="sync",propagate:sn=!1})=>{const[un,Xr]=usePresence(sn),to=reactExports.useMemo(()=>onlyElements(Mt),[Mt]),uo=sn&&!un?[]:to.map(getChildKey),hn=reactExports.useRef(!0),fn=reactExports.useRef(to),co=useConstant(()=>new Map),[lo,fo]=reactExports.useState(to),[ho,mo]=reactExports.useState(to);useIsomorphicLayoutEffect$1(()=>{hn.current=!1,fn.current=to;for(let tp=0;tp<ho.length;tp++){const ep=getChildKey(ho[tp]);uo.includes(ep)?co.delete(ep):co.get(ep)!==!0&&co.set(ep,!1)}},[ho,uo.length,uo.join("-")]);const Uo=[];if(to!==lo){let tp=[...to];for(let ep=0;ep<ho.length;ep++){const np=ho[ep],rp=getChildKey(np);uo.includes(rp)||(tp.splice(ep,0,np),Uo.push(np))}an==="wait"&&Uo.length&&(tp=Uo),mo(onlyElements(tp)),fo(to);return}const{forceRender:_d}=reactExports.useContext(LayoutGroupContext);return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:ho.map(tp=>{const ep=getChildKey(tp),np=sn&&!un?!1:to===ho||uo.includes(ep),rp=()=>{if(co.has(ep))co.set(ep,!0);else return;let ip=!0;co.forEach(op=>{op||(ip=!1)}),ip&&(_d==null||_d(),mo(fn.current),sn&&(Xr==null||Xr()),rn&&rn())};return jsxRuntimeExports.jsx(PresenceChild,{isPresent:np,initial:!hn.current||nn?void 0:!1,custom:np?void 0:st,presenceAffectsLayout:on,mode:an,onExitComplete:np?void 0:rp,children:tp},ep)})})},noop$3=Mt=>Mt;let invariant$1=noop$3;function memo(Mt){let st;return()=>(st===void 0&&(st=Mt()),st)}const progress=(Mt,st,nn)=>{const rn=st-Mt;return rn===0?1:(nn-Mt)/rn},secondsToMilliseconds=Mt=>Mt*1e3,millisecondsToSeconds=Mt=>Mt/1e3,MotionGlobalConfig={skipAnimations:!1,useManualTiming:!1};function createRenderStep(Mt){let st=new Set,nn=new Set,rn=!1,on=!1;const an=new WeakSet;let sn={delta:0,timestamp:0,isProcessing:!1};function un(to){an.has(to)&&(Xr.schedule(to),Mt()),to(sn)}const Xr={schedule:(to,uo=!1,hn=!1)=>{const co=hn&&rn?st:nn;return uo&&an.add(to),co.has(to)||co.add(to),to},cancel:to=>{nn.delete(to),an.delete(to)},process:to=>{if(sn=to,rn){on=!0;return}rn=!0,[st,nn]=[nn,st],st.forEach(un),st.clear(),rn=!1,on&&(on=!1,Xr.process(to))}};return Xr}const stepsOrder=["read","resolveKeyframes","update","preRender","render","postRender"],maxElapsed=40;function createRenderBatcher(Mt,st){let nn=!1,rn=!0;const on={delta:0,timestamp:0,isProcessing:!1},an=()=>nn=!0,sn=stepsOrder.reduce((mo,Uo)=>(mo[Uo]=createRenderStep(an),mo),{}),{read:un,resolveKeyframes:Xr,update:to,preRender:uo,render:hn,postRender:fn}=sn,co=()=>{const mo=performance.now();nn=!1,on.delta=rn?1e3/60:Math.max(Math.min(mo-on.timestamp,maxElapsed),1),on.timestamp=mo,on.isProcessing=!0,un.process(on),Xr.process(on),to.process(on),uo.process(on),hn.process(on),fn.process(on),on.isProcessing=!1,nn&&st&&(rn=!1,Mt(co))},lo=()=>{nn=!0,rn=!0,on.isProcessing||Mt(co)};return{schedule:stepsOrder.reduce((mo,Uo)=>{const _d=sn[Uo];return mo[Uo]=(tp,ep=!1,np=!1)=>(nn||lo(),_d.schedule(tp,ep,np)),mo},{}),cancel:mo=>{for(let Uo=0;Uo<stepsOrder.length;Uo++)sn[stepsOrder[Uo]].cancel(mo)},state:on,steps:sn}}const{schedule:frame,cancel:cancelFrame,state:frameData,steps:frameSteps}=createRenderBatcher(typeof requestAnimationFrame<"u"?requestAnimationFrame:noop$3,!0),LazyContext=reactExports.createContext({strict:!1}),featureProps={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},featureDefinitions={};for(const Mt in featureProps)featureDefinitions[Mt]={isEnabled:st=>featureProps[Mt].some(nn=>!!st[nn])};function loadFeatures(Mt){for(const st in Mt)featureDefinitions[st]={...featureDefinitions[st],...Mt[st]}}const validMotionProps=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function isValidMotionProp(Mt){return Mt.startsWith("while")||Mt.startsWith("drag")&&Mt!=="draggable"||Mt.startsWith("layout")||Mt.startsWith("onTap")||Mt.startsWith("onPan")||Mt.startsWith("onLayout")||validMotionProps.has(Mt)}let shouldForward=Mt=>!isValidMotionProp(Mt);function loadExternalIsValidProp(Mt){Mt&&(shouldForward=st=>st.startsWith("on")?!isValidMotionProp(st):Mt(st))}try{loadExternalIsValidProp(require("@emotion/is-prop-valid").default)}catch{}function filterProps$1(Mt,st,nn){const rn={};for(const on in Mt)on==="values"&&typeof Mt.values=="object"||(shouldForward(on)||nn===!0&&isValidMotionProp(on)||!st&&!isValidMotionProp(on)||Mt.draggable&&on.startsWith("onDrag"))&&(rn[on]=Mt[on]);return rn}function createDOMMotionComponentProxy(Mt){if(typeof Proxy>"u")return Mt;const st=new Map,nn=(...rn)=>Mt(...rn);return new Proxy(nn,{get:(rn,on)=>on==="create"?Mt:(st.has(on)||st.set(on,Mt(on)),st.get(on))})}const MotionContext=reactExports.createContext({});function isVariantLabel(Mt){return typeof Mt=="string"||Array.isArray(Mt)}function isAnimationControls(Mt){return Mt!==null&&typeof Mt=="object"&&typeof Mt.start=="function"}const variantPriorityOrder=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],variantProps=["initial",...variantPriorityOrder];function isControllingVariants(Mt){return isAnimationControls(Mt.animate)||variantProps.some(st=>isVariantLabel(Mt[st]))}function isVariantNode(Mt){return!!(isControllingVariants(Mt)||Mt.variants)}function getCurrentTreeVariants(Mt,st){if(isControllingVariants(Mt)){const{initial:nn,animate:rn}=Mt;return{initial:nn===!1||isVariantLabel(nn)?nn:void 0,animate:isVariantLabel(rn)?rn:void 0}}return Mt.inherit!==!1?st:{}}function useCreateMotionContext(Mt){const{initial:st,animate:nn}=getCurrentTreeVariants(Mt,reactExports.useContext(MotionContext));return reactExports.useMemo(()=>({initial:st,animate:nn}),[variantLabelsAsDependency(st),variantLabelsAsDependency(nn)])}function variantLabelsAsDependency(Mt){return Array.isArray(Mt)?Mt.join(" "):Mt}const motionComponentSymbol=Symbol.for("motionComponentSymbol");function isRefObject(Mt){return Mt&&typeof Mt=="object"&&Object.prototype.hasOwnProperty.call(Mt,"current")}function useMotionRef(Mt,st,nn){return reactExports.useCallback(rn=>{rn&&Mt.onMount&&Mt.onMount(rn),st&&(rn?st.mount(rn):st.unmount()),nn&&(typeof nn=="function"?nn(rn):isRefObject(nn)&&(nn.current=rn))},[st])}const camelToDash=Mt=>Mt.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),optimizedAppearDataId="framerAppearId",optimizedAppearDataAttribute="data-"+camelToDash(optimizedAppearDataId),{schedule:microtask,cancel:cancelMicrotask}=createRenderBatcher(queueMicrotask,!1),SwitchLayoutGroupContext=reactExports.createContext({});function useVisualElement(Mt,st,nn,rn,on){var an,sn;const{visualElement:un}=reactExports.useContext(MotionContext),Xr=reactExports.useContext(LazyContext),to=reactExports.useContext(PresenceContext),uo=reactExports.useContext(MotionConfigContext).reducedMotion,hn=reactExports.useRef(null);rn=rn||Xr.renderer,!hn.current&&rn&&(hn.current=rn(Mt,{visualState:st,parent:un,props:nn,presenceContext:to,blockInitialAnimation:to?to.initial===!1:!1,reducedMotionConfig:uo}));const fn=hn.current,co=reactExports.useContext(SwitchLayoutGroupContext);fn&&!fn.projection&&on&&(fn.type==="html"||fn.type==="svg")&&createProjectionNode$1(hn.current,nn,on,co);const lo=reactExports.useRef(!1);reactExports.useInsertionEffect(()=>{fn&&lo.current&&fn.update(nn,to)});const fo=nn[optimizedAppearDataAttribute],ho=reactExports.useRef(!!fo&&!(!((an=window.MotionHandoffIsComplete)===null||an===void 0)&&an.call(window,fo))&&((sn=window.MotionHasOptimisedAnimation)===null||sn===void 0?void 0:sn.call(window,fo)));return useIsomorphicLayoutEffect$1(()=>{fn&&(lo.current=!0,window.MotionIsMounted=!0,fn.updateFeatures(),microtask.render(fn.render),ho.current&&fn.animationState&&fn.animationState.animateChanges())}),reactExports.useEffect(()=>{fn&&(!ho.current&&fn.animationState&&fn.animationState.animateChanges(),ho.current&&(queueMicrotask(()=>{var mo;(mo=window.MotionHandoffMarkAsComplete)===null||mo===void 0||mo.call(window,fo)}),ho.current=!1))}),fn}function createProjectionNode$1(Mt,st,nn,rn){const{layoutId:on,layout:an,drag:sn,dragConstraints:un,layoutScroll:Xr,layoutRoot:to}=st;Mt.projection=new nn(Mt.latestValues,st["data-framer-portal-id"]?void 0:getClosestProjectingNode(Mt.parent)),Mt.projection.setOptions({layoutId:on,layout:an,alwaysMeasureLayout:!!sn||un&&isRefObject(un),visualElement:Mt,animationType:typeof an=="string"?an:"both",initialPromotionConfig:rn,layoutScroll:Xr,layoutRoot:to})}function getClosestProjectingNode(Mt){if(Mt)return Mt.options.allowProjection!==!1?Mt.projection:getClosestProjectingNode(Mt.parent)}function createRendererMotionComponent({preloadedFeatures:Mt,createVisualElement:st,useRender:nn,useVisualState:rn,Component:on}){var an,sn;Mt&&loadFeatures(Mt);function un(to,uo){let hn;const fn={...reactExports.useContext(MotionConfigContext),...to,layoutId:useLayoutId(to)},{isStatic:co}=fn,lo=useCreateMotionContext(to),fo=rn(to,co);if(!co&&isBrowser$1){useStrictMode();const ho=getProjectionFunctionality(fn);hn=ho.MeasureLayout,lo.visualElement=useVisualElement(on,fo,fn,st,ho.ProjectionNode)}return jsxRuntimeExports.jsxs(MotionContext.Provider,{value:lo,children:[hn&&lo.visualElement?jsxRuntimeExports.jsx(hn,{visualElement:lo.visualElement,...fn}):null,nn(on,to,useMotionRef(fo,lo.visualElement,uo),fo,co,lo.visualElement)]})}un.displayName=`motion.${typeof on=="string"?on:`create(${(sn=(an=on.displayName)!==null&&an!==void 0?an:on.name)!==null&&sn!==void 0?sn:""})`}`;const Xr=reactExports.forwardRef(un);return Xr[motionComponentSymbol]=on,Xr}function useLayoutId({layoutId:Mt}){const st=reactExports.useContext(LayoutGroupContext).id;return st&&Mt!==void 0?st+"-"+Mt:Mt}function useStrictMode(Mt,st){reactExports.useContext(LazyContext).strict}function getProjectionFunctionality(Mt){const{drag:st,layout:nn}=featureDefinitions;if(!st&&!nn)return{};const rn={...st,...nn};return{MeasureLayout:st!=null&&st.isEnabled(Mt)||nn!=null&&nn.isEnabled(Mt)?rn.MeasureLayout:void 0,ProjectionNode:rn.ProjectionNode}}const lowercaseSVGElements=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function isSVGComponent(Mt){return typeof Mt!="string"||Mt.includes("-")?!1:!!(lowercaseSVGElements.indexOf(Mt)>-1||/[A-Z]/u.test(Mt))}function getValueState(Mt){const st=[{},{}];return Mt==null||Mt.values.forEach((nn,rn)=>{st[0][rn]=nn.get(),st[1][rn]=nn.getVelocity()}),st}function resolveVariantFromProps(Mt,st,nn,rn){if(typeof st=="function"){const[on,an]=getValueState(rn);st=st(nn!==void 0?nn:Mt.custom,on,an)}if(typeof st=="string"&&(st=Mt.variants&&Mt.variants[st]),typeof st=="function"){const[on,an]=getValueState(rn);st=st(nn!==void 0?nn:Mt.custom,on,an)}return st}const isKeyframesTarget=Mt=>Array.isArray(Mt),isCustomValue=Mt=>!!(Mt&&typeof Mt=="object"&&Mt.mix&&Mt.toValue),resolveFinalValueInKeyframes=Mt=>isKeyframesTarget(Mt)?Mt[Mt.length-1]||0:Mt,isMotionValue=Mt=>!!(Mt&&Mt.getVelocity);function resolveMotionValue(Mt){const st=isMotionValue(Mt)?Mt.get():Mt;return isCustomValue(st)?st.toValue():st}function makeState({scrapeMotionValuesFromProps:Mt,createRenderState:st,onUpdate:nn},rn,on,an){const sn={latestValues:makeLatestValues(rn,on,an,Mt),renderState:st()};return nn&&(sn.onMount=un=>nn({props:rn,current:un,...sn}),sn.onUpdate=un=>nn(un)),sn}const makeUseVisualState=Mt=>(st,nn)=>{const rn=reactExports.useContext(MotionContext),on=reactExports.useContext(PresenceContext),an=()=>makeState(Mt,st,rn,on);return nn?an():useConstant(an)};function makeLatestValues(Mt,st,nn,rn){const on={},an=rn(Mt,{});for(const fn in an)on[fn]=resolveMotionValue(an[fn]);let{initial:sn,animate:un}=Mt;const Xr=isControllingVariants(Mt),to=isVariantNode(Mt);st&&to&&!Xr&&Mt.inherit!==!1&&(sn===void 0&&(sn=st.initial),un===void 0&&(un=st.animate));let uo=nn?nn.initial===!1:!1;uo=uo||sn===!1;const hn=uo?un:sn;if(hn&&typeof hn!="boolean"&&!isAnimationControls(hn)){const fn=Array.isArray(hn)?hn:[hn];for(let co=0;co<fn.length;co++){const lo=resolveVariantFromProps(Mt,fn[co]);if(lo){const{transitionEnd:fo,transition:ho,...mo}=lo;for(const Uo in mo){let _d=mo[Uo];if(Array.isArray(_d)){const tp=uo?_d.length-1:0;_d=_d[tp]}_d!==null&&(on[Uo]=_d)}for(const Uo in fo)on[Uo]=fo[Uo]}}}return on}const transformPropOrder=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],transformProps=new Set(transformPropOrder),checkStringStartsWith=Mt=>st=>typeof st=="string"&&st.startsWith(Mt),isCSSVariableName=checkStringStartsWith("--"),startsAsVariableToken=checkStringStartsWith("var(--"),isCSSVariableToken=Mt=>startsAsVariableToken(Mt)?singleCssVariableRegex.test(Mt.split("/*")[0].trim()):!1,singleCssVariableRegex=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,getValueAsType=(Mt,st)=>st&&typeof Mt=="number"?st.transform(Mt):Mt,clamp$2=(Mt,st,nn)=>nn>st?st:nn<Mt?Mt:nn,number$3={test:Mt=>typeof Mt=="number",parse:parseFloat,transform:Mt=>Mt},alpha$1={...number$3,transform:Mt=>clamp$2(0,1,Mt)},scale$1={...number$3,default:1},createUnitType=Mt=>({test:st=>typeof st=="string"&&st.endsWith(Mt)&&st.split(" ").length===1,parse:parseFloat,transform:st=>`${st}${Mt}`}),degrees=createUnitType("deg"),percent=createUnitType("%"),px=createUnitType("px"),vh$1=createUnitType("vh"),vw=createUnitType("vw"),progressPercentage={...percent,parse:Mt=>percent.parse(Mt)/100,transform:Mt=>percent.transform(Mt*100)},browserNumberValueTypes={borderWidth:px,borderTopWidth:px,borderRightWidth:px,borderBottomWidth:px,borderLeftWidth:px,borderRadius:px,radius:px,borderTopLeftRadius:px,borderTopRightRadius:px,borderBottomRightRadius:px,borderBottomLeftRadius:px,width:px,maxWidth:px,height:px,maxHeight:px,top:px,right:px,bottom:px,left:px,padding:px,paddingTop:px,paddingRight:px,paddingBottom:px,paddingLeft:px,margin:px,marginTop:px,marginRight:px,marginBottom:px,marginLeft:px,backgroundPositionX:px,backgroundPositionY:px},transformValueTypes={rotate:degrees,rotateX:degrees,rotateY:degrees,rotateZ:degrees,scale:scale$1,scaleX:scale$1,scaleY:scale$1,scaleZ:scale$1,skew:degrees,skewX:degrees,skewY:degrees,distance:px,translateX:px,translateY:px,translateZ:px,x:px,y:px,z:px,perspective:px,transformPerspective:px,opacity:alpha$1,originX:progressPercentage,originY:progressPercentage,originZ:px},int={...number$3,transform:Math.round},numberValueTypes={...browserNumberValueTypes,...transformValueTypes,zIndex:int,size:px,fillOpacity:alpha$1,strokeOpacity:alpha$1,numOctaves:int},translateAlias={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},numTransforms=transformPropOrder.length;function buildTransform(Mt,st,nn){let rn="",on=!0;for(let an=0;an<numTransforms;an++){const sn=transformPropOrder[an],un=Mt[sn];if(un===void 0)continue;let Xr=!0;if(typeof un=="number"?Xr=un===(sn.startsWith("scale")?1:0):Xr=parseFloat(un)===0,!Xr||nn){const to=getValueAsType(un,numberValueTypes[sn]);if(!Xr){on=!1;const uo=translateAlias[sn]||sn;rn+=`${uo}(${to}) `}nn&&(st[sn]=to)}}return rn=rn.trim(),nn?rn=nn(st,on?"":rn):on&&(rn="none"),rn}function buildHTMLStyles(Mt,st,nn){const{style:rn,vars:on,transformOrigin:an}=Mt;let sn=!1,un=!1;for(const Xr in st){const to=st[Xr];if(transformProps.has(Xr)){sn=!0;continue}else if(isCSSVariableName(Xr)){on[Xr]=to;continue}else{const uo=getValueAsType(to,numberValueTypes[Xr]);Xr.startsWith("origin")?(un=!0,an[Xr]=uo):rn[Xr]=uo}}if(st.transform||(sn||nn?rn.transform=buildTransform(st,Mt.transform,nn):rn.transform&&(rn.transform="none")),un){const{originX:Xr="50%",originY:to="50%",originZ:uo=0}=an;rn.transformOrigin=`${Xr} ${to} ${uo}`}}const dashKeys={offset:"stroke-dashoffset",array:"stroke-dasharray"},camelKeys={offset:"strokeDashoffset",array:"strokeDasharray"};function buildSVGPath(Mt,st,nn=1,rn=0,on=!0){Mt.pathLength=1;const an=on?dashKeys:camelKeys;Mt[an.offset]=px.transform(-rn);const sn=px.transform(st),un=px.transform(nn);Mt[an.array]=`${sn} ${un}`}function calcOrigin$1(Mt,st,nn){return typeof Mt=="string"?Mt:px.transform(st+nn*Mt)}function calcSVGTransformOrigin(Mt,st,nn){const rn=calcOrigin$1(st,Mt.x,Mt.width),on=calcOrigin$1(nn,Mt.y,Mt.height);return`${rn} ${on}`}function buildSVGAttrs(Mt,{attrX:st,attrY:nn,attrScale:rn,originX:on,originY:an,pathLength:sn,pathSpacing:un=1,pathOffset:Xr=0,...to},uo,hn){if(buildHTMLStyles(Mt,to,hn),uo){Mt.style.viewBox&&(Mt.attrs.viewBox=Mt.style.viewBox);return}Mt.attrs=Mt.style,Mt.style={};const{attrs:fn,style:co,dimensions:lo}=Mt;fn.transform&&(lo&&(co.transform=fn.transform),delete fn.transform),lo&&(on!==void 0||an!==void 0||co.transform)&&(co.transformOrigin=calcSVGTransformOrigin(lo,on!==void 0?on:.5,an!==void 0?an:.5)),st!==void 0&&(fn.x=st),nn!==void 0&&(fn.y=nn),rn!==void 0&&(fn.scale=rn),sn!==void 0&&buildSVGPath(fn,sn,un,Xr,!1)}const createHtmlRenderState=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),createSvgRenderState=()=>({...createHtmlRenderState(),attrs:{}}),isSVGTag=Mt=>typeof Mt=="string"&&Mt.toLowerCase()==="svg";function renderHTML(Mt,{style:st,vars:nn},rn,on){Object.assign(Mt.style,st,on&&on.getProjectionStyles(rn));for(const an in nn)Mt.style.setProperty(an,nn[an])}const camelCaseAttributes=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function renderSVG(Mt,st,nn,rn){renderHTML(Mt,st,void 0,rn);for(const on in st.attrs)Mt.setAttribute(camelCaseAttributes.has(on)?on:camelToDash(on),st.attrs[on])}const scaleCorrectors={};function addScaleCorrector(Mt){Object.assign(scaleCorrectors,Mt)}function isForcedMotionValue(Mt,{layout:st,layoutId:nn}){return transformProps.has(Mt)||Mt.startsWith("origin")||(st||nn!==void 0)&&(!!scaleCorrectors[Mt]||Mt==="opacity")}function scrapeMotionValuesFromProps$1(Mt,st,nn){var rn;const{style:on}=Mt,an={};for(const sn in on)(isMotionValue(on[sn])||st.style&&isMotionValue(st.style[sn])||isForcedMotionValue(sn,Mt)||((rn=nn==null?void 0:nn.getValue(sn))===null||rn===void 0?void 0:rn.liveStyle)!==void 0)&&(an[sn]=on[sn]);return an}function scrapeMotionValuesFromProps(Mt,st,nn){const rn=scrapeMotionValuesFromProps$1(Mt,st,nn);for(const on in Mt)if(isMotionValue(Mt[on])||isMotionValue(st[on])){const an=transformPropOrder.indexOf(on)!==-1?"attr"+on.charAt(0).toUpperCase()+on.substring(1):on;rn[an]=Mt[on]}return rn}function updateSVGDimensions(Mt,st){try{st.dimensions=typeof Mt.getBBox=="function"?Mt.getBBox():Mt.getBoundingClientRect()}catch{st.dimensions={x:0,y:0,width:0,height:0}}}const layoutProps=["x","y","width","height","cx","cy","r"],svgMotionConfig={useVisualState:makeUseVisualState({scrapeMotionValuesFromProps,createRenderState:createSvgRenderState,onUpdate:({props:Mt,prevProps:st,current:nn,renderState:rn,latestValues:on})=>{if(!nn)return;let an=!!Mt.drag;if(!an){for(const un in on)if(transformProps.has(un)){an=!0;break}}if(!an)return;let sn=!st;if(st)for(let un=0;un<layoutProps.length;un++){const Xr=layoutProps[un];Mt[Xr]!==st[Xr]&&(sn=!0)}sn&&frame.read(()=>{updateSVGDimensions(nn,rn),frame.render(()=>{buildSVGAttrs(rn,on,isSVGTag(nn.tagName),Mt.transformTemplate),renderSVG(nn,rn)})})}})},htmlMotionConfig={useVisualState:makeUseVisualState({scrapeMotionValuesFromProps:scrapeMotionValuesFromProps$1,createRenderState:createHtmlRenderState})};function copyRawValuesOnly(Mt,st,nn){for(const rn in st)!isMotionValue(st[rn])&&!isForcedMotionValue(rn,nn)&&(Mt[rn]=st[rn])}function useInitialMotionValues({transformTemplate:Mt},st){return reactExports.useMemo(()=>{const nn=createHtmlRenderState();return buildHTMLStyles(nn,st,Mt),Object.assign({},nn.vars,nn.style)},[st])}function useStyle(Mt,st){const nn=Mt.style||{},rn={};return copyRawValuesOnly(rn,nn,Mt),Object.assign(rn,useInitialMotionValues(Mt,st)),rn}function useHTMLProps(Mt,st){const nn={},rn=useStyle(Mt,st);return Mt.drag&&Mt.dragListener!==!1&&(nn.draggable=!1,rn.userSelect=rn.WebkitUserSelect=rn.WebkitTouchCallout="none",rn.touchAction=Mt.drag===!0?"none":`pan-${Mt.drag==="x"?"y":"x"}`),Mt.tabIndex===void 0&&(Mt.onTap||Mt.onTapStart||Mt.whileTap)&&(nn.tabIndex=0),nn.style=rn,nn}function useSVGProps(Mt,st,nn,rn){const on=reactExports.useMemo(()=>{const an=createSvgRenderState();return buildSVGAttrs(an,st,isSVGTag(rn),Mt.transformTemplate),{...an.attrs,style:{...an.style}}},[st]);if(Mt.style){const an={};copyRawValuesOnly(an,Mt.style,Mt),on.style={...an,...on.style}}return on}function createUseRender(Mt=!1){return(nn,rn,on,{latestValues:an},sn)=>{const Xr=(isSVGComponent(nn)?useSVGProps:useHTMLProps)(rn,an,sn,nn),to=filterProps$1(rn,typeof nn=="string",Mt),uo=nn!==reactExports.Fragment?{...to,...Xr,ref:on}:{},{children:hn}=rn,fn=reactExports.useMemo(()=>isMotionValue(hn)?hn.get():hn,[hn]);return reactExports.createElement(nn,{...uo,children:fn})}}function createMotionComponentFactory(Mt,st){return function(rn,{forwardMotionProps:on}={forwardMotionProps:!1}){const sn={...isSVGComponent(rn)?svgMotionConfig:htmlMotionConfig,preloadedFeatures:Mt,useRender:createUseRender(on),createVisualElement:st,Component:rn};return createRendererMotionComponent(sn)}}function shallowCompare(Mt,st){if(!Array.isArray(st))return!1;const nn=st.length;if(nn!==Mt.length)return!1;for(let rn=0;rn<nn;rn++)if(st[rn]!==Mt[rn])return!1;return!0}function resolveVariant(Mt,st,nn){const rn=Mt.getProps();return resolveVariantFromProps(rn,st,nn!==void 0?nn:rn.custom,Mt)}const supportsScrollTimeline=memo(()=>window.ScrollTimeline!==void 0);class BaseGroupPlaybackControls{constructor(st){this.stop=()=>this.runAll("stop"),this.animations=st.filter(Boolean)}get finished(){return Promise.all(this.animations.map(st=>"finished"in st?st.finished:st))}getAll(st){return this.animations[0][st]}setAll(st,nn){for(let rn=0;rn<this.animations.length;rn++)this.animations[rn][st]=nn}attachTimeline(st,nn){const rn=this.animations.map(on=>{if(supportsScrollTimeline()&&on.attachTimeline)return on.attachTimeline(st);if(typeof nn=="function")return nn(on)});return()=>{rn.forEach((on,an)=>{on&&on(),this.animations[an].stop()})}}get time(){return this.getAll("time")}set time(st){this.setAll("time",st)}get speed(){return this.getAll("speed")}set speed(st){this.setAll("speed",st)}get startTime(){return this.getAll("startTime")}get duration(){let st=0;for(let nn=0;nn<this.animations.length;nn++)st=Math.max(st,this.animations[nn].duration);return st}runAll(st){this.animations.forEach(nn=>nn[st]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class GroupPlaybackControls extends BaseGroupPlaybackControls{then(st,nn){return Promise.all(this.animations).then(st).catch(nn)}}function getValueTransition(Mt,st){return Mt?Mt[st]||Mt.default||Mt:void 0}const maxGeneratorDuration=2e4;function calcGeneratorDuration(Mt){let st=0;const nn=50;let rn=Mt.next(st);for(;!rn.done&&st<maxGeneratorDuration;)st+=nn,rn=Mt.next(st);return st>=maxGeneratorDuration?1/0:st}function isGenerator(Mt){return typeof Mt=="function"}function attachTimeline(Mt,st){Mt.timeline=st,Mt.onfinish=null}const isBezierDefinition=Mt=>Array.isArray(Mt)&&typeof Mt[0]=="number",supportsFlags={linearEasing:void 0};function memoSupports(Mt,st){const nn=memo(Mt);return()=>{var rn;return(rn=supportsFlags[st])!==null&&rn!==void 0?rn:nn()}}const supportsLinearEasing=memoSupports(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),generateLinearEasing=(Mt,st,nn=10)=>{let rn="";const on=Math.max(Math.round(st/nn),2);for(let an=0;an<on;an++)rn+=Mt(progress(0,on-1,an))+", ";return`linear(${rn.substring(0,rn.length-2)})`};function isWaapiSupportedEasing(Mt){return!!(typeof Mt=="function"&&supportsLinearEasing()||!Mt||typeof Mt=="string"&&(Mt in supportedWaapiEasing||supportsLinearEasing())||isBezierDefinition(Mt)||Array.isArray(Mt)&&Mt.every(isWaapiSupportedEasing))}const cubicBezierAsString=([Mt,st,nn,rn])=>`cubic-bezier(${Mt}, ${st}, ${nn}, ${rn})`,supportedWaapiEasing={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:cubicBezierAsString([0,.65,.55,1]),circOut:cubicBezierAsString([.55,0,1,.45]),backIn:cubicBezierAsString([.31,.01,.66,-.59]),backOut:cubicBezierAsString([.33,1.53,.69,.99])};function mapEasingToNativeEasing(Mt,st){if(Mt)return typeof Mt=="function"&&supportsLinearEasing()?generateLinearEasing(Mt,st):isBezierDefinition(Mt)?cubicBezierAsString(Mt):Array.isArray(Mt)?Mt.map(nn=>mapEasingToNativeEasing(nn,st)||supportedWaapiEasing.easeOut):supportedWaapiEasing[Mt]}const isDragging={x:!1,y:!1};function isDragActive(){return isDragging.x||isDragging.y}function resolveElements(Mt,st,nn){var rn;if(Mt instanceof Element)return[Mt];if(typeof Mt=="string"){let on=document;const an=(rn=void 0)!==null&&rn!==void 0?rn:on.querySelectorAll(Mt);return an?Array.from(an):[]}return Array.from(Mt)}function setupGesture(Mt,st){const nn=resolveElements(Mt),rn=new AbortController,on={passive:!0,...st,signal:rn.signal};return[nn,on,()=>rn.abort()]}function filterEvents$1(Mt){return st=>{st.pointerType==="touch"||isDragActive()||Mt(st)}}function hover(Mt,st,nn={}){const[rn,on,an]=setupGesture(Mt,nn),sn=filterEvents$1(un=>{const{target:Xr}=un,to=st(un);if(typeof to!="function"||!Xr)return;const uo=filterEvents$1(hn=>{to(hn),Xr.removeEventListener("pointerleave",uo)});Xr.addEventListener("pointerleave",uo,on)});return rn.forEach(un=>{un.addEventListener("pointerenter",sn,on)}),an}const isNodeOrChild=(Mt,st)=>st?Mt===st?!0:isNodeOrChild(Mt,st.parentElement):!1,isPrimaryPointer=Mt=>Mt.pointerType==="mouse"?typeof Mt.button!="number"||Mt.button<=0:Mt.isPrimary!==!1,focusableElements=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function isElementKeyboardAccessible(Mt){return focusableElements.has(Mt.tagName)||Mt.tabIndex!==-1}const isPressing=new WeakSet;function filterEvents(Mt){return st=>{st.key==="Enter"&&Mt(st)}}function firePointerEvent(Mt,st){Mt.dispatchEvent(new PointerEvent("pointer"+st,{isPrimary:!0,bubbles:!0}))}const enableKeyboardPress=(Mt,st)=>{const nn=Mt.currentTarget;if(!nn)return;const rn=filterEvents(()=>{if(isPressing.has(nn))return;firePointerEvent(nn,"down");const on=filterEvents(()=>{firePointerEvent(nn,"up")}),an=()=>firePointerEvent(nn,"cancel");nn.addEventListener("keyup",on,st),nn.addEventListener("blur",an,st)});nn.addEventListener("keydown",rn,st),nn.addEventListener("blur",()=>nn.removeEventListener("keydown",rn),st)};function isValidPressEvent(Mt){return isPrimaryPointer(Mt)&&!isDragActive()}function press(Mt,st,nn={}){const[rn,on,an]=setupGesture(Mt,nn),sn=un=>{const Xr=un.currentTarget;if(!isValidPressEvent(un)||isPressing.has(Xr))return;isPressing.add(Xr);const to=st(un),uo=(co,lo)=>{window.removeEventListener("pointerup",hn),window.removeEventListener("pointercancel",fn),!(!isValidPressEvent(co)||!isPressing.has(Xr))&&(isPressing.delete(Xr),typeof to=="function"&&to(co,{success:lo}))},hn=co=>{uo(co,nn.useGlobalTarget||isNodeOrChild(Xr,co.target))},fn=co=>{uo(co,!1)};window.addEventListener("pointerup",hn,on),window.addEventListener("pointercancel",fn,on)};return rn.forEach(un=>{!isElementKeyboardAccessible(un)&&un.getAttribute("tabindex")===null&&(un.tabIndex=0),(nn.useGlobalTarget?window:un).addEventListener("pointerdown",sn,on),un.addEventListener("focus",to=>enableKeyboardPress(to,on),on)}),an}function setDragLock(Mt){return Mt==="x"||Mt==="y"?isDragging[Mt]?null:(isDragging[Mt]=!0,()=>{isDragging[Mt]=!1}):isDragging.x||isDragging.y?null:(isDragging.x=isDragging.y=!0,()=>{isDragging.x=isDragging.y=!1})}const positionalKeys=new Set(["width","height","top","left","right","bottom",...transformPropOrder]);let now$2;function clearTime(){now$2=void 0}const time$1={now:()=>(now$2===void 0&&time$1.set(frameData.isProcessing||MotionGlobalConfig.useManualTiming?frameData.timestamp:performance.now()),now$2),set:Mt=>{now$2=Mt,queueMicrotask(clearTime)}};function addUniqueItem(Mt,st){Mt.indexOf(st)===-1&&Mt.push(st)}function removeItem(Mt,st){const nn=Mt.indexOf(st);nn>-1&&Mt.splice(nn,1)}class SubscriptionManager{constructor(){this.subscriptions=[]}add(st){return addUniqueItem(this.subscriptions,st),()=>removeItem(this.subscriptions,st)}notify(st,nn,rn){const on=this.subscriptions.length;if(on)if(on===1)this.subscriptions[0](st,nn,rn);else for(let an=0;an<on;an++){const sn=this.subscriptions[an];sn&&sn(st,nn,rn)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function velocityPerSecond(Mt,st){return st?Mt*(1e3/st):0}const MAX_VELOCITY_DELTA=30,isFloat$1=Mt=>!isNaN(parseFloat(Mt));class MotionValue{constructor(st,nn={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(rn,on=!0)=>{const an=time$1.now();this.updatedAt!==an&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(rn),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),on&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(st),this.owner=nn.owner}setCurrent(st){this.current=st,this.updatedAt=time$1.now(),this.canTrackVelocity===null&&st!==void 0&&(this.canTrackVelocity=isFloat$1(this.current))}setPrevFrameValue(st=this.current){this.prevFrameValue=st,this.prevUpdatedAt=this.updatedAt}onChange(st){return this.on("change",st)}on(st,nn){this.events[st]||(this.events[st]=new SubscriptionManager);const rn=this.events[st].add(nn);return st==="change"?()=>{rn(),frame.read(()=>{this.events.change.getSize()||this.stop()})}:rn}clearListeners(){for(const st in this.events)this.events[st].clear()}attach(st,nn){this.passiveEffect=st,this.stopPassiveEffect=nn}set(st,nn=!0){!nn||!this.passiveEffect?this.updateAndNotify(st,nn):this.passiveEffect(st,this.updateAndNotify)}setWithVelocity(st,nn,rn){this.set(nn),this.prev=void 0,this.prevFrameValue=st,this.prevUpdatedAt=this.updatedAt-rn}jump(st,nn=!0){this.updateAndNotify(st),this.prev=st,this.prevUpdatedAt=this.prevFrameValue=void 0,nn&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const st=time$1.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||st-this.updatedAt>MAX_VELOCITY_DELTA)return 0;const nn=Math.min(this.updatedAt-this.prevUpdatedAt,MAX_VELOCITY_DELTA);return velocityPerSecond(parseFloat(this.current)-parseFloat(this.prevFrameValue),nn)}start(st){return this.stop(),new Promise(nn=>{this.hasAnimated=!0,this.animation=st(nn),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function motionValue(Mt,st){return new MotionValue(Mt,st)}function setMotionValue(Mt,st,nn){Mt.hasValue(st)?Mt.getValue(st).set(nn):Mt.addValue(st,motionValue(nn))}function setTarget(Mt,st){const nn=resolveVariant(Mt,st);let{transitionEnd:rn={},transition:on={},...an}=nn||{};an={...an,...rn};for(const sn in an){const un=resolveFinalValueInKeyframes(an[sn]);setMotionValue(Mt,sn,un)}}function isWillChangeMotionValue(Mt){return!!(isMotionValue(Mt)&&Mt.add)}function addValueToWillChange(Mt,st){const nn=Mt.getValue("willChange");if(isWillChangeMotionValue(nn))return nn.add(st)}function getOptimisedAppearId(Mt){return Mt.props[optimizedAppearDataAttribute]}const calcBezier=(Mt,st,nn)=>(((1-3*nn+3*st)*Mt+(3*nn-6*st))*Mt+3*st)*Mt,subdivisionPrecision=1e-7,subdivisionMaxIterations=12;function binarySubdivide(Mt,st,nn,rn,on){let an,sn,un=0;do sn=st+(nn-st)/2,an=calcBezier(sn,rn,on)-Mt,an>0?nn=sn:st=sn;while(Math.abs(an)>subdivisionPrecision&&++un<subdivisionMaxIterations);return sn}function cubicBezier$1(Mt,st,nn,rn){if(Mt===st&&nn===rn)return noop$3;const on=an=>binarySubdivide(an,0,1,Mt,nn);return an=>an===0||an===1?an:calcBezier(on(an),st,rn)}const mirrorEasing=Mt=>st=>st<=.5?Mt(2*st)/2:(2-Mt(2*(1-st)))/2,reverseEasing=Mt=>st=>1-Mt(1-st),backOut=cubicBezier$1(.33,1.53,.69,.99),backIn=reverseEasing(backOut),backInOut=mirrorEasing(backIn),anticipate=Mt=>(Mt*=2)<1?.5*backIn(Mt):.5*(2-Math.pow(2,-10*(Mt-1))),circIn=Mt=>1-Math.sin(Math.acos(Mt)),circOut=reverseEasing(circIn),circInOut=mirrorEasing(circIn),isZeroValueString=Mt=>/^0[^.\s]+$/u.test(Mt);function isNone(Mt){return typeof Mt=="number"?Mt===0:Mt!==null?Mt==="none"||Mt==="0"||isZeroValueString(Mt):!0}const sanitize=Mt=>Math.round(Mt*1e5)/1e5,floatRegex=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function isNullish(Mt){return Mt==null}const singleColorRegex=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,isColorString=(Mt,st)=>nn=>!!(typeof nn=="string"&&singleColorRegex.test(nn)&&nn.startsWith(Mt)||st&&!isNullish(nn)&&Object.prototype.hasOwnProperty.call(nn,st)),splitColor=(Mt,st,nn)=>rn=>{if(typeof rn!="string")return rn;const[on,an,sn,un]=rn.match(floatRegex);return{[Mt]:parseFloat(on),[st]:parseFloat(an),[nn]:parseFloat(sn),alpha:un!==void 0?parseFloat(un):1}},clampRgbUnit=Mt=>clamp$2(0,255,Mt),rgbUnit={...number$3,transform:Mt=>Math.round(clampRgbUnit(Mt))},rgba$1={test:isColorString("rgb","red"),parse:splitColor("red","green","blue"),transform:({red:Mt,green:st,blue:nn,alpha:rn=1})=>"rgba("+rgbUnit.transform(Mt)+", "+rgbUnit.transform(st)+", "+rgbUnit.transform(nn)+", "+sanitize(alpha$1.transform(rn))+")"};function parseHex(Mt){let st="",nn="",rn="",on="";return Mt.length>5?(st=Mt.substring(1,3),nn=Mt.substring(3,5),rn=Mt.substring(5,7),on=Mt.substring(7,9)):(st=Mt.substring(1,2),nn=Mt.substring(2,3),rn=Mt.substring(3,4),on=Mt.substring(4,5),st+=st,nn+=nn,rn+=rn,on+=on),{red:parseInt(st,16),green:parseInt(nn,16),blue:parseInt(rn,16),alpha:on?parseInt(on,16)/255:1}}const hex$1={test:isColorString("#"),parse:parseHex,transform:rgba$1.transform},hsla$1={test:isColorString("hsl","hue"),parse:splitColor("hue","saturation","lightness"),transform:({hue:Mt,saturation:st,lightness:nn,alpha:rn=1})=>"hsla("+Math.round(Mt)+", "+percent.transform(sanitize(st))+", "+percent.transform(sanitize(nn))+", "+sanitize(alpha$1.transform(rn))+")"},color$1={test:Mt=>rgba$1.test(Mt)||hex$1.test(Mt)||hsla$1.test(Mt),parse:Mt=>rgba$1.test(Mt)?rgba$1.parse(Mt):hsla$1.test(Mt)?hsla$1.parse(Mt):hex$1.parse(Mt),transform:Mt=>typeof Mt=="string"?Mt:Mt.hasOwnProperty("red")?rgba$1.transform(Mt):hsla$1.transform(Mt)},colorRegex=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function test(Mt){var st,nn;return isNaN(Mt)&&typeof Mt=="string"&&(((st=Mt.match(floatRegex))===null||st===void 0?void 0:st.length)||0)+(((nn=Mt.match(colorRegex))===null||nn===void 0?void 0:nn.length)||0)>0}const NUMBER_TOKEN="number",COLOR_TOKEN="color",VAR_TOKEN="var",VAR_FUNCTION_TOKEN="var(",SPLIT_TOKEN="${}",complexRegex=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function analyseComplexValue(Mt){const st=Mt.toString(),nn=[],rn={color:[],number:[],var:[]},on=[];let an=0;const un=st.replace(complexRegex,Xr=>(color$1.test(Xr)?(rn.color.push(an),on.push(COLOR_TOKEN),nn.push(color$1.parse(Xr))):Xr.startsWith(VAR_FUNCTION_TOKEN)?(rn.var.push(an),on.push(VAR_TOKEN),nn.push(Xr)):(rn.number.push(an),on.push(NUMBER_TOKEN),nn.push(parseFloat(Xr))),++an,SPLIT_TOKEN)).split(SPLIT_TOKEN);return{values:nn,split:un,indexes:rn,types:on}}function parseComplexValue(Mt){return analyseComplexValue(Mt).values}function createTransformer(Mt){const{split:st,types:nn}=analyseComplexValue(Mt),rn=st.length;return on=>{let an="";for(let sn=0;sn<rn;sn++)if(an+=st[sn],on[sn]!==void 0){const un=nn[sn];un===NUMBER_TOKEN?an+=sanitize(on[sn]):un===COLOR_TOKEN?an+=color$1.transform(on[sn]):an+=on[sn]}return an}}const convertNumbersToZero=Mt=>typeof Mt=="number"?0:Mt;function getAnimatableNone$1(Mt){const st=parseComplexValue(Mt);return createTransformer(Mt)(st.map(convertNumbersToZero))}const complex={test,parse:parseComplexValue,createTransformer,getAnimatableNone:getAnimatableNone$1},maxDefaults=new Set(["brightness","contrast","saturate","opacity"]);function applyDefaultFilter(Mt){const[st,nn]=Mt.slice(0,-1).split("(");if(st==="drop-shadow")return Mt;const[rn]=nn.match(floatRegex)||[];if(!rn)return Mt;const on=nn.replace(rn,"");let an=maxDefaults.has(st)?1:0;return rn!==nn&&(an*=100),st+"("+an+on+")"}const functionRegex=/\b([a-z-]*)\(.*?\)/gu,filter={...complex,getAnimatableNone:Mt=>{const st=Mt.match(functionRegex);return st?st.map(applyDefaultFilter).join(" "):Mt}},defaultValueTypes={...numberValueTypes,color:color$1,backgroundColor:color$1,outlineColor:color$1,fill:color$1,stroke:color$1,borderColor:color$1,borderTopColor:color$1,borderRightColor:color$1,borderBottomColor:color$1,borderLeftColor:color$1,filter,WebkitFilter:filter},getDefaultValueType=Mt=>defaultValueTypes[Mt];function getAnimatableNone(Mt,st){let nn=getDefaultValueType(Mt);return nn!==filter&&(nn=complex),nn.getAnimatableNone?nn.getAnimatableNone(st):void 0}const invalidTemplates=new Set(["auto","none","0"]);function makeNoneKeyframesAnimatable(Mt,st,nn){let rn=0,on;for(;rn<Mt.length&&!on;){const an=Mt[rn];typeof an=="string"&&!invalidTemplates.has(an)&&analyseComplexValue(an).values.length&&(on=Mt[rn]),rn++}if(on&&nn)for(const an of st)Mt[an]=getAnimatableNone(nn,on)}const isNumOrPxType=Mt=>Mt===number$3||Mt===px,getPosFromMatrix=(Mt,st)=>parseFloat(Mt.split(", ")[st]),getTranslateFromMatrix=(Mt,st)=>(nn,{transform:rn})=>{if(rn==="none"||!rn)return 0;const on=rn.match(/^matrix3d\((.+)\)$/u);if(on)return getPosFromMatrix(on[1],st);{const an=rn.match(/^matrix\((.+)\)$/u);return an?getPosFromMatrix(an[1],Mt):0}},transformKeys=new Set(["x","y","z"]),nonTranslationalTransformKeys=transformPropOrder.filter(Mt=>!transformKeys.has(Mt));function removeNonTranslationalTransform(Mt){const st=[];return nonTranslationalTransformKeys.forEach(nn=>{const rn=Mt.getValue(nn);rn!==void 0&&(st.push([nn,rn.get()]),rn.set(nn.startsWith("scale")?1:0))}),st}const positionalValues={width:({x:Mt},{paddingLeft:st="0",paddingRight:nn="0"})=>Mt.max-Mt.min-parseFloat(st)-parseFloat(nn),height:({y:Mt},{paddingTop:st="0",paddingBottom:nn="0"})=>Mt.max-Mt.min-parseFloat(st)-parseFloat(nn),top:(Mt,{top:st})=>parseFloat(st),left:(Mt,{left:st})=>parseFloat(st),bottom:({y:Mt},{top:st})=>parseFloat(st)+(Mt.max-Mt.min),right:({x:Mt},{left:st})=>parseFloat(st)+(Mt.max-Mt.min),x:getTranslateFromMatrix(4,13),y:getTranslateFromMatrix(5,14)};positionalValues.translateX=positionalValues.x;positionalValues.translateY=positionalValues.y;const toResolve=new Set;let isScheduled=!1,anyNeedsMeasurement=!1;function measureAllKeyframes(){if(anyNeedsMeasurement){const Mt=Array.from(toResolve).filter(rn=>rn.needsMeasurement),st=new Set(Mt.map(rn=>rn.element)),nn=new Map;st.forEach(rn=>{const on=removeNonTranslationalTransform(rn);on.length&&(nn.set(rn,on),rn.render())}),Mt.forEach(rn=>rn.measureInitialState()),st.forEach(rn=>{rn.render();const on=nn.get(rn);on&&on.forEach(([an,sn])=>{var un;(un=rn.getValue(an))===null||un===void 0||un.set(sn)})}),Mt.forEach(rn=>rn.measureEndState()),Mt.forEach(rn=>{rn.suspendedScrollY!==void 0&&window.scrollTo(0,rn.suspendedScrollY)})}anyNeedsMeasurement=!1,isScheduled=!1,toResolve.forEach(Mt=>Mt.complete()),toResolve.clear()}function readAllKeyframes(){toResolve.forEach(Mt=>{Mt.readKeyframes(),Mt.needsMeasurement&&(anyNeedsMeasurement=!0)})}function flushKeyframeResolvers(){readAllKeyframes(),measureAllKeyframes()}class KeyframeResolver{constructor(st,nn,rn,on,an,sn=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...st],this.onComplete=nn,this.name=rn,this.motionValue=on,this.element=an,this.isAsync=sn}scheduleResolve(){this.isScheduled=!0,this.isAsync?(toResolve.add(this),isScheduled||(isScheduled=!0,frame.read(readAllKeyframes),frame.resolveKeyframes(measureAllKeyframes))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:st,name:nn,element:rn,motionValue:on}=this;for(let an=0;an<st.length;an++)if(st[an]===null)if(an===0){const sn=on==null?void 0:on.get(),un=st[st.length-1];if(sn!==void 0)st[0]=sn;else if(rn&&nn){const Xr=rn.readValue(nn,un);Xr!=null&&(st[0]=Xr)}st[0]===void 0&&(st[0]=un),on&&sn===void 0&&on.set(st[0])}else st[an]=st[an-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),toResolve.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,toResolve.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const isNumericalString=Mt=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(Mt),splitCSSVariableRegex=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function parseCSSVariable(Mt){const st=splitCSSVariableRegex.exec(Mt);if(!st)return[,];const[,nn,rn,on]=st;return[`--${nn??rn}`,on]}function getVariableValue(Mt,st,nn=1){const[rn,on]=parseCSSVariable(Mt);if(!rn)return;const an=window.getComputedStyle(st).getPropertyValue(rn);if(an){const sn=an.trim();return isNumericalString(sn)?parseFloat(sn):sn}return isCSSVariableToken(on)?getVariableValue(on,st,nn+1):on}const testValueType=Mt=>st=>st.test(Mt),auto={test:Mt=>Mt==="auto",parse:Mt=>Mt},dimensionValueTypes=[number$3,px,percent,degrees,vw,vh$1,auto],findDimensionValueType=Mt=>dimensionValueTypes.find(testValueType(Mt));class DOMKeyframesResolver extends KeyframeResolver{constructor(st,nn,rn,on,an){super(st,nn,rn,on,an,!0)}readKeyframes(){const{unresolvedKeyframes:st,element:nn,name:rn}=this;if(!nn||!nn.current)return;super.readKeyframes();for(let Xr=0;Xr<st.length;Xr++){let to=st[Xr];if(typeof to=="string"&&(to=to.trim(),isCSSVariableToken(to))){const uo=getVariableValue(to,nn.current);uo!==void 0&&(st[Xr]=uo),Xr===st.length-1&&(this.finalKeyframe=to)}}if(this.resolveNoneKeyframes(),!positionalKeys.has(rn)||st.length!==2)return;const[on,an]=st,sn=findDimensionValueType(on),un=findDimensionValueType(an);if(sn!==un)if(isNumOrPxType(sn)&&isNumOrPxType(un))for(let Xr=0;Xr<st.length;Xr++){const to=st[Xr];typeof to=="string"&&(st[Xr]=parseFloat(to))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:st,name:nn}=this,rn=[];for(let on=0;on<st.length;on++)isNone(st[on])&&rn.push(on);rn.length&&makeNoneKeyframesAnimatable(st,rn,nn)}measureInitialState(){const{element:st,unresolvedKeyframes:nn,name:rn}=this;if(!st||!st.current)return;rn==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=positionalValues[rn](st.measureViewportBox(),window.getComputedStyle(st.current)),nn[0]=this.measuredOrigin;const on=nn[nn.length-1];on!==void 0&&st.getValue(rn,on).jump(on,!1)}measureEndState(){var st;const{element:nn,name:rn,unresolvedKeyframes:on}=this;if(!nn||!nn.current)return;const an=nn.getValue(rn);an&&an.jump(this.measuredOrigin,!1);const sn=on.length-1,un=on[sn];on[sn]=positionalValues[rn](nn.measureViewportBox(),window.getComputedStyle(nn.current)),un!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=un),!((st=this.removedTransforms)===null||st===void 0)&&st.length&&this.removedTransforms.forEach(([Xr,to])=>{nn.getValue(Xr).set(to)}),this.resolveNoneKeyframes()}}const isAnimatable=(Mt,st)=>st==="zIndex"?!1:!!(typeof Mt=="number"||Array.isArray(Mt)||typeof Mt=="string"&&(complex.test(Mt)||Mt==="0")&&!Mt.startsWith("url("));function hasKeyframesChanged(Mt){const st=Mt[0];if(Mt.length===1)return!0;for(let nn=0;nn<Mt.length;nn++)if(Mt[nn]!==st)return!0}function canAnimate(Mt,st,nn,rn){const on=Mt[0];if(on===null)return!1;if(st==="display"||st==="visibility")return!0;const an=Mt[Mt.length-1],sn=isAnimatable(on,st),un=isAnimatable(an,st);return!sn||!un?!1:hasKeyframesChanged(Mt)||(nn==="spring"||isGenerator(nn))&&rn}const isNotNull$1=Mt=>Mt!==null;function getFinalKeyframe(Mt,{repeat:st,repeatType:nn="loop"},rn){const on=Mt.filter(isNotNull$1),an=st&&nn!=="loop"&&st%2===1?0:on.length-1;return!an||rn===void 0?on[an]:rn}const MAX_RESOLVE_DELAY=40;class BaseAnimation{constructor({autoplay:st=!0,delay:nn=0,type:rn="keyframes",repeat:on=0,repeatDelay:an=0,repeatType:sn="loop",...un}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=time$1.now(),this.options={autoplay:st,delay:nn,type:rn,repeat:on,repeatDelay:an,repeatType:sn,...un},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>MAX_RESOLVE_DELAY?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&flushKeyframeResolvers(),this._resolved}onKeyframesResolved(st,nn){this.resolvedAt=time$1.now(),this.hasAttemptedResolve=!0;const{name:rn,type:on,velocity:an,delay:sn,onComplete:un,onUpdate:Xr,isGenerator:to}=this.options;if(!to&&!canAnimate(st,rn,on,an))if(sn)this.options.duration=0;else{Xr&&Xr(getFinalKeyframe(st,this.options,nn)),un&&un(),this.resolveFinishedPromise();return}const uo=this.initPlayback(st,nn);uo!==!1&&(this._resolved={keyframes:st,finalKeyframe:nn,...uo},this.onPostResolved())}onPostResolved(){}then(st,nn){return this.currentFinishedPromise.then(st,nn)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(st=>{this.resolveFinishedPromise=st})}}const mixNumber$1=(Mt,st,nn)=>Mt+(st-Mt)*nn;function hueToRgb(Mt,st,nn){return nn<0&&(nn+=1),nn>1&&(nn-=1),nn<1/6?Mt+(st-Mt)*6*nn:nn<1/2?st:nn<2/3?Mt+(st-Mt)*(2/3-nn)*6:Mt}function hslaToRgba({hue:Mt,saturation:st,lightness:nn,alpha:rn}){Mt/=360,st/=100,nn/=100;let on=0,an=0,sn=0;if(!st)on=an=sn=nn;else{const un=nn<.5?nn*(1+st):nn+st-nn*st,Xr=2*nn-un;on=hueToRgb(Xr,un,Mt+1/3),an=hueToRgb(Xr,un,Mt),sn=hueToRgb(Xr,un,Mt-1/3)}return{red:Math.round(on*255),green:Math.round(an*255),blue:Math.round(sn*255),alpha:rn}}function mixImmediate(Mt,st){return nn=>nn>0?st:Mt}const mixLinearColor=(Mt,st,nn)=>{const rn=Mt*Mt,on=nn*(st*st-rn)+rn;return on<0?0:Math.sqrt(on)},colorTypes=[hex$1,rgba$1,hsla$1],getColorType=Mt=>colorTypes.find(st=>st.test(Mt));function asRGBA(Mt){const st=getColorType(Mt);if(!st)return!1;let nn=st.parse(Mt);return st===hsla$1&&(nn=hslaToRgba(nn)),nn}const mixColor=(Mt,st)=>{const nn=asRGBA(Mt),rn=asRGBA(st);if(!nn||!rn)return mixImmediate(Mt,st);const on={...nn};return an=>(on.red=mixLinearColor(nn.red,rn.red,an),on.green=mixLinearColor(nn.green,rn.green,an),on.blue=mixLinearColor(nn.blue,rn.blue,an),on.alpha=mixNumber$1(nn.alpha,rn.alpha,an),rgba$1.transform(on))},combineFunctions=(Mt,st)=>nn=>st(Mt(nn)),pipe=(...Mt)=>Mt.reduce(combineFunctions),invisibleValues=new Set(["none","hidden"]);function mixVisibility(Mt,st){return invisibleValues.has(Mt)?nn=>nn<=0?Mt:st:nn=>nn>=1?st:Mt}function mixNumber(Mt,st){return nn=>mixNumber$1(Mt,st,nn)}function getMixer(Mt){return typeof Mt=="number"?mixNumber:typeof Mt=="string"?isCSSVariableToken(Mt)?mixImmediate:color$1.test(Mt)?mixColor:mixComplex:Array.isArray(Mt)?mixArray:typeof Mt=="object"?color$1.test(Mt)?mixColor:mixObject:mixImmediate}function mixArray(Mt,st){const nn=[...Mt],rn=nn.length,on=Mt.map((an,sn)=>getMixer(an)(an,st[sn]));return an=>{for(let sn=0;sn<rn;sn++)nn[sn]=on[sn](an);return nn}}function mixObject(Mt,st){const nn={...Mt,...st},rn={};for(const on in nn)Mt[on]!==void 0&&st[on]!==void 0&&(rn[on]=getMixer(Mt[on])(Mt[on],st[on]));return on=>{for(const an in rn)nn[an]=rn[an](on);return nn}}function matchOrder(Mt,st){var nn;const rn=[],on={color:0,var:0,number:0};for(let an=0;an<st.values.length;an++){const sn=st.types[an],un=Mt.indexes[sn][on[sn]],Xr=(nn=Mt.values[un])!==null&&nn!==void 0?nn:0;rn[an]=Xr,on[sn]++}return rn}const mixComplex=(Mt,st)=>{const nn=complex.createTransformer(st),rn=analyseComplexValue(Mt),on=analyseComplexValue(st);return rn.indexes.var.length===on.indexes.var.length&&rn.indexes.color.length===on.indexes.color.length&&rn.indexes.number.length>=on.indexes.number.length?invisibleValues.has(Mt)&&!on.values.length||invisibleValues.has(st)&&!rn.values.length?mixVisibility(Mt,st):pipe(mixArray(matchOrder(rn,on),on.values),nn):mixImmediate(Mt,st)};function mix(Mt,st,nn){return typeof Mt=="number"&&typeof st=="number"&&typeof nn=="number"?mixNumber$1(Mt,st,nn):getMixer(Mt)(Mt,st)}const velocitySampleDuration=5;function calcGeneratorVelocity(Mt,st,nn){const rn=Math.max(st-velocitySampleDuration,0);return velocityPerSecond(nn-Mt(rn),st-rn)}const springDefaults={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},safeMin=.001;function findSpring({duration:Mt=springDefaults.duration,bounce:st=springDefaults.bounce,velocity:nn=springDefaults.velocity,mass:rn=springDefaults.mass}){let on,an,sn=1-st;sn=clamp$2(springDefaults.minDamping,springDefaults.maxDamping,sn),Mt=clamp$2(springDefaults.minDuration,springDefaults.maxDuration,millisecondsToSeconds(Mt)),sn<1?(on=to=>{const uo=to*sn,hn=uo*Mt,fn=uo-nn,co=calcAngularFreq(to,sn),lo=Math.exp(-hn);return safeMin-fn/co*lo},an=to=>{const hn=to*sn*Mt,fn=hn*nn+nn,co=Math.pow(sn,2)*Math.pow(to,2)*Mt,lo=Math.exp(-hn),fo=calcAngularFreq(Math.pow(to,2),sn);return(-on(to)+safeMin>0?-1:1)*((fn-co)*lo)/fo}):(on=to=>{const uo=Math.exp(-to*Mt),hn=(to-nn)*Mt+1;return-safeMin+uo*hn},an=to=>{const uo=Math.exp(-to*Mt),hn=(nn-to)*(Mt*Mt);return uo*hn});const un=5/Mt,Xr=approximateRoot(on,an,un);if(Mt=secondsToMilliseconds(Mt),isNaN(Xr))return{stiffness:springDefaults.stiffness,damping:springDefaults.damping,duration:Mt};{const to=Math.pow(Xr,2)*rn;return{stiffness:to,damping:sn*2*Math.sqrt(rn*to),duration:Mt}}}const rootIterations=12;function approximateRoot(Mt,st,nn){let rn=nn;for(let on=1;on<rootIterations;on++)rn=rn-Mt(rn)/st(rn);return rn}function calcAngularFreq(Mt,st){return Mt*Math.sqrt(1-st*st)}const durationKeys=["duration","bounce"],physicsKeys=["stiffness","damping","mass"];function isSpringType(Mt,st){return st.some(nn=>Mt[nn]!==void 0)}function getSpringOptions(Mt){let st={velocity:springDefaults.velocity,stiffness:springDefaults.stiffness,damping:springDefaults.damping,mass:springDefaults.mass,isResolvedFromDuration:!1,...Mt};if(!isSpringType(Mt,physicsKeys)&&isSpringType(Mt,durationKeys))if(Mt.visualDuration){const nn=Mt.visualDuration,rn=2*Math.PI/(nn*1.2),on=rn*rn,an=2*clamp$2(.05,1,1-(Mt.bounce||0))*Math.sqrt(on);st={...st,mass:springDefaults.mass,stiffness:on,damping:an}}else{const nn=findSpring(Mt);st={...st,...nn,mass:springDefaults.mass},st.isResolvedFromDuration=!0}return st}function spring(Mt=springDefaults.visualDuration,st=springDefaults.bounce){const nn=typeof Mt!="object"?{visualDuration:Mt,keyframes:[0,1],bounce:st}:Mt;let{restSpeed:rn,restDelta:on}=nn;const an=nn.keyframes[0],sn=nn.keyframes[nn.keyframes.length-1],un={done:!1,value:an},{stiffness:Xr,damping:to,mass:uo,duration:hn,velocity:fn,isResolvedFromDuration:co}=getSpringOptions({...nn,velocity:-millisecondsToSeconds(nn.velocity||0)}),lo=fn||0,fo=to/(2*Math.sqrt(Xr*uo)),ho=sn-an,mo=millisecondsToSeconds(Math.sqrt(Xr/uo)),Uo=Math.abs(ho)<5;rn||(rn=Uo?springDefaults.restSpeed.granular:springDefaults.restSpeed.default),on||(on=Uo?springDefaults.restDelta.granular:springDefaults.restDelta.default);let _d;if(fo<1){const ep=calcAngularFreq(mo,fo);_d=np=>{const rp=Math.exp(-fo*mo*np);return sn-rp*((lo+fo*mo*ho)/ep*Math.sin(ep*np)+ho*Math.cos(ep*np))}}else if(fo===1)_d=ep=>sn-Math.exp(-mo*ep)*(ho+(lo+mo*ho)*ep);else{const ep=mo*Math.sqrt(fo*fo-1);_d=np=>{const rp=Math.exp(-fo*mo*np),ip=Math.min(ep*np,300);return sn-rp*((lo+fo*mo*ho)*Math.sinh(ip)+ep*ho*Math.cosh(ip))/ep}}const tp={calculatedDuration:co&&hn||null,next:ep=>{const np=_d(ep);if(co)un.done=ep>=hn;else{let rp=0;fo<1&&(rp=ep===0?secondsToMilliseconds(lo):calcGeneratorVelocity(_d,ep,np));const ip=Math.abs(rp)<=rn,op=Math.abs(sn-np)<=on;un.done=ip&&op}return un.value=un.done?sn:np,un},toString:()=>{const ep=Math.min(calcGeneratorDuration(tp),maxGeneratorDuration),np=generateLinearEasing(rp=>tp.next(ep*rp).value,ep,30);return ep+"ms "+np}};return tp}function inertia({keyframes:Mt,velocity:st=0,power:nn=.8,timeConstant:rn=325,bounceDamping:on=10,bounceStiffness:an=500,modifyTarget:sn,min:un,max:Xr,restDelta:to=.5,restSpeed:uo}){const hn=Mt[0],fn={done:!1,value:hn},co=ip=>un!==void 0&&ip<un||Xr!==void 0&&ip>Xr,lo=ip=>un===void 0?Xr:Xr===void 0||Math.abs(un-ip)<Math.abs(Xr-ip)?un:Xr;let fo=nn*st;const ho=hn+fo,mo=sn===void 0?ho:sn(ho);mo!==ho&&(fo=mo-hn);const Uo=ip=>-fo*Math.exp(-ip/rn),_d=ip=>mo+Uo(ip),tp=ip=>{const op=Uo(ip),ap=_d(ip);fn.done=Math.abs(op)<=to,fn.value=fn.done?mo:ap};let ep,np;const rp=ip=>{co(fn.value)&&(ep=ip,np=spring({keyframes:[fn.value,lo(fn.value)],velocity:calcGeneratorVelocity(_d,ip,fn.value),damping:on,stiffness:an,restDelta:to,restSpeed:uo}))};return rp(0),{calculatedDuration:null,next:ip=>{let op=!1;return!np&&ep===void 0&&(op=!0,tp(ip),rp(ip)),ep!==void 0&&ip>=ep?np.next(ip-ep):(!op&&tp(ip),fn)}}}const easeIn=cubicBezier$1(.42,0,1,1),easeOut=cubicBezier$1(0,0,.58,1),easeInOut=cubicBezier$1(.42,0,.58,1),isEasingArray=Mt=>Array.isArray(Mt)&&typeof Mt[0]!="number",easingLookup={linear:noop$3,easeIn,easeInOut,easeOut,circIn,circInOut,circOut,backIn,backInOut,backOut,anticipate},easingDefinitionToFunction=Mt=>{if(isBezierDefinition(Mt)){invariant$1(Mt.length===4);const[st,nn,rn,on]=Mt;return cubicBezier$1(st,nn,rn,on)}else if(typeof Mt=="string")return invariant$1(easingLookup[Mt]!==void 0),easingLookup[Mt];return Mt};function createMixers(Mt,st,nn){const rn=[],on=nn||mix,an=Mt.length-1;for(let sn=0;sn<an;sn++){let un=on(Mt[sn],Mt[sn+1]);if(st){const Xr=Array.isArray(st)?st[sn]||noop$3:st;un=pipe(Xr,un)}rn.push(un)}return rn}function interpolate$2(Mt,st,{clamp:nn=!0,ease:rn,mixer:on}={}){const an=Mt.length;if(invariant$1(an===st.length),an===1)return()=>st[0];if(an===2&&st[0]===st[1])return()=>st[1];const sn=Mt[0]===Mt[1];Mt[0]>Mt[an-1]&&(Mt=[...Mt].reverse(),st=[...st].reverse());const un=createMixers(st,rn,on),Xr=un.length,to=uo=>{if(sn&&uo<Mt[0])return st[0];let hn=0;if(Xr>1)for(;hn<Mt.length-2&&!(uo<Mt[hn+1]);hn++);const fn=progress(Mt[hn],Mt[hn+1],uo);return un[hn](fn)};return nn?uo=>to(clamp$2(Mt[0],Mt[an-1],uo)):to}function fillOffset(Mt,st){const nn=Mt[Mt.length-1];for(let rn=1;rn<=st;rn++){const on=progress(0,st,rn);Mt.push(mixNumber$1(nn,1,on))}}function defaultOffset(Mt){const st=[0];return fillOffset(st,Mt.length-1),st}function convertOffsetToTimes(Mt,st){return Mt.map(nn=>nn*st)}function defaultEasing(Mt,st){return Mt.map(()=>st||easeInOut).splice(0,Mt.length-1)}function keyframes({duration:Mt=300,keyframes:st,times:nn,ease:rn="easeInOut"}){const on=isEasingArray(rn)?rn.map(easingDefinitionToFunction):easingDefinitionToFunction(rn),an={done:!1,value:st[0]},sn=convertOffsetToTimes(nn&&nn.length===st.length?nn:defaultOffset(st),Mt),un=interpolate$2(sn,st,{ease:Array.isArray(on)?on:defaultEasing(st,on)});return{calculatedDuration:Mt,next:Xr=>(an.value=un(Xr),an.done=Xr>=Mt,an)}}const frameloopDriver=Mt=>{const st=({timestamp:nn})=>Mt(nn);return{start:()=>frame.update(st,!0),stop:()=>cancelFrame(st),now:()=>frameData.isProcessing?frameData.timestamp:time$1.now()}},generators={decay:inertia,inertia,tween:keyframes,keyframes,spring},percentToProgress=Mt=>Mt/100;class MainThreadAnimation extends BaseAnimation{constructor(st){super(st),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:Xr}=this.options;Xr&&Xr()};const{name:nn,motionValue:rn,element:on,keyframes:an}=this.options,sn=(on==null?void 0:on.KeyframeResolver)||KeyframeResolver,un=(Xr,to)=>this.onKeyframesResolved(Xr,to);this.resolver=new sn(an,un,nn,rn,on),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(st){const{type:nn="keyframes",repeat:rn=0,repeatDelay:on=0,repeatType:an,velocity:sn=0}=this.options,un=isGenerator(nn)?nn:generators[nn]||keyframes;let Xr,to;un!==keyframes&&typeof st[0]!="number"&&(Xr=pipe(percentToProgress,mix(st[0],st[1])),st=[0,100]);const uo=un({...this.options,keyframes:st});an==="mirror"&&(to=un({...this.options,keyframes:[...st].reverse(),velocity:-sn})),uo.calculatedDuration===null&&(uo.calculatedDuration=calcGeneratorDuration(uo));const{calculatedDuration:hn}=uo,fn=hn+on,co=fn*(rn+1)-on;return{generator:uo,mirroredGenerator:to,mapPercentToKeyframes:Xr,calculatedDuration:hn,resolvedDuration:fn,totalDuration:co}}onPostResolved(){const{autoplay:st=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!st?this.pause():this.state=this.pendingPlayState}tick(st,nn=!1){const{resolved:rn}=this;if(!rn){const{keyframes:ip}=this.options;return{done:!0,value:ip[ip.length-1]}}const{finalKeyframe:on,generator:an,mirroredGenerator:sn,mapPercentToKeyframes:un,keyframes:Xr,calculatedDuration:to,totalDuration:uo,resolvedDuration:hn}=rn;if(this.startTime===null)return an.next(0);const{delay:fn,repeat:co,repeatType:lo,repeatDelay:fo,onUpdate:ho}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,st):this.speed<0&&(this.startTime=Math.min(st-uo/this.speed,this.startTime)),nn?this.currentTime=st:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(st-this.startTime)*this.speed;const mo=this.currentTime-fn*(this.speed>=0?1:-1),Uo=this.speed>=0?mo<0:mo>uo;this.currentTime=Math.max(mo,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=uo);let _d=this.currentTime,tp=an;if(co){const ip=Math.min(this.currentTime,uo)/hn;let op=Math.floor(ip),ap=ip%1;!ap&&ip>=1&&(ap=1),ap===1&&op--,op=Math.min(op,co+1),!!(op%2)&&(lo==="reverse"?(ap=1-ap,fo&&(ap-=fo/hn)):lo==="mirror"&&(tp=sn)),_d=clamp$2(0,1,ap)*hn}const ep=Uo?{done:!1,value:Xr[0]}:tp.next(_d);un&&(ep.value=un(ep.value));let{done:np}=ep;!Uo&&to!==null&&(np=this.speed>=0?this.currentTime>=uo:this.currentTime<=0);const rp=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&np);return rp&&on!==void 0&&(ep.value=getFinalKeyframe(Xr,this.options,on)),ho&&ho(ep.value),rp&&this.finish(),ep}get duration(){const{resolved:st}=this;return st?millisecondsToSeconds(st.calculatedDuration):0}get time(){return millisecondsToSeconds(this.currentTime)}set time(st){st=secondsToMilliseconds(st),this.currentTime=st,this.holdTime!==null||this.speed===0?this.holdTime=st:this.driver&&(this.startTime=this.driver.now()-st/this.speed)}get speed(){return this.playbackSpeed}set speed(st){const nn=this.playbackSpeed!==st;this.playbackSpeed=st,nn&&(this.time=millisecondsToSeconds(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:st=frameloopDriver,onPlay:nn,startTime:rn}=this.options;this.driver||(this.driver=st(an=>this.tick(an))),nn&&nn();const on=this.driver.now();this.holdTime!==null?this.startTime=on-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=on):this.startTime=rn??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var st;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(st=this.currentTime)!==null&&st!==void 0?st:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:st}=this.options;st&&st()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(st){return this.startTime=0,this.tick(st,!0)}}const acceleratedValues=new Set(["opacity","clipPath","filter","transform"]);function startWaapiAnimation(Mt,st,nn,{delay:rn=0,duration:on=300,repeat:an=0,repeatType:sn="loop",ease:un="easeInOut",times:Xr}={}){const to={[st]:nn};Xr&&(to.offset=Xr);const uo=mapEasingToNativeEasing(un,on);return Array.isArray(uo)&&(to.easing=uo),Mt.animate(to,{delay:rn,duration:on,easing:Array.isArray(uo)?"linear":uo,fill:"both",iterations:an+1,direction:sn==="reverse"?"alternate":"normal"})}const supportsWaapi=memo(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),sampleDelta=10,maxDuration=2e4;function requiresPregeneratedKeyframes(Mt){return isGenerator(Mt.type)||Mt.type==="spring"||!isWaapiSupportedEasing(Mt.ease)}function pregenerateKeyframes(Mt,st){const nn=new MainThreadAnimation({...st,keyframes:Mt,repeat:0,delay:0,isGenerator:!0});let rn={done:!1,value:Mt[0]};const on=[];let an=0;for(;!rn.done&&an<maxDuration;)rn=nn.sample(an),on.push(rn.value),an+=sampleDelta;return{times:void 0,keyframes:on,duration:an-sampleDelta,ease:"linear"}}const unsupportedEasingFunctions={anticipate,backInOut,circInOut};function isUnsupportedEase(Mt){return Mt in unsupportedEasingFunctions}class AcceleratedAnimation extends BaseAnimation{constructor(st){super(st);const{name:nn,motionValue:rn,element:on,keyframes:an}=this.options;this.resolver=new DOMKeyframesResolver(an,(sn,un)=>this.onKeyframesResolved(sn,un),nn,rn,on),this.resolver.scheduleResolve()}initPlayback(st,nn){let{duration:rn=300,times:on,ease:an,type:sn,motionValue:un,name:Xr,startTime:to}=this.options;if(!un.owner||!un.owner.current)return!1;if(typeof an=="string"&&supportsLinearEasing()&&isUnsupportedEase(an)&&(an=unsupportedEasingFunctions[an]),requiresPregeneratedKeyframes(this.options)){const{onComplete:hn,onUpdate:fn,motionValue:co,element:lo,...fo}=this.options,ho=pregenerateKeyframes(st,fo);st=ho.keyframes,st.length===1&&(st[1]=st[0]),rn=ho.duration,on=ho.times,an=ho.ease,sn="keyframes"}const uo=startWaapiAnimation(un.owner.current,Xr,st,{...this.options,duration:rn,times:on,ease:an});return uo.startTime=to??this.calcStartTime(),this.pendingTimeline?(attachTimeline(uo,this.pendingTimeline),this.pendingTimeline=void 0):uo.onfinish=()=>{const{onComplete:hn}=this.options;un.set(getFinalKeyframe(st,this.options,nn)),hn&&hn(),this.cancel(),this.resolveFinishedPromise()},{animation:uo,duration:rn,times:on,type:sn,ease:an,keyframes:st}}get duration(){const{resolved:st}=this;if(!st)return 0;const{duration:nn}=st;return millisecondsToSeconds(nn)}get time(){const{resolved:st}=this;if(!st)return 0;const{animation:nn}=st;return millisecondsToSeconds(nn.currentTime||0)}set time(st){const{resolved:nn}=this;if(!nn)return;const{animation:rn}=nn;rn.currentTime=secondsToMilliseconds(st)}get speed(){const{resolved:st}=this;if(!st)return 1;const{animation:nn}=st;return nn.playbackRate}set speed(st){const{resolved:nn}=this;if(!nn)return;const{animation:rn}=nn;rn.playbackRate=st}get state(){const{resolved:st}=this;if(!st)return"idle";const{animation:nn}=st;return nn.playState}get startTime(){const{resolved:st}=this;if(!st)return null;const{animation:nn}=st;return nn.startTime}attachTimeline(st){if(!this._resolved)this.pendingTimeline=st;else{const{resolved:nn}=this;if(!nn)return noop$3;const{animation:rn}=nn;attachTimeline(rn,st)}return noop$3}play(){if(this.isStopped)return;const{resolved:st}=this;if(!st)return;const{animation:nn}=st;nn.playState==="finished"&&this.updateFinishedPromise(),nn.play()}pause(){const{resolved:st}=this;if(!st)return;const{animation:nn}=st;nn.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:st}=this;if(!st)return;const{animation:nn,keyframes:rn,duration:on,type:an,ease:sn,times:un}=st;if(nn.playState==="idle"||nn.playState==="finished")return;if(this.time){const{motionValue:to,onUpdate:uo,onComplete:hn,element:fn,...co}=this.options,lo=new MainThreadAnimation({...co,keyframes:rn,duration:on,type:an,ease:sn,times:un,isGenerator:!0}),fo=secondsToMilliseconds(this.time);to.setWithVelocity(lo.sample(fo-sampleDelta).value,lo.sample(fo).value,sampleDelta)}const{onStop:Xr}=this.options;Xr&&Xr(),this.cancel()}complete(){const{resolved:st}=this;st&&st.animation.finish()}cancel(){const{resolved:st}=this;st&&st.animation.cancel()}static supports(st){const{motionValue:nn,name:rn,repeatDelay:on,repeatType:an,damping:sn,type:un}=st;if(!nn||!nn.owner||!(nn.owner.current instanceof HTMLElement))return!1;const{onUpdate:Xr,transformTemplate:to}=nn.owner.getProps();return supportsWaapi()&&rn&&acceleratedValues.has(rn)&&!Xr&&!to&&!on&&an!=="mirror"&&sn!==0&&un!=="inertia"}}const underDampedSpring={type:"spring",stiffness:500,damping:25,restSpeed:10},criticallyDampedSpring=Mt=>({type:"spring",stiffness:550,damping:Mt===0?2*Math.sqrt(550):30,restSpeed:10}),keyframesTransition={type:"keyframes",duration:.8},ease={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},getDefaultTransition=(Mt,{keyframes:st})=>st.length>2?keyframesTransition:transformProps.has(Mt)?Mt.startsWith("scale")?criticallyDampedSpring(st[1]):underDampedSpring:ease;function isTransitionDefined({when:Mt,delay:st,delayChildren:nn,staggerChildren:rn,staggerDirection:on,repeat:an,repeatType:sn,repeatDelay:un,from:Xr,elapsed:to,...uo}){return!!Object.keys(uo).length}const animateMotionValue=(Mt,st,nn,rn={},on,an)=>sn=>{const un=getValueTransition(rn,Mt)||{},Xr=un.delay||rn.delay||0;let{elapsed:to=0}=rn;to=to-secondsToMilliseconds(Xr);let uo={keyframes:Array.isArray(nn)?nn:[null,nn],ease:"easeOut",velocity:st.getVelocity(),...un,delay:-to,onUpdate:fn=>{st.set(fn),un.onUpdate&&un.onUpdate(fn)},onComplete:()=>{sn(),un.onComplete&&un.onComplete()},name:Mt,motionValue:st,element:an?void 0:on};isTransitionDefined(un)||(uo={...uo,...getDefaultTransition(Mt,uo)}),uo.duration&&(uo.duration=secondsToMilliseconds(uo.duration)),uo.repeatDelay&&(uo.repeatDelay=secondsToMilliseconds(uo.repeatDelay)),uo.from!==void 0&&(uo.keyframes[0]=uo.from);let hn=!1;if((uo.type===!1||uo.duration===0&&!uo.repeatDelay)&&(uo.duration=0,uo.delay===0&&(hn=!0)),hn&&!an&&st.get()!==void 0){const fn=getFinalKeyframe(uo.keyframes,un);if(fn!==void 0)return frame.update(()=>{uo.onUpdate(fn),uo.onComplete()}),new GroupPlaybackControls([])}return!an&&AcceleratedAnimation.supports(uo)?new AcceleratedAnimation(uo):new MainThreadAnimation(uo)};function shouldBlockAnimation({protectedKeys:Mt,needsAnimating:st},nn){const rn=Mt.hasOwnProperty(nn)&&st[nn]!==!0;return st[nn]=!1,rn}function animateTarget(Mt,st,{delay:nn=0,transitionOverride:rn,type:on}={}){var an;let{transition:sn=Mt.getDefaultTransition(),transitionEnd:un,...Xr}=st;rn&&(sn=rn);const to=[],uo=on&&Mt.animationState&&Mt.animationState.getState()[on];for(const hn in Xr){const fn=Mt.getValue(hn,(an=Mt.latestValues[hn])!==null&&an!==void 0?an:null),co=Xr[hn];if(co===void 0||uo&&shouldBlockAnimation(uo,hn))continue;const lo={delay:nn,...getValueTransition(sn||{},hn)};let fo=!1;if(window.MotionHandoffAnimation){const mo=getOptimisedAppearId(Mt);if(mo){const Uo=window.MotionHandoffAnimation(mo,hn,frame);Uo!==null&&(lo.startTime=Uo,fo=!0)}}addValueToWillChange(Mt,hn),fn.start(animateMotionValue(hn,fn,co,Mt.shouldReduceMotion&&positionalKeys.has(hn)?{type:!1}:lo,Mt,fo));const ho=fn.animation;ho&&to.push(ho)}return un&&Promise.all(to).then(()=>{frame.update(()=>{un&&setTarget(Mt,un)})}),to}function animateVariant(Mt,st,nn={}){var rn;const on=resolveVariant(Mt,st,nn.type==="exit"?(rn=Mt.presenceContext)===null||rn===void 0?void 0:rn.custom:void 0);let{transition:an=Mt.getDefaultTransition()||{}}=on||{};nn.transitionOverride&&(an=nn.transitionOverride);const sn=on?()=>Promise.all(animateTarget(Mt,on,nn)):()=>Promise.resolve(),un=Mt.variantChildren&&Mt.variantChildren.size?(to=0)=>{const{delayChildren:uo=0,staggerChildren:hn,staggerDirection:fn}=an;return animateChildren(Mt,st,uo+to,hn,fn,nn)}:()=>Promise.resolve(),{when:Xr}=an;if(Xr){const[to,uo]=Xr==="beforeChildren"?[sn,un]:[un,sn];return to().then(()=>uo())}else return Promise.all([sn(),un(nn.delay)])}function animateChildren(Mt,st,nn=0,rn=0,on=1,an){const sn=[],un=(Mt.variantChildren.size-1)*rn,Xr=on===1?(to=0)=>to*rn:(to=0)=>un-to*rn;return Array.from(Mt.variantChildren).sort(sortByTreeOrder).forEach((to,uo)=>{to.notify("AnimationStart",st),sn.push(animateVariant(to,st,{...an,delay:nn+Xr(uo)}).then(()=>to.notify("AnimationComplete",st)))}),Promise.all(sn)}function sortByTreeOrder(Mt,st){return Mt.sortNodePosition(st)}function animateVisualElement(Mt,st,nn={}){Mt.notify("AnimationStart",st);let rn;if(Array.isArray(st)){const on=st.map(an=>animateVariant(Mt,an,nn));rn=Promise.all(on)}else if(typeof st=="string")rn=animateVariant(Mt,st,nn);else{const on=typeof st=="function"?resolveVariant(Mt,st,nn.custom):st;rn=Promise.all(animateTarget(Mt,on,nn))}return rn.then(()=>{Mt.notify("AnimationComplete",st)})}const numVariantProps=variantProps.length;function getVariantContext(Mt){if(!Mt)return;if(!Mt.isControllingVariants){const nn=Mt.parent?getVariantContext(Mt.parent)||{}:{};return Mt.props.initial!==void 0&&(nn.initial=Mt.props.initial),nn}const st={};for(let nn=0;nn<numVariantProps;nn++){const rn=variantProps[nn],on=Mt.props[rn];(isVariantLabel(on)||on===!1)&&(st[rn]=on)}return st}const reversePriorityOrder=[...variantPriorityOrder].reverse(),numAnimationTypes=variantPriorityOrder.length;function animateList(Mt){return st=>Promise.all(st.map(({animation:nn,options:rn})=>animateVisualElement(Mt,nn,rn)))}function createAnimationState(Mt){let st=animateList(Mt),nn=createState(),rn=!0;const on=Xr=>(to,uo)=>{var hn;const fn=resolveVariant(Mt,uo,Xr==="exit"?(hn=Mt.presenceContext)===null||hn===void 0?void 0:hn.custom:void 0);if(fn){const{transition:co,transitionEnd:lo,...fo}=fn;to={...to,...fo,...lo}}return to};function an(Xr){st=Xr(Mt)}function sn(Xr){const{props:to}=Mt,uo=getVariantContext(Mt.parent)||{},hn=[],fn=new Set;let co={},lo=1/0;for(let ho=0;ho<numAnimationTypes;ho++){const mo=reversePriorityOrder[ho],Uo=nn[mo],_d=to[mo]!==void 0?to[mo]:uo[mo],tp=isVariantLabel(_d),ep=mo===Xr?Uo.isActive:null;ep===!1&&(lo=ho);let np=_d===uo[mo]&&_d!==to[mo]&&tp;if(np&&rn&&Mt.manuallyAnimateOnMount&&(np=!1),Uo.protectedKeys={...co},!Uo.isActive&&ep===null||!_d&&!Uo.prevProp||isAnimationControls(_d)||typeof _d=="boolean")continue;const rp=checkVariantsDidChange(Uo.prevProp,_d);let ip=rp||mo===Xr&&Uo.isActive&&!np&&tp||ho>lo&&tp,op=!1;const ap=Array.isArray(_d)?_d:[_d];let sp=ap.reduce(on(mo),{});ep===!1&&(sp={});const{prevResolvedValues:up={}}=Uo,pp={...up,...sp},lp=fp=>{ip=!0,fn.has(fp)&&(op=!0,fn.delete(fp)),Uo.needsAnimating[fp]=!0;const gp=Mt.getValue(fp);gp&&(gp.liveStyle=!1)};for(const fp in pp){const gp=sp[fp],mp=up[fp];if(co.hasOwnProperty(fp))continue;let xp=!1;isKeyframesTarget(gp)&&isKeyframesTarget(mp)?xp=!shallowCompare(gp,mp):xp=gp!==mp,xp?gp!=null?lp(fp):fn.add(fp):gp!==void 0&&fn.has(fp)?lp(fp):Uo.protectedKeys[fp]=!0}Uo.prevProp=_d,Uo.prevResolvedValues=sp,Uo.isActive&&(co={...co,...sp}),rn&&Mt.blockInitialAnimation&&(ip=!1),ip&&(!(np&&rp)||op)&&hn.push(...ap.map(fp=>({animation:fp,options:{type:mo}})))}if(fn.size){const ho={};fn.forEach(mo=>{const Uo=Mt.getBaseTarget(mo),_d=Mt.getValue(mo);_d&&(_d.liveStyle=!0),ho[mo]=Uo??null}),hn.push({animation:ho})}let fo=!!hn.length;return rn&&(to.initial===!1||to.initial===to.animate)&&!Mt.manuallyAnimateOnMount&&(fo=!1),rn=!1,fo?st(hn):Promise.resolve()}function un(Xr,to){var uo;if(nn[Xr].isActive===to)return Promise.resolve();(uo=Mt.variantChildren)===null||uo===void 0||uo.forEach(fn=>{var co;return(co=fn.animationState)===null||co===void 0?void 0:co.setActive(Xr,to)}),nn[Xr].isActive=to;const hn=sn(Xr);for(const fn in nn)nn[fn].protectedKeys={};return hn}return{animateChanges:sn,setActive:un,setAnimateFunction:an,getState:()=>nn,reset:()=>{nn=createState(),rn=!0}}}function checkVariantsDidChange(Mt,st){return typeof st=="string"?st!==Mt:Array.isArray(st)?!shallowCompare(st,Mt):!1}function createTypeState(Mt=!1){return{isActive:Mt,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function createState(){return{animate:createTypeState(!0),whileInView:createTypeState(),whileHover:createTypeState(),whileTap:createTypeState(),whileDrag:createTypeState(),whileFocus:createTypeState(),exit:createTypeState()}}class Feature{constructor(st){this.isMounted=!1,this.node=st}update(){}}class AnimationFeature extends Feature{constructor(st){super(st),st.animationState||(st.animationState=createAnimationState(st))}updateAnimationControlsSubscription(){const{animate:st}=this.node.getProps();isAnimationControls(st)&&(this.unmountControls=st.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:st}=this.node.getProps(),{animate:nn}=this.node.prevProps||{};st!==nn&&this.updateAnimationControlsSubscription()}unmount(){var st;this.node.animationState.reset(),(st=this.unmountControls)===null||st===void 0||st.call(this)}}let id$2=0;class ExitAnimationFeature extends Feature{constructor(){super(...arguments),this.id=id$2++}update(){if(!this.node.presenceContext)return;const{isPresent:st,onExitComplete:nn}=this.node.presenceContext,{isPresent:rn}=this.node.prevPresenceContext||{};if(!this.node.animationState||st===rn)return;const on=this.node.animationState.setActive("exit",!st);nn&&!st&&on.then(()=>nn(this.id))}mount(){const{register:st}=this.node.presenceContext||{};st&&(this.unmount=st(this.id))}unmount(){}}const animations={animation:{Feature:AnimationFeature},exit:{Feature:ExitAnimationFeature}};function addDomEvent(Mt,st,nn,rn={passive:!0}){return Mt.addEventListener(st,nn,rn),()=>Mt.removeEventListener(st,nn)}function extractEventInfo(Mt){return{point:{x:Mt.pageX,y:Mt.pageY}}}const addPointerInfo=Mt=>st=>isPrimaryPointer(st)&&Mt(st,extractEventInfo(st));function addPointerEvent(Mt,st,nn,rn){return addDomEvent(Mt,st,addPointerInfo(nn),rn)}const distance=(Mt,st)=>Math.abs(Mt-st);function distance2D(Mt,st){const nn=distance(Mt.x,st.x),rn=distance(Mt.y,st.y);return Math.sqrt(nn**2+rn**2)}class PanSession{constructor(st,nn,{transformPagePoint:rn,contextWindow:on,dragSnapToOrigin:an=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const hn=getPanInfo(this.lastMoveEventInfo,this.history),fn=this.startEvent!==null,co=distance2D(hn.offset,{x:0,y:0})>=3;if(!fn&&!co)return;const{point:lo}=hn,{timestamp:fo}=frameData;this.history.push({...lo,timestamp:fo});const{onStart:ho,onMove:mo}=this.handlers;fn||(ho&&ho(this.lastMoveEvent,hn),this.startEvent=this.lastMoveEvent),mo&&mo(this.lastMoveEvent,hn)},this.handlePointerMove=(hn,fn)=>{this.lastMoveEvent=hn,this.lastMoveEventInfo=transformPoint(fn,this.transformPagePoint),frame.update(this.updatePoint,!0)},this.handlePointerUp=(hn,fn)=>{this.end();const{onEnd:co,onSessionEnd:lo,resumeAnimation:fo}=this.handlers;if(this.dragSnapToOrigin&&fo&&fo(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const ho=getPanInfo(hn.type==="pointercancel"?this.lastMoveEventInfo:transformPoint(fn,this.transformPagePoint),this.history);this.startEvent&&co&&co(hn,ho),lo&&lo(hn,ho)},!isPrimaryPointer(st))return;this.dragSnapToOrigin=an,this.handlers=nn,this.transformPagePoint=rn,this.contextWindow=on||window;const sn=extractEventInfo(st),un=transformPoint(sn,this.transformPagePoint),{point:Xr}=un,{timestamp:to}=frameData;this.history=[{...Xr,timestamp:to}];const{onSessionStart:uo}=nn;uo&&uo(st,getPanInfo(un,this.history)),this.removeListeners=pipe(addPointerEvent(this.contextWindow,"pointermove",this.handlePointerMove),addPointerEvent(this.contextWindow,"pointerup",this.handlePointerUp),addPointerEvent(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(st){this.handlers=st}end(){this.removeListeners&&this.removeListeners(),cancelFrame(this.updatePoint)}}function transformPoint(Mt,st){return st?{point:st(Mt.point)}:Mt}function subtractPoint(Mt,st){return{x:Mt.x-st.x,y:Mt.y-st.y}}function getPanInfo({point:Mt},st){return{point:Mt,delta:subtractPoint(Mt,lastDevicePoint(st)),offset:subtractPoint(Mt,startDevicePoint(st)),velocity:getVelocity(st,.1)}}function startDevicePoint(Mt){return Mt[0]}function lastDevicePoint(Mt){return Mt[Mt.length-1]}function getVelocity(Mt,st){if(Mt.length<2)return{x:0,y:0};let nn=Mt.length-1,rn=null;const on=lastDevicePoint(Mt);for(;nn>=0&&(rn=Mt[nn],!(on.timestamp-rn.timestamp>secondsToMilliseconds(st)));)nn--;if(!rn)return{x:0,y:0};const an=millisecondsToSeconds(on.timestamp-rn.timestamp);if(an===0)return{x:0,y:0};const sn={x:(on.x-rn.x)/an,y:(on.y-rn.y)/an};return sn.x===1/0&&(sn.x=0),sn.y===1/0&&(sn.y=0),sn}const SCALE_PRECISION=1e-4,SCALE_MIN=1-SCALE_PRECISION,SCALE_MAX=1+SCALE_PRECISION,TRANSLATE_PRECISION=.01,TRANSLATE_MIN=0-TRANSLATE_PRECISION,TRANSLATE_MAX=0+TRANSLATE_PRECISION;function calcLength(Mt){return Mt.max-Mt.min}function isNear(Mt,st,nn){return Math.abs(Mt-st)<=nn}function calcAxisDelta(Mt,st,nn,rn=.5){Mt.origin=rn,Mt.originPoint=mixNumber$1(st.min,st.max,Mt.origin),Mt.scale=calcLength(nn)/calcLength(st),Mt.translate=mixNumber$1(nn.min,nn.max,Mt.origin)-Mt.originPoint,(Mt.scale>=SCALE_MIN&&Mt.scale<=SCALE_MAX||isNaN(Mt.scale))&&(Mt.scale=1),(Mt.translate>=TRANSLATE_MIN&&Mt.translate<=TRANSLATE_MAX||isNaN(Mt.translate))&&(Mt.translate=0)}function calcBoxDelta(Mt,st,nn,rn){calcAxisDelta(Mt.x,st.x,nn.x,rn?rn.originX:void 0),calcAxisDelta(Mt.y,st.y,nn.y,rn?rn.originY:void 0)}function calcRelativeAxis(Mt,st,nn){Mt.min=nn.min+st.min,Mt.max=Mt.min+calcLength(st)}function calcRelativeBox(Mt,st,nn){calcRelativeAxis(Mt.x,st.x,nn.x),calcRelativeAxis(Mt.y,st.y,nn.y)}function calcRelativeAxisPosition(Mt,st,nn){Mt.min=st.min-nn.min,Mt.max=Mt.min+calcLength(st)}function calcRelativePosition(Mt,st,nn){calcRelativeAxisPosition(Mt.x,st.x,nn.x),calcRelativeAxisPosition(Mt.y,st.y,nn.y)}function applyConstraints(Mt,{min:st,max:nn},rn){return st!==void 0&&Mt<st?Mt=rn?mixNumber$1(st,Mt,rn.min):Math.max(Mt,st):nn!==void 0&&Mt>nn&&(Mt=rn?mixNumber$1(nn,Mt,rn.max):Math.min(Mt,nn)),Mt}function calcRelativeAxisConstraints(Mt,st,nn){return{min:st!==void 0?Mt.min+st:void 0,max:nn!==void 0?Mt.max+nn-(Mt.max-Mt.min):void 0}}function calcRelativeConstraints(Mt,{top:st,left:nn,bottom:rn,right:on}){return{x:calcRelativeAxisConstraints(Mt.x,nn,on),y:calcRelativeAxisConstraints(Mt.y,st,rn)}}function calcViewportAxisConstraints(Mt,st){let nn=st.min-Mt.min,rn=st.max-Mt.max;return st.max-st.min<Mt.max-Mt.min&&([nn,rn]=[rn,nn]),{min:nn,max:rn}}function calcViewportConstraints(Mt,st){return{x:calcViewportAxisConstraints(Mt.x,st.x),y:calcViewportAxisConstraints(Mt.y,st.y)}}function calcOrigin(Mt,st){let nn=.5;const rn=calcLength(Mt),on=calcLength(st);return on>rn?nn=progress(st.min,st.max-rn,Mt.min):rn>on&&(nn=progress(Mt.min,Mt.max-on,st.min)),clamp$2(0,1,nn)}function rebaseAxisConstraints(Mt,st){const nn={};return st.min!==void 0&&(nn.min=st.min-Mt.min),st.max!==void 0&&(nn.max=st.max-Mt.min),nn}const defaultElastic=.35;function resolveDragElastic(Mt=defaultElastic){return Mt===!1?Mt=0:Mt===!0&&(Mt=defaultElastic),{x:resolveAxisElastic(Mt,"left","right"),y:resolveAxisElastic(Mt,"top","bottom")}}function resolveAxisElastic(Mt,st,nn){return{min:resolvePointElastic(Mt,st),max:resolvePointElastic(Mt,nn)}}function resolvePointElastic(Mt,st){return typeof Mt=="number"?Mt:Mt[st]||0}const createAxisDelta=()=>({translate:0,scale:1,origin:0,originPoint:0}),createDelta=()=>({x:createAxisDelta(),y:createAxisDelta()}),createAxis=()=>({min:0,max:0}),createBox=()=>({x:createAxis(),y:createAxis()});function eachAxis(Mt){return[Mt("x"),Mt("y")]}function convertBoundingBoxToBox({top:Mt,left:st,right:nn,bottom:rn}){return{x:{min:st,max:nn},y:{min:Mt,max:rn}}}function convertBoxToBoundingBox({x:Mt,y:st}){return{top:st.min,right:Mt.max,bottom:st.max,left:Mt.min}}function transformBoxPoints(Mt,st){if(!st)return Mt;const nn=st({x:Mt.left,y:Mt.top}),rn=st({x:Mt.right,y:Mt.bottom});return{top:nn.y,left:nn.x,bottom:rn.y,right:rn.x}}function isIdentityScale(Mt){return Mt===void 0||Mt===1}function hasScale({scale:Mt,scaleX:st,scaleY:nn}){return!isIdentityScale(Mt)||!isIdentityScale(st)||!isIdentityScale(nn)}function hasTransform(Mt){return hasScale(Mt)||has2DTranslate(Mt)||Mt.z||Mt.rotate||Mt.rotateX||Mt.rotateY||Mt.skewX||Mt.skewY}function has2DTranslate(Mt){return is2DTranslate(Mt.x)||is2DTranslate(Mt.y)}function is2DTranslate(Mt){return Mt&&Mt!=="0%"}function scalePoint(Mt,st,nn){const rn=Mt-nn,on=st*rn;return nn+on}function applyPointDelta(Mt,st,nn,rn,on){return on!==void 0&&(Mt=scalePoint(Mt,on,rn)),scalePoint(Mt,nn,rn)+st}function applyAxisDelta(Mt,st=0,nn=1,rn,on){Mt.min=applyPointDelta(Mt.min,st,nn,rn,on),Mt.max=applyPointDelta(Mt.max,st,nn,rn,on)}function applyBoxDelta(Mt,{x:st,y:nn}){applyAxisDelta(Mt.x,st.translate,st.scale,st.originPoint),applyAxisDelta(Mt.y,nn.translate,nn.scale,nn.originPoint)}const TREE_SCALE_SNAP_MIN=.999999999999,TREE_SCALE_SNAP_MAX=1.0000000000001;function applyTreeDeltas(Mt,st,nn,rn=!1){const on=nn.length;if(!on)return;st.x=st.y=1;let an,sn;for(let un=0;un<on;un++){an=nn[un],sn=an.projectionDelta;const{visualElement:Xr}=an.options;Xr&&Xr.props.style&&Xr.props.style.display==="contents"||(rn&&an.options.layoutScroll&&an.scroll&&an!==an.root&&transformBox(Mt,{x:-an.scroll.offset.x,y:-an.scroll.offset.y}),sn&&(st.x*=sn.x.scale,st.y*=sn.y.scale,applyBoxDelta(Mt,sn)),rn&&hasTransform(an.latestValues)&&transformBox(Mt,an.latestValues))}st.x<TREE_SCALE_SNAP_MAX&&st.x>TREE_SCALE_SNAP_MIN&&(st.x=1),st.y<TREE_SCALE_SNAP_MAX&&st.y>TREE_SCALE_SNAP_MIN&&(st.y=1)}function translateAxis(Mt,st){Mt.min=Mt.min+st,Mt.max=Mt.max+st}function transformAxis(Mt,st,nn,rn,on=.5){const an=mixNumber$1(Mt.min,Mt.max,on);applyAxisDelta(Mt,st,nn,an,rn)}function transformBox(Mt,st){transformAxis(Mt.x,st.x,st.scaleX,st.scale,st.originX),transformAxis(Mt.y,st.y,st.scaleY,st.scale,st.originY)}function measureViewportBox(Mt,st){return convertBoundingBoxToBox(transformBoxPoints(Mt.getBoundingClientRect(),st))}function measurePageBox(Mt,st,nn){const rn=measureViewportBox(Mt,nn),{scroll:on}=st;return on&&(translateAxis(rn.x,on.offset.x),translateAxis(rn.y,on.offset.y)),rn}const getContextWindow=({current:Mt})=>Mt?Mt.ownerDocument.defaultView:null,elementDragControls=new WeakMap;class VisualElementDragControls{constructor(st){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=createBox(),this.visualElement=st}start(st,{snapToCursor:nn=!1}={}){const{presenceContext:rn}=this.visualElement;if(rn&&rn.isPresent===!1)return;const on=uo=>{const{dragSnapToOrigin:hn}=this.getProps();hn?this.pauseAnimation():this.stopAnimation(),nn&&this.snapToCursor(extractEventInfo(uo).point)},an=(uo,hn)=>{const{drag:fn,dragPropagation:co,onDragStart:lo}=this.getProps();if(fn&&!co&&(this.openDragLock&&this.openDragLock(),this.openDragLock=setDragLock(fn),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),eachAxis(ho=>{let mo=this.getAxisMotionValue(ho).get()||0;if(percent.test(mo)){const{projection:Uo}=this.visualElement;if(Uo&&Uo.layout){const _d=Uo.layout.layoutBox[ho];_d&&(mo=calcLength(_d)*(parseFloat(mo)/100))}}this.originPoint[ho]=mo}),lo&&frame.postRender(()=>lo(uo,hn)),addValueToWillChange(this.visualElement,"transform");const{animationState:fo}=this.visualElement;fo&&fo.setActive("whileDrag",!0)},sn=(uo,hn)=>{const{dragPropagation:fn,dragDirectionLock:co,onDirectionLock:lo,onDrag:fo}=this.getProps();if(!fn&&!this.openDragLock)return;const{offset:ho}=hn;if(co&&this.currentDirection===null){this.currentDirection=getCurrentDirection(ho),this.currentDirection!==null&&lo&&lo(this.currentDirection);return}this.updateAxis("x",hn.point,ho),this.updateAxis("y",hn.point,ho),this.visualElement.render(),fo&&fo(uo,hn)},un=(uo,hn)=>this.stop(uo,hn),Xr=()=>eachAxis(uo=>{var hn;return this.getAnimationState(uo)==="paused"&&((hn=this.getAxisMotionValue(uo).animation)===null||hn===void 0?void 0:hn.play())}),{dragSnapToOrigin:to}=this.getProps();this.panSession=new PanSession(st,{onSessionStart:on,onStart:an,onMove:sn,onSessionEnd:un,resumeAnimation:Xr},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:to,contextWindow:getContextWindow(this.visualElement)})}stop(st,nn){const rn=this.isDragging;if(this.cancel(),!rn)return;const{velocity:on}=nn;this.startAnimation(on);const{onDragEnd:an}=this.getProps();an&&frame.postRender(()=>an(st,nn))}cancel(){this.isDragging=!1;const{projection:st,animationState:nn}=this.visualElement;st&&(st.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:rn}=this.getProps();!rn&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),nn&&nn.setActive("whileDrag",!1)}updateAxis(st,nn,rn){const{drag:on}=this.getProps();if(!rn||!shouldDrag(st,on,this.currentDirection))return;const an=this.getAxisMotionValue(st);let sn=this.originPoint[st]+rn[st];this.constraints&&this.constraints[st]&&(sn=applyConstraints(sn,this.constraints[st],this.elastic[st])),an.set(sn)}resolveConstraints(){var st;const{dragConstraints:nn,dragElastic:rn}=this.getProps(),on=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(st=this.visualElement.projection)===null||st===void 0?void 0:st.layout,an=this.constraints;nn&&isRefObject(nn)?this.constraints||(this.constraints=this.resolveRefConstraints()):nn&&on?this.constraints=calcRelativeConstraints(on.layoutBox,nn):this.constraints=!1,this.elastic=resolveDragElastic(rn),an!==this.constraints&&on&&this.constraints&&!this.hasMutatedConstraints&&eachAxis(sn=>{this.constraints!==!1&&this.getAxisMotionValue(sn)&&(this.constraints[sn]=rebaseAxisConstraints(on.layoutBox[sn],this.constraints[sn]))})}resolveRefConstraints(){const{dragConstraints:st,onMeasureDragConstraints:nn}=this.getProps();if(!st||!isRefObject(st))return!1;const rn=st.current,{projection:on}=this.visualElement;if(!on||!on.layout)return!1;const an=measurePageBox(rn,on.root,this.visualElement.getTransformPagePoint());let sn=calcViewportConstraints(on.layout.layoutBox,an);if(nn){const un=nn(convertBoxToBoundingBox(sn));this.hasMutatedConstraints=!!un,un&&(sn=convertBoundingBoxToBox(un))}return sn}startAnimation(st){const{drag:nn,dragMomentum:rn,dragElastic:on,dragTransition:an,dragSnapToOrigin:sn,onDragTransitionEnd:un}=this.getProps(),Xr=this.constraints||{},to=eachAxis(uo=>{if(!shouldDrag(uo,nn,this.currentDirection))return;let hn=Xr&&Xr[uo]||{};sn&&(hn={min:0,max:0});const fn=on?200:1e6,co=on?40:1e7,lo={type:"inertia",velocity:rn?st[uo]:0,bounceStiffness:fn,bounceDamping:co,timeConstant:750,restDelta:1,restSpeed:10,...an,...hn};return this.startAxisValueAnimation(uo,lo)});return Promise.all(to).then(un)}startAxisValueAnimation(st,nn){const rn=this.getAxisMotionValue(st);return addValueToWillChange(this.visualElement,st),rn.start(animateMotionValue(st,rn,0,nn,this.visualElement,!1))}stopAnimation(){eachAxis(st=>this.getAxisMotionValue(st).stop())}pauseAnimation(){eachAxis(st=>{var nn;return(nn=this.getAxisMotionValue(st).animation)===null||nn===void 0?void 0:nn.pause()})}getAnimationState(st){var nn;return(nn=this.getAxisMotionValue(st).animation)===null||nn===void 0?void 0:nn.state}getAxisMotionValue(st){const nn=`_drag${st.toUpperCase()}`,rn=this.visualElement.getProps(),on=rn[nn];return on||this.visualElement.getValue(st,(rn.initial?rn.initial[st]:void 0)||0)}snapToCursor(st){eachAxis(nn=>{const{drag:rn}=this.getProps();if(!shouldDrag(nn,rn,this.currentDirection))return;const{projection:on}=this.visualElement,an=this.getAxisMotionValue(nn);if(on&&on.layout){const{min:sn,max:un}=on.layout.layoutBox[nn];an.set(st[nn]-mixNumber$1(sn,un,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:st,dragConstraints:nn}=this.getProps(),{projection:rn}=this.visualElement;if(!isRefObject(nn)||!rn||!this.constraints)return;this.stopAnimation();const on={x:0,y:0};eachAxis(sn=>{const un=this.getAxisMotionValue(sn);if(un&&this.constraints!==!1){const Xr=un.get();on[sn]=calcOrigin({min:Xr,max:Xr},this.constraints[sn])}});const{transformTemplate:an}=this.visualElement.getProps();this.visualElement.current.style.transform=an?an({},""):"none",rn.root&&rn.root.updateScroll(),rn.updateLayout(),this.resolveConstraints(),eachAxis(sn=>{if(!shouldDrag(sn,st,null))return;const un=this.getAxisMotionValue(sn),{min:Xr,max:to}=this.constraints[sn];un.set(mixNumber$1(Xr,to,on[sn]))})}addListeners(){if(!this.visualElement.current)return;elementDragControls.set(this.visualElement,this);const st=this.visualElement.current,nn=addPointerEvent(st,"pointerdown",Xr=>{const{drag:to,dragListener:uo=!0}=this.getProps();to&&uo&&this.start(Xr)}),rn=()=>{const{dragConstraints:Xr}=this.getProps();isRefObject(Xr)&&Xr.current&&(this.constraints=this.resolveRefConstraints())},{projection:on}=this.visualElement,an=on.addEventListener("measure",rn);on&&!on.layout&&(on.root&&on.root.updateScroll(),on.updateLayout()),frame.read(rn);const sn=addDomEvent(window,"resize",()=>this.scalePositionWithinConstraints()),un=on.addEventListener("didUpdate",({delta:Xr,hasLayoutChanged:to})=>{this.isDragging&&to&&(eachAxis(uo=>{const hn=this.getAxisMotionValue(uo);hn&&(this.originPoint[uo]+=Xr[uo].translate,hn.set(hn.get()+Xr[uo].translate))}),this.visualElement.render())});return()=>{sn(),nn(),an(),un&&un()}}getProps(){const st=this.visualElement.getProps(),{drag:nn=!1,dragDirectionLock:rn=!1,dragPropagation:on=!1,dragConstraints:an=!1,dragElastic:sn=defaultElastic,dragMomentum:un=!0}=st;return{...st,drag:nn,dragDirectionLock:rn,dragPropagation:on,dragConstraints:an,dragElastic:sn,dragMomentum:un}}}function shouldDrag(Mt,st,nn){return(st===!0||st===Mt)&&(nn===null||nn===Mt)}function getCurrentDirection(Mt,st=10){let nn=null;return Math.abs(Mt.y)>st?nn="y":Math.abs(Mt.x)>st&&(nn="x"),nn}class DragGesture extends Feature{constructor(st){super(st),this.removeGroupControls=noop$3,this.removeListeners=noop$3,this.controls=new VisualElementDragControls(st)}mount(){const{dragControls:st}=this.node.getProps();st&&(this.removeGroupControls=st.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||noop$3}unmount(){this.removeGroupControls(),this.removeListeners()}}const asyncHandler=Mt=>(st,nn)=>{Mt&&frame.postRender(()=>Mt(st,nn))};class PanGesture extends Feature{constructor(){super(...arguments),this.removePointerDownListener=noop$3}onPointerDown(st){this.session=new PanSession(st,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:getContextWindow(this.node)})}createPanHandlers(){const{onPanSessionStart:st,onPanStart:nn,onPan:rn,onPanEnd:on}=this.node.getProps();return{onSessionStart:asyncHandler(st),onStart:asyncHandler(nn),onMove:rn,onEnd:(an,sn)=>{delete this.session,on&&frame.postRender(()=>on(an,sn))}}}mount(){this.removePointerDownListener=addPointerEvent(this.node.current,"pointerdown",st=>this.onPointerDown(st))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const globalProjectionState={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function pixelsToPercent(Mt,st){return st.max===st.min?0:Mt/(st.max-st.min)*100}const correctBorderRadius={correct:(Mt,st)=>{if(!st.target)return Mt;if(typeof Mt=="string")if(px.test(Mt))Mt=parseFloat(Mt);else return Mt;const nn=pixelsToPercent(Mt,st.target.x),rn=pixelsToPercent(Mt,st.target.y);return`${nn}% ${rn}%`}},correctBoxShadow={correct:(Mt,{treeScale:st,projectionDelta:nn})=>{const rn=Mt,on=complex.parse(Mt);if(on.length>5)return rn;const an=complex.createTransformer(Mt),sn=typeof on[0]!="number"?1:0,un=nn.x.scale*st.x,Xr=nn.y.scale*st.y;on[0+sn]/=un,on[1+sn]/=Xr;const to=mixNumber$1(un,Xr,.5);return typeof on[2+sn]=="number"&&(on[2+sn]/=to),typeof on[3+sn]=="number"&&(on[3+sn]/=to),an(on)}};class MeasureLayoutWithContext extends reactExports.Component{componentDidMount(){const{visualElement:st,layoutGroup:nn,switchLayoutGroup:rn,layoutId:on}=this.props,{projection:an}=st;addScaleCorrector(defaultScaleCorrectors),an&&(nn.group&&nn.group.add(an),rn&&rn.register&&on&&rn.register(an),an.root.didUpdate(),an.addEventListener("animationComplete",()=>{this.safeToRemove()}),an.setOptions({...an.options,onExitComplete:()=>this.safeToRemove()})),globalProjectionState.hasEverUpdated=!0}getSnapshotBeforeUpdate(st){const{layoutDependency:nn,visualElement:rn,drag:on,isPresent:an}=this.props,sn=rn.projection;return sn&&(sn.isPresent=an,on||st.layoutDependency!==nn||nn===void 0?sn.willUpdate():this.safeToRemove(),st.isPresent!==an&&(an?sn.promote():sn.relegate()||frame.postRender(()=>{const un=sn.getStack();(!un||!un.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:st}=this.props.visualElement;st&&(st.root.didUpdate(),microtask.postRender(()=>{!st.currentAnimation&&st.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:st,layoutGroup:nn,switchLayoutGroup:rn}=this.props,{projection:on}=st;on&&(on.scheduleCheckAfterUnmount(),nn&&nn.group&&nn.group.remove(on),rn&&rn.deregister&&rn.deregister(on))}safeToRemove(){const{safeToRemove:st}=this.props;st&&st()}render(){return null}}function MeasureLayout(Mt){const[st,nn]=usePresence(),rn=reactExports.useContext(LayoutGroupContext);return jsxRuntimeExports.jsx(MeasureLayoutWithContext,{...Mt,layoutGroup:rn,switchLayoutGroup:reactExports.useContext(SwitchLayoutGroupContext),isPresent:st,safeToRemove:nn})}const defaultScaleCorrectors={borderRadius:{...correctBorderRadius,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:correctBorderRadius,borderTopRightRadius:correctBorderRadius,borderBottomLeftRadius:correctBorderRadius,borderBottomRightRadius:correctBorderRadius,boxShadow:correctBoxShadow};function animateSingleValue(Mt,st,nn){const rn=isMotionValue(Mt)?Mt:motionValue(Mt);return rn.start(animateMotionValue("",rn,st,nn)),rn.animation}function isSVGElement(Mt){return Mt instanceof SVGElement&&Mt.tagName!=="svg"}const compareByDepth=(Mt,st)=>Mt.depth-st.depth;class FlatTree{constructor(){this.children=[],this.isDirty=!1}add(st){addUniqueItem(this.children,st),this.isDirty=!0}remove(st){removeItem(this.children,st),this.isDirty=!0}forEach(st){this.isDirty&&this.children.sort(compareByDepth),this.isDirty=!1,this.children.forEach(st)}}function delay(Mt,st){const nn=time$1.now(),rn=({timestamp:on})=>{const an=on-nn;an>=st&&(cancelFrame(rn),Mt(an-st))};return frame.read(rn,!0),()=>cancelFrame(rn)}const borders=["TopLeft","TopRight","BottomLeft","BottomRight"],numBorders=borders.length,asNumber=Mt=>typeof Mt=="string"?parseFloat(Mt):Mt,isPx=Mt=>typeof Mt=="number"||px.test(Mt);function mixValues(Mt,st,nn,rn,on,an){on?(Mt.opacity=mixNumber$1(0,nn.opacity!==void 0?nn.opacity:1,easeCrossfadeIn(rn)),Mt.opacityExit=mixNumber$1(st.opacity!==void 0?st.opacity:1,0,easeCrossfadeOut(rn))):an&&(Mt.opacity=mixNumber$1(st.opacity!==void 0?st.opacity:1,nn.opacity!==void 0?nn.opacity:1,rn));for(let sn=0;sn<numBorders;sn++){const un=`border${borders[sn]}Radius`;let Xr=getRadius(st,un),to=getRadius(nn,un);if(Xr===void 0&&to===void 0)continue;Xr||(Xr=0),to||(to=0),Xr===0||to===0||isPx(Xr)===isPx(to)?(Mt[un]=Math.max(mixNumber$1(asNumber(Xr),asNumber(to),rn),0),(percent.test(to)||percent.test(Xr))&&(Mt[un]+="%")):Mt[un]=to}(st.rotate||nn.rotate)&&(Mt.rotate=mixNumber$1(st.rotate||0,nn.rotate||0,rn))}function getRadius(Mt,st){return Mt[st]!==void 0?Mt[st]:Mt.borderRadius}const easeCrossfadeIn=compress(0,.5,circOut),easeCrossfadeOut=compress(.5,.95,noop$3);function compress(Mt,st,nn){return rn=>rn<Mt?0:rn>st?1:nn(progress(Mt,st,rn))}function copyAxisInto(Mt,st){Mt.min=st.min,Mt.max=st.max}function copyBoxInto(Mt,st){copyAxisInto(Mt.x,st.x),copyAxisInto(Mt.y,st.y)}function copyAxisDeltaInto(Mt,st){Mt.translate=st.translate,Mt.scale=st.scale,Mt.originPoint=st.originPoint,Mt.origin=st.origin}function removePointDelta(Mt,st,nn,rn,on){return Mt-=st,Mt=scalePoint(Mt,1/nn,rn),on!==void 0&&(Mt=scalePoint(Mt,1/on,rn)),Mt}function removeAxisDelta(Mt,st=0,nn=1,rn=.5,on,an=Mt,sn=Mt){if(percent.test(st)&&(st=parseFloat(st),st=mixNumber$1(sn.min,sn.max,st/100)-sn.min),typeof st!="number")return;let un=mixNumber$1(an.min,an.max,rn);Mt===an&&(un-=st),Mt.min=removePointDelta(Mt.min,st,nn,un,on),Mt.max=removePointDelta(Mt.max,st,nn,un,on)}function removeAxisTransforms(Mt,st,[nn,rn,on],an,sn){removeAxisDelta(Mt,st[nn],st[rn],st[on],st.scale,an,sn)}const xKeys=["x","scaleX","originX"],yKeys=["y","scaleY","originY"];function removeBoxTransforms(Mt,st,nn,rn){removeAxisTransforms(Mt.x,st,xKeys,nn?nn.x:void 0,rn?rn.x:void 0),removeAxisTransforms(Mt.y,st,yKeys,nn?nn.y:void 0,rn?rn.y:void 0)}function isAxisDeltaZero(Mt){return Mt.translate===0&&Mt.scale===1}function isDeltaZero(Mt){return isAxisDeltaZero(Mt.x)&&isAxisDeltaZero(Mt.y)}function axisEquals(Mt,st){return Mt.min===st.min&&Mt.max===st.max}function boxEquals(Mt,st){return axisEquals(Mt.x,st.x)&&axisEquals(Mt.y,st.y)}function axisEqualsRounded(Mt,st){return Math.round(Mt.min)===Math.round(st.min)&&Math.round(Mt.max)===Math.round(st.max)}function boxEqualsRounded(Mt,st){return axisEqualsRounded(Mt.x,st.x)&&axisEqualsRounded(Mt.y,st.y)}function aspectRatio(Mt){return calcLength(Mt.x)/calcLength(Mt.y)}function axisDeltaEquals(Mt,st){return Mt.translate===st.translate&&Mt.scale===st.scale&&Mt.originPoint===st.originPoint}class NodeStack{constructor(){this.members=[]}add(st){addUniqueItem(this.members,st),st.scheduleRender()}remove(st){if(removeItem(this.members,st),st===this.prevLead&&(this.prevLead=void 0),st===this.lead){const nn=this.members[this.members.length-1];nn&&this.promote(nn)}}relegate(st){const nn=this.members.findIndex(on=>st===on);if(nn===0)return!1;let rn;for(let on=nn;on>=0;on--){const an=this.members[on];if(an.isPresent!==!1){rn=an;break}}return rn?(this.promote(rn),!0):!1}promote(st,nn){const rn=this.lead;if(st!==rn&&(this.prevLead=rn,this.lead=st,st.show(),rn)){rn.instance&&rn.scheduleRender(),st.scheduleRender(),st.resumeFrom=rn,nn&&(st.resumeFrom.preserveOpacity=!0),rn.snapshot&&(st.snapshot=rn.snapshot,st.snapshot.latestValues=rn.animationValues||rn.latestValues),st.root&&st.root.isUpdating&&(st.isLayoutDirty=!0);const{crossfade:on}=st.options;on===!1&&rn.hide()}}exitAnimationComplete(){this.members.forEach(st=>{const{options:nn,resumingFrom:rn}=st;nn.onExitComplete&&nn.onExitComplete(),rn&&rn.options.onExitComplete&&rn.options.onExitComplete()})}scheduleRender(){this.members.forEach(st=>{st.instance&&st.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function buildProjectionTransform(Mt,st,nn){let rn="";const on=Mt.x.translate/st.x,an=Mt.y.translate/st.y,sn=(nn==null?void 0:nn.z)||0;if((on||an||sn)&&(rn=`translate3d(${on}px, ${an}px, ${sn}px) `),(st.x!==1||st.y!==1)&&(rn+=`scale(${1/st.x}, ${1/st.y}) `),nn){const{transformPerspective:to,rotate:uo,rotateX:hn,rotateY:fn,skewX:co,skewY:lo}=nn;to&&(rn=`perspective(${to}px) ${rn}`),uo&&(rn+=`rotate(${uo}deg) `),hn&&(rn+=`rotateX(${hn}deg) `),fn&&(rn+=`rotateY(${fn}deg) `),co&&(rn+=`skewX(${co}deg) `),lo&&(rn+=`skewY(${lo}deg) `)}const un=Mt.x.scale*st.x,Xr=Mt.y.scale*st.y;return(un!==1||Xr!==1)&&(rn+=`scale(${un}, ${Xr})`),rn||"none"}const metrics={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},isDebug=typeof window<"u"&&window.MotionDebug!==void 0,transformAxes=["","X","Y","Z"],hiddenVisibility={visibility:"hidden"},animationTarget=1e3;let id$1=0;function resetDistortingTransform(Mt,st,nn,rn){const{latestValues:on}=st;on[Mt]&&(nn[Mt]=on[Mt],st.setStaticValue(Mt,0),rn&&(rn[Mt]=0))}function cancelTreeOptimisedTransformAnimations(Mt){if(Mt.hasCheckedOptimisedAppear=!0,Mt.root===Mt)return;const{visualElement:st}=Mt.options;if(!st)return;const nn=getOptimisedAppearId(st);if(window.MotionHasOptimisedAnimation(nn,"transform")){const{layout:on,layoutId:an}=Mt.options;window.MotionCancelOptimisedAnimation(nn,"transform",frame,!(on||an))}const{parent:rn}=Mt;rn&&!rn.hasCheckedOptimisedAppear&&cancelTreeOptimisedTransformAnimations(rn)}function createProjectionNode({attachResizeListener:Mt,defaultParent:st,measureScroll:nn,checkIsScrollRoot:rn,resetTransform:on}){return class{constructor(sn={},un=st==null?void 0:st()){this.id=id$1++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,isDebug&&(metrics.totalNodes=metrics.resolvedTargetDeltas=metrics.recalculatedProjection=0),this.nodes.forEach(propagateDirtyNodes),this.nodes.forEach(resolveTargetDelta),this.nodes.forEach(calcProjection),this.nodes.forEach(cleanDirtyNodes),isDebug&&window.MotionDebug.record(metrics)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=sn,this.root=un?un.root||un:this,this.path=un?[...un.path,un]:[],this.parent=un,this.depth=un?un.depth+1:0;for(let Xr=0;Xr<this.path.length;Xr++)this.path[Xr].shouldResetTransform=!0;this.root===this&&(this.nodes=new FlatTree)}addEventListener(sn,un){return this.eventHandlers.has(sn)||this.eventHandlers.set(sn,new SubscriptionManager),this.eventHandlers.get(sn).add(un)}notifyListeners(sn,...un){const Xr=this.eventHandlers.get(sn);Xr&&Xr.notify(...un)}hasListeners(sn){return this.eventHandlers.has(sn)}mount(sn,un=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=isSVGElement(sn),this.instance=sn;const{layoutId:Xr,layout:to,visualElement:uo}=this.options;if(uo&&!uo.current&&uo.mount(sn),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),un&&(to||Xr)&&(this.isLayoutDirty=!0),Mt){let hn;const fn=()=>this.root.updateBlockedByResize=!1;Mt(sn,()=>{this.root.updateBlockedByResize=!0,hn&&hn(),hn=delay(fn,250),globalProjectionState.hasAnimatedSinceResize&&(globalProjectionState.hasAnimatedSinceResize=!1,this.nodes.forEach(finishAnimation))})}Xr&&this.root.registerSharedNode(Xr,this),this.options.animate!==!1&&uo&&(Xr||to)&&this.addEventListener("didUpdate",({delta:hn,hasLayoutChanged:fn,hasRelativeTargetChanged:co,layout:lo})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const fo=this.options.transition||uo.getDefaultTransition()||defaultLayoutTransition,{onLayoutAnimationStart:ho,onLayoutAnimationComplete:mo}=uo.getProps(),Uo=!this.targetLayout||!boxEqualsRounded(this.targetLayout,lo)||co,_d=!fn&&co;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||_d||fn&&(Uo||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(hn,_d);const tp={...getValueTransition(fo,"layout"),onPlay:ho,onComplete:mo};(uo.shouldReduceMotion||this.options.layoutRoot)&&(tp.delay=0,tp.type=!1),this.startAnimation(tp)}else fn||finishAnimation(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=lo})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const sn=this.getStack();sn&&sn.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,cancelFrame(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(resetSkewAndRotation),this.animationId++)}getTransformTemplate(){const{visualElement:sn}=this.options;return sn&&sn.getProps().transformTemplate}willUpdate(sn=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&cancelTreeOptimisedTransformAnimations(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let uo=0;uo<this.path.length;uo++){const hn=this.path[uo];hn.shouldResetTransform=!0,hn.updateScroll("snapshot"),hn.options.layoutRoot&&hn.willUpdate(!1)}const{layoutId:un,layout:Xr}=this.options;if(un===void 0&&!Xr)return;const to=this.getTransformTemplate();this.prevTransformTemplateValue=to?to(this.latestValues,""):void 0,this.updateSnapshot(),sn&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(clearMeasurements);return}this.isUpdating||this.nodes.forEach(clearIsLayoutDirty),this.isUpdating=!1,this.nodes.forEach(resetTransformStyle),this.nodes.forEach(updateLayout),this.nodes.forEach(notifyLayoutUpdate),this.clearAllSnapshots();const un=time$1.now();frameData.delta=clamp$2(0,1e3/60,un-frameData.timestamp),frameData.timestamp=un,frameData.isProcessing=!0,frameSteps.update.process(frameData),frameSteps.preRender.process(frameData),frameSteps.render.process(frameData),frameData.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,microtask.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(clearSnapshot),this.sharedNodes.forEach(removeLeadSnapshots)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,frame.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){frame.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let Xr=0;Xr<this.path.length;Xr++)this.path[Xr].updateScroll();const sn=this.layout;this.layout=this.measure(!1),this.layoutCorrected=createBox(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:un}=this.options;un&&un.notify("LayoutMeasure",this.layout.layoutBox,sn?sn.layoutBox:void 0)}updateScroll(sn="measure"){let un=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===sn&&(un=!1),un){const Xr=rn(this.instance);this.scroll={animationId:this.root.animationId,phase:sn,isRoot:Xr,offset:nn(this.instance),wasRoot:this.scroll?this.scroll.isRoot:Xr}}}resetTransform(){if(!on)return;const sn=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,un=this.projectionDelta&&!isDeltaZero(this.projectionDelta),Xr=this.getTransformTemplate(),to=Xr?Xr(this.latestValues,""):void 0,uo=to!==this.prevTransformTemplateValue;sn&&(un||hasTransform(this.latestValues)||uo)&&(on(this.instance,to),this.shouldResetTransform=!1,this.scheduleRender())}measure(sn=!0){const un=this.measurePageBox();let Xr=this.removeElementScroll(un);return sn&&(Xr=this.removeTransform(Xr)),roundBox(Xr),{animationId:this.root.animationId,measuredBox:un,layoutBox:Xr,latestValues:{},source:this.id}}measurePageBox(){var sn;const{visualElement:un}=this.options;if(!un)return createBox();const Xr=un.measureViewportBox();if(!(((sn=this.scroll)===null||sn===void 0?void 0:sn.wasRoot)||this.path.some(checkNodeWasScrollRoot))){const{scroll:uo}=this.root;uo&&(translateAxis(Xr.x,uo.offset.x),translateAxis(Xr.y,uo.offset.y))}return Xr}removeElementScroll(sn){var un;const Xr=createBox();if(copyBoxInto(Xr,sn),!((un=this.scroll)===null||un===void 0)&&un.wasRoot)return Xr;for(let to=0;to<this.path.length;to++){const uo=this.path[to],{scroll:hn,options:fn}=uo;uo!==this.root&&hn&&fn.layoutScroll&&(hn.wasRoot&&copyBoxInto(Xr,sn),translateAxis(Xr.x,hn.offset.x),translateAxis(Xr.y,hn.offset.y))}return Xr}applyTransform(sn,un=!1){const Xr=createBox();copyBoxInto(Xr,sn);for(let to=0;to<this.path.length;to++){const uo=this.path[to];!un&&uo.options.layoutScroll&&uo.scroll&&uo!==uo.root&&transformBox(Xr,{x:-uo.scroll.offset.x,y:-uo.scroll.offset.y}),hasTransform(uo.latestValues)&&transformBox(Xr,uo.latestValues)}return hasTransform(this.latestValues)&&transformBox(Xr,this.latestValues),Xr}removeTransform(sn){const un=createBox();copyBoxInto(un,sn);for(let Xr=0;Xr<this.path.length;Xr++){const to=this.path[Xr];if(!to.instance||!hasTransform(to.latestValues))continue;hasScale(to.latestValues)&&to.updateSnapshot();const uo=createBox(),hn=to.measurePageBox();copyBoxInto(uo,hn),removeBoxTransforms(un,to.latestValues,to.snapshot?to.snapshot.layoutBox:void 0,uo)}return hasTransform(this.latestValues)&&removeBoxTransforms(un,this.latestValues),un}setTargetDelta(sn){this.targetDelta=sn,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(sn){this.options={...this.options,...sn,crossfade:sn.crossfade!==void 0?sn.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==frameData.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(sn=!1){var un;const Xr=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=Xr.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=Xr.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=Xr.isSharedProjectionDirty);const to=!!this.resumingFrom||this!==Xr;if(!(sn||to&&this.isSharedProjectionDirty||this.isProjectionDirty||!((un=this.parent)===null||un===void 0)&&un.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:hn,layoutId:fn}=this.options;if(!(!this.layout||!(hn||fn))){if(this.resolvedRelativeTargetAt=frameData.timestamp,!this.targetDelta&&!this.relativeTarget){const co=this.getClosestProjectingParent();co&&co.layout&&this.animationProgress!==1?(this.relativeParent=co,this.forceRelativeParentToResolveTarget(),this.relativeTarget=createBox(),this.relativeTargetOrigin=createBox(),calcRelativePosition(this.relativeTargetOrigin,this.layout.layoutBox,co.layout.layoutBox),copyBoxInto(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=createBox(),this.targetWithTransforms=createBox()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),calcRelativeBox(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):copyBoxInto(this.target,this.layout.layoutBox),applyBoxDelta(this.target,this.targetDelta)):copyBoxInto(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const co=this.getClosestProjectingParent();co&&!!co.resumingFrom==!!this.resumingFrom&&!co.options.layoutScroll&&co.target&&this.animationProgress!==1?(this.relativeParent=co,this.forceRelativeParentToResolveTarget(),this.relativeTarget=createBox(),this.relativeTargetOrigin=createBox(),calcRelativePosition(this.relativeTargetOrigin,this.target,co.target),copyBoxInto(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}isDebug&&metrics.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||hasScale(this.parent.latestValues)||has2DTranslate(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var sn;const un=this.getLead(),Xr=!!this.resumingFrom||this!==un;let to=!0;if((this.isProjectionDirty||!((sn=this.parent)===null||sn===void 0)&&sn.isProjectionDirty)&&(to=!1),Xr&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(to=!1),this.resolvedRelativeTargetAt===frameData.timestamp&&(to=!1),to)return;const{layout:uo,layoutId:hn}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(uo||hn))return;copyBoxInto(this.layoutCorrected,this.layout.layoutBox);const fn=this.treeScale.x,co=this.treeScale.y;applyTreeDeltas(this.layoutCorrected,this.treeScale,this.path,Xr),un.layout&&!un.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(un.target=un.layout.layoutBox,un.targetWithTransforms=createBox());const{target:lo}=un;if(!lo){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(copyAxisDeltaInto(this.prevProjectionDelta.x,this.projectionDelta.x),copyAxisDeltaInto(this.prevProjectionDelta.y,this.projectionDelta.y)),calcBoxDelta(this.projectionDelta,this.layoutCorrected,lo,this.latestValues),(this.treeScale.x!==fn||this.treeScale.y!==co||!axisDeltaEquals(this.projectionDelta.x,this.prevProjectionDelta.x)||!axisDeltaEquals(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",lo)),isDebug&&metrics.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(sn=!0){var un;if((un=this.options.visualElement)===null||un===void 0||un.scheduleRender(),sn){const Xr=this.getStack();Xr&&Xr.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=createDelta(),this.projectionDelta=createDelta(),this.projectionDeltaWithTransform=createDelta()}setAnimationOrigin(sn,un=!1){const Xr=this.snapshot,to=Xr?Xr.latestValues:{},uo={...this.latestValues},hn=createDelta();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!un;const fn=createBox(),co=Xr?Xr.source:void 0,lo=this.layout?this.layout.source:void 0,fo=co!==lo,ho=this.getStack(),mo=!ho||ho.members.length<=1,Uo=!!(fo&&!mo&&this.options.crossfade===!0&&!this.path.some(hasOpacityCrossfade));this.animationProgress=0;let _d;this.mixTargetDelta=tp=>{const ep=tp/1e3;mixAxisDelta(hn.x,sn.x,ep),mixAxisDelta(hn.y,sn.y,ep),this.setTargetDelta(hn),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(calcRelativePosition(fn,this.layout.layoutBox,this.relativeParent.layout.layoutBox),mixBox(this.relativeTarget,this.relativeTargetOrigin,fn,ep),_d&&boxEquals(this.relativeTarget,_d)&&(this.isProjectionDirty=!1),_d||(_d=createBox()),copyBoxInto(_d,this.relativeTarget)),fo&&(this.animationValues=uo,mixValues(uo,to,this.latestValues,ep,Uo,mo)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=ep},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(sn){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(cancelFrame(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=frame.update(()=>{globalProjectionState.hasAnimatedSinceResize=!0,this.currentAnimation=animateSingleValue(0,animationTarget,{...sn,onUpdate:un=>{this.mixTargetDelta(un),sn.onUpdate&&sn.onUpdate(un)},onComplete:()=>{sn.onComplete&&sn.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const sn=this.getStack();sn&&sn.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(animationTarget),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const sn=this.getLead();let{targetWithTransforms:un,target:Xr,layout:to,latestValues:uo}=sn;if(!(!un||!Xr||!to)){if(this!==sn&&this.layout&&to&&shouldAnimatePositionOnly(this.options.animationType,this.layout.layoutBox,to.layoutBox)){Xr=this.target||createBox();const hn=calcLength(this.layout.layoutBox.x);Xr.x.min=sn.target.x.min,Xr.x.max=Xr.x.min+hn;const fn=calcLength(this.layout.layoutBox.y);Xr.y.min=sn.target.y.min,Xr.y.max=Xr.y.min+fn}copyBoxInto(un,Xr),transformBox(un,uo),calcBoxDelta(this.projectionDeltaWithTransform,this.layoutCorrected,un,uo)}}registerSharedNode(sn,un){this.sharedNodes.has(sn)||this.sharedNodes.set(sn,new NodeStack),this.sharedNodes.get(sn).add(un);const to=un.options.initialPromotionConfig;un.promote({transition:to?to.transition:void 0,preserveFollowOpacity:to&&to.shouldPreserveFollowOpacity?to.shouldPreserveFollowOpacity(un):void 0})}isLead(){const sn=this.getStack();return sn?sn.lead===this:!0}getLead(){var sn;const{layoutId:un}=this.options;return un?((sn=this.getStack())===null||sn===void 0?void 0:sn.lead)||this:this}getPrevLead(){var sn;const{layoutId:un}=this.options;return un?(sn=this.getStack())===null||sn===void 0?void 0:sn.prevLead:void 0}getStack(){const{layoutId:sn}=this.options;if(sn)return this.root.sharedNodes.get(sn)}promote({needsReset:sn,transition:un,preserveFollowOpacity:Xr}={}){const to=this.getStack();to&&to.promote(this,Xr),sn&&(this.projectionDelta=void 0,this.needsReset=!0),un&&this.setOptions({transition:un})}relegate(){const sn=this.getStack();return sn?sn.relegate(this):!1}resetSkewAndRotation(){const{visualElement:sn}=this.options;if(!sn)return;let un=!1;const{latestValues:Xr}=sn;if((Xr.z||Xr.rotate||Xr.rotateX||Xr.rotateY||Xr.rotateZ||Xr.skewX||Xr.skewY)&&(un=!0),!un)return;const to={};Xr.z&&resetDistortingTransform("z",sn,to,this.animationValues);for(let uo=0;uo<transformAxes.length;uo++)resetDistortingTransform(`rotate${transformAxes[uo]}`,sn,to,this.animationValues),resetDistortingTransform(`skew${transformAxes[uo]}`,sn,to,this.animationValues);sn.render();for(const uo in to)sn.setStaticValue(uo,to[uo]),this.animationValues&&(this.animationValues[uo]=to[uo]);sn.scheduleRender()}getProjectionStyles(sn){var un,Xr;if(!this.instance||this.isSVG)return;if(!this.isVisible)return hiddenVisibility;const to={visibility:""},uo=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,to.opacity="",to.pointerEvents=resolveMotionValue(sn==null?void 0:sn.pointerEvents)||"",to.transform=uo?uo(this.latestValues,""):"none",to;const hn=this.getLead();if(!this.projectionDelta||!this.layout||!hn.target){const fo={};return this.options.layoutId&&(fo.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,fo.pointerEvents=resolveMotionValue(sn==null?void 0:sn.pointerEvents)||""),this.hasProjected&&!hasTransform(this.latestValues)&&(fo.transform=uo?uo({},""):"none",this.hasProjected=!1),fo}const fn=hn.animationValues||hn.latestValues;this.applyTransformsToTarget(),to.transform=buildProjectionTransform(this.projectionDeltaWithTransform,this.treeScale,fn),uo&&(to.transform=uo(fn,to.transform));const{x:co,y:lo}=this.projectionDelta;to.transformOrigin=`${co.origin*100}% ${lo.origin*100}% 0`,hn.animationValues?to.opacity=hn===this?(Xr=(un=fn.opacity)!==null&&un!==void 0?un:this.latestValues.opacity)!==null&&Xr!==void 0?Xr:1:this.preserveOpacity?this.latestValues.opacity:fn.opacityExit:to.opacity=hn===this?fn.opacity!==void 0?fn.opacity:"":fn.opacityExit!==void 0?fn.opacityExit:0;for(const fo in scaleCorrectors){if(fn[fo]===void 0)continue;const{correct:ho,applyTo:mo}=scaleCorrectors[fo],Uo=to.transform==="none"?fn[fo]:ho(fn[fo],hn);if(mo){const _d=mo.length;for(let tp=0;tp<_d;tp++)to[mo[tp]]=Uo}else to[fo]=Uo}return this.options.layoutId&&(to.pointerEvents=hn===this?resolveMotionValue(sn==null?void 0:sn.pointerEvents)||"":"none"),to}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(sn=>{var un;return(un=sn.currentAnimation)===null||un===void 0?void 0:un.stop()}),this.root.nodes.forEach(clearMeasurements),this.root.sharedNodes.clear()}}}function updateLayout(Mt){Mt.updateLayout()}function notifyLayoutUpdate(Mt){var st;const nn=((st=Mt.resumeFrom)===null||st===void 0?void 0:st.snapshot)||Mt.snapshot;if(Mt.isLead()&&Mt.layout&&nn&&Mt.hasListeners("didUpdate")){const{layoutBox:rn,measuredBox:on}=Mt.layout,{animationType:an}=Mt.options,sn=nn.source!==Mt.layout.source;an==="size"?eachAxis(hn=>{const fn=sn?nn.measuredBox[hn]:nn.layoutBox[hn],co=calcLength(fn);fn.min=rn[hn].min,fn.max=fn.min+co}):shouldAnimatePositionOnly(an,nn.layoutBox,rn)&&eachAxis(hn=>{const fn=sn?nn.measuredBox[hn]:nn.layoutBox[hn],co=calcLength(rn[hn]);fn.max=fn.min+co,Mt.relativeTarget&&!Mt.currentAnimation&&(Mt.isProjectionDirty=!0,Mt.relativeTarget[hn].max=Mt.relativeTarget[hn].min+co)});const un=createDelta();calcBoxDelta(un,rn,nn.layoutBox);const Xr=createDelta();sn?calcBoxDelta(Xr,Mt.applyTransform(on,!0),nn.measuredBox):calcBoxDelta(Xr,rn,nn.layoutBox);const to=!isDeltaZero(un);let uo=!1;if(!Mt.resumeFrom){const hn=Mt.getClosestProjectingParent();if(hn&&!hn.resumeFrom){const{snapshot:fn,layout:co}=hn;if(fn&&co){const lo=createBox();calcRelativePosition(lo,nn.layoutBox,fn.layoutBox);const fo=createBox();calcRelativePosition(fo,rn,co.layoutBox),boxEqualsRounded(lo,fo)||(uo=!0),hn.options.layoutRoot&&(Mt.relativeTarget=fo,Mt.relativeTargetOrigin=lo,Mt.relativeParent=hn)}}}Mt.notifyListeners("didUpdate",{layout:rn,snapshot:nn,delta:Xr,layoutDelta:un,hasLayoutChanged:to,hasRelativeTargetChanged:uo})}else if(Mt.isLead()){const{onExitComplete:rn}=Mt.options;rn&&rn()}Mt.options.transition=void 0}function propagateDirtyNodes(Mt){isDebug&&metrics.totalNodes++,Mt.parent&&(Mt.isProjecting()||(Mt.isProjectionDirty=Mt.parent.isProjectionDirty),Mt.isSharedProjectionDirty||(Mt.isSharedProjectionDirty=!!(Mt.isProjectionDirty||Mt.parent.isProjectionDirty||Mt.parent.isSharedProjectionDirty)),Mt.isTransformDirty||(Mt.isTransformDirty=Mt.parent.isTransformDirty))}function cleanDirtyNodes(Mt){Mt.isProjectionDirty=Mt.isSharedProjectionDirty=Mt.isTransformDirty=!1}function clearSnapshot(Mt){Mt.clearSnapshot()}function clearMeasurements(Mt){Mt.clearMeasurements()}function clearIsLayoutDirty(Mt){Mt.isLayoutDirty=!1}function resetTransformStyle(Mt){const{visualElement:st}=Mt.options;st&&st.getProps().onBeforeLayoutMeasure&&st.notify("BeforeLayoutMeasure"),Mt.resetTransform()}function finishAnimation(Mt){Mt.finishAnimation(),Mt.targetDelta=Mt.relativeTarget=Mt.target=void 0,Mt.isProjectionDirty=!0}function resolveTargetDelta(Mt){Mt.resolveTargetDelta()}function calcProjection(Mt){Mt.calcProjection()}function resetSkewAndRotation(Mt){Mt.resetSkewAndRotation()}function removeLeadSnapshots(Mt){Mt.removeLeadSnapshot()}function mixAxisDelta(Mt,st,nn){Mt.translate=mixNumber$1(st.translate,0,nn),Mt.scale=mixNumber$1(st.scale,1,nn),Mt.origin=st.origin,Mt.originPoint=st.originPoint}function mixAxis(Mt,st,nn,rn){Mt.min=mixNumber$1(st.min,nn.min,rn),Mt.max=mixNumber$1(st.max,nn.max,rn)}function mixBox(Mt,st,nn,rn){mixAxis(Mt.x,st.x,nn.x,rn),mixAxis(Mt.y,st.y,nn.y,rn)}function hasOpacityCrossfade(Mt){return Mt.animationValues&&Mt.animationValues.opacityExit!==void 0}const defaultLayoutTransition={duration:.45,ease:[.4,0,.1,1]},userAgentContains=Mt=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(Mt),roundPoint=userAgentContains("applewebkit/")&&!userAgentContains("chrome/")?Math.round:noop$3;function roundAxis(Mt){Mt.min=roundPoint(Mt.min),Mt.max=roundPoint(Mt.max)}function roundBox(Mt){roundAxis(Mt.x),roundAxis(Mt.y)}function shouldAnimatePositionOnly(Mt,st,nn){return Mt==="position"||Mt==="preserve-aspect"&&!isNear(aspectRatio(st),aspectRatio(nn),.2)}function checkNodeWasScrollRoot(Mt){var st;return Mt!==Mt.root&&((st=Mt.scroll)===null||st===void 0?void 0:st.wasRoot)}const DocumentProjectionNode=createProjectionNode({attachResizeListener:(Mt,st)=>addDomEvent(Mt,"resize",st),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),rootProjectionNode={current:void 0},HTMLProjectionNode=createProjectionNode({measureScroll:Mt=>({x:Mt.scrollLeft,y:Mt.scrollTop}),defaultParent:()=>{if(!rootProjectionNode.current){const Mt=new DocumentProjectionNode({});Mt.mount(window),Mt.setOptions({layoutScroll:!0}),rootProjectionNode.current=Mt}return rootProjectionNode.current},resetTransform:(Mt,st)=>{Mt.style.transform=st!==void 0?st:"none"},checkIsScrollRoot:Mt=>window.getComputedStyle(Mt).position==="fixed"}),drag={pan:{Feature:PanGesture},drag:{Feature:DragGesture,ProjectionNode:HTMLProjectionNode,MeasureLayout}};function handleHoverEvent(Mt,st,nn){const{props:rn}=Mt;Mt.animationState&&rn.whileHover&&Mt.animationState.setActive("whileHover",nn==="Start");const on="onHover"+nn,an=rn[on];an&&frame.postRender(()=>an(st,extractEventInfo(st)))}class HoverGesture extends Feature{mount(){const{current:st}=this.node;st&&(this.unmount=hover(st,nn=>(handleHoverEvent(this.node,nn,"Start"),rn=>handleHoverEvent(this.node,rn,"End"))))}unmount(){}}class FocusGesture extends Feature{constructor(){super(...arguments),this.isActive=!1}onFocus(){let st=!1;try{st=this.node.current.matches(":focus-visible")}catch{st=!0}!st||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=pipe(addDomEvent(this.node.current,"focus",()=>this.onFocus()),addDomEvent(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function handlePressEvent(Mt,st,nn){const{props:rn}=Mt;Mt.animationState&&rn.whileTap&&Mt.animationState.setActive("whileTap",nn==="Start");const on="onTap"+(nn==="End"?"":nn),an=rn[on];an&&frame.postRender(()=>an(st,extractEventInfo(st)))}class PressGesture extends Feature{mount(){const{current:st}=this.node;st&&(this.unmount=press(st,nn=>(handlePressEvent(this.node,nn,"Start"),(rn,{success:on})=>handlePressEvent(this.node,rn,on?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const observerCallbacks=new WeakMap,observers=new WeakMap,fireObserverCallback=Mt=>{const st=observerCallbacks.get(Mt.target);st&&st(Mt)},fireAllObserverCallbacks=Mt=>{Mt.forEach(fireObserverCallback)};function initIntersectionObserver({root:Mt,...st}){const nn=Mt||document;observers.has(nn)||observers.set(nn,{});const rn=observers.get(nn),on=JSON.stringify(st);return rn[on]||(rn[on]=new IntersectionObserver(fireAllObserverCallbacks,{root:Mt,...st})),rn[on]}function observeIntersection(Mt,st,nn){const rn=initIntersectionObserver(st);return observerCallbacks.set(Mt,nn),rn.observe(Mt),()=>{observerCallbacks.delete(Mt),rn.unobserve(Mt)}}const thresholdNames={some:0,all:1};class InViewFeature extends Feature{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:st={}}=this.node.getProps(),{root:nn,margin:rn,amount:on="some",once:an}=st,sn={root:nn?nn.current:void 0,rootMargin:rn,threshold:typeof on=="number"?on:thresholdNames[on]},un=Xr=>{const{isIntersecting:to}=Xr;if(this.isInView===to||(this.isInView=to,an&&!to&&this.hasEnteredView))return;to&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",to);const{onViewportEnter:uo,onViewportLeave:hn}=this.node.getProps(),fn=to?uo:hn;fn&&fn(Xr)};return observeIntersection(this.node.current,sn,un)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:st,prevProps:nn}=this.node;["amount","margin","root"].some(hasViewportOptionChanged(st,nn))&&this.startObserver()}unmount(){}}function hasViewportOptionChanged({viewport:Mt={}},{viewport:st={}}={}){return nn=>Mt[nn]!==st[nn]}const gestureAnimations={inView:{Feature:InViewFeature},tap:{Feature:PressGesture},focus:{Feature:FocusGesture},hover:{Feature:HoverGesture}},layout={layout:{ProjectionNode:HTMLProjectionNode,MeasureLayout}},prefersReducedMotion={current:null},hasReducedMotionListener={current:!1};function initPrefersReducedMotion(){if(hasReducedMotionListener.current=!0,!!isBrowser$1)if(window.matchMedia){const Mt=window.matchMedia("(prefers-reduced-motion)"),st=()=>prefersReducedMotion.current=Mt.matches;Mt.addListener(st),st()}else prefersReducedMotion.current=!1}const valueTypes=[...dimensionValueTypes,color$1,complex],findValueType=Mt=>valueTypes.find(testValueType(Mt)),visualElementStore=new WeakMap;function updateMotionValuesFromProps(Mt,st,nn){for(const rn in st){const on=st[rn],an=nn[rn];if(isMotionValue(on))Mt.addValue(rn,on);else if(isMotionValue(an))Mt.addValue(rn,motionValue(on,{owner:Mt}));else if(an!==on)if(Mt.hasValue(rn)){const sn=Mt.getValue(rn);sn.liveStyle===!0?sn.jump(on):sn.hasAnimated||sn.set(on)}else{const sn=Mt.getStaticValue(rn);Mt.addValue(rn,motionValue(sn!==void 0?sn:on,{owner:Mt}))}}for(const rn in nn)st[rn]===void 0&&Mt.removeValue(rn);return st}const propEventHandlers=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class VisualElement{scrapeMotionValuesFromProps(st,nn,rn){return{}}constructor({parent:st,props:nn,presenceContext:rn,reducedMotionConfig:on,blockInitialAnimation:an,visualState:sn},un={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=KeyframeResolver,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const co=time$1.now();this.renderScheduledAt<co&&(this.renderScheduledAt=co,frame.render(this.render,!1,!0))};const{latestValues:Xr,renderState:to,onUpdate:uo}=sn;this.onUpdate=uo,this.latestValues=Xr,this.baseTarget={...Xr},this.initialValues=nn.initial?{...Xr}:{},this.renderState=to,this.parent=st,this.props=nn,this.presenceContext=rn,this.depth=st?st.depth+1:0,this.reducedMotionConfig=on,this.options=un,this.blockInitialAnimation=!!an,this.isControllingVariants=isControllingVariants(nn),this.isVariantNode=isVariantNode(nn),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(st&&st.current);const{willChange:hn,...fn}=this.scrapeMotionValuesFromProps(nn,{},this);for(const co in fn){const lo=fn[co];Xr[co]!==void 0&&isMotionValue(lo)&&lo.set(Xr[co],!1)}}mount(st){this.current=st,visualElementStore.set(st,this),this.projection&&!this.projection.instance&&this.projection.mount(st),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((nn,rn)=>this.bindToMotionValue(rn,nn)),hasReducedMotionListener.current||initPrefersReducedMotion(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:prefersReducedMotion.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){visualElementStore.delete(this.current),this.projection&&this.projection.unmount(),cancelFrame(this.notifyUpdate),cancelFrame(this.render),this.valueSubscriptions.forEach(st=>st()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const st in this.events)this.events[st].clear();for(const st in this.features){const nn=this.features[st];nn&&(nn.unmount(),nn.isMounted=!1)}this.current=null}bindToMotionValue(st,nn){this.valueSubscriptions.has(st)&&this.valueSubscriptions.get(st)();const rn=transformProps.has(st),on=nn.on("change",un=>{this.latestValues[st]=un,this.props.onUpdate&&frame.preRender(this.notifyUpdate),rn&&this.projection&&(this.projection.isTransformDirty=!0)}),an=nn.on("renderRequest",this.scheduleRender);let sn;window.MotionCheckAppearSync&&(sn=window.MotionCheckAppearSync(this,st,nn)),this.valueSubscriptions.set(st,()=>{on(),an(),sn&&sn(),nn.owner&&nn.stop()})}sortNodePosition(st){return!this.current||!this.sortInstanceNodePosition||this.type!==st.type?0:this.sortInstanceNodePosition(this.current,st.current)}updateFeatures(){let st="animation";for(st in featureDefinitions){const nn=featureDefinitions[st];if(!nn)continue;const{isEnabled:rn,Feature:on}=nn;if(!this.features[st]&&on&&rn(this.props)&&(this.features[st]=new on(this)),this.features[st]){const an=this.features[st];an.isMounted?an.update():(an.mount(),an.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):createBox()}getStaticValue(st){return this.latestValues[st]}setStaticValue(st,nn){this.latestValues[st]=nn}update(st,nn){(st.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=st,this.prevPresenceContext=this.presenceContext,this.presenceContext=nn;for(let rn=0;rn<propEventHandlers.length;rn++){const on=propEventHandlers[rn];this.propEventSubscriptions[on]&&(this.propEventSubscriptions[on](),delete this.propEventSubscriptions[on]);const an="on"+on,sn=st[an];sn&&(this.propEventSubscriptions[on]=this.on(on,sn))}this.prevMotionValues=updateMotionValuesFromProps(this,this.scrapeMotionValuesFromProps(st,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(st){return this.props.variants?this.props.variants[st]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(st){const nn=this.getClosestVariantNode();if(nn)return nn.variantChildren&&nn.variantChildren.add(st),()=>nn.variantChildren.delete(st)}addValue(st,nn){const rn=this.values.get(st);nn!==rn&&(rn&&this.removeValue(st),this.bindToMotionValue(st,nn),this.values.set(st,nn),this.latestValues[st]=nn.get())}removeValue(st){this.values.delete(st);const nn=this.valueSubscriptions.get(st);nn&&(nn(),this.valueSubscriptions.delete(st)),delete this.latestValues[st],this.removeValueFromRenderState(st,this.renderState)}hasValue(st){return this.values.has(st)}getValue(st,nn){if(this.props.values&&this.props.values[st])return this.props.values[st];let rn=this.values.get(st);return rn===void 0&&nn!==void 0&&(rn=motionValue(nn===null?void 0:nn,{owner:this}),this.addValue(st,rn)),rn}readValue(st,nn){var rn;let on=this.latestValues[st]!==void 0||!this.current?this.latestValues[st]:(rn=this.getBaseTargetFromProps(this.props,st))!==null&&rn!==void 0?rn:this.readValueFromInstance(this.current,st,this.options);return on!=null&&(typeof on=="string"&&(isNumericalString(on)||isZeroValueString(on))?on=parseFloat(on):!findValueType(on)&&complex.test(nn)&&(on=getAnimatableNone(st,nn)),this.setBaseTarget(st,isMotionValue(on)?on.get():on)),isMotionValue(on)?on.get():on}setBaseTarget(st,nn){this.baseTarget[st]=nn}getBaseTarget(st){var nn;const{initial:rn}=this.props;let on;if(typeof rn=="string"||typeof rn=="object"){const sn=resolveVariantFromProps(this.props,rn,(nn=this.presenceContext)===null||nn===void 0?void 0:nn.custom);sn&&(on=sn[st])}if(rn&&on!==void 0)return on;const an=this.getBaseTargetFromProps(this.props,st);return an!==void 0&&!isMotionValue(an)?an:this.initialValues[st]!==void 0&&on===void 0?void 0:this.baseTarget[st]}on(st,nn){return this.events[st]||(this.events[st]=new SubscriptionManager),this.events[st].add(nn)}notify(st,...nn){this.events[st]&&this.events[st].notify(...nn)}}class DOMVisualElement extends VisualElement{constructor(){super(...arguments),this.KeyframeResolver=DOMKeyframesResolver}sortInstanceNodePosition(st,nn){return st.compareDocumentPosition(nn)&2?1:-1}getBaseTargetFromProps(st,nn){return st.style?st.style[nn]:void 0}removeValueFromRenderState(st,{vars:nn,style:rn}){delete nn[st],delete rn[st]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:st}=this.props;isMotionValue(st)&&(this.childSubscription=st.on("change",nn=>{this.current&&(this.current.textContent=`${nn}`)}))}}function getComputedStyle$2(Mt){return window.getComputedStyle(Mt)}class HTMLVisualElement extends DOMVisualElement{constructor(){super(...arguments),this.type="html",this.renderInstance=renderHTML}readValueFromInstance(st,nn){if(transformProps.has(nn)){const rn=getDefaultValueType(nn);return rn&&rn.default||0}else{const rn=getComputedStyle$2(st),on=(isCSSVariableName(nn)?rn.getPropertyValue(nn):rn[nn])||0;return typeof on=="string"?on.trim():on}}measureInstanceViewportBox(st,{transformPagePoint:nn}){return measureViewportBox(st,nn)}build(st,nn,rn){buildHTMLStyles(st,nn,rn.transformTemplate)}scrapeMotionValuesFromProps(st,nn,rn){return scrapeMotionValuesFromProps$1(st,nn,rn)}}class SVGVisualElement extends DOMVisualElement{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=createBox}getBaseTargetFromProps(st,nn){return st[nn]}readValueFromInstance(st,nn){if(transformProps.has(nn)){const rn=getDefaultValueType(nn);return rn&&rn.default||0}return nn=camelCaseAttributes.has(nn)?nn:camelToDash(nn),st.getAttribute(nn)}scrapeMotionValuesFromProps(st,nn,rn){return scrapeMotionValuesFromProps(st,nn,rn)}build(st,nn,rn){buildSVGAttrs(st,nn,this.isSVGTag,rn.transformTemplate)}renderInstance(st,nn,rn,on){renderSVG(st,nn,rn,on)}mount(st){this.isSVGTag=isSVGTag(st.tagName),super.mount(st)}}const createDomVisualElement=(Mt,st)=>isSVGComponent(Mt)?new SVGVisualElement(st):new HTMLVisualElement(st,{allowProjection:Mt!==reactExports.Fragment}),createMotionComponent=createMotionComponentFactory({...animations,...gestureAnimations,...drag,...layout},createDomVisualElement),motion=createDOMMotionComponentProxy(createMotionComponent);var useReactId=React$1.useId||(()=>{}),count$1=0;function useId(Mt){const[st,nn]=reactExports.useState(useReactId());return useLayoutEffect2(()=>{nn(rn=>rn??String(count$1++))},[Mt]),st?`radix-${st}`:""}var COLLAPSIBLE_NAME="Collapsible",[createCollapsibleContext,createCollapsibleScope]=createContextScope$3(COLLAPSIBLE_NAME),[CollapsibleProvider,useCollapsibleContext]=createCollapsibleContext(COLLAPSIBLE_NAME),Collapsible=reactExports.forwardRef((Mt,st)=>{const{__scopeCollapsible:nn,open:rn,defaultOpen:on,disabled:an,onOpenChange:sn,...un}=Mt,[Xr=!1,to]=useControllableState({prop:rn,defaultProp:on,onChange:sn});return jsxRuntimeExports.jsx(CollapsibleProvider,{scope:nn,disabled:an,contentId:useId(),open:Xr,onOpenToggle:reactExports.useCallback(()=>to(uo=>!uo),[to]),children:jsxRuntimeExports.jsx(Primitive.div,{"data-state":getState$2(Xr),"data-disabled":an?"":void 0,...un,ref:st})})});Collapsible.displayName=COLLAPSIBLE_NAME;var TRIGGER_NAME$4="CollapsibleTrigger",CollapsibleTrigger=reactExports.forwardRef((Mt,st)=>{const{__scopeCollapsible:nn,...rn}=Mt,on=useCollapsibleContext(TRIGGER_NAME$4,nn);return jsxRuntimeExports.jsx(Primitive.button,{type:"button","aria-controls":on.contentId,"aria-expanded":on.open||!1,"data-state":getState$2(on.open),"data-disabled":on.disabled?"":void 0,disabled:on.disabled,...rn,ref:st,onClick:composeEventHandlers(Mt.onClick,on.onOpenToggle)})});CollapsibleTrigger.displayName=TRIGGER_NAME$4;var CONTENT_NAME$6="CollapsibleContent",CollapsibleContent=reactExports.forwardRef((Mt,st)=>{const{forceMount:nn,...rn}=Mt,on=useCollapsibleContext(CONTENT_NAME$6,Mt.__scopeCollapsible);return jsxRuntimeExports.jsx(Presence,{present:nn||on.open,children:({present:an})=>jsxRuntimeExports.jsx(CollapsibleContentImpl,{...rn,ref:st,present:an})})});CollapsibleContent.displayName=CONTENT_NAME$6;var CollapsibleContentImpl=reactExports.forwardRef((Mt,st)=>{const{__scopeCollapsible:nn,present:rn,children:on,...an}=Mt,sn=useCollapsibleContext(CONTENT_NAME$6,nn),[un,Xr]=reactExports.useState(rn),to=reactExports.useRef(null),uo=useComposedRefs(st,to),hn=reactExports.useRef(0),fn=hn.current,co=reactExports.useRef(0),lo=co.current,fo=sn.open||un,ho=reactExports.useRef(fo),mo=reactExports.useRef();return reactExports.useEffect(()=>{const Uo=requestAnimationFrame(()=>ho.current=!1);return()=>cancelAnimationFrame(Uo)},[]),useLayoutEffect2(()=>{const Uo=to.current;if(Uo){mo.current=mo.current||{transitionDuration:Uo.style.transitionDuration,animationName:Uo.style.animationName},Uo.style.transitionDuration="0s",Uo.style.animationName="none";const _d=Uo.getBoundingClientRect();hn.current=_d.height,co.current=_d.width,ho.current||(Uo.style.transitionDuration=mo.current.transitionDuration,Uo.style.animationName=mo.current.animationName),Xr(rn)}},[sn.open,rn]),jsxRuntimeExports.jsx(Primitive.div,{"data-state":getState$2(sn.open),"data-disabled":sn.disabled?"":void 0,id:sn.contentId,hidden:!fo,...an,ref:uo,style:{"--radix-collapsible-content-height":fn?`${fn}px`:void 0,"--radix-collapsible-content-width":lo?`${lo}px`:void 0,...Mt.style},children:fo&&on})});function getState$2(Mt){return Mt?"open":"closed"}var Root$5=Collapsible,Trigger$3=CollapsibleTrigger,Content$3=CollapsibleContent,DirectionContext=reactExports.createContext(void 0);function useDirection(Mt){const st=reactExports.useContext(DirectionContext);return Mt||st||"ltr"}var ACCORDION_NAME="Accordion",ACCORDION_KEYS=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[Collection$3,useCollection$3,createCollectionScope$3]=createCollection(ACCORDION_NAME),[createAccordionContext,createAccordionScope]=createContextScope$3(ACCORDION_NAME,[createCollectionScope$3,createCollapsibleScope]),useCollapsibleScope=createCollapsibleScope(),Accordion$1=React.forwardRef((Mt,st)=>{const{type:nn,...rn}=Mt,on=rn,an=rn;return jsxRuntimeExports.jsx(Collection$3.Provider,{scope:Mt.__scopeAccordion,children:nn==="multiple"?jsxRuntimeExports.jsx(AccordionImplMultiple,{...an,ref:st}):jsxRuntimeExports.jsx(AccordionImplSingle,{...on,ref:st})})});Accordion$1.displayName=ACCORDION_NAME;var[AccordionValueProvider,useAccordionValueContext]=createAccordionContext(ACCORDION_NAME),[AccordionCollapsibleProvider,useAccordionCollapsibleContext]=createAccordionContext(ACCORDION_NAME,{collapsible:!1}),AccordionImplSingle=React.forwardRef((Mt,st)=>{const{value:nn,defaultValue:rn,onValueChange:on=()=>{},collapsible:an=!1,...sn}=Mt,[un,Xr]=useControllableState({prop:nn,defaultProp:rn,onChange:on});return jsxRuntimeExports.jsx(AccordionValueProvider,{scope:Mt.__scopeAccordion,value:un?[un]:[],onItemOpen:Xr,onItemClose:React.useCallback(()=>an&&Xr(""),[an,Xr]),children:jsxRuntimeExports.jsx(AccordionCollapsibleProvider,{scope:Mt.__scopeAccordion,collapsible:an,children:jsxRuntimeExports.jsx(AccordionImpl,{...sn,ref:st})})})}),AccordionImplMultiple=React.forwardRef((Mt,st)=>{const{value:nn,defaultValue:rn,onValueChange:on=()=>{},...an}=Mt,[sn=[],un]=useControllableState({prop:nn,defaultProp:rn,onChange:on}),Xr=React.useCallback(uo=>un((hn=[])=>[...hn,uo]),[un]),to=React.useCallback(uo=>un((hn=[])=>hn.filter(fn=>fn!==uo)),[un]);return jsxRuntimeExports.jsx(AccordionValueProvider,{scope:Mt.__scopeAccordion,value:sn,onItemOpen:Xr,onItemClose:to,children:jsxRuntimeExports.jsx(AccordionCollapsibleProvider,{scope:Mt.__scopeAccordion,collapsible:!0,children:jsxRuntimeExports.jsx(AccordionImpl,{...an,ref:st})})})}),[AccordionImplProvider,useAccordionContext]=createAccordionContext(ACCORDION_NAME),AccordionImpl=React.forwardRef((Mt,st)=>{const{__scopeAccordion:nn,disabled:rn,dir:on,orientation:an="vertical",...sn}=Mt,un=React.useRef(null),Xr=useComposedRefs(un,st),to=useCollection$3(nn),hn=useDirection(on)==="ltr",fn=composeEventHandlers(Mt.onKeyDown,co=>{var ip;if(!ACCORDION_KEYS.includes(co.key))return;const lo=co.target,fo=to().filter(op=>{var ap;return!((ap=op.ref.current)!=null&&ap.disabled)}),ho=fo.findIndex(op=>op.ref.current===lo),mo=fo.length;if(ho===-1)return;co.preventDefault();let Uo=ho;const _d=0,tp=mo-1,ep=()=>{Uo=ho+1,Uo>tp&&(Uo=_d)},np=()=>{Uo=ho-1,Uo<_d&&(Uo=tp)};switch(co.key){case"Home":Uo=_d;break;case"End":Uo=tp;break;case"ArrowRight":an==="horizontal"&&(hn?ep():np());break;case"ArrowDown":an==="vertical"&&ep();break;case"ArrowLeft":an==="horizontal"&&(hn?np():ep());break;case"ArrowUp":an==="vertical"&&np();break}const rp=Uo%mo;(ip=fo[rp].ref.current)==null||ip.focus()});return jsxRuntimeExports.jsx(AccordionImplProvider,{scope:nn,disabled:rn,direction:on,orientation:an,children:jsxRuntimeExports.jsx(Collection$3.Slot,{scope:nn,children:jsxRuntimeExports.jsx(Primitive.div,{...sn,"data-orientation":an,ref:Xr,onKeyDown:rn?void 0:fn})})})}),ITEM_NAME$3="AccordionItem",[AccordionItemProvider,useAccordionItemContext]=createAccordionContext(ITEM_NAME$3),AccordionItem$1=React.forwardRef((Mt,st)=>{const{__scopeAccordion:nn,value:rn,...on}=Mt,an=useAccordionContext(ITEM_NAME$3,nn),sn=useAccordionValueContext(ITEM_NAME$3,nn),un=useCollapsibleScope(nn),Xr=useId(),to=rn&&sn.value.includes(rn)||!1,uo=an.disabled||Mt.disabled;return jsxRuntimeExports.jsx(AccordionItemProvider,{scope:nn,open:to,disabled:uo,triggerId:Xr,children:jsxRuntimeExports.jsx(Root$5,{"data-orientation":an.orientation,"data-state":getState$1(to),...un,...on,ref:st,disabled:uo,open:to,onOpenChange:hn=>{hn?sn.onItemOpen(rn):sn.onItemClose(rn)}})})});AccordionItem$1.displayName=ITEM_NAME$3;var HEADER_NAME="AccordionHeader",AccordionHeader=React.forwardRef((Mt,st)=>{const{__scopeAccordion:nn,...rn}=Mt,on=useAccordionContext(ACCORDION_NAME,nn),an=useAccordionItemContext(HEADER_NAME,nn);return jsxRuntimeExports.jsx(Primitive.h3,{"data-orientation":on.orientation,"data-state":getState$1(an.open),"data-disabled":an.disabled?"":void 0,...rn,ref:st})});AccordionHeader.displayName=HEADER_NAME;var TRIGGER_NAME$3="AccordionTrigger",AccordionTrigger$1=React.forwardRef((Mt,st)=>{const{__scopeAccordion:nn,...rn}=Mt,on=useAccordionContext(ACCORDION_NAME,nn),an=useAccordionItemContext(TRIGGER_NAME$3,nn),sn=useAccordionCollapsibleContext(TRIGGER_NAME$3,nn),un=useCollapsibleScope(nn);return jsxRuntimeExports.jsx(Collection$3.ItemSlot,{scope:nn,children:jsxRuntimeExports.jsx(Trigger$3,{"aria-disabled":an.open&&!sn.collapsible||void 0,"data-orientation":on.orientation,id:an.triggerId,...un,...rn,ref:st})})});AccordionTrigger$1.displayName=TRIGGER_NAME$3;var CONTENT_NAME$5="AccordionContent",AccordionContent$1=React.forwardRef((Mt,st)=>{const{__scopeAccordion:nn,...rn}=Mt,on=useAccordionContext(ACCORDION_NAME,nn),an=useAccordionItemContext(CONTENT_NAME$5,nn),sn=useCollapsibleScope(nn);return jsxRuntimeExports.jsx(Content$3,{role:"region","aria-labelledby":an.triggerId,"data-orientation":on.orientation,...sn,...rn,ref:st,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...Mt.style}})});AccordionContent$1.displayName=CONTENT_NAME$5;function getState$1(Mt){return Mt?"open":"closed"}var Root2$3=Accordion$1,Item$1=AccordionItem$1,Header=AccordionHeader,Trigger2=AccordionTrigger$1,Content2$2=AccordionContent$1;const Accordion=Root2$3,AccordionItem=reactExports.forwardRef(({className:Mt,...st},nn)=>jsxRuntimeExports.jsx(Item$1,{ref:nn,className:cn("border-b",Mt),...st}));AccordionItem.displayName="AccordionItem";const AccordionTrigger=reactExports.forwardRef(({className:Mt,children:st,...nn},rn)=>jsxRuntimeExports.jsx(Header,{className:"flex",children:jsxRuntimeExports.jsxs(Trigger2,{ref:rn,className:cn("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",Mt),...nn,children:[st,jsxRuntimeExports.jsx(ChevronDown,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})}));AccordionTrigger.displayName=Trigger2.displayName;const AccordionContent=reactExports.forwardRef(({className:Mt,children:st,...nn},rn)=>jsxRuntimeExports.jsx(Content2$2,{ref:rn,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...nn,children:jsxRuntimeExports.jsx("div",{className:cn("pb-4 pt-0",Mt),children:st})}));AccordionContent.displayName=Content2$2.displayName;function useIsMobile(Mt=768){const[st,nn]=reactExports.useState(!1);return reactExports.useEffect(()=>{if(typeof window>"u")return;const rn=()=>{nn(window.innerWidth<Mt)};return rn(),window.addEventListener("resize",rn),()=>{window.removeEventListener("resize",rn)}},[Mt]),st}const TIPS=[{id:1,title:"Practice Mindfulness",content:"Take 5 minutes to focus on your breath. Notice thoughts without judgment, then gently return attention to breathing.",icon:jsxRuntimeExports.jsx(Brain,{className:"h-5 w-5"}),color:"bg-blue-50 border-blue-200 text-blue-700"},{id:2,title:"Express Gratitude",content:"Write down three things you're grateful for today, no matter how small. This shifts focus to positive aspects of life.",icon:jsxRuntimeExports.jsx(Heart,{className:"h-5 w-5"}),color:"bg-red-50 border-red-200 text-red-700"},{id:3,title:"Move Your Body",content:"Even 10 minutes of physical activity releases endorphins that improve mood and reduce stress hormones.",icon:jsxRuntimeExports.jsx(Smile,{className:"h-5 w-5"}),color:"bg-green-50 border-green-200 text-green-700"},{id:4,title:"Connect with Others",content:"Reach out to someone you care about today. Social connections are crucial for mental wellbeing.",icon:jsxRuntimeExports.jsx(Sun,{className:"h-5 w-5"}),color:"bg-yellow-50 border-yellow-200 text-yellow-700"},{id:5,title:"Set Boundaries",content:"Practice saying 'no' to requests that drain your energy. Healthy boundaries protect your mental health.",icon:jsxRuntimeExports.jsx(Shield,{className:"h-5 w-5"}),color:"bg-purple-50 border-purple-200 text-purple-700"},{id:6,title:"Practice Self-Compassion",content:"Speak to yourself as you would to a good friend. Replace self-criticism with kindness and understanding.",icon:jsxRuntimeExports.jsx(Sparkles,{className:"h-5 w-5"}),color:"bg-teal-50 border-teal-200 text-teal-700"},{id:7,title:"Limit Media Consumption",content:"Set boundaries around news and social media. Choose specific times to check updates rather than constant scrolling.",icon:jsxRuntimeExports.jsx(BookOpen,{className:"h-5 w-5"}),color:"bg-indigo-50 border-indigo-200 text-indigo-700"}];function MentalHealthTips(){const[Mt,st]=reactExports.useState(0),[nn,rn]=reactExports.useState(0),[on,an]=reactExports.useState(!0),[sn,un]=reactExports.useState(0);useIsMobile();const Xr=reactExports.useCallback(()=>{rn(1),st(lo=>(lo+1)%TIPS.length)},[]),to=reactExports.useCallback(()=>{rn(-1),st(lo=>(lo-1+TIPS.length)%TIPS.length)},[]);reactExports.useEffect(()=>{let lo;return on&&(lo=setInterval(Xr,8e3)),()=>{lo&&clearInterval(lo)}},[on,Xr]);const uo=()=>{an(!1);const lo=setTimeout(()=>an(!0),3e4);return()=>clearTimeout(lo)},hn=lo=>{un(lo.touches[0].clientX)},fn=lo=>{const fo=lo.changedTouches[0].clientX,ho=sn-fo;Math.abs(ho)>50&&(ho>0?Xr():to(),uo())},co={enter:lo=>({x:lo>0?300:-300,opacity:0}),center:{x:0,opacity:1},exit:lo=>({x:lo<0?300:-300,opacity:0})};return jsxRuntimeExports.jsxs("div",{className:"relative w-full overflow-hidden",onTouchStart:hn,onTouchEnd:fn,children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-2",children:[jsxRuntimeExports.jsx("h3",{className:"text-base md:text-lg font-medium",children:"Daily Mental Health Tips"}),jsxRuntimeExports.jsxs("div",{className:"flex space-x-1",children:[jsxRuntimeExports.jsx(Button,{variant:"outline",size:"sm",className:"h-7 w-7 p-0",onClick:()=>{to(),uo()},"aria-label":"Previous tip",children:jsxRuntimeExports.jsx(ChevronLeft,{className:"h-4 w-4"})}),jsxRuntimeExports.jsx(Button,{variant:"outline",size:"sm",className:"h-7 w-7 p-0",onClick:()=>{Xr(),uo()},"aria-label":"Next tip",children:jsxRuntimeExports.jsx(ChevronRight,{className:"h-4 w-4"})})]})]}),jsxRuntimeExports.jsx("div",{className:"relative overflow-hidden rounded-lg bg-white",children:jsxRuntimeExports.jsx(AnimatePresence,{initial:!1,custom:nn,mode:"wait",children:jsxRuntimeExports.jsx(motion.div,{custom:nn,variants:co,initial:"enter",animate:"center",exit:"exit",transition:{x:{type:"spring",stiffness:300,damping:30},opacity:{duration:.2}},className:"w-full",children:jsxRuntimeExports.jsxs(Card,{className:`border-2 p-3 md:p-4 min-h-[150px] ${TIPS[Mt].color}`,children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[jsxRuntimeExports.jsx("div",{className:"rounded-full bg-white/50 p-1.5",children:TIPS[Mt].icon}),jsxRuntimeExports.jsx("h4",{className:"font-medium text-sm md:text-base",children:TIPS[Mt].title})]}),jsxRuntimeExports.jsx("p",{className:"text-sm md:text-base",children:TIPS[Mt].content})]})},Mt)})}),jsxRuntimeExports.jsx("div",{className:"flex justify-center mt-3 space-x-1",children:TIPS.map((lo,fo)=>jsxRuntimeExports.jsx("button",{className:`h-1.5 rounded-full transition-all ${fo===Mt?"w-4 bg-primary":"w-1.5 bg-secondary/30"}`,onClick:()=>{rn(fo>Mt?1:-1),st(fo),uo()},"aria-label":`Go to tip ${fo+1}`},fo))})]})}const THERAPEUTIC_COLORS={calm:["#e0f7fa","#b2ebf2","#80deea","#4dd0e1","#26c6da"],happy:["#e8f5e9","#c8e6c9","#a5d6a7","#81c784","#66bb6a"],peaceful:["#f3e5f5","#e1bee7","#ce93d8","#ba68c8","#ab47bc"],positive:["#fffde7","#fff9c4","#fff59d","#fff176","#ffee58"],energetic:["#ffebee","#ffcdd2","#ef9a9a","#e57373","#ef5350"]},TherapeuticPulse=({color:Mt=THERAPEUTIC_COLORS.calm[3],size:st=50,duration:nn=2,className:rn="",children:on})=>jsxRuntimeExports.jsxs("div",{className:`relative ${rn}`,children:[jsxRuntimeExports.jsx(motion.div,{className:"absolute rounded-full",style:{backgroundColor:Mt,width:st,height:st,top:"50%",left:"50%",x:"-50%",y:"-50%"},animate:{scale:[1,1.5,1],opacity:[.7,.2,.7]},transition:{duration:nn,repeat:1/0,ease:"easeInOut"}}),jsxRuntimeExports.jsx("div",{className:"relative rounded-full flex items-center justify-center",style:{backgroundColor:Mt,width:st,height:st},children:on})]});function HomePage(){const[Mt,st]=reactExports.useState(!1),nn={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.2,delayChildren:.3}}},rn={hidden:{y:20,opacity:0},show:{y:0,opacity:1,transition:{type:"spring",stiffness:100,damping:10}}},on={rest:{scale:1,boxShadow:"0px 4px 8px rgba(0, 0, 0, 0.05)"},hover:{scale:1.03,boxShadow:"0px 10px 20px rgba(0, 0, 0, 0.1)",transition:{duration:.3,ease:"easeOut"}}},an=[{id:"understanding-emotions",title:"Understanding Your Emotions",description:"Learn about the basic emotions, how to identify them, and why they matter.",content:jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsx("p",{children:"Emotions are natural responses that help us interact with the world around us. Learning to identify and understand your emotions is an important step toward better mental health."}),jsxRuntimeExports.jsx("h4",{className:"font-bold text-beige-700 mt-4",children:"Basic Emotions"}),jsxRuntimeExports.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("span",{className:"font-medium",children:"Happiness:"})," Feelings of joy, contentment, satisfaction, and well-being"]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("span",{className:"font-medium",children:"Sadness:"})," Feelings of loss, disappointment, or helplessness"]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("span",{className:"font-medium",children:"Fear:"})," Response to threat or anticipation of threat"]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("span",{className:"font-medium",children:"Anger:"})," Response to perceived injustice or blocked goals"]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("span",{className:"font-medium",children:"Surprise:"})," Brief response to unexpected events"]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("span",{className:"font-medium",children:"Disgust:"})," Aversion to something offensive"]})]}),jsxRuntimeExports.jsx("h4",{className:"font-bold text-beige-700 mt-4",children:"How to Identify Your Emotions"}),jsxRuntimeExports.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[jsxRuntimeExports.jsx("li",{children:"Notice physical sensations in your body"}),jsxRuntimeExports.jsx("li",{children:"Pay attention to your thoughts"}),jsxRuntimeExports.jsx("li",{children:"Observe your behavior and actions"}),jsxRuntimeExports.jsx("li",{children:"Consider the situation and context"})]}),jsxRuntimeExports.jsx("div",{className:"bg-beige-100 p-4 rounded-md mt-4",children:jsxRuntimeExports.jsx("p",{className:"italic",children:'Try asking: "What am I feeling right now?" several times throughout your day to build emotional awareness.'})})]})},{id:"coping-strategies",title:"Healthy Coping Strategies",description:"Discover effective ways to manage difficult emotions and stress.",content:jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsx("p",{children:"Coping strategies are techniques we use to manage difficult emotions and stressful situations. Learning healthy coping strategies can improve your resilience and emotional well-being."}),jsxRuntimeExports.jsx("h4",{className:"font-bold text-beige-700 mt-4",children:"Physical Coping Strategies"}),jsxRuntimeExports.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("span",{className:"font-medium",children:"Deep breathing:"})," Slow, deep breaths to activate your parasympathetic nervous system"]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("span",{className:"font-medium",children:"Progressive muscle relaxation:"})," Tensing and releasing muscle groups"]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("span",{className:"font-medium",children:"Physical exercise:"})," Walking, running, yoga, or any movement you enjoy"]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("span",{className:"font-medium",children:"Adequate rest:"})," Prioritizing good sleep hygiene"]})]}),jsxRuntimeExports.jsx("h4",{className:"font-bold text-beige-700 mt-4",children:"Mental Coping Strategies"}),jsxRuntimeExports.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("span",{className:"font-medium",children:"Mindfulness:"})," Paying attention to the present moment without judgment"]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("span",{className:"font-medium",children:"Journaling:"})," Writing down thoughts and feelings to process them"]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("span",{className:"font-medium",children:"Positive self-talk:"})," Challenging negative thoughts with more balanced perspectives"]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("span",{className:"font-medium",children:"Creative expression:"})," Art, music, writing, or other creative outlets"]})]}),jsxRuntimeExports.jsx("div",{className:"bg-beige-100 p-4 rounded-md mt-4",children:jsxRuntimeExports.jsx("p",{className:"italic",children:'Try to build a diverse "toolkit" of coping strategies to use in different situations. What works in one context might not work in another.'})})]})},{id:"mindfulness-basics",title:"Mindfulness Basics",description:"Learn the fundamentals of mindfulness practice for emotional regulation.",content:jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsx("p",{children:"Mindfulness is the practice of paying attention to the present moment with curiosity and without judgment. It can help reduce stress, improve focus, and enhance emotional regulation."}),jsxRuntimeExports.jsx("h4",{className:"font-bold text-beige-700 mt-4",children:"Key Principles of Mindfulness"}),jsxRuntimeExports.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("span",{className:"font-medium",children:"Present-moment awareness:"})," Focusing on what's happening right now"]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("span",{className:"font-medium",children:"Non-judgment:"}),' Observing without labeling experiences as "good" or "bad"']}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("span",{className:"font-medium",children:"Acceptance:"})," Acknowledging things as they are, even difficult emotions"]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("span",{className:"font-medium",children:"Curiosity:"})," Approaching experiences with openness and interest"]})]}),jsxRuntimeExports.jsx("h4",{className:"font-bold text-beige-700 mt-4",children:"Simple Mindfulness Practices"}),jsxRuntimeExports.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("span",{className:"font-medium",children:"Mindful breathing:"})," Focus on your breath for 1-5 minutes"]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("span",{className:"font-medium",children:"Body scan:"})," Systematically notice sensations throughout your body"]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("span",{className:"font-medium",children:"Five senses exercise:"})," Notice 5 things you can see, 4 you can feel, 3 you can hear, 2 you can smell, and 1 you can taste"]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("span",{className:"font-medium",children:"Mindful activity:"})," Fully engage in a routine activity like washing dishes or walking"]})]}),jsxRuntimeExports.jsx("div",{className:"bg-beige-100 p-4 rounded-md mt-4",children:jsxRuntimeExports.jsx("p",{className:"italic",children:"Start with just 5 minutes of mindfulness practice daily. Consistency matters more than duration, especially when beginning."})})]})}];return jsxRuntimeExports.jsx("div",{className:"min-h-screen py-8 px-4",style:{background:"linear-gradient(135deg, #f0f7ff 0%, #e6f0ff 100%)"},children:jsxRuntimeExports.jsxs("div",{className:"max-w-4xl mx-auto relative z-10",children:[jsxRuntimeExports.jsxs(motion.div,{className:"text-center mb-12",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.8,ease:"easeOut"},children:[jsxRuntimeExports.jsx(TherapeuticPulse,{color:THERAPEUTIC_COLORS["calm"][3],size:80,className:"mx-auto mb-4",children:jsxRuntimeExports.jsx(motion.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.8,delay:.3,type:"spring",stiffness:100},children:jsxRuntimeExports.jsx(Brain,{className:"mx-auto h-16 w-16 text-white"})})}),jsxRuntimeExports.jsx(motion.h1,{className:"text-3xl md:text-4xl font-bold text-blue-700 mb-4",initial:{opacity:0},animate:{opacity:1},transition:{duration:1,delay:.5},children:"Welcome to Therapeutic AI"}),jsxRuntimeExports.jsx(motion.p,{className:"text-xl text-blue-600 max-w-2xl mx-auto",initial:{opacity:0},animate:{opacity:1},transition:{duration:1,delay:.7},children:"A safe space where artificial intelligence helps you process your thoughts and feelings through voice or text interaction."})]}),jsxRuntimeExports.jsxs(motion.div,{className:"grid md:grid-cols-2 gap-6 mb-8",variants:nn,initial:"hidden",animate:"show",children:[jsxRuntimeExports.jsx(motion.div,{variants:rn,children:jsxRuntimeExports.jsx(motion.div,{whileHover:"hover",initial:"rest",animate:"rest",variants:on,children:jsxRuntimeExports.jsxs(Card,{className:"bg-beige-100 h-full transition-all duration-300 border-2 border-beige-200",children:[jsxRuntimeExports.jsx(CardHeader,{children:jsxRuntimeExports.jsxs(CardTitle,{className:"flex items-center text-beige-700",children:[jsxRuntimeExports.jsx(Mic,{className:"mr-2 h-5 w-5"}),"Voice Therapy"]})}),jsxRuntimeExports.jsxs(CardContent,{className:"flex flex-col h-full",children:[jsxRuntimeExports.jsx("p",{className:"text-beige-600 mb-6 flex-grow",children:"Speak naturally with our AI therapist that analyzes your facial expressions and vocal tone to provide personalized therapeutic responses."}),jsxRuntimeExports.jsx(Link,{href:"/voice",className:"block",children:jsxRuntimeExports.jsx(Button,{className:"w-full bg-beige-500 hover:bg-beige-600 text-white transition-all duration-300 transform hover:translate-y-[-2px]",children:jsxRuntimeExports.jsxs(motion.span,{whileHover:{scale:1.05},className:"flex items-center justify-center",children:[jsxRuntimeExports.jsx(Mic,{className:"mr-2 h-4 w-4"}),"Start Voice Session"]})})})]})]})})}),jsxRuntimeExports.jsx(motion.div,{variants:rn,children:jsxRuntimeExports.jsx(motion.div,{whileHover:"hover",initial:"rest",animate:"rest",variants:on,children:jsxRuntimeExports.jsxs(Card,{className:"bg-beige-100 h-full transition-all duration-300 border-2 border-beige-200",children:[jsxRuntimeExports.jsx(CardHeader,{children:jsxRuntimeExports.jsxs(CardTitle,{className:"flex items-center text-beige-700",children:[jsxRuntimeExports.jsx(MessageCircle,{className:"mr-2 h-5 w-5"}),"Text Therapy"]})}),jsxRuntimeExports.jsxs(CardContent,{className:"flex flex-col h-full",children:[jsxRuntimeExports.jsx("p",{className:"text-beige-600 mb-6 flex-grow",children:"Type your thoughts and feelings in a private chat with our AI therapist that provides thoughtful, empathetic responses to your messages."}),jsxRuntimeExports.jsx(Link,{href:"/text",className:"block",children:jsxRuntimeExports.jsx(Button,{className:"w-full bg-beige-500 hover:bg-beige-600 text-white transition-all duration-300 transform hover:translate-y-[-2px]",children:jsxRuntimeExports.jsxs(motion.span,{whileHover:{scale:1.05},className:"flex items-center justify-center",children:[jsxRuntimeExports.jsx(MessageCircle,{className:"mr-2 h-4 w-4"}),"Start Text Session"]})})})]})]})})}),jsxRuntimeExports.jsx(motion.div,{variants:rn,className:"md:col-span-2",children:jsxRuntimeExports.jsx(motion.div,{whileHover:"hover",initial:"rest",animate:"rest",variants:on,children:jsxRuntimeExports.jsxs(Card,{className:"bg-beige-100 transition-all duration-300 border-2 border-beige-200",children:[jsxRuntimeExports.jsx(CardHeader,{children:jsxRuntimeExports.jsxs(CardTitle,{className:"flex items-center text-beige-700",children:[jsxRuntimeExports.jsx(ChartNoAxesColumnIncreasing,{className:"mr-2 h-5 w-5"}),"Emotion Statistics"]})}),jsxRuntimeExports.jsxs(CardContent,{children:[jsxRuntimeExports.jsx("p",{className:"text-beige-600 mb-6",children:"Track your emotional patterns over time with our statistics dashboard. See how your mood changes throughout your therapy sessions."}),jsxRuntimeExports.jsx(Link,{href:"/stats",className:"block",children:jsxRuntimeExports.jsx(Button,{className:"w-full bg-beige-500 hover:bg-beige-600 text-white transition-all duration-300 transform hover:translate-y-[-2px]",children:jsxRuntimeExports.jsxs(motion.span,{whileHover:{scale:1.05},className:"flex items-center justify-center",children:[jsxRuntimeExports.jsx(ChartNoAxesColumnIncreasing,{className:"mr-2 h-4 w-4"}),"View Statistics"]})})})]})]})})})]}),jsxRuntimeExports.jsxs(motion.div,{variants:rn,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:1.2,duration:.8},className:"space-y-6",children:[jsxRuntimeExports.jsx(motion.div,{whileHover:"hover",initial:"rest",animate:"rest",variants:on,children:jsxRuntimeExports.jsxs(Card,{className:"bg-beige-100 transition-all duration-300 border-2 border-beige-200",children:[jsxRuntimeExports.jsx(CardHeader,{children:jsxRuntimeExports.jsxs(CardTitle,{className:"flex items-center justify-between text-beige-700",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx(BookOpen,{className:"mr-2 h-5 w-5"}),"Mental Health Education"]}),jsxRuntimeExports.jsxs(Button,{variant:"ghost",onClick:()=>st(!Mt),className:"text-beige-600 hover:text-beige-800",children:[Mt?"Hide Modules":"Show Modules",Mt?jsxRuntimeExports.jsx(ChevronDown,{className:"ml-2 h-4 w-4"}):jsxRuntimeExports.jsx(ChevronRight,{className:"ml-2 h-4 w-4"})]})]})}),jsxRuntimeExports.jsxs(CardContent,{children:[jsxRuntimeExports.jsx("p",{className:"text-beige-600 mb-4",children:"Learn about emotions, coping strategies, and mindfulness techniques to enhance your mental well-being."}),jsxRuntimeExports.jsx(AnimatePresence,{children:Mt&&jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},className:"overflow-hidden",children:jsxRuntimeExports.jsx(Accordion,{type:"single",collapsible:!0,className:"mt-4",children:an.map(un=>jsxRuntimeExports.jsxs(AccordionItem,{value:un.id,className:"border-beige-200",children:[jsxRuntimeExports.jsx(AccordionTrigger,{className:"hover:text-beige-700 text-beige-600 font-medium",children:jsxRuntimeExports.jsxs("div",{className:"flex items-start text-left",children:[jsxRuntimeExports.jsx(Info,{className:"mr-2 h-5 w-5 flex-shrink-0 mt-0.5"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{children:un.title}),jsxRuntimeExports.jsx("div",{className:"text-sm font-normal text-beige-500",children:un.description})]})]})}),jsxRuntimeExports.jsx(AccordionContent,{className:"text-beige-600",children:un.content})]},un.id))})})})]})]})}),jsxRuntimeExports.jsx(motion.div,{whileHover:"hover",initial:"rest",animate:"rest",variants:on,children:jsxRuntimeExports.jsx(Card,{className:"bg-primary/5 border-2 border-primary/10 mb-6",children:jsxRuntimeExports.jsx(CardContent,{className:"pt-6",children:jsxRuntimeExports.jsx(MentalHealthTips,{})})})}),jsxRuntimeExports.jsxs(Card,{className:"bg-beige-50 border-2 border-beige-200",children:[jsxRuntimeExports.jsx(CardHeader,{children:jsxRuntimeExports.jsx(CardTitle,{className:"text-beige-700",children:"Why Therapeutic AI?"})}),jsxRuntimeExports.jsx(CardContent,{children:jsxRuntimeExports.jsxs(motion.ul,{className:"space-y-4 text-beige-600",variants:nn,initial:"hidden",animate:"show",children:[jsxRuntimeExports.jsxs(motion.li,{variants:rn,className:"flex items-start",children:[jsxRuntimeExports.jsx("span",{className:"font-bold mr-2 text-green-500",children:""}),jsxRuntimeExports.jsx("span",{children:"Private and confidential conversations that stay on your device"})]}),jsxRuntimeExports.jsxs(motion.li,{variants:rn,className:"flex items-start",children:[jsxRuntimeExports.jsx("span",{className:"font-bold mr-2 text-green-500",children:""}),jsxRuntimeExports.jsx("span",{children:"Available 24/7 for emotional support whenever you need it"})]}),jsxRuntimeExports.jsxs(motion.li,{variants:rn,className:"flex items-start",children:[jsxRuntimeExports.jsx("span",{className:"font-bold mr-2 text-green-500",children:""}),jsxRuntimeExports.jsx("span",{children:"No judgment - express yourself freely in a safe environment"})]}),jsxRuntimeExports.jsxs(motion.li,{variants:rn,className:"flex items-start",children:[jsxRuntimeExports.jsx("span",{className:"font-bold mr-2 text-green-500",children:""}),jsxRuntimeExports.jsx("span",{children:"Uses advanced AI to provide meaningful, therapeutic responses"})]}),jsxRuntimeExports.jsxs(motion.li,{variants:rn,className:"flex items-start",children:[jsxRuntimeExports.jsx("span",{className:"font-bold mr-2 text-amber-500",children:""}),jsxRuntimeExports.jsx("span",{className:"text-beige-700 font-medium",children:"This is not a replacement for professional mental health services"})]})]})})]})]})]})})}const badgeVariants=cva("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Badge({className:Mt,variant:st,...nn}){return jsxRuntimeExports.jsx("div",{className:cn(badgeVariants({variant:st}),Mt),...nn})}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var t$1=function(Mt,st){return(t$1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(nn,rn){nn.__proto__=rn}||function(nn,rn){for(var on in rn)rn.hasOwnProperty(on)&&(nn[on]=rn[on])})(Mt,st)};function e$1(Mt,st){function nn(){this.constructor=Mt}t$1(Mt,st),Mt.prototype=st===null?Object.create(st):(nn.prototype=st.prototype,new nn)}function n$1(Mt,st,nn,rn){return new(nn||(nn=Promise))(function(on,an){function sn(to){try{Xr(rn.next(to))}catch(uo){an(uo)}}function un(to){try{Xr(rn.throw(to))}catch(uo){an(uo)}}function Xr(to){to.done?on(to.value):new nn(function(uo){uo(to.value)}).then(sn,un)}Xr((rn=rn.apply(Mt,[])).next())})}function r(Mt,st){var nn,rn,on,an,sn={label:0,sent:function(){if(1&on[0])throw on[1];return on[1]},trys:[],ops:[]};return an={next:un(0),throw:un(1),return:un(2)},typeof Symbol=="function"&&(an[Symbol.iterator]=function(){return this}),an;function un(Xr){return function(to){return function(uo){if(nn)throw new TypeError("Generator is already executing.");for(;sn;)try{if(nn=1,rn&&(on=2&uo[0]?rn.return:uo[0]?rn.throw||((on=rn.return)&&on.call(rn),0):rn.next)&&!(on=on.call(rn,uo[1])).done)return on;switch(rn=0,on&&(uo=[2&uo[0],on.value]),uo[0]){case 0:case 1:on=uo;break;case 4:return sn.label++,{value:uo[1],done:!1};case 5:sn.label++,rn=uo[1],uo=[0];continue;case 7:uo=sn.ops.pop(),sn.trys.pop();continue;default:if(!(on=(on=sn.trys).length>0&&on[on.length-1])&&(uo[0]===6||uo[0]===2)){sn=0;continue}if(uo[0]===3&&(!on||uo[1]>on[0]&&uo[1]<on[3])){sn.label=uo[1];break}if(uo[0]===6&&sn.label<on[1]){sn.label=on[1],on=uo;break}if(on&&sn.label<on[2]){sn.label=on[2],sn.ops.push(uo);break}on[2]&&sn.ops.pop(),sn.trys.pop();continue}uo=st.call(Mt,sn)}catch(hn){uo=[6,hn],rn=0}finally{nn=on=0}if(5&uo[0])throw uo[1];return{value:uo[0]?uo[1]:void 0,done:!0}}([Xr,to])}}}var o=function(){function Mt(st){this.global=st,this.flags={},this.flagRegistry={},this.urlFlags={},this.populateURLFlags()}return Mt.prototype.setPlatform=function(st,nn){this.platform!=null&&console.warn("Platform "+this.platformName+" has already been set. Overwriting the platform with "+nn+"."),this.platformName=st,this.platform=nn},Mt.prototype.registerFlag=function(st,nn,rn){if(this.flagRegistry[st]={evaluationFn:nn,setHook:rn},this.urlFlags[st]!=null){var on=this.urlFlags[st];console.warn("Setting feature override from URL "+st+": "+on+"."),this.set(st,on)}},Mt.prototype.get=function(st){return st in this.flags?this.flags[st]:(this.flags[st]=this.evaluateFlag(st),this.flags[st])},Mt.prototype.getNumber=function(st){return this.get(st)},Mt.prototype.getBool=function(st){return this.get(st)},Mt.prototype.getFlags=function(){return this.flags},Object.defineProperty(Mt.prototype,"features",{get:function(){return this.flags},enumerable:!0,configurable:!0}),Mt.prototype.set=function(st,nn){if(this.flagRegistry[st]==null)throw new Error("Cannot set flag "+st+" as it has not been registered.");this.flags[st]=nn,this.flagRegistry[st].setHook!=null&&this.flagRegistry[st].setHook(nn)},Mt.prototype.evaluateFlag=function(st){if(this.flagRegistry[st]==null)throw new Error("Cannot evaluate flag '"+st+"': no evaluation function found.");return this.flagRegistry[st].evaluationFn()},Mt.prototype.setFlags=function(st){this.flags=Object.assign({},st)},Mt.prototype.reset=function(){this.flags={},this.urlFlags={},this.populateURLFlags()},Mt.prototype.populateURLFlags=function(){var st=this;if(this.global!==void 0&&this.global.location!==void 0&&this.global.location.search!==void 0){var nn,rn,on=(nn=this.global.location.search,rn={},nn.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,function(an){for(var sn=[],un=1;un<arguments.length;un++)sn[un-1]=arguments[un];return a$1(rn,sn[0],sn[1]),sn.join("=")}),rn);"tfjsflags"in on&&on.tfjsflags.split(",").forEach(function(an){var sn=an.split(":"),un=sn[0],Xr=sn[1];st.urlFlags[un]=function(to,uo){if((uo=uo.toLowerCase())==="true"||uo==="false")return uo==="true";if(""+ +uo===uo)return+uo;throw new Error("Could not parse value flag value "+uo+" for flag "+to+".")}(un,Xr)})}},Mt}();function a$1(Mt,st,nn){Mt[decodeURIComponent(st)]=decodeURIComponent(nn||"")}function i(){return s$1}var s$1=null,u$1=new Map,c$2=new Map;function l$1(Mt,st){var nn=g$1(Mt,st);return u$1.get(nn)}function h$1(Mt){return c$2.get(Mt)}function f$1(Mt){for(var st=u$1.entries(),nn=[];;){var rn=st.next(),on=rn.done,an=rn.value;if(on)break;var sn=an[0],un=an[1];sn.split("_")[0]===Mt&&nn.push(un)}return nn}function d$1(Mt){var st=Mt.kernelName,nn=Mt.backendName,rn=g$1(st,nn);if(u$1.has(rn))throw new Error("The kernel '"+st+"' for backend '"+nn+"' is already registered");u$1.set(rn,Mt)}function p$1(Mt){var st=Mt.kernelName;c$2.has(st)&&console.warn("Overriding the gradient for '"+st+"'"),c$2.set(st,Mt)}function g$1(Mt,st){return st+"_"+Mt}function x$1(Mt,st,nn){return Math.max(Mt,Math.min(st,nn))}function b$1(Mt){return Mt%2==0?Mt:Mt+1}function w(Mt){for(var st=0,nn=0;nn<Mt.length;nn++)st+=Mt[nn];return st}function C(Mt,st){if(!Mt)throw new Error(typeof st=="string"?st:st())}function E(Mt,st,nn){nn===void 0&&(nn=""),C(S(Mt,st),function(){return nn+" Shapes "+Mt+" and "+st+" must match"})}function R(Mt){C(Mt!=null,function(){return"The input to the tensor constructor must be a non-null value."})}function I(Mt,st,nn){if(st===void 0&&(st=[]),nn===void 0&&(nn=!1),st==null&&(st=[]),Array.isArray(Mt)||V(Mt)&&!nn)for(var rn=0;rn<Mt.length;++rn)I(Mt[rn],st,nn);else st.push(Mt);return st}function k$2(Mt){if(Mt.length===0)return 1;for(var st=Mt[0],nn=1;nn<Mt.length;nn++)st*=Mt[nn];return st}function S(Mt,st){if(Mt===st)return!0;if(Mt==null||st==null||Mt.length!==st.length)return!1;for(var nn=0;nn<Mt.length;nn++)if(Mt[nn]!==st[nn])return!1;return!0}function A(Mt){return Mt%1==0}function D(Mt){if(Math.tanh!=null)return Math.tanh(Mt);if(Mt===1/0)return 1;if(Mt===-1/0)return-1;var st=Math.exp(2*Mt);return(st-1)/(st+1)}function T(Mt){var st=Math.ceil(Math.sqrt(Mt));return[st,Math.ceil(Mt/st)]}function N(Mt,st){return st<=Mt.length?Mt:Mt+" ".repeat(st-Mt.length)}function F(Mt,st,nn){return st===void 0&&(st=function(rn){return 0}),new Promise(function(rn,on){var an=0,sn=function(){if(Mt())rn();else{an++;var un=st(an);nn!=null&&an>=nn?on():setTimeout(sn,un)}};sn()})}function _(Mt,st){for(var nn=1,rn=-1,on=0;on<Mt.length;++on)if(Mt[on]>=0)nn*=Mt[on];else if(Mt[on]===-1){if(rn!==-1)throw Error("Shapes can only have 1 implicit size. Found -1 at dim "+rn+" and dim "+on);rn=on}else if(Mt[on]<0)throw Error("Shapes can not be < 0. Found "+Mt[on]+" at dim "+on);if(rn===-1){if(st>0&&st!==nn)throw Error("Size("+st+") must match the product of shape "+Mt);return Mt}if(nn===0)throw Error("Cannot infer the missing size in ["+Mt+"] when there are 0 elements");if(st%nn!=0)throw Error("The implicit shape can't be a fractional number. Got "+st+" / "+nn);var an=Mt.slice();return an[rn]=st/nn,an}function O(Mt,st){var nn=st.length;return C((Mt=Mt==null?st.map(function(rn,on){return on}):[].concat(Mt)).every(function(rn){return rn>=-nn&&rn<nn}),function(){return"All values in axis param must be in range [-"+nn+", "+nn+") but got axis "+Mt}),C(Mt.every(function(rn){return A(rn)}),function(){return"All values in axis param must be integers but got axis "+Mt}),Mt.map(function(rn){return rn<0?nn+rn:rn})}function M(Mt,st){for(var nn=[],rn=[],on=st!=null&&Array.isArray(st)&&st.length===0,an=st==null||on?null:O(st,Mt).sort(),sn=0,un=0;un<Mt.length;++un){if(an!=null){if(an[sn]===un&&Mt[un]!==1)throw new Error("Can't squeeze axis "+un+" since its dim '"+Mt[un]+"' is not 1");(an[sn]==null||an[sn]>un)&&Mt[un]===1&&(nn.push(Mt[un]),rn.push(un)),an[sn]<=un&&sn++}Mt[un]!==1&&(nn.push(Mt[un]),rn.push(un))}return{newShape:nn,keptDims:rn}}function B(Mt,st){var nn=null;if(Mt==null||Mt==="float32")nn=new Float32Array(st);else if(Mt==="int32")nn=new Int32Array(st);else{if(Mt!=="bool")throw new Error("Unknown data type "+Mt);nn=new Uint8Array(st)}return nn}function P$1(Mt,st){var nn=null;if(Mt==null||Mt==="float32")nn=new Float32Array(st);else if(Mt==="int32")nn=new Int32Array(st);else if(Mt==="bool")nn=new Uint8Array(st);else{if(Mt!=="string")throw new Error("Unknown data type "+Mt);nn=new Array(st)}return nn}function L(Mt,st){for(var nn=0;nn<Mt.length;nn++){var rn=Mt[nn];if(isNaN(rn)||!isFinite(rn))throw Error("A tensor of type "+st+" being uploaded contains "+rn+".")}}function W(Mt){return Mt==="bool"||Mt==="complex64"||Mt==="float32"||Mt==="int32"||Mt==="string"}function U(Mt,st){return st!=="complex64"&&(st!=="float32"||Mt==="complex64")&&(st!=="int32"||Mt==="float32"||Mt==="complex64")&&(st!=="bool"||Mt!=="bool")}function V(Mt){return Mt instanceof Float32Array||Mt instanceof Int32Array||Mt instanceof Uint8Array}function z(Mt){if(Mt==="float32"||Mt==="int32")return 4;if(Mt==="complex64")return 8;if(Mt==="bool")return 1;throw new Error("Unknown dtype "+Mt)}function G(Mt){if(Mt==null)return 0;var st=0;return Mt.forEach(function(nn){return st+=nn.length}),st}function H(Mt){return typeof Mt=="string"||Mt instanceof String}function q$1(Mt){return typeof Mt=="boolean"}function K(Mt){return typeof Mt=="number"}function j(Mt){return Array.isArray(Mt)?j(Mt[0]):Mt instanceof Float32Array?"float32":Mt instanceof Int32Array||Mt instanceof Uint8Array?"int32":K(Mt)?"float32":H(Mt)?"string":q$1(Mt)?"bool":"float32"}function X(Mt){return!!(Mt&&Mt.constructor&&Mt.call&&Mt.apply)}function Y(Mt,st){for(var nn=st;nn<Mt;++nn)if(Mt%nn==0)return nn;return Mt}function $(Mt){var st=Mt.length;if(st<2)return[];var nn=new Array(st-1);nn[st-2]=Mt[st-1];for(var rn=st-3;rn>=0;--rn)nn[rn]=nn[rn+1]*Mt[rn+1];return nn}function Q(Mt,st,nn){if(st==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(Mt)&&(Mt=I(Mt)),nn&&L(Mt,st),function(an,sn){return an instanceof Float32Array&&sn==="float32"||an instanceof Int32Array&&sn==="int32"||an instanceof Uint8Array&&sn==="bool"}(Mt,st))return Mt;if(st==null||st==="float32"||st==="complex64")return new Float32Array(Mt);if(st==="int32")return new Int32Array(Mt);if(st==="bool"){for(var rn=new Uint8Array(Mt.length),on=0;on<rn.length;++on)Math.round(Mt[on])!==0&&(rn[on]=1);return rn}throw new Error("Unknown data type "+st)}function J(Mt,st){if(Mt.length===0)return st[0];var nn=Mt.reduce(function(rn,on){return rn*on});if(nn===0)return[];if(nn!==st.length)throw new Error("["+Mt+"] does not match the input size.");return function rn(on,an,sn){var un=new Array;if(an.length===1)for(var Xr=an[0],to=0;to<Xr;to++)un[to]=sn[on+to];else{Xr=an[0];var uo=an.slice(1),hn=uo.reduce(function(fn,co){return fn*co});for(to=0;to<Xr;to++)un[to]=rn(on+to*hn,uo,sn)}return un}(0,Mt,st)}function Z(Mt,st){for(var nn=tt(Mt,st),rn=0;rn<nn.length;rn++)nn[rn]=1;return nn}function tt(Mt,st){if(st==null||st==="float32"||st==="complex64")return new Float32Array(Mt);if(st==="int32")return new Int32Array(Mt);if(st==="bool")return new Uint8Array(Mt);throw new Error("Unknown data type "+st)}function et(){return i().platform.now()}function nt(Mt){Mt.forEach(function(st){C(Number.isInteger(st)&&st>=0,function(){return"Tensor must have a shape comprised of positive integers but got shape ["+Mt+"]."})})}function rt(Mt,st){return st===void 0&&(st="utf-8"),st=st||"utf-8",i().platform.encode(Mt,st)}function ot(Mt,st){return st===void 0&&(st="utf-8"),st=st||"utf-8",i().platform.decode(Mt,st)}function at(Mt,st,nn){if(st===0)return 0;if(st===1)return Mt[0];for(var rn=Mt[Mt.length-1],on=0;on<Mt.length-1;++on)rn+=nn[on]*Mt[on];return rn}function it(Mt,st,nn){if(st===0)return[];if(st===1)return[Mt];for(var rn=new Array(st),on=0;on<rn.length-1;++on)rn[on]=Math.floor(Mt/nn[on]),Mt-=rn[on]*nn[on];return rn[rn.length-1]=Mt,rn}var ut=function(){function Mt(st,nn){this.backendTimer=st,this.logger=nn,nn==null&&(this.logger=new ct)}return Mt.prototype.profileKernel=function(st,nn,rn){var on,an=this,sn=this.backendTimer.time(function(){on=rn()});return on.forEach(function(un){un.data().then(function(Xr){(function(to,uo,hn){if(uo!=="float32")return!1;for(var fn=0;fn<to.length;fn++){var co=to[fn];if(isNaN(co)||!isFinite(co))return console.warn("Found "+co+" in the result of '"+hn+"'"),!0}})(Xr,un.dtype,st),sn.then(function(to){var uo="";to.getExtraProfileInfo!=null&&(uo=to.getExtraProfileInfo()),an.logger.logKernelProfile(st,un,Xr,to.kernelMs,nn,uo)})})}),on},Mt}(),ct=function(){function Mt(){}return Mt.prototype.logKernelProfile=function(st,nn,rn,on,an,sn){var un=typeof on=="number"?N(on+"ms",9):on.error,Xr=N(st,25),to=nn.rank,uo=nn.size,hn=N(nn.shape.toString(),14),fn="";for(var co in an){var lo=an[co].shape||nn.shape,fo=lo.length;fn+=co+": "+fo+"D "+(fo>0?lo:"")+" "}console.log("%c"+Xr+"	%c"+un+"	%c"+to+"D "+hn+"	%c"+uo+"	%c"+fn+"	%c"+sn,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")},Mt}(),lt=20,ht=3,ft=7;function dt(Mt,st,nn,rn){var on=$(st),an=function(to,uo,hn,fn){var co=k$2(uo),lo=fn[fn.length-1],fo=new Array(lo).fill(0),ho=uo.length,mo=hn==="complex64"?mt(to):to;if(ho>1)for(var Uo=0;Uo<co/lo;Uo++)for(var _d=Uo*lo,tp=0;tp<lo;tp++)fo[tp]=Math.max(fo[tp],pt(mo[_d+tp],0,hn).length);return fo}(Mt,st,nn,on),sn=st.length,un=function to(uo,hn,fn,co,lo,fo){fo===void 0&&(fo=!0);var ho=fn==="complex64"?2:1,mo=hn[0],Uo=hn.length;if(Uo===0)return fn==="complex64"?[pt(mt(uo)[0],0,fn)]:fn==="bool"?[vt(uo[0])]:[uo[0].toString()];if(Uo===1){if(mo>lt){var _d=ht*ho,tp=Array.from(uo.slice(0,_d)),ep=Array.from(uo.slice((mo-ht)*ho,mo*ho));return fn==="complex64"&&(tp=mt(tp),ep=mt(ep)),["["+tp.map(function(dp,cp){return pt(dp,lo[cp],fn)}).join(", ")+", ..., "+ep.map(function(dp,cp){return pt(dp,lo[mo-ht+cp],fn)}).join(", ")+"]"]}return["["+(fn==="complex64"?mt(uo):Array.from(uo)).map(function(dp,cp){return pt(dp,lo[cp],fn)}).join(", ")+"]"]}var np=hn.slice(1),rp=co.slice(1),ip=co[0]*ho,op=[];if(mo>lt){for(var ap=0;ap<ht;ap++){var sp=(up=ap*ip)+ip;op.push.apply(op,to(uo.slice(up,sp),np,fn,rp,lo,!1))}for(op.push("..."),ap=mo-ht;ap<mo;ap++)sp=(up=ap*ip)+ip,op.push.apply(op,to(uo.slice(up,sp),np,fn,rp,lo,ap===mo-1))}else for(ap=0;ap<mo;ap++){var up;sp=(up=ap*ip)+ip,op.push.apply(op,to(uo.slice(up,sp),np,fn,rp,lo,ap===mo-1))}var pp=Uo===2?",":"";for(op[0]="["+op[0]+pp,ap=1;ap<op.length-1;ap++)op[ap]=" "+op[ap]+pp;var lp=`,
`;for(ap=2;ap<Uo;ap++)lp+=`
`;return op[op.length-1]=" "+op[op.length-1]+"]"+(fo?"":lp),op}(Mt,st,nn,on,an),Xr=["Tensor"];return rn&&(Xr.push("  dtype: "+nn),Xr.push("  rank: "+sn),Xr.push("  shape: ["+st+"]"),Xr.push("  values:")),Xr.push(un.map(function(to){return"    "+to}).join(`
`)),Xr.join(`
`)}function pt(Mt,st,nn){return N(Array.isArray(Mt)?parseFloat(Mt[0].toFixed(ft))+" + "+parseFloat(Mt[1].toFixed(ft))+"j":H(Mt)?"'"+Mt+"'":nn==="bool"?vt(Mt):parseFloat(Mt.toFixed(ft)).toString(),st)}function vt(Mt){return Mt===0?"false":"true"}function mt(Mt){for(var st=[],nn=0;nn<Mt.length;nn+=2)st.push([Mt[nn],Mt[nn+1]]);return st}var gt=function(){function Mt(st,nn,rn){var on=this;if(this.dtype=nn,this.shape=st.slice(),this.size=k$2(st),rn!=null){var an=rn.length;C(an===this.size,function(){return"Length of values '"+an+"' does not match the size inferred by the shape '"+on.size+"'."})}if(nn==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=rn||P$1(nn,this.size),this.strides=$(st)}return Mt.prototype.set=function(st){for(var nn=this,rn=[],on=1;on<arguments.length;on++)rn[on-1]=arguments[on];rn.length===0&&(rn=[0]),C(rn.length===this.rank,function(){return"The number of provided coordinates ("+rn.length+") must match the rank ("+nn.rank+")"});var an=this.locToIndex(rn);this.values[an]=st},Mt.prototype.get=function(){for(var st=[],nn=0;nn<arguments.length;nn++)st[nn]=arguments[nn];st.length===0&&(st=[0]);for(var rn=0,on=0,an=st;on<an.length;on++){var sn=an[on];if(sn<0||sn>=this.shape[rn]){var un="Requested out of range element at "+st+".   Buffer shape="+this.shape;throw new Error(un)}rn++}for(var Xr=st[st.length-1],to=0;to<st.length-1;++to)Xr+=this.strides[to]*st[to];return this.values[Xr]},Mt.prototype.locToIndex=function(st){if(this.rank===0)return 0;if(this.rank===1)return st[0];for(var nn=st[st.length-1],rn=0;rn<st.length-1;++rn)nn+=this.strides[rn]*st[rn];return nn},Mt.prototype.indexToLoc=function(st){if(this.rank===0)return[];if(this.rank===1)return[st];for(var nn=new Array(this.shape.length),rn=0;rn<nn.length-1;++rn)nn[rn]=Math.floor(st/this.strides[rn]),st-=nn[rn]*this.strides[rn];return nn[nn.length-1]=st,nn},Object.defineProperty(Mt.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),Mt.prototype.toTensor=function(){return yt().makeTensor(this.values,this.shape,this.dtype)},Mt}(),yt=null,xt=null,bt=null,wt=function(){function Mt(st,nn,rn,on){this.kept=!1,this.isDisposedInternal=!1,this.shape=st.slice(),this.dtype=nn||"float32",this.size=k$2(st),this.strides=$(st),this.dataId=rn,this.id=on,this.rankType=this.rank<5?this.rank.toString():"higher"}return Mt.prototype.flatten=function(){return this.throwIfDisposed(),this.as1D()},Mt.prototype.asScalar=function(){return this.throwIfDisposed(),C(this.size===1,function(){return"The array must have only 1 element."}),this.reshape([])},Mt.prototype.as1D=function(){return this.throwIfDisposed(),this.reshape([this.size])},Mt.prototype.as2D=function(st,nn){return this.throwIfDisposed(),this.reshape([st,nn])},Mt.prototype.as3D=function(st,nn,rn){return this.throwIfDisposed(),this.reshape([st,nn,rn])},Mt.prototype.as4D=function(st,nn,rn,on){return this.throwIfDisposed(),this.reshape([st,nn,rn,on])},Mt.prototype.as5D=function(st,nn,rn,on,an){return this.throwIfDisposed(),this.reshape([st,nn,rn,on,an])},Mt.prototype.asType=function(st){return this.throwIfDisposed(),xt.cast(this,st)},Object.defineProperty(Mt.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),Mt.prototype.buffer=function(){return n$1(this,void 0,void 0,function(){var st;return r(this,function(nn){switch(nn.label){case 0:return[4,this.data()];case 1:return st=nn.sent(),[2,xt.buffer(this.shape,this.dtype,st)]}})})},Mt.prototype.bufferSync=function(){return xt.buffer(this.shape,this.dtype,this.dataSync())},Mt.prototype.array=function(){return n$1(this,void 0,void 0,function(){var st;return r(this,function(nn){switch(nn.label){case 0:return[4,this.data()];case 1:return st=nn.sent(),[2,J(this.shape,st)]}})})},Mt.prototype.arraySync=function(){return J(this.shape,this.dataSync())},Mt.prototype.data=function(){return n$1(this,void 0,void 0,function(){var st,nn;return r(this,function(rn){switch(rn.label){case 0:return this.throwIfDisposed(),st=yt().read(this.dataId),this.dtype!=="string"?[3,2]:[4,st];case 1:nn=rn.sent();try{return[2,nn.map(function(on){return ot(on)})]}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}rn.label=2;case 2:return[2,st]}})})},Mt.prototype.dataSync=function(){this.throwIfDisposed();var st=yt().readSync(this.dataId);if(this.dtype==="string")try{return st.map(function(nn){return ot(nn)})}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return st},Mt.prototype.bytes=function(){return n$1(this,void 0,void 0,function(){var st;return r(this,function(nn){switch(nn.label){case 0:return this.throwIfDisposed(),[4,yt().read(this.dataId)];case 1:return st=nn.sent(),this.dtype==="string"?[2,st]:[2,new Uint8Array(st.buffer)]}})})},Mt.prototype.dispose=function(){this.isDisposed||(yt().disposeTensor(this),this.isDisposedInternal=!0)},Object.defineProperty(Mt.prototype,"isDisposed",{get:function(){return this.isDisposedInternal},enumerable:!0,configurable:!0}),Mt.prototype.throwIfDisposed=function(){if(this.isDisposed)throw new Error("Tensor is disposed.")},Mt.prototype.toFloat=function(){return this.asType("float32")},Mt.prototype.toInt=function(){return this.asType("int32")},Mt.prototype.toBool=function(){return this.asType("bool")},Mt.prototype.print=function(st){return st===void 0&&(st=!1),xt.print(this,st)},Mt.prototype.reshape=function(st){return this.throwIfDisposed(),xt.reshape(this,st)},Mt.prototype.reshapeAs=function(st){return this.throwIfDisposed(),this.reshape(st.shape)},Mt.prototype.expandDims=function(st){return st===void 0&&(st=0),xt.expandDims(this,st)},Mt.prototype.cumsum=function(st,nn,rn){return st===void 0&&(st=0),nn===void 0&&(nn=!1),rn===void 0&&(rn=!1),xt.cumsum(this,st,nn,rn)},Mt.prototype.squeeze=function(st){return this.throwIfDisposed(),xt.squeeze(this,st)},Mt.prototype.clone=function(){return this.throwIfDisposed(),xt.clone(this)},Mt.prototype.oneHot=function(st,nn,rn){return this.throwIfDisposed(),xt.oneHot(this,st,nn,rn)},Mt.prototype.toString=function(st){return st===void 0&&(st=!1),dt(this.dataSync(),this.shape,this.dtype,st)},Mt.prototype.tile=function(st){return this.throwIfDisposed(),xt.tile(this,st)},Mt.prototype.gather=function(st,nn){return nn===void 0&&(nn=0),this.throwIfDisposed(),xt.gather(this,st,nn)},Mt.prototype.matMul=function(st,nn,rn){return nn===void 0&&(nn=!1),rn===void 0&&(rn=!1),this.throwIfDisposed(),xt.matMul(this,st,nn,rn)},Mt.prototype.dot=function(st){return this.throwIfDisposed(),xt.dot(this,st)},Mt.prototype.norm=function(st,nn,rn){return st===void 0&&(st="euclidean"),nn===void 0&&(nn=null),rn===void 0&&(rn=!1),this.throwIfDisposed(),xt.norm(this,st,nn,rn)},Mt.prototype.slice=function(st,nn){return this.throwIfDisposed(),xt.slice(this,st,nn)},Mt.prototype.reverse=function(st){return this.throwIfDisposed(),xt.reverse(this,st)},Mt.prototype.concat=function(st,nn){return nn===void 0&&(nn=0),this.throwIfDisposed(),st instanceof Mt&&(st=[st]),xt.concat([this].concat(st),nn)},Mt.prototype.split=function(st,nn){return nn===void 0&&(nn=0),this.throwIfDisposed(),xt.split(this,st,nn)},Mt.prototype.stack=function(st,nn){return nn===void 0&&(nn=0),xt.stack([this,st],nn)},Mt.prototype.unstack=function(st){return st===void 0&&(st=0),xt.unstack(this,st)},Mt.prototype.pad=function(st,nn){return nn===void 0&&(nn=0),xt.pad(this,st,nn)},Mt.prototype.batchNormalization=function(st,nn,rn,on,an){return rn===void 0&&(rn=.001),bt("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon"),this.batchNorm(st,nn,an,on,rn)},Mt.prototype.batchNorm=function(st,nn,rn,on,an){return an===void 0&&(an=.001),this.throwIfDisposed(),xt.batchNorm(this,st,nn,rn,on,an)},Mt.prototype.all=function(st,nn){return st===void 0&&(st=null),nn===void 0&&(nn=!1),this.throwIfDisposed(),xt.all(this,st,nn)},Mt.prototype.any=function(st,nn){return st===void 0&&(st=null),nn===void 0&&(nn=!1),this.throwIfDisposed(),xt.any(this,st,nn)},Mt.prototype.logSumExp=function(st,nn){return st===void 0&&(st=null),nn===void 0&&(nn=!1),this.throwIfDisposed(),xt.logSumExp(this,st,nn)},Mt.prototype.sum=function(st,nn){return st===void 0&&(st=null),nn===void 0&&(nn=!1),this.throwIfDisposed(),xt.sum(this,st,nn)},Mt.prototype.prod=function(st,nn){return st===void 0&&(st=null),nn===void 0&&(nn=!1),this.throwIfDisposed(),xt.prod(this,st,nn)},Mt.prototype.mean=function(st,nn){return st===void 0&&(st=null),nn===void 0&&(nn=!1),this.throwIfDisposed(),xt.mean(this,st,nn)},Mt.prototype.min=function(st,nn){return st===void 0&&(st=null),nn===void 0&&(nn=!1),this.throwIfDisposed(),xt.min(this,st,nn)},Mt.prototype.max=function(st,nn){return st===void 0&&(st=null),nn===void 0&&(nn=!1),this.throwIfDisposed(),xt.max(this,st,nn)},Mt.prototype.argMin=function(st){return st===void 0&&(st=null),this.throwIfDisposed(),xt.argMin(this,st)},Mt.prototype.argMax=function(st){return st===void 0&&(st=null),this.throwIfDisposed(),xt.argMax(this,st)},Mt.prototype.cast=function(st){return this.throwIfDisposed(),xt.cast(this,st)},Mt.prototype.add=function(st){return this.throwIfDisposed(),xt.add(this,st)},Mt.prototype.addStrict=function(st){return this.throwIfDisposed(),xt.addStrict(this,st)},Mt.prototype.atan2=function(st){return this.throwIfDisposed(),xt.atan2(this,st)},Mt.prototype.sub=function(st){return this.throwIfDisposed(),xt.sub(this,st)},Mt.prototype.subStrict=function(st){return this.throwIfDisposed(),xt.subStrict(this,st)},Mt.prototype.pow=function(st){return this.throwIfDisposed(),xt.pow(this,st)},Mt.prototype.powStrict=function(st){return this.throwIfDisposed(),xt.powStrict(this,st)},Mt.prototype.mul=function(st){return this.throwIfDisposed(),xt.mul(this,st)},Mt.prototype.mulStrict=function(st){return this.throwIfDisposed(),xt.mulStrict(this,st)},Mt.prototype.div=function(st){return this.throwIfDisposed(),xt.div(this,st)},Mt.prototype.divNoNan=function(st){return this.throwIfDisposed(),xt.divNoNan(this,st)},Mt.prototype.floorDiv=function(st){return this.throwIfDisposed(),xt.floorDiv(this,st)},Mt.prototype.divStrict=function(st){return this.throwIfDisposed(),xt.divStrict(this,st)},Mt.prototype.minimum=function(st){return this.throwIfDisposed(),xt.minimum(this,st)},Mt.prototype.minimumStrict=function(st){return this.throwIfDisposed(),xt.minimumStrict(this,st)},Mt.prototype.maximum=function(st){return this.throwIfDisposed(),xt.maximum(this,st)},Mt.prototype.maximumStrict=function(st){return this.throwIfDisposed(),xt.maximumStrict(this,st)},Mt.prototype.mod=function(st){return this.throwIfDisposed(),xt.mod(this,st)},Mt.prototype.modStrict=function(st){return this.throwIfDisposed(),xt.modStrict(this,st)},Mt.prototype.squaredDifferenceStrict=function(st){return this.throwIfDisposed(),xt.squaredDifferenceStrict(this,st)},Mt.prototype.transpose=function(st){return this.throwIfDisposed(),xt.transpose(this,st)},Mt.prototype.notEqual=function(st){return this.throwIfDisposed(),xt.notEqual(this,st)},Mt.prototype.notEqualStrict=function(st){return this.throwIfDisposed(),xt.notEqualStrict(this,st)},Mt.prototype.less=function(st){return this.throwIfDisposed(),xt.less(this,st)},Mt.prototype.lessStrict=function(st){return this.throwIfDisposed(),xt.lessStrict(this,st)},Mt.prototype.equal=function(st){return this.throwIfDisposed(),xt.equal(this,st)},Mt.prototype.equalStrict=function(st){return this.throwIfDisposed(),xt.equalStrict(this,st)},Mt.prototype.lessEqual=function(st){return this.throwIfDisposed(),xt.lessEqual(this,st)},Mt.prototype.lessEqualStrict=function(st){return this.throwIfDisposed(),xt.lessEqualStrict(this,st)},Mt.prototype.greater=function(st){return this.throwIfDisposed(),xt.greater(this,st)},Mt.prototype.greaterStrict=function(st){return this.throwIfDisposed(),xt.greaterStrict(this,st)},Mt.prototype.greaterEqual=function(st){return this.throwIfDisposed(),xt.greaterEqual(this,st)},Mt.prototype.greaterEqualStrict=function(st){return this.throwIfDisposed(),xt.greaterEqualStrict(this,st)},Mt.prototype.logicalAnd=function(st){return this.throwIfDisposed(),xt.logicalAnd(this,st)},Mt.prototype.logicalOr=function(st){return this.throwIfDisposed(),xt.logicalOr(this,st)},Mt.prototype.logicalNot=function(){return this.throwIfDisposed(),xt.logicalNot(this)},Mt.prototype.logicalXor=function(st){return this.throwIfDisposed(),xt.logicalXor(this,st)},Mt.prototype.where=function(st,nn){return this.throwIfDisposed(),xt.where(st,this,nn)},Mt.prototype.neg=function(){return this.throwIfDisposed(),xt.neg(this)},Mt.prototype.ceil=function(){return this.throwIfDisposed(),xt.ceil(this)},Mt.prototype.floor=function(){return this.throwIfDisposed(),xt.floor(this)},Mt.prototype.sign=function(){return this.throwIfDisposed(),xt.sign(this)},Mt.prototype.isNaN=function(){return this.throwIfDisposed(),xt.isNaN(this)},Mt.prototype.isInf=function(){return this.throwIfDisposed(),xt.isInf(this)},Mt.prototype.isFinite=function(){return this.throwIfDisposed(),xt.isFinite(this)},Mt.prototype.exp=function(){return this.throwIfDisposed(),xt.exp(this)},Mt.prototype.expm1=function(){return this.throwIfDisposed(),xt.expm1(this)},Mt.prototype.log=function(){return this.throwIfDisposed(),xt.log(this)},Mt.prototype.log1p=function(){return this.throwIfDisposed(),xt.log1p(this)},Mt.prototype.sqrt=function(){return this.throwIfDisposed(),xt.sqrt(this)},Mt.prototype.rsqrt=function(){return this.throwIfDisposed(),xt.rsqrt(this)},Mt.prototype.square=function(){return this.throwIfDisposed(),xt.square(this)},Mt.prototype.reciprocal=function(){return this.throwIfDisposed(),xt.reciprocal(this)},Mt.prototype.abs=function(){return this.throwIfDisposed(),xt.abs(this)},Mt.prototype.clipByValue=function(st,nn){return this.throwIfDisposed(),xt.clipByValue(this,st,nn)},Mt.prototype.relu=function(){return this.throwIfDisposed(),xt.relu(this)},Mt.prototype.relu6=function(){return this.throwIfDisposed(),xt.relu6(this)},Mt.prototype.elu=function(){return this.throwIfDisposed(),xt.elu(this)},Mt.prototype.selu=function(){return this.throwIfDisposed(),xt.selu(this)},Mt.prototype.leakyRelu=function(st){return st===void 0&&(st=.2),this.throwIfDisposed(),xt.leakyRelu(this,st)},Mt.prototype.prelu=function(st){return this.throwIfDisposed(),xt.prelu(this,st)},Mt.prototype.sigmoid=function(){return this.throwIfDisposed(),xt.sigmoid(this)},Mt.prototype.logSigmoid=function(){return this.throwIfDisposed(),xt.logSigmoid(this)},Mt.prototype.softplus=function(){return this.throwIfDisposed(),xt.softplus(this)},Mt.prototype.zerosLike=function(){return this.throwIfDisposed(),xt.zerosLike(this)},Mt.prototype.onesLike=function(){return this.throwIfDisposed(),xt.onesLike(this)},Mt.prototype.sin=function(){return this.throwIfDisposed(),xt.sin(this)},Mt.prototype.cos=function(){return this.throwIfDisposed(),xt.cos(this)},Mt.prototype.tan=function(){return this.throwIfDisposed(),xt.tan(this)},Mt.prototype.asin=function(){return this.throwIfDisposed(),xt.asin(this)},Mt.prototype.acos=function(){return this.throwIfDisposed(),xt.acos(this)},Mt.prototype.atan=function(){return this.throwIfDisposed(),xt.atan(this)},Mt.prototype.sinh=function(){return this.throwIfDisposed(),xt.sinh(this)},Mt.prototype.cosh=function(){return this.throwIfDisposed(),xt.cosh(this)},Mt.prototype.tanh=function(){return this.throwIfDisposed(),xt.tanh(this)},Mt.prototype.asinh=function(){return this.throwIfDisposed(),xt.asinh(this)},Mt.prototype.acosh=function(){return this.throwIfDisposed(),xt.acosh(this)},Mt.prototype.atanh=function(){return this.throwIfDisposed(),xt.atanh(this)},Mt.prototype.erf=function(){return this.throwIfDisposed(),xt.erf(this)},Mt.prototype.round=function(){return this.throwIfDisposed(),xt.round(this)},Mt.prototype.step=function(st){return st===void 0&&(st=0),this.throwIfDisposed(),xt.step(this,st)},Mt.prototype.softmax=function(st){return st===void 0&&(st=-1),this.throwIfDisposed(),xt.softmax(this,st)},Mt.prototype.logSoftmax=function(st){return st===void 0&&(st=-1),this.throwIfDisposed(),xt.logSoftmax(this,st)},Mt.prototype.resizeBilinear=function(st,nn){return nn===void 0&&(nn=!1),this.throwIfDisposed(),xt.image.resizeBilinear(this,st,nn)},Mt.prototype.resizeNearestNeighbor=function(st,nn){return nn===void 0&&(nn=!1),this.throwIfDisposed(),xt.image.resizeNearestNeighbor(this,st,nn)},Mt.prototype.conv1d=function(st,nn,rn,on,an,sn){return on===void 0&&(on="NWC"),an===void 0&&(an=1),this.throwIfDisposed(),xt.conv1d(this,st,nn,rn,on,an,sn)},Mt.prototype.conv2d=function(st,nn,rn,on,an,sn){return on===void 0&&(on="NHWC"),an===void 0&&(an=[1,1]),this.throwIfDisposed(),xt.conv2d(this,st,nn,rn,on,an,sn)},Mt.prototype.conv2dTranspose=function(st,nn,rn,on,an){return this.throwIfDisposed(),xt.conv2dTranspose(this,st,nn,rn,on,an)},Mt.prototype.depthwiseConv2D=function(st,nn,rn,on,an,sn){return on===void 0&&(on="NHWC"),an===void 0&&(an=[1,1]),this.throwIfDisposed(),xt.depthwiseConv2d(this,st,nn,rn,on,an,sn)},Mt.prototype.separableConv2d=function(st,nn,rn,on,an,sn){return an===void 0&&(an=[1,1]),sn===void 0&&(sn="NHWC"),this.throwIfDisposed(),xt.separableConv2d(this,st,nn,rn,on,an,sn)},Mt.prototype.avgPool=function(st,nn,rn,on){return this.throwIfDisposed(),xt.avgPool(this,st,nn,rn,on)},Mt.prototype.maxPool=function(st,nn,rn,on){return this.throwIfDisposed(),xt.maxPool(this,st,nn,rn,on)},Mt.prototype.localResponseNormalization=function(st,nn,rn,on){return st===void 0&&(st=5),nn===void 0&&(nn=1),rn===void 0&&(rn=1),on===void 0&&(on=.5),xt.localResponseNormalization(this,st,nn,rn,on)},Mt.prototype.pool=function(st,nn,rn,on,an){return this.throwIfDisposed(),xt.pool(this,st,nn,rn,on,an)},Mt.prototype.variable=function(st,nn,rn){return st===void 0&&(st=!0),this.throwIfDisposed(),yt().makeVariable(this,st,nn,rn)},Mt.prototype.unsortedSegmentSum=function(st,nn){return this.throwIfDisposed(),xt.unsortedSegmentSum(this,st,nn)},Mt.prototype.batchToSpaceND=function(st,nn){return this.throwIfDisposed(),xt.batchToSpaceND(this,st,nn)},Mt.prototype.spaceToBatchND=function(st,nn){return this.throwIfDisposed(),xt.spaceToBatchND(this,st,nn)},Mt.prototype.topk=function(st,nn){return st===void 0&&(st=1),nn===void 0&&(nn=!0),this.throwIfDisposed(),xt.topk(this,st,nn)},Mt.prototype.stridedSlice=function(st,nn,rn,on,an,sn,un,Xr){return on===void 0&&(on=0),an===void 0&&(an=0),sn===void 0&&(sn=0),un===void 0&&(un=0),Xr===void 0&&(Xr=0),this.throwIfDisposed(),xt.stridedSlice(this,st,nn,rn,on,an,sn,un,Xr)},Mt.prototype.depthToSpace=function(st,nn){return this.throwIfDisposed(),xt.depthToSpace(this,st,nn)},Mt.prototype.fft=function(){return this.throwIfDisposed(),xt.spectral.fft(this)},Mt.prototype.ifft=function(){return this.throwIfDisposed(),xt.spectral.ifft(this)},Mt.prototype.rfft=function(){return this.throwIfDisposed(),xt.spectral.rfft(this)},Mt.prototype.irfft=function(){return this.throwIfDisposed(),xt.spectral.irfft(this)},Mt}();Object.defineProperty(wt,Symbol.hasInstance,{value:function(Mt){return!!Mt&&Mt.dataId!=null&&Mt.shape!=null&&Mt.dtype!=null}});var Ct,Et,Rt,It,kt,St=function(Mt){function st(nn,rn,on,an){var sn=Mt.call(this,nn.shape,nn.dtype,nn.dataId,an)||this;return sn.trainable=rn,sn.name=on,sn}return e$1(st,Mt),st.prototype.assign=function(nn){if(nn.dtype!==this.dtype)throw new Error("dtype of the new value ("+nn.dtype+") and previous value ("+this.dtype+") must match");if(!S(nn.shape,this.shape))throw new Error("shape of the new value ("+nn.shape+") and previous value ("+this.shape+") must match");yt().disposeTensor(this),this.dataId=nn.dataId,yt().incRef(this,null)},st.prototype.dispose=function(){yt().disposeVariable(this),this.isDisposedInternal=!0},st}(wt);Object.defineProperty(St,Symbol.hasInstance,{value:function(Mt){return Mt instanceof wt&&Mt.assign!=null&&Mt.assign instanceof Function}}),function(Mt){Mt.R0="R0",Mt.R1="R1",Mt.R2="R2",Mt.R3="R3",Mt.R4="R4",Mt.R5="R5",Mt.R6="R6"}(Ct||(Ct={})),function(Mt){Mt.float32="float32",Mt.int32="int32",Mt.bool="int32",Mt.complex64="complex64"}(Et||(Et={})),function(Mt){Mt.float32="float32",Mt.int32="int32",Mt.bool="bool",Mt.complex64="complex64"}(Rt||(Rt={})),function(Mt){Mt.float32="float32",Mt.int32="float32",Mt.bool="float32",Mt.complex64="complex64"}(It||(It={})),function(Mt){Mt.float32="complex64",Mt.int32="complex64",Mt.bool="complex64",Mt.complex64="complex64"}(kt||(kt={}));var At={float32:It,int32:Et,bool:Rt,complex64:kt};function Dt(Mt,st){if(Mt==="string"||st==="string"){if(Mt==="string"&&st==="string")return"string";throw new Error("Can not upcast "+Mt+" with "+st)}return At[Mt][st]}function Tt(Mt){return Dt(Mt,"int32")}function Nt(Mt,st){if(Mt.dtype===st.dtype)return[Mt,st];var nn=Dt(Mt.dtype,st.dtype);return[Mt.cast(nn),st.cast(nn)]}function Ft(Mt,st){C(Mt.dtype===st.dtype,function(){return"The dtypes of the first("+Mt.dtype+") and second("+st.dtype+") input must match"})}function _t(Mt){var st=[];return function nn(rn,on,an){if(rn!=null){if(rn instanceof wt)return void on.push(rn);if(sn=rn,!(!Array.isArray(sn)&&typeof sn!="object")){var sn,un=rn;for(var Xr in un){var to=un[Xr];an.has(to)||(an.add(to),nn(to,on,an))}}}}(Mt,st,new Set),st}var Ot,Bt=function(){function Mt(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null}}return Mt.prototype.dispose=function(){for(var st in this.registeredVariables)this.registeredVariables[st].dispose()},Mt}(),Pt=function(){function Mt(st){this.ENV=st,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new Bt}return Mt.prototype.ready=function(){return n$1(this,void 0,void 0,function(){var st,nn,rn;return r(this,function(on){switch(on.label){case 0:if(this.pendingBackendInit!=null)return[2,this.pendingBackendInit.then(function(){})];if(this.backendInstance!=null)return[2];st=this.getSortedBackends(),nn=0,on.label=1;case 1:return nn<st.length?(rn=st[nn],[4,this.initializeBackend(rn).success]):[3,5];case 2:return on.sent()?[4,this.setBackend(rn)]:[3,4];case 3:return on.sent(),[2];case 4:return nn++,[3,1];case 5:throw new Error("Could not initialize any backends, all backend initializations failed.")}})})},Object.defineProperty(Mt.prototype,"backend",{get:function(){if(this.pendingBackendInit!=null)throw new Error("Backend '"+this.backendName+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");if(this.backendInstance==null){var st=this.initializeBackendsAndReturnBest(),nn=st.name;if(st.asyncInit)throw new Error("The highest priority backend '"+nn+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");this.setBackend(nn)}return this.backendInstance},enumerable:!0,configurable:!0}),Mt.prototype.backendNames=function(){return Object.keys(this.registryFactory)},Mt.prototype.findBackend=function(st){return!(st in this.registry)&&(!(st in this.registryFactory)||this.initializeBackend(st).asyncInit)?null:this.registry[st]},Mt.prototype.findBackendFactory=function(st){return st in this.registryFactory?this.registryFactory[st].factory:null},Mt.prototype.registerBackend=function(st,nn,rn){return rn===void 0&&(rn=1),st in this.registryFactory?(console.warn(st+" backend was already registered. Reusing existing backend factory."),!1):(this.registryFactory[st]={factory:nn,priority:rn},!0)},Mt.prototype.setBackend=function(st){return n$1(this,void 0,void 0,function(){var nn,rn,on;return r(this,function(an){switch(an.label){case 0:if(this.registryFactory[st]==null)throw new Error("Backend name '"+st+"' not found in registry");return this.backendName=st,this.registry[st]!=null?[3,4]:(this.backendInstance=null,nn=this.initializeBackend(st),rn=nn.success,nn.asyncInit?[4,rn]:[3,2]);case 1:return on=an.sent(),[3,3];case 2:on=rn,an.label=3;case 3:if(!on)return[2,!1];an.label=4;case 4:return this.backendInstance=this.registry[st],this.setupRegisteredKernels(),this.profiler=new ut(this.backendInstance),[2,!0]}})})},Mt.prototype.setupRegisteredKernels=function(){var st=this;f$1(this.backendName).forEach(function(nn){nn.setupFunc!=null&&nn.setupFunc(st.backendInstance)})},Mt.prototype.disposeRegisteredKernels=function(st){var nn=this;f$1(st).forEach(function(rn){rn.disposeFunc!=null&&rn.disposeFunc(nn.registry[st])})},Mt.prototype.initializeBackend=function(st){var nn=this,rn=this.registryFactory[st];if(rn==null)throw new Error("Cannot initialize backend "+st+", no registration found.");try{var on=rn.factory();if(Promise.resolve(on)===on){var an=++this.pendingBackendInitId,sn=on.then(function(un){return!(an<nn.pendingBackendInitId)&&(nn.registry[st]=un,nn.pendingBackendInit=null,!0)}).catch(function(un){return!(an<nn.pendingBackendInitId)&&(nn.pendingBackendInit=null,console.warn("Initialization of backend "+st+" failed"),console.warn(un.stack||un.message),!1)});return this.pendingBackendInit=sn,{success:sn,asyncInit:!0}}return this.registry[st]=on,{success:!0,asyncInit:!1}}catch(un){return console.warn("Initialization of backend "+st+" failed"),console.warn(un.stack||un.message),{success:!1,asyncInit:!1}}},Mt.prototype.removeBackend=function(st){if(!(st in this.registryFactory))throw new Error(st+" backend not found in registry");this.backendName===st&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,st in this.registry&&(this.disposeRegisteredKernels(st),this.registry[st].dispose(),delete this.registry[st]),delete this.registryFactory[st],this.backendName===st&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)},Mt.prototype.getSortedBackends=function(){var st=this;if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort(function(nn,rn){return st.registryFactory[rn].priority-st.registryFactory[nn].priority})},Mt.prototype.initializeBackendsAndReturnBest=function(){for(var st=this.getSortedBackends(),nn=0;nn<st.length;nn++){var rn=st[nn],on=this.initializeBackend(rn),an=on.success,sn=on.asyncInit;if(sn||an)return{name:rn,asyncInit:sn}}throw new Error("Could not initialize any backends, all backend initializations failed.")},Mt.prototype.moveData=function(st,nn){var rn=this.state.tensorInfo.get(nn),on=rn.backend,an=this.readSync(nn);on.disposeData(nn),rn.backend=st,st.move(nn,an,rn.shape,rn.dtype),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++},Mt.prototype.tidy=function(st,nn){var rn,on=this,an=null;if(nn==null){if(typeof st!="function")throw new Error("Please provide a function to tidy()");nn=st}else{if(typeof st!="string"&&!(st instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof nn!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");an=st}return this.scopedRun(function(){return on.startScope(an)},function(){return on.endScope(rn)},function(){return(rn=nn())instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),rn})},Mt.prototype.scopedRun=function(st,nn,rn){st();try{var on=rn();return nn(),on}catch(an){throw nn(),an}},Mt.prototype.nextTensorId=function(){return Mt.nextTensorId++},Mt.prototype.nextVariableId=function(){return Mt.nextVariableId++},Mt.prototype.clone=function(st){var nn=this.makeTensorFromDataId(st.dataId,st.shape,st.dtype),rn={x:st};return this.addTapeNode(this.state.activeScope.name,rn,[nn],function(on){return{x:function(){return on.toFloat()}}},[]),nn},Mt.prototype.runKernel=function(st,nn,rn,on,an){return this.runKernelFunc(null,nn,null,st,rn,on,an)},Mt.prototype.shouldCheckForMemLeaks=function(){return this.ENV.getBool("IS_TEST")},Mt.prototype.checkKernelForMemLeak=function(st,nn,rn){var on=this.backend.numDataIds(),an=0;rn.forEach(function(Xr){an+=Xr.dtype==="complex64"?3:1});var sn=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],un=on-nn-an-sn;if(un>0)throw new Error("Backend '"+this.backendName+"' has an internal memory leak ("+un+" data ids) after running '"+st+"'")},Mt.prototype.runKernelFunc=function(st,nn,rn,on,an,sn,un){var Xr,to=this;sn===void 0&&(sn=[]),un===void 0&&(un=[]);var uo=[],hn=this.isTapeOn();on==null&&(on=this.state.activeScope!=null?this.state.activeScope.name:"");var fn,co=function(Uo){hn&&(uo=Uo.map(function(_d){return to.keep(to.clone(_d))}))},lo=this.state.numBytes,fo=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);var ho,mo=l$1(on,this.backendName);return fn=mo!=null?function(){var Uo=to.backend.numDataIds();ho=mo.kernelFunc({inputs:nn,attrs:an,backend:to.backend});var _d=Array.isArray(ho)?ho:[ho];to.shouldCheckForMemLeaks()&&to.checkKernelForMemLeak(on,Uo,_d);var tp=_d.map(function(np){var rp=np.dataId,ip=np.shape,op=np.dtype;return to.makeTensorFromDataId(rp,ip,op)}),ep=tp.filter(function(np,rp){return un[rp]});return co((sn||[]).slice().concat(ep)),tp}:function(){var Uo=to.backend.numDataIds();ho=to.tidy(function(){return st(to.backend,co)});var _d=Array.isArray(ho)?ho:[ho];return to.shouldCheckForMemLeaks()&&to.checkKernelForMemLeak(on,Uo,_d),_d},this.scopedRun(function(){return to.state.kernelDepth++},function(){return to.state.kernelDepth--},function(){Xr=to.ENV.getBool("DEBUG")?to.profiler.profileKernel(on,nn,function(){return fn()}):fn()}),hn&&this.addTapeNode(on,nn,Xr,rn,uo),this.state.profiling&&this.state.activeProfile.kernels.push({name:on,bytesAdded:this.state.numBytes-lo,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-fo,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(nn).map(function(Uo){return nn[Uo].shape}),outputShapes:Xr.map(function(Uo){return Uo.shape})}),Array.isArray(ho)?Xr:Xr[0]},Mt.prototype.makeTensor=function(st,nn,rn,on){if(st==null)throw new Error("Values passed to engine.makeTensor() are null");rn=rn||"float32",on=on||this.backend;var an=st;rn==="string"&&H(st[0])&&(an=st.map(function(uo){return rt(uo)}));var sn=on.write(an,nn,rn),un=new wt(nn,rn,sn,this.nextTensorId());if(this.incRef(un,on),rn==="string"){var Xr=this.state.tensorInfo.get(sn),to=G(an);this.state.numBytes+=to-Xr.bytes,Xr.bytes=to}return un},Mt.prototype.makeTensorFromDataId=function(st,nn,rn,on){var an=new wt(nn,rn=rn||"float32",st,this.nextTensorId());return this.incRef(an,on),an},Mt.prototype.makeVariable=function(st,nn,rn,on){nn===void 0&&(nn=!0),rn=rn||this.nextVariableId().toString(),on!=null&&on!==st.dtype&&(st=st.asType(on));var an=new St(st,nn,rn,this.nextTensorId());if(this.state.registeredVariables[an.name]!=null)throw new Error("Variable with name "+an.name+" was already registered");return this.state.registeredVariables[an.name]=an,this.incRef(an,this.backend),an},Mt.prototype.incRef=function(st,nn){var rn=this.state.tensorInfo.has(st.dataId)?this.state.tensorInfo.get(st.dataId).refCount:0;if(this.state.numTensors++,st.dtype==="string"&&this.state.numStringTensors++,rn===0){this.state.numDataBuffers++;var on=0;st.dtype!=="complex64"&&st.dtype!=="string"&&(on=st.size*z(st.dtype)),this.state.tensorInfo.set(st.dataId,{backend:nn||this.backend,dtype:st.dtype,shape:st.shape,bytes:on,refCount:0}),this.state.numBytes+=on}this.state.tensorInfo.get(st.dataId).refCount++,st instanceof St||this.track(st)},Mt.prototype.disposeTensor=function(st){if(this.state.tensorInfo.has(st.dataId)){this.state.numTensors--,st.dtype==="string"&&this.state.numStringTensors--;var nn=this.state.tensorInfo.get(st.dataId);nn.refCount<=1?(st.dtype!=="complex64"&&(this.state.numBytes-=nn.bytes),this.state.numDataBuffers--,nn.backend.disposeData(st.dataId),this.state.tensorInfo.delete(st.dataId)):this.state.tensorInfo.get(st.dataId).refCount--}},Mt.prototype.disposeVariables=function(){for(var st in this.state.registeredVariables){var nn=this.state.registeredVariables[st];this.disposeVariable(nn)}},Mt.prototype.disposeVariable=function(st){this.disposeTensor(st),this.state.registeredVariables[st.name]!=null&&delete this.state.registeredVariables[st.name]},Mt.prototype.memory=function(){var st=this.backend.memory();return st.numTensors=this.state.numTensors,st.numDataBuffers=this.state.numDataBuffers,st.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(st.unreliable=!0,st.reasons==null&&(st.reasons=[]),st.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),st},Mt.prototype.profile=function(st){return n$1(this,void 0,void 0,function(){var nn,rn;return r(this,function(on){return this.state.profiling=!0,nn=this.state.numBytes,rn=this.state.numTensors,this.state.activeProfile.kernels=[],this.state.activeProfile.result=st(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max.apply(Math,this.state.activeProfile.kernels.map(function(an){return an.totalBytesSnapshot})),this.state.activeProfile.newBytes=this.state.numBytes-nn,this.state.activeProfile.newTensors=this.state.numTensors-rn,[2,this.state.activeProfile]})})},Mt.prototype.isTapeOn=function(){return this.state.gradientDepth>0&&this.state.kernelDepth===0},Mt.prototype.addTapeNode=function(st,nn,rn,on,an){var sn=this,un={id:this.state.nextTapeNodeId++,kernelName:st,inputs:nn,outputs:rn,saved:an},Xr=h$1(st);Xr!=null&&(on=Xr.gradFunc),on!=null&&(un.gradient=function(to){return to=to.map(function(uo,hn){if(uo==null){var fn=rn[hn],co=tt(fn.size,fn.dtype);return sn.makeTensor(co,fn.shape,fn.dtype)}return uo}),on(to.length>1?to:to[0],an)}),this.state.activeTape.push(un)},Mt.prototype.keep=function(st){return st.kept=!0,st},Mt.prototype.startTape=function(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++},Mt.prototype.endTape=function(){this.state.gradientDepth--},Mt.prototype.startScope=function(st){var nn={track:[],name:"unnamed scope",id:this.state.nextScopeId++};st&&(nn.name=st),this.state.scopeStack.push(nn),this.state.activeScope=nn},Mt.prototype.endScope=function(st){for(var nn=this,rn=_t(st),on=new Set(rn.map(function(Xr){return Xr.id})),an=0;an<this.state.activeScope.track.length;an++){var sn=this.state.activeScope.track[an];sn.kept||on.has(sn.id)||sn.dispose()}var un=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],rn.forEach(function(Xr){Xr.kept||Xr.scopeId!==un.id||nn.track(Xr)})},Mt.prototype.gradients=function(st,nn,rn,on){var an=this;if(on===void 0&&(on=!1),C(nn.length>0,function(){return"gradients() received an empty list of xs."}),rn!=null&&rn.dtype!=="float32")throw new Error("dy must have 'float32' dtype, but has '"+rn.dtype+"'");var sn=this.scopedRun(function(){return an.startTape()},function(){return an.endTape()},function(){return an.tidy("forward",st)});C(sn instanceof wt,function(){return"The result y returned by f() must be a tensor."});var un=function(Xr,to,uo){for(var hn={},fn={},co=0;co<to.length;co++)hn[to[co].id]=!0;for(co=0;co<Xr.length;co++){var lo=(np=Xr[co]).inputs;for(var fo in lo){for(var ho=lo[fo],mo=!1,Uo=0;Uo<to.length;Uo++)if(hn[ho.id]){np.outputs.forEach(function(ap){return hn[ap.id]=!0}),mo=!0,fn[np.id]=!0;break}if(mo)break}}var _d={};_d[uo.id]=!0;var tp={};for(co=Xr.length-1;co>=0;co--)for(lo=(np=Xr[co]).inputs,Uo=0;Uo<np.outputs.length;Uo++)if(_d[np.outputs[Uo].id]){for(var fo in lo)_d[lo[fo].id]=!0,tp[np.id]=!0;break}var ep=[];for(co=0;co<Xr.length;co++){var np;if(fn[(np=Xr[co]).id]&&tp[np.id]){var rp={};for(var fo in np.inputs){var ip=np.inputs[fo];hn[ip.id]&&(rp[fo]=ip)}var op=Object.assign({},np);op.inputs=rp,op.outputs=np.outputs,ep.push(op)}}return ep}(this.state.activeTape,nn,sn);if(!on&&un.length===0&&nn.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",function(){var Xr,to,uo={};uo[sn.id]=rn??(Xr=sn.shape,to=Z(k$2(Xr),"float32"),Lt.makeTensor(to,Xr,"float32")),function(fn,co,lo){for(var fo=function(mo){var Uo=co[mo],_d=[];if(Uo.outputs.forEach(function(rp){var ip=fn[rp.id];ip!=null?_d.push(ip):_d.push(null)}),Uo.gradient==null)throw new Error("Cannot compute gradient: gradient function not found for "+Uo.kernelName+".");var tp=Uo.gradient(_d),ep=function(rp){if(!(rp in tp))throw new Error("Cannot backprop through input "+rp+". Available gradients found: "+Object.keys(tp)+".");var ip=lo(function(){return tp[rp]()});if(ip.dtype!=="float32")throw new Error("Error in gradient for op "+Uo.kernelName+". The gradient of input "+rp+" must have 'float32' dtype, but has '"+ip.dtype+"'");var op=Uo.inputs[rp];if(!S(ip.shape,op.shape))throw new Error("Error in gradient for op "+Uo.kernelName+". The gradient of input '"+rp+"' has shape '"+ip.shape+"', which does not match the shape of the input '"+op.shape+"'");if(fn[op.id]==null)fn[op.id]=ip;else{var ap=fn[op.id];fn[op.id]=ap.add(ip),ap.dispose()}};for(var np in Uo.inputs)ep(np)},ho=co.length-1;ho>=0;ho--)fo(ho)}(uo,un,function(fn){return an.tidy(fn)});var hn=nn.map(function(fn){return uo[fn.id]});return an.state.gradientDepth===0&&(an.state.activeTape.forEach(function(fn){for(var co=0,lo=fn.saved;co<lo.length;co++)lo[co].dispose()}),an.state.activeTape=null),{value:sn,grads:hn}})},Mt.prototype.customGrad=function(st){var nn=this;return C(X(st),function(){return"The f passed in customGrad(f) must be a function."}),function(){for(var rn,on=[],an=0;an<arguments.length;an++)on[an]=arguments[an];C(on.every(function(un){return un instanceof wt}),function(){return"The args passed in customGrad(f)(x1, x2,...) must all be tensors"});var sn={};return on.forEach(function(un,Xr){sn[Xr]=un}),nn.runKernelFunc(function(un,Xr){return C((rn=st.apply(void 0,on.concat([Xr]))).value instanceof wt,function(){return"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"}),C(X(rn.gradFunc),function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."}),rn.value},sn,function(un,Xr){var to=rn.gradFunc(un,Xr),uo=Array.isArray(to)?to:[to];C(uo.length===on.length,function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."}),C(uo.every(function(fn){return fn instanceof wt}),function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."});var hn={};return uo.forEach(function(fn,co){hn[co]=function(){return fn}}),hn})}},Mt.prototype.readSync=function(st){return this.state.tensorInfo.get(st).backend.readSync(st)},Mt.prototype.read=function(st){return this.state.tensorInfo.get(st).backend.read(st)},Mt.prototype.time=function(st){return n$1(this,void 0,void 0,function(){var nn,rn;return r(this,function(on){switch(on.label){case 0:return nn=et(),[4,this.backend.time(st)];case 1:return(rn=on.sent()).wallMs=et()-nn,[2,rn]}})})},Mt.prototype.track=function(st){return this.state.activeScope!=null&&(st.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(st)),st},Object.defineProperty(Mt.prototype,"registeredVariables",{get:function(){return this.state.registeredVariables},enumerable:!0,configurable:!0}),Mt.prototype.reset=function(){for(var st in this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new Bt,this.registry)this.disposeRegisteredKernels(st),this.registry[st].dispose(),delete this.registry[st];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null},Mt.nextTensorId=0,Mt.nextVariableId=0,Mt}(),Lt=function(){var Mt=function(){if(Ot==null){var nn=void 0;if(typeof window<"u")nn=window;else if(typeof global<"u")nn=global;else if(typeof process<"u")nn=process;else{if(typeof self>"u")throw new Error("Could not find a global object");nn=self}Ot=nn}return Ot}();if(Mt._tfengine==null){var st=new o(Mt);Mt._tfengine=new Pt(st)}return function(nn){s$1=nn}(Mt._tfengine.ENV),yt=function(){return Mt._tfengine},Mt._tfengine}();function Wt(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}var Ut=i();Ut.registerFlag("DEBUG",function(){return!1},function(Mt){Mt&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")}),Ut.registerFlag("IS_BROWSER",function(){return Wt()}),Ut.registerFlag("IS_NODE",function(){return typeof process<"u"&&process.versions!==void 0&&process.versions.node!==void 0}),Ut.registerFlag("IS_CHROME",function(){return typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}),Ut.registerFlag("PROD",function(){return!1}),Ut.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",function(){return Ut.getBool("DEBUG")}),Ut.registerFlag("DEPRECATION_WARNINGS_ENABLED",function(){return!0}),Ut.registerFlag("IS_TEST",function(){return!1});var Vt,zt,Gt,Ht={},qt={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function Kt(Mt,st){Ht[Mt]=st}function jt(Mt){Mt in Ht||(Ht[Mt]=function(nn){if(nn!==1&&nn!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");var rn=function(on){if(typeof OffscreenCanvas<"u"&&on===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}(nn);return rn.addEventListener("webglcontextlost",function(on){on.preventDefault(),delete Ht[nn]},!1),nn===1?rn.getContext("webgl",qt)||rn.getContext("experimental-webgl",qt):rn.getContext("webgl2",qt)}(Mt));var st=Ht[Mt];return st.isContextLost()?(delete Ht[Mt],jt(Mt)):(st.disable(st.DEPTH_TEST),st.disable(st.STENCIL_TEST),st.disable(st.BLEND),st.disable(st.DITHER),st.disable(st.POLYGON_OFFSET_FILL),st.disable(st.SAMPLE_COVERAGE),st.enable(st.SCISSOR_TEST),st.enable(st.CULL_FACE),st.cullFace(st.BACK),Ht[Mt])}function Xt(Mt,st){return[st,Mt]}function Yt(Mt){var st=k$2(Mt);return T(Math.ceil(st/4))}function $t(Mt,st){return[Math.max(1,Math.ceil(st/2)),Math.max(1,Math.ceil(Mt/2))]}function Qt(Mt,st){var nn,rn,on,an,sn,un,Xr,to,uo,hn=Mt;return i().getNumber("WEBGL_VERSION")===2?(nn=hn.R32F,rn=hn.R16F,on=hn.RGBA16F,an=hn.RGBA32F,sn=hn.RED,un=4,Xr=1,to=hn.HALF_FLOAT,uo=hn.FLOAT):(nn=Mt.RGBA,rn=Mt.RGBA,on=Mt.RGBA,an=hn.RGBA,sn=Mt.RGBA,un=4,Xr=4,to=st!=null?st.HALF_FLOAT_OES:null,uo=Mt.FLOAT),{internalFormatFloat:nn,internalFormatHalfFloat:rn,internalFormatPackedHalfFloat:on,internalFormatPackedFloat:an,textureFormatFloat:sn,downloadTextureFormat:Mt.RGBA,downloadUnpackNumChannels:un,defaultNumChannels:Xr,textureTypeHalfFloat:to,textureTypeFloat:uo}}function Jt(Mt,st,nn){var rn=nn();return st&&function(on){var an=on.getError();if(an!==on.NO_ERROR)throw new Error("WebGL Error: "+ne(on,an))}(Mt),rn}(function(Mt){Mt[Mt.DENSE=0]="DENSE",Mt[Mt.SHARED_BATCH=1]="SHARED_BATCH"})(Vt||(Vt={})),function(Mt){Mt[Mt.RENDER=0]="RENDER",Mt[Mt.UPLOAD=1]="UPLOAD",Mt[Mt.PIXELS=2]="PIXELS",Mt[Mt.DOWNLOAD=3]="DOWNLOAD"}(zt||(zt={})),function(Mt){Mt[Mt.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",Mt[Mt.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",Mt[Mt.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",Mt[Mt.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",Mt[Mt.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(Gt||(Gt={}));var Zt=596e-10,te=65504;function ee(Mt){return!!(i().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||Mt===0||Zt<Math.abs(Mt)&&Math.abs(Mt)<te)}function ne(Mt,st){switch(st){case Mt.NO_ERROR:return"NO_ERROR";case Mt.INVALID_ENUM:return"INVALID_ENUM";case Mt.INVALID_VALUE:return"INVALID_VALUE";case Mt.INVALID_OPERATION:return"INVALID_OPERATION";case Mt.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case Mt.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case Mt.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code "+st}}function re$1(Mt,st,nn){return ke(Mt,st,function(){return Mt.getExtension(nn)},'Extension "'+nn+'" not supported on this browser.')}function oe(Mt,st,nn){var rn=ke(Mt,st,function(){return Mt.createShader(Mt.VERTEX_SHADER)},"Unable to create vertex WebGLShader.");if(Jt(Mt,st,function(){return Mt.shaderSource(rn,nn)}),Jt(Mt,st,function(){return Mt.compileShader(rn)}),Mt.getShaderParameter(rn,Mt.COMPILE_STATUS)===!1)throw console.log(Mt.getShaderInfoLog(rn)),new Error("Failed to compile vertex shader.");return rn}function ae(Mt,st,nn){var rn=ke(Mt,st,function(){return Mt.createShader(Mt.FRAGMENT_SHADER)},"Unable to create fragment WebGLShader.");if(Jt(Mt,st,function(){return Mt.shaderSource(rn,nn)}),Jt(Mt,st,function(){return Mt.compileShader(rn)}),Mt.getShaderParameter(rn,Mt.COMPILE_STATUS)===!1)throw function(on,an){var sn=ue.exec(an);if(sn==null)return console.log("Couldn't parse line number in error: "+an),void console.log(on);for(var un=+sn[1],Xr=on.split(`
`),to=Xr.length.toString().length+2,uo=Xr.map(function(ho,mo){return N((mo+1).toString(),to)+ho}),hn=0,fn=0;fn<uo.length;fn++)hn=Math.max(uo[fn].length,hn);var co=uo.slice(0,un-1),lo=uo.slice(un-1,un),fo=uo.slice(un);console.log(co.join(`
`)),console.log(an.split(`
`)[0]),console.log("%c "+N(lo[0],hn),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(fo.join(`
`))}(nn,Mt.getShaderInfoLog(rn)),new Error("Failed to compile fragment shader.");return rn}var ie,se,ue=/ERROR: [0-9]+:([0-9]+):/g;function ce(Mt,st){return ke(Mt,st,function(){return Mt.createProgram()},"Unable to create WebGLProgram.")}function le(Mt,st,nn){if(Jt(Mt,st,function(){return Mt.linkProgram(nn)}),Mt.getProgramParameter(nn,Mt.LINK_STATUS)===!1)throw console.log(Mt.getProgramInfoLog(nn)),new Error("Failed to link vertex and fragment shaders.")}function he(Mt,st,nn){if(Jt(Mt,st,function(){return Mt.validateProgram(nn)}),Mt.getProgramParameter(nn,Mt.VALIDATE_STATUS)===!1)throw console.log(Mt.getProgramInfoLog(nn)),new Error("Shader program validation failed.")}function fe(Mt,st,nn){var rn=ke(Mt,st,function(){return Mt.createBuffer()},"Unable to create WebGLBuffer");return Jt(Mt,st,function(){return Mt.bindBuffer(Mt.ARRAY_BUFFER,rn)}),Jt(Mt,st,function(){return Mt.bufferData(Mt.ARRAY_BUFFER,nn,Mt.STATIC_DRAW)}),rn}function de(Mt,st,nn){var rn=ke(Mt,st,function(){return Mt.createBuffer()},"Unable to create WebGLBuffer");return Jt(Mt,st,function(){return Mt.bindBuffer(Mt.ELEMENT_ARRAY_BUFFER,rn)}),Jt(Mt,st,function(){return Mt.bufferData(Mt.ELEMENT_ARRAY_BUFFER,nn,Mt.STATIC_DRAW)}),rn}function pe(Mt,st){return ke(Mt,st,function(){return Mt.createTexture()},"Unable to create WebGLTexture.")}function ve(Mt,st){var nn=i().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(Mt<=0||st<=0){var rn="["+Mt+"x"+st+"]";throw new Error("Requested texture size "+rn+" is invalid.")}if(Mt>nn||st>nn)throw rn="["+Mt+"x"+st+"]",new Error("Requested texture size "+rn+" greater than WebGL maximum on this browser / GPU "+("["+nn+"x"+nn+"]")+".")}function me(Mt,st){return ke(Mt,st,function(){return Mt.createFramebuffer()},"Unable to create WebGLFramebuffer.")}function ge(Mt,st,nn,rn,on,an,sn,un){var Xr=Mt.getAttribLocation(nn,rn);return Xr!==-1&&(Jt(Mt,st,function(){return Mt.bindBuffer(Mt.ARRAY_BUFFER,on)}),Jt(Mt,st,function(){return Mt.vertexAttribPointer(Xr,an,Mt.FLOAT,!1,sn,un)}),Jt(Mt,st,function(){return Mt.enableVertexAttribArray(Xr)}),!0)}function ye(Mt,st,nn,rn){Se(Mt,rn),Jt(Mt,st,function(){return Mt.activeTexture(Mt.TEXTURE0+rn)}),Jt(Mt,st,function(){return Mt.bindTexture(Mt.TEXTURE_2D,nn)})}function xe(Mt,st,nn,rn){return ke(Mt,st,function(){return Mt.getUniformLocation(nn,rn)},'uniform "'+rn+'" not present in program.')}function be(Mt,st,nn){return Mt.getUniformLocation(st,nn)}function we(Mt,st,nn,rn,on,an){Jt(Mt,st,function(){return ye(Mt,st,rn,an)}),Jt(Mt,st,function(){return Mt.uniform1i(on,an)})}function Ce(Mt,st,nn,rn){Jt(Mt,st,function(){return Mt.bindFramebuffer(Mt.FRAMEBUFFER,rn)}),Jt(Mt,st,function(){return Mt.framebufferTexture2D(Mt.FRAMEBUFFER,Mt.COLOR_ATTACHMENT0,Mt.TEXTURE_2D,nn,0)})}function Ee(Mt,st,nn){Jt(Mt,st,function(){return Mt.bindFramebuffer(Mt.FRAMEBUFFER,nn)}),Jt(Mt,st,function(){return Mt.framebufferTexture2D(Mt.FRAMEBUFFER,Mt.COLOR_ATTACHMENT0,Mt.TEXTURE_2D,null,0)})}function Re(Mt){var st=Mt.checkFramebufferStatus(Mt.FRAMEBUFFER);if(st!==Mt.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+Ie(Mt,st))}function Ie(Mt,st){switch(st){case Mt.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case Mt.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case Mt.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case Mt.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error "+st}}function ke(Mt,st,nn,rn){var on=Jt(Mt,st,function(){return nn()});if(on==null)throw new Error(rn);return on}function Se(Mt,st){var nn=Mt.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,rn=st+Mt.TEXTURE0;if(rn<Mt.TEXTURE0||rn>nn)throw new Error("textureUnit must be in "+("[gl.TEXTURE0, gl.TEXTURE"+nn+"]")+".")}function Ae(Mt,st){return st===void 0&&(st=2),k$2(Mt.slice(0,Mt.length-st))}function De(Mt){if(Mt.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[Mt.length>1?Mt[Mt.length-2]:1,Mt[Mt.length-1]]}function Te(Mt){var st=[1,1,1];return Mt.length===0||Mt.length===1&&Mt[0]===1||(st=[Ae(Mt)].concat(De(Mt))),st}function Ne(Mt,st){var nn;st===void 0&&(st=!1);var rn=i().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(st&&(rn*=2,(Mt=Mt.map(function(to,uo){return uo>=Mt.length-2?b$1(Mt[uo]):Mt[uo]})).length===1&&(Mt=[2,Mt[0]])),Mt.length!==2){var on=M(Mt);Mt=on.newShape}var an=k$2(Mt);if(Mt.length<=1&&an<=rn)return[1,an];if(Mt.length===2&&Mt[0]<=rn&&Mt[1]<=rn)return Mt;if(Mt.length===3&&Mt[0]*Mt[1]<=rn&&Mt[2]<=rn)return[Mt[0]*Mt[1],Mt[2]];if(Mt.length===3&&Mt[0]<=rn&&Mt[1]*Mt[2]<=rn)return[Mt[0],Mt[1]*Mt[2]];if(Mt.length===4&&Mt[0]*Mt[1]*Mt[2]<=rn&&Mt[3]<=rn)return[Mt[0]*Mt[1]*Mt[2],Mt[3]];if(Mt.length===4&&Mt[0]<=rn&&Mt[1]*Mt[2]*Mt[3]<=rn)return[Mt[0],Mt[1]*Mt[2]*Mt[3]];if(st){var sn=Ae(Mt),un=2,Xr=2;return Mt.length&&(un=(nn=De(Mt))[0],Xr=nn[1]),T(an=sn*(un/2)*(Xr/2)).map(function(to){return 2*to})}return T(an)}function Fe(Mt){return Mt%2==0}function _e(Mt,st){if(S(Mt=Mt.slice(-2),st=st.slice(-2))||!Mt.length||!st.length||Mt[0]===0||Mt[1]===0||st[0]===0||st[1]===0)return!0;if(Mt.length!==st.length){var nn=Mt.slice(-1)[0],rn=st.slice(-1)[0];if(nn===rn||Fe(nn)&&Fe(rn)&&(Mt[0]===1||st[0]===1))return!0}return Mt[1]===st[1]&&Fe(Mt[0])&&Fe(st[0])}function Oe(Mt){if(ie==null){var st=jt(Mt);ie=st.getParameter(st.MAX_TEXTURE_SIZE)}return ie}function Me(Mt){if(se==null){var st=jt(Mt);se=st.getParameter(st.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,se)}function Be(Mt){if(Mt===0)return 0;var st=jt(Mt);return Pe(st,"EXT_disjoint_timer_query_webgl2")&&Mt===2?2:Pe(st,"EXT_disjoint_timer_query")?1:0}function Pe(Mt,st){return Mt.getExtension(st)!=null}function Le(Mt){try{if(jt(Mt)!=null)return!0}catch{return!1}return!1}function We(Mt){if(Mt===0)return!1;var st=jt(Mt);if(Mt===1){if(!Pe(st,"OES_texture_float"))return!1}else if(!Pe(st,"EXT_color_buffer_float"))return!1;return Ve(st)}function Ue(Mt){if(Mt===0)return!1;var st=jt(Mt);if(Mt!==1){if(Pe(st,"EXT_color_buffer_float"))return Ve(st);if(Pe(st,"EXT_color_buffer_half_float")){var nn=st.getExtension("EXT_color_buffer_half_float");return function(rn,on){var an=Qt(rn,on),sn=rn.createTexture();rn.bindTexture(rn.TEXTURE_2D,sn),rn.texImage2D(rn.TEXTURE_2D,0,an.internalFormatHalfFloat,1,1,0,an.textureFormatFloat,an.textureTypeHalfFloat,null);var un=rn.createFramebuffer();rn.bindFramebuffer(rn.FRAMEBUFFER,un),rn.framebufferTexture2D(rn.FRAMEBUFFER,rn.COLOR_ATTACHMENT0,rn.TEXTURE_2D,sn,0);var Xr=rn.checkFramebufferStatus(rn.FRAMEBUFFER)===rn.FRAMEBUFFER_COMPLETE;return rn.bindTexture(rn.TEXTURE_2D,null),rn.bindFramebuffer(rn.FRAMEBUFFER,null),rn.deleteTexture(sn),rn.deleteFramebuffer(un),Xr}(st,nn)}return!1}return!!Pe(st,"OES_texture_float")&&!!Pe(st,"WEBGL_color_buffer_float")&&Ve(st)}function Ve(Mt){var st=Qt(Mt),nn=Mt.createTexture();Mt.bindTexture(Mt.TEXTURE_2D,nn),Mt.texImage2D(Mt.TEXTURE_2D,0,st.internalFormatFloat,1,1,0,st.textureFormatFloat,st.textureTypeFloat,null);var rn=Mt.createFramebuffer();Mt.bindFramebuffer(Mt.FRAMEBUFFER,rn),Mt.framebufferTexture2D(Mt.FRAMEBUFFER,Mt.COLOR_ATTACHMENT0,Mt.TEXTURE_2D,nn,0);var on=Mt.checkFramebufferStatus(Mt.FRAMEBUFFER)===Mt.FRAMEBUFFER_COMPLETE;return Mt.bindTexture(Mt.TEXTURE_2D,null),Mt.bindFramebuffer(Mt.FRAMEBUFFER,null),Mt.deleteTexture(nn),Mt.deleteFramebuffer(rn),on}function ze(Mt){return Mt===2&&jt(Mt).fenceSync!=null}var He=i();function Xe(Mt){i().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(Mt+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function Ze(Mt,st){return Lt.tidy(Mt,st)}function tn(Mt){_t(Mt).forEach(function(st){return st.dispose()})}function en(Mt){return Lt.keep(Mt)}function dn(){for(var Mt=[],st=0;st<arguments.length;st++)Mt[st]=arguments[st];i().getBool("IS_TEST")||console.warn.apply(console,Mt)}function pn(Mt,st){var nn=Mt;if(V(Mt))return st==="string"?[]:[Mt.length];if(!Array.isArray(Mt))return[];for(var rn=[];Array.isArray(nn)||V(nn)&&st!=="string";)rn.push(nn.length),nn=nn[0];return Array.isArray(Mt)&&i().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&function on(an,sn,un){if(un=un||[],!Array.isArray(an)&&!V(an))return void C(sn.length===0,function(){return"Element arr["+un.join("][")+"] is a primitive, but should be an array/TypedArray of "+sn[0]+" elements"});C(sn.length>0,function(){return"Element arr["+un.join("][")+"] should be a primitive, but is an array of "+an.length+" elements"}),C(an.length===sn[0],function(){return"Element arr["+un.join("][")+"] should have "+sn[0]+" elements, but has "+an.length+" elements"});for(var Xr=sn.slice(1),to=0;to<an.length;++to)on(an[to],Xr,un.concat(to))}(Mt,rn,[]),rn}function vn(Mt,st,nn,rn){if(Mt!=null&&(Mt!=="numeric"&&Mt!==st||Mt==="numeric"&&st==="string"))throw new Error("Argument '"+nn+"' passed to '"+rn+"' must be "+Mt+" tensor, but got "+st+" tensor")}function mn(Mt,st,nn,rn){if(rn===void 0&&(rn="numeric"),Mt instanceof wt)return vn(rn,Mt.dtype,st,nn),Mt;var on=j(Mt);if(on!=="string"&&["bool","int32","float32"].indexOf(rn)>=0&&(on=rn),vn(rn,on,st,nn),Mt==null||!V(Mt)&&!Array.isArray(Mt)&&typeof Mt!="number"&&typeof Mt!="boolean"&&typeof Mt!="string"){var an=Mt==null?"null":Mt.constructor.name;throw new Error("Argument '"+st+"' passed to '"+nn+"' must be a Tensor or TensorLike, but got '"+an+"'")}var sn=pn(Mt,on);V(Mt)||Array.isArray(Mt)||(Mt=[Mt]);var un=on!=="string"?Q(Mt,on,i().getBool("DEBUG")):I(Mt,[],!0);return Lt.makeTensor(un,sn,on)}function gn(Mt,st,nn,rn){if(rn===void 0&&(rn="numeric"),!Array.isArray(Mt))throw new Error("Argument "+st+" passed to "+nn+" must be a `Tensor[]` or `TensorLike[]`");return Mt.map(function(on,an){return mn(on,st+"["+an+"]",nn)},rn)}function yn(Mt,st){for(var nn=0;nn<Mt.length;++nn)if(Mt[Mt.length-nn-1]!==st-1-nn)return!1;return!0}function xn(Mt,st,nn){for(var rn=Mt.length+st.length,on=[],an=0,sn=0,un=0;un<rn;un++)nn.indexOf(un)===-1?on.push(Mt[an++]):on.push(st[sn++]);return on}function bn(Mt,st){for(var nn=[],rn=Mt.length,on=0;on<rn;on++)st.indexOf(on)===-1&&nn.push(Mt[on]);return[nn,st.map(function(an){return Mt[an]})]}function wn(Mt,st){return xn(Mt,st.map(function(nn){return 1}),st)}function Cn(Mt,st,nn){C(yn(st,nn),function(){return Mt+" supports only inner-most axes for now. Got axes "+st+" and rank-"+nn+" input."})}function En(Mt,st){if(yn(Mt,st))return null;for(var nn=[],rn=0;rn<st;++rn)Mt.indexOf(rn)===-1&&nn.push(rn);return Mt.forEach(function(on){return nn.push(on)}),nn}function Rn(Mt){return Mt.map(function(st,nn){return[nn,st]}).sort(function(st,nn){return st[1]-nn[1]}).map(function(st){return st[0]})}function In(Mt,st){for(var nn=[],rn=st-Mt;rn<st;++rn)nn.push(rn);return nn}function kn(Mt,st){var nn=Mt[0].length;Mt.forEach(function(on,an){C(on.length===nn,function(){return"Error in concat"+nn+"D: rank of tensors["+an+"] must be the same as the rank of the rest ("+nn+")"})}),C(st>=0&&st<nn,function(){return"Error in concat"+nn+"D: axis must be between 0 and "+(nn-1)+"."});var rn=Mt[0];Mt.forEach(function(on,an){for(var sn=0;sn<nn;sn++)C(sn===st||on[sn]===rn[sn],function(){return"Error in concat"+nn+"D: Shape of tensors["+an+"] ("+on+") does not match the shape of the rest ("+rn+") along the non-concatenated axis "+an+"."})})}function Sn(Mt,st){for(var nn=Mt[0].slice(),rn=1;rn<Mt.length;rn++)nn[st]+=Mt[rn][st];return nn}function An(Mt){var st=Object.keys(Mt);if(st.length!==1)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+st.length+" keys.");var nn=st[0],rn=Mt[nn];nn.endsWith("_")&&(nn=nn.substring(0,nn.length-1));var on=function(){for(var an=[],sn=0;sn<arguments.length;sn++)an[sn]=arguments[sn];Lt.startScope(nn);try{var un=rn.apply(void 0,an);return un instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),Lt.endScope(un),un}catch(Xr){throw Lt.endScope(null),Xr}};return Object.defineProperty(on,"name",{value:nn,configurable:!0}),on}He.registerFlag("HAS_WEBGL",function(){return He.getNumber("WEBGL_VERSION")>0}),He.registerFlag("WEBGL_VERSION",function(){return Le(2)?2:Le(1)?1:0}),He.registerFlag("WEBGL_BUFFER_SUPPORTED",function(){return He.get("WEBGL_VERSION")===2}),He.registerFlag("WEBGL_CPU_FORWARD",function(){return!0}),He.registerFlag("WEBGL_FORCE_F16_TEXTURES",function(){return!1}),He.registerFlag("WEBGL_PACK",function(){return He.getBool("HAS_WEBGL")}),He.registerFlag("WEBGL_PACK_NORMALIZATION",function(){return He.getBool("WEBGL_PACK")}),He.registerFlag("WEBGL_PACK_CLIP",function(){return He.getBool("WEBGL_PACK")}),He.registerFlag("WEBGL_PACK_DEPTHWISECONV",function(){return!1}),He.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",function(){return He.getBool("WEBGL_PACK")}),He.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",function(){return He.getBool("WEBGL_PACK")}),He.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",function(){return He.getBool("WEBGL_PACK")}),He.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",function(){return He.getBool("WEBGL_PACK")}),He.registerFlag("WEBGL_PACK_REDUCE",function(){return He.getBool("WEBGL_PACK")}),He.registerFlag("WEBGL_LAZILY_UNPACK",function(){return He.getBool("WEBGL_PACK")}),He.registerFlag("WEBGL_CONV_IM2COL",function(){return He.getBool("WEBGL_PACK")}),He.registerFlag("WEBGL_MAX_TEXTURE_SIZE",function(){return Oe(He.getNumber("WEBGL_VERSION"))}),He.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",function(){return Me(He.getNumber("WEBGL_VERSION"))}),He.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",function(){var Mt=He.getNumber("WEBGL_VERSION");return Mt===0?0:Be(Mt)}),He.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",function(){return He.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&(Mt=navigator.userAgent||navigator.vendor||window.opera,!(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(Mt)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(Mt.substr(0,4))));var Mt}),He.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",function(){return We(He.getNumber("WEBGL_VERSION"))}),He.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",function(){return!He.getBool("WEBGL_FORCE_F16_TEXTURES")&&He.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")}),He.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",function(){return Ue(He.getNumber("WEBGL_VERSION"))}),He.registerFlag("WEBGL_FENCE_API_ENABLED",function(){return ze(He.getNumber("WEBGL_VERSION"))}),He.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",function(){return He.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0}),bt=Xe;var Dn=An({complex_:function(Mt,st){var nn=mn(Mt,"real","complex"),rn=mn(st,"imag","complex");return E(nn.shape,rn.shape,"real and imag shapes, "+nn.shape+" and "+rn.shape+", must match in call to tf.complex()."),Lt.runKernelFunc(function(on){return on.complex(nn,rn)},{$real:nn,$imag:rn})}}),Tn=An({real_:function(Mt){var st=mn(Mt,"input","real");return Lt.runKernelFunc(function(nn){return nn.real(st)},{$input:st})}}),Nn=An({imag_:function(Mt){var st=mn(Mt,"input","imag");return Lt.runKernelFunc(function(nn){return nn.imag(st)},{$input:st})}});function Fn(Mt,st,nn){return _n(Mt,st,pn(Mt,nn),nn)}function _n(Mt,st,nn,rn){if(rn==null&&(rn=j(Mt)),rn==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!V(Mt)&&!Array.isArray(Mt)&&typeof Mt!="number"&&typeof Mt!="boolean"&&typeof Mt!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(st!=null){nt(st);var on=k$2(st),an=k$2(nn);C(on===an,function(){return"Based on the provided shape, ["+st+"], the tensor should have "+on+" values but has "+an});for(var sn=0;sn<nn.length;++sn){var un=nn[sn],Xr=sn!==nn.length-1||un!==k$2(st.slice(sn));C(nn[sn]===st[sn]||!Xr,function(){return"Error creating a new Tensor. Inferred shape ("+nn+") does not match the provided shape ("+st+"). "})}}return V(Mt)||Array.isArray(Mt)||(Mt=[Mt]),st=st||nn,Mt=rn!=="string"?Q(Mt,rn,i().getBool("DEBUG")):I(Mt,[],!0),Lt.makeTensor(Mt,st,rn)}function On(Mt,st){if((V(Mt)&&st!=="string"||Array.isArray(Mt))&&st!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(st==="string"&&V(Mt)&&!(Mt instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return _n(Mt,[],[],st)}function Mn(Mt,st){R(Mt);var nn=pn(Mt,st);if(nn.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return _n(Mt,null,nn,st)}function Bn(Mt,st,nn){if(R(Mt),st!=null&&st.length!==2)throw new Error("tensor2d() requires shape to have two numbers");var rn=pn(Mt,nn);if(rn.length!==2&&rn.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(rn.length===1&&st==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return _n(Mt,st,rn,nn)}function Pn(Mt,st,nn){if(R(Mt),st!=null&&st.length!==3)throw new Error("tensor3d() requires shape to have three numbers");var rn=pn(Mt,nn);if(rn.length!==3&&rn.length!==1)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(rn.length===1&&st==null)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return _n(Mt,st,rn,nn)}function Ln(Mt,st,nn){if(R(Mt),st!=null&&st.length!==4)throw new Error("tensor4d() requires shape to have four numbers");var rn=pn(Mt,nn);if(rn.length!==4&&rn.length!==1)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(rn.length===1&&st==null)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return _n(Mt,st,rn,nn)}function Wn(Mt,st,nn){if(R(Mt),st!=null&&st.length!==5)throw new Error("tensor5d() requires shape to have five numbers");var rn=pn(Mt,nn);if(rn.length!==5&&rn.length!==1)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(rn.length===1&&st==null)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return _n(Mt,st,rn,nn)}function Un(Mt,st,nn){if(R(Mt),st!=null&&st.length!==6)throw new Error("tensor6d() requires shape to have six numbers");var rn=pn(Mt,nn);if(rn.length!==6&&rn.length!==1)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(rn.length===1&&st==null)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return _n(Mt,st=st||rn,rn,nn)}function Vn(Mt,st,nn,rn){return st===void 0&&(st=!0),Lt.makeVariable(Mt,st,nn,rn)}function zn(Mt,st){if(st===void 0&&(st="float32"),st==="complex64"){var nn=zn(Mt,"float32"),rn=Gn(Mt,"float32");return Dn(nn,rn)}var on=Z(k$2(Mt),st);return Lt.makeTensor(on,Mt,st)}function Gn(Mt,st){if(st===void 0&&(st="float32"),st==="complex64"){var nn=Gn(Mt,"float32"),rn=Gn(Mt,"float32");return Dn(nn,rn)}var on=tt(k$2(Mt),st);return Lt.makeTensor(on,Mt,st)}function Hn(Mt,st,nn){return Lt.runKernelFunc(function(rn){return rn.fill(Mt,st,nn)},{})}function qn(Mt,st,nn){if(nn<=0)throw new Error("The number of values should be positive.");return Lt.runKernelFunc(function(rn){return rn.linspace(Mt,st,nn)},{})}function Kn(Mt,st,nn,rn){if(nn===void 0&&(nn=1),rn===void 0&&(rn="float32"),nn===0)throw new Error("Cannot have a step of zero");if(Mt===st||Mt<st&&nn<0||st<Mt&&nn>1)return Gn([0],rn);var on=tt(Math.abs(Math.ceil((st-Mt)/nn)),rn);st<Mt&&nn===1&&(nn=-1),on[0]=Mt;for(var an=1;an<on.length;an++)on[an]=on[an-1]+nn;return Mn(on,rn)}var jn=An({onesLike_:function(Mt){var st=mn(Mt,"x","onesLike");if(st.dtype==="complex64"){var nn=jn(Tn(st)),rn=Xn(Nn(st));return Dn(nn,rn)}return Lt.runKernelFunc(function(on){return on.onesLike(st)},{$x:st},function(on,an){return{$x:function(){return Xn(on)}}})}}),Xn=An({zerosLike_:function(Mt){var st=mn(Mt,"x","zerosLike");return Lt.runKernelFunc(function(nn){return nn.zerosLike(st)},{$x:st},function(nn,rn){return{$x:function(){return Xn(nn)}}})}}),Yn=An({concat_:function(Mt,st){st===void 0&&(st=0),C(Mt.length>=1,function(){return"Pass at least one tensor to concat"});var nn=gn(Mt,"tensors","concat");nn[0].dtype==="complex64"&&nn.forEach(function(un){if(un.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype `+un.dtype+". ")}),st=O(st,nn[0].shape)[0];var rn=Sn(nn.map(function(un){return un.shape}),st);if(k$2(rn)===0)return Fn([],rn);if((nn=nn.filter(function(un){return un.size>0})).length===1)return nn[0];var on=nn.map(function(un){return un.shape});kn(on,st);var an=nn,sn={axis:st};return Lt.runKernelFunc(function(un){return un.concat(nn,st)},an,function(un){var Xr=on.map(function(to){return to[st]});return tr(un,Xr,st).map(function(to){return function(){return to}})},"Concat",sn)}}),$n=An({concat1d_:function(Mt){return Yn(Mt,0)}}),Qn=An({concat2d_:function(Mt,st){return Yn(Mt,st)}}),Jn=An({concat3d_:function(Mt,st){return Yn(Mt,st)}}),Zn=An({concat4d_:function(Mt,st){return Yn(Mt,st)}}),tr=An({split_:function(Mt,st,nn){nn===void 0&&(nn=0);var rn,on=mn(Mt,"x","split");return nn=O(nn,on.shape)[0],typeof st=="number"?(C(on.shape[nn]%st==0,function(){return"Number of splits must evenly divide the axis."}),rn=new Array(st).fill(on.shape[nn]/st)):(C(on.shape[nn]===st.reduce(function(an,sn){return an+sn}),function(){return"The sum of sizes must match the size of the axis dimension."}),rn=st),Lt.runKernelFunc(function(an){return an.split(on,rn,nn)},{$x:on},function(an){return{$x:function(){return Yn(an,nn)}}})}});function er(Mt,st){return Mt(st={exports:{}},st.exports),st.exports}var nr=er(function(Mt){(function(st,nn,rn){function on(un){var Xr,to=this,uo=(Xr=4022871197,function(hn){hn=hn.toString();for(var fn=0;fn<hn.length;fn++){var co=.02519603282416938*(Xr+=hn.charCodeAt(fn));co-=Xr=co>>>0,Xr=(co*=Xr)>>>0,Xr+=4294967296*(co-=Xr)}return 23283064365386963e-26*(Xr>>>0)});to.next=function(){var hn=2091639*to.s0+23283064365386963e-26*to.c;return to.s0=to.s1,to.s1=to.s2,to.s2=hn-(to.c=0|hn)},to.c=1,to.s0=uo(" "),to.s1=uo(" "),to.s2=uo(" "),to.s0-=uo(un),to.s0<0&&(to.s0+=1),to.s1-=uo(un),to.s1<0&&(to.s1+=1),to.s2-=uo(un),to.s2<0&&(to.s2+=1),uo=null}function an(un,Xr){return Xr.c=un.c,Xr.s0=un.s0,Xr.s1=un.s1,Xr.s2=un.s2,Xr}function sn(un,Xr){var to=new on(un),uo=Xr&&Xr.state,hn=to.next;return hn.int32=function(){return 4294967296*to.next()|0},hn.double=function(){return hn()+11102230246251565e-32*(2097152*hn()|0)},hn.quick=hn,uo&&(typeof uo=="object"&&an(uo,to),hn.state=function(){return an(to,{})}),hn}nn&&nn.exports?nn.exports=sn:this.alea=sn})(0,Mt)}),rr=er(function(Mt){(function(st,nn,rn){function on(un){var Xr=this,to="";Xr.x=0,Xr.y=0,Xr.z=0,Xr.w=0,Xr.next=function(){var hn=Xr.x^Xr.x<<11;return Xr.x=Xr.y,Xr.y=Xr.z,Xr.z=Xr.w,Xr.w^=Xr.w>>>19^hn^hn>>>8},un===(0|un)?Xr.x=un:to+=un;for(var uo=0;uo<to.length+64;uo++)Xr.x^=0|to.charCodeAt(uo),Xr.next()}function an(un,Xr){return Xr.x=un.x,Xr.y=un.y,Xr.z=un.z,Xr.w=un.w,Xr}function sn(un,Xr){var to=new on(un),uo=Xr&&Xr.state,hn=function(){return(to.next()>>>0)/4294967296};return hn.double=function(){do var fn=((to.next()>>>11)+(to.next()>>>0)/4294967296)/2097152;while(fn===0);return fn},hn.int32=to.next,hn.quick=hn,uo&&(typeof uo=="object"&&an(uo,to),hn.state=function(){return an(to,{})}),hn}nn&&nn.exports?nn.exports=sn:this.xor128=sn})(0,Mt)}),or=er(function(Mt){(function(st,nn,rn){function on(un){var Xr=this,to="";Xr.next=function(){var hn=Xr.x^Xr.x>>>2;return Xr.x=Xr.y,Xr.y=Xr.z,Xr.z=Xr.w,Xr.w=Xr.v,(Xr.d=Xr.d+362437|0)+(Xr.v=Xr.v^Xr.v<<4^hn^hn<<1)|0},Xr.x=0,Xr.y=0,Xr.z=0,Xr.w=0,Xr.v=0,un===(0|un)?Xr.x=un:to+=un;for(var uo=0;uo<to.length+64;uo++)Xr.x^=0|to.charCodeAt(uo),uo==to.length&&(Xr.d=Xr.x<<10^Xr.x>>>4),Xr.next()}function an(un,Xr){return Xr.x=un.x,Xr.y=un.y,Xr.z=un.z,Xr.w=un.w,Xr.v=un.v,Xr.d=un.d,Xr}function sn(un,Xr){var to=new on(un),uo=Xr&&Xr.state,hn=function(){return(to.next()>>>0)/4294967296};return hn.double=function(){do var fn=((to.next()>>>11)+(to.next()>>>0)/4294967296)/2097152;while(fn===0);return fn},hn.int32=to.next,hn.quick=hn,uo&&(typeof uo=="object"&&an(uo,to),hn.state=function(){return an(to,{})}),hn}nn&&nn.exports?nn.exports=sn:this.xorwow=sn})(0,Mt)}),ar=er(function(Mt){(function(st,nn,rn){function on(un){var Xr=this;Xr.next=function(){var to,uo,hn=Xr.x,fn=Xr.i;return to=hn[fn],uo=(to^=to>>>7)^to<<24,uo^=(to=hn[fn+1&7])^to>>>10,uo^=(to=hn[fn+3&7])^to>>>3,uo^=(to=hn[fn+4&7])^to<<7,to=hn[fn+7&7],uo^=(to^=to<<13)^to<<9,hn[fn]=uo,Xr.i=fn+1&7,uo},function(to,uo){var hn,fn=[];if(uo===(0|uo))fn[0]=uo;else for(uo=""+uo,hn=0;hn<uo.length;++hn)fn[7&hn]=fn[7&hn]<<15^uo.charCodeAt(hn)+fn[hn+1&7]<<13;for(;fn.length<8;)fn.push(0);for(hn=0;hn<8&&fn[hn]===0;++hn);for(hn==8?fn[7]=-1:fn[hn],to.x=fn,to.i=0,hn=256;hn>0;--hn)to.next()}(Xr,un)}function an(un,Xr){return Xr.x=un.x.slice(),Xr.i=un.i,Xr}function sn(un,Xr){un==null&&(un=+new Date);var to=new on(un),uo=Xr&&Xr.state,hn=function(){return(to.next()>>>0)/4294967296};return hn.double=function(){do var fn=((to.next()>>>11)+(to.next()>>>0)/4294967296)/2097152;while(fn===0);return fn},hn.int32=to.next,hn.quick=hn,uo&&(uo.x&&an(uo,to),hn.state=function(){return an(to,{})}),hn}nn&&nn.exports?nn.exports=sn:this.xorshift7=sn})(0,Mt)}),ir=er(function(Mt){(function(st,nn,rn){function on(un){var Xr=this;Xr.next=function(){var to,uo,hn=Xr.w,fn=Xr.X,co=Xr.i;return Xr.w=hn=hn+1640531527|0,uo=fn[co+34&127],to=fn[co=co+1&127],uo^=uo<<13,to^=to<<17,uo^=uo>>>15,to^=to>>>12,uo=fn[co]=uo^to,Xr.i=co,uo+(hn^hn>>>16)|0},function(to,uo){var hn,fn,co,lo,fo,ho=[],mo=128;for(uo===(0|uo)?(fn=uo,uo=null):(uo+="\0",fn=0,mo=Math.max(mo,uo.length)),co=0,lo=-32;lo<mo;++lo)uo&&(fn^=uo.charCodeAt((lo+32)%uo.length)),lo===0&&(fo=fn),fn^=fn<<10,fn^=fn>>>15,fn^=fn<<4,fn^=fn>>>13,lo>=0&&(fo=fo+1640531527|0,co=(hn=ho[127&lo]^=fn+fo)==0?co+1:0);for(co>=128&&(ho[127&(uo&&uo.length||0)]=-1),co=127,lo=512;lo>0;--lo)fn=ho[co+34&127],hn=ho[co=co+1&127],fn^=fn<<13,hn^=hn<<17,fn^=fn>>>15,hn^=hn>>>12,ho[co]=fn^hn;to.w=fo,to.X=ho,to.i=co}(Xr,un)}function an(un,Xr){return Xr.i=un.i,Xr.w=un.w,Xr.X=un.X.slice(),Xr}function sn(un,Xr){un==null&&(un=+new Date);var to=new on(un),uo=Xr&&Xr.state,hn=function(){return(to.next()>>>0)/4294967296};return hn.double=function(){do var fn=((to.next()>>>11)+(to.next()>>>0)/4294967296)/2097152;while(fn===0);return fn},hn.int32=to.next,hn.quick=hn,uo&&(uo.X&&an(uo,to),hn.state=function(){return an(to,{})}),hn}nn&&nn.exports?nn.exports=sn:this.xor4096=sn})(0,Mt)}),sr=er(function(Mt){(function(st,nn,rn){function on(un){var Xr=this,to="";Xr.next=function(){var hn=Xr.b,fn=Xr.c,co=Xr.d,lo=Xr.a;return hn=hn<<25^hn>>>7^fn,fn=fn-co|0,co=co<<24^co>>>8^lo,lo=lo-hn|0,Xr.b=hn=hn<<20^hn>>>12^fn,Xr.c=fn=fn-co|0,Xr.d=co<<16^fn>>>16^lo,Xr.a=lo-hn|0},Xr.a=0,Xr.b=0,Xr.c=-1640531527,Xr.d=1367130551,un===Math.floor(un)?(Xr.a=un/4294967296|0,Xr.b=0|un):to+=un;for(var uo=0;uo<to.length+20;uo++)Xr.b^=0|to.charCodeAt(uo),Xr.next()}function an(un,Xr){return Xr.a=un.a,Xr.b=un.b,Xr.c=un.c,Xr.d=un.d,Xr}function sn(un,Xr){var to=new on(un),uo=Xr&&Xr.state,hn=function(){return(to.next()>>>0)/4294967296};return hn.double=function(){do var fn=((to.next()>>>11)+(to.next()>>>0)/4294967296)/2097152;while(fn===0);return fn},hn.int32=to.next,hn.quick=hn,uo&&(typeof uo=="object"&&an(uo,to),hn.state=function(){return an(to,{})}),hn}nn&&nn.exports?nn.exports=sn:this.tychei=sn})(0,Mt)}),ur=er(function(Mt){(function(st,nn){var rn,on=this,an=256,sn=6,un="random",Xr=nn.pow(an,sn),to=nn.pow(2,52),uo=2*to,hn=an-1;function fn(mo,Uo,_d){var tp=[],ep=fo(function ip(op,ap){var sp,up=[],pp=typeof op;if(ap&&pp=="object")for(sp in op)try{up.push(ip(op[sp],ap-1))}catch{}return up.length?up:pp=="string"?op:op+"\0"}((Uo=Uo==1?{entropy:!0}:Uo||{}).entropy?[mo,ho(st)]:mo??function(){try{var ip;return rn&&(ip=rn.randomBytes)?ip=ip(an):(ip=new Uint8Array(an),(on.crypto||on.msCrypto).getRandomValues(ip)),ho(ip)}catch{var op=on.navigator,ap=op&&op.plugins;return[+new Date,on,ap,on.screen,ho(st)]}}(),3),tp),np=new co(tp),rp=function(){for(var ip=np.g(sn),op=Xr,ap=0;ip<to;)ip=(ip+ap)*an,op*=an,ap=np.g(1);for(;ip>=uo;)ip/=2,op/=2,ap>>>=1;return(ip+ap)/op};return rp.int32=function(){return 0|np.g(4)},rp.quick=function(){return np.g(4)/4294967296},rp.double=rp,fo(ho(np.S),st),(Uo.pass||_d||function(ip,op,ap,sp){return sp&&(sp.S&&lo(sp,np),ip.state=function(){return lo(np,{})}),ap?(nn[un]=ip,op):ip})(rp,ep,"global"in Uo?Uo.global:this==nn,Uo.state)}function co(mo){var Uo,_d=mo.length,tp=this,ep=0,np=tp.i=tp.j=0,rp=tp.S=[];for(_d||(mo=[_d++]);ep<an;)rp[ep]=ep++;for(ep=0;ep<an;ep++)rp[ep]=rp[np=hn&np+mo[ep%_d]+(Uo=rp[ep])],rp[np]=Uo;(tp.g=function(ip){for(var op,ap=0,sp=tp.i,up=tp.j,pp=tp.S;ip--;)op=pp[sp=hn&sp+1],ap=ap*an+pp[hn&(pp[sp]=pp[up=hn&up+op])+(pp[up]=op)];return tp.i=sp,tp.j=up,ap})(an)}function lo(mo,Uo){return Uo.i=mo.i,Uo.j=mo.j,Uo.S=mo.S.slice(),Uo}function fo(mo,Uo){for(var _d,tp=mo+"",ep=0;ep<tp.length;)Uo[hn&ep]=hn&(_d^=19*Uo[hn&ep])+tp.charCodeAt(ep++);return ho(Uo)}function ho(mo){return String.fromCharCode.apply(0,mo)}if(nn["seed"+un]=fn,fo(nn.random(),st),Mt.exports){Mt.exports=fn;try{rn=require("crypto")}catch{}}})([],Math)});ur.alea=nr,ur.xor128=rr,ur.xorwow=or,ur.xorshift7=ar,ur.xor4096=ir,ur.tychei=sr;var cr=ur.alea,lr=function(){function Mt(st,nn,rn,on,an){this.mean=st,this.stdDev=nn,this.dtype=rn,this.nextVal=NaN,this.truncated=on,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);var sn=an||Math.random();this.random=cr(sn.toString())}return Mt.prototype.nextValue=function(){if(!isNaN(this.nextVal)){var st=this.nextVal;return this.nextVal=NaN,st}for(var nn,rn,on=!1;!on;){var an=void 0,sn=void 0,un=void 0;do un=(an=2*this.random()-1)*an+(sn=2*this.random()-1)*sn;while(un>=1||un===0);var Xr=Math.sqrt(-2*Math.log(un)/un);nn=this.mean+this.stdDev*an*Xr,rn=this.mean+this.stdDev*sn*Xr,this.truncated&&!this.isValidTruncated(nn)||(on=!0)}return this.truncated&&!this.isValidTruncated(rn)||(this.nextVal=this.convertValue(rn)),this.convertValue(nn)},Mt.prototype.convertValue=function(st){return this.dtype==null||this.dtype==="float32"?st:Math.round(st)},Mt.prototype.isValidTruncated=function(st){return st<=this.upper&&st>=this.lower},Mt}(),hr=function(){function Mt(st,nn,rn,on){this.alpha=st,this.beta=1/nn,this.dtype=rn;var an=on||Math.random();this.randu=cr(an.toString()),this.randn=new lr(0,1,rn,!1,this.randu()),this.d=st<1?st+2/3:st-1/3,this.c=1/Math.sqrt(9*this.d)}return Mt.prototype.nextValue=function(){for(var st,nn,rn,on,an,sn;;){do on=this.randn.nextValue(),sn=1+this.c*on;while(sn<=0);if(sn*=sn*sn,nn=1-.331*(st=on*on)*st,rn=.5*st+this.d*(1-sn+Math.log(sn)),(an=this.randu())<nn||Math.log(an)<rn)break}return sn=1/this.beta*this.d*sn,this.alpha<1&&(sn*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(sn)},Mt.prototype.convertValue=function(st){return this.dtype==="float32"?st:Math.round(st)},Mt}(),fr=function(){function Mt(st,nn,rn,on){var an=this;if(st===void 0&&(st=0),nn===void 0&&(nn=1),this.canReturnFloat=function(){return an.dtype==null||an.dtype==="float32"},this.min=st,this.range=nn-st,this.dtype=rn,on==null&&(on=Math.random()),typeof on=="number"&&(on=on.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error("The difference between "+st+" - "+nn+" <= 1 and dtype is not float");this.random=cr(on)}return Mt.prototype.convertValue=function(st){return this.canReturnFloat()?st:Math.round(st)},Mt.prototype.nextValue=function(){return this.convertValue(this.min+this.range*this.random())},Mt}();function dr(Mt,st,nn){return st===void 0&&(st="float32"),st=st||"float32",nt(Mt),new gt(Mt,st,nn)}function pr(Mt,st){st===void 0&&(st=!1),console.log(Mt.toString(st))}var vr=An({batchToSpaceND_:function(Mt,st,nn){var rn=mn(Mt,"x","batchToSpaceND"),on=st.reduce(function(an,sn){return an*sn});return C(rn.rank>=1+st.length,function(){return"input rank is "+rn.rank+" but should be > than blockShape.length "+st.length}),C(nn.length===st.length,function(){return"crops.length is "+nn.length+" but should be equal to blockShape.length  "+st.length}),C(rn.shape[0]%on==0,function(){return"input tensor batch is "+rn.shape[0]+" but is not divisible by the product of the elements of blockShape "+st.join(" * ")+" === "+on}),Lt.runKernelFunc(function(an){return an.batchToSpaceND(rn,st,nn)},{$x:rn},function(an){return{$x:function(){return an.spaceToBatchND(st,nn)}}})}}),mr=An({broadcastTo_:function(Mt,st){var nn=mn(Mt,"broadcastTo","x"),rn=nn.shape;if(st.some(function(Xr){return!(Xr>0)||Xr%1!=0}))throw new Error("broadcastTo(): Invalid broadcast shape ["+st+"].");if(st.length<nn.rank)throw new Error("broadcastTo(): shape.length="+st.length+" < input.rank="+nn.rank+".");if(st.length>nn.rank){for(var on=nn.shape.slice();on.length<st.length;)on.unshift(1);nn=nn.reshape(on)}for(var an=Array.from(st),sn=st.length-1;sn>=0;sn--)if(nn.shape[sn]===st[sn])an[sn]=1;else if(nn.shape[sn]!==1)throw new Error("broadcastTo(): ["+rn+"] cannot be broadcast to ["+st+"].");var un=an.map(function(Xr,to){return Xr>1?to:-1}).filter(function(Xr){return Xr>=0});return un.length===0?nn.clone():Lt.runKernelFunc(function(Xr){return Xr.tile(nn,an)},{input:nn},function(Xr){return{input:function(){return Xr.sum(un,!0)}}})}}),gr=An({cast_:function(Mt,st){var nn=mn(Mt,"x","cast");if(!W(st))throw new Error("Failed to cast to unknown dtype "+st);if(st==="string"&&nn.dtype!=="string"||st!=="string"&&nn.dtype==="string")throw new Error("Only strings can be casted to strings");var rn={dtype:st};return Lt.runKernelFunc(function(on){return on.cast(nn,st)},{x:nn},function(on){return{x:function(){return on.clone()}}},"Cast",rn)}}),yr=An({clone_:function(Mt){var st=mn(Mt,"x","clone",null);return Lt.runKernelFunc(function(){return Lt.makeTensorFromDataId(st.dataId,st.shape,st.dtype)},{$x:st},function(nn){return{$x:function(){return nn.toFloat()}}})}}),xr=An({cumsum_:function(Mt,st,nn,rn){st===void 0&&(st=0),nn===void 0&&(nn=!1),rn===void 0&&(rn=!1);var on=mn(Mt,"x","cumsum"),an=En([st|=0],on.rank),sn=on;an!=null&&(sn=on.transpose(an));var un=In(1,on.rank)[0],Xr=Lt.runKernelFunc(function(to){return to.cumsum(sn,un,nn,rn)},{permutedX:sn},function(to){return{permutedX:function(){return to.cumsum(st,nn,!rn)}}});return an!=null&&(Xr=Xr.transpose(an)),Xr}}),br=An({depthToSpace_:function(Mt,st,nn){nn===void 0&&(nn="NHWC");var rn=mn(Mt,"x","depthToSpace"),on=nn==="NHWC"?rn.shape[1]:rn.shape[2],an=nn==="NHWC"?rn.shape[2]:rn.shape[3],sn=nn==="NHWC"?rn.shape[3]:rn.shape[1];return C(on*st>=0,function(){return`Negative dimension size caused by overflow when multiplying
      `+on+" and "+st+`  for depthToSpace with input shape
      `+rn.shape}),C(an*st>=0,function(){return`Negative dimension size caused by overflow when multiplying
      `+an+" and "+st+` for depthToSpace with input shape
          `+rn.shape}),C(sn%(st*st)==0,function(){return"Dimension size must be evenly divisible by "+st*st+" but is "+sn+" for depthToSpace with input shape "+rn.shape}),Lt.runKernelFunc(function(un){return un.depthToSpace(rn,st,nn)},{$x:rn})}}),wr=An({expandDims_:function(Mt,st){st===void 0&&(st=0);var nn=mn(Mt,"x","expandDims",null);C(st<=nn.rank,function(){return"Axis must be <= rank of the tensor"});var rn=nn.shape.slice();return st<0&&(C(-(nn.rank+1)<=st,function(){return"Axis must be in the interval ["+-(nn.rank+1)+", "+nn.rank+"]"}),st=nn.rank+st+1),rn.splice(st,0,1),Or(nn,rn)}}),Cr=An({eye_:function(Mt,st,nn,rn){rn===void 0&&(rn="float32"),st==null&&(st=Mt);for(var on=dr([Mt,st],rn),an=Mt<=st?Mt:st,sn=0;sn<an;++sn)on.set(1,sn,sn);var un=on.toTensor().as2D(Mt,st);if(nn==null)return un;if(nn.length===1)return Lr(wr(un,0),[nn[0],1,1]);if(nn.length===2)return Lr(wr(wr(un,0),0),[nn[0],nn[1],1,1]);if(nn.length===3)return Lr(wr(wr(wr(un,0),0),0),[nn[0],nn[1],nn[2],1,1]);throw new Error("eye() currently supports only 1D and 2D batchShapes, but received "+nn.length+"D.")}}),Er=An({multinomial_:function(Mt,st,nn,rn){rn===void 0&&(rn=!1);var on=mn(Mt,"logits","multinomial"),an=on.size,sn=on.rank;if(an<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+an+".");if(sn>2)throw new Error("Rank of probabilities must be 1 or 2, but is "+sn);nn=nn||Math.random();var un=sn===1?on.as2D(1,-1):on,Xr=Lt.runKernelFunc(function(to){return to.multinomial(un,rn,st,nn)},{logits2D:un});return sn===1?Xr.as1D():Xr}}),Rr=An({oneHot_:function(Mt,st,nn,rn){if(nn===void 0&&(nn=1),rn===void 0&&(rn=0),st<2)throw new Error("Error in oneHot: depth must be >=2, but it is "+st);var on=mn(Mt,"indices","oneHot","int32"),an=on.shape.concat([st]);return on=on.flatten(),Lt.runKernelFunc(function(sn){return sn.oneHot(on,st,nn,rn)},{$indices:on},function(sn){return{$indices:function(){return Gn(on.shape,"float32")}}}).reshape(an)}}),Ir=An({pad_:function(Mt,st,nn){nn===void 0&&(nn=0);var rn=mn(Mt,"x","pad");if(rn.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");var on={paddings:st,constantValue:nn};return Lt.runKernelFunc(function(an){return an.pad(rn,st,nn)},{x:rn},function(an){var sn=st.map(function(un){return un[0]});return{x:function(){return an.slice(sn,rn.shape)}}},"PadV2",on)}}),kr$1=An({pad1d_:function(Mt,st,nn){return nn===void 0&&(nn=0),C(st.length===2,function(){return"Invalid number of paddings. Must be length of 2."}),Ir(Mt,[st],nn)}}),Sr=An({pad2d_:function(Mt,st,nn){return nn===void 0&&(nn=0),C(st.length===2&&st[0].length===2&&st[1].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),Ir(Mt,st,nn)}}),Ar=An({pad3d_:function(Mt,st,nn){return nn===void 0&&(nn=0),C(st.length===3&&st[0].length===2&&st[1].length===2&&st[2].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),Ir(Mt,st,nn)}}),Dr=An({pad4d_:function(Mt,st,nn){return nn===void 0&&(nn=0),C(st.length===4&&st[0].length===2&&st[1].length===2&&st[2].length===2&&st[3].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),Ir(Mt,st,nn)}}),Tr=An({rand_:function(Mt,st,nn){var rn=k$2(Mt),on=null;if(nn==null||nn==="float32")on=new Float32Array(rn);else if(nn==="int32")on=new Int32Array(rn);else{if(nn!=="bool")throw new Error("Unknown data type "+nn);on=new Uint8Array(rn)}for(var an=0;an<rn;an++)on[an]=st();return Lt.makeTensor(on,Mt,nn)}}),Nr=An({randomNormal_:function(Mt,st,nn,rn,on){if(st===void 0&&(st=0),nn===void 0&&(nn=1),rn!=null&&rn==="bool")throw new Error("Unsupported data type "+rn);for(var an=new lr(st,nn,rn,!1,on),sn=dr(Mt,rn),un=0;un<sn.values.length;un++)sn.values[un]=an.nextValue();return sn.toTensor()}}),Fr=An({randomGamma_:function(Mt,st,nn,rn,on){if(nn===void 0&&(nn=1),rn===void 0&&(rn="float32"),nn==null&&(nn=1),rn==null&&(rn="float32"),rn!=="float32"&&rn!=="int32")throw new Error("Unsupported data type "+rn);for(var an=new hr(st,nn,rn,on),sn=dr(Mt,rn),un=0;un<sn.values.length;un++)sn.values[un]=an.nextValue();return sn.toTensor()}}),_r=An({randomUniform_:function(Mt,st,nn,rn,on){st===void 0&&(st=0),nn===void 0&&(nn=1),rn===void 0&&(rn="float32");for(var an=dr(Mt,rn),sn=new fr(st,nn,null,on),un=0;un<an.values.length;un++)an.values[un]=sn.nextValue();return an.toTensor()}}),Or=An({reshape_:function(Mt,st){var nn=mn(Mt,"x","reshape",null);st=_(st,nn.size),C(nn.size===k$2(st),function(){return"new shape and old shape must have the same number of elements."});var rn={shape:st};return Lt.runKernelFunc(function(on){return on.reshape(nn,st)},{x:nn},function(on){return{x:function(){return on.reshape(nn.shape)}}},"Reshape",rn)}}),Mr=An({spaceToBatchND_:function(Mt,st,nn){var rn=mn(Mt,"x","spaceToBatchND");return C(rn.rank>=1+st.length,function(){return"input rank "+rn.rank+" should be > than [blockShape] "+st.length}),C(nn.length===st.length,function(){return"paddings.shape[0] "+nn.length+" must be equal to [blockShape] "+st.length}),C(rn.shape.reduce(function(on,an,sn){return sn>0&&sn<=st.length?on&&(an+nn[sn-1][0]+nn[sn-1][1])%st[sn-1]==0:on},!0),function(){return"input spatial dimensions "+rn.shape.slice(1)+" with paddings "+nn.toString()+" must be divisible by blockShapes "+st.toString()}),Lt.runKernelFunc(function(on){return on.spaceToBatchND(rn,st,nn)},{$x:rn},function(on){return{$x:function(){return on.batchToSpaceND(st,nn)}}})}}),Br=An({squeeze_:function(Mt,st){var nn=mn(Mt,"x","squeeze");return Or(nn,M(nn.shape,st).newShape)}}),Pr=An({stack_:function(Mt,st){st===void 0&&(st=0);var nn=gn(Mt,"tensors","stack");if(C(nn.length>=1,function(){return"Pass at least one tensor to tf.stack"}),nn.length===1)return nn[0].expandDims(st);var rn=nn[0].rank,on=nn[0].shape,an=nn[0].dtype;C(st<=rn,function(){return"Axis must be <= rank of the tensor"}),nn.forEach(function(un){E(on,un.shape,"All tensors passed to stack must have matching shapes")}),nn.forEach(function(un){C(an===un.dtype,function(){return"All tensors passed to stack must have matching dtypes"})});var sn=nn.map(function(un){return un.expandDims(st)});return Yn(sn,st)}}),Lr=An({tile_:function(Mt,st){var nn=mn(Mt,"x","tile",null);C(nn.rank===st.length,function(){return"Error in transpose: rank of input "+nn.rank+" must match length of reps "+st+"."});var rn=[nn],on={reps:st};return Lt.runKernelFunc(function(an,sn){var un=an.tile(nn,st);return sn([nn]),un},{x:nn},function(an,sn){var un=sn[0];return{x:function(){var Xr=Xn(un);if(un.rank===1)for(var to=0;to<st[0];++to)Xr=Xr.add(an.slice([to*un.shape[0]],[un.shape[0]]));else if(un.rank===2)for(to=0;to<st[0];++to)for(var uo=0;uo<st[1];++uo)Xr=Xr.add(an.slice([to*un.shape[0],uo*un.shape[1]],[un.shape[0],un.shape[1]]));else if(un.rank===3)for(to=0;to<st[0];++to)for(uo=0;uo<st[1];++uo)for(var hn=0;hn<st[2];++hn)Xr=Xr.add(an.slice([to*un.shape[0],uo*un.shape[1],hn*un.shape[2]],[un.shape[0],un.shape[1],un.shape[2]]));else{if(un.rank!==4)throw new Error("Gradient for tile operation is not implemented for rank-"+un.rank+" tensors yet.");for(to=0;to<st[0];++to)for(uo=0;uo<st[1];++uo)for(hn=0;hn<st[2];++hn)for(var fn=0;fn<st[3];++fn)Xr=Xr.add(an.slice([to*un.shape[0],uo*un.shape[1],hn*un.shape[2],fn*un.shape[3]],[un.shape[0],un.shape[1],un.shape[2],un.shape[3]]))}return Xr}}},"Tile",on,rn)}}),Wr=An({truncatedNormal_:function(Mt,st,nn,rn,on){if(st===void 0&&(st=0),nn===void 0&&(nn=1),rn!=null&&rn==="bool")throw new Error("Unsupported data type "+rn);for(var an=new lr(st,nn,rn,!0,on),sn=dr(Mt,rn),un=0;un<sn.values.length;un++)sn.values[un]=an.nextValue();return sn.toTensor()}}),Ur=An({unstack_:function(Mt,st){st===void 0&&(st=0),st=st||0;var nn=mn(Mt,"x","unstack");C(st>=-nn.shape.length&&st<nn.shape.length,function(){return"Axis = "+st+" is not in [-"+nn.shape.length+", "+nn.shape.length+")"}),st<0&&(st+=nn.shape.length);var rn={axis:st};return Lt.runKernelFunc(function(on){return on.unstack(nn,st)},{x:nn},function(on){return{x:function(){return Pr(on,st)}}},"Unpack",rn)}}),Vr=function(Mt,st){return n$1(this,void 0,void 0,function(){var nn,rn,on,an,sn,un,Xr,to,uo,hn;return r(this,function(fn){switch(fn.label){case 0:return nn=mn(Mt,"x","setdiff1d"),rn=mn(st,"y","setdiff1d"),C(nn.dtype===rn.dtype,function(){return"x and y should have the same dtype, but got x ("+nn.dtype+") and y ("+rn.dtype+")."}),C(nn.rank===1,function(){return"x should be 1D tensor, but got x ("+nn.shape+")."}),C(rn.rank===1,function(){return"y should be 1D tensor, but got y ("+rn.shape+")."}),[4,nn.data()];case 1:return on=fn.sent(),[4,rn.data()];case 2:for(an=fn.sent(),sn=new Set(an),un=0,uo=0;uo<on.length;uo++)sn.has(on[uo])||un++;for(Xr=new gt([un],nn.dtype),to=new gt([un],"int32"),uo=0,hn=0;uo<on.length;uo++)sn.has(on[uo])||(Xr.values[hn]=on[uo],to.values[hn]=uo,hn++);return[2,[Xr.toTensor(),to.toTensor()]]}})})};function zr(Mt,st,nn,rn){rn===void 0&&(rn=!0);var on=[];if(rn)(on=on.concat(st.slice(0))).push(Mt[0]/nn),on=on.concat(Mt.slice(1));else{on=on.concat(Mt[0]);for(var an=st.length,sn=0;sn<an;++sn)on=on.concat([Mt[sn+1]/st[sn],st[sn]]);on=on.concat(Mt.slice(an+1))}return on}function Gr(Mt,st,nn){nn===void 0&&(nn=!0);var rn=[];if(nn){rn.push(st);for(var on=st+1;on<Mt;++on)on<=2*st?(rn.push(on),rn.push(on-(st+1))):rn.push(on)}else{var an=[],sn=[];for(on=1;on<Mt;++on)on>=2*st+1||on%2==1?sn.push(on):an.push(on);rn.push.apply(rn,an),rn.push(0),rn.push.apply(rn,sn)}return rn}function Hr(Mt,st,nn,rn){rn===void 0&&(rn=!0);var on=[];rn?on.push(Mt[0]/nn):on.push(Mt[0]*nn);for(var an=1;an<Mt.length;++an)an<=st.length?rn?on.push(st[an-1]*Mt[an]):on.push(Mt[an]/st[an-1]):on.push(Mt[an]);return on}function qr(Mt,st){for(var nn=[0],rn=0;rn<st;++rn)nn.push(Mt[rn][0]);return nn}function Kr(Mt,st,nn){for(var rn=Mt.slice(0,1),on=0;on<nn;++on)rn.push(Mt[on+1]-st[on][0]-st[on][1]);return rn}function jr(Mt,st){if(Mt.rank<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher, but the rank was "+Mt.rank+".");if(st.rank<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher, but the rank was "+st.rank+".");if(st.dtype!=="int32")throw new Error("tf.gatherND() expects the indices to be int32 type, but the dtype was "+st.dtype+".");if(st.shape[st.rank-1]>Mt.rank)throw new Error("index innermost dimension length must be <= tensor rank; saw: "+st.shape[st.rank-1]+" vs. "+Mt.rank);if(Mt.size===0)throw new Error("Requested more than 0 entries, but input is empty. Input shape: "+Mt.shape+".");for(var nn=st.shape,rn=nn[nn.length-1],on=1,an=0;an<nn.length-1;++an)on*=nn[an];var sn=Mt.shape,un=nn.slice();un.pop();var Xr=1;for(an=rn;an<Mt.rank;++an)Xr*=sn[an],un.push(sn[an]);var to=$(Mt.shape).map(function(uo){return uo/Xr}).concat([1]).slice(0,rn);return[un,on,Xr,to]}var Yr=30;function $r(Mt){return Mt<=Yr?Mt:Y(Mt,Math.floor(Math.sqrt(Mt)))}function Qr(Mt,st,nn){var rn=st.rank>1?st.shape[st.rank-1]:1,on=st.rank>1?st.rank-1:1,an="Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: "+nn.shape+", indices.shape: "+st.shape+", shape: "+Mt+", sliceDim: "+rn+", and batchDim: "+on+".";if(nn.rank<on)throw new Error(an+" update.rank < "+on+". ");if(Mt.length<rn+(nn.rank-on))throw new Error(an+" Output shape length < "+(rn+(nn.rank-on)));if(nn.rank!==on+Mt.length-rn)throw new Error(an+" update.rank != "+(on+Mt.length-rn));for(var sn=0;sn<on;++sn)if(nn.shape[sn]!==st.shape[sn])throw new Error(an+" updates.shape["+sn+"] ("+nn.shape[sn]+") != indices.shape["+sn+"] ("+st.shape[sn]+").");for(sn=0;sn<nn.rank-on;++sn)if(nn.shape[sn+on]!==Mt[sn+rn])throw new Error(an+" updates.shape["+(sn+on)+"] ("+nn.shape[sn+on]+") != shape["+(sn+on)+"] ("+Mt[sn+on]+")")}function Jr(Mt,st,nn){if(st.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher, but the rank was "+st.rank+".");if(Mt.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher, but the rank was "+Mt.rank+".");if(st.dtype!=="int32")throw new Error("The dtype of 'indices' should be int32, but got dtype: "+st.dtype);if(nn.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: "+nn);if(nn.length===0){if(st.size===0)throw new Error("Indices specified for empty output. indices shape: "+st.shape);if(Mt.size===0)throw new Error("Updates specified for empty output. updates shape: "+Mt.shape)}Qr(nn,st,Mt)}function Zr(Mt,st,nn){for(var rn=st.shape.length,on=rn>1?st.shape[rn-1]:1,an=nn.length,sn=1,un=on;un<an;++un)sn*=nn[un];var Xr=on<1?1:on;return{sliceRank:on,numUpdates:k$2(st.shape)/Xr,sliceSize:sn,strides:$(nn.slice(0,on)).concat([1]),outputSize:k$2(nn)}}function eo(Mt,st,nn){C(Mt.rank===st.length,function(){return"Error in slice"+Mt.rank+"D: Length of begin "+st+" must match the rank of the array ("+Mt.rank+")."}),C(Mt.rank===nn.length,function(){return"Error in slice"+Mt.rank+"D: Length of size "+nn+" must match the rank of the array ("+Mt.rank+")."});for(var rn=function(an){C(st[an]+nn[an]<=Mt.shape[an],function(){return"Error in slice"+Mt.rank+"D: begin["+an+"] + size["+an+"] ("+(st[an]+nn[an])+") would overflow input.shape["+an+"] ("+Mt.shape[an]+")"})},on=0;on<Mt.rank;++on)rn(on)}function no(Mt){for(var st=[],nn=0;Mt>0;)1&Mt&&st.push(nn),Mt/=2,nn++;return st}function ro(Mt,st,nn){for(var rn=[],on=0;on<Mt.length;on++)rn[on]=Math.ceil((st[on]-Mt[on])/nn[on]);return rn}function oo(Mt,st,nn,rn,on){var an=st[on],sn=nn[on]||1;(Mt&1<<on||an==null)&&(an=sn>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);var un=rn[on];return an<0&&(an+=un),an=x$1(0,an,un-1)}function ao(Mt,st,nn,rn,on){var an=st[on],sn=nn[on]||1;(Mt&1<<on||an==null)&&(an=sn>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);var un=rn[on];return an<0&&(an+=un),an=sn>0?x$1(0,an,un):x$1(-1,an,un-1)}function io(Mt,st,nn){for(var rn=nn.length,on=0;on<nn.length;on++)if(nn[on]>1){rn=on;break}for(on=rn+1;on<nn.length;on++)if(st[on]>0||nn[on]!==Mt[on])return!1;return!0}function so(Mt,st){for(var nn=Mt.length>0?Mt[Mt.length-1]:1,rn=0;rn<Mt.length-1;rn++)nn+=Mt[rn]*st[rn];return nn}function po(Mt,st){C(X(Mt),function(){return"The f passed in variableGrads(f) must be a function"}),C(st==null||Array.isArray(st)&&st.every(function(uo){return uo instanceof St}),function(){return"The varList passed in variableGrads(f, varList) must be an array of variables"});var nn=st!=null;if(!nn)for(var rn in st=[],Lt.registeredVariables)st.push(Lt.registeredVariables[rn]);var on=nn?st.filter(function(uo){return!uo.trainable}):null,an=st.length;C((st=st.filter(function(uo){return uo.trainable})).length>0,function(){return"variableGrads() expects at least one of the input variables to be trainable, but none of the "+an+" variables is trainable."});var sn=Lt.gradients(Mt,st,null,!0),un=sn.value,Xr=sn.grads;C(Xr.some(function(uo){return uo!=null}),function(){return"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."}),C(un.rank===0,function(){return"The f passed in variableGrads(f) must return a scalar, but it returned a rank-"+un.rank+" tensor"});var to={};return st.forEach(function(uo,hn){Xr[hn]!=null&&(to[uo.name]=Xr[hn])}),on!=null&&on.forEach(function(uo){return to[uo.name]=null}),{value:un,grads:to}}function vo(Mt){return Lt.customGrad(Mt)}var go=An({softmax_:function(Mt,st){st===void 0&&(st=-1);var nn=mn(Mt,"logits","softmax","float32");if(st===-1&&(st=nn.rank-1),st!==nn.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. Logits was rank "+nn.rank+" and dim was "+st);return Lt.runKernelFunc(function(rn,on){var an=rn.softmax(nn,st);return on([an]),an},{logits:nn},function(rn,on){var an=on[0],sn=rn.mul(an);return{logits:function(){return sn.sub(sn.sum([st],!0).mul(an))}}},"Softmax",{dim:st},[],[!0])}}),yo=An({logSoftmax_:function(Mt,st){st===void 0&&(st=-1);var nn=mn(Mt,"logits","logSoftmax");if(st===-1&&(st=nn.rank-1),st!==nn.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. Logits was rank "+nn.rank+" and axis was "+st);return vo(function(rn,on){var an=rn.max(st,!0),sn=rn.sub(an),un=sn.toFloat().sub(sn.exp().sum(st,!0).log());return on([un]),{value:un,gradFunc:function(Xr,to){var uo=to[0].exp();return Xr.sub(Xr.sum(st,!0).mul(uo))}}})(nn)}}),xo=function(){function Mt(st,nn){this.backend=st,this.dataMover=nn,this.data=new WeakMap,this.dataIdsCount=0}return Mt.prototype.get=function(st){return this.data.has(st)||this.dataMover.moveData(this.backend,st),this.data.get(st)},Mt.prototype.set=function(st,nn){this.dataIdsCount++,this.data.set(st,nn)},Mt.prototype.has=function(st){return this.data.has(st)},Mt.prototype.delete=function(st){return this.dataIdsCount--,this.data.delete(st)},Mt.prototype.numDataIds=function(){return this.dataIdsCount},Mt}(),bo=function(){function Mt(){}return Mt.prototype.time=function(st){return wo("time")},Mt.prototype.read=function(st){return wo("read")},Mt.prototype.readSync=function(st){return wo("readSync")},Mt.prototype.numDataIds=function(){return wo("numDataIds")},Mt.prototype.disposeData=function(st){return wo("disposeData")},Mt.prototype.write=function(st,nn,rn){return wo("write")},Mt.prototype.move=function(st,nn,rn,on){return wo("move")},Mt.prototype.memory=function(){return wo("memory")},Mt.prototype.floatPrecision=function(){return wo("floatPrecision")},Mt.prototype.epsilon=function(){return this.floatPrecision()===32?1e-7:1e-4},Mt.prototype.batchMatMul=function(st,nn,rn,on){return wo("batchMatMul")},Mt.prototype.fusedBatchMatMul=function(st){return st.a,st.b,st.transposeA,st.transposeB,st.bias,st.activation,st.preluActivationWeights,wo("fusedBatchMatMul")},Mt.prototype.slice=function(st,nn,rn){return wo("slice")},Mt.prototype.stridedSlice=function(st,nn,rn,on){return wo("stridedSlice")},Mt.prototype.unstack=function(st,nn){return wo("unstack")},Mt.prototype.reverse=function(st,nn){return wo("reverse")},Mt.prototype.concat=function(st,nn){return wo("concat")},Mt.prototype.neg=function(st){return wo("neg")},Mt.prototype.add=function(st,nn){return wo("add")},Mt.prototype.addN=function(st){return wo("addN")},Mt.prototype.subtract=function(st,nn){return wo("subtract")},Mt.prototype.multiply=function(st,nn){return wo("multiply")},Mt.prototype.realDivide=function(st,nn){return wo("realDivide")},Mt.prototype.floorDiv=function(st,nn){return wo("floorDiv")},Mt.prototype.sum=function(st,nn){return wo("sum")},Mt.prototype.prod=function(st,nn){return wo("prod")},Mt.prototype.unsortedSegmentSum=function(st,nn,rn){return wo("unsortedSegmentSum")},Mt.prototype.argMin=function(st,nn){return wo("argMin")},Mt.prototype.argMax=function(st,nn){return wo("argMax")},Mt.prototype.equal=function(st,nn){return wo("equal")},Mt.prototype.notEqual=function(st,nn){return wo("notEqual")},Mt.prototype.less=function(st,nn){return wo("less")},Mt.prototype.lessEqual=function(st,nn){return wo("lessEqual")},Mt.prototype.greater=function(st,nn){return wo("greater")},Mt.prototype.greaterEqual=function(st,nn){return wo("greaterEqual")},Mt.prototype.logicalNot=function(st){return wo("logicalNot")},Mt.prototype.logicalAnd=function(st,nn){return wo("logicalAnd")},Mt.prototype.logicalOr=function(st,nn){return wo("logicalOr")},Mt.prototype.where=function(st){return wo("where")},Mt.prototype.select=function(st,nn,rn){return wo("select")},Mt.prototype.topk=function(st,nn,rn){return wo("topk")},Mt.prototype.min=function(st,nn){return wo("min")},Mt.prototype.minimum=function(st,nn){return wo("minimum")},Mt.prototype.mod=function(st,nn){return wo("mod")},Mt.prototype.max=function(st,nn){return wo("max")},Mt.prototype.maximum=function(st,nn){return wo("maximum")},Mt.prototype.all=function(st,nn){return wo("all")},Mt.prototype.any=function(st,nn){return wo("any")},Mt.prototype.squaredDifference=function(st,nn){return wo("squaredDifference")},Mt.prototype.ceil=function(st){return wo("ceil")},Mt.prototype.floor=function(st){return wo("floor")},Mt.prototype.round=function(st){return wo("round")},Mt.prototype.sign=function(st){return wo("sign")},Mt.prototype.isNaN=function(st){return wo("isNaN")},Mt.prototype.isInf=function(st){return wo("isInf")},Mt.prototype.isFinite=function(st){return wo("isFinite")},Mt.prototype.pow=function(st,nn){return wo("pow")},Mt.prototype.exp=function(st){return wo("exp")},Mt.prototype.expm1=function(st){return wo("expm1")},Mt.prototype.softmax=function(st,nn){return wo("softmax")},Mt.prototype.log=function(st){return wo("log")},Mt.prototype.log1p=function(st){return wo("log1p")},Mt.prototype.sqrt=function(st){return wo("sqrt")},Mt.prototype.rsqrt=function(st){return wo("rsqrt")},Mt.prototype.square=function(st){return wo("square")},Mt.prototype.reciprocal=function(st){return wo("reciprocal")},Mt.prototype.relu=function(st){return wo("relu")},Mt.prototype.relu6=function(st){return wo("relu6")},Mt.prototype.prelu=function(st,nn){return wo("prelu")},Mt.prototype.elu=function(st){return wo("elu")},Mt.prototype.eluDer=function(st,nn){return wo("eluDer")},Mt.prototype.selu=function(st){return wo("selu")},Mt.prototype.int=function(st){return wo("int")},Mt.prototype.clip=function(st,nn,rn){return wo("clip")},Mt.prototype.abs=function(st){return wo("abs")},Mt.prototype.complexAbs=function(st){return wo("complexAbs")},Mt.prototype.sigmoid=function(st){return wo("sigmoid")},Mt.prototype.softplus=function(st){return wo("softplus")},Mt.prototype.sin=function(st){return wo("sin")},Mt.prototype.cos=function(st){return wo("cos")},Mt.prototype.tan=function(st){return wo("tan")},Mt.prototype.asin=function(st){return wo("asin")},Mt.prototype.acos=function(st){return wo("acos")},Mt.prototype.atan=function(st){return wo("atan")},Mt.prototype.atan2=function(st,nn){return wo("atan2")},Mt.prototype.sinh=function(st){return wo("sinh")},Mt.prototype.cosh=function(st){return wo("cosh")},Mt.prototype.tanh=function(st){return wo("tanh")},Mt.prototype.asinh=function(st){return wo("asinh")},Mt.prototype.acosh=function(st){return wo("acosh")},Mt.prototype.atanh=function(st){return wo("atanh")},Mt.prototype.erf=function(st){return wo("erf")},Mt.prototype.step=function(st,nn){return wo("step")},Mt.prototype.fusedConv2d=function(st){return st.input,st.filter,st.convInfo,st.bias,st.activation,st.preluActivationWeights,wo("fusedConv2d")},Mt.prototype.conv2d=function(st,nn,rn){return wo("conv2d")},Mt.prototype.conv2dDerInput=function(st,nn,rn){return wo("conv2dDerInput")},Mt.prototype.conv2dDerFilter=function(st,nn,rn){return wo("conv2dDerFilter")},Mt.prototype.fusedDepthwiseConv2D=function(st){return st.input,st.filter,st.convInfo,st.bias,st.activation,st.preluActivationWeights,wo("fusedDepthwiseConv2D")},Mt.prototype.depthwiseConv2D=function(st,nn,rn){return wo("depthwiseConv2D")},Mt.prototype.depthwiseConv2DDerInput=function(st,nn,rn){return wo("depthwiseConv2DDerInput")},Mt.prototype.depthwiseConv2DDerFilter=function(st,nn,rn){return wo("depthwiseConv2DDerFilter")},Mt.prototype.conv3d=function(st,nn,rn){return wo("conv3d")},Mt.prototype.conv3dDerInput=function(st,nn,rn){return wo("conv3dDerInput")},Mt.prototype.conv3dDerFilter=function(st,nn,rn){return wo("conv3dDerFilter")},Mt.prototype.maxPool=function(st,nn){return wo("maxPool")},Mt.prototype.maxPoolBackprop=function(st,nn,rn,on){return wo("maxPoolBackprop")},Mt.prototype.avgPool=function(st,nn){return wo("avgPool")},Mt.prototype.avgPoolBackprop=function(st,nn,rn){return wo("avgPoolBackprop")},Mt.prototype.avgPool3d=function(st,nn){return wo("avgPool3d")},Mt.prototype.avgPool3dBackprop=function(st,nn,rn){return wo("avgPool3dBackprop")},Mt.prototype.maxPool3d=function(st,nn){return wo("maxPool3d")},Mt.prototype.maxPool3dBackprop=function(st,nn,rn,on){return wo("maxPool3dBackprop")},Mt.prototype.reshape=function(st,nn){return wo("reshape")},Mt.prototype.cast=function(st,nn){return wo("cast")},Mt.prototype.tile=function(st,nn){return wo("tile")},Mt.prototype.pad=function(st,nn,rn){return wo("pad")},Mt.prototype.transpose=function(st,nn){return wo("transpose")},Mt.prototype.gather=function(st,nn,rn){return wo("gather")},Mt.prototype.gatherND=function(st,nn){return wo("gatherND")},Mt.prototype.scatterND=function(st,nn,rn){return wo("scatterND")},Mt.prototype.batchToSpaceND=function(st,nn,rn){return wo("batchToSpaceND")},Mt.prototype.spaceToBatchND=function(st,nn,rn){return wo("spaceToBatchND")},Mt.prototype.resizeBilinear=function(st,nn,rn,on){return wo("resizeBilinear")},Mt.prototype.resizeBilinearBackprop=function(st,nn,rn){return wo("resizeBilinearBackprop")},Mt.prototype.resizeNearestNeighbor=function(st,nn,rn,on){return wo("resizeNearestNeighbor")},Mt.prototype.resizeNearestNeighborBackprop=function(st,nn,rn){return wo("resizeNearestNeighborBackprop")},Mt.prototype.batchNormalization=function(st,nn,rn,on,an,sn){return wo("batchNormalization")},Mt.prototype.localResponseNormalization4D=function(st,nn,rn,on,an){return wo("localResponseNormalization4D")},Mt.prototype.LRNGrad=function(st,nn,rn,on,an,sn,un){return wo("LRNGrad")},Mt.prototype.multinomial=function(st,nn,rn,on){return wo("multinomial")},Mt.prototype.oneHot=function(st,nn,rn,on){return wo("oneHot")},Mt.prototype.cumsum=function(st,nn,rn,on){return wo("cumsum")},Mt.prototype.nonMaxSuppression=function(st,nn,rn,on,an){return wo("nonMaxSuppression")},Mt.prototype.fft=function(st){return wo("fft")},Mt.prototype.ifft=function(st){return wo("ifft")},Mt.prototype.complex=function(st,nn){return wo("complex")},Mt.prototype.real=function(st){return wo("real")},Mt.prototype.imag=function(st){return wo("imag")},Mt.prototype.cropAndResize=function(st,nn,rn,on,an,sn){return wo("cropAndResize")},Mt.prototype.depthToSpace=function(st,nn,rn){return wo("depthToSpace")},Mt.prototype.split=function(st,nn,rn){return wo("split")},Mt.prototype.sparseToDense=function(st,nn,rn,on){return wo("sparseToDense")},Mt.prototype.diag=function(st){return wo("diag")},Mt.prototype.fill=function(st,nn,rn){return wo("fill")},Mt.prototype.onesLike=function(st){return wo("onesLike")},Mt.prototype.zerosLike=function(st){return wo("zerosLike")},Mt.prototype.linspace=function(st,nn,rn){return wo("linspace")},Mt.prototype.dispose=function(){return wo("dispose")},Mt}();function wo(Mt){throw new Error("'"+Mt+"' not yet implemented or not found in the registry. Did you forget to import the kernel?")}function Co(Mt,st){for(var nn=Mt.length,rn=[],on=0;on<nn;on++){var an=nn-1-on,sn=Mt[an]||1;(st[st.length-1-on]||1)>1&&sn===1&&rn.unshift(an)}return rn}function Eo(Mt,st){for(var nn=[],rn=0;rn<st.length;rn++){var on=Mt[Mt.length-rn-1],an=st.length-rn-1,sn=st[an];(on==null||on===1&&sn>1)&&nn.unshift(an)}return nn}function Ro(Mt,st){for(var nn=[],rn=Math.max(Mt.length,st.length),on=0;on<rn;on++){var an=Mt[Mt.length-on-1];an==null&&(an=1);var sn=st[st.length-on-1];if(sn==null&&(sn=1),an===1)nn.unshift(sn);else if(sn===1)nn.unshift(an);else{if(an!==sn)throw Error("Operands could not be broadcast together with shapes "+Mt+" and "+st+".");nn.unshift(an)}}return nn}function Io(Mt,st,nn,rn,on,an,sn){sn===void 0&&(sn="channelsLast");var un,Xr=To(st),to=Xr[0],uo=Xr[1];if(sn==="channelsLast")un=[to,uo,Mt[3],Mt[3]];else{if(sn!=="channelsFirst")throw new Error("Unknown dataFormat "+sn);un=[to,uo,Mt[1],Mt[1]]}return So(Mt,un,nn,rn,on,an,!1,sn)}function ko(Mt,st,nn,rn,on,an,sn){sn===void 0&&(sn="NDHWC");var un,Xr,to=No(st),uo=to[0],hn=to[1],fn=to[2];if(sn==="NDHWC")Xr="channelsLast",un=[uo,hn,fn,Mt[4],Mt[4]];else{if(sn!=="NCDHW")throw new Error("Unknown dataFormat "+sn);Xr="channelsFirst",un=[uo,hn,fn,Mt[1],Mt[1]]}return Ao(Mt,un,nn,rn,on,!1,Xr,an)}function So(Mt,st,nn,rn,on,an,sn,un){sn===void 0&&(sn=!1),un===void 0&&(un="channelsLast");var Xr=[-1,-1,-1,-1],to=Xr[0],uo=Xr[1],hn=Xr[2],fn=Xr[3];if(un==="channelsLast")to=Mt[0],uo=Mt[1],hn=Mt[2],fn=Mt[3];else{if(un!=="channelsFirst")throw new Error("Unknown dataFormat "+un);to=Mt[0],fn=Mt[1],uo=Mt[2],hn=Mt[3]}var co,lo=st[0],fo=st[1],ho=st[3],mo=To(nn),Uo=mo[0],_d=mo[1],tp=To(rn),ep=tp[0],np=tp[1],rp=Fo(lo,ep),ip=Fo(fo,np),op=function(lp,dp,cp,fp,gp,mp,xp,_p){var Sp,Cp,jp;if(typeof lp=="number"){Sp={top:lp,bottom:lp,left:lp,right:lp,type:lp===0?"VALID":"NUMBER"};var Dp=function(Bp,Pp,Gp,Wp,Xp){Wp==null&&(Wp=Do(Bp,Pp,Gp));var Qp=Bp[0],om=Bp[1],ym=_o((Qp-Pp+2*Wp)/Gp+1,Xp);C(A(ym),function(){return"The output # of rows ("+ym+") must be an integer. Change the stride and/or zero pad parameters"});var mm=_o((om-Pp+2*Wp)/Gp+1,Xp);return C(A(mm),function(){return"The output # of columns ("+mm+") must be an integer. Change the stride and/or zero pad parameters"}),[ym,mm]}([dp,cp],mp,fp,lp,_p);Cp=Dp[0],jp=Dp[1]}else if(lp==="same"){Cp=Math.ceil(dp/fp),jp=Math.ceil(cp/gp);var Vp=Math.max(0,(Cp-1)*fp+mp-dp),Up=Math.max(0,(jp-1)*gp+xp-cp),Kp=Math.floor(Vp/2),Mp=Vp-Kp,zp=Math.floor(Up/2);Sp={top:Kp,bottom:Mp,left:zp,right:Up-zp,type:"SAME"}}else{if(lp!=="valid")throw Error("Unknown padding parameter: "+lp);Sp={top:0,bottom:0,left:0,right:0,type:"VALID"},Cp=Math.ceil((dp-mp+1)/fp),jp=Math.ceil((cp-xp+1)/gp)}return{padInfo:Sp,outHeight:Cp,outWidth:jp}}(on,uo,hn,Uo,_d,rp,ip,an),ap=op.padInfo,sp=op.outHeight,up=op.outWidth,pp=sn?ho*fn:ho;return un==="channelsFirst"?co=[to,pp,sp,up]:un==="channelsLast"&&(co=[to,sp,up,pp]),{batchSize:to,dataFormat:un,inHeight:uo,inWidth:hn,inChannels:fn,outHeight:sp,outWidth:up,outChannels:pp,padInfo:ap,strideHeight:Uo,strideWidth:_d,filterHeight:lo,filterWidth:fo,effectiveFilterHeight:rp,effectiveFilterWidth:ip,dilationHeight:ep,dilationWidth:np,inShape:Mt,outShape:co,filterShape:st}}function Ao(Mt,st,nn,rn,on,an,sn,un){an===void 0&&(an=!1),sn===void 0&&(sn="channelsLast");var Xr=[-1,-1,-1,-1,-1],to=Xr[0],uo=Xr[1],hn=Xr[2],fn=Xr[3],co=Xr[4];if(sn==="channelsLast")to=Mt[0],uo=Mt[1],hn=Mt[2],fn=Mt[3],co=Mt[4];else{if(sn!=="channelsFirst")throw new Error("Unknown dataFormat "+sn);to=Mt[0],co=Mt[1],uo=Mt[2],hn=Mt[3],fn=Mt[4]}var lo,fo=st[0],ho=st[1],mo=st[2],Uo=st[4],_d=No(nn),tp=_d[0],ep=_d[1],np=_d[2],rp=No(rn),ip=rp[0],op=rp[1],ap=rp[2],sp=Fo(fo,ip),up=Fo(ho,op),pp=Fo(mo,ap),lp=function(xp,_p,Sp,Cp,jp,Dp,Vp,Up,Kp,Mp,zp){var Bp,Pp,Gp,Wp;if(typeof xp=="number"){Bp={top:xp,bottom:xp,left:xp,right:xp,front:xp,back:xp,type:xp===0?"VALID":"NUMBER"};var Xp=function(Pm,tm,Xm,jm,Im,Lm){Im==null&&(Im=Do(Pm,tm,jm));var ey=Pm[0],ty=Pm[1],Cm=Pm[2],Wm=_o((ey-tm+2*Im)/jm+1,Lm);C(A(Wm),function(){return"The output # of depths ("+Wm+") must be an integer. Change the stride and/or zero pad parameters"});var em=_o((ty-tm+2*Im)/jm+1,Lm);C(A(em),function(){return"The output # of rows ("+em+") must be an integer. Change the stride and/or zero pad parameters"});var Bm=_o((Cm-tm+2*Im)/jm+1,Lm);return C(A(Bm),function(){return"The output # of columns ("+Bm+") must be an integer. Change the stride and/or zero pad parameters"}),[Wm,em,Bm,Xm]}([_p,Sp,Cp,1],Up,1,jp,xp,zp);Pp=Xp[0],Gp=Xp[1],Wp=Xp[2]}else if(xp==="same"){Pp=Math.ceil(_p/jp),Gp=Math.ceil(Sp/Dp),Wp=Math.ceil(Cp/Vp);var Qp=(Pp-1)*jp+Up-_p,om=(Gp-1)*Dp+Kp-Sp,ym=(Wp-1)*Vp+Mp-Cp,mm=Math.floor(Qp/2),Sm=Qp-mm,xm=Math.floor(om/2),am=om-xm,wm=Math.floor(ym/2);Bp={top:xm,bottom:am,left:wm,right:ym-wm,front:mm,back:Sm,type:"SAME"}}else{if(xp!=="valid")throw Error("Unknown padding parameter: "+xp);Bp={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},Pp=Math.ceil((_p-Up+1)/jp),Gp=Math.ceil((Sp-Kp+1)/Dp),Wp=Math.ceil((Cp-Mp+1)/Vp)}return{padInfo:Bp,outDepth:Pp,outHeight:Gp,outWidth:Wp}}(on,uo,hn,fn,tp,ep,np,sp,up,pp,un),dp=lp.padInfo,cp=lp.outDepth,fp=lp.outHeight,gp=lp.outWidth,mp=an?Uo*co:Uo;return sn==="channelsFirst"?lo=[to,mp,cp,fp,gp]:sn==="channelsLast"&&(lo=[to,cp,fp,gp,mp]),{batchSize:to,dataFormat:sn,inDepth:uo,inHeight:hn,inWidth:fn,inChannels:co,outDepth:cp,outHeight:fp,outWidth:gp,outChannels:mp,padInfo:dp,strideDepth:tp,strideHeight:ep,strideWidth:np,filterDepth:fo,filterHeight:ho,filterWidth:mo,effectiveFilterDepth:sp,effectiveFilterHeight:up,effectiveFilterWidth:pp,dilationDepth:ip,dilationHeight:op,dilationWidth:ap,inShape:Mt,outShape:lo,filterShape:st}}function Do(Mt,st,nn,rn){rn===void 0&&(rn=1);var on=Fo(st,rn);return Math.floor((Mt[0]*(nn-1)-nn+on)/2)}function To(Mt){return typeof Mt=="number"?[Mt,Mt,Mt]:Mt.length===2?[Mt[0],Mt[1],1]:Mt}function No(Mt){return typeof Mt=="number"?[Mt,Mt,Mt]:Mt}function Fo(Mt,st){return st<=1?Mt:Mt+(Mt-1)*(st-1)}function _o(Mt,st){if(!st)return Mt;switch(st){case"round":return Math.round(Mt);case"ceil":return Math.ceil(Mt);case"floor":return Math.floor(Mt);default:throw new Error("Unknown roundingMode "+st)}}function Oo(Mt){var st=To(Mt),nn=st[0],rn=st[1],on=st[2];return nn===1&&rn===1&&on===1}function Mo(Mt,st){return Oo(Mt)||Oo(st)}function Bo(Mt){if(Mt==="NHWC")return"channelsLast";if(Mt==="NCHW")return"channelsFirst";throw new Error("Unknown dataFormat "+Mt)}function Po(Mt,st,nn){if(st==="complex64"){if(Mt.dtype==="complex64")return Mt.clone();var rn=Gn(Mt.shape),on=Mt.toFloat(),an=nn.complex(on,rn);return rn.dispose(),on.dispose(),an}if(!U(Mt.dtype,st))return Lt.makeTensorFromDataId(Mt.dataId,Mt.shape,st);if(Mt.dtype==="complex64"){var sn=nn.real(Mt);return an=sn.cast(st),sn.dispose(),an}if(st==="int32")return nn.int(Mt);if(st==="bool"){var un=On(0,Mt.dtype);return an=nn.notEqual(Mt,un),un.dispose(),an}throw new Error("Error in Cast: failed to cast "+Mt.dtype+" to "+st)}function Lo(Mt,st){return Lt.makeTensorFromDataId(Mt.dataId,st,Mt.dtype)}function Wo(Mt,st,nn){var rn=(st-Mt)/(nn-1),on=tt(nn,"float32");on[0]=Mt;for(var an=1;an<on.length;an++)on[an]=on[an-1]+rn;return Mn(on,"float32")}function Vo(Mt,st){if(Mt.length!==st.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:"+Mt.length+", imag: "+st.length+".");for(var nn=new Float32Array(2*Mt.length),rn=0;rn<nn.length;rn+=2)nn[rn]=Mt[rn/2],nn[rn+1]=st[rn/2];return nn}function zo(Mt,st){return{real:Mt[2*st],imag:Mt[2*st+1]}}function Go(Mt,st,nn,rn){Mt[2*rn]=st,Mt[2*rn+1]=nn}function Ho(Mt,st,nn){var rn=(nn?2:-2)*Math.PI*(Mt/st);return{real:Math.cos(rn),imag:Math.sin(rn)}}function qo(Mt,st,nn){var rn=function(an,sn,un){return function(Xr,to,uo){for(var hn=0,fn=Xr.length,co=0,lo=!1;hn<fn;){var fo=uo(to,Xr[co=hn+(fn-hn>>>1)]);fo>0?hn=co+1:(fn=co,lo=!fo)}return lo?hn:-hn-1}(an,sn,un||Ko)}(Mt,st,nn),on=rn<0?-(rn+1):rn;Mt.splice(on,0,st)}function Ko(Mt,st){return Mt>st?1:Mt<st?-1:0}function jo(Mt,st,nn,rn,on){return Yo(Mt,st,nn,rn,on,0).selectedIndices}function Xo(Mt,st,nn,rn,on,an){var sn=Yo(Mt,st,nn,rn,on,an);return sn.numValidOutputs.dispose(),{selectedIndices:sn.selectedIndices,selectedScores:sn.selectedScores}}function Yo(Mt,st,nn,rn,on,an,sn,un){un===void 0&&(un=!1);for(var Xr=Array.from(st).map(function(tp,ep){return{score:tp,boxIndex:ep,suppressBeginIndex:0}}).filter(function(tp){return tp.score>on}).sort(Jo),to=an>0?-.5/an:0,uo=[],hn=[];uo.length<nn&&Xr.length>0;){var fn=Xr.pop(),co=fn.score,lo=fn.boxIndex,fo=fn.suppressBeginIndex;if(co<on)break;for(var ho=!1,mo=uo.length-1;mo>=fo;--mo){var Uo=$o(Mt,lo,uo[mo]);if(Uo>=rn){ho=!0;break}if(fn.score=fn.score*Qo(rn,to,Uo),fn.score<=on)break}fn.suppressBeginIndex=uo.length,ho||(fn.score===co?(uo.push(lo),hn.push(fn.score)):fn.score>on&&qo(Xr,fn,Jo))}var _d=uo.length;return un&&(uo.fill(0,_d),hn.fill(0,_d)),{selectedIndices:Mn(uo,"int32"),selectedScores:Mn(hn,"float32"),numValidOutputs:On(_d,"int32")}}function $o(Mt,st,nn){var rn=Mt.subarray(4*st,4*st+4),on=Mt.subarray(4*nn,4*nn+4),an=Math.min(rn[0],rn[2]),sn=Math.min(rn[1],rn[3]),un=Math.max(rn[0],rn[2]),Xr=Math.max(rn[1],rn[3]),to=Math.min(on[0],on[2]),uo=Math.min(on[1],on[3]),hn=Math.max(on[0],on[2]),fn=Math.max(on[1],on[3]),co=(un-an)*(Xr-sn),lo=(hn-to)*(fn-uo);if(co<=0||lo<=0)return 0;var fo=Math.max(an,to),ho=Math.max(sn,uo),mo=Math.min(un,hn),Uo=Math.min(Xr,fn),_d=Math.max(mo-fo,0)*Math.max(Uo-ho,0);return _d/(co+lo-_d)}function Qo(Mt,st,nn){var rn=Math.exp(st*nn*nn);return nn<=Mt?rn:0}function Jo(Mt,st){return Mt.score-st.score||Mt.score===st.score&&st.boxIndex-Mt.boxIndex}function Zo(Mt,st,nn){var rn=new Array(Mt.rank).fill(0),on=Mt.shape.slice();return st.map(function(an){on[nn]=an;var sn=Mt.slice(rn,on);return rn[nn]+=an,sn})}function ta(Mt,st){for(var nn=new Array(Mt.rank),rn=0;rn<nn.length;rn++)nn[rn]=Mt.shape[rn]*st[rn];var on=dr(nn,Mt.dtype);for(rn=0;rn<on.values.length;++rn){for(var an=on.indexToLoc(rn),sn=new Array(Mt.rank),un=0;un<sn.length;un++)sn[un]=an[un]%Mt.shape[un];var Xr=Mt.locToIndex(sn);on.values[rn]=Mt.values[Xr]}return on.toTensor()}function ea(Mt,st,nn,rn,on){for(var an=st[st.length-1],sn=[Mt.length/an,an],un=sn[0],Xr=sn[1],to=B(nn,un*rn),uo=B("int32",un*rn),hn=0;hn<un;hn++){for(var fn=hn*Xr,co=Mt.subarray(fn,fn+Xr),lo=[],fo=0;fo<co.length;fo++)lo.push({value:co[fo],index:fo});lo.sort(function(tp,ep){return ep.value-tp.value});var ho=hn*rn,mo=to.subarray(ho,ho+rn),Uo=uo.subarray(ho,ho+rn);for(fo=0;fo<rn;fo++)mo[fo]=lo[fo].value,Uo[fo]=lo[fo].index}var _d=st.slice();return _d[_d.length-1]=rn,[Fn(to,_d,nn),Fn(uo,_d,"int32")]}function na(Mt,st){for(var nn=[],rn=0;rn<st.length;rn++)st[rn]&&nn.push(rn);var on=dr(Mt,"int32"),an=dr([nn.length,Mt.length],"int32");for(rn=0;rn<nn.length;rn++){var sn=on.indexToLoc(nn[rn]),un=rn*Mt.length;an.values.set(sn,un)}return an.toTensor()}var ra=function(Mt,st){this.outputShape=[],this.outputShape=Mt,this.variableNames=st.map(function(on,an){return"T"+an});var nn=[];this.variableNames.forEach(function(on){nn.push("float v"+on+" = get"+on+"AtOutCoords();")});var rn=this.variableNames.map(function(on){return"v"+on}).join(" + ");this.userCode=`
      void main() {
        `+nn.join(`
        `)+`

        float result = `+rn+`;
        setOutput(result);
      }
    `},oa=function(Mt,st){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=Mt,this.variableNames=st.map(function(on,an){return"T"+an});var nn=[];this.variableNames.forEach(function(on){nn.push("vec4 v"+on+" = get"+on+"AtOutCoords();")});var rn=this.variableNames.map(function(on){return"v"+on}).join(" + ");this.userCode=`
      void main() {
        `+nn.join(`
        `)+`

        vec4 result = `+rn+`;
        setOutput(result);
      }
    `},aa=function(Mt,st,nn){this.variableNames=["A"];var rn=Mt.windowSize,on=Mt.batchSize,an=Mt.inSize,sn=Math.ceil(an/rn);nn||this.variableNames.push("bestIndicesA"),this.outputShape=[on,sn];var un=st==="max"?">":"<",Xr=nn?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * `+rn+`;

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < `+rn+`; i++) {
          int inIdx = `+Xr+`;
          float candidate = getA(batch, inIdx);
          if (candidate `+un+` bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `};function ia(Mt,st){return["x","y","z","w","u","v"].slice(0,st).map(function(nn){return Mt+"."+nn})}function sa(Mt,st){return st===1?[Mt]:ia(Mt,st)}function ua(){var Mt,st,nn,rn,on,an,sn,un,Xr,to;return i().getNumber("WEBGL_VERSION")===2?(Mt="#version 300 es",st="in",nn="out",rn="in",on="texture",an="outputColor",sn="out vec4 outputColor;",un=`
      bool isnan_custom(float val) {
        return (val > 0.0 || val < 0.0) ? false : val != 0.0;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `,Xr="",to=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(Mt="",st="attribute",nn="varying",rn="varying",on="texture2D",an="gl_FragColor",sn="",un=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,Xr=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,to=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:Mt,attribute:st,varyingVs:nn,varyingFs:rn,texture2D:on,output:an,defineOutput:sn,defineSpecialNaN:un,defineSpecialInf:Xr,defineRound:to}}function ca(Mt,st,nn){nn===void 0&&(nn="index");var rn=$(st);return rn.map(function(on,an){return"int "+Mt[an]+" = "+nn+" / "+on+"; "+(an===rn.length-1?"int "+Mt[an+1]+" = "+nn+" - "+Mt[an]+" * "+on:"index -= "+Mt[an]+" * "+on)+";"}).join("")}function la(Mt){var st=$(Mt).map(function(nn){return nn.toString()});return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * `+st[0]+" + coords.y * "+st[1]+` + coords.z;
  }
`}var ha=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;function fa(Mt,st,nn,rn){var on=[];Mt.forEach(function(co){var lo=k$2(co.shapeInfo.logicalShape);co.shapeInfo.isUniform?on.push("uniform float "+co.name+(lo>1?"["+lo+"]":"")+";"):(on.push("uniform sampler2D "+co.name+";"),on.push("uniform int offset"+co.name+";"))});var an,sn,un=on.join(`
`),Xr=Mt.map(function(co){return function(lo,fo,ho){ho===void 0&&(ho=!1);var mo="";mo+=ho?pa(lo):da(lo);var Uo=lo.shapeInfo.logicalShape,_d=fo.logicalShape;return Uo.length<=_d.length&&(mo+=ho?function(tp,ep){var np,rp=tp.name,ip=rp.charAt(0).toUpperCase()+rp.slice(1),op="get"+ip+"AtOutCoords",ap=tp.shapeInfo.logicalShape.length,sp=ep.logicalShape.length,up=Co(tp.shapeInfo.logicalShape,ep.logicalShape),pp=wa(sp),lp=sp-ap,dp=["x","y","z","w","u","v"];np=ap===0?"":sp<2&&up.length>=1?"coords = 0;":up.map(function(Sp){return"coords."+dp[Sp+lp]+" = 0;"}).join(`
`);var cp="";cp=sp<2&&ap>0?"coords":tp.shapeInfo.logicalShape.map(function(Sp,Cp){return"coords."+dp[Cp+lp]}).join(", ");var fp="return outputValue;",gp=k$2(tp.shapeInfo.logicalShape)===1,mp=k$2(ep.logicalShape)===1;if(ap!==1||gp||mp){if(gp&&!mp)fp=sp===1?`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:`
        return vec4(outputValue.x);
      `;else if(up.length){var xp=ap-2,_p=ap-1;up.indexOf(xp)>-1&&up.indexOf(_p)>-1?fp="return vec4(outputValue.x);":up.indexOf(xp)>-1?fp="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":up.indexOf(_p)>-1&&(fp="return vec4(outputValue.xx, outputValue.zz);")}}else fp=`
      return vec4(outputValue.xy, outputValue.xy);
    `;return`
    vec4 `+op+`() {
      `+pp+` coords = getOutputCoords();
      `+np+`
      vec4 outputValue = get`+ip+"("+cp+`);
      `+fp+`
    }
  `}(lo,fo):function(tp,ep){var np=tp.name,rp=np.charAt(0).toUpperCase()+np.slice(1),ip="get"+rp+"AtOutCoords",op=ep.texShape,ap=tp.shapeInfo.texShape,sp=tp.shapeInfo.logicalShape.length,up=ep.logicalShape.length;if(!tp.shapeInfo.isUniform&&sp===up&&tp.shapeInfo.flatOffset==null&&S(ap,op))return`
      float `+ip+`() {
        return sampleTexture(`+np+`, resultUV);
      }
    `;var pp,lp=wa(up),dp=Co(tp.shapeInfo.logicalShape,ep.logicalShape),cp=up-sp,fp=["x","y","z","w","u","v"];pp=sp===0?"":up<2&&dp.length>=1?"coords = 0;":dp.map(function(mp){return"coords."+fp[mp+cp]+" = 0;"}).join(`
`);var gp="";return gp=up<2&&sp>0?"coords":tp.shapeInfo.logicalShape.map(function(mp,xp){return"coords."+fp[xp+cp]}).join(", "),`
    float `+ip+`() {
      `+lp+` coords = getOutputCoords();
      `+pp+`
      return get`+rp+"("+gp+`);
    }
  `}(lo,fo)),mo}(co,st,rn)}).join(`
`),to=st.texShape,uo=ua(),hn=function(co){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return `+co.texture2D+`(textureSampler, uv).r;
    }
  `}(uo),fn=function(co){return co.version+`
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    `+co.varyingFs+` vec2 resultUV;
    `+co.defineOutput+`
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    `+co.defineSpecialNaN+`
    `+co.defineSpecialInf+`
    `+co.defineRound+`

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    `+va+`
    `+ma+`
    `+ga+`
  `}(uo);return st.isPacked?(an=function(co,lo){switch(co.length){case 0:return`
    int getOutputCoords() {
      return 0;
    }
  `;case 1:return function(tp,ep){var np=[Math.ceil(ep[0]/2),Math.ceil(ep[1]/2)];return np[0]===1?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * `+np[1]+`.0);
      }
    `:np[1]===1?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * `+np[0]+`.0);
      }
    `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+np[0]+", "+np[1]+`));
      return 2 * (resTexRC.x * `+np[1]+` + resTexRC.y);
    }
  `}(0,lo);case 2:return function(tp,ep){var np=[Math.ceil(ep[0]/2),Math.ceil(ep[1]/2)];if(S(tp,ep))return`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(`+np[0]+", "+np[1]+`));
      }
    `;var rp=Math.ceil(tp[1]/2);return`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+np[0]+", "+np[1]+`));

      int index = resTexRC.x * `+np[1]+` + resTexRC.y;
      int r = 2 * (index / `+rp+`);
      int c = imod(index, `+rp+`) * 2;

      return ivec2(r, c);
    }
  `}(co,lo);case 3:return fo=co,ho=lo,mo=[Math.ceil(ho[0]/2),Math.ceil(ho[1]/2)],Uo=Math.ceil(fo[2]/2),_d=Uo*Math.ceil(fo[1]/2),`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+mo[0]+", "+mo[1]+`));
      int index = resTexRC.x * `+mo[1]+` + resTexRC.y;

      int b = index / `+_d+`;
      index -= b * `+_d+`;

      int r = 2 * (index / `+Uo+`);
      int c = imod(index, `+Uo+`) * 2;

      return ivec3(b, r, c);
    }
  `;default:return function(tp,ep){for(var np=[Math.ceil(ep[0]/2),Math.ceil(ep[1]/2)],rp=Math.ceil(tp[tp.length-1]/2),ip=rp*Math.ceil(tp[tp.length-2]/2),op=ip,ap="",sp="b, r, c",up=2;up<tp.length-1;up++)op*=tp[tp.length-up-1],ap=`
      int b`+up+" = index / "+op+`;
      index -= b`+up+" * "+op+`;
    `+ap,sp="b"+up+", "+sp;return`
    ivec`+tp.length+` getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+np[0]+", "+np[1]+`));
      int index = resTexRC.x * `+np[1]+` + resTexRC.y;

      `+ap+`

      int b = index / `+ip+`;
      index -= b * `+ip+`;

      int r = 2 * (index / `+rp+`);
      int c = imod(index, `+rp+`) * 2;

      return ivec`+tp.length+"("+sp+`);
    }
  `}(co,lo)}var fo,ho,mo,Uo,_d}(st.logicalShape,to),sn=function(co){return`
    void setOutput(vec4 val) {
      `+co.output+` = val;
    }
  `}(uo)):(an=function(co,lo){switch(co.length){case 0:return`
    int getOutputCoords() {
      return 0;
    }
  `;case 1:return function(mo,Uo){return Uo[0]===1?`
      int getOutputCoords() {
        return int(resultUV.x * `+Uo[1]+`.0);
      }
    `:Uo[1]===1?`
      int getOutputCoords() {
        return int(resultUV.y * `+Uo[0]+`.0);
      }
    `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+Uo[0]+", "+Uo[1]+`));
      return resTexRC.x * `+Uo[1]+` + resTexRC.y;
    }
  `}(0,lo);case 2:return function(mo,Uo){return S(mo,Uo)?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(`+Uo[0]+", "+Uo[1]+`));
      }
    `:mo[1]===1?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(`+Uo[0]+", "+Uo[1]+`));
        int index = resTexRC.x * `+Uo[1]+` + resTexRC.y;
        return ivec2(index, 0);
      }
    `:mo[0]===1?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(`+Uo[0]+", "+Uo[1]+`));
        int index = resTexRC.x * `+Uo[1]+` + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+Uo[0]+", "+Uo[1]+`));
      int index = resTexRC.x * `+Uo[1]+` + resTexRC.y;
      int r = index / `+mo[1]+`;
      int c = index - r * `+mo[1]+`;
      return ivec2(r, c);
    }
  `}(co,lo);case 3:return fo=lo,ho=ca(["r","c","d"],co),`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+fo[0]+", "+fo[1]+`));
      int index = resTexRC.x * `+fo[1]+` + resTexRC.y;
      `+ho+`
      return ivec3(r, c, d);
    }
  `;case 4:return function(mo,Uo){var _d=ca(["r","c","d","d2"],mo);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(`+Uo[0]+", "+Uo[1]+`));
      int index = resTexRC.x * `+Uo[1]+` + resTexRC.y;
      `+_d+`
      return ivec4(r, c, d, d2);
    }
  `}(co,lo);case 5:return function(mo,Uo){var _d=ca(["r","c","d","d2","d3"],mo);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(`+Uo[0]+`,
                             `+Uo[1]+`));

      int index = resTexRC.x * `+Uo[1]+` + resTexRC.y;

      `+_d+`

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}(co,lo);case 6:return function(mo,Uo){var _d=ca(["r","c","d","d2","d3","d4"],mo);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(`+Uo[0]+", "+Uo[1]+`));
      int index = resTexRC.x * `+Uo[1]+` + resTexRC.y;

      `+_d+`

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}(co,lo);default:throw new Error(co.length+"-D output sampling is not yet supported")}var fo,ho}(st.logicalShape,to),sn=function(co){return`
    void setOutput(float val) {
      `+co.output+` = vec4(val, 0, 0, 0);
    }
  `}(uo)),rn&&(fn+=ya),[fn,hn,sn,un,an,Xr,nn].join(`
`)}function da(Mt){var st=Mt.shapeInfo.logicalShape;switch(st.length){case 0:return function(nn){var rn=nn.name,on="get"+rn.charAt(0).toUpperCase()+rn.slice(1);if(nn.shapeInfo.isUniform)return"float "+on+"() {return "+rn+";}";var an=nn.shapeInfo.texShape,sn=an[0],un=an[1];if(sn===1&&un===1)return`
      float `+on+`() {
        return sampleTexture(`+rn+`, halfCR);
      }
    `;var Xr=nn.shapeInfo.texShape,to=Xr[0],uo=Xr[1],hn=xa(rn);return`
    float `+on+`() {
      vec2 uv = uvFromFlat(`+to+", "+uo+", "+hn+`);
      return sampleTexture(`+rn+`, uv);
    }
  `}(Mt);case 1:return function(nn){var rn=nn.name,on="get"+rn.charAt(0).toUpperCase()+rn.slice(1);if(nn.shapeInfo.isUniform)return`
      float `+on+`(int index) {
        `+ba(nn)+`
      }
    `;var an=nn.shapeInfo.texShape,sn=an[0],un=an[1];if(un===1&&sn===1)return`
      float `+on+`(int index) {
        return sampleTexture(`+rn+`, halfCR);
      }
    `;var Xr=xa(rn);return un===1?`
      float `+on+`(int index) {
        vec2 uv = vec2(0.5, (float(index + `+Xr+") + 0.5) / "+sn+`.0);
        return sampleTexture(`+rn+`, uv);
      }
    `:sn===1?`
      float `+on+`(int index) {
        vec2 uv = vec2((float(index + `+Xr+") + 0.5) / "+un+`.0, 0.5);
        return sampleTexture(`+rn+`, uv);
      }
    `:`
    float `+on+`(int index) {
      vec2 uv = uvFromFlat(`+sn+", "+un+", index + "+Xr+`);
      return sampleTexture(`+rn+`, uv);
    }
  `}(Mt);case 2:return function(nn){var rn=nn.shapeInfo.logicalShape,on=nn.name,an="get"+on.charAt(0).toUpperCase()+on.slice(1),sn=nn.shapeInfo.texShape;if(sn!=null&&S(rn,sn)){var un=sn[0],Xr=sn[1];return`
    float `+an+`(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(`+Xr+".0, "+un+`.0);
      return sampleTexture(`+on+`, uv);
    }
  `}var to=M(rn),uo=to.newShape,hn=to.keptDims,fn=uo;if(fn.length<rn.length){var co=Ca(nn,fn);return`
      `+da(co)+`
      float `+an+`(int row, int col) {
        return `+an+"("+Ea(["row","col"],hn)+`);
      }
    `}if(nn.shapeInfo.isUniform)return`
      float `+an+`(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(`+rn[1]+`, 1)));
        `+ba(nn)+`
      }
    `;var lo=sn[0],fo=sn[1],ho=xa(on);return fo===1?`
    float `+an+`(int row, int col) {
      float index = dot(vec3(row, col, `+ho+"), vec3("+rn[1]+`, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / `+lo+`.0);
      return sampleTexture(`+on+`, uv);
    }
  `:lo===1?`
    float `+an+`(int row, int col) {
      float index = dot(vec3(row, col, `+ho+"), vec3("+rn[1]+`, 1, 1));
      vec2 uv = vec2((index + 0.5) / `+fo+`.0, 0.5);
      return sampleTexture(`+on+`, uv);
    }
  `:`
  float `+an+`(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * `+rn[1]+" + col + "+ho+`;
    vec2 uv = uvFromFlat(`+lo+", "+fo+`, index);
    return sampleTexture(`+on+`, uv);
  }
`}(Mt);case 3:return function(nn){var rn=nn.shapeInfo.logicalShape,on=nn.name,an="get"+on.charAt(0).toUpperCase()+on.slice(1),sn=rn[1]*rn[2],un=rn[2],Xr=M(rn),to=Xr.newShape,uo=Xr.keptDims,hn=to;if(hn.length<rn.length){var fn=Ca(nn,hn);return`
        `+da(fn)+`
        float `+an+`(int row, int col, int depth) {
          return `+an+"("+Ea(["row","col","depth"],uo)+`);
        }
      `}if(nn.shapeInfo.isUniform)return`
      float `+an+`(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(`+sn+", "+un+`, 1)));
        `+ba(nn)+`
      }
    `;var co=nn.shapeInfo.texShape,lo=co[0],fo=co[1],ho=nn.shapeInfo.flatOffset;if(fo===sn&&ho==null)return`
        float `+an+`(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(`+un+`, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(`+fo+".0, "+lo+`.0);
          return sampleTexture(`+on+`, uv);
        }
      `;if(fo===un&&ho==null)return`
    float `+an+`(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(`+rn[1]+`, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+fo+".0, "+lo+`.0);
      return sampleTexture(`+on+`, uv);
    }
  `;var mo=xa(on);return`
      float `+an+`(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * `+sn+" + col * "+un+" + depth + "+mo+`;
        vec2 uv = uvFromFlat(`+lo+", "+fo+`, index);
        return sampleTexture(`+on+`, uv);
      }
  `}(Mt);case 4:return function(nn){var rn=nn.shapeInfo.logicalShape,on=nn.name,an="get"+on.charAt(0).toUpperCase()+on.slice(1),sn=rn[3],un=rn[2]*sn,Xr=rn[1]*un,to=M(rn),uo=to.newShape,hn=to.keptDims;if(uo.length<rn.length){var fn=Ca(nn,uo);return`
      `+da(fn)+`
      float `+an+`(int row, int col, int depth, int depth2) {
        return `+an+"("+Ea(["row","col","depth","depth2"],hn)+`);
      }
    `}if(nn.shapeInfo.isUniform)return`
      float `+an+`(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(`+Xr+", "+un+", "+sn+`, 1)));
        `+ba(nn)+`
      }
    `;var co=nn.shapeInfo.flatOffset,lo=nn.shapeInfo.texShape,fo=lo[0],ho=lo[1];if(ho===Xr&&co==null)return`
      float `+an+`(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(`+un+", "+sn+`, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+ho+".0, "+fo+`.0);
        return sampleTexture(`+on+`, uv);
      }
    `;if(ho===sn&&co==null)return`
      float `+an+`(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(`+rn[1]*rn[2]+", "+rn[2]+`, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+ho+".0, "+fo+`.0);
        return sampleTexture(`+on+`, uv);
      }
    `;var mo=xa(on);return`
    float `+an+`(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+Xr+" + col * "+un+` +
          depth * `+sn+` + depth2;
      vec2 uv = uvFromFlat(`+fo+", "+ho+", index + "+mo+`);
      return sampleTexture(`+on+`, uv);
    }
  `}(Mt);case 5:return function(nn){var rn=nn.shapeInfo.logicalShape,on=nn.name,an="get"+on.charAt(0).toUpperCase()+on.slice(1),sn=rn[4],un=rn[3]*sn,Xr=rn[2]*un,to=rn[1]*Xr,uo=M(rn),hn=uo.newShape,fn=uo.keptDims;if(hn.length<rn.length){var co=Ca(nn,hn);return`
      `+da(co)+`
      float `+an+`(int row, int col, int depth, int depth2, int depth3) {
        return `+an+"("+Ea(["row","col","depth","depth2","depth3"],fn)+`);
      }
    `}if(nn.shapeInfo.isUniform)return`
      float `+an+`(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(`+to+", "+Xr+", "+un+", "+sn+`)) +
          depth3;
        `+ba(nn)+`
      }
    `;var lo=nn.shapeInfo.flatOffset,fo=nn.shapeInfo.texShape,ho=fo[0],mo=fo[1];if(mo===to&&lo==null)return`
      float `+an+`(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(`+Xr+", "+un+", "+sn+`, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+mo+".0, "+ho+`.0);
        return sampleTexture(`+on+`, uv);
      }
    `;if(mo===sn&&lo==null)return`
      float `+an+`(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(`+rn[1]*rn[2]*rn[3]+`,
               `+rn[2]*rn[3]+", "+rn[3]+`, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+mo+".0, "+ho+`.0);
        return sampleTexture(`+on+`, uv);
      }
    `;var Uo=xa(on);return`
    float `+an+`(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+to+" + col * "+Xr+" + depth * "+un+` +
          depth2 * `+sn+" + depth3 + "+Uo+`;
      vec2 uv = uvFromFlat(`+ho+", "+mo+`, index);
      return sampleTexture(`+on+`, uv);
    }
  `}(Mt);case 6:return function(nn){var rn=nn.shapeInfo.logicalShape,on=nn.name,an="get"+on.charAt(0).toUpperCase()+on.slice(1),sn=M(rn),un=sn.newShape,Xr=sn.keptDims;if(un.length<rn.length){var to=Ca(nn,un);return`
      `+da(to)+`
      float `+an+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return `+an+"("+Ea(["row","col","depth","depth2","depth3","depth4"],Xr)+`);
      }
    `}var uo=rn[5],hn=rn[4]*uo,fn=rn[3]*hn,co=rn[2]*fn,lo=rn[1]*co;if(nn.shapeInfo.isUniform)return`
      float `+an+`(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(`+lo+", "+co+", "+fn+", "+hn+`)) +
          dot(
            vec2(depth3, depth4),
            vec2(`+uo+`, 1)));
        `+ba(nn)+`
      }
    `;var fo=nn.shapeInfo.flatOffset,ho=nn.shapeInfo.texShape,mo=ho[0],Uo=ho[1];if(Uo===lo&&fo==null)return`
      float `+an+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(`+co+", "+fn+", "+hn+", "+uo+`)) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+Uo+".0, "+mo+`.0);
        return sampleTexture(`+on+`, uv);
      }
    `;if(Uo===uo&&fo==null)return`
      float `+an+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(`+rn[1]*rn[2]*rn[3]*rn[4]+`,
               `+rn[2]*rn[3]*rn[4]+`,
               `+rn[3]*rn[4]+`,
               `+rn[4]+`)) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+Uo+".0, "+mo+`.0);
        return sampleTexture(`+on+`, uv);
      }
    `;var _d=xa(on);return`
    float `+an+`(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+lo+" + col * "+co+" + depth * "+fn+` +
          depth2 * `+hn+" + depth3 * "+uo+" + depth4 + "+_d+`;
      vec2 uv = uvFromFlat(`+mo+", "+Uo+`, index);
      return sampleTexture(`+on+`, uv);
    }
  `}(Mt);default:throw new Error(st.length+"-D input sampling is not yet supported")}}function pa(Mt){var st,nn,rn;switch(Mt.shapeInfo.logicalShape.length){case 0:return st=Mt.name,nn="get"+st.charAt(0).toUpperCase()+st.slice(1),rn=ua(),`
    vec4 `+nn+`() {
      return `+rn.texture2D+"("+st+`, halfCR);
    }
  `;case 1:return function(on){var an=on.name,sn="get"+an.charAt(0).toUpperCase()+an.slice(1),un=on.shapeInfo.texShape,Xr=[Math.ceil(un[0]/2),Math.ceil(un[1]/2)],to=ua();return`
    vec4 `+sn+`(int index) {
      vec2 uv = packedUVfrom1D(
        `+Xr[0]+", "+Xr[1]+`, index);
      return `+to.texture2D+"("+an+`, uv);
    }
  `}(Mt);case 2:return function(on){var an=on.shapeInfo.logicalShape,sn=on.name,un="get"+sn.charAt(0).toUpperCase()+sn.slice(1),Xr=on.shapeInfo.texShape,to=Xr[0],uo=Xr[1],hn=ua();if(Xr!=null&&S(an,Xr))return`
      vec4 `+un+`(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(`+uo+".0, "+to+`.0);

        return `+hn.texture2D+"("+sn+`, uv);
      }
    `;var fn=[Math.ceil(Xr[0]/2),Math.ceil(Xr[1]/2)],co=Math.ceil(an[1]/2);return`
    vec4 `+un+`(int row, int col) {
      vec2 uv = packedUVfrom2D(`+co+", "+fn[0]+", "+fn[1]+`, row, col);
      return `+hn.texture2D+"("+sn+`, uv);
    }
  `}(Mt);case 3:return function(on){var an=on.shapeInfo.logicalShape,sn=on.name,un="get"+sn.charAt(0).toUpperCase()+sn.slice(1),Xr=on.shapeInfo.texShape,to=[Math.ceil(Xr[0]/2),Math.ceil(Xr[1]/2)];if(an[0]===1){var uo=an.slice(1),hn=Ca(on,uo);return`
        `+pa(hn)+`
        vec4 `+un+`(int b, int row, int col) {
          return `+un+"("+Ea(["b","row","col"],[1,2])+`);
        }
      `}var fn=to[0],co=to[1],lo=Math.ceil(an[2]/2),fo=lo*Math.ceil(an[1]/2),ho=ua();return`
    vec4 `+un+`(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        `+fn+", "+co+", "+fo+", "+lo+`, b, row, col);
      return `+ho.texture2D+"("+sn+`, uv);
    }
  `}(Mt);default:return function(on){for(var an=on.shapeInfo.logicalShape,sn=an.length,un=on.name,Xr="get"+un.charAt(0).toUpperCase()+un.slice(1),to=on.shapeInfo.texShape,uo=[Math.ceil(to[0]/2),Math.ceil(to[1]/2)],hn=uo[0],fn=uo[1],co=Math.ceil(an[sn-1]/2),lo=co*Math.ceil(an[sn-2]/2),fo="int b, int row, int col",ho="b * "+lo+" + (row / 2) * "+co+" + (col / 2)",mo=2;mo<sn-1;mo++)fo="int b"+mo+", "+fo,lo*=an[sn-mo-1],ho="b"+mo+" * "+lo+" + "+ho;var Uo=ua();return`
    vec4 `+Xr+"("+fo+`) {
      int index = `+ho+`;
      int texR = index / `+fn+`;
      int texC = index - texR * `+fn+`;
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+fn+", "+hn+`);
      return `+Uo.texture2D+"("+un+`, uv);
    }
  `}(Mt)}}var va=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,ma=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,ga=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,ya=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function xa(Mt){return"offset"+Mt}function ba(Mt){var st=Mt.name,nn=k$2(Mt.shapeInfo.logicalShape);return nn<2?"return "+st+";":`
    for (int i = 0; i < `+nn+`; i++) {
      if (i == index) {
        return `+st+`[i];
      }
    }
  `}function wa(Mt){if(Mt<=1)return"int";if(Mt===2)return"ivec2";if(Mt===3)return"ivec3";if(Mt===4)return"ivec4";if(Mt===5)return"ivec5";if(Mt===6)return"ivec6";throw Error("GPU for rank "+Mt+" is not yet supported")}function Ca(Mt,st){var nn=JSON.parse(JSON.stringify(Mt));return nn.shapeInfo.logicalShape=st,nn}function Ea(Mt,st){return st.map(function(nn){return Mt[nn]}).join(", ")}var Ra=function(Mt,st,nn,rn){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,C(Mt.length>2,function(){return"Packed arg"+(nn.charAt(0).toUpperCase()+nn.slice(1))+" supports only inputs with rank above 2."});var on=Mt[Mt.length-1],an=Math.ceil(on/st);this.outputShape=Mt.slice(0,-1),an>1&&this.outputShape.push(an),rn||this.variableNames.push("bestIndicesA");var sn,un,Xr=this.outputShape,to=Xr.length,uo=wa(to),hn=sa("coords",to);if(an===1){var fn=wa(un=to+1);sn=`
        `+fn+" sourceLocR = "+fn+"("+hn.join()+`, 0);
        ++`+hn[to-1]+`;
        `+fn+" sourceLocG = "+fn+"("+hn.join()+`, 0);
        ++`+hn[to-2]+`;
        `+fn+" sourceLocA = "+fn+"("+hn.join()+`, 0);
        --`+hn[to-1]+`;
        `+fn+" sourceLocB = "+fn+"("+hn.join()+`, 0);
        --`+hn[to-2]+";"}else un=to,sn=`
        `+uo+` sourceLocR = coords;
        ++`+hn[to-1]+`;
        `+uo+` sourceLocG = coords;
        ++`+hn[to-2]+`;
        `+uo+` sourceLocA = coords;
        --`+hn[to-1]+`;
        `+uo+` sourceLocB = coords;
        --`+hn[to-2]+";";var co=["x","y","z","w","u","v"].slice(0,un),lo="."+co[un-1],fo=co.map(function(ip){return"int "+ip}),ho=sa("sourceLocR",un-1).concat("inIdx.r"),mo=sa("sourceLocG",un-1).concat("inIdx.g"),Uo=sa("sourceLocB",un-1).concat("inIdx.b"),_d=sa("sourceLocA",un-1).concat("inIdx.a"),tp=nn==="max"?"greaterThan":"lessThan",ep=rn?"":`
          inIdx = round(vec4(getBestIndicesAChannel(`+ho.join()+`),
                             getBestIndicesAChannel(`+mo.join()+`),
                             getBestIndicesAChannel(`+Uo.join()+`),
                             getBestIndicesAChannel(`+_d.join()+")));",np=`vec4(
            getAChannel(`+ho.join()+`),
            hasNextCol ? getAChannel(`+mo.join()+`) : 0.,
            hasNextRow ? getAChannel(`+Uo.join()+`) : 0.,
            hasNextRow && hasNextCol ? getAChannel(`+_d.join()+") : 0.)",rp=rn?"":`
      float getBestIndicesAChannel(`+fo.join()+`) {
        return getChannel(getBestIndicesA(`+co.join()+`),
                                          vec2(`+co.slice(-2).join()+`));
      }`;this.userCode=`
      float getAChannel(`+fo.join()+`) {
        return getChannel(getA(`+co.join()+`),
                               vec2(`+co.slice(-2).join()+`));
      }
      `+rp+`
      void main() {
        `+uo+` coords = getOutputCoords();
        bool hasNextCol = `+hn[to-1]+" < "+(Xr[to-1]-1)+`;
        bool hasNextRow = `+hn[to-2]+" < "+(Xr[to-2]-1)+`;
        `+sn+`
        ivec4 srcIdx = ivec4(sourceLocR`+lo+", sourceLocG"+lo+`,
          sourceLocB`+lo+", sourceLocA"+lo+") * "+st+`;
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = `+np+`;

        for (int i = 0; i < `+st+`; i++) {
          inIdx = srcIdx;
          `+ep+`
          vec4 candidate = `+np+`;
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(`+tp+`(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `},Ia=function(Mt){this.variableNames=["dy"],this.outputShape=Mt.inShape;var st=Mt.filterHeight,nn=Mt.filterWidth,rn=Mt.strideHeight,on=Mt.strideWidth,an=Mt.dilationHeight,sn=Mt.dilationWidth,un=Mt.effectiveFilterHeight,Xr=Mt.effectiveFilterWidth,to=un-1-Mt.padInfo.top,uo=Xr-1-Mt.padInfo.left,hn=1/(st*nn);this.userCode=`
      const ivec2 pads = ivec2(`+to+", "+uo+`);
      const float avgMultiplier = float(`+hn+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+un+`;
            wR += `+an+`) {
          float dyR = float(dyRCorner + wR) / `+rn+`.0;

          if (dyR < 0.0 || dyR >= `+Mt.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < `+Xr+`;
            wC+= `+sn+`) {
            float dyC = float(dyCCorner + wC) / `+on+`.0;

            if (dyC < 0.0 || dyC >= `+Mt.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `},ka$1=function(Mt){this.variableNames=["dy"],this.outputShape=Mt.inShape;var st=Mt.filterDepth,nn=Mt.filterHeight,rn=Mt.filterWidth,on=Mt.strideDepth,an=Mt.strideHeight,sn=Mt.strideWidth,un=Mt.dilationDepth,Xr=Mt.dilationHeight,to=Mt.dilationWidth,uo=Mt.effectiveFilterDepth,hn=Mt.effectiveFilterHeight,fn=Mt.effectiveFilterWidth,co=uo-1-Mt.padInfo.front,lo=hn-1-Mt.padInfo.top,fo=fn-1-Mt.padInfo.left,ho=1/(st*nn*rn);this.userCode=`
      const ivec3 pads = ivec3(`+co+", "+lo+", "+fo+`);
      const float avgMultiplier = float(`+ho+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < `+uo+`;
            wD += `+un+`) {
          float dyD = float(dyDCorner + wD) / `+on+`.0;

          if (dyD < 0.0 || dyD >= `+Mt.outDepth+`.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < `+hn+`;
              wR += `+Xr+`) {
            float dyR = float(dyRCorner + wR) / `+an+`.0;

            if (dyR < 0.0 || dyR >= `+Mt.outHeight+`.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < `+fn+`;
                wC += `+to+`) {
              float dyC = float(dyCCorner + wC) / `+sn+`.0;

              if (dyC < 0.0 || dyC >= `+Mt.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `},Sa=function(Mt,st,nn,rn,on,an){this.outputShape=[],this.variableNames=["x","mean","variance"],Ro(Mt,st),Ro(Mt,nn);var sn="0.0";rn!=null&&(Ro(Mt,rn),this.variableNames.push("offset"),sn="getOffsetAtOutCoords()");var un="1.0";on!=null&&(Ro(Mt,on),this.variableNames.push("scale"),un="getScaleAtOutCoords()"),this.outputShape=Mt,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = `+sn+`;
        float scale = `+un+`;
        float inv = scale * inversesqrt(variance + float(`+an+`));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `},Aa=function(Mt,st,nn,rn,on,an){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],Ro(Mt,st),Ro(Mt,nn);var sn="vec4(0.0)";rn!=null&&(Ro(Mt,rn),this.variableNames.push("offset"),sn="getOffsetAtOutCoords()");var un="vec4(1.0)";on!=null&&(Ro(Mt,on),this.variableNames.push("scale"),un="getScaleAtOutCoords()"),this.outputShape=Mt,this.userCode=`
      void main() {
        vec4 offset = `+sn+`;
        vec4 scale = `+un+`;

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(`+an+`));

        setOutput((x - mean) * inv + offset);
      }
    `},Da="return areal * breal - aimag * bimag;",Ta="return areal * bimag + aimag * breal;",Na=function(Mt,st,nn){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=Ro(st,nn),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        `+Mt+`
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `},Fa="return a + b;",_a="return a - b;",Oa="return a * b;",Ma="return (a < 0.) ? b * a : a;",Ba=function(Mt,st,nn){this.variableNames=["A","B"],this.outputShape=Ro(st,nn),this.userCode=`
      float binaryOperation(float a, float b) {
        `+Mt+`
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `},Pa=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`,La=function(Mt,st,nn,rn){rn===void 0&&(rn=!1),this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=Ro(st,nn);var on=this.outputShape.length,an="";if(rn)if(on===0||k$2(this.outputShape)===1)an=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(an=`
          `+wa(on)+` coords = getOutputCoords();
        `,on===1)an+=`
            result.y = (coords + 1) >= `+this.outputShape[0]+` ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{var sn=sa("coords",on);an+=`
            bool nextRowOutOfBounds =
              (`+sn[on-2]+" + 1) >= "+this.outputShape[on-2]+`;
            bool nextColOutOfBounds =
              (`+sn[on-1]+" + 1) >= "+this.outputShape[on-1]+`;
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        `+Mt+`
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        `+an+`

        setOutput(result);
      }
    `},Wa=function(){function Mt(st){this.variableNames=["A"],this.outputShape=st,this.userCode=`
      uniform float minVal;
      uniform float maxVal;

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}return Mt.prototype.getCustomSetupFunc=function(st,nn){var rn=this;return function(on,an){rn.minLoc==null&&(rn.minLoc=on.getUniformLocationNoThrow(an,"minVal"),rn.maxLoc=on.getUniformLocationNoThrow(an,"maxVal")),on.gl.uniform1f(rn.minLoc,st),on.gl.uniform1f(rn.maxLoc,nn)}},Mt}(),Ua=function(){function Mt(st){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=st,this.userCode=`
      uniform float minVal;
      uniform float maxVal;

      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}return Mt.prototype.getCustomSetupFunc=function(st,nn){var rn=this;return function(on,an){rn.minLoc==null&&(rn.minLoc=on.getUniformLocationNoThrow(an,"minVal"),rn.maxLoc=on.getUniformLocationNoThrow(an,"maxVal")),on.gl.uniform1f(rn.minLoc,st),on.gl.uniform1f(rn.maxLoc,nn)}},Mt}(),Va=function(Mt){this.variableNames=["real","imag"],this.outputShape=Mt,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `},za=function(Mt){this.outputShape=[],this.outputShape=Sn(Mt,1),this.variableNames=Mt.map(function(un,Xr){return"T"+Xr});var st=new Array(Mt.length-1);st[0]=Mt[0][1];for(var nn=1;nn<st.length;nn++)st[nn]=st[nn-1]+Mt[nn][1];var rn=["if (yC < "+st[0]+") setOutput(getT0(yR, yC));"];for(nn=1;nn<st.length;nn++){var on=st[nn-1];rn.push("else if (yC < "+st[nn]+") setOutput(getT"+nn+"(yR, yC-"+on+"));")}var an=st.length,sn=st[st.length-1];rn.push("else setOutput(getT"+an+"(yR, yC-"+sn+"));"),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        `+rn.join(`
        `)+`
      }
    `},Ga=function(Mt,st){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=Sn(Mt,st);var nn=this.outputShape,rn=nn.length,on=wa(rn),an=sa("coords",rn),sn=["x","y","z","w","u","v"].slice(0,rn);this.variableNames=Mt.map(function(ho,mo){return"T"+mo});var un=new Array(Mt.length-1);un[0]=Mt[0][st];for(var Xr=1;Xr<un.length;Xr++)un[Xr]=un[Xr-1]+Mt[Xr][st];var to=sn[st],uo=sn.slice(-2),hn=sn.join(),fn="if ("+to+" < "+un[0]+`) {
        return getChannel(
            getT0(`+hn+"), vec2("+uo.join()+`));
        }`;for(Xr=1;Xr<un.length;Xr++){var co=un[Xr-1];fn+=`
        if (`+to+" < "+un[Xr]+"  && "+to+" >= "+un[Xr-1]+`) {
          return getChannel(
            getT`+Xr+"("+Ha(sn,to,co)+`),
            vec2(`+Ha(uo,to,co)+`));
        }`}var lo=un.length,fo=un[un.length-1];fn+=`
        return getChannel(
          getT`+lo+"("+Ha(sn,to,fo)+`),
          vec2(`+Ha(uo,to,fo)+"));",this.userCode=`
      float getValue(`+sn.map(function(ho){return"int "+ho})+`) {
        `+fn+`
      }

      void main() {
        `+on+` coords = getOutputCoords();
        vec4 result = vec4(getValue(`+an+`), 0., 0., 0.);

        `+an[rn-1]+" = "+an[rn-1]+` + 1;
        if (`+an[rn-1]+" < "+nn[rn-1]+`) {
          result.g = getValue(`+an+`);
        }

        `+an[rn-2]+" = "+an[rn-2]+` + 1;
        if (`+an[rn-2]+" < "+nn[rn-2]+`) {
          result.a = getValue(`+an+`);
        }

        `+an[rn-1]+" = "+an[rn-1]+` - 1;
        if (`+an[rn-2]+" < "+nn[rn-2]+` &&
            `+an[rn-1]+" < "+nn[rn-1]+`) {
          result.b = getValue(`+an+`);
        }
        setOutput(result);
      }
    `};function Ha(Mt,st,nn){var rn=Mt.indexOf(st);return Mt.map(function(on,an){return an===rn?on+" - "+nn:on}).join()}var qa=function(Mt){this.variableNames=["x","dy"],this.outputShape=Mt.filterShape;var st=Mt.strideHeight,nn=Mt.strideWidth,rn=Mt.padInfo.top,on=Mt.padInfo.left,an=Mt.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < `+Mt.batchSize+`; b++) {
          for (int yR = 0; yR < `+Mt.outHeight+`; yR++) {
            int xR = wR + yR * `+st+" - "+rn+`;

            if (xR < 0 || xR >= `+Mt.inHeight+`) {
              continue;
            }

            for (int yC = 0; yC < `+Mt.outWidth+`; yC++) {
              int xC = wC + yC * `+nn+" - "+on+`;

              if (xC < 0 || xC >= `+Mt.inWidth+`) {
                continue;
              }

              if (`+an+`) {
                float dyValue = getDy(b, yR, yC, d2);
                float xValue = getX(b, xR, xC, d1);
                dotProd += (xValue * dyValue);
              } else {
                float dyValue = getDy(b, d2, yR, yC);
                float xValue = getX(b, d1, xR, xC);
                dotProd += (xValue * dyValue);
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `},Ka=function(Mt){this.variableNames=["dy","W"],this.outputShape=Mt.inShape;var st=Mt.filterHeight,nn=Mt.filterWidth,rn=Mt.strideHeight,on=Mt.strideWidth,an=Mt.dataFormat==="channelsLast",sn=st-1-Mt.padInfo.top,un=nn-1-Mt.padInfo.left,Xr=an?1:2,to=an?2:3,uo=an?3:1;this.userCode=`
      const ivec2 pads = ivec2(`+sn+", "+un+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[`+uo+`];

        ivec2 dyCorner = ivec2(coords[`+Xr+"], coords["+to+`]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+st+`; wR++) {
          float dyR = float(dyRCorner + wR) / `+rn+`.0;

          if (dyR < 0.0 || dyR >= `+Mt.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = `+st+` - 1 - wR;

          for (int wC = 0; wC < `+nn+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+on+`.0;

            if (dyC < 0.0 || dyC >= `+Mt.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = `+nn+` - 1 - wC;

            for (int d2 = 0; d2 < `+Mt.outChannels+`; d2++) {

              if (`+an+`) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `},ja=function(Mt){this.variableNames=["x","dy"],this.outputShape=Mt.filterShape;var st=Mt.strideDepth,nn=Mt.strideHeight,rn=Mt.strideWidth,on=Mt.padInfo.front,an=Mt.padInfo.top,sn=Mt.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < `+Mt.batchSize+`; b++) {
          for (int yF = 0; yF < `+Mt.outDepth+`; yF++) {
            int xF = wF + yF * `+st+" - "+on+`;

            if (xF < 0 || xF >= `+Mt.inDepth+`) {
              continue;
            }

            for (int yR = 0; yR < `+Mt.outHeight+`; yR++) {
              int xR = wR + yR * `+nn+" - "+an+`;

              if (xR < 0 || xR >= `+Mt.inHeight+`) {
                continue;
              }

              for (int yC = 0; yC < `+Mt.outWidth+`; yC++) {
                int xC = wC + yC * `+rn+" - "+sn+`;

                if (xC < 0 || xC >= `+Mt.inWidth+`) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `},Xa=function(Mt){this.variableNames=["dy","W"],this.outputShape=Mt.inShape;var st=Mt.filterDepth,nn=Mt.filterHeight,rn=Mt.filterWidth,on=Mt.strideDepth,an=Mt.strideHeight,sn=Mt.strideWidth,un=st-1-Mt.padInfo.front,Xr=nn-1-Mt.padInfo.top,to=rn-1-Mt.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(`+un+", "+Xr+", "+to+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < `+st+`; wF++) {
          float dyF = float(dyFCorner + wF) / `+on+`.0;

          if (dyF < 0.0 || dyF >= `+Mt.outDepth+`.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = `+st+` - 1 - wF;

          for (int wR = 0; wR < `+nn+`; wR++) {
            float dyR = float(dyRCorner + wR) / `+an+`.0;

            if (dyR < 0.0 || dyR >= `+Mt.outHeight+`.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = `+nn+` - 1 - wR;

            for (int wC = 0; wC < `+rn+`; wC++) {
              float dyC = float(dyCCorner + wC) / `+sn+`.0;

              if (dyC < 0.0 || dyC >= `+Mt.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = `+rn+` - 1 - wC;

              for (int d2 = 0; d2 < `+Mt.outChannels+`; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `},Ya=function(Mt){this.variableNames=["x","dy"],this.outputShape=Mt.filterShape;var st=Mt.strideHeight,nn=Mt.strideWidth,rn=Mt.padInfo.top,on=Mt.padInfo.left,an=Mt.outChannels/Mt.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * `+an+` + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < `+Mt.batchSize+`; b++) {
          for (int yR = 0; yR < `+Mt.outHeight+`; yR++) {
            int xR = wR + yR * `+st+" - "+rn+`;

            if (xR < 0 || xR >= `+Mt.inHeight+`) {
              continue;
            }

            for (int yC = 0; yC < `+Mt.outWidth+`; yC++) {
              int xC = wC + yC * `+nn+" - "+on+`;

              if (xC < 0 || xC >= `+Mt.inWidth+`) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `},$a=function(Mt){this.variableNames=["dy","W"],this.outputShape=Mt.inShape;var st=Mt.filterHeight,nn=Mt.filterWidth,rn=Mt.strideHeight,on=Mt.strideWidth,an=st-1-Mt.padInfo.top,sn=nn-1-Mt.padInfo.left,un=Mt.outChannels/Mt.inChannels;this.userCode=`
      const ivec2 pads = ivec2(`+an+", "+sn+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < `+st+`; wR++) {
          float dyR = float(dyRCorner + wR) / `+rn+`.0;

          if (dyR < 0.0 || dyR >= `+Mt.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = `+st+` - 1 - wR;

          for (int wC = 0; wC < `+nn+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+on+`.0;

            if (dyC < 0.0 || dyC >= `+Mt.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = `+nn+` - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < `+un+`; dm++) {
              int d2 = d1 * `+un+` + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `},Qa=function(Mt,st,nn,rn){st===void 0&&(st=!1),nn===void 0&&(nn=null),rn===void 0&&(rn=!1),this.variableNames=["x","W"],this.outputShape=Mt.outShape;var on=Mt.padInfo.top,an=Mt.padInfo.left,sn=Mt.strideHeight,un=Mt.strideWidth,Xr=Mt.dilationHeight,to=Mt.dilationWidth,uo=Mt.filterHeight,hn=Mt.filterWidth,fn=4*Math.floor(Mt.inChannels/4),co=Mt.inChannels%4,lo=Mt.dataFormat==="channelsLast",fo=lo?1:2,ho=lo?2:3,mo=lo?3:1,Uo="",_d="";nn&&(Uo=rn?`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          `+nn+`
        }`:`
          float activation(float x) {
            `+nn+`
          }
        `,_d="result = activation(result);");var tp=st?"result += getBiasAtOutCoords();":"";st&&this.variableNames.push("bias"),rn&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+Uo+`

      const ivec2 strides = ivec2(`+sn+", "+un+`);
      const ivec2 pads = ivec2(`+on+", "+an+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[`+mo+`];

        ivec2 xRCCorner =
            ivec2(coords[`+fo+"], coords["+ho+`]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+uo+`; wR++) {
          int xR = xRCorner + wR * `+Xr+`;

          if (xR < 0 || xR >= `+Mt.inHeight+`) {
            continue;
          }

          for (int wC = 0; wC < `+hn+`; wC++) {
            int xC = xCCorner + wC * `+to+`;

            if (xC < 0 || xC >= `+Mt.inWidth+`) {
              continue;
            }

            for (int d1 = 0; d1 < `+fn+`; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (`+lo+`) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (`+(co===1)+`) {

              if (`+lo+`) {
                dotProd +=
                    getX(batch, xR, xC, `+fn+`) *
                    getW(wR, wC, `+fn+`, d2);
              } else {
                dotProd +=
                    getX(batch, `+fn+`, xR, xC) *
                    getW(wR, wC, `+fn+`, d2);
              }

            } else if (`+(co===2)+`) {
              vec2 wValues = vec2(
                getW(wR, wC, `+fn+`, d2),
                getW(wR, wC, `+fn+` + 1, d2)
              );

              if (`+lo+`) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, `+fn+`),
                  getX(batch, xR, xC, `+fn+` + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, `+fn+`, xR, xC),
                  getX(batch, `+fn+` + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (`+(co===3)+`) {
              vec3 wValues = vec3(
                getW(wR, wC, `+fn+`, d2),
                getW(wR, wC, `+fn+` + 1, d2),
                getW(wR, wC, `+fn+` + 2, d2)
              );

              if (`+lo+`) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, `+fn+`),
                  getX(batch, xR, xC, `+fn+` + 1),
                  getX(batch, xR, xC, `+fn+` + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, `+fn+`, xR, xC),
                  getX(batch, `+fn+` + 1, xR, xC),
                  getX(batch, `+fn+` + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        `+tp+`
        `+_d+`
        setOutput(result);
      }
    `},Ja=function(Mt){this.variableNames=["x","W"],this.outputShape=Mt.outShape;var st=Mt.padInfo.front,nn=Mt.padInfo.top,rn=Mt.padInfo.left,on=Mt.strideDepth,an=Mt.strideHeight,sn=Mt.strideWidth,un=Mt.dilationDepth,Xr=Mt.dilationHeight,to=Mt.dilationWidth,uo=Mt.filterDepth,hn=Mt.filterHeight,fn=Mt.filterWidth,co=4*Math.floor(Mt.inChannels/4),lo=Mt.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(`+on+", "+an+", "+sn+`);
      const ivec3 pads = ivec3(`+st+", "+nn+", "+rn+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < `+uo+`; wF++) {
          int xF = xFCorner + wF * `+un+`;

          if (xF < 0 || xF >= `+Mt.inDepth+`) {
            continue;
          }

          for (int wR = 0; wR < `+hn+`; wR++) {
            int xR = xRCorner + wR * `+Xr+`;

            if (xR < 0 || xR >= `+Mt.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+fn+`; wC++) {
              int xC = xCCorner + wC * `+to+`;

              if (xC < 0 || xC >= `+Mt.inWidth+`) {
                continue;
              }

              for (int d1 = 0; d1 < `+co+`; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (`+(lo===1)+`) {
                dotProd +=
                  getX(batch, xF, xR, xC, `+co+`) *
                  getW(wF, wR, wC, `+co+`, d2);
              } else if (`+(lo===2)+`) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, `+co+`),
                  getX(batch, xF, xR, xC, `+co+` + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, `+co+`, d2),
                  getW(wF, wR, wC, `+co+` + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (`+(lo===3)+`) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, `+co+`),
                  getX(batch, xF, xR, xC, `+co+` + 1),
                  getX(batch, xF, xR, xC, `+co+` + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, `+co+`, d2),
                  getW(wF, wR, wC, `+co+` + 1, d2),
                  getW(wF, wR, wC, `+co+` + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `},Za=function(Mt,st,nn,rn){st===void 0&&(st=!1),nn===void 0&&(nn=null),rn===void 0&&(rn=!1),this.variableNames=["x","W"],this.outputShape=Mt.outShape;var on=Mt.inHeight,an=Mt.inWidth,sn=Mt.padInfo.top,un=Mt.padInfo.left,Xr=Mt.strideHeight,to=Mt.strideWidth,uo=Mt.dilationHeight,hn=Mt.dilationWidth,fn=Mt.filterHeight,co=Mt.filterWidth,lo=Mt.outChannels/Mt.inChannels,fo="",ho="";nn&&(fo=rn?`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          `+nn+`
        }`:`
          float activation(float x) {
            `+nn+`
          }
        `,ho="result = activation(result);");var mo=st?"result += getBiasAtOutCoords();":"";st&&this.variableNames.push("bias"),rn&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+fo+`

      const ivec2 strides = ivec2(`+Xr+", "+to+`);
      const ivec2 pads = ivec2(`+sn+", "+un+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / `+lo+`;
        int q = d2 - d1 * `+lo+`;

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < `+fn+`; wR++) {
          int xR = xRCorner + wR * `+uo+`;

          if (xR < 0 || xR >= `+on+`) {
            continue;
          }

          for (int wC = 0; wC < `+co+`; wC++) {
            int xC = xCCorner + wC * `+hn+`;

            if (xC < 0 || xC >= `+an+`) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        `+mo+`
        `+ho+`
        setOutput(result);
      }
    `},ti=function(Mt,st,nn,rn){st===void 0&&(st=!1),nn===void 0&&(nn=null),rn===void 0&&(rn=!1),this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=Mt.outShape;for(var on=Mt.inHeight,an=Mt.inWidth,sn=Mt.padInfo.top,un=Mt.padInfo.left,Xr=Mt.strideHeight,to=Mt.strideWidth,uo=Mt.dilationHeight,hn=Mt.dilationWidth,fn=Mt.filterHeight,co=Mt.filterWidth,lo=co,fo="int xR; int xC; int xCOffset;",ho=0;ho<fn;ho++)for(var mo=0;mo<co;mo++)fo+=`
          vec4 xTexelR`+ho+"C"+2*mo+` = vec4(0.);
          vec4 wR`+ho+"C"+mo+` = vec4(0.);
          vec4 xR`+ho+"C"+mo+" = vec4(0.);";for(ho=0;ho<fn;ho++)for(var Uo=0;Uo<lo;Uo++){if(fo+=`
          xR = xRCorner + `+ho*uo+`;
          xC = xCCorner + `+(mo=2*Uo)*hn+`;
        `,to===1){if(mo<co&&(fo+=un%2==1?`
                xCOffset = xC + 1;
                if(xR >= 0 && xR < `+on+" && xCOffset >= 0 && xCOffset < "+an+`) {
                  xTexelR`+ho+"C"+mo+` = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if(xCOffset + 1 >= `+an+`) {
                    xTexelR`+ho+"C"+mo+`.zw = vec2(0.);
                  }
                } else {
                  xTexelR`+ho+"C"+mo+` = vec4(0.);
                }

                xCOffset = xC + 1 - 2;
                if(xR >= 0 && xR < `+on+" && xCOffset >= 0 && xCOffset < "+an+`) {
                  vec4 previous = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if(xCOffset + 1 >= `+an+`) {
                    previous.zw = vec2(0.);
                  }

                  xR`+ho+"C"+mo+" = vec4(previous.zw, xTexelR"+ho+"C"+mo+`.xy);
                } else {
                  xR`+ho+"C"+mo+" = vec4(0, 0, xTexelR"+ho+"C"+mo+`.xy);
                }
              `:`
                if(xR >= 0 && xR < `+on+" && xC >= 0 && xC < "+an+`) {
                  xTexelR`+ho+"C"+mo+` = getX(batch, xR, xC, d1);
                } else {
                  xTexelR`+ho+"C"+mo+` = vec4(0.);
                }

                xR`+ho+"C"+mo+" = xTexelR"+ho+"C"+mo+`;
              `,mo+1<co)){var _d=un%2==0?b$1(hn):hn;hn%2==0&&un%2==1||hn%2!=0&&un%2!=1?(fo+=`
                  xCOffset = xC + `+un%2+" + "+_d+`;

                  if(xR >= 0 && xR < `+on+` &&
                    xCOffset >= 0 && xCOffset < `+an+`) {
                    xTexelR`+ho+"C"+(mo+2)+` = getX(batch, xR, xCOffset, d1);
                  }
                `,hn>1&&(fo+=`
                    xCOffset -= 2;
                    if(xR >= 0 && xR < `+on+` &&
                      xCOffset >= 0 && xCOffset < `+an+`) {
                      xTexelR`+ho+"C"+mo+` = getX(batch, xR, xCOffset, d1);
                    } else {
                      xTexelR`+ho+"C"+mo+` = vec4(0.);
                    }
                  `),fo+=`
                  xR`+ho+"C"+(mo+1)+` = vec4(
                    xTexelR`+ho+"C"+mo+".zw, xTexelR"+ho+"C"+(mo+2)+`.xy);
                `):fo+=`
                  xCOffset = xC + `+_d+`;

                  if(xR >= 0 && xR < `+on+` &&
                    xCOffset >= 0 && xCOffset < `+an+`) {
                    xTexelR`+ho+"C"+(mo+2)+` = getX(batch, xR, xCOffset, d1);
                  }

                  xR`+ho+"C"+(mo+1)+" = xTexelR"+ho+"C"+(mo+2)+`;
                `}}else mo<co&&(fo+=`
              if(xR >= 0 && xR < `+on+`) {
            `,un%2==1?(fo+=`
                xCOffset = xC + 1 - `+to+`;
                if(xCOffset >= 0 && xCOffset < `+an+`) {
                  xTexelR`+ho+"C"+mo+` = getX(batch, xR, xCOffset, d1);
                } else {
                  xTexelR`+ho+"C"+mo+` = vec4(0.);
                }

                if(xC + 1 >= 0 && xC + 1 < `+an+`) {
                  xTexelR`+ho+"C"+(mo+2)+` = getX(batch, xR, xC + 1, d1);
                } else {
                  xTexelR`+ho+"C"+(mo+2)+` = vec4(0.);
                }

                xR`+ho+"C"+mo+` = vec4(
                  xTexelR`+ho+"C"+mo+".zw, xTexelR"+ho+"C"+(mo+2)+`.zw);
              `,mo+1<co&&(fo+=`
                  vec4 final = vec4(0.);
                  xCOffset = xC + 1 + `+to+`;
                  if(xCOffset >= 0 && xCOffset < `+an+`) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xR`+ho+"C"+(mo+1)+" = vec4(xTexelR"+ho+"C"+(mo+2)+`.xy, final.xy);
                `)):(fo+=`
                if(xC >= 0 && xC < `+an+`) {
                  xTexelR`+ho+"C"+mo+` = getX(batch, xR, xC, d1);
                } else {
                  xTexelR`+ho+"C"+mo+` = vec4(0.);
                }

                xCOffset = xC + `+to+`;
                if(xCOffset >= 0 && xCOffset < `+an+`) {
                  xTexelR`+ho+"C"+(mo+2)+` = getX(batch, xR, xCOffset, d1);
                } else {
                  xTexelR`+ho+"C"+(mo+2)+` = vec4(0.);
                }

                xR`+ho+"C"+mo+` = vec4(
                  xTexelR`+ho+"C"+mo+".xy, xTexelR"+ho+"C"+(mo+2)+`.xy);
              `,mo+1<co&&(fo+=`
                  xR`+ho+"C"+(mo+1)+` = vec4(
                    xTexelR`+ho+"C"+mo+".zw, xTexelR"+ho+"C"+(mo+2)+`.zw);
                `)),fo+="}");mo<co&&(fo+=`
            vec4 wTexelR`+ho+"C"+mo+" = getW("+ho+", "+mo+`, d1, q);
            wR`+ho+"C"+mo+" = vec4(wTexelR"+ho+"C"+mo+".xz, wTexelR"+ho+"C"+mo+`.xz);
          `,mo+1<co&&(fo+=`
              vec4 wTexelR`+ho+"C"+(mo+1)+" = getW("+ho+", "+(mo+1)+`, d1, q);
              wR`+ho+"C"+(mo+1)+` =
                vec4(wTexelR`+ho+"C"+(mo+1)+".xz, wTexelR"+ho+"C"+(mo+1)+".xz);"))}for(ho=0;ho<fn;ho++)for(mo=0;mo<co;mo++)fo+="dotProd += xR"+ho+"C"+mo+" * wR"+ho+"C"+mo+";";var tp="",ep="";nn&&(tp=rn?`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          `+nn+`
        }`:`vec4 activation(vec4 x) {
          `+nn+`
        }`,ep="result = activation(result);");var np=st?"result += getBiasAtOutCoords();":"";st&&this.variableNames.push("bias"),rn&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+tp+`

      const ivec2 strides = ivec2(`+Xr+", "+to+`);
      const ivec2 pads = ivec2(`+sn+", "+un+`);

      void main() {

        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2;
        int q = 0;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        vec4 dotProd = vec4(0.);

        `+fo+`

        vec4 result = dotProd;
        `+np+`
        `+ep+`
        setOutput(result);
      }
    `},ei=function(Mt,st,nn,rn,on){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];var an=Mt[0],sn=Mt[1],un=Mt[2],Xr=Mt[3],to=st[0],uo=nn[0],hn=nn[1];this.outputShape=[to,uo,hn,Xr];var fn=rn==="bilinear"?1:0,co=[sn-1+".0",un-1+".0"],lo=co[0],fo=co[1],ho=uo>1?[""+(sn-1)/(uo-1),"(y2-y1) * height_ratio","y1*"+lo+" + float(y)*(height_scale)"]:["0.0","0.0","0.5 * (y1+y2) * "+lo],mo=ho[0],Uo=ho[1],_d=ho[2],tp=hn>1?[""+(un-1)/(hn-1),"(x2-x1) * width_ratio","x1*"+fo+" + float(x)*(width_scale)"]:["0.0","0.0","0.5 * (x1+x2) * "+fo],ep=tp[0],np=tp[1],rp=tp[2];this.userCode=`
      const float height_ratio = float(`+mo+`);
      const float width_ratio = float(`+ep+`);
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= `+an+`) {
          return;
        }

        float height_scale = `+Uo+`;
        float width_scale = `+np+`;

        float in_y = `+_d+`;
        if( in_y < 0.0 || in_y > `+lo+` ) {
          setOutput(float(`+on+`));
          return;
        }
        float in_x = `+rp+`;
        if( in_x < 0.0 || in_x > `+fo+` ) {
          setOutput(float(`+on+`));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(`+fn+` == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `},ni=function(Mt,st,nn){this.variableNames=["x"],this.outputShape=Mt;var rn=Mt.length,on=Mt[Mt.length-1],an=nn?"<":">";this.userCode=`
      int getIndex(int i) {
        `+(nn?"return "+on+" -i - 1;":"return i;")+`
      }

      void main() {
        `+wa(rn)+` coords = getOutputCoords();
        int end = `+ri(rn,"coords")+`;
        float val = 0.0;
        for (int i = `+on+` - 1; i >= 0; i -= 1) {
          int idx = getIndex(i);
          if (idx `+an+` end) {
            continue;
          }
          if (idx == end && `+st+`) {
            continue;
          }
          `+ri(rn,"coords")+` = idx;
          val += getX(`+function(sn,un){if(sn===1)return""+un;if(sn===2)return un+".x, "+un+".y";if(sn===3)return un+".x, "+un+".y, "+un+".z";if(sn===4)return un+".x, "+un+".y, "+un+".z, "+un+".w";throw Error("Cumulative sum for rank "+sn+" is not yet supported")}(rn,"coords")+`);
        }
        setOutput(val);
      }
    `};function ri(Mt,st){if(Mt===1)return""+st;if(Mt===2)return st+".y";if(Mt===3)return st+".z";if(Mt===4)return st+".w";throw Error("Cumulative sum for rank "+Mt+" is not yet supported")}var oi=function(Mt){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=Vt.DENSE;var st=Yt(Mt),nn=ua();this.outputShape=Mt,this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        `+ca(["r","c","d"],Mt)+`
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx *
          vec2(`+st[0]+", "+st[1]+`));
        int index = 4 * (resTexRC.x * `+st[1]+` + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        `+nn.output+` = result;
      }
    `},ai=function(Mt){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=Vt.DENSE;var st=Yt(Mt),nn=ua();this.outputShape=Mt,this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        `+ca(["r","c","d"],Mt)+`
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx *
          vec2(`+st[0]+", "+st[1]+`));
        int index = 4 * (resTexRC.x * `+st[1]+` + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        `+nn.output+` = result;
      }
    `},ii=function(){function Mt(st,nn,rn){this.variableNames=["x"],this.outputShape=[],this.outputShape=st,this.blockSize=nn,this.dataFormat=rn,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = `+this.getHeightCoordString()+`;
      int w = `+this.getWidthCoordString()+`;
      int d = `+this.getDepthCoordString()+`;

      int in_h = h / `+nn+`;
      int offset_h = imod(h, `+nn+`);
      int in_w = w / `+nn+`;
      int offset_w = imod(w, `+nn+`);
      int offset_d = (offset_h * `+nn+` + offset_w) *
        `+this.getOutputDepthSize()+`;
      int in_d = d + offset_d;

      float result = `+this.getInputSamplingString()+`;
      setOutput(result);
    }
  `}return Mt.prototype.getHeightCoordString=function(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"},Mt.prototype.getWidthCoordString=function(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"},Mt.prototype.getDepthCoordString=function(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"},Mt.prototype.getOutputDepthSize=function(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]},Mt.prototype.getInputSamplingString=function(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"},Mt}(),si=function(Mt){this.variableNames=["X"],this.outputShape=[Mt,Mt],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `},ui=function(Mt){this.variableNames=["A"],this.outTexUsage=zt.DOWNLOAD;var st=ua();this.outputShape=Mt,this.userCode=`
      `+ha+`

      void main() {
        float x = getAAtOutCoords();
        `+st.output+` = encode_float(x);
      }
    `},ci=function(Mt){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=zt.DOWNLOAD;var st=ua();this.outputShape=Mt,this.userCode=`
      `+ha+`

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        `+st.output+` = encode_float(x);
      }
    `},li=function(Mt,st,nn){nn===void 0&&(nn=!1),this.variableNames=["A"];var rn=ua(),on=st[0],an=st[1];this.outputShape=Mt;var sn="result";nn&&(sn="floor(result * 255. + 0.5)"),this.userCode=`
      `+la(Mt)+`

      void main() {
        ivec3 coords = getOutputCoords();

        int flatIndex = getFlatIndex(coords);
        int offset = imod(flatIndex, 4);

        flatIndex = idiv(flatIndex, 4, 1.);
        
        int r = flatIndex / `+an+`;
        int c = imod(flatIndex, `+an+`);
        vec2 uv = (vec2(c, r) + halfCR) / vec2(`+an+".0, "+on+`.0);
        vec4 values = `+rn.texture2D+`(A, uv);

        float result;

        if(offset == 0) {
          result = values[0];
        } else if(offset == 1) {
          result = values[1];
        } else if(offset == 2) {
          result = values[2];
        } else {
          result = values[3];
        }

        `+rn.output+" = vec4("+sn+`, 0., 0., 0.);
      }
    `},hi=function(Mt,st,nn){nn===void 0&&(nn=!1),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var rn=ua(),on=st[0],an=st[1];this.outputShape=Mt;var sn="",un="result";nn&&(un="floor(result * 255. + 0.5)");for(var Xr=0;Xr<=1;Xr++)for(var to=0;to<=1;to++){var uo=2*Xr+to;sn+=`
          localCoords = coords;
          if(localCoords[2] + `+to+" < "+Mt[2]+`) {
            localCoords[2] += `+to+`;
            if(localCoords[1] + `+Xr+" < "+Mt[1]+`) {
              localCoords[1] += `+Xr+`;

              flatIndex = getFlatIndex(localCoords);
              offset = imod(flatIndex, 4);

              flatIndex = idiv(flatIndex, 4, 1.);

              r = flatIndex / `+an+`;
              c = imod(flatIndex, `+an+`);
              uv = (vec2(c, r) + halfCR) / vec2(`+an+".0, "+on+`.0);
              values = `+rn.texture2D+`(A, uv);

              if(offset == 0) {
                result[`+uo+`] = values[0];
              } else if(offset == 1) {
                result[`+uo+`] = values[1];
              } else if(offset == 2) {
                result[`+uo+`] = values[2];
              } else {
                result[`+uo+`] = values[3];
              }
            }
          }
        `}this.userCode=`
      `+la(Mt)+`

      void main() {
        ivec3 coords = getOutputCoords();

        vec4 result = vec4(0.);
        int flatIndex, r, c, offset;
        ivec3 localCoords;
        vec2 uv;
        vec4 values;

        `+sn+`

        `+rn.output+" = "+un+`;
      }
    `},fi="return real * expR - imag * expI;",di="return real * expI + imag * expR;",pi$2=function(Mt,st,nn){this.variableNames=["real","imag"];var rn=st[1];this.outputShape=st;var on=nn?"2.0 * "+Math.PI:"-2.0 * "+Math.PI,an=nn?rn+".0":"1.0";this.userCode=`
      const float exponentMultiplier = `+on+`;

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        `+Mt+`
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(`+rn+`);
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < `+rn+`; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / `+an+`;
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `},vi=function(){function Mt(st,nn){this.outputShape=[],this.variableNames=["x"],this.outputShape=st,this.userCode=`
      uniform float value;
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}return Mt.prototype.getCustomSetupFunc=function(st){var nn=this;return function(rn,on){nn.valueLoc==null&&(nn.valueLoc=rn.getUniformLocationNoThrow(on,"value")),rn.gl.uniform1f(nn.valueLoc,st)}},Mt}(),mi=function(Mt,st,nn){this.variableNames=["A","indices"];var rn=Mt.slice();rn[nn]=st,this.outputShape=rn,this.rank=rn.length;var on=wa(this.rank),an=function(sn,un){var Xr=sn.length;if(Xr>4)throw Error("Gather for rank "+Xr+" is not yet supported");if(Xr===1)return"int(getIndices(resRC))";for(var to=["resRC.x","resRC.y","resRC.z","resRC.w"],uo=[],hn=0;hn<sn.length;hn++)hn===un?uo.push("int(getIndices("+to[hn]+"))"):uo.push(""+to[hn]);return uo.join()}(Mt,nn);this.userCode=`
      void main() {
        `+on+` resRC = getOutputCoords();
        setOutput(getA(`+an+`));
      }
    `},gi=function(Mt,st,nn){this.sliceDim=Mt,this.strides=st,this.variableNames=["x","indices"],this.outputShape=nn;var rn=wa(st.length),on=wa(nn.length),an=this.sliceDim>1?"strides[j]":"strides";this.userCode=`
        `+rn+" strides = "+rn+"("+this.strides+`);
         void main() {
          `+on+` coords = getOutputCoords();
          int flattenIndex = 0;
          for (int j = 0; j < `+this.sliceDim+`; j++) {
            int index = round(getIndices(coords[0], j));
            flattenIndex += index * `+an+`;
          }
          setOutput(getX(flattenIndex, coords[1]));
        }
      `};function yi(Mt,st){var nn=ua();return oe(Mt,st,nn.version+`
    precision highp float;
    `+nn.attribute+` vec3 clipSpacePos;
    `+nn.attribute+` vec2 uv;
    `+nn.varyingVs+` vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`)}function xi(Mt,st){return fe(Mt,st,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function bi(Mt,st){return de(Mt,st,new Uint16Array([0,1,2,2,1,3]))}function wi(Mt,st,nn,rn,on,an,sn){ve(nn,rn);var un=pe(Mt,st),Xr=Mt.TEXTURE_2D;return Jt(Mt,st,function(){return Mt.bindTexture(Xr,un)}),Jt(Mt,st,function(){return Mt.texParameteri(Xr,Mt.TEXTURE_WRAP_S,Mt.CLAMP_TO_EDGE)}),Jt(Mt,st,function(){return Mt.texParameteri(Xr,Mt.TEXTURE_WRAP_T,Mt.CLAMP_TO_EDGE)}),Jt(Mt,st,function(){return Mt.texParameteri(Xr,Mt.TEXTURE_MIN_FILTER,Mt.NEAREST)}),Jt(Mt,st,function(){return Mt.texParameteri(Xr,Mt.TEXTURE_MAG_FILTER,Mt.NEAREST)}),Jt(Mt,st,function(){return Mt.texImage2D(Xr,0,on,nn,rn,0,an,sn,null)}),Jt(Mt,st,function(){return Mt.bindTexture(Mt.TEXTURE_2D,null)}),un}function Ci(Mt,st,nn,rn,on){var an=Xt(nn,rn);return wi(Mt,st,an[0],an[1],on.internalFormatFloat,on.textureFormatFloat,Mt.FLOAT)}function Ei(Mt,st,nn,rn,on){var an=Xt(nn,rn);return wi(Mt,st,an[0],an[1],on.internalFormatHalfFloat,on.textureFormatFloat,on.textureTypeHalfFloat)}function Ri(Mt,st,nn,rn,on){var an=Xt(nn,rn);return wi(Mt,st,an[0],an[1],Mt.RGBA,Mt.RGBA,Mt.UNSIGNED_BYTE)}function Ii(Mt,st,nn,rn,on){var an=$t(nn,rn);return wi(Mt,st,an[0],an[1],on.internalFormatPackedFloat,Mt.RGBA,Mt.FLOAT)}function ki(Mt,st,nn,rn,on){var an=$t(nn,rn);return wi(Mt,st,an[0],an[1],on.internalFormatPackedHalfFloat,Mt.RGBA,on.textureTypeHalfFloat)}function Si(Mt,st,nn,rn){return Jt(Mt,st,function(){return Mt.bindBuffer(Mt.ARRAY_BUFFER,rn)}),ge(Mt,st,nn,"clipSpacePos",rn,3,20,0)&&ge(Mt,st,nn,"uv",rn,2,20,12)}function Ai(Mt,st,nn,rn,on,an,sn){var un,Xr,to;Jt(Mt,st,function(){return Mt.bindTexture(Mt.TEXTURE_2D,nn)}),an instanceof Uint8Array?(un=new Uint8Array(rn*on*4),Xr=Mt.UNSIGNED_BYTE,to=Mt.RGBA):(un=new Float32Array(rn*on*4),Xr=Mt.FLOAT,to=sn.internalFormatPackedFloat),un.set(an),Jt(Mt,st,function(){return Mt.texImage2D(Mt.TEXTURE_2D,0,to,rn,on,0,Mt.RGBA,Xr,un)}),Jt(Mt,st,function(){return Mt.bindTexture(Mt.TEXTURE_2D,null)})}function Di(Mt,st,nn,rn){Jt(Mt,st,function(){return Mt.bindTexture(Mt.TEXTURE_2D,nn)}),rn.data instanceof Uint8Array?Jt(Mt,st,function(){return Mt.texImage2D(Mt.TEXTURE_2D,0,Mt.RGBA,rn.width,rn.height,0,Mt.RGBA,Mt.UNSIGNED_BYTE,rn.data)}):Jt(Mt,st,function(){return Mt.texImage2D(Mt.TEXTURE_2D,0,Mt.RGBA,Mt.RGBA,Mt.UNSIGNED_BYTE,rn)}),Jt(Mt,st,function(){return Mt.bindTexture(Mt.TEXTURE_2D,null)})}function Ti(Mt,st,nn,rn,on){var an=Mt.createBuffer();Jt(Mt,st,function(){return Mt.bindBuffer(Mt.PIXEL_PACK_BUFFER,an)});var sn=16*nn*rn;return Jt(Mt,st,function(){return Mt.bufferData(Mt.PIXEL_PACK_BUFFER,sn,Mt.STREAM_READ)}),Jt(Mt,st,function(){return Mt.readPixels(0,0,rn,nn,Mt.RGBA,Mt.FLOAT,0)}),Jt(Mt,st,function(){return Mt.bindBuffer(Mt.PIXEL_PACK_BUFFER,null)}),an}function Ni(Mt,st,nn){var rn=Mt,on=new Float32Array(nn);return rn.bindBuffer(rn.PIXEL_PACK_BUFFER,st),rn.getBufferSubData(rn.PIXEL_PACK_BUFFER,0,on),rn.bindBuffer(rn.PIXEL_PACK_BUFFER,null),on}function Fi(Mt,st,nn,rn,on){var an=Xt(nn,rn),sn=an[0],un=an[1],Xr=new Uint8Array(nn*rn*4);return Jt(Mt,st,function(){return Mt.readPixels(0,0,sn,un,on.downloadTextureFormat,Mt.UNSIGNED_BYTE,Xr)}),new Float32Array(Xr.buffer)}function _i(Mt,st,nn,rn,on,an,sn,un){var Xr=Mt,to=new Float32Array(function(uo,hn){var fn=$t(uo,hn);return fn[0]*fn[1]*4}(an,sn));return Xr.bindBuffer(Xr.PIXEL_PACK_BUFFER,st),Xr.getBufferSubData(Xr.PIXEL_PACK_BUFFER,0,to),Xr.bindBuffer(Xr.PIXEL_PACK_BUFFER,null),to}function Oi(Mt,st,nn,rn){var on=new Float32Array(nn*rn*4);return Jt(Mt,st,function(){return Mt.readPixels(0,0,rn,nn,Mt.RGBA,Mt.FLOAT,on)}),on}var Bi=function(){function Mt(st){this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];var nn=i().getNumber("WEBGL_VERSION");st!=null?(this.gl=st,Kt(nn,st)):this.gl=jt(nn);var rn="WEBGL_color_buffer_float";if(i().getNumber("WEBGL_VERSION")===1){if(this.textureFloatExtension=re$1(this.gl,this.debug,"OES_texture_float"),Pe(this.gl,"OES_texture_half_float"))this.textureHalfFloatExtension=re$1(this.gl,this.debug,"OES_texture_half_float");else if(i().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(rn),Pe(this.gl,"EXT_color_buffer_half_float"))this.colorBufferHalfFloatExtension=re$1(this.gl,this.debug,"EXT_color_buffer_half_float");else if(i().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(rn="EXT_color_buffer_float",Pe(this.gl,rn))this.colorBufferFloatExtension=this.gl.getExtension(rn);else{if(!Pe(this.gl,"EXT_color_buffer_half_float"))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension("EXT_color_buffer_half_float")}this.vertexBuffer=xi(this.gl,this.debug),this.indexBuffer=bi(this.gl,this.debug),this.framebuffer=me(this.gl,this.debug),this.textureConfig=Qt(this.gl,this.textureHalfFloatExtension)}return Object.defineProperty(Mt.prototype,"debug",{get:function(){return i().getBool("DEBUG")},enumerable:!0,configurable:!0}),Mt.prototype.dispose=function(){var st=this;if(!this.disposed){this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");var nn=this.gl;Jt(nn,this.debug,function(){return nn.finish()}),Jt(nn,this.debug,function(){return nn.bindFramebuffer(nn.FRAMEBUFFER,null)}),Jt(nn,this.debug,function(){return nn.deleteFramebuffer(st.framebuffer)}),Jt(nn,this.debug,function(){return nn.bindBuffer(nn.ARRAY_BUFFER,null)}),Jt(nn,this.debug,function(){return nn.bindBuffer(nn.ELEMENT_ARRAY_BUFFER,null)}),Jt(nn,this.debug,function(){return nn.deleteBuffer(st.indexBuffer)}),this.disposed=!0}},Mt.prototype.createFloat32MatrixTexture=function(st,nn){return this.throwIfDisposed(),Ci(this.gl,this.debug,st,nn,this.textureConfig)},Mt.prototype.createFloat16MatrixTexture=function(st,nn){return this.throwIfDisposed(),Ei(this.gl,this.debug,st,nn,this.textureConfig)},Mt.prototype.createUnsignedBytesMatrixTexture=function(st,nn){return this.throwIfDisposed(),Ri(this.gl,this.debug,st,nn,this.textureConfig)},Mt.prototype.uploadPixelDataToTexture=function(st,nn){this.throwIfDisposed(),Di(this.gl,this.debug,st,nn)},Mt.prototype.uploadDenseMatrixToTexture=function(st,nn,rn,on){this.throwIfDisposed(),Ai(this.gl,this.debug,st,nn,rn,on,this.textureConfig)},Mt.prototype.createFloat16PackedMatrixTexture=function(st,nn){return this.throwIfDisposed(),ki(this.gl,this.debug,st,nn,this.textureConfig)},Mt.prototype.createPackedMatrixTexture=function(st,nn){return this.throwIfDisposed(),Ii(this.gl,this.debug,st,nn,this.textureConfig)},Mt.prototype.deleteMatrixTexture=function(st){var nn=this;this.throwIfDisposed(),this.outputTexture===st&&(Ee(this.gl,this.debug,this.framebuffer),this.outputTexture=null),Jt(this.gl,this.debug,function(){return nn.gl.deleteTexture(st)})},Mt.prototype.downloadByteEncodedFloatMatrixFromOutputTexture=function(st,nn,rn){var on=this;return this.downloadMatrixDriver(st,function(){return Fi(on.gl,on.debug,nn,rn,on.textureConfig)})},Mt.prototype.downloadPackedMatrixFromBuffer=function(st,nn,rn,on,an,sn){return _i(this.gl,st,0,0,0,an,sn,this.textureConfig)},Mt.prototype.downloadFloat32MatrixFromBuffer=function(st,nn){return Ni(this.gl,st,nn)},Mt.prototype.createBufferFromTexture=function(st,nn,rn){this.bindTextureToFrameBuffer(st);var on=Ti(this.gl,this.debug,nn,rn,this.textureConfig);return this.unbindTextureToFrameBuffer(),on},Mt.prototype.createAndWaitForFence=function(){var st=this.createFence(this.gl);return this.pollFence(st)},Mt.prototype.createFence=function(st){var nn,rn,on=this;if(i().getBool("WEBGL_FENCE_API_ENABLED")){var an=st,sn=an.fenceSync(an.SYNC_GPU_COMMANDS_COMPLETE,0);st.flush(),rn=function(){var un=an.clientWaitSync(sn,0,0);return un===an.ALREADY_SIGNALED||un===an.CONDITION_SATISFIED},nn=sn}else i().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(nn=this.beginQuery(),this.endQuery(),rn=function(){return on.isQueryAvailable(nn,i().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}):rn=function(){return!0};return{query:nn,isFencePassed:rn}},Mt.prototype.downloadMatrixFromPackedTexture=function(st,nn,rn){var on=this;return this.downloadMatrixDriver(st,function(){return Oi(on.gl,on.debug,nn,rn)})},Mt.prototype.createProgram=function(st){this.throwIfDisposed();var nn=this.gl,rn=ae(nn,this.debug,st),on=yi(nn,this.debug),an=ce(nn,this.debug);return Jt(nn,this.debug,function(){return nn.attachShader(an,on)}),Jt(nn,this.debug,function(){return nn.attachShader(an,rn)}),le(nn,this.debug,an),this.debug&&he(nn,this.debug,an),this.vertexAttrsAreBound||(this.setProgram(an),this.vertexAttrsAreBound=Si(nn,this.debug,this.program,this.vertexBuffer)),an},Mt.prototype.deleteProgram=function(st){var nn=this;this.throwIfDisposed(),st===this.program&&(this.program=null),st!=null&&Jt(this.gl,this.debug,function(){return nn.gl.deleteProgram(st)})},Mt.prototype.setProgram=function(st){var nn=this;this.throwIfDisposed(),this.program=st,this.program!=null&&this.debug&&he(this.gl,this.debug,this.program),Jt(this.gl,this.debug,function(){return nn.gl.useProgram(st)})},Mt.prototype.getUniformLocation=function(st,nn,rn){return rn===void 0&&(rn=!0),this.throwIfDisposed(),rn?xe(this.gl,this.debug,st,nn):be(this.gl,st,nn)},Mt.prototype.getAttributeLocation=function(st,nn){var rn=this;return this.throwIfDisposed(),Jt(this.gl,this.debug,function(){return rn.gl.getAttribLocation(st,nn)})},Mt.prototype.getUniformLocationNoThrow=function(st,nn){return this.throwIfDisposed(),this.gl.getUniformLocation(st,nn)},Mt.prototype.setInputMatrixTexture=function(st,nn,rn){this.throwIfDisposed(),this.throwIfNoProgram(),we(this.gl,this.debug,this.program,st,nn,rn)},Mt.prototype.setOutputMatrixTexture=function(st,nn,rn){this.setOutputMatrixTextureDriver(st,rn,nn)},Mt.prototype.setOutputPackedMatrixTexture=function(st,nn,rn){this.throwIfDisposed();var on=$t(nn,rn),an=on[0],sn=on[1];this.setOutputMatrixTextureDriver(st,an,sn)},Mt.prototype.setOutputMatrixWriteRegion=function(st,nn,rn,on){this.setOutputMatrixWriteRegionDriver(rn,st,on,nn)},Mt.prototype.setOutputPackedMatrixWriteRegion=function(st,nn,rn,on){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")},Mt.prototype.debugValidate=function(){this.program!=null&&he(this.gl,this.debug,this.program),Re(this.gl)},Mt.prototype.executeProgram=function(){this.throwIfDisposed(),this.throwIfNoProgram();var st=this.gl;this.debug&&this.debugValidate(),Jt(st,this.debug,function(){return st.drawElements(st.TRIANGLES,6,st.UNSIGNED_SHORT,0)})},Mt.prototype.blockUntilAllProgramsCompleted=function(){var st=this;this.throwIfDisposed(),Jt(this.gl,this.debug,function(){return st.gl.finish()})},Mt.prototype.getQueryTimerExtension=function(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=re$1(this.gl,this.debug,i().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension},Mt.prototype.getQueryTimerExtensionWebGL2=function(){return this.getQueryTimerExtension()},Mt.prototype.getQueryTimerExtensionWebGL1=function(){return this.getQueryTimerExtension()},Mt.prototype.beginQuery=function(){if(i().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){var st=this.gl,nn=this.getQueryTimerExtensionWebGL2(),rn=st.createQuery();return st.beginQuery(nn.TIME_ELAPSED_EXT,rn),rn}var on=this.getQueryTimerExtensionWebGL1(),an=on.createQueryEXT();return on.beginQueryEXT(on.TIME_ELAPSED_EXT,an),an},Mt.prototype.endQuery=function(){if(i().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")!==2){var st=this.getQueryTimerExtensionWebGL1();st.endQueryEXT(st.TIME_ELAPSED_EXT)}else{var nn=this.gl,rn=this.getQueryTimerExtensionWebGL2();nn.endQuery(rn.TIME_ELAPSED_EXT)}},Mt.prototype.waitForQueryAndGetTime=function(st){return n$1(this,void 0,void 0,function(){var nn=this;return r(this,function(rn){switch(rn.label){case 0:return[4,F(function(){return nn.disposed||nn.isQueryAvailable(st,i().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))})];case 1:return rn.sent(),[2,this.getQueryTime(st,i().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))]}})})},Mt.prototype.getQueryTime=function(st,nn){if(nn===0)return null;if(nn===2){var rn=this.gl;return rn.getQueryParameter(st,rn.QUERY_RESULT)/1e6}var on=this.getQueryTimerExtensionWebGL1();return on.getQueryObjectEXT(st,on.QUERY_RESULT_EXT)/1e6},Mt.prototype.isQueryAvailable=function(st,nn){if(nn===0)return!0;if(nn===2){var rn=this.gl,on=this.getQueryTimerExtensionWebGL2(),an=rn.getQueryParameter(st,rn.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(on.GPU_DISJOINT_EXT)),an&&!this.disjoint}return an=(on=this.getQueryTimerExtensionWebGL1()).getQueryObjectEXT(st,on.QUERY_RESULT_AVAILABLE_EXT),this.disjoint==null&&(this.disjoint=this.gl.getParameter(on.GPU_DISJOINT_EXT)),an&&!this.disjoint},Mt.prototype.pollFence=function(st){var nn=this;return new Promise(function(rn){nn.addItemToPoll(function(){return st.isFencePassed()},function(){return rn()})})},Mt.prototype.pollItems=function(){for(var st=function(rn){for(var on=0;on<rn.length&&rn[on]();++on);return on-1}(this.itemsToPoll.map(function(rn){return rn.isDoneFn})),nn=0;nn<=st;++nn)(0,this.itemsToPoll[nn].resolveFn)();this.itemsToPoll=this.itemsToPoll.slice(st+1)},Mt.prototype.addItemToPoll=function(st,nn){var rn=this;this.itemsToPoll.push({isDoneFn:st,resolveFn:nn}),this.itemsToPoll.length>1||F(function(){return rn.pollItems(),rn.itemsToPoll.length===0})},Mt.prototype.bindTextureToFrameBuffer=function(st){this.throwIfDisposed(),Ce(this.gl,this.debug,st,this.framebuffer),this.debug&&Re(this.gl)},Mt.prototype.unbindTextureToFrameBuffer=function(){this.outputTexture!=null?(Ce(this.gl,this.debug,this.outputTexture,this.framebuffer),this.debug&&Re(this.gl)):Ee(this.gl,this.debug,this.framebuffer)},Mt.prototype.downloadMatrixDriver=function(st,nn){this.bindTextureToFrameBuffer(st);var rn=nn();return this.unbindTextureToFrameBuffer(),rn},Mt.prototype.setOutputMatrixTextureDriver=function(st,nn,rn){this.throwIfDisposed();var on=this.gl;Ce(on,this.debug,st,this.framebuffer),this.debug&&Re(on),this.outputTexture=st,Jt(on,this.debug,function(){return on.viewport(0,0,nn,rn)}),Jt(on,this.debug,function(){return on.scissor(0,0,nn,rn)})},Mt.prototype.setOutputMatrixWriteRegionDriver=function(st,nn,rn,on){var an=this;this.throwIfDisposed(),Jt(this.gl,this.debug,function(){return an.gl.scissor(st,nn,rn,on)})},Mt.prototype.throwIfDisposed=function(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")},Mt.prototype.throwIfNoProgram=function(){if(this.program==null)throw new Error("No GPU program is currently set.")},Mt}();function Pi(Mt,st){if(Mt.length!==st.length)throw Error("Binary was compiled with "+Mt.length+" inputs, but was executed with "+st.length+" inputs");Mt.forEach(function(nn,rn){var on=nn.logicalShape,an=st[rn],sn=an.shape;if(!S(on,sn))throw Error("Binary was compiled with different shapes than the current args. Shapes "+on+" and "+sn+" must match");if(!nn.isUniform||!an.isUniform){var un=nn.texShape,Xr=an.isUniform?null:an.texData.texShape;if(!S(un,Xr))throw Error("Binary was compiled with different texture shapes than the current args. Shape "+un+" and "+Xr+" must match")}})}var Li=function(Mt,st,nn){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=Mt;for(var rn=nn.filterWidth,on=nn.inChannels,an=nn.strideWidth,sn=nn.strideHeight,un=nn.padInfo,Xr=nn.outWidth,to=nn.dilationWidth,uo=nn.dilationHeight,hn=nn.dataFormat,fn=un.left,co=un.top,lo=on*rn,fo=ua(),ho=hn==="channelsLast",mo=ho?0:1,Uo=ho?1:2,_d="",tp=0;tp<=1;tp++)for(var ep=0;ep<=1;ep++)_d+=`
          blockIndex = rc.y + `+ep+`;
          pos = rc.x + `+tp+`;

          if(blockIndex < `+Mt[1]+" && pos < "+Mt[0]+`) {
            offsetY = int(blockIndex / (`+Xr+")) * "+sn+" - "+co+`;
            d0 = offsetY + `+uo+" * (pos / "+lo+`);

            if(d0 < `+st[mo]+` && d0 >= 0) {

              offsetX = int(mod(float(blockIndex), `+Xr+".) * "+an+". - "+fn+`.);
              d1 = offsetX + `+to+" * (int(mod(float(pos), "+lo+".) / "+on+`.));

              if(d1 < `+st[Uo]+` && d1 >= 0) {

                ch = int(mod(float(pos), `+on+`.));

                if (`+ho+`) {
                  innerDims = vec2(d1, ch);
                  result[`+(2*tp+ep)+`] = getChannel(
                    getA(d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[`+(2*tp+ep)+`] = getChannel(
                    getA(ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec2 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        `+_d+`

        `+fo.output+` = result;
      }
    `},Wi=function(Mt,st,nn,rn,on){this.variableNames=["x"],this.outputShape=[];var an,sn=st,un=Mt[3]-1;this.outputShape=Mt;var Xr="float("+nn+") + float("+rn+") * sum";an=on===.5?"inversesqrt("+Xr+")":on===1?"1.0/("+Xr+")":"exp(log("+Xr+") * float(-"+on+"));",this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -`+sn+"; j <= "+sn+`; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  `+un+`) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * `+an+`;
        setOutput(val);
      }
    `},Ui=function(Mt,st,nn,rn,on){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=Mt,this.depth=Mt[3],this.depthRadius=st,this.bias=nn,this.alpha=rn,this.beta=on,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < `+this.depth+`; ++d) {
          int depthBegin = int(max(0.0, float(d - `+st+`)));
          int depthEnd = int(min(float(`+this.depth+`),
              float(d + `+st+` + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = `+this.depth+`;

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(`+rn+") * norm + float("+nn+`);

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(`+rn+`)
                * float(`+on+`)
                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * `+on+`);
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `},Vi=function(Mt,st,nn,rn,on){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;var an,sn=st,un=Mt[3]-1;this.outputShape=Mt;var Xr="float("+nn+") + float("+rn+") * sum";an=on===.5?"inversesqrt("+Xr+")":on===1?"1.0/("+Xr+")":"exp(log("+Xr+") * float(-"+on+"));",this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < `+this.outputShape[3]+`;
        bool hasNextRow = c < `+this.outputShape[2]+`;

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - `+sn+`;
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - `+sn+"; j <= "+sn+`; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(`+un+`));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * `+an+`;
        setOutput(result);
      }
    `},zi=function(Mt){this.variableNames=["dy","maxPos"],this.outputShape=Mt.inShape;var st=Mt.strideHeight,nn=Mt.strideWidth,rn=Mt.dilationHeight,on=Mt.effectiveFilterHeight,an=Mt.effectiveFilterWidth,sn=on-1-Mt.padInfo.top,un=an-1-Mt.padInfo.left,Xr=on*an-1;this.userCode=`
      const ivec2 pads = ivec2(`+sn+", "+un+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+on+`;
          wR += `+rn+`) {
          float dyR = float(dyRCorner + wR) / `+st+`.0;

          if (dyR < 0.0 || dyR >= `+Mt.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < `+an+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+nn+`.0;

            if (dyC < 0.0 || dyC >= `+Mt.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = `+Xr+` - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * `+an+` + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `},Gi=function(Mt){this.variableNames=["dy","maxPos"],this.outputShape=Mt.inShape;var st=Mt.strideDepth,nn=Mt.strideHeight,rn=Mt.strideWidth,on=Mt.dilationDepth,an=Mt.dilationHeight,sn=Mt.dilationWidth,un=Mt.effectiveFilterDepth,Xr=Mt.effectiveFilterHeight,to=Mt.effectiveFilterWidth,uo=un-1-Mt.padInfo.front,hn=Xr-1-Mt.padInfo.top,fn=to-1-Mt.padInfo.left,co=un*Xr*to-1;this.userCode=`
      const ivec3 pads = ivec3(`+uo+", "+hn+", "+fn+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < `+un+`;
           wD += `+on+`) {
          float dyD = float(dyDCorner + wD) / `+st+`.0;

          if (dyD < 0.0 || dyD >= `+Mt.outDepth+`.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < `+Xr+`;
              wR += `+an+`) {
            float dyR = float(dyRCorner + wR) / `+nn+`.0;

            if (dyR < 0.0 || dyR >= `+Mt.outHeight+`.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < `+to+`;
                wC += `+sn+`) {
              float dyC = float(dyCCorner + wC) / `+rn+`.0;

              if (dyC < 0.0 || dyC >= `+Mt.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = `+co+` -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * `+Xr+" * "+to+` +
                  wR * `+to+` + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `},Hi=function(Mt,st,nn,rn,on,an,sn){nn===void 0&&(nn=!1),rn===void 0&&(rn=!1),on===void 0&&(on=!1),an===void 0&&(an=null),sn===void 0&&(sn=!1),this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=st;var un=nn?Mt[1]:Mt[2],Xr=Math.ceil(un/2),to=nn?"i * 2, rc.y":"rc.y, i * 2",uo=rn?"rc.z, i * 2":"i * 2, rc.z",hn=nn?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],fn=rn?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],co="",lo="";an&&(co=sn?`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          `+an+`
        }`:`vec4 activation(vec4 x) {
          `+an+`
        }`,lo="result = activation(result);");var fo=on?"result += getBiasAtOutCoords();":"";on&&this.variableNames.push("bias"),sn&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+co+`

      const float sharedDimension = `+Xr+`.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        for (int i = 0; i < `+Xr+`; i++) {
          vec4 a = getMatrixA(rc.x, `+to+`);
          vec4 b = getMatrixB(rc.x, `+uo+`);

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (`+hn[0]+" * "+fn[0]+`);
          result += (`+hn[1]+" * "+fn[1]+`);
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        `+fo+`

        `+lo+`

        setOutput(result);
      }
    `},qi=function(){function Mt(st,nn,rn){this.variableNames=["probs"],this.outputShape=[st,rn],this.userCode=`
      uniform float seed;

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < `+(nn-1)+`; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(`+(nn-1)+`));
      }
    `}return Mt.prototype.getCustomSetupFunc=function(st){var nn=this;return function(rn,on){nn.seedLoc==null&&(nn.seedLoc=rn.getUniformLocation(on,"seed")),rn.gl.uniform1f(nn.seedLoc,st)}},Mt}(),Ki=function(Mt,st,nn,rn){this.variableNames=["indices"],this.outputShape=[Mt,st],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(`+rn+"), float("+nn+`),
                      float(index == coords.y)));
      }
    `},ji=function(Mt){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=Mt;var st=Mt.length;if(st===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{var nn=sa("rc",st),rn=wa(st),on=function(un,Xr,to){if(un===1)return"rc > "+Xr[0];for(var uo="",hn=un-2;hn<un;hn++)uo+=to[hn]+" >= "+Xr[hn],hn<un-1&&(uo+="||");return uo}(st,Mt,nn),an=function(un,Xr,to,uo){if(un===1)return"";var hn=uo.slice(-2);return`
    int r = `+hn[0]+`;
    int c = `+hn[1]+`;
    int rp1 = r + 1;
    int cp1 = c + 1;

    bool cEdge = cp1 >= `+Xr+`;
    bool rEdge = rp1 >= `+to+`;
  `}(st,Mt[Mt.length-1],Mt[Mt.length-2],nn),sn=function(un,Xr){var to=un.length,uo=function(hn,fn){for(var co=[],lo=0;lo<=1;lo++)for(var fo=0;fo<=1;fo++){for(var ho=(lo===0?"r":"rp1")+", "+(fo===0?"c":"cp1"),mo=2;mo<hn;mo++)ho=fn[fn.length-1-mo]+","+ho;co.push(ho)}return co}(to,Xr);return to===1?`getA(rc),
            rc + 1 >= `+un[0]+` ? 0. : getA(rc + 1),
            0, 0`:"getA("+uo[0]+`),
          cEdge ? 0. : getA(`+uo[1]+`),
          rEdge ? 0. : getA(`+uo[2]+`),
          rEdge || cEdge ? 0. : getA(`+uo[3]+")"}(Mt,nn);this.userCode=`
        void main() {
          `+rn+` rc = getOutputCoords();

          if(`+on+`) {
            setOutput(vec4(0));
          } else {
            `+an+`

            setOutput(vec4(`+sn+`));
          }
        }
      `}},Xi=function(Mt,st,nn){this.variableNames=["x"],this.outputShape=st.map(function(Xr,to){return Xr[0]+Mt[to]+Xr[1]});var rn=Mt.length,on=wa(rn),an=st.map(function(Xr){return Xr[0]}).join(","),sn=st.map(function(Xr,to){return Xr[0]+Mt[to]}).join(","),un=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,rn);this.userCode=rn!==1?`
      `+on+" start = "+on+"("+an+`);
      `+on+" end = "+on+"("+sn+`);

      void main() {
        `+on+` outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(float(`+nn+`));
        } else {
          `+on+` coords = outC - start;
          setOutput(getX(`+un+`));
        }
      }
    `:`
        int start = `+an+`;
        int end = `+sn+`;

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(float(`+nn+`));
          } else {
            setOutput(getX(outC - start));
          }
        }
      `},Yi=function(Mt,st,nn){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=st.map(function(ho,mo){return ho[0]+Mt[mo]+ho[1]});for(var rn=Mt.length,on=wa(rn),an=st.map(function(ho){return ho[0]}).join(","),sn=st.map(function(ho,mo){return ho[0]+Mt[mo]}).join(","),un=sa("rc",rn),Xr=sa("source",rn),to=un[rn-1]+" < "+this.outputShape[rn-1],uo=rn===1?"source":"vec2("+Xr.slice(-2).join()+")",hn=[on+" rc = outputLoc;",un[rn-1]+` += 1;
       if(`+to+`) {
      `,rn===1?"":`}
       rc = outputLoc;
       `+un[rn-2]+` += 1;
       if(`+un[rn-2]+" < "+this.outputShape[rn-2]+") {",rn===1?"":"  "+un[rn-1]+` += 1;
         if(`+to+") {"],fn=rn===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",co="",lo=0,fo=rn===1?2:4;lo<fo;lo++)co+=`
        `+hn[lo]+`
        if (`+fn+`) {
          result[`+lo+"] = float("+nn+`);
        } else {
          `+on+` source = rc - start;
          result[`+lo+"] = getChannel(getX("+Xr.join()+"), "+uo+`);
        }
      `;co+=rn===1?"} ":"}}",this.userCode=`
      const `+on+" start = "+on+"("+an+`);
      const `+on+" end = "+on+"("+sn+`);

      void main() {
        `+on+` outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        `+co+`
        setOutput(result);
      }
    `},$i=function(Mt,st,nn){if(this.variableNames=["x"],st==="avg"&&nn)throw new Error("Cannot compute positions for average pool.");var rn=Mt.filterWidth,on=Mt.strideHeight,an=Mt.strideWidth,sn=Mt.dilationHeight,un=Mt.dilationWidth,Xr=Mt.effectiveFilterHeight,to=Mt.effectiveFilterWidth,uo=Mt.padInfo.top,hn=Mt.padInfo.left;this.outputShape=Mt.outShape;var fn=st==="avg",co="0.0";if(fn||(co="-1.0 / 1e-20"),nn)this.userCode=`
        const ivec2 strides = ivec2(`+on+", "+an+`);
        const ivec2 pads = ivec2(`+uo+", "+hn+`);

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < `+Xr+`;
              wR += `+sn+`) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= `+Mt.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+to+`;
                wC += `+un+`) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= `+Mt.inWidth+`) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value >= currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = wR * `+to+` + wC;
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;else{var lo=st+"("+st+"("+st+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";st==="avg"&&(lo="avgValue / count");var fo=4*Math.floor(rn/4),ho=rn%4,mo=`
      if (`+fn+`) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = max(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(`+on+", "+an+`);
      const ivec2 pads = ivec2(`+uo+", "+hn+`);
      const float initializationValue = `+co+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= `+Mt.inWidth+`) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(`+co+`);
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < `+Xr+`;
            wR += `+sn+`) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= `+Mt.inHeight+`) {
            continue;
          }

          for (int wC = 0; wC < `+fo+`; wC += 4) {
            int xC = xCCorner + wC * `+un+`;

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+un+`, d),
              getValue(batch, xR, xC + 2 * `+un+`, d),
              getValue(batch, xR, xC + 3 * `+un+`, d)
            );

            `+mo+`
          }

          int xC = xCCorner + `+fo+`;
          if (`+(ho===1)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            `+mo+`
          } else if (`+(ho===2)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+un+`, d),
              initializationValue,
              initializationValue
            );

            `+mo+`
          } else if (`+(ho===3)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+un+`, d),
              getValue(batch, xR, xC + 2 * `+un+`, d),
              initializationValue
            );

            `+mo+`
          }
        }
        setOutput(`+lo+`);
      }
    `}},Qi=function(Mt,st,nn){if(this.variableNames=["x"],st==="avg"&&nn)throw new Error("Cannot compute positions for average pool.");var rn=Mt.filterWidth,on=Mt.strideDepth,an=Mt.strideHeight,sn=Mt.strideWidth,un=Mt.dilationDepth,Xr=Mt.dilationHeight,to=Mt.dilationWidth,uo=Mt.effectiveFilterDepth,hn=Mt.effectiveFilterHeight,fn=Mt.effectiveFilterWidth,co=Mt.padInfo.front,lo=Mt.padInfo.top,fo=Mt.padInfo.left;this.outputShape=Mt.outShape;var ho=st==="avg",mo="0.0";if(ho||(mo="-1.0 / 1e-20"),nn)this.userCode=`
        const ivec3 strides =
            ivec3(`+on+", "+an+", "+sn+`);
        const ivec3 pads = ivec3(`+co+", "+lo+", "+fo+`);

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < `+uo+`;
              wD += `+un+`) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= `+Mt.inDepth+`) {
              continue;
            }

            for (int wR = 0; wR < `+hn+`;
                wR += `+Xr+`) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= `+Mt.inHeight+`) {
                continue;
              }

              for (int wC = 0; wC < `+fn+`;
                  wC += `+to+`) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= `+Mt.inWidth+`) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value >= currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition =
                      wD * `+hn+" * "+fn+` +
                      wR * `+fn+` + wC;;
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;else{var Uo=st+"("+st+"("+st+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";st==="avg"&&(Uo="avgValue / count");var _d=4*Math.floor(rn/4),tp=rn%4,ep=`
      if (`+ho+`) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = max(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(`+on+", "+an+", "+sn+`);
      const ivec3 pads = ivec3(`+co+", "+lo+", "+fo+`);
      const float initializationValue = `+mo+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= `+Mt.inWidth+`) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(`+mo+`);
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < `+uo+`;
            wD += `+un+`) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= `+Mt.inDepth+`) {
            continue;
          }

          for (int wR = 0; wR < `+hn+`;
            wR += `+Xr+`) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= `+Mt.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+_d+`; wC += 4) {
              int xC = xCCorner + wC * `+to+`;

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+to+`, ch),
                getValue(batch, xD, xR, xC + 2 * `+to+`, ch),
                getValue(batch, xD, xR, xC + 3 * `+to+`, ch)
              );

              `+ep+`
            }

            int xC = xCCorner + `+_d+`;
            if (`+(tp===1)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              `+ep+`
            } else if (`+(tp===2)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+to+`, ch),
                initializationValue,
                initializationValue
              );

              `+ep+`
            } else if (`+(tp===3)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+to+`, ch),
                getValue(batch, xD, xR, xC + 2 * `+to+`, ch),
                initializationValue
              );

              `+ep+`
            }
          }
          setOutput(`+Uo+`);
        }
      }
    `}},Ji=function(Mt,st){this.variableNames=["x"];var nn=Mt.windowSize,rn=Mt.batchSize,on=Mt.inSize,an=Math.ceil(on/nn);this.outputShape=[rn,an];var sn="0.0",un="";st==="prod"?sn="1.0":st==="min"?(sn="1.0 / 1e-20",un="min"):st==="max"&&(sn="-1.0 / 1e-20",un="max");var Xr=st+"("+st+"("+st+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";st==="sum"?Xr="sumValue":st==="prod"?Xr="prodValue":st==="all"?Xr="allValue":st==="any"&&(Xr="anyValue");var to=4*Math.floor(nn/4),uo=nn%4,hn=`
      if (`+(st==="sum")+`) {
        sumValue += dot(values, ones);
      } else if (`+(st==="prod")+`) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = `+un+`(values, minMaxValue);
      }
    `,fn="vec4";st==="all"?(sn="1.0",hn=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,fn="bvec4"):st==="any"&&(sn="0.0",hn=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,fn="bvec4");var co="";on%nn>0&&(co=`
        if (inIdx < 0 || inIdx >= `+on+`) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = `+sn+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        `+co+`
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * `+nn+`;

        vec4 minMaxValue = vec4(`+sn+`);
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < `+to+`; i += 4) {
          int inIdx = inOffset + i;
          `+fn+" values = "+fn+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          `+hn+`
        }

        int inIdx = inOffset + `+to+`;
        if (`+(uo===1)+`) {
          `+fn+" values = "+fn+`(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          `+hn+`
        } else if (`+(uo===2)+`) {
          `+fn+" values = "+fn+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          `+hn+`
        } else if (`+(uo===3)+`) {
          `+fn+" values = "+fn+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          `+hn+`
        }
        setOutput(`+Xr+`);
      }
    `},Zi=function(Mt,st){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=Mt;for(var nn="",rn=0;rn<4;rn++){var on="thisRC = rc;";rn%2==1&&(on+="thisRC.z += 1;"),rn>1&&(on+="thisRC.y += 1;"),nn+=`
        `+on+`
        `+(rn>0?"if(thisRC.y < rows && thisRC.z < cols){":"")+`
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[`+rn+`] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        `+(rn>0?"}":"")+`
      `}this.userCode=`
      
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      `+ca(["r","c","d"],st)+`
      return ivec3(r, c, d);
    }
  
      `+la(Mt)+`

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = `+Mt[1]+`;
        int cols = `+Mt[2]+`;

        `+nn+`

        setOutput(result);
      }
    `},ts=function(Mt,st,nn){this.variableNames=["dy"],this.outputShape=[],this.outputShape=st.shape;var rn=st.shape,on=rn[1],an=rn[2],sn=Mt.shape,un=sn[1],Xr=sn[2],to=[nn&&un>1?on-1:on,nn&&Xr>1?an-1:an],uo=[nn&&un>1?un-1:un,nn&&Xr>1?Xr-1:Xr],hn=to[0]/uo[0],fn=to[1]/uo[1],co=1/hn,lo=1/fn,fo=2*Math.ceil(co)+2,ho=2*Math.ceil(lo)+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(`+hn+`);
        const float widthScale = float(`+fn+`);

        const float invHeightScale = float(`+co+`);
        const float invWidthScale = float(`+lo+`);

        const int winHeight = int(`+fo+`);
        const int winWidth = int(`+ho+`);

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= `+un+`) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= `+Xr+`) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), `+(on-1)+`.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), `+(an-1)+`.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `},es=function(Mt,st,nn,rn){this.variableNames=["A"],this.outputShape=[];var on=Mt[0],an=Mt[1],sn=Mt[2],un=Mt[3];this.outputShape=[on,st,nn,un];var Xr=[rn&&st>1?an-1:an,rn&&nn>1?sn-1:sn],to=[rn&&st>1?st-1:st,rn&&nn>1?nn-1:nn];this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          `+Xr[0]/to[0]+`,
          `+Xr[1]/to[1]+`);
      const vec2 inputShapeRC = vec2(`+an+".0, "+sn+`.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(sourceFracIndexRC);
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `},ns=function(Mt,st,nn,rn){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var on=Mt[0],an=Mt[1],sn=Mt[2],un=Mt[3];this.outputShape=[on,st,nn,un];var Xr=[rn&&st>1?an-1:an,rn&&nn>1?sn-1:sn],to=[rn&&st>1?st-1:st,rn&&nn>1?nn-1:nn];this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          `+Xr[0]/to[0]+`,
          `+Xr[1]/to[1]+`,
          `+Xr[1]/to[1]+`);
      const vec3 inputShapeRC = vec3(`+an+".0, "+sn+`.0,
                                     `+sn+`.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = vec3(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(sourceFracIndexRC);
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < `+(un-1)+`;
        bool hasNextRow = coords.z < `+(nn-1)+`;

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `},rs=function(Mt,st,nn){this.variableNames=["dy"],this.outputShape=[],this.outputShape=st.shape;var rn=st.shape,on=rn[1],an=rn[2],sn=Mt.shape,un=sn[1],Xr=sn[2],to=[nn&&un>1?on-1:on,nn&&Xr>1?an-1:an],uo=[nn&&un>1?un-1:un,nn&&Xr>1?Xr-1:Xr],hn=to[0]/uo[0],fn=to[1]/uo[1],co=1/hn,lo=1/fn,fo=2*Math.ceil(co)+2,ho=2*Math.ceil(lo)+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(`+hn+`);
        const float widthScale = float(`+fn+`);

        const float invHeightScale = float(`+co+`);
        const float invWidthScale = float(`+lo+`);

        const int winHeight = int(`+fo+`);
        const int winWidth = int(`+ho+`);

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= `+un+`) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= `+Xr+`) {
              continue;
            }

            float sourceFracRow =
              float(`+to[0]+`) *
                (float(dyR) / float(`+uo[0]+`));

            float sourceFracCol =
                float(`+to[1]+`) *
                  (float(dyC) / float(`+uo[1]+`));

            int sourceNearestRow = int(min(
                float(int(`+on+`) - 1),
                `+nn+` ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(`+an+`) - 1),
                `+nn+` ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `},os=function(Mt,st,nn,rn){this.variableNames=["A"],this.outputShape=[];var on=Mt[0],an=Mt[1],sn=Mt[2],un=Mt[3];this.outputShape=[on,st,nn,un];var Xr=[rn&&st>1?an-1:an,rn&&nn>1?sn-1:sn],to=[rn&&st>1?st-1:st,rn&&nn>1?nn-1:nn],uo=rn?"0.5":"0.0";this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          `+Xr[0]/to[0]+`,
          `+Xr[1]/to[1]+`);
      const vec2 inputShapeRC = vec2(`+an+".0, "+sn+`.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + `+uo+`)));

        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `},as=function(Mt,st){this.variableNames=["x"];var nn=Mt.length;if(nn>4)throw new Error("WebGL backend: Reverse of rank-"+nn+" tensor is not yet supported");if(this.outputShape=Mt,nn!==1){var rn=Mt.map(function(an,sn){return function(un){return st.indexOf(un)!==-1&&Mt[un]!==1?Mt[un]+" - coords["+un+"] - 1":"coords["+un+"]"}(sn)}).join(","),on=wa(nn);this.userCode=`
      void main() {
        `+on+` coords = getOutputCoords();
        setOutput(getX(`+rn+`));
      }
    `}else this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(`+Mt[0]+` - coord - 1));
        }
      `},is=function(Mt,st){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;var nn=Mt.length;if(nn>4)throw new Error("WebGL backend: Reverse of rank-"+nn+" tensor is not yet supported");this.outputShape=Mt;var rn=sa("rc",nn),on=rn[nn-1]+" + 1 < "+this.outputShape[nn-1],an=rn[nn-2]+" + 1 < "+this.outputShape[nn-2],sn=wa(nn);function un(Xr){var to=Mt.map(function(uo,hn){return function(fn,co){return st.indexOf(fn)!==-1&&Mt[fn]!==1?Mt[fn]+" - "+co[fn]+" - 1":""+co[fn]}(hn,Xr)});return"getChannel(getX("+to.join(",")+"), vec2("+to.slice(-2).join(",")+"))"}this.userCode=nn===1?`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(`+Mt[0]+` - rc - 1),
            `+Mt[0]+` - rc - 1);
          if(`+on+`){
              result.g = getChannel(getX(`+Mt[0]+` - (rc  + 1) - 1),
                `+Mt[0]+` - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:`
        void main() {
          `+sn+` rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = `+function(Xr){return un(Xr)}(rn.slice())+`;
          if(`+on+`){
            result.g = `+function(Xr){return Xr[nn-1]="("+Xr[nn-1]+" + 1)",un(Xr)}(rn.slice())+`;
          }
          if(`+an+`) {
            result.b = `+function(Xr){return Xr[nn-2]="("+Xr[nn-2]+" + 1)",un(Xr)}(rn.slice())+`;
            if(`+on+`) {
              result.a = `+function(Xr){return Xr[nn-1]="("+Xr[nn-1]+" + 1)",Xr[nn-2]="("+Xr[nn-2]+" + 1)",un(Xr)}(rn.slice())+`;
            }
          }
          setOutput(result);
        }
    `},ss=function(Mt,st,nn,rn,on,an,sn){this.variableNames=["updates","indices","defaultValue"],this.outputShape=an;var un=wa(on.length),Xr=wa(an.length),to="";nn===1?to="i":nn===2&&(to="i, j");var uo="getIndices("+to+")",hn="";rn===1?hn="i":rn===2&&(hn="i, coords[1]");var fn="getUpdates("+hn+")",co=st>1?"strides[j]":"strides";this.userCode=`
        `+un+" strides = "+un+"("+on+`);

        void main() {
          `+Xr+` coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < `+Mt+`; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < `+st+`; j++) {
              int index = round(`+uo+`);
              flattenedIndex += index * `+co+`;
            }
            if (flattenedIndex == coords[0]) {
              sum += `+fn+`;
              found = true;
            }
          }
          setOutput(mix(getDefaultValue(), sum, float(found)));
        }
      `},us=function(Mt,st){this.variableNames=["x","segmentIds"];var nn=Mt.windowSize,rn=Mt.batchSize,on=Mt.inSize,an=Mt.numSegments,sn=an*Math.ceil(on/nn);this.outputShape=[rn,sn];var un=4*Math.floor(nn/4),Xr=nn%4,to=`
        sumValue += dot(values, segFilter);
    `,uo="";on%nn>0&&(uo=`
        if (inIdx < 0 || inIdx >= `+on+`) {
          return initializationValue;
        }
      `);var hn="";on%nn>0&&(hn=`
        if (inIdx < 0 || inIdx >= `+on+`) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = 0.0;

      float getValue(int batch, int inIdx) {
        `+uo+`
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        `+hn+`
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          `+an+")) * float("+nn+`));
        int currentSeg = int(mod(float(outIdx), float(`+an+`)));

        float sumValue = 0.0;

        for (int i = 0; i < `+un+`; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          `+to+`
        }

        int inIdx = inOffset + `+un+`;
        if (`+(Xr===1)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          `+to+`
        } else if (`+(Xr===2)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          `+to+`
        } else if (`+(Xr===3)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          `+to+`
        }
        setOutput(sumValue);
      }
    `},cs=function(Mt,st,nn){var rn,on;if(this.variableNames=["c","a","b"],this.outputShape=st,nn>4)throw Error("Where for rank "+nn+" is not yet supported");if(nn===1)on="resRC",rn="resRC";else{for(var an=["resRC.x","resRC.y","resRC.z","resRC.w"],sn=[],un=[],Xr=0;Xr<st.length;Xr++)un.push(""+an[Xr]),Xr<Mt&&sn.push(""+an[Xr]);rn=sn.join(),on=un.join()}var to=wa(nn);this.userCode=`
      void main() {
        `+to+` resRC = getOutputCoords();
        float cVal = getC(`+rn+`);
        if (cVal >= 1.0) {
          setOutput(getA(`+on+`));
        } else {
          setOutput(getB(`+on+`));
        }
      }
    `},ls=function(){function Mt(st){this.variableNames=["source"],this.outputShape=st,this.rank=st.length;var nn,rn=wa(this.rank),on="uniform int start["+this.rank+"];",an=function(sn){if(sn===1)return"sourceLoc";if(sn<=6)return hs.slice(0,sn).map(function(un){return"sourceLoc."+un}).join(",");throw Error("Slicing for rank "+sn+" is not yet supported")}(this.rank);nn=`
        `+rn+` sourceLoc;
        `+rn+` coords = getOutputCoords();
        `+st.map(function(sn,un){return"sourceLoc."+hs[un]+" = start["+un+"] + coords."+hs[un]+";"}).join(`
`)+`
      `,this.userCode=`
      `+on+`
      void main() {
        `+nn+`
        setOutput(getSource(`+an+`));
      }
    `}return Mt.prototype.getCustomSetupFunc=function(st){var nn=this;if(st.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+st.length+")");return function(rn,on){nn.startLoc==null&&(nn.startLoc=rn.getUniformLocationNoThrow(on,"start"),nn.startLoc==null)||rn.gl.uniform1iv(nn.startLoc,st)}},Mt}(),hs=["x","y","z","w","u","v"],fs=function(){function Mt(st){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=st,this.rank=st.length;var nn=wa(this.rank),rn=sa("coords",this.rank),on=sa("sourceLoc",this.rank),an=this.rank===1?"sourceLoc":"vec2("+on.slice(-2).join()+")",sn="getChannel(getSource("+on.join()+"), "+an+")",un=`
      result.x = `+sn+`;
      if (++`+rn[this.rank-1]+" < "+st[this.rank-1]+`) {
        ++`+on[this.rank-1]+`;
        result.y = `+sn+`;
        --`+on[this.rank-1]+`;
      }
    `,Xr=this.rank===1?"":`
      --`+rn[this.rank-1]+`;
      if (++`+rn[this.rank-2]+" < "+st[this.rank-2]+`) {
        ++`+on[this.rank-2]+`;
        result.z = `+sn+`;
        if (++`+rn[this.rank-1]+" < "+st[this.rank-1]+`) {
          ++`+on[this.rank-1]+`;
          result.w = `+sn+`;
        }
      }
    `,to=this.rank<=4?`sourceLoc = coords +
            `+nn+"("+st.map(function(uo,hn){return"start["+hn+"]"}).join()+");":st.map(function(uo,hn){return on[hn]+" = "+rn[hn]+" + start["+hn+"];"}).join(`
`);this.userCode=`
      uniform int start[`+this.rank+`];
      void main() {
        `+nn+` coords = getOutputCoords();
        `+nn+` sourceLoc;
        `+to+`
        vec4 result = vec4(0.);
        `+un+`
        `+Xr+`
        setOutput(result);
      }
    `}return Mt.prototype.getCustomSetupFunc=function(st){var nn=this;if(st.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+st.length+")");return function(rn,on){nn.startLoc==null&&(nn.startLoc=rn.getUniformLocationNoThrow(on,"start"),nn.startLoc==null)||rn.gl.uniform1iv(nn.startLoc,st)}},Mt}(),ds=function(Mt,st,nn){this.variableNames=["x"],this.outputShape=nn;var rn=nn.length,on=wa(nn.length),an=wa(nn.length),sn="";if(rn===1)sn="coords * strides + begin";else{var un=0;sn=nn.map(function(Xr,to){return un++,nn.length===1?"coords * strides["+to+"] + begin["+to+"]":"coords["+(un-1)+"] * strides["+to+"] + begin["+to+"]"}).join(",")}this.userCode=`
      `+on+" begin = "+on+"("+Mt+`);
      `+on+" strides = "+on+"("+st+`);

      void main() {
        `+an+` coords = getOutputCoords();
        setOutput(getX(`+sn+`));
      }
    `},ps=function(){function Mt(st){this.gpgpu=st,this.numUsedTextures=0,this.numFreeTextures=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}return Mt.prototype.acquireTexture=function(st,nn,rn){var on,an=vs(nn,rn),sn=ms(st,an,rn);if(sn in this.freeTextures||(this.freeTextures[sn]=[]),sn in this.usedTextures||(this.usedTextures[sn]=[]),this.freeTextures[sn].length>0){this.numFreeTextures--,this.numUsedTextures++,this.log();var un=this.freeTextures[sn].shift();return this.usedTextures[sn].push(un),un}return this.numUsedTextures++,this.log(),an===Gt.PACKED_2X2_FLOAT32?on=this.gpgpu.createPackedMatrixTexture(st[0],st[1]):an===Gt.PACKED_2X2_FLOAT16?on=this.gpgpu.createFloat16PackedMatrixTexture(st[0],st[1]):an===Gt.UNPACKED_FLOAT32?on=this.gpgpu.createFloat32MatrixTexture(st[0],st[1]):an===Gt.UNPACKED_FLOAT16?on=this.gpgpu.createFloat16MatrixTexture(st[0],st[1]):an===Gt.PACKED_4X1_UNSIGNED_BYTE&&(on=this.gpgpu.createUnsignedBytesMatrixTexture(st[0],st[1])),this.usedTextures[sn].push(on),on},Mt.prototype.releaseTexture=function(st,nn,rn,on){if(this.freeTextures!=null){var an=ms(nn,vs(rn,on),on);an in this.freeTextures||(this.freeTextures[an]=[]),this.freeTextures[an].push(st),this.numFreeTextures++,this.numUsedTextures--;var sn=this.usedTextures[an],un=sn.indexOf(st);if(un<0)throw new Error("Cannot release a texture that was never provided by this texture manager");sn.splice(un,1),this.log()}},Mt.prototype.log=function(){if(this.logEnabled){var st=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",this.numFreeTextures+" / "+this.numUsedTextures,"("+st+")")}},Mt.prototype.getNumUsedTextures=function(){return this.numUsedTextures},Mt.prototype.getNumFreeTextures=function(){return this.numFreeTextures},Mt.prototype.dispose=function(){var st=this;if(this.freeTextures!=null){for(var nn in this.freeTextures)this.freeTextures[nn].forEach(function(rn){st.gpgpu.deleteMatrixTexture(rn)});for(var nn in this.usedTextures)this.usedTextures[nn].forEach(function(on){st.gpgpu.deleteMatrixTexture(on)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0}},Mt}();function vs(Mt,st){if(Mt===zt.UPLOAD)return Gt.PACKED_2X2_FLOAT32;if(Mt===zt.RENDER||Mt==null)return function(nn){return i().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?nn?Gt.PACKED_2X2_FLOAT32:Gt.UNPACKED_FLOAT32:nn?Gt.PACKED_2X2_FLOAT16:Gt.UNPACKED_FLOAT16}(st);if(Mt===zt.DOWNLOAD||Mt===zt.PIXELS)return Gt.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type "+Mt)}function ms(Mt,st,nn){return Mt[0]+"_"+Mt[1]+"_"+st+"_"+nn}var gs=function(Mt,st){this.variableNames=["A"];for(var nn=new Array(Mt.length),rn=0;rn<nn.length;rn++)nn[rn]=Mt[rn]*st[rn];this.outputShape=nn,this.rank=nn.length;var on=wa(this.rank),an=function(sn){var un=sn.length;if(un>5)throw Error("Tile for rank "+un+" is not yet supported");if(un===1)return"imod(resRC, "+sn[0]+")";for(var Xr=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],to=[],uo=0;uo<sn.length;uo++)to.push("imod("+Xr[uo]+", "+sn[uo]+")");return to.join()}(Mt);this.userCode=`
      void main() {
        `+on+` resRC = getOutputCoords();
        setOutput(getA(`+an+`));
      }
    `},ys=function(Mt,st){this.variableNames=["A"];for(var nn=new Array(Mt.length),rn=0;rn<nn.length;rn++)nn[rn]=Mt[st[rn]];this.outputShape=nn,this.rank=nn.length;var on=wa(this.rank),an=function(sn){var un=sn.length;if(un>6)throw Error("Transpose for rank "+un+" is not yet supported");for(var Xr=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],to=new Array(un),uo=0;uo<sn.length;uo++)to[sn[uo]]=Xr[uo];return to.join()}(st);this.userCode=`
    void main() {
      `+on+` resRC = getOutputCoords();
      setOutput(getA(`+an+`));
    }
    `},xs=function(Mt,st){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;for(var nn=new Array(Mt.length),rn=0;rn<nn.length;rn++)nn[rn]=Mt[st[rn]];if(this.outputShape=nn,this.rank=nn.length,this.rank>6)throw Error("Packed transpose for rank "+this.rank+" is not yet supported.");var on=wa(this.rank),an=ia("rc",this.rank),sn=new Array(this.rank);for(rn=0;rn<st.length;rn++)sn[st[rn]]=an[rn];var un="vec2("+sn.slice(-2).join()+")",Xr="++"+an[this.rank-1]+" < "+nn[this.rank-1],to="getChannel(getA("+sn.join()+"), "+un+")";this.userCode=`
    void main() {
      `+on+` rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = `+to+`;
      if(`+Xr+`) {
        result[1] = `+to+`;
      }
      --`+an[this.rank-1]+`;
      if(++`+an[this.rank-2]+" < "+nn[this.rank-2]+`) {
        result[2] = `+to+`;
        if(`+Xr+`) {
          result[3] = `+to+`;
        }
      }
      setOutput(result);
    }
    `},bs=1.7580993408473768,ws=1.0507009873554805,Cs=function(Mt,st){this.variableNames=["A"],this.outputShape=Mt,this.userCode=`
      float unaryOperation(float x) {
        `+st+`
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `},Es="if (isnan(x)) return x;",Rs="return x;",Is="return abs(x);",ks=Es+`
  return (x < 0.0) ? 0.0 : x;
`,Ss=Es+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,As="return (x >= 0.0) ? x : (exp(x) - 1.0);",Ds=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = `+bs+`;
  float scale = `+ws+`;
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,Ts="return -x;",Ns="return ceil(x);",Fs="return floor(x);",_s="return exp(x);",Os="return exp(x) - 1.0;",Ms=Es+`
  return sin(x);
`,Bs=Es+`
  return cos(x);
`,Ps=Es+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,Ls=Es+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,Ws=Es+`
  return atan(x);
`,Us=Es+"return log(x + sqrt(x * x + 1.0));",Vs=Es+`
  if (x < 1.0) return NAN;
  return log(x + sqrt(x * x - 1.0));`,zs=Es+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
  return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,Gs="return x;",Hs="return x;",qs=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,Ks=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,js=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,Xs=function(Mt,st){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=Mt,this.userCode=`
      vec4 unaryOperation(vec4 x) {
        `+st+`
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `},Ys=function(Mt){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=Mt;var st=Mt.length,nn=sa("rc",st),rn=wa(st),on=function(un,Xr){if(un===1)return"rc";for(var to="",uo=0;uo<un;uo++)to+=Xr[uo],uo<un-1&&(to+=",");return to}(st,nn),an=nn.slice(-2),sn=st<=1?"rc":"vec2("+an.join(",")+")";this.userCode=`
      void main() {
        `+rn+` rc = getOutputCoords();
        vec4 packedInput = getA(`+on+`);

        setOutput(getChannel(packedInput, `+sn+`));
      }
    `},$s={};function Qs(Mt,st){if(st===void 0&&(st=!1),Mt==="linear")return st?Hs:Rs;if(Mt==="relu")return st?qs:ks;if(Mt==="elu")return st?js:As;if(Mt==="relu6")return st?Ks:Ss;if(Mt==="prelu")return st?Pa:Ma;throw new Error("Activation "+Mt+" has not been implemented for the WebGL backend.")}var Js=600,Zs=function(Mt){function st(nn){var rn,on=Mt.call(this)||this;if(on.pendingRead=new WeakMap,on.pendingDisposal=new WeakSet,on.dataRefCount=new WeakMap,on.numBytesInGPU=0,on.uploadWaitMs=0,on.downloadWaitMs=0,on.warnedAboutMemory=!1,on.pendingDeletes=0,on.disposed=!1,!i().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");if(nn==null){var an=jt(i().getNumber("WEBGL_VERSION"));on.binaryCache=((rn=i().getNumber("WEBGL_VERSION"))in $s||($s[rn]={}),$s[rn]),on.gpgpu=new Bi(an),on.canvas=an.canvas,on.gpgpuCreatedLocally=!0}else on.gpgpu=nn,on.binaryCache={},on.gpgpuCreatedLocally=!1,on.canvas=nn.gl.canvas;return on.textureManager=new ps(on.gpgpu),on.numMBBeforeWarning=i().global.screen==null?1024:i().global.screen.height*i().global.screen.width*window.devicePixelRatio*Js/1024/1024,on.texData=new xo(on,Lt),on}return e$1(st,Mt),st.prototype.numDataIds=function(){return this.texData.numDataIds()+(this.cpuBackend?this.cpuBackend.numDataIds():0)-this.pendingDeletes},st.prototype.write=function(nn,rn,on){if(i().getBool("DEBUG")&&this.checkNumericalProblems(nn),on==="complex64"&&nn!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");var an={};return this.texData.set(an,{shape:rn,dtype:on,values:nn,usage:zt.UPLOAD}),an},st.prototype.move=function(nn,rn,on,an){if(i().getBool("DEBUG")&&this.checkNumericalProblems(rn),an==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(nn,{shape:on,dtype:an,values:rn,usage:zt.UPLOAD})},st.prototype.readSync=function(nn){var rn=this.texData.get(nn),on=rn.values,an=rn.dtype,sn=rn.complexTensors,un=rn.slice,Xr=rn.shape,to=rn.isPacked;if(un!=null){var uo=void 0;uo=to?new Xs(Xr,Gs):new Cs(Xr,Gs);var hn=this.runWebGLProgram(uo,[{dataId:nn,shape:Xr,dtype:an}],an),fn=this.readSync(hn.dataId);return this.disposeData(hn.dataId),fn}if(on!=null)return this.convertAndCacheOnCPU(nn);if(an==="string")return on;var co,lo,fo=this.activeTimers!=null;return fo&&(co=et()),an==="complex64"?lo=Vo(sn.real.dataSync(),sn.imag.dataSync()):lo=this.getValuesFromTexture(nn),fo&&(this.downloadWaitMs+=et()-co),this.convertAndCacheOnCPU(nn,lo)},st.prototype.read=function(nn){return n$1(this,void 0,void 0,function(){var rn,on,an,sn,un,Xr,to,uo,hn,fn,co,lo,fo,ho,mo,Uo,_d,tp,ep,np,rp,ip;return r(this,function(op){switch(op.label){case 0:if(this.pendingRead.has(nn))return rn=this.pendingRead.get(nn),[2,new Promise(function(ap){return rn.push(ap)})];if(on=this.texData.get(nn),an=on.values,sn=on.shape,un=on.slice,Xr=on.dtype,to=on.complexTensors,uo=on.isPacked,un!=null)return hn=void 0,hn=uo?new Xs(sn,Gs):new Cs(sn,Gs),fn=this.runWebGLProgram(hn,[{dataId:nn,shape:sn,dtype:Xr}],Xr),co=this.read(fn.dataId),this.disposeData(fn.dataId),[2,co];if(an!=null)return[2,this.convertAndCacheOnCPU(nn)];if(!i().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&i().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");return lo=null,Xr!=="complex64"&&i().get("WEBGL_BUFFER_SUPPORTED")&&(fo=this.decode(nn),ho=this.texData.get(fo.dataId),lo=(ip=this.gpgpu).createBufferFromTexture.apply(ip,[ho.texture].concat(Yt(sn)))),this.pendingRead.set(nn,[]),Xr==="complex64"?[3,2]:[4,this.gpgpu.createAndWaitForFence()];case 1:op.sent(),op.label=2;case 2:return Xr!=="complex64"?[3,4]:[4,Promise.all([to.real.data(),to.imag.data()])];case 3:return Uo=op.sent(),_d=Uo[0],tp=Uo[1],mo=Vo(_d,tp),[3,5];case 4:lo==null?mo=this.getValuesFromTexture(nn):(ep=k$2(sn),mo=this.gpgpu.downloadFloat32MatrixFromBuffer(lo,ep)),op.label=5;case 5:return fo!=null&&this.disposeData(fo.dataId),np=this.convertAndCacheOnCPU(nn,mo),rp=this.pendingRead.get(nn),this.pendingRead.delete(nn),rp.forEach(function(ap){return ap(np)}),this.pendingDisposal.has(nn)&&(this.pendingDisposal.delete(nn),this.disposeData(nn),this.pendingDeletes--),[2,np]}})})},st.prototype.checkNumericalProblems=function(nn){if(nn!=null)for(var rn=0;rn<nn.length;rn++){var on=nn[rn];if(!ee(on))throw i().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error("The value "+on+" cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'"):Error("The value "+on+" cannot be represented on this device.")}},st.prototype.getValuesFromTexture=function(nn){var rn,on=this.texData.get(nn),an=on.shape,sn=on.dtype,un=on.isPacked,Xr=k$2(an);if(i().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){var to=this.decode(nn),uo=this.texData.get(to.dataId),hn=(rn=this.gpgpu).downloadMatrixFromPackedTexture.apply(rn,[uo.texture].concat(Yt(an))).subarray(0,Xr);return this.disposeData(to.dataId),hn}var fn=i().getBool("WEBGL_PACK")&&un===!0,co=fn?Te(an):an,lo=fn?new ci(co):new ui(co),fo=this.runWebGLProgram(lo,[{shape:co,dtype:sn,dataId:nn}],"float32"),ho=this.texData.get(fo.dataId),mo=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(ho.texture,ho.texShape[0],ho.texShape[1]).subarray(0,Xr);return this.disposeData(fo.dataId),mo},st.prototype.time=function(nn){return n$1(this,void 0,void 0,function(){var rn,on,an,sn,un,Xr,to;return r(this,function(uo){switch(uo.label){case 0:return rn=this.activeTimers,on=[],an=!1,this.programTimersStack==null?(this.programTimersStack=on,an=!0):this.activeTimers.push(on),this.activeTimers=on,nn(),sn=I(this.activeTimers.map(function(hn){return hn.query})).filter(function(hn){return hn!=null}),un=I(this.activeTimers.map(function(hn){return hn.name})).filter(function(hn){return hn!=null}),this.activeTimers=rn,an&&(this.programTimersStack=null),Xr={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null},i().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[4,Promise.all(sn)]:[3,2];case 1:return to=uo.sent(),Xr.kernelMs=w(to),Xr.getExtraProfileInfo=function(){return to.map(function(hn,fn){return{name:un[fn],ms:hn}}).map(function(hn){return hn.name+": "+hn.ms}).join(", ")},[3,3];case 2:Xr.kernelMs={error:"WebGL query timers are not supported in this environment."},uo.label=3;case 3:return this.uploadWaitMs=0,this.downloadWaitMs=0,[2,Xr]}})})},st.prototype.memory=function(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU}},st.prototype.startTimer=function(){return i().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:et(),endMs:null}},st.prototype.endTimer=function(nn){return i().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),nn):(nn.endMs=et(),nn)},st.prototype.getQueryTime=function(nn){return n$1(this,void 0,void 0,function(){var rn;return r(this,function(on){return i().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[2,this.gpgpu.waitForQueryAndGetTime(nn)]:[2,(rn=nn).endMs-rn.startMs]})})},st.prototype.disposeData=function(nn){if(!this.pendingDisposal.has(nn)){if(this.pendingRead.has(nn))return this.pendingDisposal.add(nn),void this.pendingDeletes++;if(this.texData.has(nn)){this.releaseGPUData(nn);var rn=this.texData.get(nn).complexTensors;rn!=null&&(rn.real.dispose(),rn.imag.dispose()),this.texData.delete(nn)}}},st.prototype.releaseGPUData=function(nn){var rn=this.texData.get(nn),on=rn.texture,an=rn.dtype,sn=rn.texShape,un=rn.usage,Xr=rn.isPacked,to=rn.slice,uo=to&&to.origDataId||nn,hn=this.dataRefCount.get(uo);hn>1?this.dataRefCount.set(uo,hn-1):(this.dataRefCount.delete(uo),on!=null&&(this.numBytesInGPU-=this.computeBytes(sn,an),this.textureManager.releaseTexture(on,sn,un,Xr)));var fn=this.texData.get(nn);fn.texture=null,fn.texShape=null,fn.isPacked=!1,fn.slice=null},st.prototype.getTexture=function(nn){return this.uploadToGPU(nn),this.texData.get(nn).texture},st.prototype.getDataInfo=function(nn){return this.texData.get(nn)},st.prototype.getCPUBackend=function(){return i().getBool("WEBGL_CPU_FORWARD")?(this.cpuBackend==null&&(this.cpuBackend=Lt.findBackend("cpu")),this.cpuBackend):null},st.prototype.shouldExecuteOnCPU=function(nn,rn){var on=this;return rn===void 0&&(rn=128),this.getCPUBackend()!=null&&nn.every(function(an){return on.texData.get(an.dataId).texture==null&&an.size<rn})},st.prototype.getGPGPUContext=function(){return this.gpgpu},st.prototype.complex=function(nn,rn){var on=this.makeOutput(nn.shape,"complex64");return this.texData.get(on.dataId).complexTensors={real:Lt.keep(nn.clone()),imag:Lt.keep(rn.clone())},on},st.prototype.real=function(nn){return this.texData.get(nn.dataId).complexTensors.real.clone()},st.prototype.imag=function(nn){return this.texData.get(nn.dataId).complexTensors.imag.clone()},st.prototype.slice=function(nn,rn,on){if(this.shouldExecuteOnCPU([nn]))return this.cpuBackend.slice(nn,rn,on);if(k$2(on)===0)return Fn([],on,nn.dtype);var an=this.texData.get(nn.dataId).isPacked,sn=io(nn.shape,rn,on);if(an||!sn){var un=i().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new fs(on):new ls(on),Xr=un.getCustomSetupFunc(rn);return this.compileAndRun(un,[nn],null,Xr)}return this.uploadToGPU(nn.dataId),this.shallowSlice(nn,rn,on)},st.prototype.shallowSlice=function(nn,rn,on){var an=this.texData.get(nn.dataId),sn=this.makeOutput(on,nn.dtype),un=this.texData.get(sn.dataId);Object.assign(un,an),un.shape=on,un.dtype=nn.dtype;var Xr=so(rn,nn.strides);an.slice&&(Xr+=an.slice.flatOffset),un.slice={flatOffset:Xr,origDataId:an.slice&&an.slice.origDataId||nn.dataId};var to=this.dataRefCount.get(un.slice.origDataId)||1;return this.dataRefCount.set(un.slice.origDataId,to+1),sn},st.prototype.stridedSlice=function(nn,rn,on,an){if(this.shouldExecuteOnCPU([nn]))return this.cpuBackend.stridedSlice(nn,rn,on,an);var sn=ro(rn,on,an);if(sn.some(function(Xr){return Xr===0}))return Fn([],sn);var un=new ds(rn,an,sn);return this.compileAndRun(un,[nn])},st.prototype.reverse=function(nn,rn){var on=i().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new is(nn.shape,rn):new as(nn.shape,rn);return this.compileAndRun(on,[nn])},st.prototype.concat=function(nn,rn){if(nn[0].dtype==="complex64"){var on=nn.map(function(co){return Tn(co)}),an=nn.map(function(co){return Nn(co)});return Dn(this.concat(on,rn),this.concat(an,rn))}if(this.shouldExecuteOnCPU(nn))return this.cpuBackend.concat(nn,rn);if(nn.length===1)return nn[0];if(nn.length>i().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){var sn=Math.floor(nn.length/2),un=this.concat(nn.slice(0,sn),rn),Xr=this.concat(nn.slice(sn),rn);return this.concat([un,Xr],rn)}if(i().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&nn[0].rank>1){var to=new Ga(nn.map(function(co){return co.shape}),rn);return this.compileAndRun(to,nn)}var uo=Sn(nn.map(function(co){return co.shape}),rn),hn=nn.map(function(co){return co.as2D(-1,k$2(co.shape.slice(rn)))}),fn=new za(hn.map(function(co){return co.shape}));return this.compileAndRun(fn,hn).reshape(uo)},st.prototype.neg=function(nn){if(this.shouldExecuteOnCPU([nn]))return this.cpuBackend.neg(nn);if(i().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(nn,Ts,nn.dtype);var rn=new Cs(nn.shape,Ts);return this.compileAndRun(rn,[nn])},st.prototype.batchMatMul=function(nn,rn,on,an){var sn=on?nn.shape[2]:nn.shape[1],un=an?rn.shape[1]:rn.shape[2],Xr=on?nn.shape[1]:nn.shape[2],to=nn.shape[0];if((sn===1||un===1)&&Xr>1e3){on&&(nn=nn.transpose([0,2,1])),an&&(rn=rn.transpose([0,2,1]));var uo=un===1?nn:nn.as3D(to,Xr,1),hn=un===1?2:1,fn=un===1?rn.as3D(to,1,Xr):rn;return this.multiply(uo,fn).sum(hn,!0)}var co=Dt(nn.dtype,rn.dtype),lo=new Hi(nn.shape,[to,sn,un],on,an);return this.compileAndRun(lo,[nn,rn],co)},st.prototype.fusedBatchMatMul=function(nn){var rn=nn.a,on=nn.b,an=nn.transposeA,sn=nn.transposeB,un=nn.bias,Xr=nn.activation,to=nn.preluActivationWeights,uo=an?rn.shape[2]:rn.shape[1],hn=sn?on.shape[1]:on.shape[2],fn=rn.shape[0],co=Dt(rn.dtype,on.dtype),lo=un!=null,fo=to!=null,ho=Xr?Qs(Xr,!0):null,mo=new Hi(rn.shape,[fn,uo,hn],an,sn,lo,ho,fo),Uo=[rn,on];return un&&Uo.push(un),to&&Uo.push(to),this.compileAndRun(mo,Uo,co)},st.prototype.multiply=function(nn,rn){if(nn.dtype==="complex64"){var on=this.texData.get(nn.dataId),an=this.texData.get(rn.dataId),sn=new Na(Da,nn.shape,rn.shape),un=new Na(Ta,nn.shape,rn.shape),Xr=[this.makeComplexComponentTensorInfo(nn,on.complexTensors.real),this.makeComplexComponentTensorInfo(nn,on.complexTensors.imag),this.makeComplexComponentTensorInfo(rn,an.complexTensors.real),this.makeComplexComponentTensorInfo(rn,an.complexTensors.imag)],to=this.compileAndRun(sn,Xr),uo=this.compileAndRun(un,Xr),hn=this.complex(to,uo);return to.dispose(),uo.dispose(),hn}if(this.shouldExecuteOnCPU([nn,rn]))return this.cpuBackend.multiply(nn,rn);if(i().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(nn,rn,Oa,nn.dtype);var fn=new Ba(Oa,nn.shape,rn.shape);return this.compileAndRun(fn,[nn,rn],nn.dtype)},st.prototype.batchNormalization=function(nn,rn,on,an,sn,un){var Xr=[nn,rn,on],to=null;un!=null&&(to=un.shape,Xr.push(un));var uo=null;if(sn!=null&&(uo=sn.shape,Xr.push(sn)),i().getBool("WEBGL_PACK_NORMALIZATION")){var hn=new Aa(nn.shape,rn.shape,on.shape,to,uo,an);return this.compileAndRun(hn,Xr)}var fn=new Sa(nn.shape,rn.shape,on.shape,to,uo,an);return this.compileAndRun(fn,Xr)},st.prototype.localResponseNormalization4D=function(nn,rn,on,an,sn){var un=i().getBool("WEBGL_PACK_NORMALIZATION")?new Vi(nn.shape,rn,on,an,sn):new Wi(nn.shape,rn,on,an,sn);return this.compileAndRun(un,[nn])},st.prototype.LRNGrad=function(nn,rn,on,an,sn,un,Xr){var to=new Ui(rn.shape,an,sn,un,Xr);return this.compileAndRun(to,[rn,on,nn])},st.prototype.tile=function(nn,rn){if(nn.dtype==="string"){var on=this.readSync(nn.dataId).map(function(sn){return ot(sn)});return ta(dr(nn.shape,nn.dtype,on),rn)}var an=new gs(nn.shape,rn);return this.compileAndRun(an,[nn])},st.prototype.pad=function(nn,rn,on){var an=i().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Yi(nn.shape,rn,on):new Xi(nn.shape,rn,on);return this.compileAndRun(an,[nn])},st.prototype.transpose=function(nn,rn){if(this.shouldExecuteOnCPU([nn]))return this.cpuBackend.transpose(nn,rn);var on=i().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new xs(nn.shape,rn):new ys(nn.shape,rn);return this.compileAndRun(on,[nn])},st.prototype.gather=function(nn,rn,on){if(this.shouldExecuteOnCPU([nn,rn]))return this.cpuBackend.gather(nn,rn,on);var an=new mi(nn.shape,rn.size,on);return this.compileAndRun(an,[nn,rn])},st.prototype.batchToSpaceND=function(nn,rn,on){C(nn.rank<=4,function(){return"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"});var an=rn.reduce(function(hn,fn){return hn*fn}),sn=zr(nn.shape,rn,an),un=Gr(sn.length,rn.length),Xr=Hr(nn.shape,rn,an),to=qr(on,rn.length),uo=Kr(Xr,on,rn.length);return nn.reshape(sn).transpose(un).reshape(Xr).slice(to,uo)},st.prototype.spaceToBatchND=function(nn,rn,on){C(nn.rank<=4,function(){return"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"});var an=rn.reduce(function(fn,co){return fn*co}),sn=[[0,0]];sn.push.apply(sn,on);for(var un=1+rn.length;un<nn.shape.length;++un)sn.push([0,0]);var Xr=nn.pad(sn),to=zr(Xr.shape,rn,an,!1),uo=Gr(to.length,rn.length,!1),hn=Hr(Xr.shape,rn,an,!1);return Xr.reshape(to).transpose(uo).reshape(hn)},st.prototype.reduce=function(nn,rn,on){var an=nn.shape[0],sn=nn.shape[1],un=$r(sn),Xr=new Ji({windowSize:un,inSize:sn,batchSize:an},rn),to=this.compileAndRun(Xr,[nn],on);return to.shape[1]===1?to:this.reduce(to,rn,on)},st.prototype.argReduce=function(nn,rn,on){on===void 0&&(on=null);var an=nn.shape[0],sn=nn.shape[1];on!=null&&(an=on.shape[0],sn=on.shape[1]);var un=$r(sn),Xr=new aa({windowSize:un,inSize:sn,batchSize:an},rn,on==null),to=[nn];on!=null&&to.push(on);var uo=this.compileAndRun(Xr,to,"int32");return uo.shape[1]===1?uo:this.argReduce(nn,rn,uo)},st.prototype.argReducePacked=function(nn,rn,on){on===void 0&&(on=null);var an=on!=null?on.shape:nn.shape,sn=$r(an[an.length-1]),un=new Ra(an,sn,rn,on==null),Xr=on==null?[nn]:[nn,on],to=this.compileAndRun(un,Xr,"int32");return to.rank===nn.rank?this.argReducePacked(nn,rn,to):to},st.prototype.sum=function(nn,rn){Cn("sum",rn,nn.rank);var on=bn(nn.shape,rn),an=on[0],sn=k$2(on[1]),un=nn.as2D(-1,sn),Xr=Tt(nn.dtype);return this.reduce(un,"sum",Xr).reshape(an)},st.prototype.prod=function(nn,rn){if(this.shouldExecuteOnCPU([nn]))return this.cpuBackend.prod(nn,rn);var on=bn(nn.shape,rn),an=on[0],sn=k$2(on[1]),un=nn.as2D(-1,sn),Xr=Tt(nn.dtype);return this.reduce(un,"prod",Xr).reshape(an)},st.prototype.unsortedSegmentSum=function(nn,rn,on){var an=0,sn=En([an],nn.rank),un=nn;sn!=null&&(un=nn.transpose(sn),an=In(1,nn.rank)[0]);var Xr=function(co,lo,fo){for(var ho=[],mo=co.length,Uo=0;Uo<mo;Uo++)Uo!==lo?ho.push(co[Uo]):ho.push(fo);return ho}(un.shape,an,on),to=k$2([un.shape[an]]),uo=un.as2D(-1,to),hn=Tt(nn.dtype),fn=this.segOpCompute(uo,"unsortedSegmentSum",rn,hn,on).reshape(Xr);return sn!=null&&(fn=fn.transpose(Rn(sn))),fn},st.prototype.segOpCompute=function(nn,rn,on,an,sn){var un=nn.shape[0],Xr=nn.shape[1],to=function(fn,co){var lo,fo=!1;for(fn<=Yr?(lo=fn,fo=!0):lo=Y(fn,Math.floor(Math.sqrt(fn)));!fo;)lo>co||lo===fn?fo=!0:lo=Y(fn,lo+1);return lo}(Xr,sn),uo=new us({windowSize:to,inSize:Xr,batchSize:un,numSegments:sn}),hn=this.compileAndRun(uo,[nn,on],an);return hn.shape[1]===sn?hn:(on=Kn(0,sn).tile([Xr/to]),this.segOpCompute(hn,rn,on,an,sn))},st.prototype.argMinMaxReduce=function(nn,rn,on){var an=[rn];if(Cn("arg"+on.charAt(0).toUpperCase()+on.slice(1),an,nn.rank),!i().getBool("WEBGL_PACK_REDUCE")||nn.rank<=2){var sn=bn(nn.shape,an),un=sn[0],Xr=k$2(sn[1]),to=nn.as2D(-1,Xr);return this.argReduce(to,on).reshape(un)}return this.argReducePacked(nn,on)},st.prototype.argMin=function(nn,rn){return this.argMinMaxReduce(nn,rn,"min")},st.prototype.argMax=function(nn,rn){return this.argMinMaxReduce(nn,rn,"max")},st.prototype.cumsum=function(nn,rn,on,an){if(rn!==nn.rank-1)throw new Error("WebGL cumsum shader expects an inner-most axis="+(nn.rank-1)+" but got axis="+rn);var sn=new ni(nn.shape,on,an);return this.compileAndRun(sn,[nn])},st.prototype.equal=function(nn,rn){if(i().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(nn,rn,`
  return vec4(equal(a, b));
`,"bool");var on=new Ba("return float(a == b);",nn.shape,rn.shape);return this.compileAndRun(on,[nn,rn],"bool")},st.prototype.notEqual=function(nn,rn){if(i().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(nn,rn,`
  return vec4(notEqual(a, b));
`,"bool");var on=new Ba("return float(a != b);",nn.shape,rn.shape);return this.compileAndRun(on,[nn,rn],"bool")},st.prototype.less=function(nn,rn){if(this.shouldExecuteOnCPU([nn,rn]))return this.cpuBackend.less(nn,rn);if(i().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(nn,rn,`
  return vec4(lessThan(a, b));
`,"bool");var on=new Ba("return float(a < b);",nn.shape,rn.shape);return this.compileAndRun(on,[nn,rn],"bool")},st.prototype.lessEqual=function(nn,rn){if(i().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(nn,rn,`
  return vec4(lessThanEqual(a, b));
`,"bool");var on=new Ba("return float(a <= b);",nn.shape,rn.shape);return this.compileAndRun(on,[nn,rn],"bool")},st.prototype.greater=function(nn,rn){if(this.shouldExecuteOnCPU([nn,rn]))return this.cpuBackend.greater(nn,rn);if(i().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(nn,rn,`
  return vec4(greaterThan(a, b));
`,"bool");var on=new Ba("return float(a > b);",nn.shape,rn.shape);return this.compileAndRun(on,[nn,rn],"bool")},st.prototype.greaterEqual=function(nn,rn){if(i().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(nn,rn,`
  return vec4(greaterThanEqual(a, b));
`,"bool");var on=new Ba("return float(a >= b);",nn.shape,rn.shape);return this.compileAndRun(on,[nn,rn],"bool")},st.prototype.logicalNot=function(nn){var rn=new Cs(nn.shape,"return float(!(x >= 1.0));");return this.compileAndRun(rn,[nn])},st.prototype.logicalAnd=function(nn,rn){if(i().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(nn,rn,`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,"bool");var on=new Ba("return float(a >= 1.0 && b >= 1.0);",nn.shape,rn.shape);return this.compileAndRun(on,[nn,rn],"bool")},st.prototype.logicalOr=function(nn,rn){if(i().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(nn,rn,`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,"bool");var on=new Ba("return float(a >= 1.0 || b >= 1.0);",nn.shape,rn.shape);return this.compileAndRun(on,[nn,rn],"bool")},st.prototype.select=function(nn,rn,on){var an=new cs(nn.rank,rn.shape,rn.rank);return this.compileAndRun(an,[nn,rn,on],Dt(rn.dtype,on.dtype))},st.prototype.where=function(nn){dn("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");var rn=nn.dataSync();return na(nn.shape,rn)},st.prototype.topk=function(nn,rn,on){return ea(nn.dataSync(),nn.shape,nn.dtype,rn)},st.prototype.min=function(nn,rn){Cn("min",rn,nn.rank);var on=bn(nn.shape,rn),an=on[0],sn=k$2(on[1]),un=nn.as2D(-1,sn);return this.reduce(un,"min",un.dtype).reshape(an)},st.prototype.minimum=function(nn,rn){if(this.shouldExecuteOnCPU([nn,rn]))return this.cpuBackend.minimum(nn,rn);var on=i().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new La(`
  vec4 result = vec4(min(a, b));
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,nn.shape,rn.shape):new Ba(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return min(a, b);
`,nn.shape,rn.shape);return this.compileAndRun(on,[nn,rn])},st.prototype.mod=function(nn,rn){var on=i().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new La(`
  vec4 result = mod(a, b);
  vec4 isNaN = vec4(equal(b, vec4(0.0)));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,nn.shape,rn.shape):new Ba(`if (b == 0.0) return NAN;
  return mod(a, b);`,nn.shape,rn.shape);return this.compileAndRun(on,[nn,rn])},st.prototype.max=function(nn,rn){if(this.shouldExecuteOnCPU([nn]))return this.cpuBackend.max(nn,rn);Cn("max",rn,nn.rank);var on=bn(nn.shape,rn),an=on[0],sn=k$2(on[1]),un=nn.as2D(-1,sn);return this.reduce(un,"max",un.dtype).reshape(an)},st.prototype.maximum=function(nn,rn){if(this.shouldExecuteOnCPU([nn,rn]))return this.cpuBackend.maximum(nn,rn);var on=i().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new La(`
  vec4 result = vec4(max(a, b));
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,nn.shape,rn.shape):new Ba(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return max(a, b);
`,nn.shape,rn.shape);return this.compileAndRun(on,[nn,rn])},st.prototype.all=function(nn,rn){Cn("all",rn,nn.rank);var on=bn(nn.shape,rn),an=on[0],sn=k$2(on[1]),un=nn.as2D(-1,sn);return this.reduce(un,"all",un.dtype).reshape(an)},st.prototype.any=function(nn,rn){Cn("any",rn,nn.rank);var on=bn(nn.shape,rn),an=on[0],sn=k$2(on[1]),un=nn.as2D(-1,sn);return this.reduce(un,"any",un.dtype).reshape(an)},st.prototype.realDivide=function(nn,rn){if(i().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(nn,rn,`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,"float32",!0);var on=new Ba(`
if (a == b) {
  return 1.0;
};
return a / b;`,nn.shape,rn.shape);return this.compileAndRun(on,[nn,rn],"float32")},st.prototype.floorDiv=function(nn,rn){if(i().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(nn,rn,`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,"int32");var on=new Ba(`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,nn.shape,rn.shape);return this.compileAndRun(on,[nn,rn],"int32")},st.prototype.add=function(nn,rn){if(nn.dtype==="complex64"&&rn.dtype==="complex64")return this.complexSeparableBinaryOp(nn,rn,Fa);if(this.shouldExecuteOnCPU([nn,rn]))return this.cpuBackend.add(nn,rn);var on=Dt(nn.dtype,rn.dtype);if(i().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(nn,rn,Fa,on);var an=new Ba(Fa,nn.shape,rn.shape);return this.compileAndRun(an,[nn,rn],on)},st.prototype.packedUnaryOp=function(nn,rn,on){var an=new Xs(nn.shape,rn);return this.compileAndRun(an,[nn],on)},st.prototype.packedBinaryOp=function(nn,rn,on,an,sn){sn===void 0&&(sn=!1);var un=new La(on,nn.shape,rn.shape,sn);return this.compileAndRun(un,[nn,rn],an)},st.prototype.complexSeparableBinaryOp=function(nn,rn,on){var an=this,sn=this.texData.get(nn.dataId),un=this.texData.get(rn.dataId),Xr=[[sn.complexTensors.real,un.complexTensors.real],[sn.complexTensors.imag,un.complexTensors.imag]].map(function(fn){var co=fn[0],lo=fn[1],fo=an.makeComplexComponentTensorInfo(nn,co),ho=an.makeComplexComponentTensorInfo(rn,lo),mo=new Ba(on,nn.shape,rn.shape);return an.compileAndRun(mo,[fo,ho],Dt(co.dtype,lo.dtype))}),to=Xr[0],uo=Xr[1],hn=this.complex(to,uo);return to.dispose(),uo.dispose(),hn},st.prototype.makeComplexComponentTensorInfo=function(nn,rn){return{dataId:rn.dataId,dtype:rn.dtype,shape:nn.shape}},st.prototype.addN=function(nn){if(nn.length===1)return nn[0];if(nn.length>i().get("WEBGL_MAX_TEXTURES_IN_SHADER")){var rn=Math.floor(nn.length/2),on=this.addN(nn.slice(0,rn)),an=this.addN(nn.slice(rn));return this.addN([on,an])}var sn=nn.map(function(to){return to.dtype}).reduce(function(to,uo){return Dt(to,uo)}),un=nn.map(function(to){return to.shape}),Xr=i().getBool("WEBGL_PACK")?new oa(nn[0].shape,un):new ra(nn[0].shape,un);return this.compileAndRun(Xr,nn,sn)},st.prototype.subtract=function(nn,rn){if(nn.dtype==="complex64"&&rn.dtype==="complex64")return this.complexSeparableBinaryOp(nn,rn,_a);if(this.shouldExecuteOnCPU([nn,rn]))return this.cpuBackend.subtract(nn,rn);var on=Dt(nn.dtype,rn.dtype);if(i().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(nn,rn,_a,nn.dtype);var an=new Ba(_a,nn.shape,rn.shape);return this.compileAndRun(an,[nn,rn],on)},st.prototype.pow=function(nn,rn){var on=i().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new La(`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,nn.shape,rn.shape):new Ba(`
if(a < 0.0 && floor(b) < b){
  return NAN;
}
if (b == 0.0) {
  return 1.0;
}
return (round(mod(b, 2.0)) != 1) ?
    pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,nn.shape,rn.shape),an=Dt(nn.dtype,rn.dtype);return this.compileAndRun(on,[nn,rn],an)},st.prototype.ceil=function(nn){if(this.shouldExecuteOnCPU([nn]))return this.cpuBackend.ceil(nn);if(i().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(nn,Ns,nn.dtype);var rn=new Cs(nn.shape,Ns);return this.compileAndRun(rn,[nn])},st.prototype.floor=function(nn){if(this.shouldExecuteOnCPU([nn]))return this.cpuBackend.floor(nn);if(i().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(nn,Fs,nn.dtype);var rn=new Cs(nn.shape,Fs);return this.compileAndRun(rn,[nn])},st.prototype.sign=function(nn){var rn=new Cs(nn.shape,`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`);return this.compileAndRun(rn,[nn])},st.prototype.isNaN=function(nn){var rn=new Cs(nn.shape,"return float(isnan(x));");return this.compileAndRun(rn,[nn],"bool")},st.prototype.isInf=function(nn){var rn=new Cs(nn.shape,"return float(isinf(x));");return this.compileAndRun(rn,[nn],"bool")},st.prototype.isFinite=function(nn){var rn=new Cs(nn.shape,"return float(!isnan(x) && !isinf(x));");return this.compileAndRun(rn,[nn],"bool")},st.prototype.round=function(nn){var rn=new Cs(nn.shape,`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`);return this.compileAndRun(rn,[nn])},st.prototype.exp=function(nn){if(this.shouldExecuteOnCPU([nn]))return this.cpuBackend.exp(nn);if(i().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(nn,_s,nn.dtype);var rn=new Cs(nn.shape,_s);return this.compileAndRun(rn,[nn])},st.prototype.expm1=function(nn){if(this.shouldExecuteOnCPU([nn]))return this.cpuBackend.expm1(nn);if(i().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(nn,Os,nn.dtype);var rn=new Cs(nn.shape,Os);return this.compileAndRun(rn,[nn])},st.prototype.softmax=function(nn,rn){var on=O([rn],nn.shape),an=this.max(nn,on),sn=wn(an.shape,on),un=this.subtract(nn,an.reshape(sn)),Xr=this.exp(un),to=this.sum(Xr,on).reshape(sn);return this.realDivide(Xr,to)},st.prototype.log=function(nn){if(this.shouldExecuteOnCPU([nn]))return this.cpuBackend.log(nn);if(i().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(nn,`
  vec4 result = log(x);
  vec4 isNaN = vec4(lessThan(x, vec4(0.0)));
  result.r = isNaN.r == 1.0 ? NAN : result.r;
  result.g = isNaN.g == 1.0 ? NAN : result.g;
  result.b = isNaN.b == 1.0 ? NAN : result.b;
  result.a = isNaN.a == 1.0 ? NAN : result.a;

  return result;
`,nn.dtype);var rn=new Cs(nn.shape,`if (x < 0.0) return NAN;
  return log(x);`);return this.compileAndRun(rn,[nn])},st.prototype.log1p=function(nn){var rn=new Cs(nn.shape,"return log(1.0 + x);");return this.compileAndRun(rn,[nn])},st.prototype.sqrt=function(nn){var rn=new Cs(nn.shape,"return sqrt(x);");return this.compileAndRun(rn,[nn])},st.prototype.rsqrt=function(nn){if(this.shouldExecuteOnCPU([nn]))return this.cpuBackend.rsqrt(nn);var rn=new Cs(nn.shape,"return inversesqrt(x);");return this.compileAndRun(rn,[nn])},st.prototype.reciprocal=function(nn){var rn=new Cs(nn.shape,"return 1.0 / x;");return this.compileAndRun(rn,[nn])},st.prototype.relu=function(nn){var rn;return rn=i().getBool("WEBGL_PACK")?new Xs(nn.shape,qs):new Cs(nn.shape,ks),this.compileAndRun(rn,[nn])},st.prototype.relu6=function(nn){var rn;return rn=i().getBool("WEBGL_PACK")?new Xs(nn.shape,Ks):new Cs(nn.shape,Ss),this.compileAndRun(rn,[nn])},st.prototype.prelu=function(nn,rn){var on=i().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new La(Pa,nn.shape,rn.shape):new Ba(Ma,nn.shape,rn.shape);return this.compileAndRun(on,[nn,rn])},st.prototype.elu=function(nn){if(i().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(nn,js,nn.dtype);var rn=new Cs(nn.shape,As);return this.compileAndRun(rn,[nn])},st.prototype.eluDer=function(nn,rn){var on=i().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new La(`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,nn.shape,rn.shape):new Ba("return (b >= 1.0) ? a : a * (b + 1.0);",nn.shape,rn.shape);return this.compileAndRun(on,[nn,rn])},st.prototype.selu=function(nn){var rn=new Cs(nn.shape,Ds);return this.compileAndRun(rn,[nn])},st.prototype.int=function(nn){var rn=new Cs(nn.shape,"return float(int(x));");return this.compileAndRun(rn,[nn],"int32")},st.prototype.clip=function(nn,rn,on){var an,sn=(an=i().getBool("WEBGL_PACK_CLIP")?new Ua(nn.shape):new Wa(nn.shape)).getCustomSetupFunc(rn,on);return this.compileAndRun(an,[nn],null,sn)},st.prototype.abs=function(nn){if(this.shouldExecuteOnCPU([nn]))return this.cpuBackend.abs(nn);if(i().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(nn,Is,nn.dtype);var rn=new Cs(nn.shape,Is);return this.compileAndRun(rn,[nn])},st.prototype.complexAbs=function(nn){var rn=this.texData.get(nn.dataId),on=new Va(nn.shape),an=[this.makeComplexComponentTensorInfo(nn,rn.complexTensors.real),this.makeComplexComponentTensorInfo(nn,rn.complexTensors.imag)];return this.compileAndRun(on,an)},st.prototype.sigmoid=function(nn){var rn=new Cs(nn.shape,"return 1.0 / (1.0 + exp(-1.0 * x));");return this.compileAndRun(rn,[nn])},st.prototype.softplus=function(nn){var rn=new Cs(nn.shape,`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`);return this.compileAndRun(rn,[nn])},st.prototype.sin=function(nn){var rn=new Cs(nn.shape,Ms);return this.compileAndRun(rn,[nn])},st.prototype.cos=function(nn){var rn=new Cs(nn.shape,Bs);return this.compileAndRun(rn,[nn])},st.prototype.tan=function(nn){var rn=new Cs(nn.shape,"return tan(x);");return this.compileAndRun(rn,[nn])},st.prototype.asin=function(nn){var rn=new Cs(nn.shape,Ps);return this.compileAndRun(rn,[nn])},st.prototype.acos=function(nn){var rn=new Cs(nn.shape,Ls);return this.compileAndRun(rn,[nn])},st.prototype.atan=function(nn){var rn=new Cs(nn.shape,Ws);return this.compileAndRun(rn,[nn])},st.prototype.atan2=function(nn,rn){var on=i().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new La(`
  vec4 result = atan(a, b);
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,nn.shape,rn.shape):new Ba(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return atan(a, b);
`,nn.shape,rn.shape);return this.compileAndRun(on,[nn,rn])},st.prototype.sinh=function(nn){var rn=new Cs(nn.shape,`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`);return this.compileAndRun(rn,[nn])},st.prototype.cosh=function(nn){var rn=new Cs(nn.shape,`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`);return this.compileAndRun(rn,[nn])},st.prototype.tanh=function(nn){var rn=new Cs(nn.shape,`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`);return this.compileAndRun(rn,[nn])},st.prototype.asinh=function(nn){var rn=new Cs(nn.shape,Us);return this.compileAndRun(rn,[nn])},st.prototype.acosh=function(nn){var rn=new Cs(nn.shape,Vs);return this.compileAndRun(rn,[nn])},st.prototype.atanh=function(nn){var rn=new Cs(nn.shape,zs);return this.compileAndRun(rn,[nn])},st.prototype.erf=function(nn){var rn=new Cs(nn.shape,`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = 0.3275911;
  float a1 = 0.254829592;
  float a2 = -0.284496736;
  float a3 = 1.421413741;
  float a4 = -1.453152027;
  float a5 = 1.061405429;

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`);return this.compileAndRun(rn,[nn])},st.prototype.step=function(nn,rn){var on=new Cs(nn.shape,function(an){return an===void 0&&(an=0),Es+`
    return x > 0.0 ? 1.0 : float(`+an+`);
  `}(rn));return this.compileAndRun(on,[nn])},st.prototype.conv2dByMatMul=function(nn,rn,on,an,sn,un){var Xr=nn.shape,to=this.texData.get(nn.dataId),uo=on.inChannels,hn=Xr[0]*Xr[1]*Xr[2],fn=on.outChannels,co=on.dataFormat==="channelsLast",lo=(hn===1||fn===1)&&uo>1e3,fo=Xr[2]%2!=0&&!!to.isPacked;if(lo||!i().getBool("WEBGL_LAZILY_UNPACK")||!i().getBool("WEBGL_PACK_BINARY_OPERATIONS")||!fo){var ho=co?Xr[0]*Xr[1]*Xr[2]:Xr[0]*Xr[2]*Xr[3],mo=this.reshape(nn,[1,ho,on.inChannels]),Uo=this.reshape(rn,[1,on.inChannels,on.outChannels]);return this.reshape(this.fusedBatchMatMul({a:mo,b:Uo,transposeA:!1,transposeB:!1,bias:an,activation:sn,preluActivationWeights:un}),on.outShape)}var _d=co?Xr[0]*Xr[1]*(Xr[2]+1):Xr[0]*Xr[2]*(Xr[3]+1),tp={dataId:nn.dataId,shape:[1,_d,on.inChannels],dtype:nn.dtype},ep=to.shape;to.shape=to.shape.slice(),to.shape[to.shape.length-2]++,C(_e(to.shape,tp.shape),function(){return"packed reshape "+to.shape+" to "+tp.shape+" isn't free"});var np=this.reshape(rn,[1,on.inChannels,on.outChannels]),rp=this.fusedBatchMatMul({a:tp,b:np,transposeA:!1,transposeB:!1,bias:an,activation:sn,preluActivationWeights:un}),ip=this.texData.get(rp.dataId);return C(ip.isPacked,function(){return"batchMatMul result is expected to be packed"}),to.shape=ep,ip.shape=on.outShape,Lt.makeTensorFromDataId(rp.dataId,on.outShape,rp.dtype)},st.prototype.conv2dWithIm2Row=function(nn,rn,on,an,sn,un){var Xr=on.filterWidth,to=on.filterHeight,uo=on.inChannels,hn=on.outWidth,fn=on.outHeight,co=on.dataFormat==="channelsLast",lo=Xr*to*uo,fo=fn*hn,ho=[lo,fo],mo=nn.squeeze([0]),Uo=rn.reshape([1,lo,-1]),_d=new Li(ho,mo.shape,on),tp=this.compileAndRun(_d,[mo]).reshape([1,ho[0],ho[1]]),ep=an!=null,np=un!=null,rp=sn?Qs(sn,!0):null,ip=new Hi(tp.shape,[1,fo,on.outChannels],!0,!1,ep,rp,np),op=[tp,Uo];an&&op.push(an),np&&op.push(un);var ap=this.compileAndRun(ip,op);return co?ap.reshape([1,fn,hn,on.outChannels]):ap.reshape([1,on.outChannels,fn,hn])},st.prototype.fusedConv2d=function(nn){var rn=nn.input,on=nn.filter,an=nn.convInfo,sn=nn.bias,un=nn.activation,Xr=nn.preluActivationWeights;if(an.filterHeight===1&&an.filterWidth===1&&an.dilationHeight===1&&an.dilationWidth===1&&an.strideHeight===1&&an.strideWidth===1&&(an.padInfo.type==="SAME"||an.padInfo.type==="VALID"))return this.conv2dByMatMul(rn,on,an,sn,un,Xr);if(i().getBool("WEBGL_CONV_IM2COL")&&rn.shape[0]===1)return this.conv2dWithIm2Row(rn,on,an,sn,un,Xr);var to=sn!=null,uo=Xr!=null,hn=un?Qs(un,!1):null,fn=new Qa(an,to,hn,uo),co=[rn,on];return sn&&co.push(sn),Xr&&co.push(Xr),this.compileAndRun(fn,co)},st.prototype.conv2d=function(nn,rn,on){if(on.filterHeight===1&&on.filterWidth===1&&on.dilationHeight===1&&on.dilationWidth===1&&on.strideHeight===1&&on.strideWidth===1&&(on.padInfo.type==="SAME"||on.padInfo.type==="VALID"))return this.conv2dByMatMul(nn,rn,on);if(i().getBool("WEBGL_CONV_IM2COL")&&nn.shape[0]===1)return this.conv2dWithIm2Row(nn,rn,on);var an=new Qa(on);return this.compileAndRun(an,[nn,rn])},st.prototype.conv2dDerInput=function(nn,rn,on){var an=new Ka(on);return this.compileAndRun(an,[nn,rn])},st.prototype.conv2dDerFilter=function(nn,rn,on){var an=new qa(on);return this.compileAndRun(an,[nn,rn])},st.prototype.fusedDepthwiseConv2D=function(nn){var rn,on=nn.input,an=nn.filter,sn=nn.convInfo,un=nn.bias,Xr=nn.activation,to=nn.preluActivationWeights,uo=i().getBool("WEBGL_PACK_DEPTHWISECONV")&&sn.strideWidth<=2&&sn.outChannels/sn.inChannels==1,hn=Xr?Qs(Xr,uo):null,fn=[on,an],co=un!=null,lo=to!=null;return co&&fn.push(un),lo&&fn.push(to),uo?(rn=new ti(sn,co,hn,lo),this.compileAndRun(rn,fn)):(rn=new Za(sn,co,hn,lo),this.compileAndRun(rn,fn))},st.prototype.depthwiseConv2D=function(nn,rn,on){var an;return i().getBool("WEBGL_PACK_DEPTHWISECONV")&&on.strideWidth<=2&&on.outChannels/on.inChannels==1?(an=new ti(on),this.compileAndRun(an,[nn,rn])):(an=new Za(on),this.compileAndRun(an,[nn,rn]))},st.prototype.depthwiseConv2DDerInput=function(nn,rn,on){var an=new $a(on);return this.compileAndRun(an,[nn,rn])},st.prototype.depthwiseConv2DDerFilter=function(nn,rn,on){var an=new Ya(on);return this.compileAndRun(an,[nn,rn])},st.prototype.conv3d=function(nn,rn,on){var an=new Ja(on);return this.compileAndRun(an,[nn,rn])},st.prototype.conv3dDerInput=function(nn,rn,on){var an=new Xa(on);return this.compileAndRun(an,[nn,rn])},st.prototype.conv3dDerFilter=function(nn,rn,on){var an=new ja(on);return this.compileAndRun(an,[nn,rn])},st.prototype.maxPool=function(nn,rn){var on=new $i(rn,"max",!1);return this.compileAndRun(on,[nn])},st.prototype.avgPool=function(nn,rn){var on=new $i(rn,"avg",!1);return this.compileAndRun(on,[nn],"float32")},st.prototype.maxPoolBackprop=function(nn,rn,on,an){var sn=new $i(an,"max",!0),un=this.compileAndRun(sn,[rn]),Xr=new zi(an),to=this.compileAndRun(Xr,[nn,un],rn.dtype);return un.dispose(),to},st.prototype.avgPoolBackprop=function(nn,rn,on){var an=new Ia(on);return this.compileAndRun(an,[nn],rn.dtype)},st.prototype.cast=function(nn,rn){return Po(nn,rn,this)},st.prototype.unstack=function(nn,rn){for(var on=nn.shape[rn],an=new Array(nn.rank-1),sn=0,un=0;un<nn.rank;un++)un!==rn&&(an[sn++]=nn.shape[un]);var Xr=new Array(nn.rank).fill(0),to=nn.shape.slice();to[rn]=1;var uo=new Array(on);for(un=0;un<uo.length;un++)Xr[rn]=un,uo[un]=this.slice(nn,Xr,to).reshape(an);return uo},st.prototype.avgPool3d=function(nn,rn){var on=new Qi(rn,"avg",!1);return this.compileAndRun(on,[nn],"float32")},st.prototype.avgPool3dBackprop=function(nn,rn,on){var an=new ka$1(on);return this.compileAndRun(an,[nn],rn.dtype)},st.prototype.maxPool3d=function(nn,rn){var on=new Qi(rn,"max",!1);return this.compileAndRun(on,[nn],"float32")},st.prototype.maxPool3dBackprop=function(nn,rn,on,an){var sn=new Qi(an,"max",!0),un=this.compileAndRun(sn,[rn]),Xr=new Gi(an),to=this.compileAndRun(Xr,[nn,un],rn.dtype);return un.dispose(),to},st.prototype.reshape=function(nn,rn){var on=this.texData.get(nn.dataId);if(on.isPacked&&!_e(nn.shape,rn)&&(on.texture===null||!_e(on.shape,rn))){var an=this.packedReshape(nn,rn);return Lt.makeTensorFromDataId(an.dataId,an.shape,an.dtype)}return Lo(nn,rn)},st.prototype.resizeBilinear=function(nn,rn,on,an){var sn=i().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new ns(nn.shape,rn,on,an):new es(nn.shape,rn,on,an);return this.compileAndRun(sn,[nn],"float32")},st.prototype.resizeBilinearBackprop=function(nn,rn,on){var an=new ts(nn,rn,on);return this.compileAndRun(an,[nn])},st.prototype.resizeNearestNeighbor=function(nn,rn,on,an){var sn=new os(nn.shape,rn,on,an);return this.compileAndRun(sn,[nn])},st.prototype.resizeNearestNeighborBackprop=function(nn,rn,on){var an=new rs(nn,rn,on);return this.compileAndRun(an,[nn])},st.prototype.multinomial=function(nn,rn,on,an){var sn=rn?nn:go(nn),un=sn.shape[0],Xr=sn.shape[1],to=new qi(un,Xr,on),uo=to.getCustomSetupFunc(an);return this.compileAndRun(to,[sn],"int32",uo)},st.prototype.oneHot=function(nn,rn,on,an){var sn=new Ki(nn.size,rn,on,an);return this.compileAndRun(sn,[nn])},st.prototype.diag=function(nn){var rn=new si(nn.size);return this.compileAndRun(rn,[nn])},st.prototype.nonMaxSuppression=function(nn,rn,on,an,sn){return dn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead"),jo(nn.dataSync(),rn.dataSync(),on,an,sn)},st.prototype.cropAndResize=function(nn,rn,on,an,sn,un){var Xr=new ei(nn.shape,rn.shape,an,sn,un);return this.compileAndRun(Xr,[nn,rn,on],"float32")},st.prototype.depthToSpace=function(nn,rn,on){C(rn>1,function(){return"blockSize should be > 1 for depthToSpace, but was: "+rn});var an=nn.shape[0],sn=on==="NHWC"?nn.shape[1]:nn.shape[2],un=on==="NHWC"?nn.shape[2]:nn.shape[3],Xr=on==="NHWC"?nn.shape[3]:nn.shape[1],to=sn*rn,uo=un*rn,hn=Xr/(rn*rn),fn=new ii(on==="NHWC"?[an,to,uo,hn]:[an,hn,to,uo],rn,on);return this.compileAndRun(fn,[nn])},st.prototype.split=function(nn,rn,on){return Zo(nn,rn,on)},st.prototype.scatterND=function(nn,rn,on){var an=Zr(0,nn,on),sn=an.sliceRank,un=an.numUpdates,Xr=an.sliceSize,to=an.strides,uo=an.outputSize,hn=[uo/Xr,Xr],fn=nn.reshape([un,sn]),co=rn.reshape([un,Xr]);if(uo===0)return Lo(Fn([]),on);var lo=On(0),fo=new ss(un,sn,fn.rank,co.rank,to,hn);return this.compileAndRun(fo,[co,fn,lo]).reshape(on)},st.prototype.sparseToDense=function(nn,rn,on,an){var sn=Zr(0,nn,on),un=sn.sliceRank,Xr=sn.numUpdates,to=sn.strides,uo=sn.outputSize,hn=new ss(Xr,un,nn.rank,rn.rank,to,[uo,1]);return this.compileAndRun(hn,[rn,nn,an]).reshape(on)},st.prototype.fft=function(nn){return this.fftImpl(nn,!1)},st.prototype.ifft=function(nn){return this.fftImpl(nn,!0)},st.prototype.fftImpl=function(nn,rn){var on=this.texData.get(nn.dataId),an=new pi$2(fi,nn.shape,rn),sn=new pi$2(di,nn.shape,rn),un=[this.makeComplexComponentTensorInfo(nn,on.complexTensors.real),this.makeComplexComponentTensorInfo(nn,on.complexTensors.imag)],Xr=this.compileAndRun(an,un),to=this.compileAndRun(sn,un),uo=this.complex(Xr,to).as2D(nn.shape[0],nn.shape[1]);return Xr.dispose(),to.dispose(),uo},st.prototype.gatherND=function(nn,rn){var on=rn.shape,an=on[on.length-1],sn=jr(nn,rn),un=sn[0],Xr=sn[1],to=sn[2],uo=sn[3],hn=rn.reshape([Xr,an]),fn=nn.reshape([nn.size/to,to]),co=new gi(an,uo,[Xr,to]);return this.compileAndRun(co,[fn,hn]).reshape(un)},st.prototype.fill=function(nn,rn,on){if((on=on||j(rn))==="string"){var an=P$1(on,k$2(nn));return an.fill(rn),Lt.makeTensor(an,nn,on,this)}var sn=new vi(nn,rn),un=sn.getCustomSetupFunc(rn);return this.compileAndRun(sn,[],on,un)},st.prototype.onesLike=function(nn){if(nn.dtype==="string")throw new Error("onesLike is not supported under string dtype");return this.fill(nn.shape,1,nn.dtype)},st.prototype.zerosLike=function(nn){return this.fill(nn.shape,nn.dtype==="string"?"":0,nn.dtype)},st.prototype.linspace=function(nn,rn,on){return Wo(nn,rn,on)},st.prototype.makeTensorInfo=function(nn,rn){var on=this.write(null,nn,rn);return this.texData.get(on).usage=null,{dataId:on,shape:nn,dtype:rn}},st.prototype.makeOutput=function(nn,rn){var on=this.makeTensorInfo(nn,rn).dataId;return Lt.makeTensorFromDataId(on,nn,rn,this)},st.prototype.unpackTensor=function(nn){var rn=new Ys(nn.shape);return this.runWebGLProgram(rn,[nn],nn.dtype)},st.prototype.packTensor=function(nn){var rn=new ji(nn.shape);return this.runWebGLProgram(rn,[nn],nn.dtype,null,!0)},st.prototype.packedReshape=function(nn,rn){var on=[Ae(nn.shape)].concat(De(nn.shape)),an={dtype:nn.dtype,shape:on,dataId:nn.dataId},sn=[Ae(rn)].concat(De(rn)),un=new Zi(sn,on),Xr=this.runWebGLProgram(un,[an],nn.dtype,null,!0);return{dataId:Xr.dataId,shape:rn,dtype:Xr.dtype}},st.prototype.decode=function(nn){var rn,on=this.texData.get(nn),an=on.isPacked,sn=on.shape,un=on.dtype,Xr=Te(sn);return rn=an?new ai(Xr):new oi(Xr),{dtype:un,shape:sn,dataId:this.runWebGLProgram(rn,[{shape:Xr,dtype:un,dataId:nn}],un,null,!0).dataId}},st.prototype.runWebGLProgram=function(nn,rn,on,an,sn){var un=this;sn===void 0&&(sn=!1);var Xr=this.makeTensorInfo(nn.outputShape,on),to=this.texData.get(Xr.dataId);if(nn.packedOutput&&(to.isPacked=!0),nn.outPackingScheme===Vt.DENSE){var uo=Yt(nn.outputShape);to.texShape=uo.map(function(_d){return 2*_d})}if(nn.outTexUsage!=null&&(to.usage=nn.outTexUsage),k$2(Xr.shape)===0)return to.values=B(Xr.dtype,0),Xr;var hn=[],fn=rn.map(function(_d){if(_d.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");var tp=un.texData.get(_d.dataId);if(tp.texture==null){if(!nn.packedInputs&&k$2(_d.shape)<=i().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:_d.shape,texData:null,isUniform:!0,uniformValues:tp.values};nn.packedInputs&&(tp.isPacked=!0,tp.shape=_d.shape)}else if(!!tp.isPacked!=!!nn.packedInputs)_d=tp.isPacked?un.unpackTensor(_d):un.packTensor(_d),hn.push(_d),tp=un.texData.get(_d.dataId);else if(tp.isPacked&&!_e(tp.shape,_d.shape)){var ep=_d,np=_d.shape;_d.shape=tp.shape,_d=un.packedReshape(_d,np),hn.push(_d),tp=un.texData.get(_d.dataId),ep.shape=np}return un.uploadToGPU(_d.dataId),{shape:_d.shape,texData:tp,isUniform:!1}});this.uploadToGPU(Xr.dataId);var co,lo={shape:Xr.shape,texData:to,isUniform:!1},fo=function(_d,tp,ep){var np="";tp.concat(ep).forEach(function(op){var ap=op.texData!=null&&op.texData.slice!=null&&op.texData.slice.flatOffset>0,sp=op.isUniform?"uniform":op.texData.texShape;np+=op.shape+"_"+sp+"_"+ap});var rp=_d.userCode,ip=_d.constructor.name;return ip+="_"+np+"_"+rp}(nn,fn,lo),ho=this.getAndSaveBinary(fo,function(){return function(_d,tp,ep,np){var rp=tp.userCode,ip=ep.map(function(gp,mp){var xp={logicalShape:gp.shape,texShape:gp.isUniform?null:gp.texData.texShape,isUniform:gp.isUniform,isPacked:!gp.isUniform&&gp.texData.isPacked,flatOffset:null};return gp.texData!=null&&gp.texData.slice!=null&&gp.texData.slice.flatOffset>0&&(xp.flatOffset=gp.texData.slice.flatOffset),{name:tp.variableNames[mp],shapeInfo:xp}}),op=ip.map(function(gp){return gp.shapeInfo}),ap={logicalShape:np.shape,texShape:np.texData.texShape,isUniform:!1,isPacked:np.texData.isPacked,flatOffset:null},sp=fa(ip,ap,rp,tp.packedInputs),up=_d.createProgram(sp),pp=null,lp=_d.getUniformLocation(up,"NAN",!1);i().getNumber("WEBGL_VERSION")===1&&(pp=_d.getUniformLocation(up,"INFINITY",!1));for(var dp={},cp=0;cp<tp.variableNames.length;cp++){var fp=tp.variableNames[cp];dp[fp]=_d.getUniformLocation(up,fp,!1),dp["offset"+fp]=_d.getUniformLocation(up,"offset"+fp,!1)}return{program:tp,source:sp,webGLProgram:up,uniformLocations:dp,inShapeInfos:op,outShapeInfo:ap,infLoc:pp,nanLoc:lp}}(un.gpgpu,nn,fn,lo)}),mo=this.activeTimers!=null;if(mo&&(co=this.startTimer()),function(_d,tp,ep,np,rp){Pi(tp.inShapeInfos,ep),Pi([tp.outShapeInfo],[np]);var ip=np.texData.texture,op=np.texData.texShape;np.texData.isPacked?_d.setOutputPackedMatrixTexture(ip,op[0],op[1]):_d.setOutputMatrixTexture(ip,op[0],op[1]),_d.setProgram(tp.webGLProgram),i().getNumber("WEBGL_VERSION")===1&&tp.infLoc!==null&&_d.gl.uniform1f(tp.infLoc,1/0),tp.nanLoc!==null&&_d.gl.uniform1f(tp.nanLoc,NaN),ep.forEach(function(ap,sp){var up=tp.program.variableNames[sp],pp=tp.uniformLocations[up],lp=tp.uniformLocations["offset"+up];if(pp!=null)if(ap.isUniform)if(k$2(ap.shape)<2)_d.gl.uniform1f(pp,ap.uniformValues[0]);else{var dp=ap.uniformValues;dp instanceof Float32Array||(dp=new Float32Array(dp)),_d.gl.uniform1fv(pp,dp)}else ap.texData.slice!=null&&lp!=null&&_d.gl.uniform1i(lp,ap.texData.slice.flatOffset),_d.setInputMatrixTexture(ap.texData.texture,pp,sp)}),rp!=null&&rp(_d,tp.webGLProgram),_d.executeProgram()}(this.gpgpu,ho,fn,lo,an),hn.forEach(function(_d){return un.disposeData(_d.dataId)}),mo&&(co=this.endTimer(co),this.activeTimers.push({name:nn.constructor.name,query:this.getQueryTime(co)})),!i().getBool("WEBGL_LAZILY_UNPACK")&&to.isPacked&&sn===!1){var Uo=this.unpackTensor(Xr);return this.disposeData(Xr.dataId),Uo}return Xr},st.prototype.compileAndRun=function(nn,rn,on,an,sn){sn===void 0&&(sn=!1),on=on||rn[0].dtype;var un=this.runWebGLProgram(nn,rn,on,an,sn);return Lt.makeTensorFromDataId(un.dataId,un.shape,un.dtype)},st.prototype.getAndSaveBinary=function(nn,rn){return nn in this.binaryCache||(this.binaryCache[nn]=rn()),this.binaryCache[nn]},st.prototype.getTextureManager=function(){return this.textureManager},st.prototype.dispose=function(){var nn=this;this.disposed||(i().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(function(rn){nn.gpgpu.deleteProgram(nn.binaryCache[rn].webGLProgram),delete nn.binaryCache[rn]}),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)},st.prototype.floatPrecision=function(){var nn=this;return this.floatPrecisionValue==null&&(this.floatPrecisionValue=Ze(function(){if(!i().get("WEBGL_RENDER_FLOAT32_ENABLED")){var rn=i().getBool("DEBUG");i().set("DEBUG",!1);var on=nn.abs(On(1e-8)).dataSync()[0];if(i().set("DEBUG",rn),on>0)return 32}return 16})),this.floatPrecisionValue},st.prototype.epsilon=function(){return this.floatPrecision()===32?1e-7:1e-4},st.prototype.uploadToGPU=function(nn){var rn,on=this.texData.get(nn),an=on.shape,sn=on.dtype,un=on.values,Xr=on.texture,to=on.usage,uo=on.isPacked;if(Xr==null){var hn,fn=this.activeTimers!=null;fn&&(hn=et());var co=on.texShape;if(co==null&&(co=Ne(an,uo),on.texShape=co),un!=null){var lo=Te(an),fo=void 0,ho=co[1],mo=co[0],Uo=un instanceof Uint8Array;uo?(ho=(rn=$t(co[0],co[1]))[0],mo=rn[1],fo=new hi(lo,[mo,ho],Uo)):fo=new li(lo,[mo,ho],Uo);var _d=this.makeTensorInfo([mo,ho],sn);this.texData.get(_d.dataId).usage=Uo?zt.PIXELS:zt.UPLOAD,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(_d.dataId),ho,mo,un);var tp=this.runWebGLProgram(fo,[_d],sn,null,!0),ep=this.texData.get(tp.dataId);on.texture=ep.texture,on.texShape=ep.texShape,on.isPacked=ep.isPacked,on.usage=ep.usage,this.disposeData(_d.dataId),this.texData.delete(tp.dataId),on.values=null,fn&&(this.uploadWaitMs+=et()-hn)}else{var np=this.acquireTexture(co,to,sn,uo);on.texture=np}}},st.prototype.convertAndCacheOnCPU=function(nn,rn){var on=this.texData.get(nn),an=on.dtype;return this.releaseGPUData(nn),rn!=null&&(on.values=function(sn,un){if(un==="float32"||un==="complex64")return sn;if(un==="int32"||un==="bool"){for(var Xr=un==="int32"?new Int32Array(sn.length):new Uint8Array(sn.length),to=0;to<Xr.length;++to)Xr[to]=Math.round(sn[to]);return Xr}throw new Error("Unknown dtype "+un)}(rn,an)),on.values},st.prototype.acquireTexture=function(nn,rn,on,an){if(this.numBytesInGPU+=this.computeBytes(nn,on),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){var sn=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn("High memory usage in GPU: "+sn+" MB, most likely due to a memory leak")}return this.textureManager.acquireTexture(nn,rn,an)},st.prototype.computeBytes=function(nn,rn){return nn[0]*nn[1]*z(rn)},st}(bo);Wt()&&Lt.registerBackend("webgl",function(){return new Zs},2);var tu=An({square_:function(Mt){var st=mn(Mt,"x","square"),nn=[st];return Lt.runKernelFunc(function(rn,on){return on([st]),rn.square(st)},{x:st},null,"Square",{},nn,[])}}),eu="SquaredDifference",nu=An({squaredDifference_:function(Mt,st){var nn,rn=mn(Mt,"a","squaredDifference"),on=mn(st,"b","squaredDifference");nn=Nt(rn,on),rn=nn[0],on=nn[1],Ro(rn.shape,on.shape);var an={a:rn,b:on},sn=[rn,on];return Lt.runKernelFunc(function(un,Xr){var to=un.squaredDifference(rn,on);return Xr([rn,on]),to},an,function(un,Xr){var to=Xr[0],uo=Xr[1],hn=On(2);return{a:function(){return un.mul(to.sub(uo).mul(hn))},b:function(){return un.mul(uo.sub(to).mul(hn))}}},eu,{},sn,[])}}),ru=An({abs_:function(Mt){var st=mn(Mt,"x","abs");return st.dtype==="complex64"?Lt.runKernelFunc(function(nn){return nn.complexAbs(st)},{$x:st}):Lt.runKernelFunc(function(nn,rn){var on=nn.abs(st);return rn([st]),on},{x:st},function(nn,rn){var on=rn[0];return{x:function(){return nn.mul(on.toFloat().step(-1))}}},"Abs")}}),ou=An({acos_:function(Mt){var st=mn(Mt,"x","acos");return Lt.runKernelFunc(function(nn,rn){var on=nn.acos(st);return rn([st]),on},{$x:st},function(nn,rn){var on=rn[0];return{$x:function(){return nn.divStrict(On(1).sub(on.toFloat().square()).sqrt()).neg()}}})}}),au=An({acosh_:function(Mt){var st=mn(Mt,"x","acosh");return Lt.runKernelFunc(function(nn,rn){var on=nn.acosh(st);return rn([st]),on},{$x:st},function(nn,rn){var on=rn[0];return{$x:function(){return nn.divStrict(on.toFloat().square().sub(1).sqrt())}}})}}),iu=An({asin_:function(Mt){var st=mn(Mt,"x","asin");return Lt.runKernelFunc(function(nn,rn){var on=nn.asin(st);return rn([st]),on},{$x:st},function(nn,rn){var on=rn[0];return{$x:function(){return nn.divStrict(On(1).sub(on.toFloat().square()).sqrt())}}})}}),su=An({asinh_:function(Mt){var st=mn(Mt,"x","asinh");return Lt.runKernelFunc(function(nn,rn){var on=nn.asinh(st);return rn([st]),on},{$x:st},function(nn,rn){var on=rn[0];return{$x:function(){return nn.divStrict(On(1).add(on.toFloat().square()).sqrt())}}})}}),uu=An({atan_:function(Mt){var st=mn(Mt,"x","atan");return Lt.runKernelFunc(function(nn,rn){var on=nn.atan(st);return rn([st]),on},{$x:st},function(nn,rn){var on=rn[0];return{$x:function(){return nn.div(on.toFloat().square().add(1))}}})}}),cu=An({atanh_:function(Mt){var st=mn(Mt,"x","atanh");return Lt.runKernelFunc(function(nn,rn){var on=nn.atanh(st);return rn([st]),on},{$x:st},function(nn,rn){var on=rn[0];return{$x:function(){return nn.div(On(1).sub(on.toFloat().square()))}}})}}),lu=An({ceil_:function(Mt){var st=mn(Mt,"x","ceil");return Lt.runKernelFunc(function(nn){return nn.ceil(st)},{$x:st},function(nn){return{$x:function(){return Xn(nn)}}})}}),hu=An({clipByValue_:function(Mt,st,nn){var rn=mn(Mt,"x","clipByValue");C(st<=nn,function(){return"Error in clip: min ("+st+") must be less than or equal to max ("+nn+")."});var on=[rn],an={min:st,max:nn};return Lt.runKernelFunc(function(sn,un){var Xr=sn.clip(rn,st,nn);return un([rn]),Xr},{x:rn},function(sn,un){var Xr=un[0];return{x:function(){return sn.where(Xr.greaterEqual(st).logicalAnd(Xr.lessEqual(nn)),Xn(sn))}}},"ClipByValue",an,on)}}),fu=An({cos_:function(Mt){var st=mn(Mt,"x","cos"),nn=[st];return Lt.runKernelFunc(function(rn,on){var an=rn.cos(st);return on([st]),an},{x:st},function(rn,on){var an=on[0];return{x:function(){return an.toFloat().sin().neg().mul(rn)}}},"Cos",{},nn)}}),du=An({cosh_:function(Mt){var st=mn(Mt,"x","cosh");return Lt.runKernelFunc(function(nn,rn){var on=nn.cosh(st);return rn([st]),on},{$x:st},function(nn,rn){var on=rn[0];return{$x:function(){return on.toFloat().sinh().mulStrict(nn)}}})}}),pu=An({erf_:function(Mt){var st=mn(Mt,"x","erf");return C(st.dtype==="int32"||st.dtype==="float32",function(){return"Input dtype must be `int32` or `float32`."}),st.dtype==="int32"&&(st=st.toFloat()),Lt.runKernelFunc(function(nn,rn){var on=nn.erf(st);return rn([st]),on},{$x:st},function(nn,rn){var on=rn[0];return{$x:function(){return nn.mul(on.square().neg().exp().mul(2/Math.sqrt(Math.PI)))}}})}}),vu=An({exp_:function(Mt){var st=mn(Mt,"x","exp");return Lt.runKernelFunc(function(nn,rn){var on=nn.exp(st);return rn([on]),on},{x:st},function(nn,rn){return{x:function(){return nn.mulStrict(rn[0])}}},"Exp",{},[],[!0])}}),mu=An({expm1_:function(Mt){var st=mn(Mt,"x","expm1");return Lt.runKernelFunc(function(nn,rn){var on=nn.expm1(st);return rn([st]),on},{$x:st},function(nn,rn){var on=rn[0];return{$x:function(){return nn.mul(on.exp())}}})}}),gu=An({floor_:function(Mt){var st=mn(Mt,"x","floor");return Lt.runKernelFunc(function(nn){return nn.floor(st)},{$x:st},function(nn){return{$x:function(){return Xn(nn)}}})}}),yu=An({log_:function(Mt){var st=mn(Mt,"x","log"),nn=[st];return Lt.runKernelFunc(function(rn,on){var an=rn.log(st);return on([st]),an},{x:st},function(rn,on){var an=on[0];return{x:function(){return rn.div(an.toFloat())}}},"Log",{},nn)}}),xu=An({log1p_:function(Mt){var st=mn(Mt,"x","log1p");return Lt.runKernelFunc(function(nn,rn){var on=nn.log1p(st);return rn([st]),on},{$x:st},function(nn,rn){var on=rn[0];return{$x:function(){return nn.div(on.add(1))}}})}}),bu=An({logSigmoid_:function(Mt){var st=mn(Mt,"x","logSigmoid");return Lt.runKernelFunc(function(nn,rn){var on=nn.softplus(st.neg()).neg();return rn([st]),on},{$x:st},function(nn,rn){var on=rn[0];return{$x:function(){return nn.mul(on.neg().sigmoid())}}})}}),wu=An({neg_:function(Mt){var st=mn(Mt,"x","neg"),nn=[st];return Lt.runKernelFunc(function(rn){return rn.neg(st)},{x:st},function(rn){return{x:function(){return rn.neg()}}},"Neg",{},nn)}}),Cu=An({reciprocal_:function(Mt){var st=mn(Mt,"x","reciprocal");return Lt.runKernelFunc(function(nn,rn){var on=nn.reciprocal(st);return rn([st]),on},{$x:st},function(nn,rn){var on=rn[0];return{$x:function(){return nn.div(on.square().neg())}}})}}),Eu=An({round_:function(Mt){var st=mn(Mt,"x","round");return Lt.runKernelFunc(function(nn){return nn.round(st)},{$x:st},function(nn){return{$x:function(){return Xn(nn)}}})}}),Ru=An({rsqrt_:function(Mt){var st=mn(Mt,"x","rsqrt"),nn=[st];return Lt.runKernelFunc(function(rn,on){var an=rn.rsqrt(st);return on([st]),an},{x:st},function(rn,on){var an=on[0];return{x:function(){return rn.div(an.pow(1.5).mul(2)).neg()}}},"Rsqrt",{},nn)}}),Iu=An({sigmoid_:function(Mt){var st=mn(Mt,"x","sigmoid");return Lt.runKernelFunc(function(nn,rn){var on=nn.sigmoid(st);return rn([on]),on},{x:st},function(nn,rn){var on=rn[0];return{x:function(){return nn.mul(on.mul(On(1).sub(on)))}}},"Sigmoid")}}),ku=An({sign_:function(Mt){var st=mn(Mt,"x","sign");return Lt.runKernelFunc(function(nn){return nn.sign(st)},{$x:st},function(nn){return{$x:function(){return Xn(nn)}}})}}),Su=An({isNaN_:function(Mt){var st=mn(Mt,"x","isNaN");return Lt.runKernelFunc(function(nn){return nn.isNaN(st)},{$x:st},function(nn){return{$x:function(){return Xn(nn)}}})}}),Au=An({isInf_:function(Mt){var st=mn(Mt,"x","isInf");return Lt.runKernelFunc(function(nn){return nn.isInf(st)},{$x:st},function(nn){return{$x:function(){return Xn(nn)}}})}}),Du=An({isFinite_:function(Mt){var st=mn(Mt,"x","isFinite");return Lt.runKernelFunc(function(nn){return nn.isFinite(st)},{$x:st},function(nn){return{$x:function(){return Xn(nn)}}})}}),Tu=An({sin_:function(Mt){var st=mn(Mt,"x","sin"),nn=[st];return Lt.runKernelFunc(function(rn,on){var an=rn.sin(st);return on([st]),an},{x:st},function(rn,on){var an=on[0];return{x:function(){return an.toFloat().cos().mul(rn)}}},"Sin",{},nn)}}),Nu=An({sinh_:function(Mt){var st=mn(Mt,"x","sinh");return Lt.runKernelFunc(function(nn,rn){var on=nn.sinh(st);return rn([st]),on},{$x:st},function(nn,rn){var on=rn[0];return{$x:function(){return on.toFloat().cosh().mulStrict(nn)}}})}}),Fu=An({softplus_:function(Mt){var st=mn(Mt,"x","softplus");return Lt.runKernelFunc(function(nn,rn){var on=nn.softplus(st);return rn([st]),on},{$x:st},function(nn,rn){var on=rn[0];return{$x:function(){return nn.mul(on.sigmoid())}}})}}),_u=An({sqrt_:function(Mt){var st=mn(Mt,"x","sqrt");return Lt.runKernelFunc(function(nn,rn){var on=nn.sqrt(st);return rn([st]),on},{$x:st},function(nn,rn){var on=rn[0];return{$x:function(){return nn.div(on.toFloat().sqrt().mul(2))}}})}}),Ou=An({step_:function(Mt,st){st===void 0&&(st=0);var nn=mn(Mt,"x","step");return Lt.runKernelFunc(function(rn){return rn.step(nn,st)},{$x:nn},function(rn){return{$x:function(){return Xn(rn)}}})}}),Mu=An({tan_:function(Mt){var st=mn(Mt,"x","tan");return Lt.runKernelFunc(function(nn,rn){var on=nn.tan(st);return rn([st]),on},{$x:st},function(nn,rn){var on=rn[0];return{$x:function(){return nn.div(on.cos().square())}}})}}),Bu=An({tanh_:function(Mt){var st=mn(Mt,"x","tanh");return Lt.runKernelFunc(function(nn,rn){var on=nn.tanh(st);return rn([on]),on},{x:st},function(nn,rn){var on=rn[0];return{x:function(){return On(1).sub(on.square()).mulStrict(nn)}}},"Tanh",{},null,[!0])}});function Pu(Mt,st,nn,rn,on,an){var sn,un,Xr=mn(Mt,"x","batchNorm"),to=mn(st,"mean","batchNorm"),uo=mn(nn,"variance","batchNorm");return on!=null&&(sn=mn(on,"scale","batchNorm")),rn!=null&&(un=mn(rn,"offset","batchNorm")),C(Xr.rank===2,function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+Xr.rank+"."}),C(to.rank===2||to.rank===1,function(){return"Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank "+to.rank+"."}),C(uo.rank===2||uo.rank===1,function(){return"Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank "+uo.rank+"."}),sn!=null&&C(sn.rank===2||sn.rank===1,function(){return"Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank "+sn.rank+"."}),un!=null&&C(un.rank===2||un.rank===1,function(){return"Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank "+un.rank+"."}),Uu(Xr,to,uo,un,sn,an)}function Lu(Mt,st,nn,rn,on,an){var sn,un,Xr=mn(Mt,"x","batchNorm"),to=mn(st,"mean","batchNorm"),uo=mn(nn,"variance","batchNorm");return on!=null&&(sn=mn(on,"scale","batchNorm")),rn!=null&&(un=mn(rn,"offset","batchNorm")),C(Xr.rank===3,function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+Xr.rank+"."}),C(to.rank===3||to.rank===1,function(){return"Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank "+to.rank+"."}),C(uo.rank===3||uo.rank===1,function(){return"Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank "+uo.rank+"."}),sn!=null&&C(sn.rank===3||sn.rank===1,function(){return"Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank "+sn.rank+"."}),un!=null&&C(un.rank===3||un.rank===1,function(){return"Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank "+un.rank+"."}),Uu(Xr,to,uo,un,sn,an)}function Wu(Mt,st,nn,rn,on,an){var sn,un,Xr=mn(Mt,"x","batchNorm"),to=mn(st,"mean","batchNorm"),uo=mn(nn,"variance","batchNorm");return on!=null&&(sn=mn(on,"scale","batchNorm")),rn!=null&&(un=mn(rn,"offset","batchNorm")),C(Xr.rank===4,function(){return"Error in batchNorm4D: x must be rank 4 but got rank "+Xr.rank+"."}),C(to.rank===4||to.rank===1,function(){return"Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank "+to.rank+"."}),C(uo.rank===4||uo.rank===1,function(){return"Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank "+uo.rank+"."}),sn!=null&&C(sn.rank===4||sn.rank===1,function(){return"Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank "+sn.rank+"."}),un!=null&&C(un.rank===4||un.rank===1,function(){return"Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank "+un.rank+"."}),Uu(Xr,to,uo,un,sn,an)}function Uu(Mt,st,nn,rn,on,an){an==null&&(an=.001);var sn,un,Xr,to=mn(Mt,"x","batchNorm"),uo=mn(st,"mean","batchNorm"),hn=mn(nn,"variance","batchNorm");on!=null&&(sn=mn(on,"scale","batchNorm")),rn!=null&&(un=mn(rn,"offset","batchNorm")),C(uo.rank===hn.rank,function(){return"Batch normalization gradient requires mean and variance to have equal ranks."}),C(un==null||uo.rank===un.rank,function(){return"Batch normalization gradient requires mean and offset to have equal ranks."}),C(sn==null||uo.rank===sn.rank,function(){return"Batch normalization gradient requires mean and scale to have equal ranks."}),Xr=to.rank===0||to.rank===1?to.as4D(1,1,1,to.size):to.rank===2?to.as4D(1,1,to.shape[0],to.shape[1]):to.rank===3?to.as4D(1,to.shape[0],to.shape[1],to.shape[2]):to;var fn=[to,uo,hn,sn];return Lt.runKernelFunc(function(co,lo){var fo=co.batchNormalization(Xr,Vu(uo),Vu(hn),an,Vu(sn),Vu(un));return lo([to,uo,hn,sn]),fo},{x:to,mean:uo,variance:hn,scale:sn,offset:un},function(co,lo){var fo=lo,ho=fo[0],mo=fo[1],Uo=fo[2],_d=fo[3],tp=_d??On(1),ep=Eo(mo.shape,Xr.shape),np=[];if(mo.rank===1){for(var rp=0;rp<Xr.shape.length-1;++rp)np.push(Xr.shape[rp]);np.push(1)}var ip=ho.sub(mo),op=co.mul(tp),ap=Ru(Uo.add(On(an))),sp=ap.mul(ap).mul(ap).mul(On(-.5));return{x:function(){return mo.rank===1?co.mul(Lr(ap.as4D(1,1,1,mo.shape[0]),np)).mul(tp).reshape(ho.shape):co.mul(ap).mul(tp).reshape(ho.shape)},mean:function(){var up=ap.mul(On(-1)).mul(op);return mo.rank===1&&(up=up.sum(ep)),up.reshape(mo.shape)},variance:function(){var up=sp.mul(ip).mul(op);return mo.rank===1&&(up=up.sum(ep)),up.reshape(mo.shape)},scale:function(){var up=ip.mul(ap),pp=co.mul(up);return mo.rank===1&&(pp=pp.sum(ep)),pp.reshape(mo.shape)},offset:function(){var up=co;return mo.rank===1&&(up=up.sum(ep)),up.reshape(mo.shape)}}},"BatchNormalization",{varianceEpsilon:an},fn).reshape(to.shape)}function Vu(Mt){return Mt==null?null:Mt.rank===0?Mt.as1D():Mt.rank===1?Mt:Mt.rank===2?Mt.as4D(1,1,Mt.shape[0],Mt.shape[1]):Mt.rank===3?Mt.as4D(1,Mt.shape[0],Mt.shape[1],Mt.shape[2]):Mt}function zu(){Xe("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon")}var Gu=An({batchNormalization2d_:function(Mt,st,nn,rn,on,an){return rn===void 0&&(rn=.001),zu(),Pu(Mt,st,nn,an,on,rn)}}),Hu=An({batchNormalization3d_:function(Mt,st,nn,rn,on,an){return rn===void 0&&(rn=.001),zu(),Lu(Mt,st,nn,an,on,rn)}}),qu=An({batchNormalization4d_:function(Mt,st,nn,rn,on,an){return rn===void 0&&(rn=.001),zu(),Wu(Mt,st,nn,an,on,rn)}}),Ku=An({batchNormalization_:function(Mt,st,nn,rn,on,an){return rn===void 0&&(rn=.001),zu(),Uu(Mt,st,nn,an,on,rn)}}),ju=An({batchNorm_:Uu}),Xu=An({batchNorm2d_:Pu}),Yu=An({batchNorm3d_:Lu}),$u=An({batchNorm4d_:Wu}),Qu=An({logicalAnd_:function(Mt,st){var nn=mn(Mt,"a","logicalAnd","bool"),rn=mn(st,"b","logicalAnd","bool");return Ro(nn.shape,rn.shape),Lt.runKernelFunc(function(on){return on.logicalAnd(nn,rn)},{a:nn,b:rn},null,"LogicalAnd")}}),Ju=An({logicalNot_:function(Mt){var st=mn(Mt,"x","logicalNot","bool");return Lt.runKernelFunc(function(nn){return nn.logicalNot(st)},{$x:st})}}),Zu=An({logicalOr_:function(Mt,st){var nn=mn(Mt,"a","logicalOr","bool"),rn=mn(st,"b","logicalOr","bool");return Ro(nn.shape,rn.shape),Lt.runKernelFunc(function(on){return on.logicalOr(nn,rn)},{$a:nn,$b:rn})}}),tc=An({logicalXor_:function(Mt,st){var nn=mn(Mt,"a","logicalXor","bool"),rn=mn(st,"b","logicalXor","bool");return Ro(nn.shape,rn.shape),Zu(Mt,st).logicalAnd(Qu(Mt,st).logicalNot())}}),ec=An({where_:function(Mt,st,nn){var rn=mn(st,"a","where"),on=mn(nn,"b","where"),an=mn(Mt,"condition","where","bool");return E(rn.shape,on.shape,"Error in where: "),an.rank===1?C(an.shape[0]===rn.shape[0],function(){return"The first dimension of `a` must match the size of `condition`."}):E(an.shape,on.shape,"Error in where: "),Lt.runKernelFunc(function(sn,un){var Xr=sn.select(an,rn,on);return un([an]),Xr},{$condition:an,$a:rn,$b:on},function(sn,un){var Xr=un[0];return{$condition:function(){return Xn(Xr).toFloat()},$a:function(){return sn.mul(Xr.cast(sn.dtype))},$b:function(){return sn.mul(Xr.logicalNot().cast(sn.dtype))}}})}}),nc=function(Mt){return n$1(this,void 0,void 0,function(){var st,nn,rn;return r(this,function(on){switch(on.label){case 0:return[4,(st=mn(Mt,"condition","whereAsync","bool")).data()];case 1:return nn=on.sent(),rn=na(st.shape,nn),Mt!==st&&st.dispose(),[2,rn]}})})},rc=An({add_:function(Mt,st){var nn,rn=mn(Mt,"a","add"),on=mn(st,"b","add");nn=Nt(rn,on),rn=nn[0],on=nn[1];var an=Ro(rn.shape,on.shape);return Lt.runKernelFunc(function(sn){return sn.add(rn,on)},{a:rn,b:on},function(sn){return{a:function(){var un=sn,Xr=Eo(rn.shape,an);return Xr.length>0&&(un=un.sum(Xr)),un.reshape(rn.shape)},b:function(){var un=sn,Xr=Eo(on.shape,an);return Xr.length>0&&(un=un.sum(Xr)),un.reshape(on.shape)}}},"Add")}}),oc=An({addN_:function(Mt){C(Array.isArray(Mt),function(){return"The argument passed to tf.addN() must be a list of tensors"}),C(Mt.length>=1,function(){return"Must pass at least one tensor to tf.addN(), but got "+Mt.length});var st=Mt.map(function(on,an){return mn(on,"tensors"+an,"addN")}),nn=st[0];st.forEach(function(on){if(on.dtype!==nn.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),st.forEach(function(on){if(!S(on.shape,nn.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});var rn=st;return Lt.runKernelFunc(function(on){return on.addN(st)},rn,function(on){var an={};return st.forEach(function(sn,un){an[un]=function(){return on.clone()}}),an},"AddN")}}),ac=An({addStrict_:function(Mt,st){var nn=mn(Mt,"a","addStrict"),rn=mn(st,"b","addStrict");return E(nn.shape,rn.shape,"Error in addStrict: "),nn.add(rn)}}),ic=An({atan2_:function(Mt,st){var nn,rn=mn(Mt,"a","atan2"),on=mn(st,"b","atan2");nn=Nt(rn,on),rn=nn[0],on=nn[1];var an=Ro(rn.shape,on.shape);return Lt.runKernelFunc(function(sn,un){var Xr=sn.atan2(rn,on);return un([rn,on]),Xr},{$a:rn,$b:on},function(sn,un){var Xr=un[0],to=un[1];return{$a:function(){var uo=rc(Xr.square(),to.square()),hn=sn.mul(to.div(uo)),fn=Eo(Xr.shape,an);return fn.length>0&&(hn=hn.sum(fn)),hn.reshape(Xr.shape)},$b:function(){var uo=rc(Xr.square(),to.square()),hn=wu(sn.mul(Xr.div(uo))),fn=Eo(to.shape,an);return fn.length>0&&(hn=hn.sum(fn)),hn.reshape(to.shape)}}})}}),sc=An({div_:function(Mt,st){var nn,rn=mn(Mt,"a","div"),on=mn(st,"b","div");if(nn=Nt(rn,on),rn=nn[0],on=nn[1],rn.dtype==="int32"&&on.dtype==="int32")return lc(rn,on);var an=Ro(rn.shape,on.shape);return Lt.runKernelFunc(function(sn,un){var Xr=sn.realDivide(rn,on);return un([rn,on]),Xr},{a:rn,b:on},function(sn,un){var Xr=un[0],to=un[1];return{a:function(){var uo=sn.div(to.toFloat()),hn=Eo(Xr.shape,an);return hn.length>0?uo.sum(hn).reshape(Xr.shape):uo},b:function(){var uo=sn.mul(Xr.toFloat()),hn=Eo(to.shape,an);hn.length>0&&(uo=uo.sum(hn).reshape(to.shape));var fn=to.square();return uo.div(fn.toFloat()).neg()}}},"Div")}}),uc=An({divNoNan_:function(Mt,st){var nn,rn=mn(Mt,"a","div"),on=mn(st,"b","div");rn=(nn=Nt(rn,on))[0],on=nn[1];var an=sc(rn,on),sn=Xn(an),un=on.equal(sn);return ec(un,sn,an)}}),cc=An({divStrict_:function(Mt,st){var nn=mn(Mt,"a","div"),rn=mn(st,"b","div");return E(nn.shape,rn.shape,"Error in divideStrict: "),nn.div(rn)}}),lc=An({floorDiv_:function(Mt,st){var nn,rn=mn(Mt,"a","floorDiv"),on=mn(st,"b","floorDiv");nn=Nt(rn,on),rn=nn[0],on=nn[1];var an=Ro(rn.shape,on.shape);return Lt.runKernelFunc(function(sn,un){var Xr=sn.floorDiv(rn,on);return un([rn,on]),Xr},{a:rn,b:on},function(sn,un){var Xr=un[0],to=un[1];return{a:function(){var uo=sn.div(to.toFloat()),hn=Eo(Xr.shape,an);return hn.length>0?uo.sum(hn).reshape(Xr.shape):uo},b:function(){var uo=sn.mul(Xr.toFloat()),hn=Eo(to.shape,an);hn.length>0&&(uo=uo.sum(hn).reshape(to.shape));var fn=to.square();return uo.div(fn.toFloat()).neg()}}},"FloorDiv")}}),hc=An({maximum_:function(Mt,st){var nn,rn=mn(Mt,"a","maximum"),on=mn(st,"b","maximum");return nn=Nt(rn,on),rn=nn[0],on=nn[1],rn.dtype==="bool"&&(rn=rn.toInt(),on=on.toInt()),Ro(rn.shape,on.shape),Lt.runKernelFunc(function(an,sn){var un=an.maximum(rn,on);return sn([rn,on]),un},{a:rn,b:on},function(an,sn){var un=sn[0],Xr=sn[1];return{a:function(){return an.mul(un.greaterEqual(Xr).toFloat())},b:function(){return an.mul(un.less(Xr).toFloat())}}},"Maximum")}}),fc=An({maximumStrict_:function(Mt,st){var nn=mn(Mt,"a","maximumStrict"),rn=mn(st,"b","maximumStrict");return E(nn.shape,rn.shape,"Error in maximumStrict: "),nn.maximum(rn)}}),dc=An({minimum_:function(Mt,st){var nn,rn=mn(Mt,"a","minimum"),on=mn(st,"b","minimum");return nn=Nt(rn,on),rn=nn[0],on=nn[1],rn.dtype==="bool"&&(rn=rn.toInt(),on=on.toInt()),Ro(rn.shape,on.shape),Lt.runKernelFunc(function(an,sn){var un=an.minimum(rn,on);return sn([rn,on]),un},{a:rn,b:on},function(an,sn){var un=sn[0],Xr=sn[1];return{a:function(){return an.mul(un.lessEqual(Xr).toFloat())},b:function(){return an.mul(un.greater(Xr).toFloat())}}},"Minimum")}}),pc=An({minimumStrict_:function(Mt,st){var nn=mn(Mt,"a","minimumStrict"),rn=mn(st,"b","minimumStrict");return E(nn.shape,rn.shape,"Error in minimumStrict: "),nn.minimum(rn)}}),vc=An({mod_:function(Mt,st){var nn,rn=mn(Mt,"a","mod"),on=mn(st,"b","mod");nn=Nt(rn,on),rn=nn[0],on=nn[1];var an=Ro(rn.shape,on.shape);return Lt.runKernelFunc(function(sn,un){var Xr=sn.mod(rn,on);return un([rn,on]),Xr},{$a:rn,$b:on},function(sn,un){var Xr=un[0],to=un[1];return{$a:function(){var uo=Eo(Xr.shape,an);return uo.length>0?sn.sum(uo).reshape(Xr.shape):sn},$b:function(){var uo=sn.mul(Xr.div(to).floor().neg()),hn=Eo(to.shape,an);return hn.length>0?uo.sum(hn).reshape(to.shape):uo}}})}}),mc=An({modStrict_:function(Mt,st){var nn=mn(Mt,"a","modStrict"),rn=mn(st,"b","modStrict");return E(nn.shape,rn.shape,"Error in modStrict: "),nn.mod(rn)}}),gc=An({mul_:function(Mt,st){var nn,rn=mn(Mt,"a","mul"),on=mn(st,"b","mul");nn=Nt(rn,on),rn=nn[0],on=nn[1];var an=Ro(rn.shape,on.shape);return Lt.runKernelFunc(function(sn,un){var Xr=sn.multiply(rn,on);return un([rn,on]),Xr},{a:rn,b:on},function(sn,un){var Xr=un[0],to=un[1];return{a:function(){var uo=sn.mul(to.toFloat()),hn=Eo(Xr.shape,an);return hn.length>0?uo.sum(hn).reshape(Xr.shape):uo},b:function(){var uo=sn.mul(Xr.toFloat()),hn=Eo(to.shape,an);return hn.length>0?uo.sum(hn).reshape(to.shape):uo}}},"Mul")}}),yc=An({mulStrict_:function(Mt,st){var nn=mn(Mt,"a","mul"),rn=mn(st,"b","mul");return E(nn.shape,rn.shape,"Error in multiplyStrict: "),nn.mul(rn)}}),xc=An({pow_:function(Mt,st){var nn,rn=mn(Mt,"base","pow"),on=mn(st,"exp","pow");nn=Nt(rn,on),rn=nn[0],on=nn[1];var an=Ro(rn.shape,on.shape),sn=[rn,on];return Lt.runKernelFunc(function(un,Xr){var to=un.pow(rn,on);return Xr([rn,on,to]),to},{a:rn,b:on},function(un,Xr){var to=Xr[0],uo=Xr[1],hn=Xr[2];return{a:function(){var fn=uo.toFloat(),co=un.mul(fn.mul(to.pow(fn.sub(On(1))))),lo=Eo(to.shape,an);return lo.length>0&&(co=co.sum(lo)),co.reshape(to.shape)},b:function(){var fn=to.greater(0),co=to.log().where(fn,Xn(to)),lo=un.mul(hn.mul(co)),fo=Eo(uo.shape,an);return fo.length>0&&(lo=lo.sum(fo)),lo.reshape(uo.shape)}}},"Pow",{},sn,[!0])}}),bc=An({powStrict_:function(Mt,st){return E(Mt.shape,st.shape,"Error in powStrict: "),Mt.pow(st)}}),wc=An({squaredDifferenceStrict_:function(Mt,st){var nn=mn(Mt,"a","squaredDifferenceStrict"),rn=mn(st,"b","squaredDifferenceStrict");return E(nn.shape,rn.shape,"Error in squaredDifferenceStrict: "),nn.squaredDifference(rn)}}),Cc=An({sub_:function(Mt,st){var nn,rn=mn(Mt,"a","sub"),on=mn(st,"b","sub");nn=Nt(rn,on),rn=nn[0],on=nn[1];var an=Ro(rn.shape,on.shape);return Lt.runKernelFunc(function(sn){return sn.subtract(rn,on)},{a:rn,b:on},function(sn){return{a:function(){var un=sn,Xr=Eo(rn.shape,an);return Xr.length>0&&(un=un.sum(Xr)),un.reshape(rn.shape)},b:function(){var un=sn,Xr=Eo(on.shape,an);return Xr.length>0&&(un=un.sum(Xr)),un.neg().reshape(on.shape)}}},"Sub")}}),Ec=An({subStrict_:function(Mt,st){var nn=mn(Mt,"a","subStrict"),rn=mn(st,"b","subStrict");return E(nn.shape,rn.shape,"Error in subStrict: "),nn.sub(rn)}}),Rc=An({equal_:function(Mt,st){var nn,rn=mn(Mt,"a","equal"),on=mn(st,"b","equal");return nn=Nt(rn,on),rn=nn[0],on=nn[1],Ro(rn.shape,on.shape),Lt.runKernelFunc(function(an){return an.equal(rn,on)},{$a:rn,$b:on})}}),Ic=An({equalStrict_:function(Mt,st){var nn=mn(Mt,"a","equalStrict"),rn=mn(st,"b","equalStrict");return E(nn.shape,rn.shape,"Error in equalStrict: "),nn.equal(rn)}}),kc=An({greater_:function(Mt,st){var nn,rn=mn(Mt,"a","greater"),on=mn(st,"b","greater");return nn=Nt(rn,on),rn=nn[0],on=nn[1],Ro(rn.shape,on.shape),Lt.runKernelFunc(function(an){return an.greater(rn,on)},{a:rn,b:on},null,"Greater")}}),Sc=An({greaterEqual_:function(Mt,st){var nn,rn=mn(Mt,"a","greaterEqual"),on=mn(st,"b","greaterEqual");return nn=Nt(rn,on),rn=nn[0],on=nn[1],Ro(rn.shape,on.shape),Lt.runKernelFunc(function(an,sn){var un=an.greaterEqual(rn,on);return sn([rn,on]),un},{a:rn,b:on},function(an,sn){var un=sn[0],Xr=sn[1];return{a:function(){return Xn(un)},b:function(){return Xn(Xr)}}},"GreaterEqual")}}),Ac=An({greaterEqualStrict_:function(Mt,st){var nn=mn(Mt,"a","greaterEqualStrict"),rn=mn(st,"b","greaterEqualStrict");return E(nn.shape,rn.shape,"Error in greaterEqualStrict: "),nn.greaterEqual(rn)}}),Dc=An({greaterStrict_:function(Mt,st){var nn=mn(Mt,"a","greaterStrict"),rn=mn(st,"b","greaterStrict");return E(nn.shape,rn.shape,"Error in greaterStrict: "),nn.greater(rn)}}),Tc=An({less_:function(Mt,st){var nn,rn=mn(Mt,"a","less"),on=mn(st,"b","less");return nn=Nt(rn,on),rn=nn[0],on=nn[1],Ro(rn.shape,on.shape),Lt.runKernelFunc(function(an){return an.less(rn,on)},{a:rn,b:on},null,"Less")}}),Nc=An({lessEqual_:function(Mt,st){var nn,rn=mn(Mt,"a","lessEqual"),on=mn(st,"b","lessEqual");return nn=Nt(rn,on),rn=nn[0],on=nn[1],Ro(rn.shape,on.shape),Lt.runKernelFunc(function(an,sn){var un=an.lessEqual(rn,on);return sn([rn,on]),un},{a:rn,b:on},null,"LessEqual")}}),Fc=An({lessEqualStrict_:function(Mt,st){var nn=mn(Mt,"a","lessEqualStrict"),rn=mn(st,"b","lessEqualStrict");return E(nn.shape,rn.shape,"Error in lessEqualStrict: "),nn.lessEqual(rn)}}),_c=An({lessStrict_:function(Mt,st){var nn=mn(Mt,"a","lessStrict"),rn=mn(st,"b","lessStrict");return E(nn.shape,rn.shape,"Error in lessStrict: "),nn.less(rn)}}),Oc=An({notEqual_:function(Mt,st){var nn,rn=mn(Mt,"a","notEqual"),on=mn(st,"b","notEqual");return nn=Nt(rn,on),rn=nn[0],on=nn[1],Ro(rn.shape,on.shape),Lt.runKernelFunc(function(an){return an.notEqual(rn,on)},{a:rn,b:on},null,"NotEqual")}}),Mc=An({notEqualStrict_:function(Mt,st){var nn=mn(Mt,"a","notEqualStrict"),rn=mn(st,"b","notEqualStrict");return E(nn.shape,rn.shape,"Error in notEqualStrict: "),nn.notEqual(rn)}});function Bc(Mt,st){for(var nn=[],rn=Mt;rn<st;++rn)nn.push(rn);return nn}function Pc(Mt){for(var st=[],nn=0;nn<Mt.length;++nn)for(var rn=0;rn<Mt[nn].length;++rn)st.push(Mt[nn][rn]);return st}var Lc=An({gather_:function(Mt,st,nn){nn===void 0&&(nn=0);var rn=mn(Mt,"x","gather"),on=mn(st,"indices","gather","int32");nn=O(nn,rn.shape)[0];var an=function(sn,un,Xr){for(var to=sn.shape[Xr],uo=[],hn=1,fn=1,co=0;co<Xr;co++)uo.push(sn.shape[co]),hn*=sn.shape[co];for(co=0;co<un.rank;co++)uo.push(un.shape[co]);for(co=Xr+1;co<sn.rank;co++)uo.push(sn.shape[co]),fn*=sn.shape[co];return{batchSize:hn,sliceSize:fn,dimSize:to,outputShape:uo}}(rn,on,nn);return Lt.runKernelFunc(function(sn,un){var Xr=sn.gather(rn,on.flatten(),nn);return un([on]),Xr},{x:rn,indices:on},function(sn,un){var Xr=un[0];return{x:function(){var to=rn.shape,uo=Xr.size,hn=to.slice(0,nn),fn=hn.length,co=to.slice(nn,to.length).slice(1),lo=co.length,fo=Bc(0,fn),ho=Bc(fn+1,fn+1+lo),mo=Pc([hn,[uo],co]),Uo=sn.reshape(mo),_d=Xr.reshape([uo]),tp=Pc([[fn],fo,ho]),ep=Uo.transpose(tp),np=Wc(ep,_d,rn.shape[nn]),rp=Rn(tp);return np=np.transpose(rp)},indices:function(){return Xr}}},"Gather",{axis:nn}).reshape(an.outputShape)}}),Wc=An({unsortedSegmentSum_:function(Mt,st,nn){var rn=mn(Mt,"x","unsortedSegmentSum"),on=mn(st,"segmentIds","unsortedSegmentSum","int32");return C(A(nn),function(){return"numSegments must be of dtype int"}),Lt.runKernelFunc(function(an,sn){var un=an.unsortedSegmentSum(rn,on,nn);return sn([on]),un},{$x:rn},function(an,sn){var un=sn[0];return{$x:function(){return function(Xr,to){for(var uo=hc(to,Xn(to)),hn=Lc(Xr,uo),fn=Sc(to,On(0,"int32")),co=hn.rank-fn.rank,lo=0;lo<co;++lo)fn=wr(fn,lo+1);fn=Qu(fn,zn(hn.shape,"bool"));var fo=Xn(hn);return ec(fn,hn,fo)}(an,un)}}})}}),Uc=function(Mt,st,nn){return n$1(this,void 0,void 0,function(){var rn,on,an,sn,un,Xr,to,uo,hn,fn,co,lo,fo;return r(this,function(ho){switch(ho.label){case 0:for(rn=mn(Mt,"tensor","boolMask"),on=mn(st,"mask","boolMask","bool"),an=nn??0,sn=on.rank,un=rn.shape,C(sn>0,function(){return"mask cannot be scalar"}),E(un.slice(an,an+sn),on.shape,"mask's shape must match the first K dimensions of tensor's shape,"),Xr=1,to=an;to<an+sn;to++)Xr*=un[to];return uo=un.slice(0,an).concat([Xr],un.slice(an+sn)),hn=rn.reshape(uo),fn=on.reshape([-1]),[4,nc(fn)];case 1:return co=ho.sent(),lo=co.squeeze([1]),fo=Lc(hn,lo,an),Mt!==rn&&rn.dispose(),st!==on&&on.dispose(),lo.dispose(),hn.dispose(),fn.dispose(),co.dispose(),[2,fo]}})})};function Vc(Mt,st,nn,rn,on,an,sn){an===void 0&&(an="NHWC"),C(Mt.length===st.rank,function(){return"Length of inShape ("+Mt.length+") and rank of dy ("+st.rank+") must match"});var un=Mt,Xr=st,to=!1;st.rank===3&&(to=!0,Xr=st.as4D(1,st.shape[0],st.shape[1],st.shape[2]),un=[1,Mt[0],Mt[1],Mt[2]]),C(un.length===4,function(){return"Error in conv2dDerInput: inShape must be length 4, but got length "+un.length+"."}),C(Xr.rank===4,function(){return"Error in conv2dDerInput: dy must be rank 4, but got rank "+Xr.rank}),C(nn.rank===4,function(){return"Error in conv2dDerInput: filter must be rank 4, but got rank "+nn.rank});var uo=an==="NHWC"?un[3]:un[1],hn=an==="NHWC"?Xr.shape[3]:Xr.shape[1];C(uo===nn.shape[2],function(){return"Error in conv2dDerInput: depth of input ("+uo+") must match input depth for filter "+nn.shape[2]+"."}),C(hn===nn.shape[3],function(){return"Error in conv2dDerInput: depth of output ("+hn+") must match output depth for filter "+nn.shape[3]+"."}),sn!=null&&C(A(on),function(){return"Error in conv2dDerInput: pad must be an integer when using, dimRoundingMode "+sn+" but got pad "+on+"."});var fn=Bo(an),co=So(un,nn.shape,rn,1,on,sn,!1,fn),lo=Lt.runKernelFunc(function(fo,ho){var mo=fo.conv2dDerInput(Xr,nn,co);return ho([nn,Xr]),mo},{dy4D:Xr,filter:nn},function(fo,ho){var mo=ho[0],Uo=ho[1];return{dy4D:function(){return qc(fo,mo,rn,on,an,1,sn)},filter:function(){return jc(fo,Uo,mo.shape,rn,on,an,sn)}}});return to?lo.as3D(lo.shape[1],lo.shape[2],lo.shape[3]):lo}function zc(Mt){var st=function(an){return typeof an=="number"?[an,an,an]:an.length===2?[an[0],an[1],1]:an}(Mt),nn=st[0],rn=st[1],on=st[2];return nn===1&&rn===1&&on===1}function Gc(Mt,st,nn,rn,on){C(Mt.length===st.rank,function(){return"Length of inShape ("+Mt.length+") and rank of dy ("+st.rank+") must match"});var an=Mt,sn=st,un=!1;st.rank===4&&(un=!0,sn=st.as5D(1,st.shape[0],st.shape[1],st.shape[2],st.shape[3]),an=[1,Mt[0],Mt[1],Mt[2],Mt[3]]);var Xr=an[4],to=sn.shape[4];C(an.length===5,function(){return"Error in conv3dDerInput: inShape must be length 5, but got length "+an.length+"."}),C(sn.rank===5,function(){return"Error in conv3dDerInput: dy must be rank 5, but got rank "+sn.rank}),C(nn.rank===5,function(){return"Error in conv3dDerInput: filter must be rank 5, but got rank "+nn.rank}),C(Xr===nn.shape[3],function(){return"Error in conv3dDerInput: depth of input ("+Xr+") must match input depth for filter "+nn.shape[3]+"."}),C(to===nn.shape[4],function(){return"Error in conv3dDerInput: depth of output ("+to+") must match output depth for filter "+nn.shape[4]+"."});var uo=Ao(an,nn.shape,rn,1,on),hn=Lt.runKernelFunc(function(fn){return fn.conv3dDerInput(sn,nn,uo)},{dy5D:sn});return un?hn.as4D(hn.shape[1],hn.shape[2],hn.shape[3],hn.shape[4]):hn}var Hc=An({conv1d_:function(Mt,st,nn,rn,on,an,sn){on===void 0&&(on="NWC"),an===void 0&&(an=1);var un=mn(Mt,"x","conv1d"),Xr=mn(st,"filter","conv1d"),to=un,uo=!1;un.rank===2&&(uo=!0,to=un.as3D(1,un.shape[0],un.shape[1])),C(to.rank===3,function(){return"Error in conv1d: input must be rank 3, but got rank "+to.rank+"."}),C(Xr.rank===3,function(){return"Error in conv1d: filter must be rank 3, but got rank "+Xr.rank+"."}),sn!=null&&C(A(rn),function(){return"Error in conv1d: pad must be an integer when using, dimRoundingMode "+sn+" but got pad "+rn+"."}),C(to.shape[2]===Xr.shape[1],function(){return"Error in conv1d: depth of input ("+to.shape[2]+") must match input depth for filter "+Xr.shape[1]+"."}),C(Mo(nn,an),function(){return"Error in conv1D: Either stride or dilation must be 1. Got stride "+nn+" and dilation '"+an+"'"}),C(on==="NWC",function(){return"Error in conv1d: got dataFormat of "+on+" but only NWC is currently supported."});var hn=Xr.as4D(1,Xr.shape[0],Xr.shape[1],Xr.shape[2]),fn=to.as4D(to.shape[0],1,to.shape[1],to.shape[2]),co=qc(fn,hn,[1,nn],rn,"NHWC",[1,an],sn);return uo?co.as2D(co.shape[2],co.shape[3]):co.as3D(co.shape[0],co.shape[2],co.shape[3])}}),qc=An({conv2d_:function(Mt,st,nn,rn,on,an,sn){on===void 0&&(on="NHWC"),an===void 0&&(an=[1,1]);var un=mn(Mt,"x","conv2d"),Xr=mn(st,"filter","conv2d"),to=un,uo=!1;un.rank===3&&(uo=!0,to=un.as4D(1,un.shape[0],un.shape[1],un.shape[2])),C(to.rank===4,function(){return"Error in conv2d: input must be rank 4, but got rank "+to.rank+"."}),C(Xr.rank===4,function(){return"Error in conv2d: filter must be rank 4, but got rank "+Xr.rank+"."}),sn!=null&&C(A(rn),function(){return"Error in conv2d: pad must be an integer when using, dimRoundingMode "+sn+" but got pad "+rn+"."});var hn=on==="NHWC"?to.shape[3]:to.shape[1];C(hn===Xr.shape[2],function(){return"Error in conv2d: depth of input ("+hn+") must match input depth for filter "+Xr.shape[2]+"."}),C(Mo(nn,an),function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+nn+" and dilations '"+an+"'"});var fn=Bo(on),co=So(to.shape,Xr.shape,nn,an,rn,sn,!1,fn),lo=[Xr,to],fo=Lt.runKernelFunc(function(ho,mo){var Uo=ho.conv2d(to,Xr,co);return mo([Xr,to]),Uo},{x:to,filter:Xr},function(ho,mo){var Uo=mo,_d=Uo[0],tp=Uo[1];return C(Oo(an),function(){return"Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+an+"'"}),{x:function(){return Xc(tp.shape,ho,_d,nn,rn,on)},filter:function(){return jc(tp,ho,_d.shape,nn,rn,on)}}},"Conv2D",co,lo);return uo?fo.as3D(fo.shape[1],fo.shape[2],fo.shape[3]):fo}}),Kc=An({conv3d_:function(Mt,st,nn,rn,on,an){on===void 0&&(on="NDHWC"),an===void 0&&(an=[1,1,1]);var sn=mn(Mt,"x","conv3d"),un=mn(st,"filter","conv3d"),Xr=sn,to=!1;sn.rank===4&&(to=!0,Xr=sn.as5D(1,sn.shape[0],sn.shape[1],sn.shape[2],sn.shape[3])),C(Xr.rank===5,function(){return"Error in conv3d: input must be rank 5, but got rank "+Xr.rank+"."}),C(un.rank===5,function(){return"Error in conv3d: filter must be rank 5, but got rank "+un.rank+"."}),C(Xr.shape[4]===un.shape[3],function(){return"Error in conv3d: depth of input ("+Xr.shape[4]+") must match input depth for filter "+un.shape[3]+"."}),C(function(fn,co){return zc(fn)||zc(co)}(nn,an),function(){return"Error in conv3D: Either strides or dilations must be 1. Got strides "+nn+" and dilations '"+an+"'"}),C(on==="NDHWC",function(){return"Error in conv3d: got dataFormat of "+on+" but only NDHWC is currently supported."});var uo=Ao(Xr.shape,un.shape,nn,an,rn),hn=Lt.runKernelFunc(function(fn,co){var lo=fn.conv3d(Xr,un,uo);return co([Xr,un]),lo},{x:Xr,$filter:un},function(fn,co){C(zc(an),function(){return"Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+an+"'"});var lo=co[0],fo=co[1];return{x:function(){return Gc(lo.shape,fn,fo,nn,rn)},$filter:function(){return function(ho,mo,Uo,_d,tp){var ep=ho;ho.rank===4&&(ep=ho.as5D(1,ho.shape[0],ho.shape[1],ho.shape[2],ho.shape[3]));var np=mo;np.rank===4&&(np=mo.as5D(1,mo.shape[0],mo.shape[1],mo.shape[2],mo.shape[3])),C(ep.rank===5,function(){return"Error in conv3dDerFilter: input must be rank 5, but got shape "+ep.shape+"."}),C(np.rank===5,function(){return"Error in conv3dDerFilter: dy must be rank 5, but got shape "+np.shape+"."}),C(Uo.length===5,function(){return"Error in conv3dDerFilter: filterShape must be length 5, but got "+Uo+"."}),C(ep.shape[4]===Uo[3],function(){return"Error in conv3dDerFilter: depth of input "+ep.shape[4]+") must match input depth in filter ("+Uo[3]+"."}),C(np.shape[4]===Uo[4],function(){return"Error in conv3dDerFilter: depth of dy ("+np.shape[4]+") must match output depth for filter ("+Uo[4]+")."});var rp=Ao(ep.shape,Uo,_d,1,tp);return Lt.runKernelFunc(function(ip){return ip.conv3dDerFilter(ep,np,rp)},{x5D:ep,dy5D:np})}(lo,fn,fo.shape,nn,rn)}}});return to?hn.as4D(hn.shape[1],hn.shape[2],hn.shape[3],hn.shape[4]):hn}}),jc=An({conv2dDerFilter_:function(Mt,st,nn,rn,on,an,sn){an===void 0&&(an="NHWC");var un=Mt;Mt.rank===3&&(un=Mt.as4D(1,Mt.shape[0],Mt.shape[1],Mt.shape[2]));var Xr=st;Xr.rank===3&&(Xr=st.as4D(1,st.shape[0],st.shape[1],st.shape[2])),C(un.rank===4,function(){return"Error in conv2dDerFilter: input must be rank 4, but got shape "+un.shape+"."}),C(Xr.rank===4,function(){return"Error in conv2dDerFilter: dy must be rank 4, but got shape "+Xr.shape+"."}),C(nn.length===4,function(){return"Error in conv2dDerFilter: filterShape must be length 4, but got "+nn+"."});var to=an==="NHWC"?un.shape[3]:un.shape[1],uo=an==="NHWC"?Xr.shape[3]:Xr.shape[1];C(to===nn[2],function(){return"Error in conv2dDerFilter: depth of input "+to+") must match input depth in filter ("+nn[2]+"."}),C(uo===nn[3],function(){return"Error in conv2dDerFilter: depth of dy ("+uo+") must match output depth for filter ("+nn[3]+")."}),sn!=null&&C(A(on),function(){return"Error in conv2dDerFilter: pad must be an integer when using, dimRoundingMode "+sn+" but got pad "+on+"."});var hn=Bo(an),fn=So(un.shape,nn,rn,1,on,sn,!1,hn);return Lt.runKernelFunc(function(co){return co.conv2dDerFilter(un,Xr,fn)},{x4D:un,dy4D:Xr})}}),Xc=An({conv2dDerInput_:Vc}),Yc=An({depthwiseConv2d_:function(Mt,st,nn,rn,on,an,sn){an===void 0&&(an=[1,1]);var un=mn(Mt,"x","depthwiseConv2d"),Xr=mn(st,"filter","depthwiseConv2d"),to=un,uo=!1;un.rank===3&&(uo=!0,to=un.as4D(1,un.shape[0],un.shape[1],un.shape[2])),C(to.rank===4,function(){return"Error in depthwiseConv2d: input must be rank 4, but got rank "+to.rank+"."}),C(Xr.rank===4,function(){return"Error in depthwiseConv2d: filter must be rank 4, but got rank "+Xr.rank+"."}),C(to.shape[3]===Xr.shape[2],function(){return"Error in depthwiseConv2d: number of input channels ("+to.shape[3]+") must match the inChannels dimension in filter "+Xr.shape[2]+"."}),an==null&&(an=[1,1]),C(Mo(nn,an),function(){return"Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides "+nn+" and dilations '"+an+"'"}),sn!=null&&C(A(rn),function(){return"Error in depthwiseConv2d: pad must be an integer when using, dimRoundingMode "+sn+" but got pad "+rn+"."});var hn=So(to.shape,Xr.shape,nn,an,rn,sn,!0),fn=[to,Xr],co=Lt.runKernelFunc(function(lo,fo){var ho=lo.depthwiseConv2D(to,Xr,hn);return fo([to,Xr]),ho},{x:to,filter:Xr},function(lo,fo){C(Oo(an),function(){return"Error in gradient of depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+an+"'"});var ho=fo[0],mo=fo[1];return{x:function(){return $c(ho.shape,lo,mo,hn)},filter:function(){return Qc(ho,lo,mo.shape,hn)}}},"DepthwiseConv2dNative",hn,fn);return uo?co.as3D(co.shape[1],co.shape[2],co.shape[3]):co}}),$c=An({depthwiseConv2dDerInput_:function(Mt,st,nn,rn){var on=st,an=!1;st.rank===3&&(an=!0,on=st.as4D(1,st.shape[0],st.shape[1],st.shape[2]));var sn=Lt.runKernelFunc(function(un){return un.depthwiseConv2DDerInput(on,nn,rn)},{dy4D:on});return an?sn.as3D(sn.shape[1],sn.shape[2],sn.shape[3]):sn}}),Qc=An({depthwiseConv2dDerFilter_:function(Mt,st,nn,rn){var on=Mt;Mt.rank===3&&(on=Mt.as4D(1,Mt.shape[0],Mt.shape[1],Mt.shape[2]));var an=st;return an.rank===3&&(an=st.as4D(1,st.shape[0],st.shape[1],st.shape[2])),Lt.runKernelFunc(function(sn){return sn.depthwiseConv2DDerFilter(on,an,rn)},{x4D:on,dy4D:an})}}),Jc=An({separableConv2d_:function(Mt,st,nn,rn,on,an,sn){an===void 0&&(an=[1,1]),sn===void 0&&(sn="NHWC");var un=mn(Mt,"x","separableConv2d"),Xr=mn(st,"depthwiseFilter","separableConv2d"),to=mn(nn,"pointwiseFilter","separableConv2d"),uo=un,hn=!1;if(un.rank===3&&(hn=!0,uo=un.as4D(1,un.shape[0],un.shape[1],un.shape[2])),sn==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");C(uo.rank===4,function(){return"Error in separableConv2d: input must be rank 4, but got rank "+uo.rank+"."}),C(Xr.rank===4,function(){return"Error in separableConv2d: depthwise filter must be rank 4, but got rank "+Xr.rank+"."}),C(to.rank===4,function(){return"Error in separableConv2d: pointwise filter must be rank 4, but got rank "+Xr.rank+"."}),C(to.shape[0]===1,function(){return"Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got "+to.shape[0]+"."}),C(to.shape[1]===1,function(){return"Error in separableConv2d: the second dimension of pointwise filter must be 1, but got "+to.shape[1]+"."});var fn=Xr.shape[2],co=Xr.shape[3];C(to.shape[2]===fn*co,function(){return"Error in separableConv2d: the third dimension of pointwise filter must be "+fn*co+", but got "+to.shape[2]+"."});var lo=Yc(uo,Xr,rn,on,sn,an),fo=qc(lo,to,1,"valid",sn);return hn?fo.as3D(fo.shape[1],fo.shape[2],fo.shape[3]):fo}}),Zc=An({conv2dTranspose_:function(Mt,st,nn,rn,on,an){return Vc(nn,mn(Mt,"x","conv2dTranspose"),mn(st,"filter","conv2dTranspose"),rn,on,"NHWC",an)}}),tl=An({conv3dTranspose_:function(Mt,st,nn,rn,on){return Gc(nn,mn(Mt,"x","conv3dTranspose"),mn(st,"filter","conv3dTranspose"),rn,on)}}),el=An({matMul_:function(Mt,st,nn,rn){var on;nn===void 0&&(nn=!1),rn===void 0&&(rn=!1);var an=mn(Mt,"a","matMul"),sn=mn(st,"b","matMul");on=Nt(an,sn),an=on[0],sn=on[1];var un=nn?an.shape[an.rank-2]:an.shape[an.rank-1],Xr=rn?sn.shape[sn.rank-1]:sn.shape[sn.rank-2],to=nn?an.shape[an.rank-1]:an.shape[an.rank-2],uo=rn?sn.shape[sn.rank-2]:sn.shape[sn.rank-1],hn=an.shape.slice(0,-2),fn=sn.shape.slice(0,-2),co=k$2(hn),lo=k$2(fn);C(an.rank>=2&&sn.rank>=2&&an.rank===sn.rank,function(){return"Error in matMul: inputs must have the same rank of at least 2, got ranks "+an.rank+" and "+sn.rank+"."}),C(S(hn,fn),function(){return"Error in matMul: outer dimensions ("+hn+") and ("+fn+") of Tensors with shapes "+an.shape+" and "+sn.shape+" must match."}),C(un===Xr,function(){return"Error in matMul: inner shapes ("+un+") and ("+Xr+") of Tensors with shapes "+an.shape+" and "+sn.shape+" and transposeA="+nn+" and transposeB="+rn+" must match."});var fo=an.shape.slice(0,-2).concat([to,uo]),ho=nn?an.as3D(co,un,to):an.as3D(co,to,un),mo=rn?sn.as3D(lo,uo,Xr):sn.as3D(lo,Xr,uo),Uo={transposeA:nn,transposeB:rn};return Lt.runKernelFunc(function(_d,tp){var ep=_d.batchMatMul(ho,mo,nn,rn);return tp([ho,mo]),ep},{a:ho,b:mo},function(_d,tp){var ep=tp,np=ep[0],rp=ep[1];return nn||rn?!nn&&rn?{a:function(){return _d.matMul(rp,!1,!1)},b:function(){return _d.matMul(np,!0,!1)}}:nn&&!rn?{a:function(){return rp.matMul(_d,!1,!0)},b:function(){return np.matMul(_d,!1,!1)}}:{a:function(){return rp.matMul(_d,!0,!0)},b:function(){return _d.matMul(np,!0,!0)}}:{a:function(){return _d.matMul(rp,!1,!0)},b:function(){return np.matMul(_d,!0,!1)}}},"BatchMatMul",Uo).reshape(fo)}}),nl=An({dot_:function(Mt,st){var nn=mn(Mt,"t1","dot"),rn=mn(st,"t2","dot");C(!(nn.rank!==1&&nn.rank!==2||rn.rank!==1&&rn.rank!==2),function(){return"Error in dot: inputs must all be rank 1 or 2, but got ranks "+nn.rank+" and "+rn.rank+"."});var on=nn.rank===1?nn.size:nn.shape[1],an=rn.rank===1?rn.size:rn.shape[0];return C(on===an,function(){return"Error in dot: inner dimensions of inputs must match, but got "+on+" and "+an+"."}),nn.rank===1&&rn.rank===1?nn.as2D(1,-1).matMul(rn.as2D(-1,1)).asScalar():nn.rank===1&&rn.rank===2?nn.as2D(1,-1).matMul(rn.as2D(rn.shape[0],rn.shape[1])).as1D():nn.rank===2&&rn.rank===1?nn.matMul(rn.as2D(-1,1)).as1D():nn.matMul(rn.as2D(rn.shape[0],rn.shape[1]))}}),rl=An({outerProduct_:function(Mt,st){var nn=mn(Mt,"v1","outerProduct"),rn=mn(st,"v2","outerProduct");return C(nn.rank===1&&rn.rank===1,function(){return"Error in outerProduct: inputs must be rank 1, but got ranks "+nn.rank+" and "+rn.rank+"."}),nn.as2D(-1,1).matMul(rn.as2D(1,-1))}}),ol=An({reverse_:function(Mt,st){var nn=mn(Mt,"x","reverse");if(nn.rank===0)return nn.clone();var rn=O(st,nn.shape);return Lt.runKernelFunc(function(on){return on.reverse(nn,rn)},{$x:nn},function(on){return{$x:function(){return on.reverse(rn)}}}).reshapeAs(nn)}}),al=An({reverse1d_:function(Mt){var st=mn(Mt,"x","reverse");return C(st.rank===1,function(){return"Error in reverse1D: x must be rank 1 but got rank "+st.rank+"."}),ol(st,0)}}),il=An({reverse2d_:function(Mt,st){var nn=mn(Mt,"x","reverse");return C(nn.rank===2,function(){return"Error in reverse2D: x must be rank 2 but got rank "+nn.rank+"."}),ol(nn,st)}}),sl=An({reverse3d_:function(Mt,st){var nn=mn(Mt,"x","reverse");return C(nn.rank===3,function(){return"Error in reverse3D: x must be rank 3 but got rank "+nn.rank+"."}),ol(nn,st)}}),ul=An({reverse4d_:function(Mt,st){var nn=mn(Mt,"x","reverse");return C(nn.rank===4,function(){return"Error in reverse4D: x must be rank 4 but got rank "+nn.rank+"."}),ol(nn,st)}});function cl(Mt,st,nn,rn,on,an){var sn=mn(Mt,"x","maxPool"),un=sn,Xr=!1;sn.rank===3&&(Xr=!0,un=sn.as4D(1,sn.shape[0],sn.shape[1],sn.shape[2])),C(un.rank===4,function(){return"Error in maxPool: input must be rank 4 but got rank "+un.rank+"."}),C(Mo(nn,rn),function(){return"Error in maxPool: Either strides or dilations must be 1. Got strides "+nn+" and dilations '"+rn+"'"}),an!=null&&C(A(on),function(){return"Error in maxPool: pad must be an integer when using, dimRoundingMode "+an+" but got pad "+on+"."});var to=Io(un.shape,st,nn,rn,on,an);if(to.filterWidth===1&&to.filterHeight===1&&S(to.inShape,to.outShape))return sn.clone();var uo=[un],hn=Lt.runKernelFunc(function(fn,co){var lo=fn.maxPool(un,to);return co([un,lo]),lo},{x:un},function(fn,co){var lo=co[0],fo=co[1];return{x:function(){return function(ho,mo,Uo,_d,tp,ep,np,rp){var ip=mn(ho,"dy","maxPoolBackprop"),op=mn(mo,"input","maxPoolBackprop"),ap=mn(Uo,"output","maxPoolBackprop");C(op.rank===ip.rank,function(){return"Rank of input ("+op.rank+") does not match rank of dy ("+ip.rank+")"}),C(Mo(tp,ep),function(){return"Error in maxPoolBackProp: Either strides or dilations must be 1. Got strides "+tp+" and dilations '"+ep+"'"}),C(ip.rank===4,function(){return"Error in maxPoolBackprop: dy must be rank 4 but got rank "+ip.rank+"."}),C(op.rank===4,function(){return"Error in maxPoolBackprop: input must be rank 4 but got rank "+op.rank+"."});var sp=Io(op.shape,_d,tp,ep,np,rp);return Lt.runKernelFunc(function(up){return up.maxPoolBackprop(ip,op,ap,sp)},{$dy:ip,$input:op})}(fn,lo,fo,st,nn,rn,on)}}},"MaxPool",to,uo);return Xr?hn.as3D(hn.shape[1],hn.shape[2],hn.shape[3]):hn}function ll(Mt,st,nn,rn,on,an){var sn=mn(Mt,"x","avgPool","float32");C(Mo(nn,rn),function(){return"Error in avgPool: Either strides or dilations must be 1. Got strides "+nn+" and dilations '"+rn+"'"});var un=sn,Xr=!1;sn.rank===3&&(Xr=!0,un=sn.as4D(1,sn.shape[0],sn.shape[1],sn.shape[2])),C(un.rank===4,function(){return"Error in avgPool: x must be rank 4 but got rank "+un.rank+"."}),an!=null&&C(A(on),function(){return"Error in avgPool: pad must be an integer when using, dimRoundingMode "+an+" but got pad "+on+"."});var to=Io(un.shape,st,nn,rn,on,an);if(to.filterWidth===1&&to.filterHeight===1&&S(to.inShape,to.outShape))return sn.clone();var uo=Lt.runKernelFunc(function(hn){return hn.avgPool(un,to)},{x:un},function(hn){return{x:function(){return function(fn,co,lo,fo,ho,mo){var Uo=mn(fn,"dy","avgPoolBackprop"),_d=mn(co,"input","avgPoolBackprop");C(_d.rank===Uo.rank,function(){return"Rank of input ("+_d.rank+") does not match rank of dy ("+Uo.rank+")"}),C(Mo(fo,ho),function(){return"Error in avgPoolBackprop: Either strides or dilations must be 1. Got strides "+fo+" and dilations '"+ho+"'"});var tp=_d,ep=Uo,np=!1;_d.rank===3&&(np=!0,tp=_d.as4D(1,_d.shape[0],_d.shape[1],_d.shape[2]),ep=Uo.as4D(1,Uo.shape[0],Uo.shape[1],Uo.shape[2])),C(ep.rank===4,function(){return"Error in avgPoolBackprop: dy must be rank 4 but got rank "+ep.rank+"."}),C(tp.rank===4,function(){return"Error in avgPoolBackprop: input must be rank 4 but got rank "+tp.rank+"."});var rp=Io(tp.shape,lo,fo,ho,mo),ip=Lt.runKernelFunc(function(op){return op.avgPoolBackprop(ep,tp,rp)},{dy4D:ep,input4D:tp});return np?ip.as3D(ip.shape[1],ip.shape[2],ip.shape[3]):ip}(hn,un,st,nn,rn,on)}}},"AvgPool",to);return uo=uo.cast(sn.dtype),Xr?uo.as3D(uo.shape[1],uo.shape[2],uo.shape[3]):uo}var hl=An({maxPool_:function(Mt,st,nn,rn,on){return cl(Mt,st,nn,1,rn,on)}}),fl=An({avgPool_:function(Mt,st,nn,rn,on){return ll(Mt,st,nn,1,rn,on)}}),dl=An({pool_:function(Mt,st,nn,rn,on,an){on==null&&(on=[1,1]),an==null&&(an=1),rn===0&&(rn="valid");var sn=mn(Mt,"x","maxPool"),un=sn,Xr=!1;sn.rank===3&&(Xr=!0,un=sn.as4D(1,sn.shape[0],sn.shape[1],sn.shape[2])),C(Mo(an,on),function(){return"Error in pool: Either strides or dilations must be 1. Got strides "+an+" and dilations '"+on+"'"});var to,uo=Io(un.shape,st,an,on,rn),hn=[uo.dilationHeight,uo.dilationWidth];to=rn==="same"?function(tp,ep){var np=tp.map(function(op,ap){return op+(op-1)*(ep[ap]-1)}).map(function(op){return op-1}),rp=np.map(function(op){return Math.floor(op/2)}),ip=np.map(function(op,ap){return op-rp[ap]});return np.map(function(op,ap){return[rp[ap],ip[ap]]})}([uo.filterHeight,uo.filterWidth],hn):[[0,0],[0,0]];var fn=hn[0]===1&&hn[1]===1,co=function(tp,ep,np){var rp=np.map(function(lp){return lp[0]}),ip=np.map(function(lp){return lp[1]}),op=tp.concat(rp,ip),ap=ep.map(function(lp,dp){return(lp-op[dp]%lp)%lp}),sp=ip.map(function(lp,dp){return lp+ap[dp]}),up=ep.map(function(lp,dp){return[rp[dp],sp[dp]]}),pp=ep.map(function(lp,dp){return[0,ap[dp]]});return[up,pp]}([uo.inHeight,uo.inWidth],hn,to),lo=co[0],fo=co[1],ho=fn?rn:"valid",mo=fn?un:Mr(un,hn,lo),Uo=(nn==="avg"?function(){return ll(mo,st,an,1,ho)}:function(){return cl(mo,st,an,1,ho)})(),_d=fn?Uo:vr(Uo,hn,fo);return Xr?_d.as3D(_d.shape[1],_d.shape[2],_d.shape[3]):_d}}),pl=An({maxPool3d_:function(Mt,st,nn,rn,on,an,sn){an===void 0&&(an="NDHWC");var un=mn(Mt,"x","maxPool3d"),Xr=un,to=!1;un.rank===4&&(to=!0,Xr=un.as5D(1,un.shape[0],un.shape[1],un.shape[2],un.shape[3])),sn==null&&(sn=[1,1,1]),C(Xr.rank===5,function(){return"Error in maxPool3d: x must be rank 5 but got rank "+Xr.rank+"."}),C(an==="NDHWC",function(){return"Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of "+an}),C(Mo(nn,sn),function(){return"Error in maxPool3d: Either strides or dilations must be 1. Got strides "+nn+" and dilations '"+sn+"'"}),on!=null&&C(A(rn),function(){return"Error in maxPool3d: pad must be an integer when using, dimRoundingMode "+on+" but got pad "+rn+"."});var uo=ko(Xr.shape,st,nn,sn,rn,on,an),hn=Lt.runKernelFunc(function(fn,co){var lo=fn.maxPool3d(Xr,uo);return co([Xr,lo]),lo},{x:Xr},function(fn,co){var lo=co[0],fo=co[1];return{x:function(){return function(ho,mo,Uo,_d,tp,ep,np,rp){var ip=mn(ho,"dy","maxPool3dBackprop"),op=mn(mo,"input","maxPool3dBackprop"),ap=mn(Uo,"output","maxPool3dBackprop"),sp=ip,up=op,pp=ap,lp=!1;op.rank===4&&(lp=!0,sp=ip.as5D(1,ip.shape[0],ip.shape[1],ip.shape[2],ip.shape[3]),up=op.as5D(1,op.shape[0],op.shape[1],op.shape[2],op.shape[3]),pp=ap.as5D(1,ap.shape[0],ap.shape[1],ap.shape[2],ap.shape[3])),C(sp.rank===5,function(){return"Error in maxPool3dBackprop: dy must be rank 5 but got rank "+sp.rank+"."}),C(up.rank===5,function(){return"Error in maxPool3dBackprop: input must be rank 5 but got rank "+up.rank+"."}),C(pp.rank===5,function(){return"Error in maxPool3dBackprop: output must be rank 5 but got rank "+pp.rank+"."}),ep==null&&(ep=[1,1,1]),C(Mo(tp,ep),function(){return"Error in maxPool3dBackprop: Either strides or dilations must be 1. Got strides "+tp+" and dilations '"+ep+"'"}),rp!=null&&C(A(np),function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+rp+" but got pad "+np+"."});var dp=ko(up.shape,_d,tp,ep,np,rp),cp=Lt.runKernelFunc(function(fp){return fp.maxPool3dBackprop(sp,up,pp,dp)},{dy5D:sp,input5D:up});return lp?cp.as4D(cp.shape[1],cp.shape[2],cp.shape[3],cp.shape[4]):cp}(fn,lo,fo,st,nn,sn,rn,on)}}});return to?hn.as4D(hn.shape[1],hn.shape[2],hn.shape[3],hn.shape[4]):hn}}),vl=An({avgPool3d_:function(Mt,st,nn,rn,on,an,sn){an===void 0&&(an="NDHWC");var un=mn(Mt,"x","avgPool3d","float32"),Xr=un,to=!1;un.rank===4&&(to=!0,Xr=un.as5D(1,un.shape[0],un.shape[1],un.shape[2],un.shape[3])),sn==null&&(sn=[1,1,1]),C(Xr.rank===5,function(){return"Error in avgPool3d: x must be rank 5 but got rank "+Xr.rank+"."}),C(an==="NDHWC",function(){return"Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of "+an}),C(Mo(nn,sn),function(){return"Error in avgPool3d: Either strides or dilations must be 1. Got strides "+nn+" and dilations '"+sn+"'"}),on!=null&&C(A(rn),function(){return"Error in avgPool3d: pad must be an integer when using, dimRoundingMode "+on+" but got pad "+rn+"."});var uo=ko(Xr.shape,st,nn,sn,rn,on,an),hn=Lt.runKernelFunc(function(fn){return fn.avgPool3d(Xr,uo)},{x:Xr},function(fn){return{x:function(){return function(co,lo,fo,ho,mo,Uo,_d){var tp=mn(co,"dy","avgPool3dBackprop"),ep=mn(lo,"input","avgPool3dBackprop"),np=tp,rp=ep,ip=!1;ep.rank===4&&(ip=!0,np=tp.as5D(1,tp.shape[0],tp.shape[1],tp.shape[2],tp.shape[3]),rp=ep.as5D(1,ep.shape[0],ep.shape[1],ep.shape[2],ep.shape[3])),C(np.rank===5,function(){return"Error in avgPool3dBackprop: dy must be rank 5 but got rank "+np.rank+"."}),C(rp.rank===5,function(){return"Error in avgPool3dBackprop: input must be rank 5 but got rank "+rp.rank+"."}),mo==null&&(mo=[1,1,1]),C(Mo(ho,mo),function(){return"Error in avgPool3dBackprop: Either strides or dilations must be 1. Got strides "+ho+" and dilations '"+mo+"'"}),_d!=null&&C(A(Uo),function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+_d+" but got pad "+Uo+"."});var op=ko(rp.shape,fo,ho,mo,Uo,_d),ap=Lt.runKernelFunc(function(sp){return sp.avgPool3dBackprop(np,rp,op)},{dy5D:np,input5D:rp});return ip?ap.as4D(ap.shape[1],ap.shape[2],ap.shape[3],ap.shape[4]):ap}(fn,Xr,st,nn,sn,rn,on)}}});return hn=hn.cast(Xr.dtype),to?hn.as4D(hn.shape[1],hn.shape[2],hn.shape[3],hn.shape[4]):hn}}),ml=An({slice_:function(Mt,st,nn){var rn,on,an=mn(Mt,"x","slice");if(an.rank===0)throw new Error("Slicing scalar is not possible");(rn=typeof st=="number"?[st].concat(new Array(an.rank-1).fill(0)):st.length<an.rank?st.concat(new Array(an.rank-st.length).fill(0)):st.slice()).forEach(function(Xr){C(Xr!==-1,function(){return"slice() does not support negative begin indexing."})}),on=(on=nn==null?new Array(an.rank).fill(-1):typeof nn=="number"?[nn].concat(new Array(an.rank-1).fill(-1)):nn.length<an.rank?nn.concat(new Array(an.rank-nn.length).fill(-1)):nn).map(function(Xr,to){return Xr>=0?Xr:(C(Xr===-1,function(){return"Negative size values should be exactly -1 but got "+Xr+" for the slice() size at index "+to+"."}),an.shape[to]-rn[to])}),eo(an,rn,on);var sn=an.shape,un={begin:rn,size:on};return Lt.runKernelFunc(function(Xr){return Xr.slice(an,rn,on)},{x:an},function(Xr){for(var to=[],uo=0;uo<Xr.rank;uo++)to.push([rn[uo],sn[uo]-rn[uo]-on[uo]]);return{x:function(){return Xr.pad(to)}}},"Slice",un)}}),gl=An({slice1d_:function(Mt,st,nn){var rn=mn(Mt,"x","slice1d");return C(rn.rank===1,function(){return"slice1d expects a rank-1 tensor, but got a rank-"+rn.rank+" tensor"}),ml(rn,[st],[nn])}}),yl=An({slice2d_:function(Mt,st,nn){var rn=mn(Mt,"x","slice2d");return C(rn.rank===2,function(){return"slice2d expects a rank-2 tensor, but got a rank-"+rn.rank+" tensor"}),ml(rn,st,nn)}}),xl=An({slice3d_:function(Mt,st,nn){var rn=mn(Mt,"x","slice3d");return C(rn.rank===3,function(){return"slice3d expects a rank-3 tensor, but got a rank-"+rn.rank+" tensor"}),ml(rn,st,nn)}}),bl=An({slice4d_:function(Mt,st,nn){var rn=mn(Mt,"x","slice4d");return C(rn.rank===4,function(){return"slice4d expects a rank-4 tensor, but got a rank-"+rn.rank+" tensor"}),ml(rn,st,nn)}});function wl(Mt,st,nn,rn,on){return st.rank<nn.rank&&(st=st.reshape(wn(st.shape,rn))),Mt.rank<nn.rank&&(Mt=Mt.reshape(wn(Mt.shape,rn))),{x:function(){var an=Mt.mul(nn.equal(st).cast(Mt.dtype));return on==null?an:an.transpose(on)}}}var Cl=An({all_:function(Mt,st,nn){st===void 0&&(st=null),nn===void 0&&(nn=!1);var rn=mn(Mt,"x","all","bool"),on=O(st,rn.shape),an=on,sn=En(an,rn.rank);sn!=null&&(rn=rn.transpose(sn),an=In(an.length,rn.rank));var un=Lt.runKernelFunc(function(to){return to.all(rn,an)},{$x:rn});if(nn){var Xr=wn(un.shape,on);return un.reshape(Xr)}return un}}),El=An({any_:function(Mt,st,nn){st===void 0&&(st=null),nn===void 0&&(nn=!1);var rn=mn(Mt,"x","any","bool"),on=O(st,rn.shape),an=on,sn=En(an,rn.rank);sn!=null&&(rn=rn.transpose(sn),an=In(an.length,rn.rank));var un=Lt.runKernelFunc(function(to){return to.any(rn,an)},{$x:rn});if(nn){var Xr=wn(un.shape,on);return un.reshape(Xr)}return un}}),Rl=An({argMax_:function(Mt,st){st===void 0&&(st=0);var nn=mn(Mt,"x","argMax");st==null&&(st=0);var rn=O(st,nn.shape),on=En(rn,nn.rank);on!=null&&(nn=nn.transpose(on),rn=In(rn.length,nn.rank));var an={axis:rn[0]},sn=[nn];return Lt.runKernelFunc(function(un,Xr){var to=un.argMax(nn,rn[0]);return Xr([nn]),to},{x:nn},function(un,Xr){var to=Xr[0];return{x:function(){return Xn(to)}}},"ArgMax",an,sn)}}),Il=An({argMin_:function(Mt,st){st===void 0&&(st=0);var nn=mn(Mt,"x","argMin");st==null&&(st=0);var rn=O(st,nn.shape),on=En(rn,nn.rank);return on!=null&&(nn=nn.transpose(on),rn=In(rn.length,nn.rank)),Lt.runKernelFunc(function(an,sn){var un=an.argMin(nn,rn[0]);return sn([nn]),un},{$x:nn},function(an,sn){var un=sn[0];return{$x:function(){return Xn(un)}}})}}),kl=An({logSumExp_:function(Mt,st,nn){st===void 0&&(st=null),nn===void 0&&(nn=!1);var rn=mn(Mt,"x","logSumExp"),on=O(st,rn.shape),an=rn.max(on,!0),sn=rn.sub(an).exp().sum(on).log(),un=an.reshape(sn.shape).add(sn);if(nn){var Xr=wn(un.shape,on);return un.reshape(Xr)}return un}}),Sl=An({max_:function(Mt,st,nn){st===void 0&&(st=null),nn===void 0&&(nn=!1);var rn=mn(Mt,"x","max"),on=rn,an=O(st,rn.shape),sn=an,un=En(sn,rn.rank);un!=null&&(rn=rn.transpose(un),sn=In(sn.length,rn.rank));var Xr=[rn],to=Lt.runKernelFunc(function(hn,fn){var co=hn.max(rn,sn);return fn([on,co]),co},{x:rn},function(hn,fn){return wl(hn,fn[1],fn[0],an,un)},"Max",{axes:sn},Xr,[!0]);if(nn){var uo=wn(to.shape,an);to=to.reshape(uo)}return to}}),Al=An({mean_:function(Mt,st,nn){st===void 0&&(st=null),nn===void 0&&(nn=!1);var rn=mn(Mt,"x","mean"),on=O(st,rn.shape),an=k$2(bn(rn.shape,on)[1]);return vo(function(sn){var un=On(an);return{value:(un.dtype===sn.dtype?sn:sn.cast(un.dtype)).div(un).sum(st,nn),gradFunc:function(Xr){var to=sn.shape.slice();return on.forEach(function(uo){to[uo]=1}),Xr.reshape(to).mul(zn(sn.shape,"float32")).div(an)}}})(rn)}}),Dl=An({min_:function(Mt,st,nn){st===void 0&&(st=null),nn===void 0&&(nn=!1);var rn=mn(Mt,"x","min"),on=rn,an=O(st,rn.shape),sn=an,un=En(sn,rn.rank);un!=null&&(rn=rn.transpose(un),sn=In(sn.length,rn.rank));var Xr=[rn],to=Lt.runKernelFunc(function(hn,fn){var co=hn.min(rn,sn);return fn([on,co]),co},{x:rn},function(hn,fn){return wl(hn,fn[1],fn[0],an,un)},"Min",{axes:sn},Xr,[!0]);if(nn){var uo=wn(to.shape,an);to=to.reshape(uo)}return to}}),Tl=An({moments_:function(Mt,st,nn){st===void 0&&(st=null),nn===void 0&&(nn=!1);var rn=O(st,(Mt=mn(Mt,"x","moments")).shape),on=Mt.mean(rn,nn),an=on.shape;nn||(an=wn(on.shape,rn));var sn=Mt.toFloat().sub(on.reshape(an)).square();return{mean:on,variance:sn.mean(rn,nn)}}}),Nl=An({sum_:function(Mt,st,nn){st===void 0&&(st=null),nn===void 0&&(nn=!1);var rn=mn(Mt,"x","sum");rn.dtype==="bool"&&(rn=rn.toInt());var on=O(st,rn.shape);return vo(function(an){var sn=En(on,an.rank),un=on,Xr=an;sn!=null&&(Xr=an.transpose(sn),un=In(un.length,an.rank));var to=function(co){var lo=an.shape.slice();return on.forEach(function(fo){lo[fo]=1}),co.reshape(lo).mul(zn(an.shape,"float32"))},uo={axes:un},hn=Lt.runKernelFunc(function(co){return co.sum(Xr,un)},{x:Xr},function(co){return{x:function(){return to(co)}}},"Sum",uo);if(nn){var fn=wn(hn.shape,on);hn=hn.reshape(fn)}return{value:hn,gradFunc:to}})(rn)}}),Fl=An({prod_:function(Mt,st,nn){st===void 0&&(st=null),nn===void 0&&(nn=!1);var rn=mn(Mt,"x","prod");rn.dtype==="bool"&&(rn=rn.toInt());var on=O(st,rn.shape),an=En(on,rn.rank),sn=on,un=rn;an!=null&&(un=rn.transpose(an),sn=In(sn.length,rn.rank));var Xr=Lt.runKernelFunc(function(uo){return uo.prod(un,sn)},{permutedX:un});if(nn){var to=wn(Xr.shape,on);Xr=Xr.reshape(to)}return Xr}}),_l=An({elu_:function(Mt){var st=mn(Mt,"x","elu");return Lt.runKernelFunc(function(nn,rn){var on=nn.elu(st);return rn([on]),on},{$x:st},function(nn,rn){var on=rn[0];return{$x:function(){return Lt.runKernelFunc(function(an){return an.eluDer(nn,on)},{dy:nn,y:on})}}})}}),Ol=An({leakyRelu_:function(Mt,st){st===void 0&&(st=.2);var nn=mn(Mt,"x","leakyRelu");return hc(On(st).mul(nn),nn)}}),Ml=An({prelu_:function(Mt,st){var nn=mn(Mt,"x","prelu"),rn=mn(st,"alpha","prelu");return Lt.runKernelFunc(function(on,an){var sn=on.prelu(nn,rn);return an([nn,rn]),sn},{x:nn,alpha:rn},function(on,an){var sn=an[0],un=an[1],Xr=sn.greater(0);return{x:function(){return ec(Xr,on,on.mul(un))},alpha:function(){var to=ec(Xr,Xn(on),on.mul(sn)),uo=Eo(un.shape,on.shape);return uo.length>0&&(to=to.sum(uo)),to.reshape(un.shape)}}},"Prelu")}}),Bl=An({relu_:function(Mt){var st=mn(Mt,"x","relu");return st.dtype==="bool"?st.toInt():Lt.runKernelFunc(function(nn,rn){var on=nn.relu(st);return rn([st]),on},{x:st},function(nn,rn){var on=rn[0];return{x:function(){return nn.mulStrict(on.step().toFloat())}}},"Relu")}}),Pl=An({relu6_:function(Mt){var st=mn(Mt,"x","relu6");return st.dtype==="bool"?st.toInt():Lt.runKernelFunc(function(nn,rn){var on=nn.relu6(st);return rn([st]),on},{x:st},function(nn,rn){var on=rn[0],an=on.lessEqual(6).mul(on.step());return{x:function(){return nn.mulStrict(an.toFloat())}}},"Relu6")}}),Ll=An({selu_:function(Mt){var st=mn(Mt,"x","selu");return Lt.runKernelFunc(function(nn,rn){var on=nn.selu(st);return rn([st]),on},{$x:st},function(nn,rn){var on=rn[0];return{$x:function(){var an=on.greater(On(0)),sn=On(bs),un=On(ws),Xr=nn.mul(un),to=nn.mul(sn).mul(on.toFloat().exp());return ec(an,Xr,to)}}})}}),Wl=An({transpose_:function(Mt,st){var nn=mn(Mt,"x","transpose");if(st==null&&(st=nn.shape.map(function(on,an){return an}).reverse()),C(nn.rank===st.length,function(){return"Error in transpose: rank of input "+nn.rank+" must match length of perm "+st+"."}),st.forEach(function(on){C(on>=0&&on<nn.rank,function(){return"All entries in 'perm' must be between 0 and "+(nn.rank-1)+" but got "+st})}),nn.rank<=1)return nn.clone();var rn={perm:st};return Lt.runKernelFunc(function(on){return on.transpose(nn,st)},{x:nn},function(on){var an=Rn(st);return{x:function(){return on.transpose(an)}}},"Transpose",rn)}}),Ul=An({localResponseNormalization_:function(Mt,st,nn,rn,on){st===void 0&&(st=5),nn===void 0&&(nn=1),rn===void 0&&(rn=1),on===void 0&&(on=.5);var an=mn(Mt,"x","localResponseNormalization");C(an.rank===4||an.rank===3,function(){return`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank `+an.rank+"."}),C(A(st),function(){return"Error in localResponseNormalization: depthRadius must be an integer but got depthRadius "+st+"."});var sn=an,un=!1;an.rank===3&&(un=!0,sn=an.as4D(1,an.shape[0],an.shape[1],an.shape[2]));var Xr=Lt.runKernelFunc(function(to,uo){var hn=to.localResponseNormalization4D(sn,st,nn,rn,on);return uo([sn,hn]),hn},{x4D:sn},function(to,uo){var hn=uo[0],fn=uo[1];return{x4D:function(){return Lt.runKernelFunc(function(co){return co.LRNGrad(to,hn,fn,st,nn,rn,on)},{})}}});return un?Xr.as3D(Xr.shape[1],Xr.shape[2],Xr.shape[3]):Xr}}),Vl=An({norm_:function(Mt,st,nn,rn){st===void 0&&(st="euclidean"),nn===void 0&&(nn=null),rn===void 0&&(rn=!1);var on=function un(Xr,to,uo){if(uo===void 0&&(uo=null),Xr.rank===0)return Xr.abs();if(Xr.rank!==1&&uo===null)return un(Xr.reshape([-1]),to,uo);if(Xr.rank===1||typeof uo=="number"||Array.isArray(uo)&&uo.length===1){if(to===1)return Xr.abs().sum(uo);if(to===1/0)return Xr.abs().max(uo);if(to===-1/0)return Xr.abs().min(uo);if(to==="euclidean"||to===2)return Xr.abs().pow(On(2,"int32")).sum(uo).sqrt();throw new Error("Error in norm: invalid ord value: "+to)}if(Array.isArray(uo)&&uo.length===2){if(to===1)return Xr.abs().sum(uo[0]).max(uo[1]-1);if(to===1/0)return Xr.abs().sum(uo[1]).max(uo[0]);if(to===-1/0)return Xr.abs().sum(uo[1]).min(uo[0]);if(to==="fro"||to==="euclidean")return Xr.square().sum(uo).sqrt();throw new Error("Error in norm: invalid ord value: "+to)}throw new Error("Error in norm: invalid axis: "+uo)}(Mt=mn(Mt,"x","norm"),st,nn),an=on.shape;if(rn){var sn=O(nn,Mt.shape);an=wn(on.shape,sn)}return on.reshape(an)}}),zl=An({basicLSTMCell_:function(Mt,st,nn,rn,on,an){var sn=mn(Mt,"forgetBias","basicLSTMCell"),un=mn(st,"lstmKernel","basicLSTMCell"),Xr=mn(nn,"lstmBias","basicLSTMCell"),to=mn(rn,"data","basicLSTMCell"),uo=mn(on,"c","basicLSTMCell"),hn=mn(an,"h","basicLSTMCell"),fn=to.concat(hn,1).matMul(un).add(Xr),co=fn.shape[0],lo=fn.shape[1]/4,fo=[co,lo],ho=fn.slice([0,0],fo),mo=fn.slice([0,lo],fo),Uo=fn.slice([0,2*lo],fo),_d=fn.slice([0,3*lo],fo),tp=ho.sigmoid().mulStrict(mo.tanh()).addStrict(uo.mulStrict(sn.add(Uo).sigmoid())),ep=tp.tanh().mulStrict(_d.sigmoid());return[tp,ep]}}),Gl=An({multiRNNCell_:function(Mt,st,nn,rn){for(var on=mn(st,"data","multiRNNCell"),an=gn(nn,"c","multiRNNCell"),sn=gn(rn,"h","multiRNNCell"),un=on,Xr=[],to=0;to<Mt.length;to++){var uo=Mt[to](un,an[to],sn[to]);Xr.push(uo[0]),Xr.push(uo[1]),un=uo[1]}var hn=[],fn=[];for(to=0;to<Xr.length;to+=2)hn.push(Xr[to]),fn.push(Xr[to+1]);return[hn,fn]}}),Hl=An({movingAverage_:function(Mt,st,nn,rn,on){on===void 0&&(on=!0);var an=mn(Mt,"v","movingAverage"),sn=mn(st,"x","movingAverage"),un=mn(nn,"decay","movingAverage");Ft(an,sn),C(S(an.shape,sn.shape),function(){return"Shape mismatch in v and x"});var Xr=On(1),to=Xr.sub(un),uo=sn.sub(an).mul(to);if(on){C(rn!=null,function(){return"When using zeroDebias: true, step is required."});var hn=mn(rn,"step","movingAverage");uo=uo.div(Xr.sub(xc(un,hn)))}return an.add(uo)}}),ql=An({stridedSlice_:function(Mt,st,nn,rn,on,an,sn,un,Xr){if(on===void 0&&(on=0),an===void 0&&(an=0),sn===void 0&&(sn=0),un===void 0&&(un=0),Xr===void 0&&(Xr=0),rn==null&&(rn=new Array(st.length)),sn!==0)throw new Error("ellipsis mask is not yet supported");var to=mn(Mt,"x","stridedSlice"),uo=no(un),hn=to.shape.slice();uo.forEach(function(ho){st[ho]=0,nn[ho]=1,hn.splice(ho,0,1)}),to=to.reshape(hn);for(var fn=0;fn<to.rank;fn++)st[fn]=oo(on,st,rn,to.shape,fn),nn[fn]=ao(an,nn,rn,to.shape,fn),rn[fn]=rn[fn]||1;var co=no(Xr);co.forEach(function(ho){nn[ho]=st[ho]+1,rn[ho]=1});var lo=ro(st,nn,rn),fo=lo.filter(function(ho,mo){return co.indexOf(mo)===-1});return rn.every(function(ho){return ho===1})?ml(to,st,lo).reshape(fo):Lt.runKernelFunc(function(ho){return ho.stridedSlice(to,st,nn,rn)},{$x:to}).reshape(fo)}}),Kl=An({topk_:function(Mt,st,nn){st===void 0&&(st=1),nn===void 0&&(nn=!0);var rn=mn(Mt,"x","topk");if(rn.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");var on=rn.shape[rn.shape.length-1];if(st>on)throw new Error("'k' passed to topk() must be <= the last dimension ("+on+") but got "+st);var an=Lt.runKernelFunc(function(sn){return sn.topk(rn,st,nn)},{$x:rn});return{values:an[0],indices:an[1]}}}),jl=An({scatterND_:function(Mt,st,nn){var rn=mn(Mt,"indices","scatterND","int32"),on=mn(st,"updates","scatterND");return Jr(on,rn,nn),Lt.runKernelFunc(function(an){return an.scatterND(rn,on,nn)},{indices:rn,updates:on},null,"ScatterNd",{shape:nn})}}),Xl=An({fft_:function(Mt){C(Mt.dtype==="complex64",function(){return"The dtype for tf.spectral.fft() must be complex64 but got "+Mt.dtype+"."});var st=Mt.shape[Mt.shape.length-1],nn=Mt.size/st,rn=Mt.as2D(nn,st);return Lt.runKernelFunc(function(on){return on.fft(rn)},{input:Mt}).reshape(Mt.shape)}}),Yl=An({ifft_:function(Mt){C(Mt.dtype==="complex64",function(){return"The dtype for tf.spectral.ifft() must be complex64 but got "+Mt.dtype+"."});var st=Mt.shape[Mt.shape.length-1],nn=Mt.size/st,rn=Mt.as2D(nn,st);return Lt.runKernelFunc(function(on){return on.ifft(rn)},{input:Mt}).reshape(Mt.shape)}}),$l=An({rfft_:function(Mt,st){C(Mt.dtype==="float32",function(){return"The dtype for rfft() must be real value but got "+Mt.dtype});var nn,rn=Mt.shape[Mt.shape.length-1],on=Mt.size/rn;if(st!=null&&st<rn){var an=Mt.shape.map(function(mo){return 0}),sn=Mt.shape.map(function(mo){return mo});sn[Mt.shape.length-1]=st,nn=Mt.slice(an,sn),rn=st}else if(st!=null&&st>rn){var un=Mt.shape.map(function(mo){return mo});un[Mt.shape.length-1]=st-rn,nn=Mt.concat(Gn(un),Mt.shape.length-1),rn=st}else nn=Mt;var Xr=nn.zerosLike(),to=Dn(nn,Xr).as2D(on,rn),uo=Xl(to),hn=Math.floor(rn/2)+1,fn=Tn(uo),co=Nn(uo),lo=fn.split([hn,rn-hn],fn.shape.length-1),fo=co.split([hn,rn-hn],co.shape.length-1),ho=nn.shape.slice();return ho[nn.shape.length-1]=hn,Dn(lo[0],fo[0]).reshape(ho)}}),Ql=An({irfft_:function(Mt){var st=Mt.shape[Mt.shape.length-1],nn=Mt.size/st;if(st<=2){var rn=Mt.as2D(nn,st),on=Yl(rn);return Tn(on)}var an=[nn,2*(st-1)],sn=Tn(Mt).as2D(nn,st),un=Nn(Mt).as2D(nn,st),Xr=sn.slice([0,1],[nn,st-2]).reverse(1),to=un.slice([0,1],[nn,st-2]).reverse(1).mul(On(-1)),uo=sn.concat(Xr,1),hn=un.concat(to,1);return rn=Dn(uo,hn).as2D(an[0],an[1]),on=Yl(rn),Tn(on)}}),Jl=Object.freeze({fft:Xl,ifft:Yl,rfft:$l,irfft:Ql}),Zl=An({sparseToDense_:function(Mt,st,nn,rn){rn===void 0&&(rn=0);var on=mn(Mt,"sparseIndices","sparseToDense","int32"),an=mn(st,"sparseValues","sparseToDense"),sn=mn(rn,"defaultValue","sparseToDense",an.dtype);return function(un,Xr,to,uo){if(un.dtype!=="int32")throw new Error("tf.sparseToDense() expects the indices to be int32 type, but the dtype was "+un.dtype+".");if(un.rank>2)throw new Error("sparseIndices should be a scalar, vector, or matrix, but got shape "+un.shape+".");var hn=un.rank>0?un.shape[0]:1,fn=un.rank>1?un.shape[1]:1;if(to.length!==fn)throw new Error("outputShape has incorrect number of elements:, "+to.length+", should be: "+fn+".");var co=Xr.size;if(Xr.rank!==0&&(Xr.rank!==1||co!==hn))throw new Error("sparseValues has incorrect shape "+Xr.shape+", should be [] or ["+hn+"]");if(Xr.dtype!==uo.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}(on,an,nn,sn),Lt.runKernelFunc(function(un){return un.sparseToDense(on,an,nn,sn)},{$sparseIndices:on,$sparseValues:an,$defaultValue:sn})}}),th=An({gatherND_:function(Mt,st){var nn=mn(st,"indices","gatherND","int32"),rn=mn(Mt,"x","gatherND");return Lt.runKernelFunc(function(on){return on.gatherND(rn,nn)},{x:rn,indices:nn},null,"GatherNd")}}),eh=An({diag_:function(Mt){var st=mn(Mt,"x","diag").flatten(),nn=Mt.shape.concat(Mt.shape);return Lt.runKernelFunc(function(rn){return rn.diag(st)},{$x:st}).reshape(nn)}}),nh=An({dropout_:function(Mt,st,nn,rn){var on=mn(Mt,"x","dropout");if(C(on.dtype==="float32",function(){return"x has to be a floating point tensor since it's going to be scaled, but got a "+on.dtype+" tensor instead."}),C(st>=0&&st<1,function(){return"rate must be a float in the range [0, 1), but got "+st+"."}),st===0)return Mt instanceof wt?on.clone():on;var an=function(Xr,to){if(to==null)return Xr.shape.slice();if(S(Xr.shape,to))return to;if(Xr.shape.length===to.length){for(var uo=[],hn=0;hn<Xr.shape.length;hn++)to[hn]==null&&Xr.shape[hn]!=null?uo.push(Xr.shape[hn]):uo.push(to[hn]);return uo}return to}(on,nn),sn=1-st,un=_r(an,0,1,"float32",rn).add(sn).floor().div(sn);return on.mul(un)}});function rh(Mt,st,nn){for(var rn=1-Mt%2,on=new Float32Array(Mt),an=0;an<Mt;++an){var sn=2*Math.PI*an/(Mt+rn-1);on[an]=st-nn*Math.cos(sn)}return Mn(on,"float32")}var oh=An({hannWindow_:function(Mt){return rh(Mt,.5,.5)}}),ah=An({hammingWindow_:function(Mt){return rh(Mt,.54,.46)}}),ih=An({frame_:function(Mt,st,nn,rn,on){rn===void 0&&(rn=!1),on===void 0&&(on=0);for(var an=0,sn=[];an+st<=Mt.size;)sn.push(ml(Mt,an,st)),an+=nn;if(rn)for(;an<Mt.size;){var un=an+st-Mt.size,Xr=Yn([ml(Mt,an,st-un),Hn([un],on)]);sn.push(Xr),an+=nn}return sn.length===0?Bn([],[0,st]):Yn(sn).as2D(sn.length,st)}}),sh=An({stft_:function(Mt,st,nn,rn,on){var an;on===void 0&&(on=oh),rn==null&&(an=st,rn=Math.floor(Math.pow(2,Math.ceil(Math.log(an)/Math.log(2)))));for(var sn=ih(Mt,st,nn),un=gc(sn,on(st)),Xr=[],to=0;to<sn.shape[0];to++)Xr.push($l(un.slice([to,0],[1,st]),rn));return Yn(Xr)}}),uh=Object.freeze({hannWindow:oh,hammingWindow:ah,frame:ih,stft:sh}),ch,lh=function(Mt,st,nn){return nn===void 0&&(nn=1),n$1(this,void 0,void 0,function(){var rn,on,an,sn,un,Xr,to,uo,hn,fn,co,lo,fo,ho;return r(this,function(mo){switch(mo.label){case 0:return rn=mn(Mt,"predictions","inTopK"),on=mn(st,"targets","inTopK"),C(rn.rank>1,function(){return"inTopK() expects the predictions to be of rank 2 or higher, but got "+rn.rank}),C(rn.rank-1===on.rank,function(){return"predictions rank should be 1 larger than targets rank, but got predictions rank "+rn.rank+" and targets rank "+on.rank}),E(rn.shape.slice(0,rn.shape.length-1),on.shape,"predictions's shape should be align with the targets' shape, except the last dimension."),an=rn.shape[rn.shape.length-1],C(nn>0&&nn<=an,function(){return"'k' passed to inTopK() must be > 0 && <= the predictions last dimension ("+an+"), but got "+nn}),[4,rn.data()];case 1:return sn=mo.sent(),[4,on.data()];case 2:for(un=mo.sent(),Xr=[sn.length/an,an],uo=Xr[1],hn=B("bool",to=Xr[0]),fn=0;fn<to;fn++){for(co=fn*uo,lo=sn.subarray(co,co+uo),fo=[],ho=0;ho<lo.length;ho++)fo.push({value:lo[ho],index:ho});for(fo.sort(function(Uo,_d){return _d.value-Uo.value}),hn[fn]=0,ho=0;ho<nn;ho++)if(fo[ho].index===un[fn]){hn[fn]=1;break}}return Mt!==rn&&rn.dispose(),st!==on&&on.dispose(),[2,Fn(hn,on.shape,"bool")]}})})};(function(Mt){Mt[Mt.NONE=0]="NONE",Mt[Mt.MEAN=1]="MEAN",Mt[Mt.SUM=2]="SUM",Mt[Mt.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"})(ch||(ch={}));var hh=An({absoluteDifference_:function(Mt,st,nn,rn){rn===void 0&&(rn=ch.SUM_BY_NONZERO_WEIGHTS);var on=mn(Mt,"labels","absoluteDifference"),an=mn(st,"predictions","absoluteDifference"),sn=null;nn!=null&&(sn=mn(nn,"weights","absoluteDifference")),E(on.shape,an.shape,"Error in absoluteDifference: ");var un=on.sub(an).abs();return fh(un,sn,rn)}}),fh=An({computeWeightedLoss_:function(Mt,st,nn){nn===void 0&&(nn=ch.SUM_BY_NONZERO_WEIGHTS);var rn=mn(Mt,"losses","computeWeightedLoss"),on=null;st!=null&&(on=mn(st,"weights","computeWeightedLoss"));var an=on==null?rn:rn.mul(on);if(nn===ch.NONE)return an;if(nn===ch.SUM)return an.sum();if(nn===ch.MEAN){if(on==null)return an.mean();var sn=rn.size/on.size,un=an.sum().div(on.sum());return sn>1?un.div(On(sn)):un}if(nn===ch.SUM_BY_NONZERO_WEIGHTS){if(on==null)return an.sum().div(On(rn.size));var Xr=on.mul(zn(rn.shape)).notEqual(On(0)).sum().toFloat();return an.sum().div(Xr)}throw Error("Unknown reduction: "+nn)}}),dh=An({cosineDistance_:function(Mt,st,nn,rn,on){on===void 0&&(on=ch.SUM_BY_NONZERO_WEIGHTS);var an=mn(Mt,"labels","cosineDistance"),sn=mn(st,"predictions","cosineDistance"),un=null;rn!=null&&(un=mn(rn,"weights","cosineDistance")),E(an.shape,sn.shape,"Error in cosineDistance: ");var Xr=On(1).sub(an.mul(sn).sum(nn,!0));return fh(Xr,un,on)}}),ph=An({hingeLoss_:function(Mt,st,nn,rn){rn===void 0&&(rn=ch.SUM_BY_NONZERO_WEIGHTS);var on=mn(Mt,"labels","hingeLoss"),an=mn(st,"predictions","hingeLoss"),sn=null;nn!=null&&(sn=mn(nn,"weights","hingeLoss")),E(on.shape,an.shape,"Error in hingeLoss: ");var un=On(1);on=On(2).mul(on).sub(un);var Xr=un.sub(on.mul(an)).relu();return fh(Xr,sn,rn)}}),vh=An({huberLoss_:function(Mt,st,nn,rn,on){rn===void 0&&(rn=1),on===void 0&&(on=ch.SUM_BY_NONZERO_WEIGHTS);var an=mn(Mt,"labels","huberLoss"),sn=mn(st,"predictions","huberLoss"),un=null;nn!=null&&(un=mn(nn,"weights","huberLoss")),E(an.shape,sn.shape,"Error in huberLoss: ");var Xr=On(rn),to=sn.sub(an).abs(),uo=dc(to,Xr),hn=to.sub(uo),fn=On(.5).mul(uo.square()).add(Xr.mul(hn));return fh(fn,un,on)}}),mh=An({logLoss_:function(Mt,st,nn,rn,on){rn===void 0&&(rn=1e-7),on===void 0&&(on=ch.SUM_BY_NONZERO_WEIGHTS);var an=mn(Mt,"labels","logLoss"),sn=mn(st,"predictions","logLoss"),un=null;nn!=null&&(un=mn(nn,"weights","logLoss")),E(an.shape,sn.shape,"Error in logLoss: ");var Xr=On(1),to=On(rn),uo=an.mul(sn.add(to).log()).neg().sub(Xr.sub(an).mul(Xr.sub(sn).add(to).log()));return fh(uo,un,on)}}),gh=An({meanSquaredError_:function(Mt,st,nn,rn){rn===void 0&&(rn=ch.SUM_BY_NONZERO_WEIGHTS);var on=mn(Mt,"labels","meanSquaredError"),an=mn(st,"predictions","meanSquaredError"),sn=null;nn!=null&&(sn=mn(nn,"weights","meanSquaredError")),E(on.shape,an.shape,"Error in meanSquaredError: ");var un=on.squaredDifference(an);return fh(un,sn,rn)}}),yh=An({sigmoidCrossEntropy_:function(Mt,st,nn,rn,on){rn===void 0&&(rn=0),on===void 0&&(on=ch.SUM_BY_NONZERO_WEIGHTS);var an=mn(Mt,"multiClassLabels","sigmoidCrossEntropy"),sn=mn(st,"logits","sigmoidCrossEntropy"),un=null;if(nn!=null&&(un=mn(nn,"weights","sigmoidCrossEntropy")),E(an.shape,sn.shape,"Error in sigmoidCrossEntropy: "),rn>0){var Xr=On(rn),to=On(1),uo=On(.5);an=an.mul(to.sub(Xr)).add(uo.mul(Xr))}var hn=function(fn,co){var lo=mn(fn,"labels","sigmoidCrossEntropyWithLogits"),fo=mn(co,"logits","sigmoidCrossEntropyWithLogits");E(lo.shape,fo.shape,"Error in sigmoidCrossEntropyWithLogits: ");var ho=fo.relu(),mo=fo.mul(lo),Uo=fo.abs().neg().exp().log1p();return ho.sub(mo).add(Uo)}(an,sn);return fh(hn,un,on)}}),xh=An({softmaxCrossEntropy_:function(Mt,st,nn,rn,on){rn===void 0&&(rn=0),on===void 0&&(on=ch.SUM_BY_NONZERO_WEIGHTS);var an=mn(Mt,"onehotLabels","softmaxCrossEntropy"),sn=mn(st,"logits","softmaxCrossEntropy"),un=null;if(nn!=null&&(un=mn(nn,"weights","softmaxCrossEntropy")),E(an.shape,sn.shape,"Error in softmaxCrossEntropy: "),rn>0){var Xr=On(rn),to=On(1),uo=On(an.shape[1]);an=an.mul(to.sub(Xr)).add(Xr.div(uo))}var hn=function(fn,co,lo){if(lo===void 0&&(lo=-1),lo===-1&&(lo=co.rank-1),lo!==co.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank "+co.rank+" and dim was "+lo);return vo(function(fo,ho,mo){var Uo=ho.logSumExp([lo],!0),_d=ho.toFloat().sub(Uo);return mo([fo,_d]),{value:_d.mul(fo).neg().sum([lo]),gradFunc:function(tp,ep){var np=ep[0],rp=ep[1],ip=wn(tp.shape,[lo]);return[tp.reshape(ip).mul(np.toFloat().sub(rp.exp())),tp.reshape(ip).mul(rp.exp().sub(np.toFloat()))]}}})(fn,co)}(an,sn);return fh(hn,un,on)}}),bh=Object.freeze({get Reduction(){return ch},absoluteDifference:hh,computeWeightedLoss:fh,cosineDistance:dh,hingeLoss:ph,huberLoss:vh,logLoss:mh,meanSquaredError:gh,sigmoidCrossEntropy:yh,softmaxCrossEntropy:xh});function wh(Mt,st){return st===void 0&&(st=!1),Lt.tidy(function(){if(Mt.shape.length!==2)throw new Error("qr2d() requires a 2D Tensor, but got a "+Mt.shape.length+"D Tensor.");for(var nn=Mt.shape[0],rn=Mt.shape[1],on=Cr(nn),an=Mt.clone(),sn=Bn([[1]],[1,1]),un=sn.clone(),Xr=nn>=rn?rn:nn,to=function(hn){var fn,co=an,lo=un,fo=on;fn=Lt.tidy(function(){var ho=an.slice([hn,hn],[nn-hn,1]),mo=ho.norm(),Uo=an.slice([hn,hn],[1,1]),_d=Bn([[-1]]).where(Uo.greater(0),Bn([[1]])),tp=Uo.sub(_d.mul(mo)),ep=ho.div(tp);un=ep.shape[0]===1?sn.clone():sn.concat(ep.slice([1,0],[ep.shape[0]-1,ep.shape[1]]),0);var np=_d.matMul(tp).div(mo).neg(),rp=an.slice([hn,0],[nn-hn,rn]),ip=np.mul(un);if(hn===0)an=rp.sub(ip.matMul(un.transpose().matMul(rp)));else{var op=rp.sub(ip.matMul(un.transpose().matMul(rp)));an=an.slice([0,0],[hn,rn]).concat(op,0)}var ap=on.slice([0,hn],[nn,on.shape[1]-hn]);if(hn===0)on=ap.sub(ap.matMul(un).matMul(ip.transpose()));else{var sp=ap.sub(ap.matMul(un).matMul(ip.transpose()));on=on.slice([0,0],[nn,hn]).concat(sp,1)}return[un,an,on]}),un=fn[0],an=fn[1],on=fn[2],tn([co,lo,fo])},uo=0;uo<Xr;++uo)to(uo);return!st&&nn>rn&&(on=on.slice([0,0],[nn,rn]),an=an.slice([0,0],[rn,rn])),[on,an]})}var Ch=An({bandPart_:function(Mt,st,nn){if(st%1!=0)throw new Error("bandPart(): numLower must be an integer, got "+st+".");if(nn%1!=0)throw new Error("bandPart(): numUpper must be an integer, got "+nn+".");var rn=mn(Mt,"a","bandPart");if(rn.rank<2)throw new Error("bandPart(): Rank must be at least 2, got "+rn.rank+".");var on=rn.shape,an=rn.shape.slice(-2),sn=an[0],un=an[1];if(!(st<=sn))throw new Error("bandPart(): numLower ("+st+") must not be greater than the number of rows ("+sn+").");if(!(nn<=un))throw new Error("bandPart(): numUpper ("+nn+") must not be greater than the number of columns ("+un+").");st<0&&(st=sn),nn<0&&(nn=un);var Xr=Kn(0,sn,1,"int32").reshape([-1,1]),to=Kn(0,un,1,"int32"),uo=Cc(Xr,to),hn=Qu(uo.lessEqual(On(+st,"int32")),uo.greaterEqual(On(-nn,"int32"))),fn=Gn([sn,un],rn.dtype);return Pr(Ur(rn.reshape([-1,sn,un])).map(function(co){return ec(hn,co,fn)})).reshape(on)}}),Eh=An({gramSchmidt_:function(Mt){var st;if(Array.isArray(Mt)){st=!1,C(Mt!=null&&Mt.length>0,function(){return"Gram-Schmidt process: input must not be null, undefined, or empty"});for(var nn=Mt[0].shape[0],rn=function(Xr){C(Mt[Xr].shape[0]===nn,function(){return"Gram-Schmidt: Non-unique lengths found in the input vectors: ("+Mt[Xr].shape[0]+" vs. "+nn+")"})},on=1;on<Mt.length;++on)rn(on)}else st=!0,Mt=tr(Mt,Mt.shape[0],0).map(function(Xr){return Br(Xr,[0])});C(Mt.length<=Mt[0].shape[0],function(){return"Gram-Schmidt: Number of vectors ("+Mt.length+") exceeds number of dimensions ("+Mt[0].shape[0]+")."});var an=[],sn=Mt,un=function(Xr){an.push(Lt.tidy(function(){var to=sn[Xr];if(Xr>0)for(var uo=0;uo<Xr;++uo){var hn=Nl(an[uo].mulStrict(to)).mul(an[uo]);to=to.sub(hn)}return to.div(Vl(to,"euclidean"))}))};for(on=0;on<Mt.length;++on)un(on);return st?Pr(an,0):an}}),Rh=An({qr_:function(Mt,st){if(st===void 0&&(st=!1),Mt.rank<2)throw new Error("qr() requires input tensor to have a rank >= 2, but got rank "+Mt.rank);if(Mt.rank===2)return wh(Mt,st);var nn=Mt.shape.slice(0,Mt.shape.length-2).reduce(function(sn,un){return sn*un}),rn=Ur(Mt.reshape([nn,Mt.shape[Mt.shape.length-2],Mt.shape[Mt.shape.length-1]]),0),on=[],an=[];return rn.forEach(function(sn){var un=wh(sn,st),Xr=un[0],to=un[1];on.push(Xr),an.push(to)}),[Pr(on,0).reshape(Mt.shape),Pr(an,0).reshape(Mt.shape)]}}),Ih=Object.freeze({bandPart:Ch,gramSchmidt:Eh,qr:Rh});function kh(Mt,st,nn,rn,on,an){rn==null&&(rn=.5),on==null&&(on=Number.NEGATIVE_INFINITY),an==null&&(an=0);var sn=Mt.shape[0];return nn=Math.min(nn,sn),C(0<=rn&&rn<=1,function(){return"iouThreshold must be in [0, 1], but was '"+rn+"'"}),C(Mt.rank===2,function(){return"boxes must be a 2D tensor, but was of rank '"+Mt.rank+"'"}),C(Mt.shape[1]===4,function(){return"boxes must have 4 columns, but 2nd dimension was "+Mt.shape[1]}),C(st.rank===1,function(){return"scores must be a 1D tensor"}),C(st.shape[0]===sn,function(){return"scores has incompatible shape with boxes. Expected "+sn+", but was "+st.shape[0]}),C(0<=an&&an<=1,function(){return"softNmsSigma must be in [0, 1], but was '"+an+"'"}),{maxOutputSize:nn,iouThreshold:rn,scoreThreshold:on,softNmsSigma:an}}var Sh=An({resizeBilinear_:function(Mt,st,nn){nn===void 0&&(nn=!1);var rn=mn(Mt,"images","resizeBilinear");C(rn.rank===3||rn.rank===4,function(){return"Error in resizeBilinear: x must be rank 3 or 4, but got rank "+rn.rank+"."}),C(st.length===2,function(){return"Error in resizeBilinear: new shape must 2D, but got shape "+st+"."});var on=rn,an=!1;rn.rank===3&&(an=!0,on=rn.as4D(1,rn.shape[0],rn.shape[1],rn.shape[2]));var sn=st[0],un=st[1],Xr=Lt.runKernelFunc(function(to,uo){return uo([on]),to.resizeBilinear(on,sn,un,nn)},{x:on},function(to,uo){return{x:function(){return Lt.runKernelFunc(function(hn){return hn.resizeBilinearBackprop(to,uo[0],nn)},{})}}},"ResizeBilinear",{alignCorners:nn,newHeight:sn,newWidth:un});return an?Xr.as3D(Xr.shape[1],Xr.shape[2],Xr.shape[3]):Xr}}),Ah=An({resizeNearestNeighbor_:function(Mt,st,nn){nn===void 0&&(nn=!1);var rn=mn(Mt,"images","resizeNearestNeighbor");C(rn.rank===3||rn.rank===4,function(){return"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank "+rn.rank+"."}),C(st.length===2,function(){return"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+st+"."}),C(rn.dtype==="float32"||rn.dtype==="int32",function(){return"`images` must have `int32` or `float32` as dtype"});var on=rn,an=!1;rn.rank===3&&(an=!0,on=rn.as4D(1,rn.shape[0],rn.shape[1],rn.shape[2]));var sn=st[0],un=st[1],Xr=Lt.runKernelFunc(function(to,uo){return uo([on]),to.resizeNearestNeighbor(on,sn,un,nn)},{batchImages:on},function(to,uo){return{batchImages:function(){return Lt.runKernelFunc(function(hn){return hn.resizeNearestNeighborBackprop(to,uo[0],nn)},{})}}});return an?Xr.as3D(Xr.shape[1],Xr.shape[2],Xr.shape[3]):Xr}}),Dh=An({nonMaxSuppression_:function(Mt,st,nn,rn,on){rn===void 0&&(rn=.5),on===void 0&&(on=Number.NEGATIVE_INFINITY);var an=mn(Mt,"boxes","nonMaxSuppression"),sn=mn(st,"scores","nonMaxSuppression"),un=kh(an,sn,nn,rn,on);nn=un.maxOutputSize,rn=un.iouThreshold,on=un.scoreThreshold;var Xr={maxOutputSize:nn,iouThreshold:rn,scoreThreshold:on};return Lt.runKernelFunc(function(to){return to.nonMaxSuppression(an,sn,nn,rn,on)},{boxes:an,scores:sn},null,"NonMaxSuppressionV3",Xr)}}),Th=function(Mt,st,nn,rn,on){return rn===void 0&&(rn=.5),on===void 0&&(on=Number.NEGATIVE_INFINITY),n$1(this,void 0,void 0,function(){var an,sn,un,Xr,to,uo,hn;return r(this,function(fn){switch(fn.label){case 0:return an=mn(Mt,"boxes","nonMaxSuppressionAsync"),sn=mn(st,"scores","nonMaxSuppressionAsync"),un=kh(an,sn,nn,rn,on),nn=un.maxOutputSize,rn=un.iouThreshold,on=un.scoreThreshold,[4,Promise.all([an.data(),sn.data()])];case 1:return Xr=fn.sent(),to=Xr[0],uo=Xr[1],hn=jo(to,uo,nn,rn,on),an!==Mt&&an.dispose(),sn!==st&&sn.dispose(),[2,hn]}})})},Nh=An({nonMaxSuppressionWithScore_:function(Mt,st,nn,rn,on,an){rn===void 0&&(rn=.5),on===void 0&&(on=Number.NEGATIVE_INFINITY),an===void 0&&(an=0);var sn=mn(Mt,"boxes","nonMaxSuppression"),un=mn(st,"scores","nonMaxSuppression"),Xr=kh(sn,un,nn,rn,on,an),to={maxOutputSize:nn=Xr.maxOutputSize,iouThreshold:rn=Xr.iouThreshold,scoreThreshold:on=Xr.scoreThreshold,softNmsSigma:an=Xr.softNmsSigma},uo=Lt.runKernel("NonMaxSuppressionV5",{boxes:sn,scores:un},to);return{selectedIndices:uo[0],selectedScores:uo[1]}}}),Fh=function(Mt,st,nn,rn,on,an){return rn===void 0&&(rn=.5),on===void 0&&(on=Number.NEGATIVE_INFINITY),an===void 0&&(an=0),n$1(this,void 0,void 0,function(){var sn,un,Xr,to,uo,hn,fn;return r(this,function(co){switch(co.label){case 0:return sn=mn(Mt,"boxes","nonMaxSuppressionAsync"),un=mn(st,"scores","nonMaxSuppressionAsync"),Xr=kh(sn,un,nn,rn,on,an),nn=Xr.maxOutputSize,rn=Xr.iouThreshold,on=Xr.scoreThreshold,an=Xr.softNmsSigma,[4,Promise.all([sn.data(),un.data()])];case 1:return to=co.sent(),uo=to[0],hn=to[1],fn=Xo(uo,hn,nn,rn,on,an),sn!==Mt&&sn.dispose(),un!==st&&un.dispose(),[2,fn]}})})},_h=An({cropAndResize_:function(Mt,st,nn,rn,on,an){var sn=mn(Mt,"image","cropAndResize"),un=mn(st,"boxes","cropAndResize","float32"),Xr=mn(nn,"boxInd","cropAndResize","int32");on=on||"bilinear",an=an||0;var to=un.shape[0];return C(sn.rank===4,function(){return"Error in cropAndResize: image must be rank 4,but got rank "+sn.rank+"."}),C(un.rank===2&&un.shape[1]===4,function(){return"Error in cropAndResize: boxes must be have size ["+to+",4] but had shape "+un.shape+"."}),C(Xr.rank===1&&Xr.shape[0]===to,function(){return"Error in cropAndResize: boxInd must be have size ["+to+"] but had shape "+un.shape+"."}),C(rn.length===2,function(){return"Error in cropAndResize: cropSize must be of length 2, but got length "+rn.length+"."}),C(rn[0]>=1&&rn[1]>=1,function(){return"cropSize must be atleast [1,1], but was "+rn}),C(on==="bilinear"||on==="nearest",function(){return"method must be bilinear or nearest, but was "+on}),Lt.runKernelFunc(function(uo,hn){return uo.cropAndResize(sn,un,Xr,rn,on,an)},{images:sn,boxes:un,boxInd:Xr},null,"CropAndResize",{method:on,extrapolationValue:an,cropSize:rn})}}),Oh=Object.freeze({resizeBilinear:Sh,resizeNearestNeighbor:Ah,nonMaxSuppression:Dh,nonMaxSuppressionAsync:Th,nonMaxSuppressionWithScore:Nh,nonMaxSuppressionWithScoreAsync:Fh,cropAndResize:_h}),Mh=function(Mt,st){return!(Mt>0)||st==="linear"},Bh=function(Mt,st,nn){if(nn==null||nn==="linear")return Mt;if(nn==="relu")return Mt.mul(st.step());throw new Error("Gradient for activation "+nn+" has not been implemented yet.")},Ph=function(Mt,st){var nn=st,rn=Eo(Mt.shape,st.shape);return rn.length>0&&(nn=nn.sum(rn)),nn.reshape(Mt.shape)},Lh=function(Mt,st,nn){if(st==="linear")return Mt;if(st==="relu")return Bl(Mt);if(st==="elu")return _l(Mt);if(st==="relu6")return Pl(Mt);if(st==="prelu")return Ml(Mt,nn);throw new Error("Unknown fused activation "+st+".")},Wh=An({fusedMatMul_:function(Mt){var st,nn=Mt.a,rn=Mt.b,on=Mt.transposeA,an=on!==void 0&&on,sn=Mt.transposeB,un=sn!==void 0&&sn,Xr=Mt.bias,to=Mt.activation,uo=to===void 0?"linear":to,hn=Mt.preluActivationWeights;if(Mh(Lt.state.gradientDepth,uo)===!1){var fn=el(nn,rn,an,un);return Xr!=null&&(fn=rc(fn,Xr)),Lh(fn,uo,hn)}var co=mn(nn,"a","fused matMul"),lo=mn(rn,"b","fused matMul");st=Nt(co,lo),co=st[0],lo=st[1];var fo=an?co.shape[co.rank-2]:co.shape[co.rank-1],ho=un?lo.shape[lo.rank-1]:lo.shape[lo.rank-2],mo=an?co.shape[co.rank-1]:co.shape[co.rank-2],Uo=un?lo.shape[lo.rank-2]:lo.shape[lo.rank-1],_d=co.shape.slice(0,-2),tp=lo.shape.slice(0,-2),ep=k$2(_d),np=k$2(tp);C(co.rank>=2&&lo.rank>=2&&co.rank===lo.rank,function(){return"Error in fused matMul: inputs must have the same rank of at least 2, got ranks "+co.rank+" and "+lo.rank+"."}),C(S(_d,tp),function(){return"Error in fused matMul: outer dimensions ("+_d+") and ("+tp+") of Tensors with shapes "+co.shape+" and "+lo.shape+" must match."}),C(fo===ho,function(){return"Error in fused matMul: inner shapes ("+fo+") and ("+ho+") of Tensors with shapes "+co.shape+" and "+lo.shape+" and transposeA="+an+" and transposeB="+un+" must match."});var rp,ip,op=co.shape.slice(0,-2).concat([mo,Uo]),ap=an?co.as3D(ep,fo,mo):co.as3D(ep,mo,fo),sp=un?lo.as3D(np,Uo,ho):lo.as3D(np,ho,Uo);Xr!=null&&Ro(op,(rp=Nt(rp=mn(Xr,"bias","fused matMul"),co)[0]).shape),hn!=null&&(ip=mn(hn,"prelu weights","fused matMul"));var up={a:ap,b:sp};Xr!=null&&(up.bias=rp),hn!=null&&(up.preluActivationWeights=ip);var pp=[ap,sp];return Lt.runKernelFunc(function(lp,dp){var cp=lp.fusedBatchMatMul({a:ap,b:sp,transposeA:an,transposeB:un,bias:rp,activation:uo,preluActivationWeights:ip});return dp([ap,sp,cp]),cp},up,function(lp,dp){var cp=dp[0],fp=dp[1],gp=dp[2],mp=Bh(lp,gp,uo),xp={};return Xr!=null&&(xp={bias:function(){return Ph(rp,mp)}}),Object.assign(an||un?!an&&un?{a:function(){return mp.matMul(fp,!1,!1)},b:function(){return mp.matMul(cp,!0,!1)}}:an&&!un?{a:function(){return fp.matMul(mp,!1,!0)},b:function(){return cp.matMul(mp,!1,!1)}}:{a:function(){return fp.matMul(mp,!0,!0)},b:function(){return mp.matMul(cp,!0,!0)}}:{a:function(){return mp.matMul(fp,!1,!0)},b:function(){return cp.matMul(mp,!0,!1)}},xp)},"_FusedMatMul",{transposeA:an,transposeB:un,activation:uo},pp,[!0]).reshape(op)}}),Uh=An({fusedConv2d_:function(Mt){var st=Mt.x,nn=Mt.filter,rn=Mt.strides,on=Mt.pad,an=Mt.dataFormat,sn=an===void 0?"NHWC":an,un=Mt.dilations,Xr=un===void 0?[1,1]:un,to=Mt.dimRoundingMode,uo=Mt.bias,hn=Mt.activation,fn=hn===void 0?"linear":hn,co=Mt.preluActivationWeights;if(fn=fn||"linear",Mh(Lt.state.gradientDepth,fn)===!1){var lo=qc(st,nn,rn,on,sn,Xr,to);return uo!=null&&(lo=rc(lo,uo)),Lh(lo,fn,co)}var fo=mn(st,"x","conv2d"),ho=mn(nn,"filter","conv2d"),mo=fo,Uo=!1;fo.rank===3&&(Uo=!0,mo=fo.as4D(1,fo.shape[0],fo.shape[1],fo.shape[2])),C(mo.rank===4,function(){return"Error in fused conv2d: input must be rank 4, but got rank "+mo.rank+"."}),C(ho.rank===4,function(){return"Error in fused conv2d: filter must be rank 4, but got rank "+ho.rank+"."}),to!=null&&C(A(on),function(){return"Error in fused conv2d: pad must be an integer when using, dimRoundingMode "+to+" but got pad "+on+"."}),C(mo.shape[3]===ho.shape[2],function(){return"Error in conv2d: depth of input ("+mo.shape[3]+") must match input depth for filter "+ho.shape[2]+"."}),C(Mo(rn,Xr),function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+rn+" and dilations '"+Xr+"'"}),C(sn==="NHWC",function(){return"Error in conv2d: got dataFormat of "+sn+" but only NHWC is currently supported."});var _d,tp,ep=So(mo.shape,ho.shape,rn,Xr,on,to);uo!=null&&(_d=Nt(_d=mn(uo,"bias","fused conv2d"),fo)[0],Ro(ep.outShape,_d.shape)),co!=null&&(tp=mn(co,"prelu weights","fused conv2d"));var np={x:mo,filter:ho};uo!=null&&(np.bias=_d),co!=null&&(np.preluActivationWeights=tp);var rp=[ho,mo],ip=Lt.runKernelFunc(function(op,ap){var sp=op.fusedConv2d({input:mo,filter:ho,convInfo:ep,bias:_d,activation:fn,preluActivationWeights:tp});return ap([ho,mo,sp]),sp},np,function(op,ap){var sp=ap,up=sp[0],pp=sp[1],lp=sp[2],dp=Bh(op,lp,fn);C(Oo(Xr),function(){return"Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+Xr+"'"});var cp={};return uo!=null&&(cp={bias:function(){return Ph(_d,dp)}}),Object.assign({x:function(){return Xc(pp.shape,dp,up,rn,on)},filter:function(){return jc(pp,dp,up.shape,rn,on)}},cp)},"FusedConv2D",{convInfo:ep,activation:fn},rp,[!0]);return Uo?ip.as3D(ip.shape[1],ip.shape[2],ip.shape[3]):ip}}),Vh=An({fusedDepthwiseConv2d_:function(Mt){var st=Mt.x,nn=Mt.filter,rn=Mt.strides,on=Mt.pad,an=Mt.dataFormat,sn=an===void 0?"NHWC":an,un=Mt.dilations,Xr=un===void 0?[1,1]:un,to=Mt.dimRoundingMode,uo=Mt.bias,hn=Mt.activation,fn=hn===void 0?"linear":hn,co=Mt.preluActivationWeights;if(Mh(Lt.state.gradientDepth,fn)===!1){var lo=Yc(st,nn,rn,on,sn,Xr,to);return uo!=null&&(lo=rc(lo,uo)),Lh(lo,fn,co)}var fo=mn(st,"x","depthwiseConv2d"),ho=mn(nn,"filter","depthwiseConv2d"),mo=fo,Uo=!1;fo.rank===3&&(Uo=!0,mo=fo.as4D(1,fo.shape[0],fo.shape[1],fo.shape[2])),C(mo.rank===4,function(){return"Error in fused depthwiseConv2d: input must be rank 4, but got rank "+mo.rank+"."}),C(ho.rank===4,function(){return"Error in fused depthwiseConv2d: filter must be rank 4, but got rank "+ho.rank+"."}),C(mo.shape[3]===ho.shape[2],function(){return"Error in fused depthwiseConv2d: number of input channels ("+mo.shape[3]+") must match the inChannels dimension in filter "+ho.shape[2]+"."}),Xr==null&&(Xr=[1,1]),C(Mo(rn,Xr),function(){return"Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides "+rn+" and dilations '"+Xr+"'"}),to!=null&&C(A(on),function(){return"Error in fused depthwiseConv2d: pad must be an integer when using dimRoundingMode "+to+" but got pad "+on+"."});var _d,tp,ep=So(mo.shape,ho.shape,rn,Xr,on,to,!0);uo!=null&&(_d=Nt(_d=mn(uo,"bias","fused conv2d"),fo)[0],Ro(ep.outShape,_d.shape)),co!=null&&(tp=mn(co,"prelu weights","fused depthwiseConv2d"));var np={x:mo,filter:ho};uo!=null&&(np.bias=_d),co!=null&&(np.preluActivationWeights=tp);var rp=[ho,mo],ip=Lt.runKernelFunc(function(op,ap){var sp=op.fusedDepthwiseConv2D({input:mo,filter:ho,convInfo:ep,bias:_d,activation:fn,preluActivationWeights:tp});return ap([ho,mo,sp]),sp},np,function(op,ap){C(Oo(Xr),function(){return"Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+Xr+"'"});var sp=ap[0],up=ap[1],pp=ap[2],lp=Bh(op,pp,fn),dp={};return uo!=null&&(dp={bias:function(){return Ph(_d,lp)}}),Object.assign({x:function(){return $c(up.shape,lp,sp,ep)},filter:function(){return Qc(up,lp,sp.shape,ep)}},dp)},"FusedDepthwiseConv2D",{convInfo:ep,activation:fn},rp,[!0]);return Uo?ip.as3D(ip.shape[1],ip.shape[2],ip.shape[3]):ip}}),zh=Object.freeze({matMul:Wh,conv2d:Uh,depthwiseConv2d:Vh}),Gh=Object.freeze({image:Oh,linalg:Ih,losses:bh,spectral:Jl,fused:zh,signal:uh,square:tu,squaredDifference:nu,conv1d:Hc,conv2d:qc,conv3d:Kc,depthwiseConv2d:Yc,separableConv2d:Jc,conv2dTranspose:Zc,conv3dTranspose:tl,op:An,batchNormalization2d:Gu,batchNormalization3d:Hu,batchNormalization4d:qu,batchNormalization:Ku,batchNorm:ju,batchNorm2d:Xu,batchNorm3d:Yu,batchNorm4d:$u,booleanMaskAsync:Uc,complex:Dn,real:Tn,imag:Nn,concat:Yn,concat1d:$n,concat2d:Qn,concat3d:Jn,concat4d:Zn,split:tr,matMul:el,dot:nl,outerProduct:rl,reverse:ol,reverse1d:al,reverse2d:il,reverse3d:sl,reverse4d:ul,maxPool:hl,avgPool:fl,pool:dl,maxPool3d:pl,avgPool3d:vl,slice:ml,slice1d:gl,slice2d:yl,slice3d:xl,slice4d:bl,abs:ru,acos:ou,acosh:au,asin:iu,asinh:su,atan:uu,atanh:cu,ceil:lu,clipByValue:hu,cos:fu,cosh:du,erf:pu,exp:vu,expm1:mu,floor:gu,log:yu,log1p:xu,logSigmoid:bu,neg:wu,reciprocal:Cu,round:Eu,rsqrt:Ru,sigmoid:Iu,sign:ku,isNaN:Su,isInf:Au,isFinite:Du,sin:Tu,sinh:Nu,softplus:Fu,sqrt:_u,step:Ou,tan:Mu,tanh:Bu,all:Cl,any:El,argMax:Rl,argMin:Il,logSumExp:kl,max:Sl,mean:Al,min:Dl,moments:Tl,sum:Nl,prod:Fl,equal:Rc,equalStrict:Ic,greater:kc,greaterEqual:Sc,greaterEqualStrict:Ac,greaterStrict:Dc,less:Tc,lessEqual:Nc,lessEqualStrict:Fc,lessStrict:_c,notEqual:Oc,notEqualStrict:Mc,add:rc,addN:oc,addStrict:ac,atan2:ic,div:sc,divNoNan:uc,divStrict:cc,floorDiv:lc,maximum:hc,maximumStrict:fc,minimum:dc,minimumStrict:pc,mod:vc,modStrict:mc,mul:gc,mulStrict:yc,pow:xc,powStrict:bc,squaredDifferenceStrict:wc,sub:Cc,subStrict:Ec,elu:_l,leakyRelu:Ol,prelu:Ml,relu:Bl,relu6:Pl,selu:Ll,logicalAnd:Qu,logicalNot:Ju,logicalOr:Zu,logicalXor:tc,where:ec,whereAsync:nc,buffer:dr,print:pr,batchToSpaceND:vr,broadcastTo:mr,cast:gr,clone:yr,cumsum:xr,depthToSpace:br,expandDims:wr,eye:Cr,multinomial:Er,oneHot:Rr,pad:Ir,pad1d:kr$1,pad2d:Sr,pad3d:Ar,pad4d:Dr,rand:Tr,randomNormal:Nr,randomGamma:Fr,randomUniform:_r,reshape:Or,spaceToBatchND:Mr,squeeze:Br,stack:Pr,tile:Lr,truncatedNormal:Wr,unstack:Ur,setdiff1dAsync:Vr,fill:Hn,linspace:qn,ones:zn,range:Kn,scalar:On,tensor:Fn,tensor1d:Mn,tensor2d:Bn,tensor3d:Pn,tensor4d:Ln,tensor5d:Wn,tensor6d:Un,variable:Vn,zeros:Gn,onesLike:jn,zerosLike:Xn,transpose:Wl,softmax:go,logSoftmax:yo,localResponseNormalization:Ul,norm:Vl,gather:Lc,unsortedSegmentSum:Wc,basicLSTMCell:zl,multiRNNCell:Gl,movingAverage:Hl,stridedSlice:ql,topk:Kl,scatterND:jl,fft:Xl,ifft:Yl,rfft:$l,irfft:Ql,sparseToDense:Zl,gatherND:th,diag:eh,dropout:nh,hannWindow:oh,hammingWindow:ah,frame:ih,stft:sh,inTopKAsync:lh});function Hh(Mt,st){Array.isArray(Mt)||(Mt=[Mt]),Mt.forEach(function(nn){nn!=null&&C(nn.dtype!=="complex64",function(){return st+" does not support complex64 tensors."})})}function qh(Mt,st,nn,rn){if(nn==="linear")return Mt.linear(st);if(nn==="relu")return Mt.relu(st);if(nn==="elu")return Mt.elu(st);if(nn==="relu6")return Mt.relu6(st);if(nn==="prelu")return Mt.prelu(st,rn);throw new Error("Activation "+nn+" has not been implemented for the CPU backend.")}var Kh=function(Mt){function st(){var nn=Mt.call(this)||this;return nn.blockSize=48,nn.firstUse=!0,nn.data=new xo(nn,Lt),nn}return e$1(st,Mt),st.prototype.write=function(nn,rn,on){this.firstUse&&(this.firstUse=!1,i().get("IS_NODE")&&dn(`
============================
Hi there . Looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, which binds to TensorFlow C++, by running npm i @tensorflow/tfjs-node, or npm i @tensorflow/tfjs-node-gpu if you have CUDA. Then call require('@tensorflow/tfjs-node'); (-gpu suffix for CUDA) at the start of your program. Visit https://github.com/tensorflow/tfjs-node for more details.
============================`));var an={};return this.data.set(an,{values:nn,dtype:on}),an},st.prototype.move=function(nn,rn,on,an){this.data.set(nn,{values:rn,dtype:an})},st.prototype.numDataIds=function(){return this.data.numDataIds()},st.prototype.read=function(nn){return n$1(this,void 0,void 0,function(){return r(this,function(rn){return[2,this.readSync(nn)]})})},st.prototype.readSync=function(nn){var rn=this.data.get(nn),on=rn.dtype,an=rn.complexTensors;return on==="complex64"?Vo(this.readSync(an.real.dataId),this.readSync(an.imag.dataId)):this.data.get(nn).values},st.prototype.bufferSync=function(nn){var rn=this.readSync(nn.dataId),on=rn;if(nn.dtype==="string")try{on=rn.map(function(an){return ot(an)})}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return dr(nn.shape,nn.dtype,on)},st.prototype.makeOutput=function(nn,rn,on){var an=this.write(nn,rn,on);return Lt.makeTensorFromDataId(an,rn,on,this)},st.prototype.disposeData=function(nn){if(this.data.has(nn)){var rn=this.data.get(nn).complexTensors;rn!=null&&(rn.real.dispose(),rn.imag.dispose()),this.data.delete(nn)}},st.prototype.time=function(nn){return n$1(this,void 0,void 0,function(){var rn;return r(this,function(on){return rn=et(),nn(),[2,{kernelMs:et()-rn}]})})},st.prototype.memory=function(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}},st.prototype.complex=function(nn,rn){var on=this.makeOutput(null,nn.shape,"complex64");return this.data.get(on.dataId).complexTensors={real:Lt.keep(nn.clone()),imag:Lt.keep(rn.clone())},on},st.prototype.real=function(nn){return this.data.get(nn.dataId).complexTensors.real.clone()},st.prototype.imag=function(nn){return this.data.get(nn.dataId).complexTensors.imag.clone()},st.prototype.slice=function(nn,rn,on){if(Hh(nn,"slice"),io(nn.shape,rn,on)){var an=so(rn,nn.strides),sn=k$2(on);return Fn(this.readSync(nn.dataId).subarray(an,an+sn),on,nn.dtype)}for(var un=dr(on,nn.dtype),Xr=this.bufferSync(nn),to=0;to<un.size;++to){var uo=un.indexToLoc(to).map(function(hn,fn){return hn+rn[fn]});un.values[to]=Xr.get.apply(Xr,uo)}return un.toTensor()},st.prototype.stridedSlice=function(nn,rn,on,an){Hh(nn,"stridedSlice");var sn=ro(rn,on,an);if(sn.some(function(co){return co===0}))return Fn([],sn);for(var un=dr(sn,nn.dtype),Xr=this.bufferSync(nn),to=0;to<un.size;to++){for(var uo=un.indexToLoc(to),hn=new Array(uo.length),fn=0;fn<hn.length;fn++)hn[fn]=uo[fn]*an[fn]+rn[fn];un.set.apply(un,[Xr.get.apply(Xr,hn)].concat(uo))}return un.toTensor()},st.prototype.diag=function(nn){for(var rn=this.readSync(nn.dataId),on=dr([nn.size,nn.size],nn.dtype),an=on.values,sn=0;sn<rn.length;sn++)an[sn*nn.size+sn]=rn[sn];return on.toTensor()},st.prototype.unstack=function(nn,rn){for(var on=nn.shape[rn],an=new Array(nn.rank-1),sn=0,un=0;un<nn.rank;un++)un!==rn&&(an[sn++]=nn.shape[un]);var Xr=new Array(nn.rank).fill(0),to=nn.shape.slice();to[rn]=1;var uo=new Array(on);for(un=0;un<uo.length;un++)Xr[rn]=un,uo[un]=this.slice(nn,Xr,to).reshape(an);return uo},st.prototype.reverse=function(nn,rn){Hh(nn,"reverse");for(var on=dr(nn.shape,nn.dtype),an=this.bufferSync(nn),sn=function(Xr){var to=on.indexToLoc(Xr),uo=to.slice();rn.forEach(function(hn){return uo[hn]=nn.shape[hn]-1-uo[hn]}),on.set.apply(on,[an.get.apply(an,uo)].concat(to))},un=0;un<on.size;un++)sn(un);return on.toTensor()},st.prototype.concat=function(nn,rn){var on=this;if(nn[0].dtype==="complex64"){var an=nn.map(function(co){return Tn(co)}),sn=nn.map(function(co){return Nn(co)});return Dn(this.concat(an,rn),this.concat(sn,rn))}var un=nn.map(function(co){var lo=k$2(co.shape.slice(rn));return co.as2D(-1,lo)}),Xr=Sn(un.map(function(co){return co.shape}),1),to=dr(Xr,nn[0].dtype).values;if(un[0].shape[0]===1){var uo=0;un.forEach(function(co){to.set(on.readSync(co.dataId),uo),uo+=co.size})}else{var hn=0;un.forEach(function(co){for(var lo=on.readSync(co.dataId),fo=0,ho=0;ho<co.shape[0];++ho)for(var mo=ho*Xr[1]+hn,Uo=0;Uo<co.shape[1];++Uo)to[mo+Uo]=lo[fo++];hn+=co.shape[1]})}var fn=Sn(nn.map(function(co){return co.shape}),rn);return Fn(to,fn,nn[0].dtype)},st.prototype.neg=function(nn){return Hh(nn,"neg"),this.multiply(On(-1),nn)},st.prototype.add=function(nn,rn){return nn.dtype==="complex64"||rn.dtype==="complex64"?this.broadcastedBinaryComplexOp(nn.cast("complex64"),rn.cast("complex64"),function(on,an,sn,un){return{real:on+sn,imag:an+un}}):this.broadcastedBinaryOp(nn,rn,Dt(nn.dtype,rn.dtype),function(on,an){return on+an})},st.prototype.addN=function(nn){var rn=this;Hh(nn,"addN");for(var on=nn.map(function(uo){return rn.readSync(uo.dataId)}),an=dr(nn[0].shape,nn[0].dtype),sn=an.values,un=0;un<nn.length;un++)for(var Xr=on[un],to=0;to<sn.length;to++)sn[to]+=Xr[to];return an.toTensor()},st.prototype.softmax=function(nn,rn){var on=O([rn],nn.shape),an=this.max(nn,on),sn=wn(an.shape,on),un=this.subtract(nn,an.reshape(sn)),Xr=this.exp(un),to=this.sum(Xr,on).reshape(sn);return this.realDivide(Xr,to)},st.prototype.subtract=function(nn,rn){return nn.dtype==="complex64"||rn.dtype==="complex64"?this.broadcastedBinaryComplexOp(nn.cast("complex64"),rn.cast("complex64"),function(on,an,sn,un){return{real:on-sn,imag:an-un}}):this.broadcastedBinaryOp(nn,rn,Dt(nn.dtype,rn.dtype),function(on,an){return on-an})},st.prototype.pow=function(nn,rn){return Hh([nn,rn],"pow"),this.broadcastedBinaryOp(nn,rn,nn.dtype,function(on,an){return Math.pow(on,an)})},st.prototype.batchMatMul=function(nn,rn,on,an){Hh([nn,rn],"matMul");for(var sn=on?nn.shape[1]:nn.shape[2],un=on?nn.shape[2]:nn.shape[1],Xr=an?rn.shape[1]:rn.shape[2],to=nn.shape[0],uo=this.readSync(nn.dataId),hn=this.readSync(rn.dataId),fn=on?[nn.strides[0],1,nn.strides[1]]:[nn.strides[0],nn.strides[1],1],co=fn[0],lo=fn[1],fo=fn[2],ho=an?[1,rn.strides[1],rn.strides[0]]:[rn.strides[1],1,rn.strides[0]],mo=ho[0],Uo=ho[1],_d=ho[2],tp=un*Xr,ep=dr([to,un,Xr],nn.dtype),np=ep.values,rp=this.blockSize,ip=0;ip<to;ip++)for(var op=0;op<un;op+=rp)for(var ap=0;ap<Xr;ap+=rp)for(var sp=0;sp<sn;sp+=rp)for(var up=Math.min(op+rp,un),pp=Math.min(ap+rp,Xr),lp=Math.min(sp+rp,sn),dp=op;dp<up;dp++)for(var cp=ap;cp<pp;cp++){for(var fp=0,gp=sp;gp<lp;gp++)fp+=uo[ip*co+dp*lo+gp*fo]*hn[gp*mo+cp*Uo+ip*_d];np[ip*tp+(dp*Xr+cp)]+=fp}return ep.toTensor()},st.prototype.fusedBatchMatMul=function(nn){var rn=nn.a,on=nn.b,an=nn.transposeA,sn=nn.transposeB,un=nn.bias,Xr=nn.activation,to=nn.preluActivationWeights,uo=this.batchMatMul(rn,on,an,sn);return un&&(uo=this.add(uo,un)),Xr&&(uo=qh(this,uo,Xr,to)),uo},st.prototype.multiply=function(nn,rn){return nn.dtype==="complex64"||rn.dtype==="complex64"?this.broadcastedBinaryComplexOp(nn.cast("complex64"),rn.cast("complex64"),function(on,an,sn,un){return{real:on*sn-an*un,imag:on*un+an*sn}}):this.broadcastedBinaryOp(nn,rn,Dt(nn.dtype,rn.dtype),function(on,an){return on*an})},st.prototype.realDivide=function(nn,rn){return Hh([nn,rn],"realDivide"),this.broadcastedBinaryOp(nn,rn,"float32",function(on,an){return on/an})},st.prototype.floorDiv=function(nn,rn){return Hh([nn,rn],"floorDiv"),this.broadcastedBinaryOp(nn,rn,"int32",function(on,an){return Math.floor(on/an)})},st.prototype.sum=function(nn,rn){Hh(nn,"sum"),Cn("sum",rn,nn.rank);for(var on=bn(nn.shape,rn),an=on[0],sn=on[1],un=Gn(an,Dt(nn.dtype,"int32")),Xr=k$2(sn),to=this.readSync(un.dataId),uo=this.readSync(nn.dataId),hn=0;hn<to.length;++hn){for(var fn=hn*Xr,co=0,lo=0;lo<Xr;++lo)co+=uo[fn+lo];to[hn]=co}return un},st.prototype.prod=function(nn,rn){Hh(nn,"sum");for(var on=bn(nn.shape,rn),an=on[0],sn=on[1],un=Gn(an,Dt(nn.dtype,"int32")),Xr=k$2(sn),to=this.readSync(un.dataId),uo=this.readSync(nn.dataId),hn=0;hn<to.length;++hn){for(var fn=hn*Xr,co=1,lo=0;lo<Xr;++lo)co*=uo[fn+lo];to[hn]=co}return un},st.prototype.unsortedSegmentSum=function(nn,rn,on){Hh(nn,"unsortedSegmentSum");for(var an=[],sn=nn.rank-rn.rank,un=0;un<sn;++un)rn=rn.expandDims(un+1);for(un=0;un<on;++un){var Xr=On(un,"int32"),to=Rc(Xr,rn).asType("float32").mul(nn).sum(0);an.push(to)}return Pr(an)},st.prototype.argMin=function(nn,rn){Hh(nn,"argMin");var on=[rn];Cn("argMin",on,nn.rank);for(var an=bn(nn.shape,on),sn=an[0],un=an[1],Xr=Gn(sn,"int32"),to=k$2(un),uo=this.readSync(Xr.dataId),hn=this.readSync(nn.dataId),fn=0;fn<uo.length;++fn){for(var co=fn*to,lo=hn[co],fo=0,ho=0;ho<to;++ho){var mo=hn[co+ho];mo<lo&&(lo=mo,fo=ho)}uo[fn]=fo}return Xr},st.prototype.argMax=function(nn,rn){Hh(nn,"argMax");var on=[rn];Cn("argMax",on,nn.rank);for(var an=bn(nn.shape,on),sn=an[0],un=an[1],Xr=Gn(sn,"int32"),to=k$2(un),uo=this.readSync(Xr.dataId),hn=this.readSync(nn.dataId),fn=0;fn<uo.length;++fn){for(var co=fn*to,lo=hn[co],fo=0,ho=0;ho<to;++ho){var mo=hn[co+ho];mo>lo&&(lo=mo,fo=ho)}uo[fn]=fo}return Xr},st.prototype.cumsum=function(nn,rn,on,an){if(Hh(nn,"cumsum"),rn!==nn.rank-1)throw new Error("backend.cumsum in CPU expects an inner-most axis="+(nn.rank-1)+" but got axis="+rn);for(var sn=Dt(nn.dtype,"int32"),un=Gn(nn.shape,sn),Xr=this.readSync(un.dataId),to=this.readSync(nn.dataId),uo=nn.shape[nn.rank-1],hn=an?function(ho,mo){return ho+uo-mo-1}:function(ho,mo){return ho+mo},fn=0;fn<to.length;fn+=uo)for(var co=0;co<uo;co++){var lo=hn(fn,co);if(co===0)Xr[lo]=on?0:to[lo];else{var fo=hn(fn,co-1);Xr[lo]=on?to[fo]+Xr[fo]:to[lo]+Xr[fo]}}return un},st.prototype.equal=function(nn,rn){return Hh([nn,rn],"equal"),this.broadcastedBinaryOp(nn,rn,"bool",function(on,an){return on===an?1:0})},st.prototype.notEqual=function(nn,rn){return Hh([nn,rn],"notEqual"),this.broadcastedBinaryOp(nn,rn,"bool",function(on,an){return on!==an?1:0})},st.prototype.less=function(nn,rn){return Hh([nn,rn],"less"),this.broadcastedBinaryOp(nn,rn,"bool",function(on,an){return on<an?1:0})},st.prototype.lessEqual=function(nn,rn){return Hh([nn,rn],"lessEqual"),this.broadcastedBinaryOp(nn,rn,"bool",function(on,an){return on<=an?1:0})},st.prototype.greater=function(nn,rn){return Hh([nn,rn],"greater"),this.broadcastedBinaryOp(nn,rn,"bool",function(on,an){return on>an?1:0})},st.prototype.greaterEqual=function(nn,rn){return Hh([nn,rn],"greaterEqual"),this.broadcastedBinaryOp(nn,rn,"bool",function(on,an){return on>=an?1:0})},st.prototype.logicalNot=function(nn){Hh(nn,"logicalNot");for(var rn=this.readSync(nn.dataId),on=new Uint8Array(rn.length),an=0;an<rn.length;++an)on[an]=rn[an]?0:1;return this.makeOutput(on,nn.shape,"bool")},st.prototype.logicalAnd=function(nn,rn){return Hh([nn,rn],"logicalAnd"),this.broadcastedBinaryOp(nn,rn,"bool",function(on,an){return on&&an})},st.prototype.logicalOr=function(nn,rn){return Hh([nn,rn],"logicalOr"),this.broadcastedBinaryOp(nn,rn,"bool",function(on,an){return on||an})},st.prototype.select=function(nn,rn,on){Hh([nn,rn,on],"select");for(var an=this.readSync(nn.dataId),sn=this.readSync(rn.dataId),un=this.readSync(on.dataId),Xr=Gn(rn.shape,Dt(rn.dtype,on.dtype)),to=this.readSync(Xr.dataId),uo=0,hn=nn.rank===0||nn.rank>1||rn.rank===1?1:k$2(rn.shape.slice(1)),fn=0;fn<an.length;fn++)for(var co=0;co<hn;co++)an[fn]===1?to[uo++]=sn[fn]:to[uo++]=un[fn];return Xr},st.prototype.where=function(nn){Hh([nn],"where");var rn=this.readSync(nn.dataId);return na(nn.shape,rn)},st.prototype.topk=function(nn,rn,on){return Hh(nn,"topk"),ea(this.readSync(nn.dataId),nn.shape,nn.dtype,rn)},st.prototype.min=function(nn,rn){Hh(nn,"min"),Cn("min",rn,nn.rank);for(var on=bn(nn.shape,rn),an=on[0],sn=on[1],un=Gn(an,nn.dtype),Xr=k$2(sn),to=this.readSync(un.dataId),uo=this.readSync(nn.dataId),hn=0;hn<to.length;++hn){for(var fn=hn*Xr,co=uo[fn],lo=0;lo<Xr;++lo){var fo=uo[fn+lo];fo<co&&(co=fo)}to[hn]=co}return un},st.prototype.minimum=function(nn,rn){return Hh([nn,rn],"minimum"),this.broadcastedBinaryOp(nn,rn,nn.dtype,function(on,an){return Math.min(on,an)})},st.prototype.mod=function(nn,rn){return Hh([nn,rn],"mod"),this.broadcastedBinaryOp(nn,rn,nn.dtype,function(on,an){var sn=on%an;return on<0&&an<0||on>=0&&an>=0?sn:(sn+an)%an})},st.prototype.max=function(nn,rn){Hh(nn,"max"),Cn("max",rn,nn.rank);for(var on=bn(nn.shape,rn),an=on[0],sn=on[1],un=Gn(an,nn.dtype),Xr=k$2(sn),to=this.readSync(un.dataId),uo=this.readSync(nn.dataId),hn=0;hn<to.length;++hn){for(var fn=hn*Xr,co=uo[fn],lo=0;lo<Xr;++lo){var fo=uo[fn+lo];fo>co&&(co=fo)}to[hn]=co}return un},st.prototype.maximum=function(nn,rn){return Hh([nn,rn],"maximum"),this.broadcastedBinaryOp(nn,rn,nn.dtype,function(on,an){return Math.max(on,an)})},st.prototype.all=function(nn,rn){Hh(nn,"all"),Cn("all",rn,nn.rank);for(var on=bn(nn.shape,rn),an=on[0],sn=on[1],un=Gn(an,nn.dtype),Xr=k$2(sn),to=this.readSync(un.dataId),uo=this.readSync(nn.dataId),hn=0;hn<to.length;++hn){for(var fn=hn*Xr,co=uo[fn],lo=0;lo<Xr;++lo){var fo=uo[fn+lo];co=co&&fo}to[hn]=co}return un},st.prototype.any=function(nn,rn){Hh(nn,"any"),Cn("any",rn,nn.rank);for(var on=bn(nn.shape,rn),an=on[0],sn=on[1],un=Gn(an,nn.dtype),Xr=k$2(sn),to=this.readSync(un.dataId),uo=this.readSync(nn.dataId),hn=0;hn<to.length;++hn){for(var fn=hn*Xr,co=uo[fn],lo=0;lo<Xr;++lo){var fo=uo[fn+lo];co=co||fo}to[hn]=co}return un},st.prototype.squaredDifference=function(nn,rn){return Hh([nn,rn],"squaredDifference"),this.broadcastedBinaryOp(nn,rn,nn.dtype,function(on,an){var sn=on-an;return sn*sn})},st.prototype.ceil=function(nn){Hh(nn,"ceil");for(var rn=this.readSync(nn.dataId),on=new Float32Array(rn.length),an=0;an<rn.length;++an)on[an]=Math.ceil(rn[an]);return this.makeOutput(on,nn.shape,"float32")},st.prototype.floor=function(nn){Hh(nn,"floor");for(var rn=this.readSync(nn.dataId),on=new Float32Array(rn.length),an=0;an<rn.length;++an)on[an]=Math.floor(rn[an]);return this.makeOutput(on,nn.shape,"float32")},st.prototype.sign=function(nn){Hh(nn,"x");for(var rn=this.readSync(nn.dataId),on=new Float32Array(rn.length),an=0;an<rn.length;++an)rn[an]<0?on[an]=-1:rn[an]>0?on[an]=1:on[an]=0;return this.makeOutput(on,nn.shape,"float32")},st.prototype.isNaN=function(nn){Hh(nn,"x");for(var rn=this.readSync(nn.dataId),on=new Uint8Array(rn.length),an=0;an<rn.length;++an)Number.isNaN(rn[an])&&(on[an]=1);return this.makeOutput(on,nn.shape,"bool")},st.prototype.isInf=function(nn){Hh(nn,"x");for(var rn=this.readSync(nn.dataId),on=new Uint8Array(rn.length),an=0;an<rn.length;++an)Math.abs(rn[an])===1/0&&(on[an]=1);return this.makeOutput(on,nn.shape,"bool")},st.prototype.isFinite=function(nn){Hh(nn,"x");for(var rn=this.readSync(nn.dataId),on=new Uint8Array(rn.length),an=0;an<rn.length;++an)Number.isFinite(rn[an])&&(on[an]=1);return this.makeOutput(on,nn.shape,"bool")},st.prototype.round=function(nn){Hh(nn,"round");for(var rn=this.readSync(nn.dataId),on=new Float32Array(rn.length),an=0;an<rn.length;++an){var sn=Math.floor(rn[an]);rn[an]-sn<.5?on[an]=Math.floor(rn[an]):rn[an]-sn>.5?on[an]=Math.ceil(rn[an]):on[an]=sn%2==0?sn:sn+1}return this.makeOutput(on,nn.shape,"float32")},st.prototype.exp=function(nn){Hh(nn,"exp");for(var rn=this.readSync(nn.dataId),on=new Float32Array(rn.length),an=0;an<rn.length;++an)on[an]=Math.exp(rn[an]);return this.makeOutput(on,nn.shape,"float32")},st.prototype.expm1=function(nn){Hh(nn,"expm1");for(var rn=this.readSync(nn.dataId),on=new Float32Array(rn.length),an=0;an<rn.length;++an)on[an]=Math.expm1(rn[an]);return this.makeOutput(on,nn.shape,"float32")},st.prototype.log=function(nn){Hh(nn,"log");for(var rn=this.readSync(nn.dataId),on=new Float32Array(rn.length),an=0;an<rn.length;++an){var sn=rn[an];on[an]=Math.log(sn)}return this.makeOutput(on,nn.shape,"float32")},st.prototype.log1p=function(nn){Hh(nn,"log1p");for(var rn=this.readSync(nn.dataId),on=new Float32Array(rn.length),an=0;an<rn.length;++an){var sn=rn[an];on[an]=Math.log1p(sn)}return this.makeOutput(on,nn.shape,"float32")},st.prototype.sqrt=function(nn){Hh(nn,"sqrt");for(var rn=this.readSync(nn.dataId),on=new Float32Array(rn.length),an=0;an<rn.length;++an){var sn=rn[an];on[an]=Math.sqrt(sn)}return this.makeOutput(on,nn.shape,"float32")},st.prototype.rsqrt=function(nn){Hh(nn,"rsqrt");for(var rn=this.readSync(nn.dataId),on=new Float32Array(rn.length),an=0;an<rn.length;++an){var sn=rn[an];on[an]=1/Math.sqrt(sn)}return this.makeOutput(on,nn.shape,"float32")},st.prototype.reciprocal=function(nn){Hh(nn,"reciprocal");for(var rn=this.readSync(nn.dataId),on=new Float32Array(rn.length),an=0;an<rn.length;++an)on[an]=1/rn[an];return this.makeOutput(on,nn.shape,"float32")},st.prototype.linear=function(nn){return nn},st.prototype.relu=function(nn){Hh(nn,"relu");for(var rn=Gn(nn.shape,nn.dtype),on=this.readSync(rn.dataId),an=this.readSync(nn.dataId),sn=0;sn<an.length;++sn)on[sn]=Math.max(0,an[sn]);return rn},st.prototype.relu6=function(nn){Hh(nn,"relu");for(var rn=Gn(nn.shape,nn.dtype),on=this.readSync(rn.dataId),an=this.readSync(nn.dataId),sn=0;sn<an.length;++sn)on[sn]=Math.min(Math.max(0,an[sn]),6);return rn},st.prototype.prelu=function(nn,rn){return Hh([nn,rn],"prelu"),this.broadcastedBinaryOp(nn,rn,nn.dtype,function(on,an){return on<0?an*on:on})},st.prototype.elu=function(nn){Hh(nn,"elu");for(var rn=new Float32Array(nn.size),on=this.readSync(nn.dataId),an=0;an<on.length;++an){var sn=on[an];rn[an]=sn>=0?sn:Math.exp(sn)-1}return this.makeOutput(rn,nn.shape,"float32")},st.prototype.eluDer=function(nn,rn){Hh([nn,rn],"eluDer");for(var on=new Float32Array(rn.size),an=this.readSync(rn.dataId),sn=this.readSync(nn.dataId),un=0;un<an.length;++un){var Xr=an[un];on[un]=Xr>=1?sn[un]:sn[un]*(Xr+1)}return this.makeOutput(on,rn.shape,"float32")},st.prototype.selu=function(nn){Hh(nn,"selu");for(var rn=bs,on=ws,an=new Float32Array(nn.size),sn=this.readSync(nn.dataId),un=0;un<sn.length;++un){var Xr=sn[un];an[un]=Xr>=0?on*Xr:rn*(Math.exp(Xr)-1)}return this.makeOutput(an,nn.shape,"float32")},st.prototype.clip=function(nn,rn,on){Hh(nn,"clip");for(var an=new Float32Array(nn.size),sn=this.readSync(nn.dataId),un=0;un<sn.length;++un){var Xr=sn[un];an[un]=Xr>on?on:Xr<rn?rn:Xr}return this.makeOutput(an,nn.shape,"float32")},st.prototype.abs=function(nn){for(var rn=new Float32Array(nn.size),on=this.readSync(nn.dataId),an=0;an<on.length;++an)rn[an]=Math.abs(on[an]);return this.makeOutput(rn,nn.shape,"float32")},st.prototype.complexAbs=function(nn){for(var rn=new Float32Array(nn.size),on=this.readSync(nn.dataId),an=0;an<nn.size;++an){var sn=on[2*an],un=on[2*an+1];rn[an]=Math.hypot(sn,un)}return this.makeOutput(rn,nn.shape,"float32")},st.prototype.int=function(nn){Hh(nn,"int");for(var rn=new Int32Array(nn.size),on=this.readSync(nn.dataId),an=0;an<on.length;++an)rn[an]=on[an];return this.makeOutput(rn,nn.shape,"int32")},st.prototype.sigmoid=function(nn){Hh(nn,"sigmoid");for(var rn=new Float32Array(nn.size),on=this.readSync(nn.dataId),an=0;an<on.length;++an)rn[an]=1/(1+Math.exp(-on[an]));return this.makeOutput(rn,nn.shape,"float32")},st.prototype.softplus=function(nn){Hh(nn,"softplus");for(var rn=Math.log(11920928955078125e-23)+2,on=new Float32Array(nn.size),an=this.readSync(nn.dataId),sn=0;sn<an.length;++sn){var un=an[sn]>-rn,Xr=an[sn]<rn,to=Math.exp(an[sn]),uo=void 0;uo=Xr?to:un?an[sn]:Math.log(1+to),on[sn]=uo}return this.makeOutput(on,nn.shape,"float32")},st.prototype.sin=function(nn){Hh(nn,"sin");for(var rn=new Float32Array(nn.size),on=this.readSync(nn.dataId),an=0;an<on.length;++an)rn[an]=Math.sin(on[an]);return this.makeOutput(rn,nn.shape,"float32")},st.prototype.cos=function(nn){Hh(nn,"cos");for(var rn=new Float32Array(nn.size),on=this.readSync(nn.dataId),an=0;an<on.length;++an)rn[an]=Math.cos(on[an]);return this.makeOutput(rn,nn.shape,"float32")},st.prototype.tan=function(nn){Hh(nn,"tan");for(var rn=new Float32Array(nn.size),on=this.readSync(nn.dataId),an=0;an<on.length;++an)rn[an]=Math.tan(on[an]);return this.makeOutput(rn,nn.shape,"float32")},st.prototype.asin=function(nn){Hh(nn,"asin");for(var rn=new Float32Array(nn.size),on=this.readSync(nn.dataId),an=0;an<on.length;++an)rn[an]=Math.asin(on[an]);return this.makeOutput(rn,nn.shape,"float32")},st.prototype.acos=function(nn){Hh(nn,"acos");for(var rn=new Float32Array(nn.size),on=this.readSync(nn.dataId),an=0;an<on.length;++an)rn[an]=Math.acos(on[an]);return this.makeOutput(rn,nn.shape,"float32")},st.prototype.atan=function(nn){Hh(nn,"atan");for(var rn=new Float32Array(nn.size),on=this.readSync(nn.dataId),an=0;an<on.length;++an)rn[an]=Math.atan(on[an]);return this.makeOutput(rn,nn.shape,"float32")},st.prototype.atan2=function(nn,rn){return Hh([nn,rn],"atan2"),this.broadcastedBinaryOp(nn,rn,nn.dtype,function(on,an){return Math.atan2(on,an)})},st.prototype.sinh=function(nn){Hh(nn,"sinh");for(var rn=new Float32Array(nn.size),on=this.readSync(nn.dataId),an=0;an<on.length;++an)rn[an]=Math.sinh(on[an]);return this.makeOutput(rn,nn.shape,"float32")},st.prototype.cosh=function(nn){Hh(nn,"cosh");for(var rn=new Float32Array(nn.size),on=this.readSync(nn.dataId),an=0;an<on.length;++an)rn[an]=Math.cosh(on[an]);return this.makeOutput(rn,nn.shape,"float32")},st.prototype.tanh=function(nn){Hh(nn,"tanh");for(var rn=new Float32Array(nn.size),on=this.readSync(nn.dataId),an=0;an<on.length;++an)rn[an]=D(on[an]);return this.makeOutput(rn,nn.shape,"float32")},st.prototype.asinh=function(nn){Hh(nn,"asinh");for(var rn=new Float32Array(nn.size),on=this.readSync(nn.dataId),an=0;an<on.length;++an)rn[an]=Math.asinh(on[an]);return this.makeOutput(rn,nn.shape,"float32")},st.prototype.acosh=function(nn){Hh(nn,"acosh");for(var rn=new Float32Array(nn.size),on=this.readSync(nn.dataId),an=0;an<on.length;++an)rn[an]=Math.acosh(on[an]);return this.makeOutput(rn,nn.shape,"float32")},st.prototype.atanh=function(nn){Hh(nn,"atanh");for(var rn=new Float32Array(nn.size),on=this.readSync(nn.dataId),an=0;an<on.length;++an)rn[an]=Math.atanh(on[an]);return this.makeOutput(rn,nn.shape,"float32")},st.prototype.erf=function(nn){Hh(nn,"erf");for(var rn=new Float32Array(nn.size),on=this.readSync(nn.dataId),an=0;an<on.length;++an){var sn=Math.sign(on[an]),un=Math.abs(on[an]),Xr=1/(1+.3275911*un);rn[an]=sn*(1-((((1.061405429*Xr-1.453152027)*Xr+1.421413741)*Xr-.284496736)*Xr+.254829592)*Xr*Math.exp(-un*un))}return this.makeOutput(rn,nn.shape,"float32")},st.prototype.step=function(nn,rn){rn===void 0&&(rn=0),Hh(nn,"step");for(var on=new Float32Array(nn.size),an=this.readSync(nn.dataId),sn=0;sn<an.length;++sn){var un=an[sn];isNaN(un)?on[sn]=NaN:on[sn]=un>0?1:rn}return this.makeOutput(on,nn.shape,"float32")},st.prototype.fusedConv2d=function(nn){var rn=nn.input,on=nn.filter,an=nn.convInfo,sn=nn.bias,un=nn.activation,Xr=nn.preluActivationWeights,to=this.conv2d(rn,on,an);return sn&&(to=this.add(to,sn)),un&&(to=qh(this,to,un,Xr)),to},st.prototype.conv2d=function(nn,rn,on){Hh([nn,rn],"conv2d");for(var an=on.filterHeight,sn=on.filterWidth,un=on.dilationHeight,Xr=on.dilationWidth,to=on.padInfo.left,uo=on.padInfo.top,hn=on.dataFormat==="channelsLast",fn=dr(on.outShape,nn.dtype),co=nn.strides[0],lo=hn?nn.strides[1]:nn.strides[2],fo=hn?nn.strides[2]:1,ho=hn?1:nn.strides[1],mo=fn.strides[0],Uo=hn?fn.strides[1]:fn.strides[2],_d=hn?fn.strides[2]:1,tp=hn?1:fn.strides[1],ep=this.readSync(nn.dataId),np=this.readSync(rn.dataId),rp=fn.values,ip=0;ip<on.batchSize;++ip)for(var op=ip*co,ap=ip*mo,sp=0;sp<on.outHeight;++sp)for(var up=ap+sp*Uo,pp=sp*on.strideHeight-uo,lp=0;lp<an;lp++){var dp=pp+lp*un;if(!(dp<0||dp>=on.inHeight))for(var cp=lp*rn.strides[0],fp=op+dp*lo,gp=0;gp<on.outWidth;++gp)for(var mp=up+gp*_d,xp=gp*on.strideWidth-to,_p=0;_p<sn;_p++){var Sp=xp+_p*Xr;if(!(Sp<0||Sp>=on.inWidth))for(var Cp=fp+Sp*fo,jp=cp+_p*rn.strides[1],Dp=0;Dp<on.inChannels;++Dp){for(var Vp=ep[Cp+Dp*ho],Up=0;Up<on.outChannels;++Up)rp[mp+Up*tp]+=Vp*np[jp+Up];jp+=on.outChannels}}}return fn.toTensor()},st.prototype.conv3d=function(nn,rn,on){for(var an=on.filterDepth,sn=on.filterHeight,un=on.filterWidth,Xr=on.dilationDepth,to=on.dilationHeight,uo=on.dilationWidth,hn=on.padInfo.front,fn=on.padInfo.left,co=on.padInfo.top,lo=dr(on.outShape,nn.dtype),fo=this.readSync(nn.dataId),ho=this.readSync(rn.dataId),mo=lo.values,Uo=0;Uo<on.batchSize;++Uo)for(var _d=Uo*nn.strides[0],tp=Uo*lo.strides[0],ep=0;ep<on.outDepth;++ep)for(var np=tp+ep*lo.strides[1],rp=ep*on.strideDepth-hn,ip=0;ip<an;ip++){var op=rp+ip*Xr;if(!(op<0||op>=on.inDepth))for(var ap=ip*rn.strides[0],sp=_d+op*nn.strides[1],up=0;up<on.outHeight;++up)for(var pp=np+up*lo.strides[2],lp=up*on.strideHeight-co,dp=0;dp<sn;dp++){var cp=lp+dp*to;if(!(cp<0||cp>=on.inHeight))for(var fp=ap+dp*rn.strides[1],gp=sp+cp*nn.strides[2],mp=0;mp<on.outWidth;++mp)for(var xp=pp+mp*on.outChannels,_p=mp*on.strideWidth-fn,Sp=0;Sp<un;Sp++){var Cp=_p+Sp*uo;if(!(Cp<0||Cp>=on.inWidth))for(var jp=fp+Sp*rn.strides[2],Dp=gp+Cp*on.inChannels,Vp=jp,Up=0;Up<on.inChannels;++Up){for(var Kp=fo[Dp+Up],Mp=0;Mp<on.outChannels;++Mp)mo[xp+Mp]+=Kp*ho[Vp+Mp];Vp+=on.outChannels}}}}return lo.toTensor()},st.prototype.conv2dDerInput=function(nn,rn,on){Hh([nn,rn],"conv2dDerInput");for(var an=dr(on.inShape,"float32"),sn=an.values,un=this.readSync(nn.dataId),Xr=this.readSync(rn.dataId),to=rn.strides,uo=to[0],hn=to[1],fn=to[2],co=on.batchSize,lo=on.filterHeight,fo=on.filterWidth,ho=on.inChannels,mo=on.inHeight,Uo=on.inWidth,_d=on.outChannels,tp=on.outHeight,ep=on.outWidth,np=on.strideHeight,rp=on.strideWidth,ip=on.dataFormat,op=lo-1-on.padInfo.top,ap=fo-1-on.padInfo.left,sp=ip==="channelsLast",up=an.strides[0],pp=sp?an.strides[1]:an.strides[2],lp=sp?an.strides[2]:1,dp=sp?1:an.strides[1],cp=nn.strides[0],fp=sp?nn.strides[1]:nn.strides[2],gp=sp?nn.strides[2]:1,mp=sp?1:nn.strides[1],xp=0;xp<co;++xp)for(var _p=0;_p<ho;++_p)for(var Sp=0;Sp<mo;++Sp)for(var Cp=Sp-op,jp=Math.max(0,Math.ceil(Cp/np)),Dp=Math.min(tp,(lo+Cp)/np),Vp=0;Vp<Uo;++Vp){for(var Up=Vp-ap,Kp=Math.max(0,Math.ceil(Up/rp)),Mp=Math.min(ep,(fo+Up)/rp),zp=0,Bp=jp;Bp<Dp;++Bp)for(var Pp=Bp*np-Cp,Gp=Kp;Gp<Mp;++Gp)for(var Wp=cp*xp+fp*Bp+gp*Gp,Xp=uo*(lo-1-Pp)+hn*(fo-1-(Gp*rp-Up))+fn*_p,Qp=0;Qp<_d;++Qp)zp+=un[Wp+mp*Qp]*Xr[Xp+Qp];sn[up*xp+pp*Sp+lp*Vp+dp*_p]=zp}return an.toTensor()},st.prototype.conv3dDerInput=function(nn,rn,on){for(var an=dr(on.inShape,"float32"),sn=an.values,un=an.strides,Xr=un[0],to=un[1],uo=un[2],hn=un[3],fn=this.readSync(nn.dataId),co=nn.strides,lo=co[0],fo=co[1],ho=co[2],mo=co[3],Uo=this.readSync(rn.dataId),_d=rn.strides,tp=_d[0],ep=_d[1],np=_d[2],rp=_d[3],ip=on.batchSize,op=on.filterDepth,ap=on.filterHeight,sp=on.filterWidth,up=on.inChannels,pp=on.inDepth,lp=on.inHeight,dp=on.inWidth,cp=on.outChannels,fp=on.outDepth,gp=on.outHeight,mp=on.outWidth,xp=on.strideDepth,_p=on.strideHeight,Sp=on.strideWidth,Cp=op-1-on.padInfo.front,jp=ap-1-on.padInfo.top,Dp=sp-1-on.padInfo.left,Vp=0;Vp<ip;++Vp)for(var Up=0;Up<up;++Up)for(var Kp=0;Kp<pp;++Kp)for(var Mp=Kp-Cp,zp=Math.max(0,Math.ceil(Mp/xp)),Bp=Math.min(fp,(op+Mp)/xp),Pp=0;Pp<lp;++Pp)for(var Gp=Pp-jp,Wp=Math.max(0,Math.ceil(Gp/_p)),Xp=Math.min(gp,(ap+Gp)/_p),Qp=0;Qp<dp;++Qp){for(var om=Qp-Dp,ym=Math.max(0,Math.ceil(om/Sp)),mm=Math.min(mp,(sp+om)/Sp),Sm=0,xm=zp;xm<Bp;++xm)for(var am=xm*xp-Mp,wm=Wp;wm<Xp;++wm)for(var Pm=wm*_p-Gp,tm=ym;tm<mm;++tm)for(var Xm=lo*Vp+fo*xm+ho*wm+mo*tm,jm=tp*(op-1-am)+ep*(ap-1-Pm)+np*(sp-1-(tm*Sp-om))+rp*Up,Im=0;Im<cp;++Im)Sm+=fn[Xm+Im]*Uo[jm+Im];sn[Xr*Vp+to*Kp+uo*Pp+hn*Qp+Up]=Sm}return an.toTensor()},st.prototype.conv2dDerFilter=function(nn,rn,on){Hh([nn,rn],"conv2dDerFilter");for(var an=on.strideHeight,sn=on.strideWidth,un=on.filterHeight,Xr=on.filterWidth,to=on.dataFormat==="channelsLast",uo=dr(on.filterShape,"float32"),hn=on.padInfo.left,fn=on.padInfo.top,co=this.bufferSync(nn),lo=this.bufferSync(rn),fo=0;fo<un;++fo)for(var ho=Math.max(0,Math.ceil((fn-fo)/an)),mo=Math.min(on.outHeight,(on.inHeight+fn-fo)/an),Uo=0;Uo<Xr;++Uo)for(var _d=Math.max(0,Math.ceil((hn-Uo)/sn)),tp=Math.min(on.outWidth,(on.inWidth+hn-Uo)/sn),ep=0;ep<on.inChannels;++ep)for(var np=0;np<on.outChannels;++np){for(var rp=0,ip=0;ip<on.batchSize;++ip)for(var op=ho;op<mo;++op)for(var ap=fo+op*an-fn,sp=_d;sp<tp;++sp){var up=Uo+sp*sn-hn;rp+=to?co.get(ip,ap,up,ep)*lo.get(ip,op,sp,np):co.get(ip,ep,ap,up)*lo.get(ip,np,op,sp)}uo.set(rp,fo,Uo,ep,np)}return uo.toTensor()},st.prototype.conv3dDerFilter=function(nn,rn,on){for(var an=on.strideDepth,sn=on.strideHeight,un=on.strideWidth,Xr=on.filterDepth,to=on.filterHeight,uo=on.filterWidth,hn=dr(on.filterShape,"float32"),fn=hn.values,co=hn.strides,lo=co[0],fo=co[1],ho=co[2],mo=co[3],Uo=this.readSync(rn.dataId),_d=rn.strides,tp=_d[0],ep=_d[1],np=_d[2],rp=_d[3],ip=this.readSync(nn.dataId),op=nn.strides,ap=op[0],sp=op[1],up=op[2],pp=op[3],lp=on.padInfo.front,dp=on.padInfo.left,cp=on.padInfo.top,fp=0;fp<Xr;++fp)for(var gp=Math.max(0,Math.ceil((lp-fp)/an)),mp=Math.min(on.outDepth,(on.inDepth+lp-fp)/an),xp=fp*lo,_p=0;_p<to;++_p)for(var Sp=Math.max(0,Math.ceil((cp-_p)/sn)),Cp=Math.min(on.outHeight,(on.inHeight+cp-_p)/sn),jp=_p*fo+xp,Dp=0;Dp<uo;++Dp)for(var Vp=Math.max(0,Math.ceil((dp-Dp)/un)),Up=Math.min(on.outWidth,(on.inWidth+dp-Dp)/un),Kp=Dp*ho+jp,Mp=0;Mp<on.inChannels;++Mp)for(var zp=Mp*mo+Kp,Bp=0;Bp<on.outChannels;++Bp){for(var Pp=0,Gp=0;Gp<on.batchSize;++Gp)for(var Wp=Gp*ap,Xp=Gp*tp,Qp=gp;Qp<mp;++Qp)for(var om=(fp+Qp*an-lp)*sp+Wp,ym=Qp*ep+Xp,mm=Sp;mm<Cp;++mm)for(var Sm=(_p+mm*sn-cp)*up+om,xm=mm*np+ym,am=Vp;am<Up;++am){var wm=am*rp+xm;Pp+=ip[(Dp+am*un-dp)*pp+Sm+Mp]*Uo[wm+Bp]}fn[zp+Bp]=Pp}return hn.toTensor()},st.prototype.fusedDepthwiseConv2D=function(nn){var rn=nn.input,on=nn.filter,an=nn.convInfo,sn=nn.bias,un=nn.activation,Xr=nn.preluActivationWeights,to=this.depthwiseConv2D(rn,on,an);return sn&&(to=this.add(to,sn)),un&&(to=qh(this,to,un,Xr)),to},st.prototype.depthwiseConv2D=function(nn,rn,on){Hh([nn,rn],"depthwiseConv2D");for(var an=on.filterHeight,sn=on.filterWidth,un=on.dilationHeight,Xr=on.dilationWidth,to=on.padInfo.left,uo=on.padInfo.top,hn=on.outChannels/on.inChannels,fn=dr(on.outShape,nn.dtype),co=this.readSync(nn.dataId),lo=this.readSync(rn.dataId),fo=fn.values,ho=0;ho<on.batchSize;++ho)for(var mo=ho*nn.strides[0],Uo=ho*fn.strides[0],_d=0;_d<on.outHeight;++_d)for(var tp=Uo+_d*fn.strides[1],ep=_d*on.strideHeight-to,np=0;np<an;++np){var rp=ep+np*un;if(!(rp<0||rp>=on.inHeight))for(var ip=np*rn.strides[0],op=mo+rp*nn.strides[1],ap=0;ap<on.outWidth;++ap)for(var sp=tp+ap*fn.strides[2],up=ap*on.strideWidth-uo,pp=0;pp<sn;++pp){var lp=up+pp*Xr;if(!(lp<0||lp>=on.inWidth))for(var dp=ip+pp*rn.strides[1],cp=op+lp*on.inChannels,fp=sp,gp=dp,mp=0;mp<on.inChannels;++mp){for(var xp=co[cp+mp],_p=0;_p<hn;++_p)fo[fp+_p]+=xp*lo[gp+_p];fp+=hn,gp+=hn}}}return fn.toTensor()},st.prototype.depthwiseConv2DDerInput=function(nn,rn,on){Hh([nn,rn],"depthwiseConv2DDerInput");for(var an=dr(on.inShape,"float32"),sn=an.values,un=an.strides,Xr=un[0],to=un[1],uo=un[2],hn=this.readSync(nn.dataId),fn=nn.strides,co=fn[0],lo=fn[1],fo=fn[2],ho=this.readSync(rn.dataId),mo=rn.strides,Uo=mo[0],_d=mo[1],tp=mo[2],ep=on.batchSize,np=on.filterHeight,rp=on.filterWidth,ip=on.inChannels,op=on.inHeight,ap=on.inWidth,sp=on.outChannels,up=on.outHeight,pp=on.outWidth,lp=on.strideHeight,dp=on.strideWidth,cp=np-1-on.padInfo.top,fp=rp-1-on.padInfo.left,gp=sp/ip,mp=0;mp<ep;++mp)for(var xp=0;xp<ip;++xp)for(var _p=0;_p<op;++_p)for(var Sp=_p-cp,Cp=Math.max(0,Math.ceil(Sp/lp)),jp=Math.min(up,(np+Sp)/lp),Dp=0;Dp<ap;++Dp){for(var Vp=Dp-fp,Up=Math.max(0,Math.ceil(Vp/dp)),Kp=Math.min(pp,(rp+Vp)/dp),Mp=0,zp=Cp;zp<jp;++zp)for(var Bp=zp*lp-Sp,Pp=Up;Pp<Kp;++Pp)for(var Gp=co*mp+lo*zp+fo*Pp,Wp=Uo*(np-1-Bp)+_d*(rp-1-(Pp*dp-Vp))+tp*xp,Xp=0;Xp<gp;++Xp)Mp+=hn[Gp+(xp*gp+Xp)]*ho[Wp+Xp];sn[Xr*mp+to*_p+uo*Dp+xp]=Mp}return an.toTensor()},st.prototype.depthwiseConv2DDerFilter=function(nn,rn,on){Hh([nn,rn],"depthwiseConv2DDerFilter");for(var an=on.strideHeight,sn=on.strideWidth,un=on.filterHeight,Xr=on.filterWidth,to=dr(on.filterShape,"float32"),uo=on.padInfo.left,hn=on.padInfo.top,fn=on.outChannels/on.inChannels,co=this.bufferSync(nn),lo=this.bufferSync(rn),fo=0;fo<un;++fo)for(var ho=Math.max(0,Math.ceil((hn-fo)/an)),mo=Math.min(on.outHeight,(on.inHeight+hn-fo)/an),Uo=0;Uo<Xr;++Uo)for(var _d=Math.max(0,Math.ceil((uo-Uo)/sn)),tp=Math.min(on.outWidth,(on.inWidth+uo-Uo)/sn),ep=0;ep<on.outChannels;++ep){for(var np=Math.trunc(ep/fn),rp=ep%fn,ip=0,op=0;op<on.batchSize;++op)for(var ap=ho;ap<mo;++ap)for(var sp=fo+ap*an-hn,up=_d;up<tp;++up){var pp=Uo+up*sn-uo;ip+=co.get(op,sp,pp,np)*lo.get(op,ap,up,ep)}to.set(ip,fo,Uo,np,rp)}return to.toTensor()},st.prototype.tile=function(nn,rn){return Hh(nn,"tile"),ta(this.bufferSync(nn),rn)},st.prototype.pad=function(nn,rn,on){Hh(nn,"pad");var an=rn.map(function(fn,co){return fn[0]+nn.shape[co]+fn[1]}),sn=rn.map(function(fn){return fn[0]}),un=this.bufferSync(nn),Xr=dr(an,nn.dtype);on!==0&&Xr.values.fill(on);for(var to=0;to<nn.size;to++){var uo=un.indexToLoc(to),hn=uo.map(function(fn,co){return fn+sn[co]});Xr.set.apply(Xr,[un.get.apply(un,uo)].concat(hn))}return Xr.toTensor()},st.prototype.transpose=function(nn,rn){Hh(nn,"transpose");for(var on=new Array(nn.rank),an=0;an<on.length;an++)on[an]=nn.shape[rn[an]];var sn=this.readSync(nn.dataId),un=dr(on,nn.dtype),Xr=this.bufferSync(nn);for(an=0;an<nn.size;++an){for(var to=Xr.indexToLoc(an),uo=new Array(to.length),hn=0;hn<uo.length;hn++)uo[hn]=to[rn[hn]];var fn=un.locToIndex(uo);un.values[fn]=sn[an]}return un.toTensor()},st.prototype.gather=function(nn,rn,on){Hh([nn,rn],"gather");var an=nn.shape.slice(),sn=this.readSync(rn.dataId);an[on]=sn.length;for(var un=dr(an,nn.dtype),Xr=this.bufferSync(nn),to=0;to<un.size;++to){var uo=un.indexToLoc(to),hn=uo.slice();hn[on]=sn[uo[on]];var fn=Xr.locToIndex(hn);un.values[to]=Xr.values[fn]}return un.toTensor()},st.prototype.batchToSpaceND=function(nn,rn,on){Hh([nn],"batchToSpaceND");var an=rn.reduce(function(hn,fn){return hn*fn}),sn=zr(nn.shape,rn,an),un=Gr(sn.length,rn.length),Xr=Hr(nn.shape,rn,an),to=qr(on,rn.length),uo=Kr(Xr,on,rn.length);return nn.reshape(sn).transpose(un).reshape(Xr).slice(to,uo)},st.prototype.spaceToBatchND=function(nn,rn,on){Hh([nn],"spaceToBatchND");var an=rn.reduce(function(fn,co){return fn*co}),sn=[[0,0]];sn.push.apply(sn,on);for(var un=1+rn.length;un<nn.shape.length;++un)sn.push([0,0]);var Xr=nn.pad(sn),to=zr(Xr.shape,rn,an,!1),uo=Gr(to.length,rn.length,!1),hn=Hr(Xr.shape,rn,an,!1);return Xr.reshape(to).transpose(uo).reshape(hn)},st.prototype.pool=function(nn,rn,on){Hh(nn,"pool");for(var an=rn.strideHeight,sn=rn.strideWidth,un=rn.dilationHeight,Xr=rn.dilationWidth,to=rn.effectiveFilterHeight,uo=rn.effectiveFilterWidth,hn=rn.padInfo.top,fn=rn.padInfo.left,co=on==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,lo=this.readSync(nn.dataId),fo=dr(rn.outShape,nn.dtype),ho=fo.values,mo=rn.outShape[1]*rn.outShape[2]*rn.outShape[3],Uo=rn.outShape[2]*rn.outShape[3],_d=rn.outShape[3],tp=0;tp<rn.batchSize;++tp)for(var ep=tp*mo,np=tp*nn.strides[0],rp=0;rp<rn.inChannels;++rp)for(var ip=0;ip<rn.outHeight;++ip)for(var op=ip*an-hn,ap=Math.max(0,op),sp=Math.min(rn.inHeight,to+op),up=ep+ip*Uo,pp=0;pp<rn.outWidth;++pp){for(var lp=pp*sn-fn,dp=Math.max(0,lp),cp=Math.min(rn.inWidth,uo+lp),fp=co,gp=0,mp=0,xp=ap;xp<sp;xp+=un){for(var _p=np+xp*nn.strides[1],Sp=dp;Sp<cp;Sp+=Xr){var Cp=lo[_p+Sp*nn.strides[2]+rp];on==="max"&&Cp>fp?fp=Cp:on==="avg"&&(gp+=Cp,mp++)}if(isNaN(fp))break}ho[up+pp*_d+rp]=on==="avg"?gp/mp:fp}return fo.toTensor()},st.prototype.maxPool=function(nn,rn){return this.pool(nn,rn,"max")},st.prototype.maxPoolPositions=function(nn,rn){for(var on=dr(rn.outShape,"int32"),an=rn.strideHeight,sn=rn.strideWidth,un=rn.dilationHeight,Xr=rn.dilationWidth,to=rn.effectiveFilterHeight,uo=rn.effectiveFilterWidth,hn=rn.padInfo.top,fn=rn.padInfo.left,co=this.bufferSync(nn),lo=0;lo<rn.batchSize;++lo)for(var fo=0;fo<rn.inChannels;++fo)for(var ho=0;ho<rn.outHeight;++ho){for(var mo=ho*an-hn,Uo=mo;Uo<0;)Uo+=un;for(var _d=Math.min(rn.inHeight,to+mo),tp=0;tp<rn.outWidth;++tp){for(var ep=tp*sn-fn,np=ep;np<0;)np+=Xr;for(var rp=Math.min(rn.inWidth,uo+ep),ip=Number.NEGATIVE_INFINITY,op=-1,ap=Uo;ap<_d;ap+=un)for(var sp=ap-mo,up=np;up<rp;up+=Xr){var pp=up-ep,lp=co.get(lo,ap,up,fo);lp>ip&&(ip=lp,op=sp*uo+pp)}on.set(op,lo,ho,tp,fo)}}return on.toTensor()},st.prototype.maxPoolBackprop=function(nn,rn,on,an){Hh([rn,on],"maxPoolBackprop");for(var sn=this.maxPoolPositions(rn,an),un=an.strideHeight,Xr=an.strideWidth,to=an.dilationHeight,uo=an.dilationWidth,hn=an.effectiveFilterHeight,fn=an.effectiveFilterWidth,co=fn-1-an.padInfo.left,lo=hn-1-an.padInfo.top,fo=dr(rn.shape,"float32"),ho=this.bufferSync(sn),mo=this.bufferSync(nn),Uo=0;Uo<an.batchSize;++Uo)for(var _d=0;_d<an.inChannels;++_d)for(var tp=0;tp<an.inHeight;++tp)for(var ep=0;ep<an.inWidth;++ep){for(var np=tp-lo,rp=ep-co,ip=0,op=0;op<hn;op+=to){var ap=(np+op)/un;if(!(ap<0||ap>=an.outHeight||Math.floor(ap)!==ap))for(var sp=0;sp<fn;sp+=uo){var up=(rp+sp)/Xr;if(!(up<0||up>=an.outWidth||Math.floor(up)!==up)){var pp=hn*fn-1-ho.get(Uo,ap,up,_d)===op*fn+sp?1:0;pp!==0&&(ip+=mo.get(Uo,ap,up,_d)*pp)}}}fo.set(ip,Uo,tp,ep,_d)}return fo.toTensor()},st.prototype.avgPoolBackprop=function(nn,rn,on){Hh([nn,rn],"avgPoolBackprop");for(var an=on.strideHeight,sn=on.strideWidth,un=on.filterHeight,Xr=on.filterWidth,to=on.dilationHeight,uo=on.dilationWidth,hn=on.effectiveFilterHeight,fn=on.effectiveFilterWidth,co=fn-1-on.padInfo.left,lo=hn-1-on.padInfo.top,fo=dr(rn.shape,"float32"),ho=1/(un*Xr),mo=this.bufferSync(nn),Uo=0;Uo<on.batchSize;++Uo)for(var _d=0;_d<on.inChannels;++_d)for(var tp=0;tp<on.inHeight;++tp)for(var ep=0;ep<on.inWidth;++ep){for(var np=tp-lo,rp=ep-co,ip=0,op=0;op<hn;op+=to){var ap=(np+op)/an;if(!(ap<0||ap>=on.outHeight||Math.floor(ap)!==ap))for(var sp=0;sp<fn;sp+=uo){var up=(rp+sp)/sn;up<0||up>=on.outWidth||Math.floor(up)!==up||(ip+=mo.get(Uo,ap,up,_d))}}fo.set(ip*ho,Uo,tp,ep,_d)}return fo.toTensor()},st.prototype.pool3d=function(nn,rn,on){Hh(nn,"pool3d");for(var an=rn.strideDepth,sn=rn.strideHeight,un=rn.strideWidth,Xr=rn.dilationDepth,to=rn.dilationHeight,uo=rn.dilationWidth,hn=rn.effectiveFilterDepth,fn=rn.effectiveFilterHeight,co=rn.effectiveFilterWidth,lo=rn.padInfo.front,fo=rn.padInfo.top,ho=rn.padInfo.left,mo=on==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,Uo=this.readSync(nn.dataId),_d=dr(rn.outShape,nn.dtype),tp=_d.values,ep=rn.outShape[1]*rn.outShape[2]*rn.outShape[3]*rn.outShape[4],np=rn.outShape[2]*rn.outShape[3]*rn.outShape[4],rp=rn.outShape[3]*rn.outShape[4],ip=rn.outShape[4],op=0;op<rn.batchSize;++op)for(var ap=op*ep,sp=op*nn.strides[0],up=0;up<rn.inChannels;++up)for(var pp=0;pp<rn.outDepth;++pp){for(var lp=pp*an-lo,dp=lp;dp<0;)dp+=Xr;for(var cp=Math.min(rn.inDepth,hn+lp),fp=ap+pp*np,gp=0;gp<rn.outHeight;++gp){for(var mp=gp*sn-fo,xp=mp;xp<0;)xp+=to;for(var _p=Math.min(rn.inHeight,fn+mp),Sp=fp+gp*rp,Cp=0;Cp<rn.outWidth;++Cp){for(var jp=Cp*un-ho,Dp=jp;Dp<0;)Dp+=uo;for(var Vp=Math.min(rn.inWidth,co+jp),Up=Sp+Cp*ip,Kp=mo,Mp=0,zp=0,Bp=dp;Bp<cp;Bp+=Xr){for(var Pp=sp+Bp*nn.strides[1],Gp=xp;Gp<_p;Gp+=to){for(var Wp=Pp+Gp*nn.strides[2],Xp=Dp;Xp<Vp;Xp+=uo){var Qp=Uo[Wp+Xp*nn.strides[3]+up];if(on==="max"&&Qp>Kp?Kp=Qp:on==="avg"&&(Mp+=Qp,zp++),isNaN(Kp))break}if(isNaN(Kp))break}if(isNaN(Kp))break}tp[Up+up]=on==="avg"?Mp/zp:Kp}}}return _d.toTensor()},st.prototype.avgPool3d=function(nn,rn){return Hh(nn,"avgPool3d"),this.pool3d(nn,rn,"avg").toFloat()},st.prototype.avgPool3dBackprop=function(nn,rn,on){Hh([nn,rn],"avgPool3dBackprop");for(var an=on.strideDepth,sn=on.strideHeight,un=on.strideWidth,Xr=on.filterDepth,to=on.filterHeight,uo=on.filterWidth,hn=on.dilationDepth,fn=on.dilationHeight,co=on.dilationWidth,lo=on.effectiveFilterDepth,fo=on.effectiveFilterHeight,ho=on.effectiveFilterWidth,mo=lo-1-on.padInfo.front,Uo=ho-1-on.padInfo.left,_d=fo-1-on.padInfo.top,tp=dr(rn.shape,"float32"),ep=1/(Xr*to*uo),np=this.bufferSync(nn),rp=0;rp<on.batchSize;++rp)for(var ip=0;ip<on.inChannels;++ip)for(var op=0;op<on.inDepth;++op)for(var ap=0;ap<on.inHeight;++ap)for(var sp=0;sp<on.inWidth;++sp){for(var up=op-mo,pp=ap-_d,lp=sp-Uo,dp=0,cp=0;cp<lo;cp+=hn){var fp=(up+cp)/an;if(!(fp<0||fp>=on.outDepth||Math.floor(fp)!==fp))for(var gp=0;gp<fo;gp+=fn){var mp=(pp+gp)/sn;if(!(mp<0||mp>=on.outHeight||Math.floor(mp)!==mp))for(var xp=0;xp<ho;xp+=co){var _p=(lp+xp)/un;_p<0||_p>=on.outWidth||Math.floor(_p)!==_p||(dp+=np.get(rp,fp,mp,_p,ip))}}}tp.set(dp*ep,rp,op,ap,sp,ip)}return tp.toTensor()},st.prototype.maxPool3d=function(nn,rn){return Hh(nn,"maxPool3d"),this.pool3d(nn,rn,"max").toFloat()},st.prototype.maxPool3dPositions=function(nn,rn){for(var on=dr(rn.outShape,"int32"),an=rn.strideDepth,sn=rn.strideHeight,un=rn.strideWidth,Xr=rn.dilationDepth,to=rn.dilationHeight,uo=rn.dilationWidth,hn=rn.effectiveFilterDepth,fn=rn.effectiveFilterHeight,co=rn.effectiveFilterWidth,lo=rn.padInfo.front,fo=rn.padInfo.top,ho=rn.padInfo.left,mo=this.bufferSync(nn),Uo=0;Uo<rn.batchSize;++Uo)for(var _d=0;_d<rn.inChannels;++_d)for(var tp=0;tp<rn.outDepth;++tp){for(var ep=tp*an-lo,np=ep;np<0;)np+=Xr;for(var rp=Math.min(rn.inDepth,hn+ep),ip=0;ip<rn.outHeight;++ip){for(var op=ip*sn-fo,ap=op;ap<0;)ap+=to;for(var sp=Math.min(rn.inHeight,fn+op),up=0;up<rn.outWidth;++up){for(var pp=up*un-ho,lp=pp;lp<0;)lp+=uo;for(var dp=Math.min(rn.inWidth,co+pp),cp=Number.NEGATIVE_INFINITY,fp=-1,gp=np;gp<rp;gp+=Xr)for(var mp=gp-ep,xp=ap;xp<sp;xp+=to)for(var _p=xp-op,Sp=lp;Sp<dp;Sp+=uo){var Cp=Sp-pp,jp=mo.get(Uo,gp,xp,Sp,_d);jp>=cp&&(cp=jp,fp=mp*fn*co+_p*fn+Cp)}on.set(fp,Uo,tp,ip,up,_d)}}}return on.toTensor()},st.prototype.maxPool3dBackprop=function(nn,rn,on,an){Hh([rn,on],"maxPool3dBackprop");for(var sn=this.maxPool3dPositions(rn,an),un=an.strideDepth,Xr=an.strideHeight,to=an.strideWidth,uo=an.dilationDepth,hn=an.dilationHeight,fn=an.dilationWidth,co=an.effectiveFilterDepth,lo=an.effectiveFilterHeight,fo=an.effectiveFilterWidth,ho=co-1-an.padInfo.front,mo=fo-1-an.padInfo.left,Uo=lo-1-an.padInfo.top,_d=dr(rn.shape,"float32"),tp=this.bufferSync(sn),ep=this.bufferSync(nn),np=0;np<an.batchSize;++np)for(var rp=0;rp<an.inChannels;++rp)for(var ip=0;ip<an.inDepth;++ip)for(var op=0;op<an.inHeight;++op)for(var ap=0;ap<an.inWidth;++ap){for(var sp=ip-ho,up=op-Uo,pp=ap-mo,lp=0,dp=0;dp<co;dp+=uo){var cp=(sp+dp)/un;if(!(cp<0||cp>=an.outDepth||Math.floor(cp)!==cp))for(var fp=0;fp<lo;fp+=hn){var gp=(up+fp)/Xr;if(!(gp<0||gp>=an.outHeight||Math.floor(gp)!==gp))for(var mp=0;mp<fo;mp+=fn){var xp=(pp+mp)/to;if(!(xp<0||xp>=an.outWidth||Math.floor(xp)!==xp)){var _p=co*lo*fo-1-tp.get(np,cp,gp,xp,rp)===dp*lo*fo+fp*fo+mp?1:0;_p!==0&&(lp+=ep.get(np,cp,gp,xp,rp)*_p)}}}}_d.set(lp,np,ip,op,ap,rp)}return _d.toTensor()},st.prototype.cast=function(nn,rn){return Po(nn,rn,this)},st.prototype.reshape=function(nn,rn){return Lo(nn,rn)},st.prototype.avgPool=function(nn,rn){return Hh(nn,"avgPool"),this.pool(nn,rn,"avg").toFloat()},st.prototype.resizeBilinear=function(nn,rn,on,an){Hh(nn,"resizeBilinear");for(var sn=nn.shape,un=sn[0],Xr=sn[1],to=sn[2],uo=sn[3],hn=this.readSync(nn.dataId),fn=new Float32Array(k$2([un,rn,on,uo])),co=[an&&rn>1?Xr-1:Xr,an&&on>1?to-1:to],lo=[an&&rn>1?rn-1:rn,an&&on>1?on-1:on],fo=0,ho=co[0]/lo[0],mo=co[1]/lo[1],Uo=0;Uo<un;Uo++)for(var _d=0;_d<rn;_d++)for(var tp=ho*_d,ep=Math.floor(tp),np=tp-ep,rp=Math.min(Xr-1,Math.ceil(tp)),ip=Uo*nn.strides[0]+ep*nn.strides[1],op=Uo*nn.strides[0]+rp*nn.strides[1],ap=0;ap<on;ap++)for(var sp=mo*ap,up=Math.floor(sp),pp=sp-up,lp=Math.min(to-1,Math.ceil(sp)),dp=ip+up*nn.strides[2],cp=op+up*nn.strides[2],fp=ip+lp*nn.strides[2],gp=op+lp*nn.strides[2],mp=0;mp<uo;mp++){var xp=hn[dp+mp],_p=hn[cp+mp],Sp=xp+(hn[fp+mp]-xp)*pp,Cp=Sp+(_p+(hn[gp+mp]-_p)*pp-Sp)*np;fn[fo++]=Cp}return Fn(fn,[un,rn,on,uo])},st.prototype.resizeBilinearBackprop=function(nn,rn,on){Hh([nn,rn],"resizeBilinearBackprop");for(var an=rn.shape,sn=an[0],un=an[1],Xr=an[2],to=an[3],uo=nn.shape,hn=uo[1],fn=uo[2],co=new Float32Array(sn*un*Xr*to),lo=[on&&hn>1?un-1:un,on&&fn>1?Xr-1:Xr],fo=[on&&hn>1?hn-1:hn,on&&fn>1?fn-1:fn],ho=lo[0]/fo[0],mo=lo[1]/fo[1],Uo=this.readSync(nn.dataId),_d=0,tp=0;tp<sn;tp++)for(var ep=tp*rn.strides[0],np=0;np<hn;np++)for(var rp=np*ho,ip=Math.floor(rp),op=Math.min(Math.ceil(rp),un-1),ap=ep+ip*rn.strides[1],sp=ep+op*rn.strides[1],up=rp-ip,pp=1-up,lp=0;lp<fn;lp++)for(var dp=lp*mo,cp=Math.floor(dp),fp=Math.min(Math.ceil(dp),Xr-1),gp=dp-cp,mp=1-gp,xp=ap+cp*rn.strides[2],_p=ap+fp*rn.strides[2],Sp=sp+cp*rn.strides[2],Cp=sp+fp*rn.strides[2],jp=pp*mp,Dp=pp*gp,Vp=up*mp,Up=up*gp,Kp=0;Kp<to;Kp++){var Mp=Uo[_d++];co[xp+Kp]+=Mp*jp,co[_p+Kp]+=Mp*Dp,co[Sp+Kp]+=Mp*Vp,co[Cp+Kp]+=Mp*Up}return Ln(co,[sn,Xr,un,to],rn.dtype)},st.prototype.resizeNearestNeighbor=function(nn,rn,on,an){Hh(nn,"resizeNearestNeighbor");for(var sn=nn.shape,un=sn[0],Xr=sn[1],to=sn[2],uo=sn[3],hn=this.readSync(nn.dataId),fn=new Float32Array(un*rn*on*uo),co=[an&&rn>1?Xr-1:Xr,an&&on>1?to-1:to],lo=[an&&rn>1?rn-1:rn,an&&on>1?on-1:on],fo=co[0]/lo[0],ho=co[1]/lo[1],mo=0,Uo=0;Uo<un;Uo++)for(var _d=Uo*nn.strides[0],tp=0;tp<rn;tp++)for(var ep=fo*tp,np=_d+Math.min(Xr-1,an?Math.round(ep):Math.floor(ep))*nn.strides[1],rp=0;rp<on;rp++)for(var ip=ho*rp,op=np+Math.min(to-1,an?Math.round(ip):Math.floor(ip))*nn.strides[2],ap=0;ap<uo;ap++){var sp=hn[op+ap];fn[mo++]=sp}return Fn(fn,[un,rn,on,uo],nn.dtype)},st.prototype.resizeNearestNeighborBackprop=function(nn,rn,on){Hh([nn,rn],"resizeNearestNeighborBackprop");for(var an=rn.shape,sn=an[0],un=an[1],Xr=an[2],to=an[3],uo=nn.shape,hn=uo[1],fn=uo[2],co=new Float32Array(sn*un*Xr*to),lo=this.readSync(nn.dataId),fo=[on&&hn>1?un-1:un,on&&fn>1?Xr-1:Xr],ho=[on&&hn>1?hn-1:hn,on&&fn>1?fn-1:fn],mo=fo[0]/ho[0],Uo=fo[1]/ho[1],_d=1/mo,tp=1/Uo,ep=2*Math.ceil(_d)+2,np=2*Math.ceil(tp)+2,rp=0;rp<sn;rp++)for(var ip=rp*rn.strides[0],op=0;op<un;op++)for(var ap=ip+op*rn.strides[1],sp=Math.floor(op*_d),up=Math.floor(sp-ep/2),pp=0;pp<Xr;pp++)for(var lp=ap+pp*rn.strides[2],dp=Math.floor(pp*tp),cp=Math.floor(dp-np/2),fp=0;fp<to;fp++){for(var gp=0,mp=0;mp<ep;mp++){var xp=mp+up;if(!(xp<0||xp>=hn)){var _p=ip+xp*nn.strides[1],Sp=xp*mo;if(op===Math.min(un-1,on?Math.round(Sp):Math.floor(Sp)))for(var Cp=0;Cp<np;Cp++){var jp=Cp+cp;if(!(jp<0||jp>=fn)){var Dp=_p+jp*nn.strides[2],Vp=jp*Uo;pp===Math.min(Xr-1,on?Math.round(Vp):Math.floor(Vp))&&(gp+=lo[Dp+fp])}}}}co[lp+fp]=gp}return Ln(co,rn.shape,rn.dtype)},st.prototype.batchNormalization=function(nn,rn,on,an,sn,un){Hh([nn,rn,on,sn,un],"batchNorm");for(var Xr=this.readSync(nn.dataId),to=this.readSync(rn.dataId),uo=this.readSync(on.dataId),hn=sn?this.readSync(sn.dataId):new Float32Array([1]),fn=un?this.readSync(un.dataId):new Float32Array([0]),co=new Float32Array(Xr.length),lo=fn.length,fo=hn.length,ho=uo.length,mo=to.length,Uo=0,_d=0,tp=0,ep=0,np=0;np<Xr.length;++np)co[np]=fn[Uo++]+(Xr[np]-to[_d++])*hn[tp++]/Math.sqrt(uo[ep++]+an),Uo>=lo&&(Uo=0),_d>=mo&&(_d=0),tp>=fo&&(tp=0),ep>=ho&&(ep=0);return Ln(co,nn.shape)},st.prototype.localResponseNormalization4D=function(nn,rn,on,an,sn){Hh(nn,"localResponseNormalization4D");var un=nn.shape[3],Xr=un-1,to=this.readSync(nn.dataId),uo=nn.size,hn=new Float32Array(uo);function fn(ho){for(var mo=ho%un,Uo=ho-mo+Math.max(0,mo-rn),_d=ho-mo+Math.min(mo+rn,Xr),tp=0;Uo<=_d;Uo++){var ep=to[Uo];tp+=ep*ep}return tp}for(var co=0;co<uo;co++){var lo=fn(co),fo=to[co]*Math.pow(on+an*lo,-sn);hn[co]=fo}return Ln(hn,nn.shape)},st.prototype.LRNGrad=function(nn,rn,on,an,sn,un,Xr){Hh(nn,"LRNGrad");for(var to=nn.shape[3],uo=this.readSync(nn.dataId),hn=this.readSync(rn.dataId),fn=this.readSync(on.dataId),co=new Float32Array(nn.size),lo=nn.size,fo=0;fo<lo;fo++){for(var ho=fo%to,mo=fo-ho+Math.max(0,ho-an),Uo=fo-ho+Math.min(to,ho+an+1),_d=0,tp=mo;tp<Uo;tp++)_d+=Math.pow(hn[tp],2);for(_d=un*_d+sn,tp=mo;tp<Uo;tp++){var ep=-2*un*Xr*hn[tp]*fn[fo]/_d;fo===tp&&(ep+=Math.pow(_d,-Xr)),ep*=uo[fo],co[tp]+=ep}}return Ln(co,nn.shape)},st.prototype.multinomial=function(nn,rn,on,an){Hh(nn,"multinomial");for(var sn=rn?nn:go(nn),un=sn.shape[0],Xr=sn.shape[1],to=Gn([un,on],"int32"),uo=this.readSync(to.dataId),hn=this.readSync(sn.dataId),fn=0;fn<un;++fn){var co=fn*Xr,lo=new Float32Array(Xr-1);lo[0]=hn[co];for(var fo=1;fo<lo.length;++fo)lo[fo]=lo[fo-1]+hn[co+fo];for(var ho=cr(an.toString()),mo=fn*on,Uo=0;Uo<on;++Uo){var _d=ho();uo[mo+Uo]=lo.length;for(var tp=0;tp<lo.length;tp++)if(_d<lo[tp]){uo[mo+Uo]=tp;break}}}return to},st.prototype.oneHot=function(nn,rn,on,an){Hh(nn,"oneHot");var sn=new Float32Array(nn.size*rn);sn.fill(an);for(var un=this.readSync(nn.dataId),Xr=0;Xr<nn.size;++Xr)un[Xr]>=0&&un[Xr]<rn&&(sn[Xr*rn+un[Xr]]=on);return Bn(sn,[nn.size,rn],"int32")},st.prototype.nonMaxSuppression=function(nn,rn,on,an,sn){return Hh(nn,"nonMaxSuppression"),jo(this.readSync(nn.dataId),this.readSync(rn.dataId),on,an,sn)},st.prototype.fft=function(nn){return this.fftBatch(nn,!1)},st.prototype.ifft=function(nn){return this.fftBatch(nn,!0)},st.prototype.fftBatch=function(nn,rn){for(var on=nn.shape[0],an=nn.shape[1],sn=dr(nn.shape,"float32"),un=dr(nn.shape,"float32"),Xr=Tn(nn).as2D(on,an),to=Nn(nn).as2D(on,an),uo=0;uo<on;uo++)for(var hn=Xr.slice([uo,0],[1,an]),fn=to.slice([uo,0],[1,an]),co=Dn(hn,fn),lo=this.readSync(this.fftImpl(co,rn).dataId),fo=0;fo<an;fo++){var ho=zo(lo,fo);sn.values[uo*an+fo]=ho.real,un.values[uo*an+fo]=ho.imag}return Dn(sn.toTensor(),un.toTensor()).as2D(on,an)},st.prototype.fftImpl=function(nn,rn){var on=nn.as1D(),an=on.size;if(this.isExponentOf2(an)){var sn=this.fftRadix2(on,an,rn).as2D(nn.shape[0],nn.shape[1]);return rn&&(sn=Dn(Tn(sn).div(On(an)),Nn(sn).div(On(an)))),sn}var un=this.readSync(nn.dataId),Xr=function(to){for(var uo=new Float32Array(to.length/2),hn=new Float32Array(to.length/2),fn=0;fn<to.length;fn+=2)uo[fn/2]=to[fn],hn[fn/2]=to[fn+1];return{real:uo,imag:hn}}(this.fourierTransformByMatmul(un,an,rn));return Dn(Xr.real,Xr.imag).as2D(nn.shape[0],nn.shape[1])},st.prototype.isExponentOf2=function(nn){return(nn&nn-1)==0},st.prototype.fftRadix2=function(nn,rn,on){if(rn===1)return nn;var an=this.readSync(nn.dataId),sn=rn/2,un=function(mo){for(var Uo=Math.ceil(mo.length/4),_d=new Float32Array(Uo),tp=new Float32Array(Uo),ep=0;ep<mo.length;ep+=4)_d[Math.floor(ep/4)]=mo[ep],tp[Math.floor(ep/4)]=mo[ep+1];return{real:_d,imag:tp}}(an),Xr=Dn(un.real,un.imag).as1D(),to=function(mo){for(var Uo=Math.floor(mo.length/4),_d=new Float32Array(Uo),tp=new Float32Array(Uo),ep=2;ep<mo.length;ep+=4)_d[Math.floor(ep/4)]=mo[ep],tp[Math.floor(ep/4)]=mo[ep+1];return{real:_d,imag:tp}}(an),uo=Dn(to.real,to.imag).as1D();Xr=this.fftRadix2(Xr,sn,on),uo=this.fftRadix2(uo,sn,on);var hn=function(mo,Uo){for(var _d=new Float32Array(mo/2),tp=new Float32Array(mo/2),ep=0;ep<Math.ceil(mo/2);ep++){var np=(Uo?2:-2)*Math.PI*(ep/mo);_d[ep]=Math.cos(np),tp[ep]=Math.sin(np)}return{real:_d,imag:tp}}(rn,on),fn=Dn(hn.real,hn.imag).mul(uo),co=Xr.add(fn),lo=Xr.sub(fn),fo=Tn(co).concat(Tn(lo)),ho=Nn(co).concat(Nn(lo));return Dn(fo,ho).as1D()},st.prototype.fourierTransformByMatmul=function(nn,rn,on){for(var an=new Float32Array(2*rn),sn=0;sn<rn;sn++){for(var un=0,Xr=0,to=0;to<rn;to++){var uo=Ho(sn*to,rn,on),hn=zo(nn,to);un+=hn.real*uo.real-hn.imag*uo.imag,Xr+=hn.real*uo.imag+hn.imag*uo.real}on&&(un/=rn,Xr/=rn),Go(an,un,Xr,sn)}return an},st.prototype.depthToSpace=function(nn,rn,on){C(on==="NHWC",function(){return"Only NHWC dataFormat supported on CPU for depthToSpace. Got "+on}),C(rn>1,function(){return"blockSize should be > 1 for depthToSpace, but was: "+rn});for(var an=nn.shape[0],sn=nn.shape[1],un=nn.shape[2],Xr=nn.shape[3],to=sn*rn,uo=un*rn,hn=Xr/(rn*rn),fn=this.readSync(nn.dataId),co=new Float32Array(an*to*uo*hn),lo=0,fo=0;fo<an;++fo)for(var ho=0;ho<to;++ho)for(var mo=Math.floor(ho/rn),Uo=ho%rn,_d=0;_d<uo;++_d)for(var tp=Math.floor(_d/rn),ep=(Uo*rn+_d%rn)*hn,np=0;np<hn;++np){var rp=np+ep+Xr*(tp+un*(mo+sn*fo));co[lo++]=fn[rp]}return Ln(co,[an,to,uo,hn])},st.prototype.broadcastedBinaryOp=function(nn,rn,on,an){var sn=Ro(nn.shape,rn.shape),un=dr(sn,on),Xr=this.readSync(nn.dataId),to=this.readSync(rn.dataId),uo=Co(nn.shape,sn),hn=Co(rn.shape,sn),fn=un.values;if(uo.length+hn.length===0)for(var co=0;co<fn.length;++co)fn[co]=an(Xr[co%Xr.length],to[co%to.length]);else{var lo=this.bufferSync(nn),fo=this.bufferSync(rn),ho=function(mo){var Uo=un.indexToLoc(mo),_d=Uo.slice(-nn.rank);uo.forEach(function(rp){return _d[rp]=0});var tp=lo.locToIndex(_d),ep=Uo.slice(-rn.rank);hn.forEach(function(rp){return ep[rp]=0});var np=fo.locToIndex(ep);fn[mo]=an(Xr[tp],to[np])};for(co=0;co<fn.length;++co)ho(co)}return un.toTensor()},st.prototype.broadcastedBinaryComplexOp=function(nn,rn,on){var an=Ro(nn.shape,rn.shape),sn=dr(an,"float32"),un=dr(an,"float32"),Xr=this.readSync(nn.dataId),to=this.readSync(rn.dataId),uo=Co(nn.shape,an),hn=Co(rn.shape,an),fn=sn.values,co=un.values;if(uo.length+hn.length===0)for(var lo=0;lo<fn.length;lo++){var fo=lo%Xr.length,ho=lo%to.length,mo=on(Xr[2*fo],Xr[2*fo+1],to[2*ho],to[2*ho+1]);fn[lo]=mo.real,co[lo]=mo.imag}else{var Uo=this.bufferSync(this.data.get(nn.dataId).complexTensors.real),_d=this.bufferSync(this.data.get(rn.dataId).complexTensors.real),tp=function(ep){var np=sn.indexToLoc(ep),rp=np.slice(-nn.rank);uo.forEach(function(up){return rp[up]=0});var ip=Uo.locToIndex(rp),op=np.slice(-rn.rank);hn.forEach(function(up){return op[up]=0});var ap=_d.locToIndex(op),sp=on(Xr[2*ip],Xr[2*ip+1],to[2*ap],to[2*ap+1]);fn[ep]=sp.real,co[ep]=sp.imag};for(lo=0;lo<fn.length;lo++)tp(lo)}return this.complex(sn.toTensor(),un.toTensor())},st.prototype.split=function(nn,rn,on){return Zo(nn,rn,on)},st.prototype.dispose=function(){},st.prototype.floatPrecision=function(){return 32},st.prototype.epsilon=function(){return 1e-7},st.prototype.cropAndResize=function(nn,rn,on,an,sn,un){for(var Xr=nn.shape,to=Xr[0],uo=Xr[1],hn=Xr[2],fn=Xr[3],co=rn.shape[0],lo=an[0],fo=an[1],ho=dr([co,lo,fo,fn],"float32"),mo=this.readSync(rn.dataId),Uo=this.readSync(on.dataId),_d=this.readSync(nn.dataId),tp=nn.strides,ep=ho.strides,np=0;np<co;np++){var rp=4*np,ip=mo[rp],op=mo[rp+1],ap=mo[rp+2],sp=mo[rp+3],up=Uo[np];if(!(up>=to))for(var pp=lo>1?(ap-ip)*(uo-1)/(lo-1):0,lp=fo>1?(sp-op)*(hn-1)/(fo-1):0,dp=0;dp<lo;dp++){var cp=lo>1?ip*(uo-1)+dp*pp:.5*(ip+ap)*(uo-1);if(cp<0||cp>uo-1)for(var fp=0;fp<fo;fp++)for(var gp=0;gp<fn;gp++){var mp=gp+fp*ep[2]+dp*ep[1]+np*ep[0];ho.values[mp]=un}else if(sn==="bilinear"){var xp=Math.floor(cp),_p=Math.ceil(cp),Sp=cp-xp;for(fp=0;fp<fo;fp++)if((Bp=fo>1?op*(hn-1)+fp*lp:.5*(op+sp)*(hn-1))<0||Bp>hn-1)for(gp=0;gp<fn;gp++)mp=gp+fp*ep[2]+dp*ep[1]+np*ep[0],ho.values[mp]=un;else{var Cp=Math.floor(Bp),jp=Math.ceil(Bp),Dp=Bp-Cp;for(gp=0;gp<fn;gp++){var Vp=_d[mp=gp+Cp*tp[2]+xp*tp[1]+up*tp[0]],Up=_d[mp=gp+jp*tp[2]+xp*tp[1]+up*tp[0]],Kp=_d[mp=gp+Cp*tp[2]+_p*tp[1]+up*tp[0]],Mp=Vp+(Up-Vp)*Dp,zp=Kp+(_d[mp=gp+jp*tp[2]+_p*tp[1]+up*tp[0]]-Kp)*Dp;mp=gp+fp*ep[2]+dp*ep[1]+np*ep[0],ho.values[mp]=Mp+(zp-Mp)*Sp}}}else for(fp=0;fp<fo;++fp){var Bp;if((Bp=fo>1?op*(hn-1)+fp*lp:.5*(op+sp)*(hn-1))<0||Bp>hn-1)for(gp=0;gp<fn;gp++)mp=gp+fp*ep[2]+dp*ep[1]+np*ep[0],ho.values[mp]=un;else{var Pp=Math.round(Bp),Gp=Math.round(cp);for(gp=0;gp<fn;gp++){var Wp=gp+Pp*tp[2]+Gp*tp[1]+up*tp[0],Xp=gp+fp*ep[2]+dp*ep[1]+np*ep[0];ho.values[Xp]=_d[Wp]}}}}}return ho.toTensor()},st.prototype.sparseToDense=function(nn,rn,on,an){var sn=Zr(0,nn,on),un=sn.sliceRank,Xr=sn.numUpdates,to=sn.sliceSize,uo=sn.strides,hn=sn.outputSize;return this.scatter(nn,rn,on,hn,to,Xr,un,uo,an,!1)},st.prototype.gatherND=function(nn,rn){var on=rn.shape,an=on[on.length-1],sn=jr(nn,rn),un=sn[0],Xr=sn[1],to=sn[2],uo=sn[3];if(Xr===0)return Fn([],un,nn.dtype);for(var hn=new gt([Xr,to],nn.dtype),fn=this.readSync(rn.dataId),co=this.readSync(nn.dataId),lo=0;lo<Xr;lo++){for(var fo=[],ho=0,mo=0;mo<an;mo++){var Uo=fn[lo*an+mo];ho+=Uo*uo[mo],fo.push(Uo)}if(ho<0||ho>=nn.size/to)throw new Error("Invalid indices: "+fo+" does not index into "+nn.shape);for(var _d=0;_d<to;_d++)hn.values[lo*to+_d]=co[ho*to+_d]}return hn.toTensor().reshape(un)},st.prototype.scatterND=function(nn,rn,on){var an=Zr(0,nn,on),sn=an.sliceRank,un=an.numUpdates,Xr=an.sliceSize,to=an.strides,uo=an.outputSize,hn=On(0);return this.scatter(nn,rn,on,uo,Xr,un,sn,to,hn,!0)},st.prototype.fill=function(nn,rn,on){var an=P$1(on=on||j(rn),k$2(nn));return an.fill(rn),Lt.makeTensor(an,nn,on,this)},st.prototype.onesLike=function(nn){if(nn.dtype==="string")throw new Error("onesLike is not supported for string tensors");return this.fill(nn.shape,1,nn.dtype)},st.prototype.zerosLike=function(nn){var rn=P$1(nn.dtype,k$2(nn.shape));return this.makeOutput(rn,nn.shape,nn.dtype)},st.prototype.linspace=function(nn,rn,on){return Wo(nn,rn,on)},st.prototype.scatter=function(nn,rn,on,an,sn,un,Xr,to,uo,hn){var fn=[an/sn,sn],co=this.readSync(nn.dataId),lo=this.readSync(rn.dataId);if(an===0)return Fn([],on,rn.dtype);var fo=new gt(fn,rn.dtype);fo.values.fill(this.readSync(uo.dataId)[0]);for(var ho=0;ho<un;ho++){for(var mo=[],Uo=0,_d=0;_d<Xr;_d++){var tp=co[ho*Xr+_d];mo.push(tp),Uo+=tp*to[_d]}if(Uo<0||Uo>=an/sn)throw new Error("Invalid indices: "+mo+" does not index into "+on);for(var ep=0;ep<sn;ep++)hn?fo.values[Uo*sn+ep]+=lo[ho*sn+ep]:fo.values[Uo*sn+ep]=rn.rank===0?lo[0]:lo[ho*sn+ep]}return fo.toTensor().reshape(on)},st}(bo);Lt.registerBackend("cpu",function(){return new Kh},1);for(var jh=0,Xh=[{kernelName:"NonMaxSuppressionV5",backendName:"cpu",kernelFunc:function(Mt){var st=Mt.inputs,nn=Mt.backend,rn=Mt.attrs,on=st,an=on.boxes,sn=on.scores,un=rn,Xr=un.maxOutputSize,to=un.iouThreshold,uo=un.scoreThreshold,hn=un.softNmsSigma,fn=nn;Hh(an,"NonMaxSuppressionWithScore");var co=Xo(fn.data.get(an.dataId).values,fn.data.get(sn.dataId).values,Xr,to,uo,hn);return[co.selectedIndices,co.selectedScores]}},{kernelName:"Square",backendName:"cpu",kernelFunc:function(Mt){var st=Mt.inputs,nn=Mt.backend,rn=st.x,on=nn;Hh(rn,"square");for(var an=on.data.get(rn.dataId).values,sn=new Float32Array(an.length),un=0;un<an.length;++un){var Xr=an[un];sn[un]=Xr*Xr}return{dataId:on.write(sn,rn.shape,rn.dtype),shape:rn.shape,dtype:rn.dtype}}},{kernelName:eu,backendName:"cpu",kernelFunc:function(Mt){var st=Mt.inputs,nn=Mt.backend,rn=st,on=rn.a,an=rn.b,sn=nn;Hh([on,an],eu);var un=sn.data.get(on.dataId).values,Xr=sn.data.get(an.dataId).values,to=function(fn,co,lo,fo,ho,mo){var Uo=Ro(fn,co),_d=Uo.length,tp=$(Uo),ep=B(ho,k$2(Uo)),np=fn.length,rp=co.length,ip=$(fn),op=$(co),ap=Co(fn,Uo),sp=Co(co,Uo);if(ap.length+sp.length===0)for(var up=0;up<ep.length;++up)ep[up]=mo(lo[up%lo.length],fo[up%fo.length]);else{var pp=function(lp){var dp=it(lp,_d,tp),cp=dp.slice(-np);ap.forEach(function(xp){return cp[xp]=0});var fp=at(cp,np,ip),gp=dp.slice(-rp);sp.forEach(function(xp){return gp[xp]=0});var mp=at(gp,rp,op);ep[lp]=mo(lo[fp],fo[mp])};for(up=0;up<ep.length;++up)pp(up)}return[ep,Uo]}(on.shape,an.shape,un,Xr,on.dtype,function(fn,co){var lo=fn-co;return lo*lo}),uo=to[0],hn=to[1];return{dataId:sn.write(uo,hn,on.dtype),shape:hn,dtype:on.dtype}}}];jh<Xh.length;jh++)d$1(Xh[jh]);var Yh,$h=function(Mt){this.variableNames=["A"];var st=ua(),nn=Mt[0],rn=Mt[1];this.outputShape=Mt,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+rn+".0, "+nn+`.0);

        vec4 values = `+st.texture2D+`(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `},Qh=function(Mt){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var st=ua(),nn=Mt[0],rn=Mt[1];this.outputShape=Mt,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(`+rn+".0, "+nn+`.0);
            vec4 values = `+st.texture2D+`(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        `+st.output+` = result;
      }
    `};for(var Jh=0,Zh=[{kernelName:"FromPixels",backendName:"webgl",kernelFunc:function(Mt){var st=Mt.inputs,nn=Mt.backend,rn=Mt.attrs,on=st.pixels,an=rn.numChannels,sn=typeof HTMLVideoElement<"u"&&on instanceof HTMLVideoElement,un=typeof HTMLImageElement<"u"&&on instanceof HTMLImageElement,Xr=sn?[on.videoWidth,on.videoHeight]:[on.width,on.height],to=Xr[0],uo=Xr[1],hn=[uo,to],fn=[uo,to,an];(un||sn)&&(Yh==null&&(Yh=document.createElement("canvas").getContext("2d")),Yh.canvas.width=to,Yh.canvas.height=uo,Yh.drawImage(on,0,0,to,uo),on=Yh.canvas);var co=nn.makeTensorInfo(hn,"int32");nn.texData.get(co.dataId).usage=zt.PIXELS,nn.gpgpu.uploadPixelDataToTexture(nn.getTexture(co.dataId),on);var lo=i().getBool("WEBGL_PACK")?new Qh(fn):new $h(fn),fo=nn.runWebGLProgram(lo,[co],"int32");return nn.disposeData(co.dataId),fo}},{kernelName:"NonMaxSuppressionV5",backendName:"webgl",kernelFunc:function(Mt){var st=Mt.inputs,nn=Mt.backend,rn=Mt.attrs;dn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var on=st,an=on.boxes,sn=on.scores,un=rn,Xr=un.maxOutputSize,to=un.iouThreshold,uo=un.scoreThreshold,hn=un.softNmsSigma,fn=nn,co=Xo(fn.readSync(an.dataId),fn.readSync(sn.dataId),Xr,to,uo,hn);return[co.selectedIndices,co.selectedScores]}},{kernelName:"Square",backendName:"webgl",kernelFunc:function(Mt){var st=Mt.inputs,nn=Mt.backend,rn=st.x,on=nn,an=new Cs(rn.shape,"return x * x;");return on.runWebGLProgram(an,[rn],rn.dtype)}},{kernelName:eu,backendName:"webgl",kernelFunc:function(Mt){var st=Mt.inputs,nn=Mt.backend,rn=st,on=rn.a,an=rn.b,sn=nn,un=i().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new La("return (a - b) * (a - b);",on.shape,an.shape):new Ba("return (a - b) * (a - b);",on.shape,an.shape);return sn.compileAndRun(un,[on,an])}}];Jh<Zh.length;Jh++)d$1(Zh[Jh]);for(var tf=0,ef=[{kernelName:"Square",gradFunc:function(Mt,st){var nn=st[0];return{x:function(){return Mt.mul(nn.toFloat().mul(2))}}}},{kernelName:eu,gradFunc:function(Mt,st){var nn=st[0],rn=st[1],on=On(2);return{a:function(){return gc(Mt,gc(on,Cc(nn,rn)))},b:function(){return gc(Mt,gc(on,Cc(rn,nn)))}}}}];tf<ef.length;tf++)p$1(ef[tf]);var nf=function(){function Mt(){}return Mt.prototype.fetch=function(st,nn){return fetch(st,nn)},Mt.prototype.now=function(){return performance.now()},Mt.prototype.encode=function(st,nn){if(nn!=="utf-8"&&nn!=="utf8")throw new Error("Browser's encoder only supports utf-8, but got "+nn);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(st)},Mt.prototype.decode=function(st,nn){return new TextDecoder(nn).decode(st)},Mt}();i().get("IS_BROWSER")&&i().setPlatform("browser",new nf);var rf,of=function(){return require("node-fetch")},af=function(){function Mt(){this.util=require("util"),this.textEncoder=new this.util.TextEncoder}return Mt.prototype.fetch=function(st,nn){return i().global.fetch!=null?i().global.fetch(st,nn):(rf==null&&(rf=of()),rf(st,nn))},Mt.prototype.now=function(){var st=process.hrtime();return 1e3*st[0]+st[1]/1e6},Mt.prototype.encode=function(st,nn){if(nn!=="utf-8"&&nn!=="utf8")throw new Error("Node built-in encoder only supports utf-8, but got "+nn);return this.textEncoder.encode(st)},Mt.prototype.decode=function(st,nn){return st.length===0?"":new this.util.TextDecoder(nn).decode(st)},Mt}();i().get("IS_NODE")&&i().setPlatform("node",new af);var sf={float32:4,int32:4,uint16:2,uint8:1,bool:1},uf=4;function cf(Mt,st){for(var nn={},rn=0,on=function(un){var Xr=un.name,to=un.dtype,uo=un.shape,hn=k$2(uo),fn=void 0;if("quantization"in un){var co=un.quantization;if(co.dtype!=="uint8"&&co.dtype!=="uint16")throw new Error("Weight "+un.name+" has unknown quantization dtype "+co.dtype+". Supported quantization dtypes are: 'uint8' and 'uint16'.");var lo=sf[co.dtype],fo=Mt.slice(rn,rn+hn*lo),ho=co.dtype==="uint8"?new Uint8Array(fo):new Uint16Array(fo);if(to==="float32")fn=Float32Array.from(ho,function(np){return np*co.scale+co.min});else{if(to!=="int32")throw new Error("Unsupported dtype in weight '"+Xr+"': "+to);fn=Int32Array.from(ho,function(np){return Math.round(np*co.scale+co.min)})}rn+=hn*lo}else if(to==="string"){var mo=k$2(un.shape);fn=[];for(var Uo=0;Uo<mo;Uo++){var _d=new Uint32Array(Mt.slice(rn,rn+uf))[0];rn+=uf;var tp=new Uint8Array(Mt.slice(rn,rn+_d));fn.push(tp),rn+=_d}}else{var ep=sf[to];if(fo=Mt.slice(rn,rn+hn*ep),to==="float32")fn=new Float32Array(fo);else if(to==="int32")fn=new Int32Array(fo);else{if(to!=="bool")throw new Error("Unsupported dtype in weight '"+Xr+"': "+to);fn=new Uint8Array(fo)}rn+=hn*ep}nn[Xr]=Fn(fn,uo,to)},an=0,sn=st;an<sn.length;an++)on(sn[an]);return nn}function lf(Mt){if(Mt===null)throw new Error("Invalid input value: "+JSON.stringify(Mt));var st=0,nn=[];Mt.forEach(function(an){if(st+=an.byteLength,nn.push(an.byteLength===an.buffer.byteLength?an:new an.constructor(an)),!(an instanceof Float32Array||an instanceof Int32Array||an instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: "+an.constructor.name)});var rn=new Uint8Array(st),on=0;return nn.forEach(function(an){rn.set(new Uint8Array(an.buffer),on),on+=an.byteLength}),rn.buffer}var hf=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function ff(Mt){return hf?Buffer.byteLength(Mt):new Blob([Mt]).size}function df(Mt){var st=0;Mt.forEach(function(on){st+=on.byteLength});var nn=new Uint8Array(st),rn=0;return Mt.forEach(function(on){nn.set(new Uint8Array(on),rn),rn+=on.byteLength}),nn.buffer}function pf(Mt){for(Mt=Mt.trim();Mt.endsWith("/");)Mt=Mt.slice(0,Mt.length-1);var st=Mt.split("/");return st[st.length-1]}function vf(Mt){if(Mt.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:Mt.modelTopology==null?0:ff(JSON.stringify(Mt.modelTopology)),weightSpecsBytes:Mt.weightSpecs==null?0:ff(JSON.stringify(Mt.weightSpecs)),weightDataBytes:Mt.weightData==null?0:Mt.weightData.byteLength}}var mf=function(){function Mt(){this.saveRouters=[],this.loadRouters=[]}return Mt.getInstance=function(){return Mt.instance==null&&(Mt.instance=new Mt),Mt.instance},Mt.registerSaveRouter=function(st){Mt.getInstance().saveRouters.push(st)},Mt.registerLoadRouter=function(st){Mt.getInstance().loadRouters.push(st)},Mt.getSaveHandlers=function(st){return Mt.getHandlers(st,"save")},Mt.getLoadHandlers=function(st,nn){return Mt.getHandlers(st,"load",nn)},Mt.getHandlers=function(st,nn,rn){var on=[];return(nn==="load"?Mt.getInstance().loadRouters:Mt.getInstance().saveRouters).forEach(function(an){var sn=an(st,rn);sn!==null&&on.push(sn)}),on},Mt}(),gf="://",yf=function(){function Mt(){this.managers={}}return Mt.getInstance=function(){return Mt.instance==null&&(Mt.instance=new Mt),Mt.instance},Mt.registerManager=function(st,nn){C(st!=null,function(){return"scheme must not be undefined or null."}),st.endsWith(gf)&&(st=st.slice(0,st.indexOf(gf))),C(st.length>0,function(){return"scheme must not be an empty string."});var rn=Mt.getInstance();C(rn.managers[st]==null,function(){return"A model store manager is already registered for scheme '"+st+"'."}),rn.managers[st]=nn},Mt.getManager=function(st){var nn=this.getInstance().managers[st];if(nn==null)throw new Error("Cannot find model manager for scheme '"+st+"'");return nn},Mt.getSchemes=function(){return Object.keys(this.getInstance().managers)},Mt}();function xf(Mt){if(Mt.indexOf(gf)===-1)throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+yf.getSchemes().join(","));return{scheme:Mt.split(gf)[0],path:Mt.split(gf)[1]}}function bf(Mt,st,nn){return nn===void 0&&(nn=!1),n$1(this,void 0,void 0,function(){var rn,on,an,sn,un,Xr,to,uo,hn;return r(this,function(fn){switch(fn.label){case 0:return C(Mt!==st,function(){return"Old path and new path are the same: '"+Mt+"'"}),C((rn=mf.getLoadHandlers(Mt)).length>0,function(){return"Copying failed because no load handler is found for source URL "+Mt+"."}),C(rn.length<2,function(){return"Copying failed because more than one ("+rn.length+") load handlers for source URL "+Mt+"."}),on=rn[0],C((an=mf.getSaveHandlers(st)).length>0,function(){return"Copying failed because no save handler is found for destination URL "+st+"."}),C(an.length<2,function(){return"Copying failed because more than one ("+rn.length+") save handlers for destination URL "+st+"."}),sn=an[0],un=xf(Mt).scheme,Xr=xf(Mt).path,to=un===xf(Mt).scheme,[4,on.load()];case 1:return uo=fn.sent(),nn&&to?[4,yf.getManager(un).removeModel(Xr)]:[3,3];case 2:fn.sent(),fn.label=3;case 3:return[4,sn.save(uo)];case 4:return hn=fn.sent(),!nn||to?[3,6]:[4,yf.getManager(un).removeModel(Xr)];case 5:fn.sent(),fn.label=6;case 6:return[2,hn.modelArtifactsInfo]}})})}var wf="models_store",Cf="model_info_store";function Ef(){if(!i().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");var Mt=window||self,st=Mt.indexedDB||Mt.mozIndexedDB||Mt.webkitIndexedDB||Mt.msIndexedDB||Mt.shimIndexedDB;if(st==null)throw new Error("The current browser does not appear to support IndexedDB.");return st}function Rf(Mt){var st=Mt.result;st.createObjectStore(wf,{keyPath:"modelPath"}),st.createObjectStore(Cf,{keyPath:"modelPath"})}var If$1=function(){function Mt(st){if(this.indexedDB=Ef(),st==null||!st)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=st}return Mt.prototype.save=function(st){return n$1(this,void 0,void 0,function(){return r(this,function(nn){if(st.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return[2,this.databaseAction(this.modelPath,st)]})})},Mt.prototype.load=function(){return n$1(this,void 0,void 0,function(){return r(this,function(st){return[2,this.databaseAction(this.modelPath)]})})},Mt.prototype.databaseAction=function(st,nn){var rn=this;return new Promise(function(on,an){var sn=rn.indexedDB.open("tensorflowjs",1);sn.onupgradeneeded=function(){return Rf(sn)},sn.onsuccess=function(){var un=sn.result;if(nn==null){var Xr=un.transaction(wf,"readonly"),to=Xr.objectStore(wf).get(rn.modelPath);to.onsuccess=function(){if(to.result==null)return un.close(),an(new Error("Cannot find model with path '"+rn.modelPath+"' in IndexedDB."));on(to.result.modelArtifacts)},to.onerror=function(fo){return un.close(),an(to.error)},Xr.oncomplete=function(){return un.close()}}else{var uo,hn=vf(nn),fn=un.transaction(Cf,"readwrite"),co=fn.objectStore(Cf),lo=co.put({modelPath:rn.modelPath,modelArtifactsInfo:hn});lo.onsuccess=function(){var fo=(uo=un.transaction(wf,"readwrite")).objectStore(wf).put({modelPath:rn.modelPath,modelArtifacts:nn,modelArtifactsInfo:hn});fo.onsuccess=function(){return on({modelArtifactsInfo:hn})},fo.onerror=function(ho){var mo=(co=fn.objectStore(Cf)).delete(rn.modelPath);mo.onsuccess=function(){return un.close(),an(fo.error)},mo.onerror=function(Uo){return un.close(),an(fo.error)}}},lo.onerror=function(fo){return un.close(),an(lo.error)},fn.oncomplete=function(){uo==null?un.close():uo.oncomplete=function(){return un.close()}}}},sn.onerror=function(un){return an(sn.error)}})},Mt.URL_SCHEME="indexeddb://",Mt}(),kf=function(Mt){return i().getBool("IS_BROWSER")&&!Array.isArray(Mt)&&Mt.startsWith(If$1.URL_SCHEME)?(st=Mt.slice(If$1.URL_SCHEME.length),new If$1(st)):null;var st};mf.registerSaveRouter(kf),mf.registerLoadRouter(kf);var Sf=function(){function Mt(){this.indexedDB=Ef()}return Mt.prototype.listModels=function(){return n$1(this,void 0,void 0,function(){var st=this;return r(this,function(nn){return[2,new Promise(function(rn,on){var an=st.indexedDB.open("tensorflowjs",1);an.onupgradeneeded=function(){return Rf(an)},an.onsuccess=function(){var sn=an.result,un=sn.transaction(Cf,"readonly"),Xr=un.objectStore(Cf).getAll();Xr.onsuccess=function(){for(var to={},uo=0,hn=Xr.result;uo<hn.length;uo++){var fn=hn[uo];to[fn.modelPath]=fn.modelArtifactsInfo}rn(to)},Xr.onerror=function(to){return sn.close(),on(Xr.error)},un.oncomplete=function(){return sn.close()}},an.onerror=function(sn){return on(an.error)}})]})})},Mt.prototype.removeModel=function(st){return n$1(this,void 0,void 0,function(){var nn=this;return r(this,function(rn){var on;return st=(on=st).startsWith(If$1.URL_SCHEME)?on.slice(If$1.URL_SCHEME.length):on,[2,new Promise(function(an,sn){var un=nn.indexedDB.open("tensorflowjs",1);un.onupgradeneeded=function(){return Rf(un)},un.onsuccess=function(){var Xr,to=un.result,uo=to.transaction(Cf,"readwrite"),hn=uo.objectStore(Cf),fn=hn.get(st);fn.onsuccess=function(){if(fn.result==null)return to.close(),sn(new Error("Cannot find model with path '"+st+"' in IndexedDB."));var co=hn.delete(st),lo=function(){var fo=(Xr=to.transaction(wf,"readwrite")).objectStore(wf).delete(st);fo.onsuccess=function(){return an(fn.result.modelArtifactsInfo)},fo.onerror=function(ho){return sn(fn.error)}};co.onsuccess=lo,co.onerror=function(fo){return lo(),to.close(),sn(fn.error)}},fn.onerror=function(co){return to.close(),sn(fn.error)},uo.oncomplete=function(){Xr==null?to.close():Xr.oncomplete=function(){return to.close()}}},un.onerror=function(Xr){return sn(un.error)}})]})})},Mt}();if(i().getBool("IS_BROWSER"))try{yf.registerManager(If$1.URL_SCHEME,new Sf)}catch{}var Af="/",Df="tensorflowjs_models",Tf="info",Nf="model_topology",Ff="weight_specs",_f="weight_data",Of="model_metadata";function Mf(Mt){return{info:[Df,Mt,Tf].join(Af),topology:[Df,Mt,Nf].join(Af),weightSpecs:[Df,Mt,Ff].join(Af),weightData:[Df,Mt,_f].join(Af),modelMetadata:[Df,Mt,Of].join(Af)}}function Bf(Mt){var st=Mt.split(Af);if(st.length<3)throw new Error("Invalid key format: "+Mt);return st.slice(1,st.length-1).join(Af)}var Pf=function(){function Mt(st){if(!i().getBool("IS_BROWSER")||typeof window>"u"||window.localStorage===void 0)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,st==null||!st)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=st,this.keys=Mf(this.modelPath)}return Mt.prototype.save=function(st){return n$1(this,void 0,void 0,function(){var nn,rn,on;return r(this,function(an){if(st.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");nn=JSON.stringify(st.modelTopology),rn=JSON.stringify(st.weightSpecs),on=vf(st);try{return this.LS.setItem(this.keys.info,JSON.stringify(on)),this.LS.setItem(this.keys.topology,nn),this.LS.setItem(this.keys.weightSpecs,rn),this.LS.setItem(this.keys.weightData,function(sn){if(hf)return Buffer.from(sn).toString("base64");for(var un=new Uint8Array(sn),Xr="",to=0,uo=un.length;to<uo;to++)Xr+=String.fromCharCode(un[to]);return btoa(Xr)}(st.weightData)),this.LS.setItem(this.keys.modelMetadata,JSON.stringify({format:st.format,generatedBy:st.generatedBy,convertedBy:st.convertedBy,userDefinedMetadata:st.userDefinedMetadata})),[2,{modelArtifactsInfo:on}]}catch{throw this.LS.removeItem(this.keys.info),this.LS.removeItem(this.keys.topology),this.LS.removeItem(this.keys.weightSpecs),this.LS.removeItem(this.keys.weightData),this.LS.removeItem(this.keys.modelMetadata),new Error("Failed to save model '"+this.modelPath+"' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes="+on.modelTopologyBytes+", weightSpecsBytes="+on.weightSpecsBytes+", weightDataBytes="+on.weightDataBytes+".")}return[2]})})},Mt.prototype.load=function(){return n$1(this,void 0,void 0,function(){var st,nn,rn,on,an,sn,un;return r(this,function(Xr){if((st=JSON.parse(this.LS.getItem(this.keys.info)))==null)throw new Error("In local storage, there is no model with name '"+this.modelPath+"'");if(st.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");if(nn={},(rn=JSON.parse(this.LS.getItem(this.keys.topology)))==null)throw new Error("In local storage, the topology of model '"+this.modelPath+"' is missing.");if(nn.modelTopology=rn,(on=JSON.parse(this.LS.getItem(this.keys.weightSpecs)))==null)throw new Error("In local storage, the weight specs of model '"+this.modelPath+"' are missing.");if(nn.weightSpecs=on,(an=this.LS.getItem(this.keys.modelMetadata))!=null&&(sn=JSON.parse(an),nn.format=sn.format,nn.generatedBy=sn.generatedBy,nn.convertedBy=sn.convertedBy,nn.userDefinedMetadata=sn.userDefinedMetadata),(un=this.LS.getItem(this.keys.weightData))==null)throw new Error("In local storage, the binary weight values of model '"+this.modelPath+"' are missing.");return nn.weightData=function(to){if(hf){var uo=Buffer.from(to,"base64");return uo.buffer.slice(uo.byteOffset,uo.byteOffset+uo.byteLength)}for(var hn=atob(to),fn=new Uint8Array(hn.length),co=0;co<hn.length;++co)fn.set([hn.charCodeAt(co)],co);return fn.buffer}(un),[2,nn]})})},Mt.URL_SCHEME="localstorage://",Mt}(),Lf=function(Mt){return i().getBool("IS_BROWSER")&&!Array.isArray(Mt)&&Mt.startsWith(Pf.URL_SCHEME)?(st=Mt.slice(Pf.URL_SCHEME.length),new Pf(st)):null;var st};mf.registerSaveRouter(Lf),mf.registerLoadRouter(Lf);var Wf=function(){function Mt(){C(i().getBool("IS_BROWSER"),function(){return"Current environment is not a web browser"}),C(typeof window>"u"||window.localStorage!==void 0,function(){return"Current browser does not appear to support localStorage"}),this.LS=window.localStorage}return Mt.prototype.listModels=function(){return n$1(this,void 0,void 0,function(){var st,nn,rn,on,an,sn;return r(this,function(un){for(st={},nn=Df+Af,rn=Af+Tf,on=0;on<this.LS.length;++on)(an=this.LS.key(on)).startsWith(nn)&&an.endsWith(rn)&&(sn=Bf(an),st[sn]=JSON.parse(this.LS.getItem(an)));return[2,st]})})},Mt.prototype.removeModel=function(st){return n$1(this,void 0,void 0,function(){var nn,rn;return r(this,function(on){var an;if(st=(an=st).startsWith(Pf.URL_SCHEME)?an.slice(Pf.URL_SCHEME.length):an,nn=Mf(st),this.LS.getItem(nn.info)==null)throw new Error("Cannot find model at path '"+st+"'");return rn=JSON.parse(this.LS.getItem(nn.info)),this.LS.removeItem(nn.info),this.LS.removeItem(nn.topology),this.LS.removeItem(nn.weightSpecs),this.LS.removeItem(nn.weightData),[2,rn]})})},Mt}();if(i().getBool("IS_BROWSER"))try{yf.registerManager(Pf.URL_SCHEME,new Wf)}catch{}var Uf="model",Vf=".json",zf=".weights.bin";function Gf(Mt){return new Promise(function(st){return setTimeout(st)}).then(Mt)}var Hf=function(){function Mt(st){if(!i().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");st.startsWith(Mt.URL_SCHEME)&&(st=st.slice(Mt.URL_SCHEME.length)),st!=null&&st.length!==0||(st=Uf),this.modelTopologyFileName=st+Vf,this.weightDataFileName=st+zf}return Mt.prototype.save=function(st){return n$1(this,void 0,void 0,function(){var nn,rn,on,an,sn,un;return r(this,function(Xr){switch(Xr.label){case 0:if(typeof document>"u")throw new Error("Browser downloads are not supported in this environment since `document` is not present");if(nn=window.URL.createObjectURL(new Blob([st.weightData],{type:"application/octet-stream"})),!(st.modelTopology instanceof ArrayBuffer))return[3,1];throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");case 1:return rn=[{paths:["./"+this.weightDataFileName],weights:st.weightSpecs}],on={modelTopology:st.modelTopology,format:st.format,generatedBy:st.generatedBy,convertedBy:st.convertedBy,weightsManifest:rn},an=window.URL.createObjectURL(new Blob([JSON.stringify(on)],{type:"application/json"})),(sn=this.jsonAnchor==null?document.createElement("a"):this.jsonAnchor).download=this.modelTopologyFileName,sn.href=an,[4,Gf(function(){return sn.dispatchEvent(new MouseEvent("click"))})];case 2:return Xr.sent(),st.weightData==null?[3,4]:((un=this.weightDataAnchor==null?document.createElement("a"):this.weightDataAnchor).download=this.weightDataFileName,un.href=nn,[4,Gf(function(){return un.dispatchEvent(new MouseEvent("click"))})]);case 3:Xr.sent(),Xr.label=4;case 4:return[2,{modelArtifactsInfo:vf(st)}]}})})},Mt.URL_SCHEME="downloads://",Mt}(),qf=function(){function Mt(st){if(st==null||st.length<1)throw new Error("When calling browserFiles, at least 1 file is required, but received "+st);this.files=st}return Mt.prototype.load=function(){return n$1(this,void 0,void 0,function(){var st,nn,rn=this;return r(this,function(on){return st=this.files[0],nn=this.files.slice(1),[2,new Promise(function(an,sn){var un=new FileReader;un.onload=function(Xr){var to=JSON.parse(Xr.target.result),uo=to.modelTopology;if(uo!=null){nn.length===0&&an({modelTopology:uo});var hn=to.weightsManifest;if(hn!=null){var fn;try{fn=rn.checkManifestAndWeightFiles(hn,nn)}catch(ho){return void sn(ho)}var co=[],lo=[],fo=[];hn.forEach(function(ho){ho.paths.forEach(function(mo){lo.push(mo),fo.push(null)}),co.push.apply(co,ho.weights)}),hn.forEach(function(ho){ho.paths.forEach(function(mo){var Uo=new FileReader;Uo.onload=function(_d){var tp=_d.target.result,ep=lo.indexOf(mo);fo[ep]=tp,fo.indexOf(null)===-1&&an({modelTopology:uo,weightSpecs:co,weightData:df(fo),format:to.format,generatedBy:to.generatedBy,convertedBy:to.convertedBy,userDefinedMetadata:to.userDefinedMetadata})},Uo.onerror=function(_d){return sn("Failed to weights data from file of path '"+mo+"'.")},Uo.readAsArrayBuffer(fn[mo])})})}else sn(new Error("weightManifest field is missing from file "+st.name))}else sn(new Error("modelTopology field is missing from file "+st.name))},un.onerror=function(Xr){return sn("Failed to read model topology and weights manifest JSON from file '"+st.name+"'. BrowserFiles supports loading Keras-style tf.Model artifacts only.")},un.readAsText(st)})]})})},Mt.prototype.checkManifestAndWeightFiles=function(st,nn){for(var rn=[],on=nn.map(function(Xr){return pf(Xr.name)}),an={},sn=0,un=st;sn<un.length;sn++)un[sn].paths.forEach(function(Xr){var to=pf(Xr);if(rn.indexOf(to)!==-1)throw new Error("Duplicate file basename found in weights manifest: '"+to+"'");if(rn.push(to),on.indexOf(to)===-1)throw new Error("Weight file with basename '"+to+"' is not provided.");an[Xr]=nn[on.indexOf(to)]});if(rn.length!==nn.length)throw new Error("Mismatch in the number of files in weights manifest ("+rn.length+") and the number of weight files provided ("+nn.length+").");return an},Mt}();function Kf(Mt,st,nn,rn){(function(an){C(an!=null&&Array.isArray(an)&&an.length>0,function(){return"promises must be a none empty array"})})(Mt),function(an,sn){C(an>=0&&an<=1,function(){return"Progress fraction must be in range [0, 1], but got startFraction "+an}),C(sn>=0&&sn<=1,function(){return"Progress fraction must be in range [0, 1], but got endFraction "+sn}),C(sn>=an,function(){return"startFraction must be no more than endFraction, but got startFraction "+an+" and endFraction "+sn})}(nn=nn??0,rn=rn??1);var on=0;return Promise.all(Mt.map(function(an){return an.then(function(sn){var un=nn+ ++on/Mt.length*(rn-nn);return st(un),sn}),an}))}function jf(Mt,st){return n$1(this,void 0,void 0,function(){var nn,rn,on,an,sn,un,Xr,to,uo;return r(this,function(hn){switch(hn.label){case 0:return st==null&&(st={}),nn=st.fetchFunc==null?i().platform.fetch:st.fetchFunc,rn=Mt.map(function(fn){return nn(fn,st.requestInit,{isBinary:!0})}),on=0,an=.5,st.onProgress!=null?[3,2]:[4,Promise.all(rn)];case 1:return sn=hn.sent(),[3,4];case 2:return[4,Kf(rn,st.onProgress,on,an)];case 3:sn=hn.sent(),hn.label=4;case 4:return un=sn.map(function(fn){return fn.arrayBuffer()}),Xr=.5,to=1,st.onProgress!=null?[3,6]:[4,Promise.all(un)];case 5:return uo=hn.sent(),[3,8];case 6:return[4,Kf(un,st.onProgress,Xr,to)];case 7:uo=hn.sent(),hn.label=8;case 8:return[2,uo]}})})}function Xf(Mt){var st=this;return function(nn,rn,on){return rn===void 0&&(rn=""),n$1(st,void 0,void 0,function(){var an,sn,un,Xr,to,uo,hn,fn,co,lo;return r(this,function(fo){switch(fo.label){case 0:if(an=nn.map(function(){return!1}),sn={},un=on!=null?on.map(function(){return!1}):[],Xr=[],nn.forEach(function(ho,mo){var Uo=0;ho.weights.forEach(function(_d){var tp="quantization"in _d?_d.quantization.dtype:_d.dtype,ep=sf[tp]*k$2(_d.shape),np=function(){an[mo]=!0,sn[mo]==null&&(sn[mo]=[]),sn[mo].push({manifestEntry:_d,groupOffset:Uo,sizeBytes:ep})};on!=null?on.forEach(function(rp,ip){rp===_d.name&&(np(),un[ip]=!0)}):np(),Xr.push(_d.name),Uo+=ep})}),!un.every(function(ho){return ho}))throw to=on.filter(function(ho,mo){return!un[mo]}),new Error("Could not find weights in manifest with names: "+to.join(", ")+`. 
Manifest JSON has weights with names: `+Xr.join(", ")+".");return uo=an.reduce(function(ho,mo,Uo){return mo&&ho.push(Uo),ho},[]),hn=[],uo.forEach(function(ho){nn[ho].paths.forEach(function(mo){var Uo=rn+(rn.endsWith("/")?"":"/")+mo;hn.push(Uo)})}),[4,Mt(hn)];case 1:return fn=fo.sent(),co={},lo=0,uo.forEach(function(ho){for(var mo=nn[ho].paths.length,Uo=0,_d=0;_d<mo;_d++)Uo+=fn[lo+_d].byteLength;for(var tp=new ArrayBuffer(Uo),ep=new Uint8Array(tp),np=0,rp=0;rp<mo;rp++){var ip=new Uint8Array(fn[lo+rp]);ep.set(ip,np),np+=ip.byteLength}sn[ho].forEach(function(op){var ap=cf(tp.slice(op.groupOffset,op.groupOffset+op.sizeBytes),[op.manifestEntry]);for(var sp in ap)co[sp]=ap[sp]}),lo+=mo}),[2,co]}})})}}mf.registerSaveRouter(function(Mt){return i().getBool("IS_BROWSER")&&!Array.isArray(Mt)&&Mt.startsWith(Hf.URL_SCHEME)?function(st){return st===void 0&&(st="model"),new Hf(st)}(Mt.slice(Hf.URL_SCHEME.length)):null});var Yf=function(){function Mt(st,nn){if(this.DEFAULT_METHOD="POST",nn==null&&(nn={}),this.weightPathPrefix=nn.weightPathPrefix,this.onProgress=nn.onProgress,nn.fetchFunc!=null?(C(typeof nn.fetchFunc=="function",function(){return"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"}),this.fetch=nn.fetchFunc):this.fetch=i().platform.fetch,C(st!=null&&st.length>0,function(){return"URL path for http must not be null, undefined or empty."}),Array.isArray(st)&&C(st.length===2,function(){return"URL paths for http must have a length of 2, (actual length is "+st.length+")."}),this.path=st,nn.requestInit!=null&&nn.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=nn.requestInit||{}}return Mt.prototype.save=function(st){return n$1(this,void 0,void 0,function(){var nn,rn,on,an;return r(this,function(sn){switch(sn.label){case 0:if(st.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");return(nn=Object.assign({method:this.DEFAULT_METHOD},this.requestInit)).body=new FormData,rn=[{paths:["./model.weights.bin"],weights:st.weightSpecs}],on={modelTopology:st.modelTopology,format:st.format,generatedBy:st.generatedBy,convertedBy:st.convertedBy,userDefinedMetadata:st.userDefinedMetadata,weightsManifest:rn},nn.body.append("model.json",new Blob([JSON.stringify(on)],{type:"application/json"}),"model.json"),st.weightData!=null&&nn.body.append("model.weights.bin",new Blob([st.weightData],{type:"application/octet-stream"}),"model.weights.bin"),[4,this.fetch(this.path,nn)];case 1:if((an=sn.sent()).ok)return[2,{modelArtifactsInfo:vf(st),responses:[an]}];throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+an.status+".")}})})},Mt.prototype.load=function(){return n$1(this,void 0,void 0,function(){var st,nn,rn,on,an,sn,un,Xr,to,uo,hn,fn;return r(this,function(co){switch(co.label){case 0:return[4,this.fetch(this.path,this.requestInit)];case 1:if(!(st=co.sent()).ok)throw new Error("Request to "+this.path+" failed with status code "+st.status+". Please verify this URL points to the model JSON of the model to load.");co.label=2;case 2:return co.trys.push([2,4,,5]),[4,st.json()];case 3:return nn=co.sent(),[3,5];case 4:throw co.sent(),rn="Failed to parse model JSON of response from "+this.path+".",this.path.endsWith(".pb")?rn+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":rn+=" Please make sure the server is serving valid JSON for this request.",new Error(rn);case 5:if(on=nn.modelTopology,an=nn.weightsManifest,sn=nn.generatedBy,un=nn.convertedBy,Xr=nn.format,to=nn.userDefinedMetadata,on==null&&an==null)throw new Error("The JSON from HTTP path "+this.path+" contains neither model topology or manifest for weights.");return an==null?[3,7]:[4,this.loadWeights(an)];case 6:fn=co.sent(),uo=fn[0],hn=fn[1],co.label=7;case 7:return[2,{modelTopology:on,weightSpecs:uo,weightData:hn,userDefinedMetadata:to,generatedBy:sn,convertedBy:un,format:Xr}]}})})},Mt.prototype.loadWeights=function(st){return n$1(this,void 0,void 0,function(){var nn,rn,on,an,sn,un,Xr,to,uo,hn,fn;return r(this,function(co){switch(co.label){case 0:for(nn=Array.isArray(this.path)?this.path[1]:this.path,rn=function(lo){var fo=lo.lastIndexOf("/"),ho=lo.lastIndexOf("?"),mo=lo.substring(0,fo),Uo=ho>fo?lo.substring(ho):"";return[mo+"/",Uo]}(nn),on=rn[0],an=rn[1],sn=this.weightPathPrefix||on,un=[],Xr=0,to=st;Xr<to.length;Xr++)uo=to[Xr],un.push.apply(un,uo.weights);return hn=[],st.forEach(function(lo){lo.paths.forEach(function(fo){hn.push(sn+fo+an)})}),[4,jf(hn,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress})];case 1:return fn=co.sent(),[2,[un,df(fn)]]}})})},Mt.URL_SCHEME_REGEX=/^https?:\/\//,Mt}();function $f(Mt){return Mt.match(Yf.URL_SCHEME_REGEX)!=null}var Qf=function(Mt,st){return typeof fetch>"u"?null:(Array.isArray(Mt)?Mt.every(function(nn){return $f(nn)}):$f(Mt))?Jf(Mt,{onProgress:st}):null};function Jf(Mt,st){return new Yf(Mt,st)}mf.registerSaveRouter(Qf),mf.registerLoadRouter(Qf);var Zf=function(){function Mt(st){this.modelArtifacts=st}return Mt.prototype.load=function(){return n$1(this,void 0,void 0,function(){return r(this,function(st){return[2,this.modelArtifacts]})})},Mt}(),td=function(){function Mt(st){this.saveHandler=st}return Mt.prototype.save=function(st){return n$1(this,void 0,void 0,function(){return r(this,function(nn){return[2,this.saveHandler(st)]})})},Mt}(),ed=Object.freeze({browserFiles:function(Mt){return new qf(Mt)},browserHTTPRequest:function(Mt,st){return Jf(Mt,st)},concatenateArrayBuffers:df,decodeWeights:cf,encodeWeights:function(Mt,st){return n$1(this,void 0,void 0,function(){var nn,rn,on,an,sn,un=this;return r(this,function(Xr){switch(Xr.label){case 0:for(nn=[],rn=[],on=Array.isArray(Mt)?Mt.map(function(to){return to.name}):Object.keys(Mt),an=function(to){var uo=on[to],hn=Array.isArray(Mt)?Mt[to].tensor:Mt[uo];if(hn.dtype!=="float32"&&hn.dtype!=="int32"&&hn.dtype!=="bool"&&hn.dtype!=="string")throw new Error("Unsupported dtype in weight '"+uo+"': "+hn.dtype);var fn={name:uo,shape:hn.shape,dtype:hn.dtype};if(hn.dtype==="string"){var co=new Promise(function(lo){return n$1(un,void 0,void 0,function(){var fo,ho,mo,Uo,_d,tp,ep;return r(this,function(np){switch(np.label){case 0:return[4,hn.bytes()];case 1:for(fo=np.sent(),ho=fo.reduce(function(rp,ip){return rp+ip.length},0)+uf*fo.length,mo=new Uint8Array(ho),Uo=0,_d=0;_d<fo.length;_d++)tp=fo[_d],ep=new Uint8Array(new Uint32Array([tp.length]).buffer),mo.set(ep,Uo),Uo+=uf,mo.set(tp,Uo),Uo+=tp.length;return lo(mo),[2]}})})});rn.push(co)}else rn.push(hn.data());st!=null&&(fn.group=st),nn.push(fn)},sn=0;sn<on.length;++sn)an(sn);return[4,Promise.all(rn)];case 1:return[2,{data:lf(Xr.sent()),specs:nn}]}})})},fromMemory:function(Mt,st,nn,rn){return arguments.length===1?Mt.modelTopology!=null||Mt.weightSpecs!=null?new Zf(Mt):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new Zf({modelTopology:Mt})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new Zf({modelTopology:Mt,weightSpecs:st,weightData:nn,trainingConfig:rn}))},getLoadHandlers:function(Mt,st){return mf.getLoadHandlers(Mt,st)},getModelArtifactsInfoForJSON:vf,getSaveHandlers:function(Mt){return mf.getSaveHandlers(Mt)},http:Jf,isHTTPScheme:$f,loadWeights:function(Mt,st,nn,rn){return st===void 0&&(st=""),n$1(this,void 0,void 0,function(){return r(this,function(on){return[2,Xf(function(an){return jf(an,{requestInit:rn})})(Mt,st,nn)]})})},registerLoadRouter:function(Mt){return mf.registerLoadRouter(Mt)},registerSaveRouter:function(Mt){return mf.registerSaveRouter(Mt)},weightsLoaderFactory:Xf,withSaveHandler:function(Mt){return new td(Mt)},copyModel:function(Mt,st){return n$1(this,void 0,void 0,function(){return r(this,function(nn){return[2,bf(Mt,st,!1)]})})},listModels:function(){return n$1(this,void 0,void 0,function(){var Mt,st,nn,rn,on,an,sn;return r(this,function(un){switch(un.label){case 0:Mt=yf.getSchemes(),st={},nn=0,rn=Mt,un.label=1;case 1:return nn<rn.length?(on=rn[nn],[4,yf.getManager(on).listModels()]):[3,4];case 2:for(sn in an=un.sent())st[on+gf+sn]=an[sn];un.label=3;case 3:return nn++,[3,1];case 4:return[2,st]}})})},moveModel:function(Mt,st){return n$1(this,void 0,void 0,function(){return r(this,function(nn){return[2,bf(Mt,st,!0)]})})},removeModel:function(Mt){return n$1(this,void 0,void 0,function(){var st;return r(this,function(nn){return st=xf(Mt),[2,yf.getManager(st.scheme).removeModel(st.path)]})})}}),nd;An({confusionMatrix_:function(Mt,st,nn){var rn=mn(Mt,"labels","confusionMatrix"),on=mn(st,"predictions","confusionMatrix");C(nn==null||nn>0&&Number.isInteger(nn),function(){return"If provided, numClasses must be a positive integer, but got "+nn}),C(rn.rank===1,function(){return"Expected the rank of labels to be 1, but got "+rn.rank}),C(on.rank===1,function(){return"Expected the rank of predictions to be 1, but got "+on.rank}),C(rn.shape[0]===on.shape[0],function(){return"Mismatch in the number of examples: "+rn.shape[0]+" vs. "+on.shape[0]+". Labels and predictions should have the same number of elements."}),C(nn>0&&Number.isInteger(nn),function(){return"numClasses is required to be a positive integer, but got "+nn});var an=Rr(rn.asType("int32"),nn),sn=Rr(on.asType("int32"),nn);return an.transpose().matMul(sn).asType("int32")}});var ad=An({fromPixels_:function(Mt,st){if(st===void 0&&(st=3),st>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(Mt==null)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");var nn=!1,rn=!1,on=!1,an=!1,sn=!1;if(Mt.data instanceof Uint8Array)nn=!0;else if(typeof ImageData<"u"&&Mt instanceof ImageData)rn=!0;else if(typeof HTMLVideoElement<"u"&&Mt instanceof HTMLVideoElement)on=!0;else if(typeof HTMLImageElement<"u"&&Mt instanceof HTMLImageElement)an=!0;else{if(Mt.getContext==null)throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was "+Mt.constructor.name);sn=!0}if(on&&on&&Mt.readyState<2)throw new Error("The video element has not loaded data yet. Please wait for `loadeddata` event on the <video> element.");if(l$1("FromPixels",Lt.backendName)!=null)return Lt.runKernel("FromPixels",{pixels:Mt},{numChannels:st});var un,Xr,to=on?[Mt.videoWidth,Mt.videoHeight]:[Mt.width,Mt.height],uo=to[0],hn=to[1];if(sn?un=Mt.getContext("2d").getImageData(0,0,uo,hn).data:rn||nn?un=Mt.data:(an||on)&&(nd==null&&(nd=document.createElement("canvas").getContext("2d")),nd.canvas.width=uo,nd.canvas.height=hn,nd.drawImage(Mt,0,0,uo,hn),un=nd.getImageData(0,0,uo,hn).data),st===4)Xr=new Int32Array(un);else{var fn=uo*hn;Xr=new Int32Array(fn*st);for(var co=0;co<fn;co++)for(var lo=0;lo<st;++lo)Xr[co*st+lo]=un[4*co+lo]}return Pn(Xr,[hn,uo,st],"int32")}}),id=Object.freeze({toPixels:function(Mt,st){return n$1(this,void 0,void 0,function(){var nn,rn,on,an,sn,un,Xr,to,uo,hn,fn,co,lo,fo,ho,mo,Uo,_d,tp,ep,np,rp,ip;return r(this,function(op){switch(op.label){case 0:if(nn=mn(Mt,"img","toPixels"),Mt instanceof wt||(nn=nn.toInt()),nn.rank!==2&&nn.rank!==3)throw new Error("toPixels only supports rank 2 or 3 tensors, got rank "+nn.rank+".");if(rn=nn.shape.slice(0,2),on=rn[0],an=rn[1],(sn=nn.rank===2?1:nn.shape[2])>4||sn===2)throw new Error("toPixels only supports depth of size 1, 3 or 4 but got "+sn);return[4,nn.data()];case 1:return un=op.sent(),Xr=nn.min(),to=nn.max(),[4,Promise.all([Xr.data(),to.data()])];case 2:if(uo=op.sent(),hn=uo[0],fn=uo[1],co=hn[0],lo=fn[0],Xr.dispose(),to.dispose(),nn.dtype==="float32"){if(co<0||lo>1)throw new Error("Tensor values for a float32 Tensor must be in the range [0 - 1] but got range ["+co+" - "+lo+"].")}else{if(nn.dtype!=="int32")throw new Error("Unsupported type for toPixels: "+nn.dtype+". Please use float32 or int32 tensors.");if(co<0||lo>255)throw new Error("Tensor values for a int32 Tensor must be in the range [0 - 255] but got range ["+co+" - "+lo+"].")}for(fo=nn.dtype==="float32"?255:1,ho=new Uint8ClampedArray(an*on*4),mo=0;mo<on*an;++mo)Uo=void 0,_d=void 0,tp=void 0,ep=void 0,sn===1?(Uo=un[mo]*fo,_d=un[mo]*fo,tp=un[mo]*fo,ep=255):sn===3?(Uo=un[3*mo]*fo,_d=un[3*mo+1]*fo,tp=un[3*mo+2]*fo,ep=255):sn===4&&(Uo=un[4*mo]*fo,_d=un[4*mo+1]*fo,tp=un[4*mo+2]*fo,ep=un[4*mo+3]*fo),ho[(np=4*mo)+0]=Math.round(Uo),ho[np+1]=Math.round(_d),ho[np+2]=Math.round(tp),ho[np+3]=Math.round(ep);return st!=null&&(st.width=an,st.height=on,rp=st.getContext("2d"),ip=new ImageData(ho,an,on),rp.putImageData(ip,0,0)),nn!==Mt&&nn.dispose(),[2,ho]}})})},fromPixels:ad}),sd=function(){function Mt(){}return Mt.prototype.getClassName=function(){return this.constructor.className},Mt.fromConfig=function(st,nn){return new st(nn)},Mt}(),ud=function(){function Mt(){this.classNameMap={}}return Mt.getMap=function(){return Mt.instance==null&&(Mt.instance=new Mt),Mt.instance},Mt.register=function(st){Mt.getMap().classNameMap[st.className]=[st,st.fromConfig]},Mt}();function cd(Mt){C(Mt.className!=null,function(){return"Class being registered does not have the static className property defined."}),C(typeof Mt.className=="string",function(){return"className is required to be a string, but got type "+typeof Mt.className}),C(Mt.className.length>0,function(){return"Class being registered has an empty-string as its className, which is disallowed."}),ud.register(Mt)}var xd=function(Mt){function st(){return Mt!==null&&Mt.apply(this,arguments)||this}return e$1(st,Mt),st.prototype.minimize=function(nn,rn,on){rn===void 0&&(rn=!1);var an=this.computeGradients(nn,on),sn=an.value,un=an.grads;if(on!=null){var Xr=on.map(function(to){return{name:to.name,tensor:un[to.name]}});this.applyGradients(Xr)}else this.applyGradients(un);return tn(un),rn?sn:(sn.dispose(),null)},Object.defineProperty(st.prototype,"iterations",{get:function(){return this.iterations_==null&&(this.iterations_=0),this.iterations_},enumerable:!0,configurable:!0}),st.prototype.incrementIterations=function(){this.iterations_=this.iterations+1},st.prototype.computeGradients=function(nn,rn){return po(nn,rn)},st.prototype.dispose=function(){this.iterations_!=null&&tn(this.iterations_)},st.prototype.saveIterations=function(){return n$1(this,void 0,void 0,function(){return r(this,function(nn){return this.iterations_==null&&(this.iterations_=0),[2,{name:"iter",tensor:On(this.iterations_,"int32")}]})})},st.prototype.getWeights=function(){return n$1(this,void 0,void 0,function(){return r(this,function(nn){throw new Error("getWeights() is not implemented for this optimizer yet.")})})},st.prototype.setWeights=function(nn){return n$1(this,void 0,void 0,function(){return r(this,function(rn){throw new Error("setWeights() is not implemented for this optimizer class "+this.getClassName())})})},st.prototype.extractIterations=function(nn){return n$1(this,void 0,void 0,function(){var rn;return r(this,function(on){switch(on.label){case 0:return rn=this,[4,nn[0].tensor.data()];case 1:return rn.iterations_=on.sent()[0],[2,nn.slice(1)]}})})},st}(sd);Object.defineProperty(xd,Symbol.hasInstance,{value:function(Mt){return Mt.minimize!=null&&Mt.computeGradients!=null&&Mt.applyGradients!=null}});var bd=function(Mt){function st(nn,rn,on){on===void 0&&(on=null);var an=Mt.call(this)||this;return an.learningRate=nn,an.rho=rn,an.epsilon=on,an.accumulatedGrads=[],an.accumulatedUpdates=[],on==null&&(an.epsilon=Lt.backend.epsilon()),an}return e$1(st,Mt),st.prototype.applyGradients=function(nn){var rn=this;(Array.isArray(nn)?nn.map(function(on){return on.name}):Object.keys(nn)).forEach(function(on,an){var sn=Lt.registeredVariables[on];rn.accumulatedGrads[an]==null&&(rn.accumulatedGrads[an]={originalName:on+"/accum_grad",variable:Ze(function(){return Xn(sn).variable(!1)})}),rn.accumulatedUpdates[an]==null&&(rn.accumulatedUpdates[an]={originalName:on+"/accum_var",variable:Ze(function(){return Xn(sn).variable(!1)})});var un=Array.isArray(nn)?nn[an].tensor:nn[on];if(un!=null){var Xr=rn.accumulatedGrads[an].variable,to=rn.accumulatedUpdates[an].variable;Ze(function(){var uo=Xr.mul(rn.rho).add(un.square().mul(1-rn.rho)),hn=to.add(rn.epsilon).sqrt().div(Xr.add(rn.epsilon).sqrt()).mul(un),fn=to.mul(rn.rho).add(hn.square().mul(1-rn.rho));Xr.assign(uo),to.assign(fn);var co=hn.mul(-rn.learningRate).add(sn);sn.assign(co)})}}),this.incrementIterations()},st.prototype.dispose=function(){this.accumulatedUpdates!=null&&(tn(this.accumulatedGrads.map(function(nn){return nn.variable})),tn(this.accumulatedUpdates.map(function(nn){return nn.variable})))},st.prototype.getWeights=function(){return n$1(this,void 0,void 0,function(){var nn;return r(this,function(rn){switch(rn.label){case 0:return nn=this.accumulatedGrads.concat(this.accumulatedUpdates),[4,this.saveIterations()];case 1:return[2,[rn.sent()].concat(nn.map(function(on){return{name:on.originalName,tensor:on.variable}}))]}})})},st.prototype.setWeights=function(nn){return n$1(this,void 0,void 0,function(){var rn;return r(this,function(on){switch(on.label){case 0:return[4,this.extractIterations(nn)];case 1:return nn=on.sent(),rn=nn.length/2,this.accumulatedGrads=nn.slice(0,rn).map(function(an){return{originalName:an.name,variable:an.tensor.variable(!1)}}),this.accumulatedUpdates=nn.slice(rn,2*rn).map(function(an){return{originalName:an.name,variable:an.tensor.variable(!1)}}),[2]}})})},st.prototype.getConfig=function(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}},st.fromConfig=function(nn,rn){return new nn(rn.learningRate,rn.rho,rn.epsilon)},st.className="Adadelta",st}(xd);cd(bd);var wd=function(Mt){function st(nn,rn){rn===void 0&&(rn=.1);var on=Mt.call(this)||this;return on.learningRate=nn,on.initialAccumulatorValue=rn,on.accumulatedGrads=[],on}return e$1(st,Mt),st.prototype.applyGradients=function(nn){var rn=this;(Array.isArray(nn)?nn.map(function(on){return on.name}):Object.keys(nn)).forEach(function(on,an){var sn=Lt.registeredVariables[on];rn.accumulatedGrads[an]==null&&(rn.accumulatedGrads[an]={originalName:on+"/accumulator",variable:Ze(function(){return Hn(sn.shape,rn.initialAccumulatorValue).variable(!1)})});var un=Array.isArray(nn)?nn[an].tensor:nn[on];if(un!=null){var Xr=rn.accumulatedGrads[an].variable;Ze(function(){var to=Xr.add(un.square());Xr.assign(to);var uo=un.div(to.add(Lt.backend.epsilon()).sqrt()).mul(-rn.learningRate).add(sn);sn.assign(uo)})}}),this.incrementIterations()},st.prototype.dispose=function(){this.accumulatedGrads!=null&&tn(this.accumulatedGrads.map(function(nn){return nn.variable}))},st.prototype.getWeights=function(){return n$1(this,void 0,void 0,function(){return r(this,function(nn){switch(nn.label){case 0:return[4,this.saveIterations()];case 1:return[2,[nn.sent()].concat(this.accumulatedGrads.map(function(rn){return{name:rn.originalName,tensor:rn.variable}}))]}})})},st.prototype.setWeights=function(nn){return n$1(this,void 0,void 0,function(){return r(this,function(rn){switch(rn.label){case 0:return[4,this.extractIterations(nn)];case 1:return nn=rn.sent(),this.accumulatedGrads=nn.map(function(on){return{originalName:on.name,variable:on.tensor.variable(!1)}}),[2]}})})},st.prototype.getConfig=function(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}},st.fromConfig=function(nn,rn){return new nn(rn.learningRate,rn.initialAccumulatorValue)},st.className="Adagrad",st}(xd);cd(wd);var Cd=function(Mt){function st(nn,rn,on,an){an===void 0&&(an=null);var sn=Mt.call(this)||this;return sn.learningRate=nn,sn.beta1=rn,sn.beta2=on,sn.epsilon=an,sn.accumulatedFirstMoment=[],sn.accumulatedSecondMoment=[],Ze(function(){sn.accBeta1=On(rn).variable(),sn.accBeta2=On(on).variable()}),an==null&&(sn.epsilon=Lt.backend.epsilon()),sn}return e$1(st,Mt),st.prototype.applyGradients=function(nn){var rn=this,on=Array.isArray(nn)?nn.map(function(an){return an.name}):Object.keys(nn);Ze(function(){var an=Cc(1,rn.accBeta1),sn=Cc(1,rn.accBeta2);on.forEach(function(un,Xr){var to=Lt.registeredVariables[un];rn.accumulatedFirstMoment[Xr]==null&&(rn.accumulatedFirstMoment[Xr]={originalName:un+"/m",variable:Ze(function(){return Xn(to).variable(!1)})}),rn.accumulatedSecondMoment[Xr]==null&&(rn.accumulatedSecondMoment[Xr]={originalName:un+"/v",variable:Ze(function(){return Xn(to).variable(!1)})});var uo=Array.isArray(nn)?nn[Xr].tensor:nn[un];if(uo!=null){var hn=rn.accumulatedFirstMoment[Xr].variable,fn=rn.accumulatedSecondMoment[Xr].variable,co=hn.mul(rn.beta1).add(uo.mul(1-rn.beta1)),lo=fn.mul(rn.beta2).add(uo.square().mul(1-rn.beta2)),fo=co.div(an),ho=lo.div(sn);hn.assign(co),fn.assign(lo);var mo=fo.div(ho.sqrt().add(rn.epsilon)).mul(-rn.learningRate).add(to);to.assign(mo)}}),rn.accBeta1.assign(rn.accBeta1.mul(rn.beta1)),rn.accBeta2.assign(rn.accBeta2.mul(rn.beta2))}),this.incrementIterations()},st.prototype.dispose=function(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&tn(this.accumulatedFirstMoment.map(function(nn){return nn.variable})),this.accumulatedSecondMoment!=null&&tn(this.accumulatedSecondMoment.map(function(nn){return nn.variable}))},st.prototype.getWeights=function(){return n$1(this,void 0,void 0,function(){var nn;return r(this,function(rn){switch(rn.label){case 0:return nn=this.accumulatedFirstMoment.concat(this.accumulatedSecondMoment),[4,this.saveIterations()];case 1:return[2,[rn.sent()].concat(nn.map(function(on){return{name:on.originalName,tensor:on.variable}}))]}})})},st.prototype.setWeights=function(nn){return n$1(this,void 0,void 0,function(){var rn,on=this;return r(this,function(an){switch(an.label){case 0:return[4,this.extractIterations(nn)];case 1:return nn=an.sent(),Ze(function(){on.accBeta1.assign(xc(on.beta1,on.iterations_+1)),on.accBeta2.assign(xc(on.beta2,on.iterations_+1))}),rn=nn.length/2,this.accumulatedFirstMoment=nn.slice(0,rn).map(function(sn){return{originalName:sn.name,variable:sn.tensor.variable(!1)}}),this.accumulatedSecondMoment=nn.slice(rn,2*rn).map(function(sn){return{originalName:sn.name,variable:sn.tensor.variable(!1)}}),[2]}})})},st.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}},st.fromConfig=function(nn,rn){return new nn(rn.learningRate,rn.beta1,rn.beta2,rn.epsilon)},st.className="Adam",st}(xd);cd(Cd);var Ed=function(Mt){function st(nn,rn,on,an,sn){an===void 0&&(an=null),sn===void 0&&(sn=0);var un=Mt.call(this)||this;return un.learningRate=nn,un.beta1=rn,un.beta2=on,un.epsilon=an,un.decay=sn,un.accumulatedFirstMoment=[],un.accumulatedWeightedInfNorm=[],Ze(function(){un.iteration=On(0).variable(),un.accBeta1=On(rn).variable()}),an==null&&(un.epsilon=Lt.backend.epsilon()),un}return e$1(st,Mt),st.prototype.applyGradients=function(nn){var rn=this,on=Array.isArray(nn)?nn.map(function(an){return an.name}):Object.keys(nn);Ze(function(){var an=Cc(1,rn.accBeta1),sn=sc(-rn.learningRate,rn.iteration.mul(rn.decay).add(1));on.forEach(function(un,Xr){var to=Lt.registeredVariables[un];rn.accumulatedFirstMoment[Xr]==null&&(rn.accumulatedFirstMoment[Xr]={originalName:un+"/m",variable:Xn(to).variable(!1)}),rn.accumulatedWeightedInfNorm[Xr]==null&&(rn.accumulatedWeightedInfNorm[Xr]={originalName:un+"/v",variable:Xn(to).variable(!1)});var uo=Array.isArray(nn)?nn[Xr].tensor:nn[un];if(uo!=null){var hn=rn.accumulatedFirstMoment[Xr].variable,fn=rn.accumulatedWeightedInfNorm[Xr].variable,co=hn.mul(rn.beta1).add(uo.mul(1-rn.beta1)),lo=fn.mul(rn.beta2),fo=uo.abs(),ho=lo.maximum(fo);hn.assign(co),fn.assign(ho);var mo=sn.div(an).mul(co.div(ho.add(rn.epsilon))).add(to);to.assign(mo)}}),rn.iteration.assign(rn.iteration.add(1)),rn.accBeta1.assign(rn.accBeta1.mul(rn.beta1))}),this.incrementIterations()},st.prototype.dispose=function(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&tn(this.accumulatedFirstMoment.map(function(nn){return nn.variable})),this.accumulatedWeightedInfNorm!=null&&tn(this.accumulatedWeightedInfNorm.map(function(nn){return nn.variable}))},st.prototype.getWeights=function(){return n$1(this,void 0,void 0,function(){return r(this,function(nn){throw new Error("getWeights() is not implemented for Adamax yet.")})})},st.prototype.setWeights=function(nn){return n$1(this,void 0,void 0,function(){return r(this,function(rn){throw new Error("setWeights() is not implemented for Adamax yet.")})})},st.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}},st.fromConfig=function(nn,rn){return new nn(rn.learningRate,rn.beta1,rn.beta2,rn.epsilon,rn.decay)},st.className="Adamax",st}(xd);cd(Ed);var Rd=function(Mt){function st(nn){var rn=Mt.call(this)||this;return rn.learningRate=nn,rn.setLearningRate(nn),rn}return e$1(st,Mt),st.prototype.applyGradients=function(nn){var rn=this;(Array.isArray(nn)?nn.map(function(on){return on.name}):Object.keys(nn)).forEach(function(on,an){var sn=Array.isArray(nn)?nn[an].tensor:nn[on];if(sn!=null){var un=Lt.registeredVariables[on];Ze(function(){var Xr=rn.c.mul(sn).add(un);un.assign(Xr)})}}),this.incrementIterations()},st.prototype.setLearningRate=function(nn){this.learningRate=nn,this.c!=null&&this.c.dispose(),this.c=en(On(-nn))},st.prototype.dispose=function(){this.c.dispose()},st.prototype.getWeights=function(){return n$1(this,void 0,void 0,function(){return r(this,function(nn){switch(nn.label){case 0:return[4,this.saveIterations()];case 1:return[2,[nn.sent()]]}})})},st.prototype.setWeights=function(nn){return n$1(this,void 0,void 0,function(){return r(this,function(rn){switch(rn.label){case 0:return[4,this.extractIterations(nn)];case 1:if((nn=rn.sent()).length!==0)throw new Error("SGD optimizer does not have settable weights.");return[2]}})})},st.prototype.getConfig=function(){return{learningRate:this.learningRate}},st.fromConfig=function(nn,rn){return new nn(rn.learningRate)},st.className="SGD",st}(xd);cd(Rd);var Id=function(Mt){function st(nn,rn,on){on===void 0&&(on=!1);var an=Mt.call(this,nn)||this;return an.learningRate=nn,an.momentum=rn,an.useNesterov=on,an.accumulations=[],an.m=On(an.momentum),an}return e$1(st,Mt),st.prototype.applyGradients=function(nn){var rn=this;(Array.isArray(nn)?nn.map(function(on){return on.name}):Object.keys(nn)).forEach(function(on,an){var sn=Lt.registeredVariables[on];rn.accumulations[an]==null&&(rn.accumulations[an]={originalName:on+"/momentum",variable:Ze(function(){return Xn(sn).variable(!1)})});var un=rn.accumulations[an].variable,Xr=Array.isArray(nn)?nn[an].tensor:nn[on];Xr!=null&&Ze(function(){var to,uo=rn.m.mul(un).add(Xr);to=rn.useNesterov?rn.c.mul(Xr.add(uo.mul(rn.m))).add(sn):rn.c.mul(uo).add(sn),un.assign(uo),sn.assign(to)})}),this.incrementIterations()},st.prototype.dispose=function(){this.m.dispose(),this.accumulations!=null&&tn(this.accumulations.map(function(nn){return nn.variable}))},st.prototype.setMomentum=function(nn){this.momentum=nn},st.prototype.getWeights=function(){return n$1(this,void 0,void 0,function(){return r(this,function(nn){switch(nn.label){case 0:return[4,this.saveIterations()];case 1:return[2,[nn.sent()].concat(this.accumulations.map(function(rn){return{name:rn.originalName,tensor:rn.variable}}))]}})})},st.prototype.setWeights=function(nn){return n$1(this,void 0,void 0,function(){return r(this,function(rn){switch(rn.label){case 0:return[4,this.extractIterations(nn)];case 1:return nn=rn.sent(),this.accumulations=nn.map(function(on){return{originalName:on.name,variable:on.tensor.variable(!1)}}),[2]}})})},st.prototype.getConfig=function(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}},st.fromConfig=function(nn,rn){return new nn(rn.learningRate,rn.momentum,rn.useNesterov)},st.className="Momentum",st}(Rd);cd(Id);var kd=function(Mt){function st(nn,rn,on,an,sn){rn===void 0&&(rn=.9),on===void 0&&(on=0),an===void 0&&(an=null),sn===void 0&&(sn=!1);var un=Mt.call(this)||this;if(un.learningRate=nn,un.decay=rn,un.momentum=on,un.epsilon=an,un.accumulatedMeanSquares=[],un.accumulatedMoments=[],un.accumulatedMeanGrads=[],un.centered=sn,an==null&&(un.epsilon=Lt.backend.epsilon()),nn==null)throw new Error("learningRate for RMSPropOptimizer must be defined.");return un}return e$1(st,Mt),st.prototype.applyGradients=function(nn){var rn=this;(Array.isArray(nn)?nn.map(function(on){return on.name}):Object.keys(nn)).forEach(function(on,an){var sn=Lt.registeredVariables[on];rn.accumulatedMeanSquares[an]==null&&(rn.accumulatedMeanSquares[an]={originalName:on+"/rms",variable:Ze(function(){return Xn(sn).variable(!1)})}),rn.accumulatedMoments[an]==null&&(rn.accumulatedMoments[an]={originalName:on+"/momentum",variable:Ze(function(){return Xn(sn).variable(!1)})}),rn.accumulatedMeanGrads[an]==null&&rn.centered&&(rn.accumulatedMeanGrads[an]={originalName:on+"/mg",variable:Ze(function(){return Xn(sn).variable(!1)})});var un=Array.isArray(nn)?nn[an].tensor:nn[on];if(un!=null){var Xr=rn.accumulatedMeanSquares[an].variable,to=rn.accumulatedMoments[an].variable;Ze(function(){var uo=Xr.mul(rn.decay).add(un.square().mul(1-rn.decay));if(rn.centered){var hn=rn.accumulatedMeanGrads[an].variable,fn=hn.mul(rn.decay).add(un.mul(1-rn.decay)),co=to.mul(rn.momentum).add(un.mul(rn.learningRate).div(uo.sub(fn.square().add(rn.epsilon)).sqrt()));Xr.assign(uo),hn.assign(fn),to.assign(co);var lo=sn.sub(co);sn.assign(lo)}else{var fo=Xr.mul(rn.decay).add(un.square().mul(1-rn.decay));co=to.mul(rn.momentum).add(un.mul(rn.learningRate).div(fo.add(rn.epsilon).sqrt())),Xr.assign(fo),to.assign(co),lo=sn.sub(co),sn.assign(lo)}})}}),this.incrementIterations()},st.prototype.dispose=function(){this.accumulatedMeanSquares!=null&&tn(this.accumulatedMeanSquares.map(function(nn){return nn.variable})),this.accumulatedMeanGrads!=null&&this.centered&&tn(this.accumulatedMeanGrads.map(function(nn){return nn.variable})),this.accumulatedMoments!=null&&tn(this.accumulatedMoments.map(function(nn){return nn.variable}))},st.prototype.getWeights=function(){return n$1(this,void 0,void 0,function(){var nn;return r(this,function(rn){switch(rn.label){case 0:return nn=this.accumulatedMeanSquares.concat(this.accumulatedMoments),this.centered&&nn.push.apply(nn,this.accumulatedMeanGrads),[4,this.saveIterations()];case 1:return[2,[rn.sent()].concat(nn.map(function(on){return{name:on.originalName,tensor:on.variable}}))]}})})},st.prototype.setWeights=function(nn){return n$1(this,void 0,void 0,function(){var rn;return r(this,function(on){switch(on.label){case 0:return[4,this.extractIterations(nn)];case 1:return nn=on.sent(),rn=this.centered?nn.length/3:nn.length/2,this.accumulatedMeanSquares=nn.slice(0,rn).map(function(an){return{originalName:an.name,variable:an.tensor.variable(!1)}}),this.accumulatedMoments=nn.slice(rn,2*rn).map(function(an){return{originalName:an.name,variable:an.tensor.variable(!1)}}),this.centered&&(this.accumulatedMeanGrads=nn.slice(2*rn,3*rn).map(function(an){return{originalName:an.name,variable:an.tensor.variable(!1)}})),[2]}})})},st.prototype.getConfig=function(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}},st.fromConfig=function(nn,rn){return new nn(rn.learningRate,rn.decay,rn.momentum,rn.epsilon,rn.centered)},st.className="RMSProp",st}(xd);cd(kd);typeof requestAnimationFrame<"u"||typeof setImmediate<"u"&&setImmediate;wt.prototype.squaredDifference=function(Mt){return nu(this,Mt)},xt=Gh;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var extendStatics=function(Mt,st){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(nn,rn){nn.__proto__=rn}||function(nn,rn){for(var on in rn)rn.hasOwnProperty(on)&&(nn[on]=rn[on])},extendStatics(Mt,st)};function __extends(Mt,st){extendStatics(Mt,st);function nn(){this.constructor=Mt}Mt.prototype=st===null?Object.create(st):(nn.prototype=st.prototype,new nn)}var __assign$1=function(){return __assign$1=Object.assign||function(st){for(var nn,rn=1,on=arguments.length;rn<on;rn++){nn=arguments[rn];for(var an in nn)Object.prototype.hasOwnProperty.call(nn,an)&&(st[an]=nn[an])}return st},__assign$1.apply(this,arguments)};function __awaiter(Mt,st,nn,rn){function on(an){return an instanceof nn?an:new nn(function(sn){sn(an)})}return new(nn||(nn=Promise))(function(an,sn){function un(uo){try{to(rn.next(uo))}catch(hn){sn(hn)}}function Xr(uo){try{to(rn.throw(uo))}catch(hn){sn(hn)}}function to(uo){uo.done?an(uo.value):on(uo.value).then(un,Xr)}to((rn=rn.apply(Mt,[])).next())})}function __generator(Mt,st){var nn={label:0,sent:function(){if(an[0]&1)throw an[1];return an[1]},trys:[],ops:[]},rn,on,an,sn;return sn={next:un(0),throw:un(1),return:un(2)},typeof Symbol=="function"&&(sn[Symbol.iterator]=function(){return this}),sn;function un(to){return function(uo){return Xr([to,uo])}}function Xr(to){if(rn)throw new TypeError("Generator is already executing.");for(;nn;)try{if(rn=1,on&&(an=to[0]&2?on.return:to[0]?on.throw||((an=on.return)&&an.call(on),0):on.next)&&!(an=an.call(on,to[1])).done)return an;switch(on=0,an&&(to=[to[0]&2,an.value]),to[0]){case 0:case 1:an=to;break;case 4:return nn.label++,{value:to[1],done:!1};case 5:nn.label++,on=to[1],to=[0];continue;case 7:to=nn.ops.pop(),nn.trys.pop();continue;default:if(an=nn.trys,!(an=an.length>0&&an[an.length-1])&&(to[0]===6||to[0]===2)){nn=0;continue}if(to[0]===3&&(!an||to[1]>an[0]&&to[1]<an[3])){nn.label=to[1];break}if(to[0]===6&&nn.label<an[1]){nn.label=an[1],an=to;break}if(an&&nn.label<an[2]){nn.label=an[2],nn.ops.push(to);break}an[2]&&nn.ops.pop(),nn.trys.pop();continue}to=st.call(Mt,nn)}catch(uo){to=[6,uo],on=0}finally{rn=an=0}if(to[0]&5)throw to[1];return{value:to[0]?to[1]:void 0,done:!0}}}function __spreadArrays(){for(var Mt=0,st=0,nn=arguments.length;st<nn;st++)Mt+=arguments[st].length;for(var rn=Array(Mt),on=0,st=0;st<nn;st++)for(var an=arguments[st],sn=0,un=an.length;sn<un;sn++,on++)rn[on]=an[sn];return rn}var Dimensions=function(){function Mt(st,nn){if(!isValidNumber(st)||!isValidNumber(nn))throw new Error("Dimensions.constructor - expected width and height to be valid numbers, instead have "+JSON.stringify({width:st,height:nn}));this._width=st,this._height=nn}return Object.defineProperty(Mt.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(Mt.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),Mt.prototype.reverse=function(){return new Mt(1/this.width,1/this.height)},Mt}();function isTensor(Mt,st){return Mt instanceof wt&&Mt.shape.length===st}function isTensor2D(Mt){return isTensor(Mt,2)}function isTensor3D(Mt){return isTensor(Mt,3)}function isTensor4D(Mt){return isTensor(Mt,4)}function isFloat(Mt){return Mt%1!==0}function isEven(Mt){return Mt%2===0}function round$3(Mt,st){st===void 0&&(st=2);var nn=Math.pow(10,st);return Math.floor(Mt*nn)/nn}function isDimensions(Mt){return Mt&&Mt.width&&Mt.height}function computeReshapedDimensions(Mt,st){var nn=Mt.width,rn=Mt.height,on=st/Math.max(rn,nn);return new Dimensions(Math.round(nn*on),Math.round(rn*on))}function getCenterPoint(Mt){return Mt.reduce(function(st,nn){return st.add(nn)},new Point(0,0)).div(new Point(Mt.length,Mt.length))}function range$5(Mt,st,nn){return Array(Mt).fill(0).map(function(rn,on){return st+on*nn})}function isValidNumber(Mt){return!!Mt&&Mt!==1/0&&Mt!==-1/0&&!isNaN(Mt)||Mt===0}function isValidProbablitiy(Mt){return isValidNumber(Mt)&&0<=Mt&&Mt<=1}var Point=function(){function Mt(st,nn){this._x=st,this._y=nn}return Object.defineProperty(Mt.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(Mt.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),Mt.prototype.add=function(st){return new Mt(this.x+st.x,this.y+st.y)},Mt.prototype.sub=function(st){return new Mt(this.x-st.x,this.y-st.y)},Mt.prototype.mul=function(st){return new Mt(this.x*st.x,this.y*st.y)},Mt.prototype.div=function(st){return new Mt(this.x/st.x,this.y/st.y)},Mt.prototype.abs=function(){return new Mt(Math.abs(this.x),Math.abs(this.y))},Mt.prototype.magnitude=function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))},Mt.prototype.floor=function(){return new Mt(Math.floor(this.x),Math.floor(this.y))},Mt}(),Box=function(){function Mt(st,nn){nn===void 0&&(nn=!0);var rn=st||{},on=[rn.left,rn.top,rn.right,rn.bottom].every(isValidNumber),an=[rn.x,rn.y,rn.width,rn.height].every(isValidNumber);if(!an&&!on)throw new Error("Box.constructor - expected box to be IBoundingBox | IRect, instead have "+JSON.stringify(rn));var sn=an?[rn.x,rn.y,rn.width,rn.height]:[rn.left,rn.top,rn.right-rn.left,rn.bottom-rn.top],un=sn[0],Xr=sn[1],to=sn[2],uo=sn[3];Mt.assertIsValidBox({x:un,y:Xr,width:to,height:uo},"Box.constructor",nn),this._x=un,this._y=Xr,this._width=to,this._height=uo}return Mt.isRect=function(st){return!!st&&[st.x,st.y,st.width,st.height].every(isValidNumber)},Mt.assertIsValidBox=function(st,nn,rn){if(rn===void 0&&(rn=!1),!Mt.isRect(st))throw new Error(nn+" - invalid box: "+JSON.stringify(st)+", expected object with properties x, y, width, height");if(!rn&&(st.width<0||st.height<0))throw new Error(nn+" - width ("+st.width+") and height ("+st.height+") must be positive numbers")},Object.defineProperty(Mt.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(Mt.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),Object.defineProperty(Mt.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(Mt.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),Object.defineProperty(Mt.prototype,"left",{get:function(){return this.x},enumerable:!0,configurable:!0}),Object.defineProperty(Mt.prototype,"top",{get:function(){return this.y},enumerable:!0,configurable:!0}),Object.defineProperty(Mt.prototype,"right",{get:function(){return this.x+this.width},enumerable:!0,configurable:!0}),Object.defineProperty(Mt.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!0,configurable:!0}),Object.defineProperty(Mt.prototype,"area",{get:function(){return this.width*this.height},enumerable:!0,configurable:!0}),Object.defineProperty(Mt.prototype,"topLeft",{get:function(){return new Point(this.left,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(Mt.prototype,"topRight",{get:function(){return new Point(this.right,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(Mt.prototype,"bottomLeft",{get:function(){return new Point(this.left,this.bottom)},enumerable:!0,configurable:!0}),Object.defineProperty(Mt.prototype,"bottomRight",{get:function(){return new Point(this.right,this.bottom)},enumerable:!0,configurable:!0}),Mt.prototype.round=function(){var st=[this.x,this.y,this.width,this.height].map(function(sn){return Math.round(sn)}),nn=st[0],rn=st[1],on=st[2],an=st[3];return new Mt({x:nn,y:rn,width:on,height:an})},Mt.prototype.floor=function(){var st=[this.x,this.y,this.width,this.height].map(function(sn){return Math.floor(sn)}),nn=st[0],rn=st[1],on=st[2],an=st[3];return new Mt({x:nn,y:rn,width:on,height:an})},Mt.prototype.toSquare=function(){var st=this,nn=st.x,rn=st.y,on=st.width,an=st.height,sn=Math.abs(on-an);return on<an&&(nn-=sn/2,on+=sn),an<on&&(rn-=sn/2,an+=sn),new Mt({x:nn,y:rn,width:on,height:an})},Mt.prototype.rescale=function(st){var nn=isDimensions(st)?st.width:st,rn=isDimensions(st)?st.height:st;return new Mt({x:this.x*nn,y:this.y*rn,width:this.width*nn,height:this.height*rn})},Mt.prototype.pad=function(st,nn){var rn=[this.x-st/2,this.y-nn/2,this.width+st,this.height+nn],on=rn[0],an=rn[1],sn=rn[2],un=rn[3];return new Mt({x:on,y:an,width:sn,height:un})},Mt.prototype.clipAtImageBorders=function(st,nn){var rn=this,on=rn.x,an=rn.y,sn=rn.right,un=rn.bottom,Xr=Math.max(on,0),to=Math.max(an,0),uo=sn-Xr,hn=un-to,fn=Math.min(uo,st-Xr),co=Math.min(hn,nn-to);return new Mt({x:Xr,y:to,width:fn,height:co}).floor()},Mt.prototype.shift=function(st,nn){var rn=this,on=rn.width,an=rn.height,sn=this.x+st,un=this.y+nn;return new Mt({x:sn,y:un,width:on,height:an})},Mt.prototype.padAtBorders=function(st,nn){var rn=this.width+1,on=this.height+1,an=1,sn=1,un=rn,Xr=on,to=this.left,uo=this.top,hn=this.right,fn=this.bottom;return hn>nn&&(un=-hn+nn+rn,hn=nn),fn>st&&(Xr=-fn+st+on,fn=st),to<1&&(Xr=2-to,to=1),uo<1&&(Xr=2-uo,uo=1),{dy:sn,edy:Xr,dx:an,edx:un,y:uo,ey:fn,x:to,ex:hn,w:rn,h:on}},Mt.prototype.calibrate=function(st){return new Mt({left:this.left+st.left*this.width,top:this.top+st.top*this.height,right:this.right+st.right*this.width,bottom:this.bottom+st.bottom*this.height}).toSquare().round()},Mt}(),BoundingBox=function(Mt){__extends(st,Mt);function st(nn,rn,on,an,sn){return sn===void 0&&(sn=!1),Mt.call(this,{left:nn,top:rn,right:on,bottom:an},sn)||this}return st}(Box),ObjectDetection=function(){function Mt(st,nn,rn,on,an){this._imageDims=new Dimensions(an.width,an.height),this._score=st,this._classScore=nn,this._className=rn,this._box=new Box(on).rescale(this._imageDims)}return Object.defineProperty(Mt.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(Mt.prototype,"classScore",{get:function(){return this._classScore},enumerable:!0,configurable:!0}),Object.defineProperty(Mt.prototype,"className",{get:function(){return this._className},enumerable:!0,configurable:!0}),Object.defineProperty(Mt.prototype,"box",{get:function(){return this._box},enumerable:!0,configurable:!0}),Object.defineProperty(Mt.prototype,"imageDims",{get:function(){return this._imageDims},enumerable:!0,configurable:!0}),Object.defineProperty(Mt.prototype,"imageWidth",{get:function(){return this.imageDims.width},enumerable:!0,configurable:!0}),Object.defineProperty(Mt.prototype,"imageHeight",{get:function(){return this.imageDims.height},enumerable:!0,configurable:!0}),Object.defineProperty(Mt.prototype,"relativeBox",{get:function(){return new Box(this._box).rescale(this.imageDims.reverse())},enumerable:!0,configurable:!0}),Mt.prototype.forSize=function(st,nn){return new Mt(this.score,this.classScore,this.className,this.relativeBox,{width:st,height:nn})},Mt}(),FaceDetection=function(Mt){__extends(st,Mt);function st(nn,rn,on){return Mt.call(this,nn,nn,"",rn,on)||this}return st.prototype.forSize=function(nn,rn){var on=Mt.prototype.forSize.call(this,nn,rn),an=on.score,sn=on.relativeBox,un=on.imageDims;return new st(an,sn,un)},st}(ObjectDetection);function iou(Mt,st,nn){nn===void 0&&(nn=!0);var rn=Math.max(0,Math.min(Mt.right,st.right)-Math.max(Mt.left,st.left)),on=Math.max(0,Math.min(Mt.bottom,st.bottom)-Math.max(Mt.top,st.top)),an=rn*on;return nn?an/(Mt.area+st.area-an):an/Math.min(Mt.area,st.area)}function minBbox(Mt){var st=Mt.map(function(un){return un.x}),nn=Mt.map(function(un){return un.y}),rn=st.reduce(function(un,Xr){return Xr<un?Xr:un},1/0),on=nn.reduce(function(un,Xr){return Xr<un?Xr:un},1/0),an=st.reduce(function(un,Xr){return un<Xr?Xr:un},0),sn=nn.reduce(function(un,Xr){return un<Xr?Xr:un},0);return new BoundingBox(rn,on,an,sn)}function nonMaxSuppression$1(Mt,st,nn,rn){rn===void 0&&(rn=!0);for(var on=st.map(function(un,Xr){return{score:un,boxIndex:Xr}}).sort(function(un,Xr){return un.score-Xr.score}).map(function(un){return un.boxIndex}),an=[],sn=function(){var un=on.pop();an.push(un);for(var Xr=on,to=[],uo=0;uo<Xr.length;uo++){var hn=Xr[uo],fn=Mt[un],co=Mt[hn];to.push(iou(fn,co,rn))}on=on.filter(function(lo,fo){return to[fo]<=nn})};on.length>0;)sn();return an}function normalize$2(Mt,st){return Ze(function(){var nn=st[0],rn=st[1],on=st[2],an=Hn(__spreadArrays(Mt.shape.slice(0,3),[1]),nn),sn=Hn(__spreadArrays(Mt.shape.slice(0,3),[1]),rn),un=Hn(__spreadArrays(Mt.shape.slice(0,3),[1]),on),Xr=Yn([an,sn,un],3);return Cc(Mt,Xr)})}function padToSquare(Mt,st){return st===void 0&&(st=!1),Ze(function(){var nn=Mt.shape.slice(1),rn=nn[0],on=nn[1];if(rn===on)return Mt;var an=Math.abs(rn-on),sn=Math.round(an*(st?.5:1)),un=rn>on?2:1,Xr=function(co){var lo=Mt.shape.slice();return lo[un]=co,Hn(lo,0)},to=Xr(sn),uo=an-to.shape[un],hn=st&&uo?Xr(uo):null,fn=[hn,Mt,to].filter(function(co){return!!co}).map(function(co){return co.toFloat()});return Yn(fn,un)})}function sigmoid(Mt){return 1/(1+Math.exp(-Mt))}var Rect=function(Mt){__extends(st,Mt);function st(nn,rn,on,an,sn){return sn===void 0&&(sn=!1),Mt.call(this,{x:nn,y:rn,width:on,height:an},sn)||this}return st}(Box),relX=.5,relY=.43,relScale=.45,FaceLandmarks=function(){function Mt(st,nn,rn){rn===void 0&&(rn=new Point(0,0));var on=nn.width,an=nn.height;this._imgDims=new Dimensions(on,an),this._shift=rn,this._positions=st.map(function(sn){return sn.mul(new Point(on,an)).add(rn)})}return Object.defineProperty(Mt.prototype,"shift",{get:function(){return new Point(this._shift.x,this._shift.y)},enumerable:!0,configurable:!0}),Object.defineProperty(Mt.prototype,"imageWidth",{get:function(){return this._imgDims.width},enumerable:!0,configurable:!0}),Object.defineProperty(Mt.prototype,"imageHeight",{get:function(){return this._imgDims.height},enumerable:!0,configurable:!0}),Object.defineProperty(Mt.prototype,"positions",{get:function(){return this._positions},enumerable:!0,configurable:!0}),Object.defineProperty(Mt.prototype,"relativePositions",{get:function(){var st=this;return this._positions.map(function(nn){return nn.sub(st._shift).div(new Point(st.imageWidth,st.imageHeight))})},enumerable:!0,configurable:!0}),Mt.prototype.forSize=function(st,nn){return new this.constructor(this.relativePositions,{width:st,height:nn})},Mt.prototype.shiftBy=function(st,nn){return new this.constructor(this.relativePositions,this._imgDims,new Point(st,nn))},Mt.prototype.shiftByPoint=function(st){return this.shiftBy(st.x,st.y)},Mt.prototype.align=function(st,nn){if(nn===void 0&&(nn={}),st){var rn=st instanceof FaceDetection?st.box.floor():new Box(st);return this.shiftBy(rn.x,rn.y).align(null,nn)}var on=Object.assign({},{useDlibAlignment:!1,minBoxPadding:.2},nn),an=on.useDlibAlignment,sn=on.minBoxPadding;return an?this.alignDlib():this.alignMinBbox(sn)},Mt.prototype.alignDlib=function(){var st=this.getRefPointsForAlignment(),nn=st[0],rn=st[1],on=st[2],an=function(hn){return on.sub(hn).magnitude()},sn=(an(nn)+an(rn))/2,un=Math.floor(sn/relScale),Xr=getCenterPoint(st),to=Math.floor(Math.max(0,Xr.x-relX*un)),uo=Math.floor(Math.max(0,Xr.y-relY*un));return new Rect(to,uo,Math.min(un,this.imageWidth+to),Math.min(un,this.imageHeight+uo))},Mt.prototype.alignMinBbox=function(st){var nn=minBbox(this.positions);return nn.pad(nn.width*st,nn.height*st)},Mt.prototype.getRefPointsForAlignment=function(){throw new Error("getRefPointsForAlignment not implemented by base class")},Mt}(),FaceLandmarks5=function(Mt){__extends(st,Mt);function st(){return Mt!==null&&Mt.apply(this,arguments)||this}return st.prototype.getRefPointsForAlignment=function(){var nn=this.positions;return[nn[0],nn[1],getCenterPoint([nn[3],nn[4]])]},st}(FaceLandmarks),FaceLandmarks68=function(Mt){__extends(st,Mt);function st(){return Mt!==null&&Mt.apply(this,arguments)||this}return st.prototype.getJawOutline=function(){return this.positions.slice(0,17)},st.prototype.getLeftEyeBrow=function(){return this.positions.slice(17,22)},st.prototype.getRightEyeBrow=function(){return this.positions.slice(22,27)},st.prototype.getNose=function(){return this.positions.slice(27,36)},st.prototype.getLeftEye=function(){return this.positions.slice(36,42)},st.prototype.getRightEye=function(){return this.positions.slice(42,48)},st.prototype.getMouth=function(){return this.positions.slice(48,68)},st.prototype.getRefPointsForAlignment=function(){return[this.getLeftEye(),this.getRightEye(),this.getMouth()].map(getCenterPoint)},st}(FaceLandmarks),FaceMatch=function(){function Mt(st,nn){this._label=st,this._distance=nn}return Object.defineProperty(Mt.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(Mt.prototype,"distance",{get:function(){return this._distance},enumerable:!0,configurable:!0}),Mt.prototype.toString=function(st){return st===void 0&&(st=!0),""+this.label+(st?" ("+round$3(this.distance)+")":"")},Mt}(),LabeledBox=function(Mt){__extends(st,Mt);function st(nn,rn){var on=Mt.call(this,nn)||this;return on._label=rn,on}return st.assertIsValidLabeledBox=function(nn,rn){if(Box.assertIsValidBox(nn,rn),!isValidNumber(nn.label))throw new Error(rn+" - expected property label ("+nn.label+") to be a number")},Object.defineProperty(st.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),st}(Box),LabeledFaceDescriptors=function(){function Mt(st,nn){if(typeof st!="string")throw new Error("LabeledFaceDescriptors - constructor expected label to be a string");if(!Array.isArray(nn)||nn.some(function(rn){return!(rn instanceof Float32Array)}))throw new Error("LabeledFaceDescriptors - constructor expected descriptors to be an array of Float32Array");this._label=st,this._descriptors=nn}return Object.defineProperty(Mt.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(Mt.prototype,"descriptors",{get:function(){return this._descriptors},enumerable:!0,configurable:!0}),Mt.prototype.toJSON=function(){return{label:this.label,descriptors:this.descriptors.map(function(st){return Array.from(st)})}},Mt.fromJSON=function(st){var nn=st.descriptors.map(function(rn){return new Float32Array(rn)});return new Mt(st.label,nn)},Mt}();(function(Mt){__extends(st,Mt);function st(nn,rn,on,an){var sn=Mt.call(this,nn,rn)||this;return sn._score=on,sn._classScore=an,sn}return st.assertIsValidPredictedBox=function(nn,rn){if(LabeledBox.assertIsValidLabeledBox(nn,rn),!isValidProbablitiy(nn.score)||!isValidProbablitiy(nn.classScore))throw new Error(rn+" - expected properties score ("+nn.score+") and ("+nn.classScore+") to be a number between [0, 1]")},Object.defineProperty(st.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(st.prototype,"classScore",{get:function(){return this._classScore},enumerable:!0,configurable:!0}),st})(LabeledBox);function isWithFaceDetection(Mt){return Mt.detection instanceof FaceDetection}function extendWithFaceDetection(Mt,st){var nn={detection:st};return Object.assign({},Mt,nn)}function createBrowserEnv(){var Mt=window.fetch||function(){throw new Error("fetch - missing fetch implementation for browser environment")},st=function(){throw new Error("readFile - filesystem not available for browser environment")};return{Canvas:HTMLCanvasElement,CanvasRenderingContext2D,Image:HTMLImageElement,ImageData,Video:HTMLVideoElement,createCanvasElement:function(){return document.createElement("canvas")},createImageElement:function(){return document.createElement("img")},fetch:Mt,readFile:st}}function createFileSystem(Mt){var st="";if(!Mt)try{Mt=require("fs")}catch(rn){st=rn.toString()}var nn=Mt?function(rn){return new Promise(function(on,an){Mt.readFile(rn,function(sn,un){return sn?an(sn):on(un)})})}:function(){throw new Error("readFile - failed to require fs in nodejs environment with error: "+st)};return{readFile:nn}}function createNodejsEnv(){var Mt=global.Canvas||global.HTMLCanvasElement,st=global.Image||global.HTMLImageElement,nn=function(){if(Mt)return new Mt;throw new Error("createCanvasElement - missing Canvas implementation for nodejs environment")},rn=function(){if(st)return new st;throw new Error("createImageElement - missing Image implementation for nodejs environment")},on=global.fetch||function(){throw new Error("fetch - missing fetch implementation for nodejs environment")},an=createFileSystem();return __assign$1({Canvas:Mt||function(){function sn(){}return sn}(),CanvasRenderingContext2D:global.CanvasRenderingContext2D||function(){function sn(){}return sn}(),Image:st||function(){function sn(){}return sn}(),ImageData:global.ImageData||function(){function sn(){}return sn}(),Video:global.HTMLVideoElement||function(){function sn(){}return sn}(),createCanvasElement:nn,createImageElement:rn,fetch:on},an)}function isBrowser(){return typeof window=="object"&&typeof document<"u"&&typeof HTMLImageElement<"u"&&typeof HTMLCanvasElement<"u"&&typeof HTMLVideoElement<"u"&&typeof ImageData<"u"&&typeof CanvasRenderingContext2D<"u"}function isNodejs(){return typeof global=="object"&&typeof require=="function"&&typeof module<"u"&&typeof process<"u"&&!!process.version}var environment;function getEnv(){if(!environment)throw new Error("getEnv - environment is not defined, check isNodejs() and isBrowser()");return environment}function setEnv(Mt){environment=Mt}function initialize(){isBrowser()&&setEnv(createBrowserEnv()),isNodejs()&&setEnv(createNodejsEnv())}function monkeyPatch(Mt){if(environment||initialize(),!environment)throw new Error("monkeyPatch - environment is not defined, check isNodejs() and isBrowser()");var st=Mt.Canvas,nn=st===void 0?environment.Canvas:st,rn=Mt.Image,on=rn===void 0?environment.Image:rn;environment.Canvas=nn,environment.Image=on,environment.createCanvasElement=Mt.createCanvasElement||function(){return new nn},environment.createImageElement=Mt.createImageElement||function(){return new on},environment.ImageData=Mt.ImageData||environment.ImageData,environment.Video=Mt.Video||environment.Video,environment.fetch=Mt.fetch||environment.fetch,environment.readFile=Mt.readFile||environment.readFile}var env$3={getEnv,setEnv,initialize,createBrowserEnv,createFileSystem,createNodejsEnv,monkeyPatch,isBrowser,isNodejs};initialize();function resolveInput(Mt){return!env$3.isNodejs()&&typeof Mt=="string"?document.getElementById(Mt):Mt}function getContext2dOrThrow(Mt){var st=env$3.getEnv(),nn=st.Canvas,rn=st.CanvasRenderingContext2D;if(Mt instanceof rn)return Mt;var on=resolveInput(Mt);if(!(on instanceof nn))throw new Error("resolveContext2d - expected canvas to be of instance of Canvas");var an=on.getContext("2d");if(!an)throw new Error("resolveContext2d - canvas 2d context is null");return an}var AnchorPosition;(function(Mt){Mt.TOP_LEFT="TOP_LEFT",Mt.TOP_RIGHT="TOP_RIGHT",Mt.BOTTOM_LEFT="BOTTOM_LEFT",Mt.BOTTOM_RIGHT="BOTTOM_RIGHT"})(AnchorPosition||(AnchorPosition={}));function isMediaLoaded(Mt){var st=env$3.getEnv(),nn=st.Image,rn=st.Video;return Mt instanceof nn&&Mt.complete||Mt instanceof rn&&Mt.readyState>=3}function awaitMediaLoaded(Mt){return new Promise(function(st,nn){if(Mt instanceof env$3.getEnv().Canvas||isMediaLoaded(Mt))return st();function rn(an){an.currentTarget&&(an.currentTarget.removeEventListener("load",rn),an.currentTarget.removeEventListener("error",on),st(an))}function on(an){an.currentTarget&&(an.currentTarget.removeEventListener("load",rn),an.currentTarget.removeEventListener("error",on),nn(an))}Mt.addEventListener("load",rn),Mt.addEventListener("error",on)})}function getMediaDimensions(Mt){var st=env$3.getEnv(),nn=st.Image,rn=st.Video;return Mt instanceof nn?new Dimensions(Mt.naturalWidth,Mt.naturalHeight):Mt instanceof rn?new Dimensions(Mt.videoWidth,Mt.videoHeight):new Dimensions(Mt.width,Mt.height)}function createCanvas(Mt){var st=Mt.width,nn=Mt.height,rn=env$3.getEnv().createCanvasElement,on=rn();return on.width=st,on.height=nn,on}function createCanvasFromMedia(Mt,st){var nn=env$3.getEnv().ImageData;if(!(Mt instanceof nn)&&!isMediaLoaded(Mt))throw new Error("createCanvasFromMedia - media has not finished loading yet");var rn=getMediaDimensions(Mt),on=rn.width,an=rn.height,sn=createCanvas({width:on,height:an});return Mt instanceof nn?getContext2dOrThrow(sn).putImageData(Mt,0,0):getContext2dOrThrow(sn).drawImage(Mt,0,0,on,an),sn}function imageTensorToCanvas(Mt,st){return __awaiter(this,void 0,void 0,function(){var nn,rn,on,an,sn,un;return __generator(this,function(Xr){switch(Xr.label){case 0:return nn=env$3.getEnv().createCanvasElement(),rn=Mt.shape.slice(isTensor4D(Mt)?1:0),on=rn[0],an=rn[1],sn=rn[2],un=Ze(function(){return Mt.as3D(on,an,sn).toInt()}),[4,id.toPixels(un,nn)];case 1:return Xr.sent(),un.dispose(),[2,nn]}})})}function isMediaElement(Mt){var st=env$3.getEnv(),nn=st.Image,rn=st.Canvas,on=st.Video;return Mt instanceof nn||Mt instanceof rn||Mt instanceof on}function imageToSquare(Mt,st,nn){nn===void 0&&(nn=!1);var rn=env$3.getEnv(),on=rn.Image,an=rn.Canvas;if(!(Mt instanceof on||Mt instanceof an))throw new Error("imageToSquare - expected arg0 to be HTMLImageElement | HTMLCanvasElement");var sn=getMediaDimensions(Mt),un=st/Math.max(sn.height,sn.width),Xr=un*sn.width,to=un*sn.height,uo=createCanvas({width:st,height:st}),hn=Mt instanceof an?Mt:createCanvasFromMedia(Mt),fn=Math.abs(Xr-to)/2,co=nn&&Xr<to?fn:0,lo=nn&&to<Xr?fn:0;return getContext2dOrThrow(uo).drawImage(hn,co,lo,Xr,to),uo}var NetInput=function(){function Mt(st,nn){var rn=this;if(nn===void 0&&(nn=!1),this._imageTensors=[],this._canvases=[],this._treatAsBatchInput=!1,this._inputDimensions=[],!Array.isArray(st))throw new Error("NetInput.constructor - expected inputs to be an Array of TResolvedNetInput or to be instanceof tf.Tensor4D, instead have "+st);this._treatAsBatchInput=nn,this._batchSize=st.length,st.forEach(function(on,an){if(isTensor3D(on)){rn._imageTensors[an]=on,rn._inputDimensions[an]=on.shape;return}if(isTensor4D(on)){var sn=on.shape[0];if(sn!==1)throw new Error("NetInput - tf.Tensor4D with batchSize "+sn+" passed, but not supported in input array");rn._imageTensors[an]=on,rn._inputDimensions[an]=on.shape.slice(1);return}var un=on instanceof env$3.getEnv().Canvas?on:createCanvasFromMedia(on);rn._canvases[an]=un,rn._inputDimensions[an]=[un.height,un.width,3]})}return Object.defineProperty(Mt.prototype,"imageTensors",{get:function(){return this._imageTensors},enumerable:!0,configurable:!0}),Object.defineProperty(Mt.prototype,"canvases",{get:function(){return this._canvases},enumerable:!0,configurable:!0}),Object.defineProperty(Mt.prototype,"isBatchInput",{get:function(){return this.batchSize>1||this._treatAsBatchInput},enumerable:!0,configurable:!0}),Object.defineProperty(Mt.prototype,"batchSize",{get:function(){return this._batchSize},enumerable:!0,configurable:!0}),Object.defineProperty(Mt.prototype,"inputDimensions",{get:function(){return this._inputDimensions},enumerable:!0,configurable:!0}),Object.defineProperty(Mt.prototype,"inputSize",{get:function(){return this._inputSize},enumerable:!0,configurable:!0}),Object.defineProperty(Mt.prototype,"reshapedInputDimensions",{get:function(){var st=this;return range$5(this.batchSize,0,1).map(function(nn,rn){return st.getReshapedInputDimensions(rn)})},enumerable:!0,configurable:!0}),Mt.prototype.getInput=function(st){return this.canvases[st]||this.imageTensors[st]},Mt.prototype.getInputDimensions=function(st){return this._inputDimensions[st]},Mt.prototype.getInputHeight=function(st){return this._inputDimensions[st][0]},Mt.prototype.getInputWidth=function(st){return this._inputDimensions[st][1]},Mt.prototype.getReshapedInputDimensions=function(st){if(typeof this.inputSize!="number")throw new Error("getReshapedInputDimensions - inputSize not set, toBatchTensor has not been called yet");var nn=this.getInputWidth(st),rn=this.getInputHeight(st);return computeReshapedDimensions({width:nn,height:rn},this.inputSize)},Mt.prototype.toBatchTensor=function(st,nn){var rn=this;return nn===void 0&&(nn=!0),this._inputSize=st,Ze(function(){var on=range$5(rn.batchSize,0,1).map(function(sn){var un=rn.getInput(sn);if(un instanceof wt){var Xr=isTensor4D(un)?un:un.expandDims();return Xr=padToSquare(Xr,nn),(Xr.shape[1]!==st||Xr.shape[2]!==st)&&(Xr=Oh.resizeBilinear(Xr,[st,st])),Xr.as3D(st,st,3)}if(un instanceof env$3.getEnv().Canvas)return id.fromPixels(imageToSquare(un,st,nn));throw new Error("toBatchTensor - at batchIdx "+sn+", expected input to be instanceof tf.Tensor or instanceof HTMLCanvasElement, instead have "+un)}),an=Pr(on.map(function(sn){return sn.toFloat()})).as4D(rn.batchSize,st,st,3);return an})},Mt}();function toNetInput(Mt){return __awaiter(this,void 0,void 0,function(){var st,nn,rn;return __generator(this,function(on){switch(on.label){case 0:if(Mt instanceof NetInput)return[2,Mt];if(st=Array.isArray(Mt)?Mt:[Mt],!st.length)throw new Error("toNetInput - empty array passed as input");return nn=function(an){return Array.isArray(Mt)?" at input index "+an+":":""},rn=st.map(resolveInput),rn.forEach(function(an,sn){if(!isMediaElement(an)&&!isTensor3D(an)&&!isTensor4D(an))throw typeof st[sn]=="string"?new Error("toNetInput -"+nn(sn)+" string passed, but could not resolve HTMLElement for element id "+st[sn]):new Error("toNetInput -"+nn(sn)+" expected media to be of type HTMLImageElement | HTMLVideoElement | HTMLCanvasElement | tf.Tensor3D, or to be an element id");if(isTensor4D(an)){var un=an.shape[0];if(un!==1)throw new Error("toNetInput -"+nn(sn)+" tf.Tensor4D with batchSize "+un+" passed, but not supported in input array")}}),[4,Promise.all(rn.map(function(an){return isMediaElement(an)&&awaitMediaLoaded(an)}))];case 1:return on.sent(),[2,new NetInput(rn,Array.isArray(Mt))]}})})}function extractFaces(Mt,st){return __awaiter(this,void 0,void 0,function(){var nn,rn,on,an,sn,un,Xr;return __generator(this,function(to){switch(to.label){case 0:return nn=env$3.getEnv().Canvas,rn=Mt,Mt instanceof nn?[3,5]:[4,toNetInput(Mt)];case 1:if(on=to.sent(),on.batchSize>1)throw new Error("extractFaces - batchSize > 1 not supported");return an=on.getInput(0),an instanceof nn?(sn=an,[3,4]):[3,2];case 2:return[4,imageTensorToCanvas(an)];case 3:sn=to.sent(),to.label=4;case 4:rn=sn,to.label=5;case 5:return un=getContext2dOrThrow(rn),Xr=st.map(function(uo){return uo instanceof FaceDetection?uo.forSize(rn.width,rn.height).box.floor():uo}).map(function(uo){return uo.clipAtImageBorders(rn.width,rn.height)}),[2,Xr.map(function(uo){var hn=uo.x,fn=uo.y,co=uo.width,lo=uo.height,fo=createCanvas({width:co,height:lo});return getContext2dOrThrow(fo).putImageData(un.getImageData(hn,fn,co,lo),0,0),fo})]}})})}function extractFaceTensors(Mt,st){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(nn){if(!isTensor3D(Mt)&&!isTensor4D(Mt))throw new Error("extractFaceTensors - expected image tensor to be 3D or 4D");if(isTensor4D(Mt)&&Mt.shape[0]>1)throw new Error("extractFaceTensors - batchSize > 1 not supported");return[2,Ze(function(){var rn=Mt.shape.slice(isTensor4D(Mt)?1:0),on=rn[0],an=rn[1],sn=rn[2],un=st.map(function(to){return to instanceof FaceDetection?to.forSize(an,on).box:to}).map(function(to){return to.clipAtImageBorders(an,on)}),Xr=un.map(function(to){var uo=to.x,hn=to.y,fn=to.width,co=to.height;return xl(Mt.as3D(on,an,sn),[hn,uo,0],[co,fn,sn])});return Xr})]})})}function fetchOrThrow(Mt,st){return __awaiter(this,void 0,void 0,function(){var nn,rn;return __generator(this,function(on){switch(on.label){case 0:return nn=env$3.getEnv().fetch,[4,nn(Mt,st)];case 1:if(rn=on.sent(),!(rn.status<400))throw new Error("failed to fetch: ("+rn.status+") "+rn.statusText+", from url: "+rn.url);return[2,rn]}})})}function fetchJson(Mt){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(st){switch(st.label){case 0:return[4,fetchOrThrow(Mt)];case 1:return[2,st.sent().json()]}})})}function getModelUris(Mt,st){var nn=st+"-weights_manifest.json";if(!Mt)return{modelBaseUri:"",manifestUri:nn};if(Mt==="/")return{modelBaseUri:"/",manifestUri:"/"+nn};var rn=Mt.startsWith("http://")?"http://":Mt.startsWith("https://")?"https://":"";Mt=Mt.replace(rn,"");var on=Mt.split("/").filter(function(un){return un}),an=Mt.endsWith(".json")?on[on.length-1]:nn,sn=rn+(Mt.endsWith(".json")?on.slice(0,on.length-1):on).join("/");return sn=Mt.startsWith("/")?"/"+sn:sn,{modelBaseUri:sn,manifestUri:sn==="/"?"/"+an:sn+"/"+an}}function loadWeightMap(Mt,st){return __awaiter(this,void 0,void 0,function(){var nn,rn,on,an;return __generator(this,function(sn){switch(sn.label){case 0:return nn=getModelUris(Mt,st),rn=nn.manifestUri,on=nn.modelBaseUri,[4,fetchJson(rn)];case 1:return an=sn.sent(),[2,ed.loadWeights(an,on)]}})})}var NeuralNetwork=function(){function Mt(st){this._name=st,this._params=void 0,this._paramMappings=[]}return Object.defineProperty(Mt.prototype,"params",{get:function(){return this._params},enumerable:!0,configurable:!0}),Object.defineProperty(Mt.prototype,"paramMappings",{get:function(){return this._paramMappings},enumerable:!0,configurable:!0}),Object.defineProperty(Mt.prototype,"isLoaded",{get:function(){return!!this.params},enumerable:!0,configurable:!0}),Mt.prototype.getParamFromPath=function(st){var nn=this.traversePropertyPath(st),rn=nn.obj,on=nn.objProp;return rn[on]},Mt.prototype.reassignParamFromPath=function(st,nn){var rn=this.traversePropertyPath(st),on=rn.obj,an=rn.objProp;on[an].dispose(),on[an]=nn},Mt.prototype.getParamList=function(){var st=this;return this._paramMappings.map(function(nn){var rn=nn.paramPath;return{path:rn,tensor:st.getParamFromPath(rn)}})},Mt.prototype.getTrainableParams=function(){return this.getParamList().filter(function(st){return st.tensor instanceof St})},Mt.prototype.getFrozenParams=function(){return this.getParamList().filter(function(st){return!(st.tensor instanceof St)})},Mt.prototype.variable=function(){var st=this;this.getFrozenParams().forEach(function(nn){var rn=nn.path,on=nn.tensor;st.reassignParamFromPath(rn,on.variable())})},Mt.prototype.freeze=function(){var st=this;this.getTrainableParams().forEach(function(nn){var rn=nn.path,on=nn.tensor,an=Fn(on.dataSync());on.dispose(),st.reassignParamFromPath(rn,an)})},Mt.prototype.dispose=function(st){st===void 0&&(st=!0),this.getParamList().forEach(function(nn){if(st&&nn.tensor.isDisposed)throw new Error("param tensor has already been disposed for path "+nn.path);nn.tensor.dispose()}),this._params=void 0},Mt.prototype.serializeParams=function(){return new Float32Array(this.getParamList().map(function(st){var nn=st.tensor;return Array.from(nn.dataSync())}).reduce(function(st,nn){return st.concat(nn)}))},Mt.prototype.load=function(st){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(nn){switch(nn.label){case 0:return st instanceof Float32Array?(this.extractWeights(st),[2]):[4,this.loadFromUri(st)];case 1:return nn.sent(),[2]}})})},Mt.prototype.loadFromUri=function(st){return __awaiter(this,void 0,void 0,function(){var nn;return __generator(this,function(rn){switch(rn.label){case 0:if(st&&typeof st!="string")throw new Error(this._name+".loadFromUri - expected model uri");return[4,loadWeightMap(st,this.getDefaultModelName())];case 1:return nn=rn.sent(),this.loadFromWeightMap(nn),[2]}})})},Mt.prototype.loadFromDisk=function(st){return __awaiter(this,void 0,void 0,function(){var nn,rn,on,an,sn,un,Xr,to,uo,hn;return __generator(this,function(fn){switch(fn.label){case 0:if(st&&typeof st!="string")throw new Error(this._name+".loadFromDisk - expected model file path");return nn=env$3.getEnv().readFile,rn=getModelUris(st,this.getDefaultModelName()),on=rn.manifestUri,an=rn.modelBaseUri,sn=function(co){return Promise.all(co.map(function(lo){return nn(lo).then(function(fo){return fo.buffer})}))},un=ed.weightsLoaderFactory(sn),uo=(to=JSON).parse,[4,nn(on)];case 1:return Xr=uo.apply(to,[fn.sent().toString()]),[4,un(Xr,an)];case 2:return hn=fn.sent(),this.loadFromWeightMap(hn),[2]}})})},Mt.prototype.loadFromWeightMap=function(st){var nn=this.extractParamsFromWeigthMap(st),rn=nn.paramMappings,on=nn.params;this._paramMappings=rn,this._params=on},Mt.prototype.extractWeights=function(st){var nn=this.extractParams(st),rn=nn.paramMappings,on=nn.params;this._paramMappings=rn,this._params=on},Mt.prototype.traversePropertyPath=function(st){if(!this.params)throw new Error("traversePropertyPath - model has no loaded params");var nn=st.split("/").reduce(function(an,sn){if(!an.nextObj.hasOwnProperty(sn))throw new Error("traversePropertyPath - object does not have property "+sn+", for path "+st);return{obj:an.nextObj,objProp:sn,nextObj:an.nextObj[sn]}},{nextObj:this.params}),rn=nn.obj,on=nn.objProp;if(!rn||!on||!(rn[on]instanceof wt))throw new Error("traversePropertyPath - parameter is not a tensor, for path "+st);return{obj:rn,objProp:on}},Mt}();function depthwiseSeparableConv$1(Mt,st,nn){return Ze(function(){var rn=Jc(Mt,st.depthwise_filter,st.pointwise_filter,nn,"same");return rn=rc(rn,st.bias),rn})}function denseBlock3(Mt,st,nn){return nn===void 0&&(nn=!1),Ze(function(){var rn=Bl(nn?rc(qc(Mt,st.conv0.filters,[2,2],"same"),st.conv0.bias):depthwiseSeparableConv$1(Mt,st.conv0,[2,2])),on=depthwiseSeparableConv$1(rn,st.conv1,[1,1]),an=Bl(rc(rn,on)),sn=depthwiseSeparableConv$1(an,st.conv2,[1,1]);return Bl(rc(rn,rc(on,sn)))})}function denseBlock4(Mt,st,nn,rn){return nn===void 0&&(nn=!1),rn===void 0&&(rn=!0),Ze(function(){var on=Bl(nn?rc(qc(Mt,st.conv0.filters,rn?[2,2]:[1,1],"same"),st.conv0.bias):depthwiseSeparableConv$1(Mt,st.conv0,rn?[2,2]:[1,1])),an=depthwiseSeparableConv$1(on,st.conv1,[1,1]),sn=Bl(rc(on,an)),un=depthwiseSeparableConv$1(sn,st.conv2,[1,1]),Xr=Bl(rc(on,rc(an,un))),to=depthwiseSeparableConv$1(Xr,st.conv3,[1,1]);return Bl(rc(on,rc(an,rc(un,to))))})}function convLayer$1(Mt,st,nn,rn){return nn===void 0&&(nn="same"),rn===void 0&&(rn=!1),Ze(function(){var on=rc(qc(Mt,st.filters,[1,1],nn),st.bias);return rn?Bl(on):on})}function disposeUnusedWeightTensors(Mt,st){Object.keys(Mt).forEach(function(nn){st.some(function(rn){return rn.originalPath===nn})||Mt[nn].dispose()})}function extractConvParamsFactory(Mt,st){return function(nn,rn,on,an){var sn=Ln(Mt(nn*rn*on*on),[on,on,nn,rn]),un=Mn(Mt(rn));return st.push({paramPath:an+"/filters"},{paramPath:an+"/bias"}),{filters:sn,bias:un}}}function extractFCParamsFactory(Mt,st){return function(nn,rn,on){var an=Bn(Mt(nn*rn),[nn,rn]),sn=Mn(Mt(rn));return st.push({paramPath:on+"/weights"},{paramPath:on+"/bias"}),{weights:an,bias:sn}}}var SeparableConvParams=function(){function Mt(st,nn,rn){this.depthwise_filter=st,this.pointwise_filter=nn,this.bias=rn}return Mt}();function extractSeparableConvParamsFactory(Mt,st){return function(nn,rn,on){var an=Ln(Mt(9*nn),[3,3,nn,1]),sn=Ln(Mt(nn*rn),[1,1,nn,rn]),un=Mn(Mt(rn));return st.push({paramPath:on+"/depthwise_filter"},{paramPath:on+"/pointwise_filter"},{paramPath:on+"/bias"}),new SeparableConvParams(an,sn,un)}}function loadSeparableConvParamsFactory(Mt){return function(st){var nn=Mt(st+"/depthwise_filter",4),rn=Mt(st+"/pointwise_filter",4),on=Mt(st+"/bias",1);return new SeparableConvParams(nn,rn,on)}}function extractWeightEntryFactory(Mt,st){return function(nn,rn,on){var an=Mt[nn];if(!isTensor(an,rn))throw new Error("expected weightMap["+nn+"] to be a Tensor"+rn+"D, instead have "+an);return st.push({originalPath:nn,paramPath:on||nn}),an}}function extractWeightsFactory(Mt){var st=Mt;function nn(on){var an=st.slice(0,on);return st=st.slice(on),an}function rn(){return st}return{extractWeights:nn,getRemainingWeights:rn}}function extractorsFactory$9(Mt,st){var nn=extractConvParamsFactory(Mt,st),rn=extractSeparableConvParamsFactory(Mt,st);function on(sn,un,Xr,to){to===void 0&&(to=!1);var uo=to?nn(sn,un,3,Xr+"/conv0"):rn(sn,un,Xr+"/conv0"),hn=rn(un,un,Xr+"/conv1"),fn=rn(un,un,Xr+"/conv2");return{conv0:uo,conv1:hn,conv2:fn}}function an(sn,un,Xr,to){to===void 0&&(to=!1);var uo=on(sn,un,Xr,to),hn=uo.conv0,fn=uo.conv1,co=uo.conv2,lo=rn(un,un,Xr+"/conv3");return{conv0:hn,conv1:fn,conv2:co,conv3:lo}}return{extractDenseBlock3Params:on,extractDenseBlock4Params:an}}function extractParams$7(Mt){var st=[],nn=extractWeightsFactory(Mt),rn=nn.extractWeights,on=nn.getRemainingWeights,an=extractorsFactory$9(rn,st).extractDenseBlock4Params,sn=an(3,32,"dense0",!0),un=an(32,64,"dense1"),Xr=an(64,128,"dense2"),to=an(128,256,"dense3");if(on().length!==0)throw new Error("weights remaing after extract: "+on().length);return{paramMappings:st,params:{dense0:sn,dense1:un,dense2:Xr,dense3:to}}}function loadConvParamsFactory(Mt){return function(st){var nn=Mt(st+"/filters",4),rn=Mt(st+"/bias",1);return{filters:nn,bias:rn}}}function loadParamsFactory$1(Mt,st){var nn=extractWeightEntryFactory(Mt,st),rn=loadConvParamsFactory(nn),on=loadSeparableConvParamsFactory(nn);function an(un,Xr){Xr===void 0&&(Xr=!1);var to=Xr?rn(un+"/conv0"):on(un+"/conv0"),uo=on(un+"/conv1"),hn=on(un+"/conv2");return{conv0:to,conv1:uo,conv2:hn}}function sn(un,Xr){Xr===void 0&&(Xr=!1);var to=Xr?rn(un+"/conv0"):on(un+"/conv0"),uo=on(un+"/conv1"),hn=on(un+"/conv2"),fn=on(un+"/conv3");return{conv0:to,conv1:uo,conv2:hn,conv3:fn}}return{extractDenseBlock3Params:an,extractDenseBlock4Params:sn}}function extractParamsFromWeigthMap$7(Mt){var st=[],nn=loadParamsFactory$1(Mt,st).extractDenseBlock4Params,rn={dense0:nn("dense0",!0),dense1:nn("dense1"),dense2:nn("dense2"),dense3:nn("dense3")};return disposeUnusedWeightTensors(Mt,st),{params:rn,paramMappings:st}}var FaceFeatureExtractor=function(Mt){__extends(st,Mt);function st(){return Mt.call(this,"FaceFeatureExtractor")||this}return st.prototype.forwardInput=function(nn){var rn=this.params;if(!rn)throw new Error("FaceFeatureExtractor - load model before inference");return Ze(function(){var on=nn.toBatchTensor(112,!0),an=[122.782,117.001,104.298],sn=normalize$2(on,an).div(On(255)),un=denseBlock4(sn,rn.dense0,!0);return un=denseBlock4(un,rn.dense1),un=denseBlock4(un,rn.dense2),un=denseBlock4(un,rn.dense3),un=fl(un,[7,7],[2,2],"valid"),un})},st.prototype.forward=function(nn){return __awaiter(this,void 0,void 0,function(){var rn;return __generator(this,function(on){switch(on.label){case 0:return rn=this.forwardInput,[4,toNetInput(nn)];case 1:return[2,rn.apply(this,[on.sent()])]}})})},st.prototype.getDefaultModelName=function(){return"face_feature_extractor_model"},st.prototype.extractParamsFromWeigthMap=function(nn){return extractParamsFromWeigthMap$7(nn)},st.prototype.extractParams=function(nn){return extractParams$7(nn)},st}(NeuralNetwork);function fullyConnectedLayer(Mt,st){return Ze(function(){return rc(el(Mt,st.weights),st.bias)})}function extractParams$6(Mt,st,nn){var rn=[],on=extractWeightsFactory(Mt),an=on.extractWeights,sn=on.getRemainingWeights,un=extractFCParamsFactory(an,rn),Xr=un(st,nn,"fc");if(sn().length!==0)throw new Error("weights remaing after extract: "+sn().length);return{paramMappings:rn,params:{fc:Xr}}}function extractParamsFromWeigthMap$6(Mt){var st=[],nn=extractWeightEntryFactory(Mt,st);function rn(an){var sn=nn(an+"/weights",2),un=nn(an+"/bias",1);return{weights:sn,bias:un}}var on={fc:rn("fc")};return disposeUnusedWeightTensors(Mt,st),{params:on,paramMappings:st}}function seperateWeightMaps(Mt){var st={},nn={};return Object.keys(Mt).forEach(function(rn){var on=rn.startsWith("fc")?nn:st;on[rn]=Mt[rn]}),{featureExtractorMap:st,classifierMap:nn}}var FaceProcessor=function(Mt){__extends(st,Mt);function st(nn,rn){var on=Mt.call(this,nn)||this;return on._faceFeatureExtractor=rn,on}return Object.defineProperty(st.prototype,"faceFeatureExtractor",{get:function(){return this._faceFeatureExtractor},enumerable:!0,configurable:!0}),st.prototype.runNet=function(nn){var rn=this,on=this.params;if(!on)throw new Error(this._name+" - load model before inference");return Ze(function(){var an=nn instanceof NetInput?rn.faceFeatureExtractor.forwardInput(nn):nn;return fullyConnectedLayer(an.as2D(an.shape[0],-1),on.fc)})},st.prototype.dispose=function(nn){nn===void 0&&(nn=!0),this.faceFeatureExtractor.dispose(nn),Mt.prototype.dispose.call(this,nn)},st.prototype.loadClassifierParams=function(nn){var rn=this.extractClassifierParams(nn),on=rn.params,an=rn.paramMappings;this._params=on,this._paramMappings=an},st.prototype.extractClassifierParams=function(nn){return extractParams$6(nn,this.getClassifierChannelsIn(),this.getClassifierChannelsOut())},st.prototype.extractParamsFromWeigthMap=function(nn){var rn=seperateWeightMaps(nn),on=rn.featureExtractorMap,an=rn.classifierMap;return this.faceFeatureExtractor.loadFromWeightMap(on),extractParamsFromWeigthMap$6(an)},st.prototype.extractParams=function(nn){var rn=this.getClassifierChannelsIn(),on=this.getClassifierChannelsOut(),an=on*rn+on,sn=nn.slice(0,nn.length-an),un=nn.slice(nn.length-an);return this.faceFeatureExtractor.extractWeights(sn),this.extractClassifierParams(un)},st}(NeuralNetwork),FACE_EXPRESSION_LABELS=["neutral","happy","sad","angry","fearful","disgusted","surprised"],FaceExpressions=function(){function Mt(st){var nn=this;if(st.length!==7)throw new Error("FaceExpressions.constructor - expected probabilities.length to be 7, have: "+st.length);FACE_EXPRESSION_LABELS.forEach(function(rn,on){nn[rn]=st[on]})}return Mt.prototype.asSortedArray=function(){var st=this;return FACE_EXPRESSION_LABELS.map(function(nn){return{expression:nn,probability:st[nn]}}).sort(function(nn,rn){return rn.probability-nn.probability})},Mt}(),FaceExpressionNet=function(Mt){__extends(st,Mt);function st(nn){return nn===void 0&&(nn=new FaceFeatureExtractor),Mt.call(this,"FaceExpressionNet",nn)||this}return st.prototype.forwardInput=function(nn){var rn=this;return Ze(function(){return go(rn.runNet(nn))})},st.prototype.forward=function(nn){return __awaiter(this,void 0,void 0,function(){var rn;return __generator(this,function(on){switch(on.label){case 0:return rn=this.forwardInput,[4,toNetInput(nn)];case 1:return[2,rn.apply(this,[on.sent()])]}})})},st.prototype.predictExpressions=function(nn){return __awaiter(this,void 0,void 0,function(){var rn,on,an,sn,un=this;return __generator(this,function(Xr){switch(Xr.label){case 0:return[4,toNetInput(nn)];case 1:return rn=Xr.sent(),[4,this.forwardInput(rn)];case 2:return on=Xr.sent(),[4,Promise.all(Ur(on).map(function(to){return __awaiter(un,void 0,void 0,function(){var uo;return __generator(this,function(hn){switch(hn.label){case 0:return[4,to.data()];case 1:return uo=hn.sent(),to.dispose(),[2,uo]}})})}))];case 3:return an=Xr.sent(),on.dispose(),sn=an.map(function(to){return new FaceExpressions(to)}),[2,rn.isBatchInput?sn:sn[0]]}})})},st.prototype.getDefaultModelName=function(){return"face_expression_model"},st.prototype.getClassifierChannelsIn=function(){return 256},st.prototype.getClassifierChannelsOut=function(){return 7},st}(FaceProcessor);function extendWithFaceExpressions(Mt,st){var nn={expressions:st};return Object.assign({},Mt,nn)}function isWithFaceLandmarks(Mt){return isWithFaceDetection(Mt)&&Mt.landmarks instanceof FaceLandmarks&&Mt.unshiftedLandmarks instanceof FaceLandmarks&&Mt.alignedRect instanceof FaceDetection}function extendWithFaceLandmarks(Mt,st){var nn=Mt.detection.box,rn=st.shiftBy(nn.x,nn.y),on=rn.align(),an=Mt.detection.imageDims,sn=new FaceDetection(Mt.detection.score,on.rescale(an.reverse()),an),un={landmarks:rn,unshiftedLandmarks:st,alignedRect:sn};return Object.assign({},Mt,un)}function extractorsFactory$8(Mt,st){var nn=extractConvParamsFactory(Mt,st),rn=extractSeparableConvParamsFactory(Mt,st);function on(sn,un,Xr){var to=rn(sn,un,Xr+"/separable_conv0"),uo=rn(un,un,Xr+"/separable_conv1"),hn=nn(sn,un,1,Xr+"/expansion_conv");return{separable_conv0:to,separable_conv1:uo,expansion_conv:hn}}function an(sn,un){var Xr=rn(sn,sn,un+"/separable_conv0"),to=rn(sn,sn,un+"/separable_conv1"),uo=rn(sn,sn,un+"/separable_conv2");return{separable_conv0:Xr,separable_conv1:to,separable_conv2:uo}}return{extractConvParams:nn,extractSeparableConvParams:rn,extractReductionBlockParams:on,extractMainBlockParams:an}}function extractParams$5(Mt,st){var nn=[],rn=extractWeightsFactory(Mt),on=rn.extractWeights,an=rn.getRemainingWeights,sn=extractorsFactory$8(on,nn),un=sn.extractConvParams,Xr=sn.extractSeparableConvParams,to=sn.extractReductionBlockParams,uo=sn.extractMainBlockParams,hn=un(3,32,3,"entry_flow/conv_in"),fn=to(32,64,"entry_flow/reduction_block_0"),co=to(64,128,"entry_flow/reduction_block_1"),lo={conv_in:hn,reduction_block_0:fn,reduction_block_1:co},fo={};range$5(st,0,1).forEach(function(_d){fo["main_block_"+_d]=uo(128,"middle_flow/main_block_"+_d)});var ho=to(128,256,"exit_flow/reduction_block"),mo=Xr(256,512,"exit_flow/separable_conv"),Uo={reduction_block:ho,separable_conv:mo};if(an().length!==0)throw new Error("weights remaing after extract: "+an().length);return{paramMappings:nn,params:{entry_flow:lo,middle_flow:fo,exit_flow:Uo}}}function loadParamsFactory(Mt,st){var nn=extractWeightEntryFactory(Mt,st),rn=loadConvParamsFactory(nn),on=loadSeparableConvParamsFactory(nn);function an(un){var Xr=on(un+"/separable_conv0"),to=on(un+"/separable_conv1"),uo=rn(un+"/expansion_conv");return{separable_conv0:Xr,separable_conv1:to,expansion_conv:uo}}function sn(un){var Xr=on(un+"/separable_conv0"),to=on(un+"/separable_conv1"),uo=on(un+"/separable_conv2");return{separable_conv0:Xr,separable_conv1:to,separable_conv2:uo}}return{extractConvParams:rn,extractSeparableConvParams:on,extractReductionBlockParams:an,extractMainBlockParams:sn}}function extractParamsFromWeigthMap$5(Mt,st){var nn=[],rn=loadParamsFactory(Mt,nn),on=rn.extractConvParams,an=rn.extractSeparableConvParams,sn=rn.extractReductionBlockParams,un=rn.extractMainBlockParams,Xr=on("entry_flow/conv_in"),to=sn("entry_flow/reduction_block_0"),uo=sn("entry_flow/reduction_block_1"),hn={conv_in:Xr,reduction_block_0:to,reduction_block_1:uo},fn={};range$5(st,0,1).forEach(function(ho){fn["main_block_"+ho]=un("middle_flow/main_block_"+ho)});var co=sn("exit_flow/reduction_block"),lo=an("exit_flow/separable_conv"),fo={reduction_block:co,separable_conv:lo};return disposeUnusedWeightTensors(Mt,nn),{params:{entry_flow:hn,middle_flow:fn,exit_flow:fo},paramMappings:nn}}function conv$1(Mt,st,nn){return rc(qc(Mt,st.filters,nn,"same"),st.bias)}function reductionBlock(Mt,st,nn){nn===void 0&&(nn=!0);var rn=nn?Bl(Mt):Mt;return rn=depthwiseSeparableConv$1(rn,st.separable_conv0,[1,1]),rn=depthwiseSeparableConv$1(Bl(rn),st.separable_conv1,[1,1]),rn=hl(rn,[3,3],[2,2],"same"),rn=rc(rn,conv$1(Mt,st.expansion_conv,[2,2])),rn}function mainBlock(Mt,st){var nn=depthwiseSeparableConv$1(Bl(Mt),st.separable_conv0,[1,1]);return nn=depthwiseSeparableConv$1(Bl(nn),st.separable_conv1,[1,1]),nn=depthwiseSeparableConv$1(Bl(nn),st.separable_conv2,[1,1]),nn=rc(nn,Mt),nn}var TinyXception=function(Mt){__extends(st,Mt);function st(nn){var rn=Mt.call(this,"TinyXception")||this;return rn._numMainBlocks=nn,rn}return st.prototype.forwardInput=function(nn){var rn=this,on=this.params;if(!on)throw new Error("TinyXception - load model before inference");return Ze(function(){var an=nn.toBatchTensor(112,!0),sn=[122.782,117.001,104.298],un=normalize$2(an,sn).div(On(256)),Xr=Bl(conv$1(un,on.entry_flow.conv_in,[2,2]));return Xr=reductionBlock(Xr,on.entry_flow.reduction_block_0,!1),Xr=reductionBlock(Xr,on.entry_flow.reduction_block_1),range$5(rn._numMainBlocks,0,1).forEach(function(to){Xr=mainBlock(Xr,on.middle_flow["main_block_"+to])}),Xr=reductionBlock(Xr,on.exit_flow.reduction_block),Xr=Bl(depthwiseSeparableConv$1(Xr,on.exit_flow.separable_conv,[1,1])),Xr})},st.prototype.forward=function(nn){return __awaiter(this,void 0,void 0,function(){var rn;return __generator(this,function(on){switch(on.label){case 0:return rn=this.forwardInput,[4,toNetInput(nn)];case 1:return[2,rn.apply(this,[on.sent()])]}})})},st.prototype.getDefaultModelName=function(){return"tiny_xception_model"},st.prototype.extractParamsFromWeigthMap=function(nn){return extractParamsFromWeigthMap$5(nn,this._numMainBlocks)},st.prototype.extractParams=function(nn){return extractParams$5(nn,this._numMainBlocks)},st}(NeuralNetwork);function extractParams$4(Mt){var st=[],nn=extractWeightsFactory(Mt),rn=nn.extractWeights,on=nn.getRemainingWeights,an=extractFCParamsFactory(rn,st),sn=an(512,1,"fc/age"),un=an(512,2,"fc/gender");if(on().length!==0)throw new Error("weights remaing after extract: "+on().length);return{paramMappings:st,params:{fc:{age:sn,gender:un}}}}function extractParamsFromWeigthMap$4(Mt){var st=[],nn=extractWeightEntryFactory(Mt,st);function rn(an){var sn=nn(an+"/weights",2),un=nn(an+"/bias",1);return{weights:sn,bias:un}}var on={fc:{age:rn("fc/age"),gender:rn("fc/gender")}};return disposeUnusedWeightTensors(Mt,st),{params:on,paramMappings:st}}var Gender;(function(Mt){Mt.FEMALE="female",Mt.MALE="male"})(Gender||(Gender={}));var AgeGenderNet=function(Mt){__extends(st,Mt);function st(nn){nn===void 0&&(nn=new TinyXception(2));var rn=Mt.call(this,"AgeGenderNet")||this;return rn._faceFeatureExtractor=nn,rn}return Object.defineProperty(st.prototype,"faceFeatureExtractor",{get:function(){return this._faceFeatureExtractor},enumerable:!0,configurable:!0}),st.prototype.runNet=function(nn){var rn=this,on=this.params;if(!on)throw new Error(this._name+" - load model before inference");return Ze(function(){var an=nn instanceof NetInput?rn.faceFeatureExtractor.forwardInput(nn):nn,sn=fl(an,[7,7],[2,2],"valid").as2D(an.shape[0],-1),un=fullyConnectedLayer(sn,on.fc.age).as1D(),Xr=fullyConnectedLayer(sn,on.fc.gender);return{age:un,gender:Xr}})},st.prototype.forwardInput=function(nn){var rn=this;return Ze(function(){var on=rn.runNet(nn),an=on.age,sn=on.gender;return{age:an,gender:go(sn)}})},st.prototype.forward=function(nn){return __awaiter(this,void 0,void 0,function(){var rn;return __generator(this,function(on){switch(on.label){case 0:return rn=this.forwardInput,[4,toNetInput(nn)];case 1:return[2,rn.apply(this,[on.sent()])]}})})},st.prototype.predictAgeAndGender=function(nn){return __awaiter(this,void 0,void 0,function(){var rn,on,an,sn,un,Xr,to=this;return __generator(this,function(uo){switch(uo.label){case 0:return[4,toNetInput(nn)];case 1:return rn=uo.sent(),[4,this.forwardInput(rn)];case 2:return on=uo.sent(),an=Ur(on.age),sn=Ur(on.gender),un=an.map(function(hn,fn){return{ageTensor:hn,genderTensor:sn[fn]}}),[4,Promise.all(un.map(function(hn){var fn=hn.ageTensor,co=hn.genderTensor;return __awaiter(to,void 0,void 0,function(){var lo,fo,ho,mo,Uo;return __generator(this,function(_d){switch(_d.label){case 0:return[4,fn.data()];case 1:return lo=_d.sent()[0],[4,co.data()];case 2:return fo=_d.sent()[0],ho=fo>.5,mo=ho?Gender.MALE:Gender.FEMALE,Uo=ho?fo:1-fo,fn.dispose(),co.dispose(),[2,{age:lo,gender:mo,genderProbability:Uo}]}})})}))];case 3:return Xr=uo.sent(),on.age.dispose(),on.gender.dispose(),[2,rn.isBatchInput?Xr:Xr[0]]}})})},st.prototype.getDefaultModelName=function(){return"age_gender_model"},st.prototype.dispose=function(nn){nn===void 0&&(nn=!0),this.faceFeatureExtractor.dispose(nn),Mt.prototype.dispose.call(this,nn)},st.prototype.loadClassifierParams=function(nn){var rn=this.extractClassifierParams(nn),on=rn.params,an=rn.paramMappings;this._params=on,this._paramMappings=an},st.prototype.extractClassifierParams=function(nn){return extractParams$4(nn)},st.prototype.extractParamsFromWeigthMap=function(nn){var rn=seperateWeightMaps(nn),on=rn.featureExtractorMap,an=rn.classifierMap;return this.faceFeatureExtractor.loadFromWeightMap(on),extractParamsFromWeigthMap$4(an)},st.prototype.extractParams=function(nn){var rn=1539,on=nn.slice(0,nn.length-rn),an=nn.slice(nn.length-rn);return this.faceFeatureExtractor.extractWeights(on),this.extractClassifierParams(an)},st}(NeuralNetwork),FaceLandmark68NetBase=function(Mt){__extends(st,Mt);function st(){return Mt!==null&&Mt.apply(this,arguments)||this}return st.prototype.postProcess=function(nn,rn,on){var an=on.map(function(un){var Xr=un.width,to=un.height,uo=rn/Math.max(to,Xr);return{width:Xr*uo,height:to*uo}}),sn=an.length;return Ze(function(){var un=function(fn,co){return Pr([Hn([68],fn),Hn([68],co)],1).as2D(1,136).as1D()},Xr=function(fn,co){var lo=an[fn],fo=lo.width,ho=lo.height;return co(fo,ho)?Math.abs(fo-ho)/2:0},to=function(fn){return Xr(fn,function(co,lo){return co<lo})},uo=function(fn){return Xr(fn,function(co,lo){return lo<co})},hn=nn.mul(Hn([sn,136],rn)).sub(Pr(Array.from(Array(sn),function(fn,co){return un(to(co),uo(co))}))).div(Pr(Array.from(Array(sn),function(fn,co){return un(an[co].width,an[co].height)})));return hn})},st.prototype.forwardInput=function(nn){var rn=this;return Ze(function(){var on=rn.runNet(nn);return rn.postProcess(on,nn.inputSize,nn.inputDimensions.map(function(an){var sn=an[0],un=an[1];return{height:sn,width:un}}))})},st.prototype.forward=function(nn){return __awaiter(this,void 0,void 0,function(){var rn;return __generator(this,function(on){switch(on.label){case 0:return rn=this.forwardInput,[4,toNetInput(nn)];case 1:return[2,rn.apply(this,[on.sent()])]}})})},st.prototype.detectLandmarks=function(nn){return __awaiter(this,void 0,void 0,function(){var rn,on,an,sn=this;return __generator(this,function(un){switch(un.label){case 0:return[4,toNetInput(nn)];case 1:return rn=un.sent(),on=Ze(function(){return Ur(sn.forwardInput(rn))}),[4,Promise.all(on.map(function(Xr,to){return __awaiter(sn,void 0,void 0,function(){var uo,hn,fn,co,lo;return __generator(this,function(fo){switch(fo.label){case 0:return fn=(hn=Array).from,[4,Xr.data()];case 1:return uo=fn.apply(hn,[fo.sent()]),co=uo.filter(function(ho,mo){return isEven(mo)}),lo=uo.filter(function(ho,mo){return!isEven(mo)}),[2,new FaceLandmarks68(Array(68).fill(0).map(function(ho,mo){return new Point(co[mo],lo[mo])}),{height:rn.getInputHeight(to),width:rn.getInputWidth(to)})]}})})}))];case 2:return an=un.sent(),on.forEach(function(Xr){return Xr.dispose()}),[2,rn.isBatchInput?an:an[0]]}})})},st.prototype.getClassifierChannelsOut=function(){return 136},st}(FaceProcessor),FaceLandmark68Net=function(Mt){__extends(st,Mt);function st(nn){return nn===void 0&&(nn=new FaceFeatureExtractor),Mt.call(this,"FaceLandmark68Net",nn)||this}return st.prototype.getDefaultModelName=function(){return"face_landmark_68_model"},st.prototype.getClassifierChannelsIn=function(){return 256},st}(FaceLandmark68NetBase);function extractParamsFromWeigthMapTiny(Mt){var st=[],nn=loadParamsFactory$1(Mt,st).extractDenseBlock3Params,rn={dense0:nn("dense0",!0),dense1:nn("dense1"),dense2:nn("dense2")};return disposeUnusedWeightTensors(Mt,st),{params:rn,paramMappings:st}}function extractParamsTiny(Mt){var st=[],nn=extractWeightsFactory(Mt),rn=nn.extractWeights,on=nn.getRemainingWeights,an=extractorsFactory$9(rn,st).extractDenseBlock3Params,sn=an(3,32,"dense0",!0),un=an(32,64,"dense1"),Xr=an(64,128,"dense2");if(on().length!==0)throw new Error("weights remaing after extract: "+on().length);return{paramMappings:st,params:{dense0:sn,dense1:un,dense2:Xr}}}var TinyFaceFeatureExtractor=function(Mt){__extends(st,Mt);function st(){return Mt.call(this,"TinyFaceFeatureExtractor")||this}return st.prototype.forwardInput=function(nn){var rn=this.params;if(!rn)throw new Error("TinyFaceFeatureExtractor - load model before inference");return Ze(function(){var on=nn.toBatchTensor(112,!0),an=[122.782,117.001,104.298],sn=normalize$2(on,an).div(On(255)),un=denseBlock3(sn,rn.dense0,!0);return un=denseBlock3(un,rn.dense1),un=denseBlock3(un,rn.dense2),un=fl(un,[14,14],[2,2],"valid"),un})},st.prototype.forward=function(nn){return __awaiter(this,void 0,void 0,function(){var rn;return __generator(this,function(on){switch(on.label){case 0:return rn=this.forwardInput,[4,toNetInput(nn)];case 1:return[2,rn.apply(this,[on.sent()])]}})})},st.prototype.getDefaultModelName=function(){return"face_feature_extractor_tiny_model"},st.prototype.extractParamsFromWeigthMap=function(nn){return extractParamsFromWeigthMapTiny(nn)},st.prototype.extractParams=function(nn){return extractParamsTiny(nn)},st}(NeuralNetwork),FaceLandmark68TinyNet=function(Mt){__extends(st,Mt);function st(nn){return nn===void 0&&(nn=new TinyFaceFeatureExtractor),Mt.call(this,"FaceLandmark68TinyNet",nn)||this}return st.prototype.getDefaultModelName=function(){return"face_landmark_68_tiny_model"},st.prototype.getClassifierChannelsIn=function(){return 128},st}(FaceLandmark68NetBase);(function(Mt){__extends(st,Mt);function st(){return Mt!==null&&Mt.apply(this,arguments)||this}return st})(FaceLandmark68Net);function scale(Mt,st){return rc(gc(Mt,st.weights),st.biases)}function convLayer(Mt,st,nn,rn,on){on===void 0&&(on="same");var an=st.conv,sn=an.filters,un=an.bias,Xr=qc(Mt,sn,nn,on);return Xr=rc(Xr,un),Xr=scale(Xr,st.scale),rn?Bl(Xr):Xr}function conv(Mt,st){return convLayer(Mt,st,[1,1],!0)}function convNoRelu(Mt,st){return convLayer(Mt,st,[1,1],!1)}function convDown(Mt,st){return convLayer(Mt,st,[2,2],!0,"valid")}function extractorsFactory$7(Mt,st){function nn(un,Xr,to){var uo=Mt(un),hn=uo.length/(Xr*to*to);if(isFloat(hn))throw new Error("depth has to be an integer: "+hn+", weights.length: "+uo.length+", numFilters: "+Xr+", filterSize: "+to);return Ze(function(){return Wl(Ln(uo,[Xr,hn,to,to]),[2,3,1,0])})}function rn(un,Xr,to,uo){var hn=nn(un,Xr,to),fn=Mn(Mt(Xr));return st.push({paramPath:uo+"/filters"},{paramPath:uo+"/bias"}),{filters:hn,bias:fn}}function on(un,Xr){var to=Mn(Mt(un)),uo=Mn(Mt(un));return st.push({paramPath:Xr+"/weights"},{paramPath:Xr+"/biases"}),{weights:to,biases:uo}}function an(un,Xr,to,uo){var hn=rn(un,Xr,to,uo+"/conv"),fn=on(Xr,uo+"/scale");return{conv:hn,scale:fn}}function sn(un,Xr,to,uo,hn){hn===void 0&&(hn=!1);var fn=an((hn?.5:1)*un,Xr,to,uo+"/conv1"),co=an(un,Xr,to,uo+"/conv2");return{conv1:fn,conv2:co}}return{extractConvLayerParams:an,extractResidualLayerParams:sn}}function extractParams$3(Mt){var st=extractWeightsFactory(Mt),nn=st.extractWeights,rn=st.getRemainingWeights,on=[],an=extractorsFactory$7(nn,on),sn=an.extractConvLayerParams,un=an.extractResidualLayerParams,Xr=sn(4704,32,7,"conv32_down"),to=un(9216,32,3,"conv32_1"),uo=un(9216,32,3,"conv32_2"),hn=un(9216,32,3,"conv32_3"),fn=un(36864,64,3,"conv64_down",!0),co=un(36864,64,3,"conv64_1"),lo=un(36864,64,3,"conv64_2"),fo=un(36864,64,3,"conv64_3"),ho=un(147456,128,3,"conv128_down",!0),mo=un(147456,128,3,"conv128_1"),Uo=un(147456,128,3,"conv128_2"),_d=un(589824,256,3,"conv256_down",!0),tp=un(589824,256,3,"conv256_1"),ep=un(589824,256,3,"conv256_2"),np=un(589824,256,3,"conv256_down_out"),rp=Ze(function(){return Wl(Bn(nn(256*128),[128,256]),[1,0])});if(on.push({paramPath:"fc"}),rn().length!==0)throw new Error("weights remaing after extract: "+rn().length);var ip={conv32_down:Xr,conv32_1:to,conv32_2:uo,conv32_3:hn,conv64_down:fn,conv64_1:co,conv64_2:lo,conv64_3:fo,conv128_down:ho,conv128_1:mo,conv128_2:Uo,conv256_down:_d,conv256_1:tp,conv256_2:ep,conv256_down_out:np,fc:rp};return{params:ip,paramMappings:on}}function extractorsFactory$6(Mt,st){var nn=extractWeightEntryFactory(Mt,st);function rn(sn){var un=nn(sn+"/scale/weights",1),Xr=nn(sn+"/scale/biases",1);return{weights:un,biases:Xr}}function on(sn){var un=nn(sn+"/conv/filters",4),Xr=nn(sn+"/conv/bias",1),to=rn(sn);return{conv:{filters:un,bias:Xr},scale:to}}function an(sn){return{conv1:on(sn+"/conv1"),conv2:on(sn+"/conv2")}}return{extractConvLayerParams:on,extractResidualLayerParams:an}}function extractParamsFromWeigthMap$3(Mt){var st=[],nn=extractorsFactory$6(Mt,st),rn=nn.extractConvLayerParams,on=nn.extractResidualLayerParams,an=rn("conv32_down"),sn=on("conv32_1"),un=on("conv32_2"),Xr=on("conv32_3"),to=on("conv64_down"),uo=on("conv64_1"),hn=on("conv64_2"),fn=on("conv64_3"),co=on("conv128_down"),lo=on("conv128_1"),fo=on("conv128_2"),ho=on("conv256_down"),mo=on("conv256_1"),Uo=on("conv256_2"),_d=on("conv256_down_out"),tp=Mt.fc;if(st.push({originalPath:"fc",paramPath:"fc"}),!isTensor2D(tp))throw new Error("expected weightMap[fc] to be a Tensor2D, instead have "+tp);var ep={conv32_down:an,conv32_1:sn,conv32_2:un,conv32_3:Xr,conv64_down:to,conv64_1:uo,conv64_2:hn,conv64_3:fn,conv128_down:co,conv128_1:lo,conv128_2:fo,conv256_down:ho,conv256_1:mo,conv256_2:Uo,conv256_down_out:_d,fc:tp};return disposeUnusedWeightTensors(Mt,st),{params:ep,paramMappings:st}}function residual(Mt,st){var nn=conv(Mt,st.conv1);return nn=convNoRelu(nn,st.conv2),nn=rc(nn,Mt),nn=Bl(nn),nn}function residualDown(Mt,st){var nn=convDown(Mt,st.conv1);nn=convNoRelu(nn,st.conv2);var rn=fl(Mt,2,2,"valid"),on=Gn(rn.shape),an=rn.shape[3]!==nn.shape[3],sn=rn.shape[1]!==nn.shape[1]||rn.shape[2]!==nn.shape[2];if(sn){var un=__spreadArrays(nn.shape);un[1]=1;var Xr=Gn(un);nn=Yn([nn,Xr],1);var to=__spreadArrays(nn.shape);to[2]=1;var uo=Gn(to);nn=Yn([nn,uo],2)}return rn=an?Yn([rn,on],3):rn,nn=rc(rn,nn),nn=Bl(nn),nn}var FaceRecognitionNet=function(Mt){__extends(st,Mt);function st(){return Mt.call(this,"FaceRecognitionNet")||this}return st.prototype.forwardInput=function(nn){var rn=this.params;if(!rn)throw new Error("FaceRecognitionNet - load model before inference");return Ze(function(){var on=nn.toBatchTensor(150,!0).toFloat(),an=[122.782,117.001,104.298],sn=normalize$2(on,an).div(On(256)),un=convDown(sn,rn.conv32_down);un=hl(un,3,2,"valid"),un=residual(un,rn.conv32_1),un=residual(un,rn.conv32_2),un=residual(un,rn.conv32_3),un=residualDown(un,rn.conv64_down),un=residual(un,rn.conv64_1),un=residual(un,rn.conv64_2),un=residual(un,rn.conv64_3),un=residualDown(un,rn.conv128_down),un=residual(un,rn.conv128_1),un=residual(un,rn.conv128_2),un=residualDown(un,rn.conv256_down),un=residual(un,rn.conv256_1),un=residual(un,rn.conv256_2),un=residualDown(un,rn.conv256_down_out);var Xr=un.mean([1,2]),to=el(Xr,rn.fc);return to})},st.prototype.forward=function(nn){return __awaiter(this,void 0,void 0,function(){var rn;return __generator(this,function(on){switch(on.label){case 0:return rn=this.forwardInput,[4,toNetInput(nn)];case 1:return[2,rn.apply(this,[on.sent()])]}})})},st.prototype.computeFaceDescriptor=function(nn){return __awaiter(this,void 0,void 0,function(){var rn,on,an,sn=this;return __generator(this,function(un){switch(un.label){case 0:return[4,toNetInput(nn)];case 1:return rn=un.sent(),on=Ze(function(){return Ur(sn.forwardInput(rn))}),[4,Promise.all(on.map(function(Xr){return Xr.data()}))];case 2:return an=un.sent(),on.forEach(function(Xr){return Xr.dispose()}),[2,rn.isBatchInput?an:an[0]]}})})},st.prototype.getDefaultModelName=function(){return"face_recognition_model"},st.prototype.extractParamsFromWeigthMap=function(nn){return extractParamsFromWeigthMap$3(nn)},st.prototype.extractParams=function(nn){return extractParams$3(nn)},st}(NeuralNetwork);function extendWithFaceDescriptor(Mt,st){var nn={descriptor:st};return Object.assign({},Mt,nn)}function extendWithAge(Mt,st){var nn={age:st};return Object.assign({},Mt,nn)}function extendWithGender(Mt,st,nn){var rn={gender:st,genderProbability:nn};return Object.assign({},Mt,rn)}var MtcnnOptions=function(){function Mt(st){var nn=st===void 0?{}:st,rn=nn.minFaceSize,on=nn.scaleFactor,an=nn.maxNumScales,sn=nn.scoreThresholds,un=nn.scaleSteps;if(this._name="MtcnnOptions",this._minFaceSize=rn||20,this._scaleFactor=on||.709,this._maxNumScales=an||10,this._scoreThresholds=sn||[.6,.7,.7],this._scaleSteps=un,typeof this._minFaceSize!="number"||this._minFaceSize<0)throw new Error(this._name+" - expected minFaceSize to be a number > 0");if(typeof this._scaleFactor!="number"||this._scaleFactor<=0||this._scaleFactor>=1)throw new Error(this._name+" - expected scaleFactor to be a number between 0 and 1");if(typeof this._maxNumScales!="number"||this._maxNumScales<0)throw new Error(this._name+" - expected maxNumScales to be a number > 0");if(!Array.isArray(this._scoreThresholds)||this._scoreThresholds.length!==3||this._scoreThresholds.some(function(Xr){return typeof Xr!="number"}))throw new Error(this._name+" - expected scoreThresholds to be an array of numbers of length 3");if(this._scaleSteps&&(!Array.isArray(this._scaleSteps)||this._scaleSteps.some(function(Xr){return typeof Xr!="number"})))throw new Error(this._name+" - expected scaleSteps to be an array of numbers")}return Object.defineProperty(Mt.prototype,"minFaceSize",{get:function(){return this._minFaceSize},enumerable:!0,configurable:!0}),Object.defineProperty(Mt.prototype,"scaleFactor",{get:function(){return this._scaleFactor},enumerable:!0,configurable:!0}),Object.defineProperty(Mt.prototype,"maxNumScales",{get:function(){return this._maxNumScales},enumerable:!0,configurable:!0}),Object.defineProperty(Mt.prototype,"scoreThresholds",{get:function(){return this._scoreThresholds},enumerable:!0,configurable:!0}),Object.defineProperty(Mt.prototype,"scaleSteps",{get:function(){return this._scaleSteps},enumerable:!0,configurable:!0}),Mt}();function extractorsFactory$5(Mt,st){function nn(Xr,to){var uo=Ln(Mt(9*Xr),[3,3,Xr,1]),hn=Mn(Mt(Xr)),fn=Mn(Mt(Xr)),co=Mn(Mt(Xr)),lo=Mn(Mt(Xr));return st.push({paramPath:to+"/filters"},{paramPath:to+"/batch_norm_scale"},{paramPath:to+"/batch_norm_offset"},{paramPath:to+"/batch_norm_mean"},{paramPath:to+"/batch_norm_variance"}),{filters:uo,batch_norm_scale:hn,batch_norm_offset:fn,batch_norm_mean:co,batch_norm_variance:lo}}function rn(Xr,to,uo,hn,fn){var co=Ln(Mt(Xr*to*uo*uo),[uo,uo,Xr,to]),lo=Mn(Mt(to));return st.push({paramPath:hn+"/filters"},{paramPath:hn+"/"+(fn?"batch_norm_offset":"bias")}),{filters:co,bias:lo}}function on(Xr,to,uo,hn){var fn=rn(Xr,to,uo,hn,!0),co=fn.filters,lo=fn.bias;return{filters:co,batch_norm_offset:lo}}function an(Xr,to,uo){var hn=nn(Xr,uo+"/depthwise_conv"),fn=on(Xr,to,1,uo+"/pointwise_conv");return{depthwise_conv:hn,pointwise_conv:fn}}function sn(){var Xr=on(3,32,3,"mobilenetv1/conv_0"),to=an(32,64,"mobilenetv1/conv_1"),uo=an(64,128,"mobilenetv1/conv_2"),hn=an(128,128,"mobilenetv1/conv_3"),fn=an(128,256,"mobilenetv1/conv_4"),co=an(256,256,"mobilenetv1/conv_5"),lo=an(256,512,"mobilenetv1/conv_6"),fo=an(512,512,"mobilenetv1/conv_7"),ho=an(512,512,"mobilenetv1/conv_8"),mo=an(512,512,"mobilenetv1/conv_9"),Uo=an(512,512,"mobilenetv1/conv_10"),_d=an(512,512,"mobilenetv1/conv_11"),tp=an(512,1024,"mobilenetv1/conv_12"),ep=an(1024,1024,"mobilenetv1/conv_13");return{conv_0:Xr,conv_1:to,conv_2:uo,conv_3:hn,conv_4:fn,conv_5:co,conv_6:lo,conv_7:fo,conv_8:ho,conv_9:mo,conv_10:Uo,conv_11:_d,conv_12:tp,conv_13:ep}}function un(){var Xr=on(1024,256,1,"prediction_layer/conv_0"),to=on(256,512,3,"prediction_layer/conv_1"),uo=on(512,128,1,"prediction_layer/conv_2"),hn=on(128,256,3,"prediction_layer/conv_3"),fn=on(256,128,1,"prediction_layer/conv_4"),co=on(128,256,3,"prediction_layer/conv_5"),lo=on(256,64,1,"prediction_layer/conv_6"),fo=on(64,128,3,"prediction_layer/conv_7"),ho=rn(512,12,1,"prediction_layer/box_predictor_0/box_encoding_predictor"),mo=rn(512,9,1,"prediction_layer/box_predictor_0/class_predictor"),Uo=rn(1024,24,1,"prediction_layer/box_predictor_1/box_encoding_predictor"),_d=rn(1024,18,1,"prediction_layer/box_predictor_1/class_predictor"),tp=rn(512,24,1,"prediction_layer/box_predictor_2/box_encoding_predictor"),ep=rn(512,18,1,"prediction_layer/box_predictor_2/class_predictor"),np=rn(256,24,1,"prediction_layer/box_predictor_3/box_encoding_predictor"),rp=rn(256,18,1,"prediction_layer/box_predictor_3/class_predictor"),ip=rn(256,24,1,"prediction_layer/box_predictor_4/box_encoding_predictor"),op=rn(256,18,1,"prediction_layer/box_predictor_4/class_predictor"),ap=rn(128,24,1,"prediction_layer/box_predictor_5/box_encoding_predictor"),sp=rn(128,18,1,"prediction_layer/box_predictor_5/class_predictor"),up={box_encoding_predictor:ho,class_predictor:mo},pp={box_encoding_predictor:Uo,class_predictor:_d},lp={box_encoding_predictor:tp,class_predictor:ep},dp={box_encoding_predictor:np,class_predictor:rp},cp={box_encoding_predictor:ip,class_predictor:op},fp={box_encoding_predictor:ap,class_predictor:sp};return{conv_0:Xr,conv_1:to,conv_2:uo,conv_3:hn,conv_4:fn,conv_5:co,conv_6:lo,conv_7:fo,box_predictor_0:up,box_predictor_1:pp,box_predictor_2:lp,box_predictor_3:dp,box_predictor_4:cp,box_predictor_5:fp}}return{extractMobilenetV1Params:sn,extractPredictionLayerParams:un}}function extractParams$2(Mt){var st=[],nn=extractWeightsFactory(Mt),rn=nn.extractWeights,on=nn.getRemainingWeights,an=extractorsFactory$5(rn,st),sn=an.extractMobilenetV1Params,un=an.extractPredictionLayerParams,Xr=sn(),to=un(),uo=Pn(rn(5118*4),[1,5118,4]),hn={extra_dim:uo};if(st.push({paramPath:"output_layer/extra_dim"}),on().length!==0)throw new Error("weights remaing after extract: "+on().length);return{params:{mobilenetv1:Xr,prediction_layer:to,output_layer:hn},paramMappings:st}}function extractorsFactory$4(Mt,st){var nn=extractWeightEntryFactory(Mt,st);function rn(to,uo,hn){var fn=nn(to+"/Conv2d_"+uo+"_pointwise/weights",4,hn+"/filters"),co=nn(to+"/Conv2d_"+uo+"_pointwise/convolution_bn_offset",1,hn+"/batch_norm_offset");return{filters:fn,batch_norm_offset:co}}function on(to){var uo="mobilenetv1/conv_"+to,hn="MobilenetV1/Conv2d_"+to+"_depthwise",fn=uo+"/depthwise_conv",co=uo+"/pointwise_conv",lo=nn(hn+"/depthwise_weights",4,fn+"/filters"),fo=nn(hn+"/BatchNorm/gamma",1,fn+"/batch_norm_scale"),ho=nn(hn+"/BatchNorm/beta",1,fn+"/batch_norm_offset"),mo=nn(hn+"/BatchNorm/moving_mean",1,fn+"/batch_norm_mean"),Uo=nn(hn+"/BatchNorm/moving_variance",1,fn+"/batch_norm_variance");return{depthwise_conv:{filters:lo,batch_norm_scale:fo,batch_norm_offset:ho,batch_norm_mean:mo,batch_norm_variance:Uo},pointwise_conv:rn("MobilenetV1",to,co)}}function an(){return{conv_0:rn("MobilenetV1",0,"mobilenetv1/conv_0"),conv_1:on(1),conv_2:on(2),conv_3:on(3),conv_4:on(4),conv_5:on(5),conv_6:on(6),conv_7:on(7),conv_8:on(8),conv_9:on(9),conv_10:on(10),conv_11:on(11),conv_12:on(12),conv_13:on(13)}}function sn(to,uo){var hn=nn(to+"/weights",4,uo+"/filters"),fn=nn(to+"/biases",1,uo+"/bias");return{filters:hn,bias:fn}}function un(to){var uo=sn("Prediction/BoxPredictor_"+to+"/BoxEncodingPredictor","prediction_layer/box_predictor_"+to+"/box_encoding_predictor"),hn=sn("Prediction/BoxPredictor_"+to+"/ClassPredictor","prediction_layer/box_predictor_"+to+"/class_predictor");return{box_encoding_predictor:uo,class_predictor:hn}}function Xr(){return{conv_0:rn("Prediction",0,"prediction_layer/conv_0"),conv_1:rn("Prediction",1,"prediction_layer/conv_1"),conv_2:rn("Prediction",2,"prediction_layer/conv_2"),conv_3:rn("Prediction",3,"prediction_layer/conv_3"),conv_4:rn("Prediction",4,"prediction_layer/conv_4"),conv_5:rn("Prediction",5,"prediction_layer/conv_5"),conv_6:rn("Prediction",6,"prediction_layer/conv_6"),conv_7:rn("Prediction",7,"prediction_layer/conv_7"),box_predictor_0:un(0),box_predictor_1:un(1),box_predictor_2:un(2),box_predictor_3:un(3),box_predictor_4:un(4),box_predictor_5:un(5)}}return{extractMobilenetV1Params:an,extractPredictionLayerParams:Xr}}function extractParamsFromWeigthMap$2(Mt){var st=[],nn=extractorsFactory$4(Mt,st),rn=nn.extractMobilenetV1Params,on=nn.extractPredictionLayerParams,an=Mt["Output/extra_dim"];if(st.push({originalPath:"Output/extra_dim",paramPath:"output_layer/extra_dim"}),!isTensor3D(an))throw new Error("expected weightMap['Output/extra_dim'] to be a Tensor3D, instead have "+an);var sn={mobilenetv1:rn(),prediction_layer:on(),output_layer:{extra_dim:an}};return disposeUnusedWeightTensors(Mt,st),{params:sn,paramMappings:st}}function pointwiseConvLayer(Mt,st,nn){return Ze(function(){var rn=qc(Mt,st.filters,nn,"same");return rn=rc(rn,st.batch_norm_offset),hu(rn,0,6)})}var epsilon$1=.0010000000474974513;function depthwiseConvLayer(Mt,st,nn){return Ze(function(){var rn=Yc(Mt,st.filters,nn,"same");return rn=ju(rn,st.batch_norm_mean,st.batch_norm_variance,st.batch_norm_offset,st.batch_norm_scale,epsilon$1),hu(rn,0,6)})}function getStridesForLayerIdx(Mt){return[2,4,6,12].some(function(st){return st===Mt})?[2,2]:[1,1]}function mobileNetV1(Mt,st){return Ze(function(){var nn=null,rn=pointwiseConvLayer(Mt,st.conv_0,[2,2]),on=[st.conv_1,st.conv_2,st.conv_3,st.conv_4,st.conv_5,st.conv_6,st.conv_7,st.conv_8,st.conv_9,st.conv_10,st.conv_11,st.conv_12,st.conv_13];if(on.forEach(function(an,sn){var un=sn+1,Xr=getStridesForLayerIdx(un);rn=depthwiseConvLayer(rn,an.depthwise_conv,Xr),rn=pointwiseConvLayer(rn,an.pointwise_conv,[1,1]),un===11&&(nn=rn)}),nn===null)throw new Error("mobileNetV1 - output of conv layer 11 is null");return{out:rn,conv11:nn}})}function nonMaxSuppression(Mt,st,nn,rn,on){var an=Mt.shape[0],sn=Math.min(nn,an),un=st.map(function(uo,hn){return{score:uo,boxIndex:hn}}).filter(function(uo){return uo.score>on}).sort(function(uo,hn){return hn.score-uo.score}),Xr=function(uo){return uo<=rn?1:0},to=[];return un.forEach(function(uo){if(!(to.length>=sn)){for(var hn=uo.score,fn=to.length-1;fn>=0;--fn){var co=IOU(Mt,uo.boxIndex,to[fn]);if(co!==0&&(uo.score*=Xr(co),uo.score<=on))break}hn===uo.score&&to.push(uo.boxIndex)}}),to}function IOU(Mt,st,nn){var rn=Mt.arraySync(),on=Math.min(rn[st][0],rn[st][2]),an=Math.min(rn[st][1],rn[st][3]),sn=Math.max(rn[st][0],rn[st][2]),un=Math.max(rn[st][1],rn[st][3]),Xr=Math.min(rn[nn][0],rn[nn][2]),to=Math.min(rn[nn][1],rn[nn][3]),uo=Math.max(rn[nn][0],rn[nn][2]),hn=Math.max(rn[nn][1],rn[nn][3]),fn=(sn-on)*(un-an),co=(uo-Xr)*(hn-to);if(fn<=0||co<=0)return 0;var lo=Math.max(on,Xr),fo=Math.max(an,to),ho=Math.min(sn,uo),mo=Math.min(un,hn),Uo=Math.max(ho-lo,0)*Math.max(mo-fo,0);return Uo/(fn+co-Uo)}function getCenterCoordinatesAndSizesLayer(Mt){var st=Ur(Wl(Mt,[1,0])),nn=[Cc(st[2],st[0]),Cc(st[3],st[1])],rn=[rc(st[0],sc(nn[0],On(2))),rc(st[1],sc(nn[1],On(2)))];return{sizes:nn,centers:rn}}function decodeBoxesLayer(Mt,st){var nn=getCenterCoordinatesAndSizesLayer(Mt),rn=nn.sizes,on=nn.centers,an=Ur(Wl(st,[1,0])),sn=sc(gc(vu(sc(an[2],On(5))),rn[0]),On(2)),un=rc(gc(sc(an[0],On(10)),rn[0]),on[0]),Xr=sc(gc(vu(sc(an[3],On(5))),rn[1]),On(2)),to=rc(gc(sc(an[1],On(10)),rn[1]),on[1]);return Wl(Pr([Cc(un,sn),Cc(to,Xr),rc(un,sn),rc(to,Xr)]),[1,0])}function outputLayer(Mt,st,nn){return Ze(function(){var rn=Mt.shape[0],on=decodeBoxesLayer(Or(Lr(nn.extra_dim,[rn,1,1]),[-1,4]),Or(Mt,[-1,4]));on=Or(on,[rn,on.shape[0]/rn,4]);var an=Iu(ml(st,[0,0,1],[-1,-1,-1])),sn=ml(an,[0,0,0],[-1,-1,1]);sn=Or(sn,[rn,sn.shape[1]]);var un=Ur(on),Xr=Ur(sn);return{boxes:un,scores:Xr}})}function boxPredictionLayer(Mt,st){return Ze(function(){var nn=Mt.shape[0],rn=Or(convLayer$1(Mt,st.box_encoding_predictor),[nn,-1,1,4]),on=Or(convLayer$1(Mt,st.class_predictor),[nn,-1,3]);return{boxPredictionEncoding:rn,classPrediction:on}})}function predictionLayer(Mt,st,nn){return Ze(function(){var rn=pointwiseConvLayer(Mt,nn.conv_0,[1,1]),on=pointwiseConvLayer(rn,nn.conv_1,[2,2]),an=pointwiseConvLayer(on,nn.conv_2,[1,1]),sn=pointwiseConvLayer(an,nn.conv_3,[2,2]),un=pointwiseConvLayer(sn,nn.conv_4,[1,1]),Xr=pointwiseConvLayer(un,nn.conv_5,[2,2]),to=pointwiseConvLayer(Xr,nn.conv_6,[1,1]),uo=pointwiseConvLayer(to,nn.conv_7,[2,2]),hn=boxPredictionLayer(st,nn.box_predictor_0),fn=boxPredictionLayer(Mt,nn.box_predictor_1),co=boxPredictionLayer(on,nn.box_predictor_2),lo=boxPredictionLayer(sn,nn.box_predictor_3),fo=boxPredictionLayer(Xr,nn.box_predictor_4),ho=boxPredictionLayer(uo,nn.box_predictor_5),mo=Yn([hn.boxPredictionEncoding,fn.boxPredictionEncoding,co.boxPredictionEncoding,lo.boxPredictionEncoding,fo.boxPredictionEncoding,ho.boxPredictionEncoding],1),Uo=Yn([hn.classPrediction,fn.classPrediction,co.classPrediction,lo.classPrediction,fo.classPrediction,ho.classPrediction],1);return{boxPredictions:mo,classPredictions:Uo}})}var SsdMobilenetv1Options=function(){function Mt(st){var nn=st===void 0?{}:st,rn=nn.minConfidence,on=nn.maxResults;if(this._name="SsdMobilenetv1Options",this._minConfidence=rn||.5,this._maxResults=on||100,typeof this._minConfidence!="number"||this._minConfidence<=0||this._minConfidence>=1)throw new Error(this._name+" - expected minConfidence to be a number between 0 and 1");if(typeof this._maxResults!="number")throw new Error(this._name+" - expected maxResults to be a number")}return Object.defineProperty(Mt.prototype,"minConfidence",{get:function(){return this._minConfidence},enumerable:!0,configurable:!0}),Object.defineProperty(Mt.prototype,"maxResults",{get:function(){return this._maxResults},enumerable:!0,configurable:!0}),Mt}(),SsdMobilenetv1=function(Mt){__extends(st,Mt);function st(){return Mt.call(this,"SsdMobilenetv1")||this}return st.prototype.forwardInput=function(nn){var rn=this.params;if(!rn)throw new Error("SsdMobilenetv1 - load model before inference");return Ze(function(){var on=nn.toBatchTensor(512,!1).toFloat(),an=Cc(gc(on,On(.007843137718737125)),On(1)),sn=mobileNetV1(an,rn.mobilenetv1),un=predictionLayer(sn.out,sn.conv11,rn.prediction_layer),Xr=un.boxPredictions,to=un.classPredictions;return outputLayer(Xr,to,rn.output_layer)})},st.prototype.forward=function(nn){return __awaiter(this,void 0,void 0,function(){var rn;return __generator(this,function(on){switch(on.label){case 0:return rn=this.forwardInput,[4,toNetInput(nn)];case 1:return[2,rn.apply(this,[on.sent()])]}})})},st.prototype.locateFaces=function(nn,rn){return rn===void 0&&(rn={}),__awaiter(this,void 0,void 0,function(){var on,an,sn,un,Xr,to,uo,hn,fn,co,lo,fo,ho,mo,Uo,_d,tp,ep,np,rp,ip;return __generator(this,function(op){switch(op.label){case 0:return on=new SsdMobilenetv1Options(rn),an=on.maxResults,sn=on.minConfidence,[4,toNetInput(nn)];case 1:for(un=op.sent(),Xr=this.forwardInput(un),to=Xr.boxes,uo=Xr.scores,hn=to[0],fn=uo[0],co=1;co<to.length;co++)to[co].dispose(),uo[co].dispose();return ho=(fo=Array).from,[4,fn.data()];case 2:return lo=ho.apply(fo,[op.sent()]),mo=.5,Uo=nonMaxSuppression(hn,lo,an,mo,sn),_d=un.getReshapedInputDimensions(0),tp=un.inputSize,ep=tp/_d.width,np=tp/_d.height,rp=hn.arraySync(),ip=Uo.map(function(ap){var sp=[Math.max(0,rp[ap][0]),Math.min(1,rp[ap][2])].map(function(fp){return fp*np}),up=sp[0],pp=sp[1],lp=[Math.max(0,rp[ap][1]),Math.min(1,rp[ap][3])].map(function(fp){return fp*ep}),dp=lp[0],cp=lp[1];return new FaceDetection(lo[ap],new Rect(dp,up,cp-dp,pp-up),{height:un.getInputHeight(0),width:un.getInputWidth(0)})}),hn.dispose(),fn.dispose(),[2,ip]}})})},st.prototype.getDefaultModelName=function(){return"ssd_mobilenetv1_model"},st.prototype.extractParamsFromWeigthMap=function(nn){return extractParamsFromWeigthMap$2(nn)},st.prototype.extractParams=function(nn){return extractParams$2(nn)},st}(NeuralNetwork);(function(Mt){__extends(st,Mt);function st(){return Mt!==null&&Mt.apply(this,arguments)||this}return st})(SsdMobilenetv1);var IOU_THRESHOLD$1=.4,BOX_ANCHORS$1=[new Point(.738768,.874946),new Point(2.42204,2.65704),new Point(4.30971,7.04493),new Point(10.246,4.59428),new Point(12.6868,11.8741)],BOX_ANCHORS_SEPARABLE=[new Point(1.603231,2.094468),new Point(6.041143,7.080126),new Point(2.882459,3.518061),new Point(4.266906,5.178857),new Point(9.041765,10.66308)],MEAN_RGB_SEPARABLE=[117.001,114.697,97.404],DEFAULT_MODEL_NAME="tiny_yolov2_model",DEFAULT_MODEL_NAME_SEPARABLE_CONV="tiny_yolov2_separable_conv_model",isNumber$5=function(Mt){return typeof Mt=="number"};function validateConfig(Mt){if(!Mt)throw new Error("invalid config: "+Mt);if(typeof Mt.withSeparableConvs!="boolean")throw new Error("config.withSeparableConvs has to be a boolean, have: "+Mt.withSeparableConvs);if(!isNumber$5(Mt.iouThreshold)||Mt.iouThreshold<0||Mt.iouThreshold>1)throw new Error("config.iouThreshold has to be a number between [0, 1], have: "+Mt.iouThreshold);if(!Array.isArray(Mt.classes)||!Mt.classes.length||!Mt.classes.every(function(st){return typeof st=="string"}))throw new Error("config.classes has to be an array class names: string[], have: "+JSON.stringify(Mt.classes));if(!Array.isArray(Mt.anchors)||!Mt.anchors.length||!Mt.anchors.map(function(st){return st||{}}).every(function(st){return isNumber$5(st.x)&&isNumber$5(st.y)}))throw new Error("config.anchors has to be an array of { x: number, y: number }, have: "+JSON.stringify(Mt.anchors));if(Mt.meanRgb&&(!Array.isArray(Mt.meanRgb)||Mt.meanRgb.length!==3||!Mt.meanRgb.every(isNumber$5)))throw new Error("config.meanRgb has to be an array of shape [number, number, number], have: "+JSON.stringify(Mt.meanRgb))}function leaky(Mt){return Ze(function(){var st=gc(Mt,On(.10000000149011612));return rc(Bl(Cc(Mt,st)),st)})}function convWithBatchNorm(Mt,st){return Ze(function(){var nn=Ir(Mt,[[0,0],[1,1],[1,1],[0,0]]);return nn=qc(nn,st.conv.filters,[1,1],"valid"),nn=Cc(nn,st.bn.sub),nn=gc(nn,st.bn.truediv),nn=rc(nn,st.conv.bias),leaky(nn)})}function depthwiseSeparableConv(Mt,st){return Ze(function(){var nn=Ir(Mt,[[0,0],[1,1],[1,1],[0,0]]);return nn=Jc(nn,st.depthwise_filter,st.pointwise_filter,[1,1],"valid"),nn=rc(nn,st.bias),leaky(nn)})}function extractorsFactory$3(Mt,st){var nn=extractConvParamsFactory(Mt,st);function rn(sn,un){var Xr=Mn(Mt(sn)),to=Mn(Mt(sn));return st.push({paramPath:un+"/sub"},{paramPath:un+"/truediv"}),{sub:Xr,truediv:to}}function on(sn,un,Xr){var to=nn(sn,un,3,Xr+"/conv"),uo=rn(un,Xr+"/bn");return{conv:to,bn:uo}}var an=extractSeparableConvParamsFactory(Mt,st);return{extractConvParams:nn,extractConvWithBatchNormParams:on,extractSeparableConvParams:an}}function extractParams$1(Mt,st,nn,rn){var on=extractWeightsFactory(Mt),an=on.extractWeights,sn=on.getRemainingWeights,un=[],Xr=extractorsFactory$3(an,un),to=Xr.extractConvParams,uo=Xr.extractConvWithBatchNormParams,hn=Xr.extractSeparableConvParams,fn;if(st.withSeparableConvs){var co=rn[0],lo=rn[1],fo=rn[2],ho=rn[3],mo=rn[4],Uo=rn[5],_d=rn[6],tp=rn[7],ep=rn[8],np=st.isFirstLayerConv2d?to(co,lo,3,"conv0"):hn(co,lo,"conv0"),rp=hn(lo,fo,"conv1"),ip=hn(fo,ho,"conv2"),op=hn(ho,mo,"conv3"),ap=hn(mo,Uo,"conv4"),sp=hn(Uo,_d,"conv5"),up=tp?hn(_d,tp,"conv6"):void 0,pp=ep?hn(tp,ep,"conv7"):void 0,lp=to(ep||tp||_d,5*nn,1,"conv8");fn={conv0:np,conv1:rp,conv2:ip,conv3:op,conv4:ap,conv5:sp,conv6:up,conv7:pp,conv8:lp}}else{var co=rn[0],lo=rn[1],fo=rn[2],ho=rn[3],mo=rn[4],Uo=rn[5],_d=rn[6],tp=rn[7],ep=rn[8],np=uo(co,lo,"conv0"),rp=uo(lo,fo,"conv1"),ip=uo(fo,ho,"conv2"),op=uo(ho,mo,"conv3"),ap=uo(mo,Uo,"conv4"),sp=uo(Uo,_d,"conv5"),up=uo(_d,tp,"conv6"),pp=uo(tp,ep,"conv7"),lp=to(ep,5*nn,1,"conv8");fn={conv0:np,conv1:rp,conv2:ip,conv3:op,conv4:ap,conv5:sp,conv6:up,conv7:pp,conv8:lp}}if(sn().length!==0)throw new Error("weights remaing after extract: "+sn().length);return{params:fn,paramMappings:un}}function extractorsFactory$2(Mt,st){var nn=extractWeightEntryFactory(Mt,st);function rn(un){var Xr=nn(un+"/sub",1),to=nn(un+"/truediv",1);return{sub:Xr,truediv:to}}function on(un){var Xr=nn(un+"/filters",4),to=nn(un+"/bias",1);return{filters:Xr,bias:to}}function an(un){var Xr=on(un+"/conv"),to=rn(un+"/bn");return{conv:Xr,bn:to}}var sn=loadSeparableConvParamsFactory(nn);return{extractConvParams:on,extractConvWithBatchNormParams:an,extractSeparableConvParams:sn}}function extractParamsFromWeigthMap$1(Mt,st){var nn=[],rn=extractorsFactory$2(Mt,nn),on=rn.extractConvParams,an=rn.extractConvWithBatchNormParams,sn=rn.extractSeparableConvParams,un;if(st.withSeparableConvs){var Xr=st.filterSizes&&st.filterSizes.length||9;un={conv0:st.isFirstLayerConv2d?on("conv0"):sn("conv0"),conv1:sn("conv1"),conv2:sn("conv2"),conv3:sn("conv3"),conv4:sn("conv4"),conv5:sn("conv5"),conv6:Xr>7?sn("conv6"):void 0,conv7:Xr>8?sn("conv7"):void 0,conv8:on("conv8")}}else un={conv0:an("conv0"),conv1:an("conv1"),conv2:an("conv2"),conv3:an("conv3"),conv4:an("conv4"),conv5:an("conv5"),conv6:an("conv6"),conv7:an("conv7"),conv8:on("conv8")};return disposeUnusedWeightTensors(Mt,nn),{params:un,paramMappings:nn}}var TinyYolov2SizeType;(function(Mt){Mt[Mt.XS=224]="XS",Mt[Mt.SM=320]="SM",Mt[Mt.MD=416]="MD",Mt[Mt.LG=608]="LG"})(TinyYolov2SizeType||(TinyYolov2SizeType={}));var TinyYolov2Options=function(){function Mt(st){var nn=st===void 0?{}:st,rn=nn.inputSize,on=nn.scoreThreshold;if(this._name="TinyYolov2Options",this._inputSize=rn||416,this._scoreThreshold=on||.5,typeof this._inputSize!="number"||this._inputSize%32!==0)throw new Error(this._name+" - expected inputSize to be a number divisible by 32");if(typeof this._scoreThreshold!="number"||this._scoreThreshold<=0||this._scoreThreshold>=1)throw new Error(this._name+" - expected scoreThreshold to be a number between 0 and 1")}return Object.defineProperty(Mt.prototype,"inputSize",{get:function(){return this._inputSize},enumerable:!0,configurable:!0}),Object.defineProperty(Mt.prototype,"scoreThreshold",{get:function(){return this._scoreThreshold},enumerable:!0,configurable:!0}),Mt}(),TinyYolov2Base=function(Mt){__extends(st,Mt);function st(nn){var rn=Mt.call(this,"TinyYolov2")||this;return validateConfig(nn),rn._config=nn,rn}return Object.defineProperty(st.prototype,"config",{get:function(){return this._config},enumerable:!0,configurable:!0}),Object.defineProperty(st.prototype,"withClassScores",{get:function(){return this.config.withClassScores||this.config.classes.length>1},enumerable:!0,configurable:!0}),Object.defineProperty(st.prototype,"boxEncodingSize",{get:function(){return 5+(this.withClassScores?this.config.classes.length:0)},enumerable:!0,configurable:!0}),st.prototype.runTinyYolov2=function(nn,rn){var on=convWithBatchNorm(nn,rn.conv0);return on=hl(on,[2,2],[2,2],"same"),on=convWithBatchNorm(on,rn.conv1),on=hl(on,[2,2],[2,2],"same"),on=convWithBatchNorm(on,rn.conv2),on=hl(on,[2,2],[2,2],"same"),on=convWithBatchNorm(on,rn.conv3),on=hl(on,[2,2],[2,2],"same"),on=convWithBatchNorm(on,rn.conv4),on=hl(on,[2,2],[2,2],"same"),on=convWithBatchNorm(on,rn.conv5),on=hl(on,[2,2],[1,1],"same"),on=convWithBatchNorm(on,rn.conv6),on=convWithBatchNorm(on,rn.conv7),convLayer$1(on,rn.conv8,"valid",!1)},st.prototype.runMobilenet=function(nn,rn){var on=this.config.isFirstLayerConv2d?leaky(convLayer$1(nn,rn.conv0,"valid",!1)):depthwiseSeparableConv(nn,rn.conv0);return on=hl(on,[2,2],[2,2],"same"),on=depthwiseSeparableConv(on,rn.conv1),on=hl(on,[2,2],[2,2],"same"),on=depthwiseSeparableConv(on,rn.conv2),on=hl(on,[2,2],[2,2],"same"),on=depthwiseSeparableConv(on,rn.conv3),on=hl(on,[2,2],[2,2],"same"),on=depthwiseSeparableConv(on,rn.conv4),on=hl(on,[2,2],[2,2],"same"),on=depthwiseSeparableConv(on,rn.conv5),on=hl(on,[2,2],[1,1],"same"),on=rn.conv6?depthwiseSeparableConv(on,rn.conv6):on,on=rn.conv7?depthwiseSeparableConv(on,rn.conv7):on,convLayer$1(on,rn.conv8,"valid",!1)},st.prototype.forwardInput=function(nn,rn){var on=this,an=this.params;if(!an)throw new Error("TinyYolov2 - load model before inference");return Ze(function(){var sn=nn.toBatchTensor(rn,!1).toFloat();return sn=on.config.meanRgb?normalize$2(sn,on.config.meanRgb):sn,sn=sn.div(On(256)),on.config.withSeparableConvs?on.runMobilenet(sn,an):on.runTinyYolov2(sn,an)})},st.prototype.forward=function(nn,rn){return __awaiter(this,void 0,void 0,function(){var on;return __generator(this,function(an){switch(an.label){case 0:return on=this.forwardInput,[4,toNetInput(nn)];case 1:return[4,on.apply(this,[an.sent(),rn])];case 2:return[2,an.sent()]}})})},st.prototype.detect=function(nn,rn){return rn===void 0&&(rn={}),__awaiter(this,void 0,void 0,function(){var on,an,sn,un,Xr,to,uo,hn,fn,co,lo,fo,ho,mo,Uo=this;return __generator(this,function(_d){switch(_d.label){case 0:return on=new TinyYolov2Options(rn),an=on.inputSize,sn=on.scoreThreshold,[4,toNetInput(nn)];case 1:return un=_d.sent(),[4,this.forwardInput(un,an)];case 2:return Xr=_d.sent(),to=Ze(function(){return Ur(Xr)[0].expandDims()}),uo={width:un.getInputWidth(0),height:un.getInputHeight(0)},[4,this.extractBoxes(to,un.getReshapedInputDimensions(0),sn)];case 3:return hn=_d.sent(),Xr.dispose(),to.dispose(),fn=hn.map(function(tp){return tp.box}),co=hn.map(function(tp){return tp.score}),lo=hn.map(function(tp){return tp.classScore}),fo=hn.map(function(tp){return Uo.config.classes[tp.label]}),ho=nonMaxSuppression$1(fn.map(function(tp){return tp.rescale(an)}),co,this.config.iouThreshold,!0),mo=ho.map(function(tp){return new ObjectDetection(co[tp],lo[tp],fo[tp],fn[tp],uo)}),[2,mo]}})})},st.prototype.getDefaultModelName=function(){return""},st.prototype.extractParamsFromWeigthMap=function(nn){return extractParamsFromWeigthMap$1(nn,this.config)},st.prototype.extractParams=function(nn){var rn=this.config.filterSizes||st.DEFAULT_FILTER_SIZES,on=rn?rn.length:void 0;if(on!==7&&on!==8&&on!==9)throw new Error("TinyYolov2 - expected 7 | 8 | 9 convolutional filters, but found "+on+" filterSizes in config");return extractParams$1(nn,this.config,this.boxEncodingSize,rn)},st.prototype.extractBoxes=function(nn,rn,on){return __awaiter(this,void 0,void 0,function(){var an,sn,un,Xr,to,uo,hn,fn,co,lo,fo,ho,mo,Uo,_d,tp,ep,np,rp,ip,op,ap,sp,up,pp,lp,dp,cp,fp,gp=this;return __generator(this,function(mp){switch(mp.label){case 0:return an=rn.width,sn=rn.height,un=Math.max(an,sn),Xr=un/an,to=un/sn,uo=nn.shape[1],hn=this.config.anchors.length,fn=Ze(function(){var xp=nn.reshape([uo,uo,hn,gp.boxEncodingSize]),_p=xp.slice([0,0,0,0],[uo,uo,hn,4]),Sp=xp.slice([0,0,0,4],[uo,uo,hn,1]),Cp=gp.withClassScores?go(xp.slice([0,0,0,5],[uo,uo,hn,gp.config.classes.length]),3):On(0);return[_p,Sp,Cp]}),co=fn[0],lo=fn[1],fo=fn[2],ho=[],[4,lo.array()];case 1:return mo=mp.sent(),[4,co.array()];case 2:Uo=mp.sent(),_d=0,mp.label=3;case 3:if(!(_d<uo))return[3,12];tp=0,mp.label=4;case 4:if(!(tp<uo))return[3,11];ep=0,mp.label=5;case 5:return ep<hn?(np=sigmoid(mo[_d][tp][ep][0]),!on||np>on?(rp=(tp+sigmoid(Uo[_d][tp][ep][0]))/uo*Xr,ip=(_d+sigmoid(Uo[_d][tp][ep][1]))/uo*to,op=Math.exp(Uo[_d][tp][ep][2])*this.config.anchors[ep].x/uo*Xr,ap=Math.exp(Uo[_d][tp][ep][3])*this.config.anchors[ep].y/uo*to,sp=rp-op/2,up=ip-ap/2,pp={row:_d,col:tp,anchor:ep},this.withClassScores?[4,this.extractPredictedClass(fo,pp)]:[3,7]):[3,9]):[3,10];case 6:return fp=mp.sent(),[3,8];case 7:fp={classScore:1,label:0},mp.label=8;case 8:lp=fp,dp=lp.classScore,cp=lp.label,ho.push(__assign$1({box:new BoundingBox(sp,up,sp+op,up+ap),score:np,classScore:np*dp,label:cp},pp)),mp.label=9;case 9:return ep++,[3,5];case 10:return tp++,[3,4];case 11:return _d++,[3,3];case 12:return co.dispose(),lo.dispose(),fo.dispose(),[2,ho]}})})},st.prototype.extractPredictedClass=function(nn,rn){return __awaiter(this,void 0,void 0,function(){var on,an,sn,un;return __generator(this,function(Xr){switch(Xr.label){case 0:return on=rn.row,an=rn.col,sn=rn.anchor,[4,nn.array()];case 1:return un=Xr.sent(),[2,Array(this.config.classes.length).fill(0).map(function(to,uo){return un[on][an][sn][uo]}).map(function(to,uo){return{classScore:to,label:uo}}).reduce(function(to,uo){return to.classScore>uo.classScore?to:uo})]}})})},st.DEFAULT_FILTER_SIZES=[3,16,32,64,128,256,512,1024,1024],st}(NeuralNetwork),TinyYolov2=function(Mt){__extends(st,Mt);function st(nn){nn===void 0&&(nn=!0);var rn=this,on=Object.assign({},{withSeparableConvs:nn,iouThreshold:IOU_THRESHOLD$1,classes:["face"]},nn?{anchors:BOX_ANCHORS_SEPARABLE,meanRgb:MEAN_RGB_SEPARABLE}:{anchors:BOX_ANCHORS$1,withClassScores:!0});return rn=Mt.call(this,on)||this,rn}return Object.defineProperty(st.prototype,"withSeparableConvs",{get:function(){return this.config.withSeparableConvs},enumerable:!0,configurable:!0}),Object.defineProperty(st.prototype,"anchors",{get:function(){return this.config.anchors},enumerable:!0,configurable:!0}),st.prototype.locateFaces=function(nn,rn){return __awaiter(this,void 0,void 0,function(){var on;return __generator(this,function(an){switch(an.label){case 0:return[4,this.detect(nn,rn)];case 1:return on=an.sent(),[2,on.map(function(sn){return new FaceDetection(sn.score,sn.relativeBox,{width:sn.imageWidth,height:sn.imageHeight})})]}})})},st.prototype.getDefaultModelName=function(){return this.withSeparableConvs?DEFAULT_MODEL_NAME_SEPARABLE_CONV:DEFAULT_MODEL_NAME},st.prototype.extractParamsFromWeigthMap=function(nn){return Mt.prototype.extractParamsFromWeigthMap.call(this,nn)},st}(TinyYolov2Base),TinyFaceDetectorOptions=function(Mt){__extends(st,Mt);function st(){var nn=Mt!==null&&Mt.apply(this,arguments)||this;return nn._name="TinyFaceDetectorOptions",nn}return st}(TinyYolov2Options),ComposableTask=function(){function Mt(){}return Mt.prototype.then=function(st){return __awaiter(this,void 0,void 0,function(){var nn;return __generator(this,function(rn){switch(rn.label){case 0:return nn=st,[4,this.run()];case 1:return[2,nn.apply(void 0,[rn.sent()])]}})})},Mt.prototype.run=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(st){throw new Error("ComposableTask - run is not implemented")})})},Mt}();function extractAllFacesAndComputeResults(Mt,st,nn,rn,on){return on===void 0&&(on=function(an){var sn=an.alignedRect;return sn}),__awaiter(this,void 0,void 0,function(){var an,sn,un,Xr,to;return __generator(this,function(uo){switch(uo.label){case 0:return an=Mt.map(function(hn){return isWithFaceLandmarks(hn)?on(hn):hn.detection}),un=rn,un?[3,5]:st instanceof wt?[4,extractFaceTensors(st,an)]:[3,2];case 1:return Xr=uo.sent(),[3,4];case 2:return[4,extractFaces(st,an)];case 3:Xr=uo.sent(),uo.label=4;case 4:un=Xr,uo.label=5;case 5:return sn=un,[4,nn(sn)];case 6:return to=uo.sent(),sn.forEach(function(hn){return hn instanceof wt&&hn.dispose()}),[2,to]}})})}function extractSingleFaceAndComputeResult(Mt,st,nn,rn,on){return __awaiter(this,void 0,void 0,function(){var an=this;return __generator(this,function(sn){return[2,extractAllFacesAndComputeResults([Mt],st,function(un){return __awaiter(an,void 0,void 0,function(){return __generator(this,function(Xr){return[2,nn(un[0])]})})},rn,on)]})})}function bgrToRgbTensor(Mt){return Ze(function(){return Pr(Ur(Mt,3).reverse(),3)})}var CELL_STRIDE=2,CELL_SIZE=12;function extractorsFactory$1(Mt,st){var nn=extractConvParamsFactory(Mt,st),rn=extractFCParamsFactory(Mt,st);function on(to,uo){var hn=Mn(Mt(to));return st.push({paramPath:uo}),hn}function an(to,uo,hn){hn===void 0&&(hn=!1);var fn=nn(to[0],to[1],3,uo+"/conv1"),co=on(to[1],uo+"/prelu1_alpha"),lo=nn(to[1],to[2],3,uo+"/conv2"),fo=on(to[2],uo+"/prelu2_alpha"),ho=nn(to[2],to[3],hn?2:3,uo+"/conv3"),mo=on(to[3],uo+"/prelu3_alpha");return{conv1:fn,prelu1_alpha:co,conv2:lo,prelu2_alpha:fo,conv3:ho,prelu3_alpha:mo}}function sn(){var to=an([3,10,16,32],"pnet"),uo=nn(32,2,1,"pnet/conv4_1"),hn=nn(32,4,1,"pnet/conv4_2");return __assign$1(__assign$1({},to),{conv4_1:uo,conv4_2:hn})}function un(){var to=an([3,28,48,64],"rnet",!0),uo=rn(576,128,"rnet/fc1"),hn=on(128,"rnet/prelu4_alpha"),fn=rn(128,2,"rnet/fc2_1"),co=rn(128,4,"rnet/fc2_2");return __assign$1(__assign$1({},to),{fc1:uo,prelu4_alpha:hn,fc2_1:fn,fc2_2:co})}function Xr(){var to=an([3,32,64,64],"onet"),uo=nn(64,128,2,"onet/conv4"),hn=on(128,"onet/prelu4_alpha"),fn=rn(1152,256,"onet/fc1"),co=on(256,"onet/prelu5_alpha"),lo=rn(256,2,"onet/fc2_1"),fo=rn(256,4,"onet/fc2_2"),ho=rn(256,10,"onet/fc2_3");return __assign$1(__assign$1({},to),{conv4:uo,prelu4_alpha:hn,fc1:fn,prelu5_alpha:co,fc2_1:lo,fc2_2:fo,fc2_3:ho})}return{extractPNetParams:sn,extractRNetParams:un,extractONetParams:Xr}}function extractParams(Mt){var st=extractWeightsFactory(Mt),nn=st.extractWeights,rn=st.getRemainingWeights,on=[],an=extractorsFactory$1(nn,on),sn=an.extractPNetParams,un=an.extractRNetParams,Xr=an.extractONetParams,to=sn(),uo=un(),hn=Xr();if(rn().length!==0)throw new Error("weights remaing after extract: "+rn().length);return{params:{pnet:to,rnet:uo,onet:hn},paramMappings:on}}function extractorsFactory(Mt,st){var nn=extractWeightEntryFactory(Mt,st);function rn(uo){var hn=nn(uo+"/weights",4,uo+"/filters"),fn=nn(uo+"/bias",1);return{filters:hn,bias:fn}}function on(uo){var hn=nn(uo+"/weights",2),fn=nn(uo+"/bias",1);return{weights:hn,bias:fn}}function an(uo){return nn(uo,1)}function sn(uo){var hn=rn(uo+"/conv1"),fn=an(uo+"/prelu1_alpha"),co=rn(uo+"/conv2"),lo=an(uo+"/prelu2_alpha"),fo=rn(uo+"/conv3"),ho=an(uo+"/prelu3_alpha");return{conv1:hn,prelu1_alpha:fn,conv2:co,prelu2_alpha:lo,conv3:fo,prelu3_alpha:ho}}function un(){var uo=sn("pnet"),hn=rn("pnet/conv4_1"),fn=rn("pnet/conv4_2");return __assign$1(__assign$1({},uo),{conv4_1:hn,conv4_2:fn})}function Xr(){var uo=sn("rnet"),hn=on("rnet/fc1"),fn=an("rnet/prelu4_alpha"),co=on("rnet/fc2_1"),lo=on("rnet/fc2_2");return __assign$1(__assign$1({},uo),{fc1:hn,prelu4_alpha:fn,fc2_1:co,fc2_2:lo})}function to(){var uo=sn("onet"),hn=rn("onet/conv4"),fn=an("onet/prelu4_alpha"),co=on("onet/fc1"),lo=an("onet/prelu5_alpha"),fo=on("onet/fc2_1"),ho=on("onet/fc2_2"),mo=on("onet/fc2_3");return __assign$1(__assign$1({},uo),{conv4:hn,prelu4_alpha:fn,fc1:co,prelu5_alpha:lo,fc2_1:fo,fc2_2:ho,fc2_3:mo})}return{extractPNetParams:un,extractRNetParams:Xr,extractONetParams:to}}function extractParamsFromWeigthMap(Mt){var st=[],nn=extractorsFactory(Mt,st),rn=nn.extractPNetParams,on=nn.extractRNetParams,an=nn.extractONetParams,sn=rn(),un=on(),Xr=an();return disposeUnusedWeightTensors(Mt,st),{params:{pnet:sn,rnet:un,onet:Xr},paramMappings:st}}function getSizesForScale(Mt,st){var nn=st[0],rn=st[1];return{height:Math.floor(nn*Mt),width:Math.floor(rn*Mt)}}function pyramidDown(Mt,st,nn){for(var rn=nn[0],on=nn[1],an=CELL_SIZE/Mt,sn=[],un=Math.min(rn,on)*an,Xr=0;un>=12;)sn.push(an*Math.pow(st,Xr)),un=un*st,Xr+=1;return sn}var MtcnnBox=function(Mt){__extends(st,Mt);function st(nn,rn,on,an){return Mt.call(this,{left:nn,top:rn,right:on,bottom:an},!0)||this}return st}(Box);function normalize$1(Mt){return Ze(function(){return gc(Cc(Mt,On(127.5)),On(.0078125))})}function prelu(Mt,st){return Ze(function(){return rc(Bl(Mt),gc(st,wu(Bl(wu(Mt)))))})}function sharedLayer(Mt,st,nn){return nn===void 0&&(nn=!1),Ze(function(){var rn=convLayer$1(Mt,st.conv1,"valid");return rn=prelu(rn,st.prelu1_alpha),rn=hl(rn,nn?[2,2]:[3,3],[2,2],"same"),rn=convLayer$1(rn,st.conv2,"valid"),rn=prelu(rn,st.prelu2_alpha),rn=nn?rn:hl(rn,[3,3],[2,2],"valid"),rn=convLayer$1(rn,st.conv3,"valid"),rn=prelu(rn,st.prelu3_alpha),rn})}function PNet(Mt,st){return Ze(function(){var nn=sharedLayer(Mt,st,!0),rn=convLayer$1(nn,st.conv4_1,"valid"),on=wr(Sl(rn,3),3),an=go(Cc(rn,on),3),sn=convLayer$1(nn,st.conv4_2,"valid");return{prob:an,regions:sn}})}function rescaleAndNormalize(Mt,st){return Ze(function(){var nn=getSizesForScale(st,Mt.shape.slice(1)),rn=nn.height,on=nn.width,an=Oh.resizeBilinear(Mt,[rn,on]),sn=normalize$1(an);return Wl(sn,[0,2,1,3])})}function extractBoundingBoxes(Mt,st,nn,rn){for(var on=[],an=Mt.arraySync(),sn=0;sn<Mt.shape[0];sn++)for(var un=0;un<Mt.shape[1];un++)an[sn][un]>=rn&&on.push(new Point(un,sn));var Xr=on.map(function(to){var uo=new BoundingBox(Math.round((to.y*CELL_STRIDE+1)/nn),Math.round((to.x*CELL_STRIDE+1)/nn),Math.round((to.y*CELL_STRIDE+CELL_SIZE)/nn),Math.round((to.x*CELL_STRIDE+CELL_SIZE)/nn)),hn=an[to.y][to.x],fn=st.arraySync(),co=new MtcnnBox(fn[to.y][to.x][0],fn[to.y][to.x][1],fn[to.y][to.x][2],fn[to.y][to.x][3]);return{cell:uo,score:hn,region:co}});return Xr}function stage1(Mt,st,nn,rn,on){on.stage1=[];var an=st.map(function(fn){return Ze(function(){var co={scale:fn},lo=rescaleAndNormalize(Mt,fn),fo=Date.now(),ho=PNet(lo,rn),mo=ho.prob,Uo=ho.regions;co.pnet=Date.now()-fo;var _d=Ur(Ur(mo,3)[1])[0],tp=Ur(Uo)[0];return{scoresTensor:_d,regionsTensor:tp,scale:fn,statsForScale:co}})}),sn=an.map(function(fn){var co=fn.scoresTensor,lo=fn.regionsTensor,fo=fn.scale,ho=fn.statsForScale,mo=extractBoundingBoxes(co,lo,fo,nn);if(co.dispose(),lo.dispose(),!mo.length)return on.stage1.push(ho),[];var Uo=Date.now(),_d=nonMaxSuppression$1(mo.map(function(tp){return tp.cell}),mo.map(function(tp){return tp.score}),.5);return ho.nms=Date.now()-Uo,ho.numBoxes=_d.length,on.stage1.push(ho),_d.map(function(tp){return mo[tp]})}),un=sn.reduce(function(fn,co){return fn.concat(co)},[]),Xr=[],to=[];if(un.length>0){var uo=Date.now(),hn=nonMaxSuppression$1(un.map(function(fn){return fn.cell}),un.map(function(fn){return fn.score}),.7);on.stage1_nms=Date.now()-uo,to=hn.map(function(fn){return un[fn].score}),Xr=hn.map(function(fn){return un[fn]}).map(function(fn){var co=fn.cell,lo=fn.region;return new BoundingBox(co.left+lo.left*co.width,co.top+lo.top*co.height,co.right+lo.right*co.width,co.bottom+lo.bottom*co.height).toSquare().round()})}return{boxes:Xr,scores:to}}function extractImagePatches(Mt,st,nn){var rn=nn.width,on=nn.height;return __awaiter(this,void 0,void 0,function(){var an,sn,un,Xr=this;return __generator(this,function(to){switch(to.label){case 0:return an=getContext2dOrThrow(Mt),[4,Promise.all(st.map(function(uo){return __awaiter(Xr,void 0,void 0,function(){var hn,fn,co,lo,fo,ho,mo,Uo;return __generator(this,function(_d){return hn=uo.padAtBorders(Mt.height,Mt.width),fn=hn.y,co=hn.ey,lo=hn.x,fo=hn.ex,ho=lo-1,mo=fn-1,Uo=an.getImageData(ho,mo,fo-ho,co-mo),[2,env$3.isNodejs()?createCanvasFromMedia(Uo):createImageBitmap(Uo)]})})}))];case 1:return sn=to.sent(),un=[],sn.forEach(function(uo){var hn=createCanvas({width:rn,height:on}),fn=getContext2dOrThrow(hn);fn.drawImage(uo,0,0,rn,on);for(var co=fn.getImageData(0,0,rn,on).data,lo=[],fo=0;fo<co.length;fo+=4)lo.push(co[fo+2]),lo.push(co[fo+1]),lo.push(co[fo]);un.push(lo)}),[2,un.map(function(uo){var hn=Ze(function(){var fn=Wl(Ln(uo,[1,rn,on,3]),[0,2,1,3]).toFloat();return normalize$1(fn)});return hn})]}})})}function RNet(Mt,st){return Ze(function(){var nn=sharedLayer(Mt,st),rn=Or(nn,[nn.shape[0],st.fc1.weights.shape[0]]),on=fullyConnectedLayer(rn,st.fc1),an=prelu(on,st.prelu4_alpha),sn=fullyConnectedLayer(an,st.fc2_1),un=wr(Sl(sn,1),1),Xr=go(Cc(sn,un),1),to=fullyConnectedLayer(an,st.fc2_2),uo=Ur(Xr,1)[1];return{scores:uo,regions:to}})}function stage2(Mt,st,nn,rn,on){return __awaiter(this,void 0,void 0,function(){var an,sn,un,Xr,to,uo,hn,fn,co,lo,fo,ho,mo,Uo;return __generator(this,function(_d){switch(_d.label){case 0:return an=Date.now(),[4,extractImagePatches(Mt,st,{width:24,height:24})];case 1:return sn=_d.sent(),on.stage2_extractImagePatches=Date.now()-an,an=Date.now(),un=sn.map(function(tp){var ep=RNet(tp,rn);return tp.dispose(),ep}),on.stage2_rnet=Date.now()-an,Xr=un.length>1?Yn(un.map(function(tp){return tp.scores})):un[0].scores,hn=(uo=Array).from,[4,Xr.data()];case 2:return to=hn.apply(uo,[_d.sent()]),Xr.dispose(),fn=to.map(function(tp,ep){return{score:tp,idx:ep}}).filter(function(tp){return tp.score>nn}).map(function(tp){var ep=tp.idx;return ep}),co=fn.map(function(tp){return st[tp]}),lo=fn.map(function(tp){return to[tp]}),fo=[],ho=[],co.length>0&&(an=Date.now(),mo=nonMaxSuppression$1(co,lo,.7),on.stage2_nms=Date.now()-an,Uo=mo.map(function(tp){var ep=un[fn[tp]].regions.arraySync();return new MtcnnBox(ep[0][0],ep[0][1],ep[0][2],ep[0][3])}),ho=mo.map(function(tp){return lo[tp]}),fo=mo.map(function(tp,ep){return co[tp].calibrate(Uo[ep])})),un.forEach(function(tp){tp.regions.dispose(),tp.scores.dispose()}),[2,{boxes:fo,scores:ho}]}})})}function ONet(Mt,st){return Ze(function(){var nn=sharedLayer(Mt,st);nn=hl(nn,[2,2],[2,2],"same"),nn=convLayer$1(nn,st.conv4,"valid"),nn=prelu(nn,st.prelu4_alpha);var rn=Or(nn,[nn.shape[0],st.fc1.weights.shape[0]]),on=fullyConnectedLayer(rn,st.fc1),an=prelu(on,st.prelu5_alpha),sn=fullyConnectedLayer(an,st.fc2_1),un=wr(Sl(sn,1),1),Xr=go(Cc(sn,un),1),to=fullyConnectedLayer(an,st.fc2_2),uo=fullyConnectedLayer(an,st.fc2_3),hn=Ur(Xr,1)[1];return{scores:hn,regions:to,points:uo}})}function stage3(Mt,st,nn,rn,on){return __awaiter(this,void 0,void 0,function(){var an,sn,un,Xr,to,uo,hn,fn,co,lo,fo,ho,mo,Uo,_d;return __generator(this,function(tp){switch(tp.label){case 0:return an=Date.now(),[4,extractImagePatches(Mt,st,{width:48,height:48})];case 1:return sn=tp.sent(),on.stage3_extractImagePatches=Date.now()-an,an=Date.now(),un=sn.map(function(ep){var np=ONet(ep,rn);return ep.dispose(),np}),on.stage3_onet=Date.now()-an,Xr=un.length>1?Yn(un.map(function(ep){return ep.scores})):un[0].scores,hn=(uo=Array).from,[4,Xr.data()];case 2:return to=hn.apply(uo,[tp.sent()]),Xr.dispose(),fn=to.map(function(ep,np){return{score:ep,idx:np}}).filter(function(ep){return ep.score>nn}).map(function(ep){var np=ep.idx;return np}),co=fn.map(function(ep){var np=un[ep].regions.arraySync();return new MtcnnBox(np[0][0],np[0][1],np[0][2],np[0][3])}),lo=fn.map(function(ep,np){return st[ep].calibrate(co[np])}),fo=fn.map(function(ep){return to[ep]}),ho=[],mo=[],Uo=[],lo.length>0&&(an=Date.now(),_d=nonMaxSuppression$1(lo,fo,.7,!1),on.stage3_nms=Date.now()-an,ho=_d.map(function(ep){return lo[ep]}),mo=_d.map(function(ep){return fo[ep]}),Uo=_d.map(function(ep,np){return Array(5).fill(0).map(function(rp,ip){var op=un[ep].points.arraySync();return new Point(op[0][ip]*(ho[np].width+1)+ho[np].left,op[0][ip+5]*(ho[np].height+1)+ho[np].top)})})),un.forEach(function(ep){ep.regions.dispose(),ep.scores.dispose(),ep.points.dispose()}),[2,{boxes:ho,scores:mo,points:Uo}]}})})}var Mtcnn=function(Mt){__extends(st,Mt);function st(){return Mt.call(this,"Mtcnn")||this}return st.prototype.load=function(nn){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(rn){return console.warn("mtcnn is deprecated and will be removed soon"),[2,Mt.prototype.load.call(this,nn)]})})},st.prototype.loadFromDisk=function(nn){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(rn){return console.warn("mtcnn is deprecated and will be removed soon"),[2,Mt.prototype.loadFromDisk.call(this,nn)]})})},st.prototype.forwardInput=function(nn,rn){return rn===void 0&&(rn={}),__awaiter(this,void 0,void 0,function(){var on,an,sn,un,Xr,to,uo,hn,fn,co,lo,fo,ho,mo,Uo,_d,tp,ep,np,rp,ip;return __generator(this,function(op){switch(op.label){case 0:if(on=this.params,!on)throw new Error("Mtcnn - load model before inference");if(an=nn.canvases[0],!an)throw new Error("Mtcnn - inputCanvas is not defined, note that passing tensors into Mtcnn.forwardInput is not supported yet.");return sn={},un=Date.now(),Xr=Ze(function(){return bgrToRgbTensor(wr(id.fromPixels(an)).toFloat())}),to=function(ap){return Xr.dispose(),sn.total=Date.now()-un,ap},uo=Xr.shape.slice(1),hn=uo[0],fn=uo[1],co=new MtcnnOptions(rn),lo=co.minFaceSize,fo=co.scaleFactor,ho=co.maxNumScales,mo=co.scoreThresholds,Uo=co.scaleSteps,_d=(Uo||pyramidDown(lo,fo,[hn,fn])).filter(function(ap){var sp=getSizesForScale(ap,[hn,fn]);return Math.min(sp.width,sp.height)>CELL_SIZE}).slice(0,ho),sn.scales=_d,sn.pyramid=_d.map(function(ap){return getSizesForScale(ap,[hn,fn])}),tp=Date.now(),[4,stage1(Xr,_d,mo[0],on.pnet,sn)];case 1:return ep=op.sent(),sn.total_stage1=Date.now()-tp,ep.boxes.length?(sn.stage2_numInputBoxes=ep.boxes.length,tp=Date.now(),[4,stage2(an,ep.boxes,mo[1],on.rnet,sn)]):[2,to({results:[],stats:sn})];case 2:return np=op.sent(),sn.total_stage2=Date.now()-tp,np.boxes.length?(sn.stage3_numInputBoxes=np.boxes.length,tp=Date.now(),[4,stage3(an,np.boxes,mo[2],on.onet,sn)]):[2,to({results:[],stats:sn})];case 3:return rp=op.sent(),sn.total_stage3=Date.now()-tp,ip=rp.boxes.map(function(ap,sp){return extendWithFaceLandmarks(extendWithFaceDetection({},new FaceDetection(rp.scores[sp],new Rect(ap.left/fn,ap.top/hn,ap.width/fn,ap.height/hn),{height:hn,width:fn})),new FaceLandmarks5(rp.points[sp].map(function(up){return up.sub(new Point(ap.left,ap.top)).div(new Point(ap.width,ap.height))}),{width:ap.width,height:ap.height}))}),[2,to({results:ip,stats:sn})]}})})},st.prototype.forward=function(nn,rn){return rn===void 0&&(rn={}),__awaiter(this,void 0,void 0,function(){var on;return __generator(this,function(an){switch(an.label){case 0:return on=this.forwardInput,[4,toNetInput(nn)];case 1:return[4,on.apply(this,[an.sent(),rn])];case 2:return[2,an.sent().results]}})})},st.prototype.forwardWithStats=function(nn,rn){return rn===void 0&&(rn={}),__awaiter(this,void 0,void 0,function(){var on;return __generator(this,function(an){switch(an.label){case 0:return on=this.forwardInput,[4,toNetInput(nn)];case 1:return[2,on.apply(this,[an.sent(),rn])]}})})},st.prototype.getDefaultModelName=function(){return"mtcnn_model"},st.prototype.extractParamsFromWeigthMap=function(nn){return extractParamsFromWeigthMap(nn)},st.prototype.extractParams=function(nn){return extractParams(nn)},st}(NeuralNetwork),IOU_THRESHOLD=.4,BOX_ANCHORS=[new Point(1.603231,2.094468),new Point(6.041143,7.080126),new Point(2.882459,3.518061),new Point(4.266906,5.178857),new Point(9.041765,10.66308)],MEAN_RGB=[117.001,114.697,97.404],TinyFaceDetector=function(Mt){__extends(st,Mt);function st(){var nn=this,rn={withSeparableConvs:!0,iouThreshold:IOU_THRESHOLD,classes:["face"],anchors:BOX_ANCHORS,meanRgb:MEAN_RGB,isFirstLayerConv2d:!0,filterSizes:[3,16,32,64,128,256,512]};return nn=Mt.call(this,rn)||this,nn}return Object.defineProperty(st.prototype,"anchors",{get:function(){return this.config.anchors},enumerable:!0,configurable:!0}),st.prototype.locateFaces=function(nn,rn){return __awaiter(this,void 0,void 0,function(){var on;return __generator(this,function(an){switch(an.label){case 0:return[4,this.detect(nn,rn)];case 1:return on=an.sent(),[2,on.map(function(sn){return new FaceDetection(sn.score,sn.relativeBox,{width:sn.imageWidth,height:sn.imageHeight})})]}})})},st.prototype.getDefaultModelName=function(){return"tiny_face_detector_model"},st.prototype.extractParamsFromWeigthMap=function(nn){return Mt.prototype.extractParamsFromWeigthMap.call(this,nn)},st}(TinyYolov2Base),nets={ssdMobilenetv1:new SsdMobilenetv1,tinyFaceDetector:new TinyFaceDetector,tinyYolov2:new TinyYolov2,mtcnn:new Mtcnn,faceLandmark68Net:new FaceLandmark68Net,faceLandmark68TinyNet:new FaceLandmark68TinyNet,faceRecognitionNet:new FaceRecognitionNet,faceExpressionNet:new FaceExpressionNet,ageGenderNet:new AgeGenderNet},PredictFaceExpressionsTaskBase=function(Mt){__extends(st,Mt);function st(nn,rn,on){var an=Mt.call(this)||this;return an.parentTask=nn,an.input=rn,an.extractedFaces=on,an}return st}(ComposableTask),PredictAllFaceExpressionsTask=function(Mt){__extends(st,Mt);function st(){return Mt!==null&&Mt.apply(this,arguments)||this}return st.prototype.run=function(){return __awaiter(this,void 0,void 0,function(){var nn,rn,on=this;return __generator(this,function(an){switch(an.label){case 0:return[4,this.parentTask];case 1:return nn=an.sent(),[4,extractAllFacesAndComputeResults(nn,this.input,function(sn){return __awaiter(on,void 0,void 0,function(){return __generator(this,function(un){switch(un.label){case 0:return[4,Promise.all(sn.map(function(Xr){return nets.faceExpressionNet.predictExpressions(Xr)}))];case 1:return[2,un.sent()]}})})},this.extractedFaces)];case 2:return rn=an.sent(),[2,nn.map(function(sn,un){return extendWithFaceExpressions(sn,rn[un])})]}})})},st.prototype.withAgeAndGender=function(){return new PredictAllAgeAndGenderTask(this,this.input)},st}(PredictFaceExpressionsTaskBase),PredictSingleFaceExpressionsTask=function(Mt){__extends(st,Mt);function st(){return Mt!==null&&Mt.apply(this,arguments)||this}return st.prototype.run=function(){return __awaiter(this,void 0,void 0,function(){var nn,rn;return __generator(this,function(on){switch(on.label){case 0:return[4,this.parentTask];case 1:return nn=on.sent(),nn?[4,extractSingleFaceAndComputeResult(nn,this.input,function(an){return nets.faceExpressionNet.predictExpressions(an)},this.extractedFaces)]:[2];case 2:return rn=on.sent(),[2,extendWithFaceExpressions(nn,rn)]}})})},st.prototype.withAgeAndGender=function(){return new PredictSingleAgeAndGenderTask(this,this.input)},st}(PredictFaceExpressionsTaskBase),PredictAllFaceExpressionsWithFaceAlignmentTask=function(Mt){__extends(st,Mt);function st(){return Mt!==null&&Mt.apply(this,arguments)||this}return st.prototype.withAgeAndGender=function(){return new PredictAllAgeAndGenderWithFaceAlignmentTask(this,this.input)},st.prototype.withFaceDescriptors=function(){return new ComputeAllFaceDescriptorsTask(this,this.input)},st}(PredictAllFaceExpressionsTask),PredictSingleFaceExpressionsWithFaceAlignmentTask=function(Mt){__extends(st,Mt);function st(){return Mt!==null&&Mt.apply(this,arguments)||this}return st.prototype.withAgeAndGender=function(){return new PredictSingleAgeAndGenderWithFaceAlignmentTask(this,this.input)},st.prototype.withFaceDescriptor=function(){return new ComputeSingleFaceDescriptorTask(this,this.input)},st}(PredictSingleFaceExpressionsTask),PredictAgeAndGenderTaskBase=function(Mt){__extends(st,Mt);function st(nn,rn,on){var an=Mt.call(this)||this;return an.parentTask=nn,an.input=rn,an.extractedFaces=on,an}return st}(ComposableTask),PredictAllAgeAndGenderTask=function(Mt){__extends(st,Mt);function st(){return Mt!==null&&Mt.apply(this,arguments)||this}return st.prototype.run=function(){return __awaiter(this,void 0,void 0,function(){var nn,rn,on=this;return __generator(this,function(an){switch(an.label){case 0:return[4,this.parentTask];case 1:return nn=an.sent(),[4,extractAllFacesAndComputeResults(nn,this.input,function(sn){return __awaiter(on,void 0,void 0,function(){return __generator(this,function(un){switch(un.label){case 0:return[4,Promise.all(sn.map(function(Xr){return nets.ageGenderNet.predictAgeAndGender(Xr)}))];case 1:return[2,un.sent()]}})})},this.extractedFaces)];case 2:return rn=an.sent(),[2,nn.map(function(sn,un){var Xr=rn[un],to=Xr.age,uo=Xr.gender,hn=Xr.genderProbability;return extendWithAge(extendWithGender(sn,uo,hn),to)})]}})})},st.prototype.withFaceExpressions=function(){return new PredictAllFaceExpressionsTask(this,this.input)},st}(PredictAgeAndGenderTaskBase),PredictSingleAgeAndGenderTask=function(Mt){__extends(st,Mt);function st(){return Mt!==null&&Mt.apply(this,arguments)||this}return st.prototype.run=function(){return __awaiter(this,void 0,void 0,function(){var nn,rn,on,an,sn;return __generator(this,function(un){switch(un.label){case 0:return[4,this.parentTask];case 1:return nn=un.sent(),nn?[4,extractSingleFaceAndComputeResult(nn,this.input,function(Xr){return nets.ageGenderNet.predictAgeAndGender(Xr)},this.extractedFaces)]:[2];case 2:return rn=un.sent(),on=rn.age,an=rn.gender,sn=rn.genderProbability,[2,extendWithAge(extendWithGender(nn,an,sn),on)]}})})},st.prototype.withFaceExpressions=function(){return new PredictSingleFaceExpressionsTask(this,this.input)},st}(PredictAgeAndGenderTaskBase),PredictAllAgeAndGenderWithFaceAlignmentTask=function(Mt){__extends(st,Mt);function st(){return Mt!==null&&Mt.apply(this,arguments)||this}return st.prototype.withFaceExpressions=function(){return new PredictAllFaceExpressionsWithFaceAlignmentTask(this,this.input)},st.prototype.withFaceDescriptors=function(){return new ComputeAllFaceDescriptorsTask(this,this.input)},st}(PredictAllAgeAndGenderTask),PredictSingleAgeAndGenderWithFaceAlignmentTask=function(Mt){__extends(st,Mt);function st(){return Mt!==null&&Mt.apply(this,arguments)||this}return st.prototype.withFaceExpressions=function(){return new PredictSingleFaceExpressionsWithFaceAlignmentTask(this,this.input)},st.prototype.withFaceDescriptor=function(){return new ComputeSingleFaceDescriptorTask(this,this.input)},st}(PredictSingleAgeAndGenderTask),ComputeFaceDescriptorsTaskBase=function(Mt){__extends(st,Mt);function st(nn,rn){var on=Mt.call(this)||this;return on.parentTask=nn,on.input=rn,on}return st}(ComposableTask),ComputeAllFaceDescriptorsTask=function(Mt){__extends(st,Mt);function st(){return Mt!==null&&Mt.apply(this,arguments)||this}return st.prototype.run=function(){return __awaiter(this,void 0,void 0,function(){var nn,rn;return __generator(this,function(on){switch(on.label){case 0:return[4,this.parentTask];case 1:return nn=on.sent(),[4,extractAllFacesAndComputeResults(nn,this.input,function(an){return Promise.all(an.map(function(sn){return nets.faceRecognitionNet.computeFaceDescriptor(sn)}))},null,function(an){return an.landmarks.align(null,{useDlibAlignment:!0})})];case 2:return rn=on.sent(),[2,rn.map(function(an,sn){return extendWithFaceDescriptor(nn[sn],an)})]}})})},st.prototype.withFaceExpressions=function(){return new PredictAllFaceExpressionsWithFaceAlignmentTask(this,this.input)},st.prototype.withAgeAndGender=function(){return new PredictAllAgeAndGenderWithFaceAlignmentTask(this,this.input)},st}(ComputeFaceDescriptorsTaskBase),ComputeSingleFaceDescriptorTask=function(Mt){__extends(st,Mt);function st(){return Mt!==null&&Mt.apply(this,arguments)||this}return st.prototype.run=function(){return __awaiter(this,void 0,void 0,function(){var nn,rn;return __generator(this,function(on){switch(on.label){case 0:return[4,this.parentTask];case 1:return nn=on.sent(),nn?[4,extractSingleFaceAndComputeResult(nn,this.input,function(an){return nets.faceRecognitionNet.computeFaceDescriptor(an)},null,function(an){return an.landmarks.align(null,{useDlibAlignment:!0})})]:[2];case 2:return rn=on.sent(),[2,extendWithFaceDescriptor(nn,rn)]}})})},st.prototype.withFaceExpressions=function(){return new PredictSingleFaceExpressionsWithFaceAlignmentTask(this,this.input)},st.prototype.withAgeAndGender=function(){return new PredictSingleAgeAndGenderWithFaceAlignmentTask(this,this.input)},st}(ComputeFaceDescriptorsTaskBase),DetectFaceLandmarksTaskBase=function(Mt){__extends(st,Mt);function st(nn,rn,on){var an=Mt.call(this)||this;return an.parentTask=nn,an.input=rn,an.useTinyLandmarkNet=on,an}return Object.defineProperty(st.prototype,"landmarkNet",{get:function(){return this.useTinyLandmarkNet?nets.faceLandmark68TinyNet:nets.faceLandmark68Net},enumerable:!0,configurable:!0}),st}(ComposableTask),DetectAllFaceLandmarksTask=function(Mt){__extends(st,Mt);function st(){return Mt!==null&&Mt.apply(this,arguments)||this}return st.prototype.run=function(){return __awaiter(this,void 0,void 0,function(){var nn,rn,on,an,sn,un=this;return __generator(this,function(Xr){switch(Xr.label){case 0:return[4,this.parentTask];case 1:return nn=Xr.sent(),rn=nn.map(function(to){return to.detection}),this.input instanceof wt?[4,extractFaceTensors(this.input,rn)]:[3,3];case 2:return an=Xr.sent(),[3,5];case 3:return[4,extractFaces(this.input,rn)];case 4:an=Xr.sent(),Xr.label=5;case 5:return on=an,[4,Promise.all(on.map(function(to){return un.landmarkNet.detectLandmarks(to)}))];case 6:return sn=Xr.sent(),on.forEach(function(to){return to instanceof wt&&to.dispose()}),[2,nn.map(function(to,uo){return extendWithFaceLandmarks(to,sn[uo])})]}})})},st.prototype.withFaceExpressions=function(){return new PredictAllFaceExpressionsWithFaceAlignmentTask(this,this.input)},st.prototype.withAgeAndGender=function(){return new PredictAllAgeAndGenderWithFaceAlignmentTask(this,this.input)},st.prototype.withFaceDescriptors=function(){return new ComputeAllFaceDescriptorsTask(this,this.input)},st}(DetectFaceLandmarksTaskBase),DetectSingleFaceLandmarksTask=function(Mt){__extends(st,Mt);function st(){return Mt!==null&&Mt.apply(this,arguments)||this}return st.prototype.run=function(){return __awaiter(this,void 0,void 0,function(){var nn,rn,on,an,sn;return __generator(this,function(un){switch(un.label){case 0:return[4,this.parentTask];case 1:return nn=un.sent(),nn?(rn=nn.detection,this.input instanceof wt?[4,extractFaceTensors(this.input,[rn])]:[3,3]):[2];case 2:return an=un.sent(),[3,5];case 3:return[4,extractFaces(this.input,[rn])];case 4:an=un.sent(),un.label=5;case 5:return on=an,[4,this.landmarkNet.detectLandmarks(on[0])];case 6:return sn=un.sent(),on.forEach(function(Xr){return Xr instanceof wt&&Xr.dispose()}),[2,extendWithFaceLandmarks(nn,sn)]}})})},st.prototype.withFaceExpressions=function(){return new PredictSingleFaceExpressionsWithFaceAlignmentTask(this,this.input)},st.prototype.withAgeAndGender=function(){return new PredictSingleAgeAndGenderWithFaceAlignmentTask(this,this.input)},st.prototype.withFaceDescriptor=function(){return new ComputeSingleFaceDescriptorTask(this,this.input)},st}(DetectFaceLandmarksTaskBase),DetectFacesTaskBase=function(Mt){__extends(st,Mt);function st(nn,rn){rn===void 0&&(rn=new SsdMobilenetv1Options);var on=Mt.call(this)||this;return on.input=nn,on.options=rn,on}return st}(ComposableTask),DetectAllFacesTask=function(Mt){__extends(st,Mt);function st(){return Mt!==null&&Mt.apply(this,arguments)||this}return st.prototype.run=function(){return __awaiter(this,void 0,void 0,function(){var nn,rn,on,an;return __generator(this,function(sn){switch(sn.label){case 0:return nn=this,rn=nn.input,on=nn.options,on instanceof MtcnnOptions?[4,nets.mtcnn.forward(rn,on)]:[3,2];case 1:return[2,sn.sent().map(function(un){return un.detection})];case 2:if(an=on instanceof TinyFaceDetectorOptions?function(un){return nets.tinyFaceDetector.locateFaces(un,on)}:on instanceof SsdMobilenetv1Options?function(un){return nets.ssdMobilenetv1.locateFaces(un,on)}:on instanceof TinyYolov2Options?function(un){return nets.tinyYolov2.locateFaces(un,on)}:null,!an)throw new Error("detectFaces - expected options to be instance of TinyFaceDetectorOptions | SsdMobilenetv1Options | MtcnnOptions | TinyYolov2Options");return[2,an(rn)]}})})},st.prototype.runAndExtendWithFaceDetections=function(){var nn=this;return new Promise(function(rn){return __awaiter(nn,void 0,void 0,function(){var on;return __generator(this,function(an){switch(an.label){case 0:return[4,this.run()];case 1:return on=an.sent(),[2,rn(on.map(function(sn){return extendWithFaceDetection({},sn)}))]}})})})},st.prototype.withFaceLandmarks=function(nn){return nn===void 0&&(nn=!1),new DetectAllFaceLandmarksTask(this.runAndExtendWithFaceDetections(),this.input,nn)},st.prototype.withFaceExpressions=function(){return new PredictAllFaceExpressionsTask(this.runAndExtendWithFaceDetections(),this.input)},st.prototype.withAgeAndGender=function(){return new PredictAllAgeAndGenderTask(this.runAndExtendWithFaceDetections(),this.input)},st}(DetectFacesTaskBase),DetectSingleFaceTask=function(Mt){__extends(st,Mt);function st(){return Mt!==null&&Mt.apply(this,arguments)||this}return st.prototype.run=function(){return __awaiter(this,void 0,void 0,function(){var nn,rn;return __generator(this,function(on){switch(on.label){case 0:return[4,new DetectAllFacesTask(this.input,this.options)];case 1:return nn=on.sent(),rn=nn[0],nn.forEach(function(an){an.score>rn.score&&(rn=an)}),[2,rn]}})})},st.prototype.runAndExtendWithFaceDetection=function(){var nn=this;return new Promise(function(rn){return __awaiter(nn,void 0,void 0,function(){var on;return __generator(this,function(an){switch(an.label){case 0:return[4,this.run()];case 1:return on=an.sent(),[2,rn(on?extendWithFaceDetection({},on):void 0)]}})})})},st.prototype.withFaceLandmarks=function(nn){return nn===void 0&&(nn=!1),new DetectSingleFaceLandmarksTask(this.runAndExtendWithFaceDetection(),this.input,nn)},st.prototype.withFaceExpressions=function(){return new PredictSingleFaceExpressionsTask(this.runAndExtendWithFaceDetection(),this.input)},st.prototype.withAgeAndGender=function(){return new PredictSingleAgeAndGenderTask(this.runAndExtendWithFaceDetection(),this.input)},st}(DetectFacesTaskBase);function detectSingleFace(Mt,st){return st===void 0&&(st=new SsdMobilenetv1Options),new DetectSingleFaceTask(Mt,st)}function euclideanDistance(Mt,st){if(Mt.length!==st.length)throw new Error("euclideanDistance: arr1.length !== arr2.length");var nn=Array.from(Mt),rn=Array.from(st);return Math.sqrt(nn.map(function(on,an){return on-rn[an]}).reduce(function(on,an){return on+Math.pow(an,2)},0))}(function(){function Mt(st,nn){nn===void 0&&(nn=.6),this._distanceThreshold=nn;var rn=Array.isArray(st)?st:[st];if(!rn.length)throw new Error("FaceRecognizer.constructor - expected atleast one input");var on=1,an=function(){return"person "+on++};this._labeledDescriptors=rn.map(function(sn){if(sn instanceof LabeledFaceDescriptors)return sn;if(sn instanceof Float32Array)return new LabeledFaceDescriptors(an(),[sn]);if(sn.descriptor&&sn.descriptor instanceof Float32Array)return new LabeledFaceDescriptors(an(),[sn.descriptor]);throw new Error("FaceRecognizer.constructor - expected inputs to be of type LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array | Array<LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array>")})}return Object.defineProperty(Mt.prototype,"labeledDescriptors",{get:function(){return this._labeledDescriptors},enumerable:!0,configurable:!0}),Object.defineProperty(Mt.prototype,"distanceThreshold",{get:function(){return this._distanceThreshold},enumerable:!0,configurable:!0}),Mt.prototype.computeMeanDistance=function(st,nn){return nn.map(function(rn){return euclideanDistance(rn,st)}).reduce(function(rn,on){return rn+on},0)/(nn.length||1)},Mt.prototype.matchDescriptor=function(st){var nn=this;return this.labeledDescriptors.map(function(rn){var on=rn.descriptors,an=rn.label;return new FaceMatch(an,nn.computeMeanDistance(st,on))}).reduce(function(rn,on){return rn.distance<on.distance?rn:on})},Mt.prototype.findBestMatch=function(st){var nn=this.matchDescriptor(st);return nn.distance<this.distanceThreshold?nn:new FaceMatch("unknown",nn.distance)},Mt.prototype.toJSON=function(){return{distanceThreshold:this.distanceThreshold,labeledDescriptors:this.labeledDescriptors.map(function(st){return st.toJSON()})}},Mt.fromJSON=function(st){var nn=st.labeledDescriptors.map(function(rn){return LabeledFaceDescriptors.fromJSON(rn)});return new Mt(nn,st.distanceThreshold)},Mt})();let isModelLoading$1=!1,modelsLoaded=!1;const emotionHistory=[],HISTORY_LENGTH=5,MIN_CONFIDENCE=.2,loadFaceModel=async()=>{if(!(modelsLoaded||isModelLoading$1))try{isModelLoading$1=!0,console.log("Loading face detection models...");const Mt="/models";console.log(`Loading models from base path: ${Mt}`);try{console.log("Validating model files accessibility...");const st=await fetch(`${Mt}/tiny_face_detector/tiny_face_detector_model-weights_manifest.json`);if(!st.ok)throw new Error(`Failed to access model file: ${st.status} ${st.statusText}`);const nn=await st.json();console.log("Model manifest accessible:",nn?"Yes":"No")}catch(st){console.error("Model validation failed:",st);const nn=st instanceof Error?st.message:"Unknown error accessing model files";throw new Error(`Model files validation failed: ${nn}`)}try{console.log("Loading tiny face detector model..."),await nets.tinyFaceDetector.loadFromUri(`${Mt}/tiny_face_detector`),console.log("Tiny face detector model loaded successfully"),console.log("Loading face landmark model..."),await nets.faceLandmark68Net.loadFromUri(`${Mt}/face_landmark_68`),console.log("Face landmark model loaded successfully"),console.log("Loading face expression model..."),await nets.faceExpressionNet.loadFromUri(`${Mt}/face_expression`),console.log("Face expression model loaded successfully")}catch(st){throw console.error("Error loading specific model:",st),st instanceof Error?(console.error("Model error message:",st.message),console.error("Model error stack:",st.stack)):console.error("Model error details:",JSON.stringify(st,null,2)),st}modelsLoaded=!0,console.log("Face landmarks model loaded successfully!")}catch(Mt){console.error("Error loading face landmarks model:",Mt),Mt instanceof Error?(console.error("Error message:",Mt.message),console.error("Error stack:",Mt.stack)):(console.error("Unknown error type:",typeof Mt),console.error("Details:",JSON.stringify(Mt,null,2))),console.error("Model loading state:",{tinyFaceDetector:nets.tinyFaceDetector.isLoaded,faceLandmark68Net:nets.faceLandmark68Net.isLoaded,faceExpressionNet:nets.faceExpressionNet.isLoaded}),modelsLoaded=!1}finally{isModelLoading$1=!1}},loadFaceApiScript=loadFaceModel,detectFacialEmotion=async Mt=>{if(!modelsLoaded||!Mt)return null;try{const st=await detectSingleFace(Mt,new TinyFaceDetectorOptions).withFaceExpressions();if(!st)return null;const nn=st.expressions,rn={neutral:"neutral",happy:"happy",sad:"sad",angry:"angry",fearful:"fearful",disgusted:"disgusted",surprised:"surprised"};let on=0,an="neutral";if(Object.entries(nn).forEach(([un,Xr])=>{Xr>on&&rn[un]&&(on=Xr,an=rn[un])}),on<MIN_CONFIDENCE)return null;const sn={emotion:an,confidence:on,timestamp:new Date};return emotionHistory.push(sn),emotionHistory.length>HISTORY_LENGTH&&emotionHistory.shift(),sn}catch(st){return console.error("Error detecting facial emotion:",st),null}},getEmotionHistory=()=>emotionHistory,isModelLoaded=()=>modelsLoaded;function useFaceDetection({isEnabled:Mt,detectInterval:st=500,onEmotionDetected:nn}){const[rn,on]=reactExports.useState(!1),[an,sn]=reactExports.useState(!1),[un,Xr]=reactExports.useState(null),[to,uo]=reactExports.useState(null),[hn,fn]=reactExports.useState(null),[co,lo]=reactExports.useState(0),[fo,ho]=reactExports.useState(!1),mo=reactExports.useRef(null),Uo=reactExports.useRef(null),_d=reactExports.useRef(null);reactExports.useEffect(()=>((async()=>{if(isModelLoaded()){on(!0);return}try{sn(!0),Xr(null),console.log("Initializing face detection models..."),await loadFaceModel();const rp=isModelLoaded();on(rp),rp?console.log("Face detection models ready to use"):(Xr("Models loaded but not properly initialized. Please refresh the page."),console.warn("Models loaded but not properly initialized"))}catch(rp){console.error("Error loading face detection models:",rp),Xr("Failed to load facial recognition models. Camera features will be limited.")}finally{sn(!1)}})(),()=>{_d.current&&(window.clearInterval(_d.current),_d.current=null)}),[]);const tp=reactExports.useCallback(async()=>{if(!(!rn||!Mt))try{Xr(null);const np=await navigator.mediaDevices.getUserMedia({video:{width:{min:320,ideal:640,max:1280},height:{min:240,ideal:480,max:720},facingMode:"user",aspectRatio:{ideal:1.33333}},audio:!1});Uo.current=np,mo.current&&(mo.current.srcObject=np,mo.current.onloadedmetadata=()=>{mo.current&&(mo.current.play(),ho(!0),uo(!0))})}catch(np){console.error("Error accessing camera:",np),Xr(np instanceof DOMException&&np.name==="NotAllowedError"?"Camera access denied. Please allow camera access for emotion detection.":"Failed to access camera"),uo(!1)}},[rn,Mt]),ep=reactExports.useCallback(()=>{Uo.current&&(Uo.current.getTracks().forEach(np=>np.stop()),Uo.current=null),mo.current&&(mo.current.srcObject=null),_d.current&&(window.clearInterval(_d.current),_d.current=null),ho(!1)},[]);return reactExports.useEffect(()=>{if(!fo||!Mt||!mo.current)return;const np=async()=>{if(!(!mo.current||!fo))try{const rp=await detectFacialEmotion(mo.current);rp&&(fn(rp.emotion),lo(rp.confidence),nn&&nn(rp))}catch(rp){console.error("Error in emotion detection:",rp)}};return _d.current&&window.clearInterval(_d.current),_d.current=window.setInterval(np,st),()=>{_d.current&&window.clearInterval(_d.current)}},[fo,Mt,st,nn]),reactExports.useEffect(()=>{Mt&&rn&&!fo?tp():!Mt&&fo&&ep()},[Mt,rn,fo,tp,ep]),reactExports.useEffect(()=>()=>{ep()},[ep]),{videoRef:mo,isReady:rn,isLoading:an,error:un,permission:to,cameraActive:fo,currentEmotion:hn,emotionConfidence:co,startCamera:tp,stopCamera:ep}}const EMOTION_ICONS={neutral:"",happy:"",sad:"",angry:"",surprised:"",fearful:"",disgusted:"",calm:"",tense:""},THERAPY_INSTRUCTIONS={voice:['Click "Enable Voice & Camera" to start speech recognition and emotion detection',"Speak naturally about your thoughts and feelings","The AI analyzes your facial expressions and vocal tone to provide personalized responses","Your message will be sent automatically when you pause speaking","You can continue the conversation as long as you need"],text:["Type your message in the input field below the conversation","Press Enter or click the send button to submit your message","The AI will respond with therapeutic guidance based on your input","Continue the conversation as long as you need","Your conversation history is displayed in the chat window"]},PRIVACY_NOTE="All conversations are private and confidential. Your data is processed locally and is not stored after you close the session.",INITIAL_MESSAGES={voice:"Hello! I'm your AI therapist. I can analyze your facial expressions and voice tone to provide more personalized support. How are you feeling today?",text:"Hello! I'm your AI therapist. How can I help you today?"},LANGUAGE_COMPLEXITY_LEVELS=[{name:"Children",description:"Simple language suitable for children",maxWordLength:6,maxSentenceLength:8,ageGroup:"5-12 years",instructions:"Use simple words and short sentences. Avoid complex concepts. Use concrete examples rather than abstract ideas. Be warm, friendly and encouraging. Explain things using familiar concepts like family, friends, school, and play. Keep your tone gentle and supportive.",examples:"I understand you feel sad. That's okay! Everyone feels sad sometimes. Would you like to talk about what made you sad? Maybe we can think of something fun to do that might help you feel better."},{name:"Teenagers",description:"Casual language with age-appropriate concepts",maxWordLength:10,maxSentenceLength:15,ageGroup:"13-17 years",instructions:"Use casual but respectful language. Include some relatable references and examples. Acknowledge independence while offering guidance. Use a mix of simple and moderately complex sentences. Address topics like peer relationships, identity, and future goals in an approachable way.",examples:"I hear that you're feeling frustrated with your friends lately. That's totally normal during high school. Sometimes friendships go through rough patches as everyone figures out who they are. What do you think is the main issue that's bothering you right now?"},{name:"Adults",description:"Professional therapeutic language",maxWordLength:15,maxSentenceLength:25,ageGroup:"18+ years",instructions:"Use professional therapeutic language with appropriate depth and complexity. Incorporate psychological concepts when relevant. Balance analytical insight with emotional support. Use nuanced language that acknowledges the complexity of adult experiences. Maintain a professional yet approachable tone.",examples:"I understand you're experiencing significant anxiety related to your career transition. Such major life changes often trigger complex emotional responses, including uncertainty about identity and purpose. Would it help to explore some cognitive strategies for managing these feelings, or would you prefer to discuss the underlying concerns about this professional shift?"}],alertVariants=cva("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),Alert=reactExports.forwardRef(({className:Mt,variant:st,...nn},rn)=>jsxRuntimeExports.jsx("div",{ref:rn,role:"alert",className:cn(alertVariants({variant:st}),Mt),...nn}));Alert.displayName="Alert";const AlertTitle=reactExports.forwardRef(({className:Mt,...st},nn)=>jsxRuntimeExports.jsx("h5",{ref:nn,className:cn("mb-1 font-medium leading-none tracking-tight",Mt),...st}));AlertTitle.displayName="AlertTitle";const AlertDescription=reactExports.forwardRef(({className:Mt,...st},nn)=>jsxRuntimeExports.jsx("div",{ref:nn,className:cn("text-sm [&_p]:leading-relaxed",Mt),...st}));AlertDescription.displayName="AlertDescription";function CameraView({isEnabled:Mt=!0,onEmotionDetected:st,className:nn}){const[rn,on]=reactExports.useState(!0),[an,sn]=reactExports.useState(!1),[un,Xr]=reactExports.useState(!1),to=useIsMobile(),{videoRef:uo,isReady:hn,isLoading:fn,error:co,permission:lo,cameraActive:fo,currentEmotion:ho,emotionConfidence:mo,startCamera:Uo,stopCamera:_d}=useFaceDetection({isEnabled:Mt&&rn,detectInterval:500,onEmotionDetected:rp=>{sn(!0),st&&st(rp)}});reactExports.useEffect(()=>{lo===!1&&on(!1)},[lo]);const tp=()=>{const rp=!rn;on(rp),!rp&&fo?_d():rp&&!fo&&hn&&Uo()},ep=()=>{sn(!1),fo&&_d(),setTimeout(()=>{Uo()},500)},np=()=>{Xr(!un)};return jsxRuntimeExports.jsxs(Card,{className:cn("overflow-hidden transition-all duration-300 ease-in-out",un?"fixed inset-4 z-50 md:inset-8 lg:inset-16":"",nn),children:[jsxRuntimeExports.jsxs(CardHeader,{className:cn("flex-row items-center justify-between p-2 md:p-3",un?"bg-purple-50":""),children:[jsxRuntimeExports.jsxs(CardTitle,{className:"text-sm md:text-base flex items-center gap-2",children:[jsxRuntimeExports.jsx(Camera,{className:"h-4 w-4 md:h-5 md:w-5 text-purple-600"}),jsxRuntimeExports.jsx("span",{className:"text-purple-800",children:"Emotion Detection"}),ho&&jsxRuntimeExports.jsxs(Badge,{variant:"outline",className:"ml-1 md:ml-2 bg-purple-100 border-purple-200",children:[jsxRuntimeExports.jsx("span",{className:"text-lg mr-1",children:EMOTION_ICONS[ho]}),jsxRuntimeExports.jsx("span",{className:"text-xs md:text-sm capitalize",children:ho})]})]}),jsxRuntimeExports.jsx("div",{className:"flex items-center gap-1 md:gap-2",children:jsxRuntimeExports.jsx(Button,{variant:"ghost",size:"sm",onClick:np,className:"h-7 w-7 md:h-8 md:w-8 p-0 rounded-full",children:un?jsxRuntimeExports.jsx(Minimize2,{className:"h-4 w-4 md:h-5 md:w-5"}):jsxRuntimeExports.jsx(Maximize2,{className:"h-4 w-4 md:h-5 md:w-5"})})})]}),jsxRuntimeExports.jsxs(CardContent,{className:cn("p-0 relative",un?"h-[calc(100%-56px)]":""),children:[jsxRuntimeExports.jsxs("div",{className:cn("relative bg-muted",un?"h-full":"aspect-[4/3] md:aspect-video"),children:[rn?jsxRuntimeExports.jsx("video",{ref:uo,className:cn("w-full h-full object-cover transition-opacity duration-200",fn||!fo?"opacity-70":"opacity-100"),autoPlay:!0,playsInline:!0,muted:!0}):jsxRuntimeExports.jsx("div",{className:"w-full h-full flex items-center justify-center bg-muted",children:jsxRuntimeExports.jsx("p",{className:"text-muted-foreground",children:"Camera is turned off"})}),fn&&jsxRuntimeExports.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/20 z-10",children:jsxRuntimeExports.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-purple-500 border-t-transparent"})}),!hn&&!fn&&rn&&jsxRuntimeExports.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-black/40 z-10",children:[jsxRuntimeExports.jsx(Smile,{className:"h-8 w-8 text-white mb-2"}),jsxRuntimeExports.jsx("p",{className:"text-white text-center px-4",children:"Loading facial recognition models..."})]}),hn&&fo&&!an&&!ho&&!fn&&jsxRuntimeExports.jsx("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-black/30 z-10",children:jsxRuntimeExports.jsxs("div",{className:"bg-black/60 backdrop-blur-sm rounded-lg p-4 max-w-xs text-center",children:[jsxRuntimeExports.jsx(Smile,{className:"h-6 w-6 text-white mx-auto mb-2"}),jsxRuntimeExports.jsx("p",{className:"text-white text-sm",children:"Position your face in the center of the camera"})]})}),jsxRuntimeExports.jsxs("div",{className:cn("absolute bottom-2 flex gap-2 z-20",to?"left-1/2 transform -translate-x-1/2":"right-2"),children:[fo&&rn&&hn&&jsxRuntimeExports.jsxs(Button,{variant:"secondary",size:to?"sm":"default",className:"bg-purple-500/70 hover:bg-purple-600/80 text-white backdrop-blur-sm",onClick:ep,title:"Retry camera detection",children:[jsxRuntimeExports.jsx(RefreshCw,{size:to?16:18,className:to?"mr-1":"mr-2"})," Reset"]}),jsxRuntimeExports.jsx(Button,{variant:"secondary",size:to?"sm":"default",className:"bg-purple-500/70 hover:bg-purple-600/80 text-white backdrop-blur-sm",onClick:tp,children:rn?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(CameraOff,{size:to?16:18,className:to?"mr-1":"mr-2"})," Hide"]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Camera,{size:to?16:18,className:to?"mr-1":"mr-2"})," Show"]})})]}),ho&&mo>.5&&rn&&jsxRuntimeExports.jsxs("div",{className:cn("absolute bg-purple-600/80 backdrop-blur-sm text-white px-3 py-2 rounded-md flex items-center gap-2 z-20 animate-fadeIn",to?"top-2 left-2 right-2 justify-center":"top-3 left-3"),children:[jsxRuntimeExports.jsx("span",{className:cn("text-2xl",to?"":"mr-1"),children:EMOTION_ICONS[ho]}),jsxRuntimeExports.jsx("span",{className:cn("font-medium capitalize",to?"text-base":"text-lg"),children:ho}),jsxRuntimeExports.jsxs("span",{className:cn("opacity-80",to?"text-xs":"text-sm"),children:[Math.round(mo*100),"% confidence"]})]})]}),co&&jsxRuntimeExports.jsxs(Alert,{variant:"destructive",className:"mt-2 mx-2",children:[jsxRuntimeExports.jsx(CircleAlert,{className:"h-4 w-4"}),jsxRuntimeExports.jsxs(AlertDescription,{children:[co,co.includes("camera")&&jsxRuntimeExports.jsx(Button,{variant:"link",className:"p-0 h-auto text-destructive underline ml-1",onClick:ep,children:"Try again"})]})]})]})]})}function createContextScope$2(Mt,st=[]){let nn=[];function rn(an,sn){const un=reactExports.createContext(sn),Xr=nn.length;nn=[...nn,sn];function to(hn){const{scope:fn,children:co,...lo}=hn,fo=(fn==null?void 0:fn[Mt][Xr])||un,ho=reactExports.useMemo(()=>lo,Object.values(lo));return jsxRuntimeExports.jsx(fo.Provider,{value:ho,children:co})}function uo(hn,fn){const co=(fn==null?void 0:fn[Mt][Xr])||un,lo=reactExports.useContext(co);if(lo)return lo;if(sn!==void 0)return sn;throw new Error(`\`${hn}\` must be used within \`${an}\``)}return to.displayName=an+"Provider",[to,uo]}const on=()=>{const an=nn.map(sn=>reactExports.createContext(sn));return function(un){const Xr=(un==null?void 0:un[Mt])||an;return reactExports.useMemo(()=>({[`__scope${Mt}`]:{...un,[Mt]:Xr}}),[un,Xr])}};return on.scopeName=Mt,[rn,composeContextScopes$2(on,...st)]}function composeContextScopes$2(...Mt){const st=Mt[0];if(Mt.length===1)return st;const nn=()=>{const rn=Mt.map(on=>({useScope:on(),scopeName:on.scopeName}));return function(an){const sn=rn.reduce((un,{useScope:Xr,scopeName:to})=>{const hn=Xr(an)[`__scope${to}`];return{...un,...hn}},{});return reactExports.useMemo(()=>({[`__scope${st.scopeName}`]:sn}),[sn])}};return nn.scopeName=st.scopeName,nn}var PROGRESS_NAME="Progress",DEFAULT_MAX=100,[createProgressContext,createProgressScope]=createContextScope$2(PROGRESS_NAME),[ProgressProvider,useProgressContext]=createProgressContext(PROGRESS_NAME),Progress$1=reactExports.forwardRef((Mt,st)=>{const{__scopeProgress:nn,value:rn=null,max:on,getValueLabel:an=defaultGetValueLabel,...sn}=Mt;(on||on===0)&&!isValidMaxNumber(on)&&console.error(getInvalidMaxError(`${on}`,"Progress"));const un=isValidMaxNumber(on)?on:DEFAULT_MAX;rn!==null&&!isValidValueNumber(rn,un)&&console.error(getInvalidValueError(`${rn}`,"Progress"));const Xr=isValidValueNumber(rn,un)?rn:null,to=isNumber$4(Xr)?an(Xr,un):void 0;return jsxRuntimeExports.jsx(ProgressProvider,{scope:nn,value:Xr,max:un,children:jsxRuntimeExports.jsx(Primitive.div,{"aria-valuemax":un,"aria-valuemin":0,"aria-valuenow":isNumber$4(Xr)?Xr:void 0,"aria-valuetext":to,role:"progressbar","data-state":getProgressState(Xr,un),"data-value":Xr??void 0,"data-max":un,...sn,ref:st})})});Progress$1.displayName=PROGRESS_NAME;var INDICATOR_NAME$1="ProgressIndicator",ProgressIndicator=reactExports.forwardRef((Mt,st)=>{const{__scopeProgress:nn,...rn}=Mt,on=useProgressContext(INDICATOR_NAME$1,nn);return jsxRuntimeExports.jsx(Primitive.div,{"data-state":getProgressState(on.value,on.max),"data-value":on.value??void 0,"data-max":on.max,...rn,ref:st})});ProgressIndicator.displayName=INDICATOR_NAME$1;function defaultGetValueLabel(Mt,st){return`${Math.round(Mt/st*100)}%`}function getProgressState(Mt,st){return Mt==null?"indeterminate":Mt===st?"complete":"loading"}function isNumber$4(Mt){return typeof Mt=="number"}function isValidMaxNumber(Mt){return isNumber$4(Mt)&&!isNaN(Mt)&&Mt>0}function isValidValueNumber(Mt,st){return isNumber$4(Mt)&&!isNaN(Mt)&&Mt<=st&&Mt>=0}function getInvalidMaxError(Mt,st){return`Invalid prop \`max\` of value \`${Mt}\` supplied to \`${st}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${DEFAULT_MAX}\`.`}function getInvalidValueError(Mt,st){return`Invalid prop \`value\` of value \`${Mt}\` supplied to \`${st}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${DEFAULT_MAX} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var Root$4=Progress$1,Indicator=ProgressIndicator;const Progress=reactExports.forwardRef(({className:Mt,value:st,...nn},rn)=>jsxRuntimeExports.jsx(Root$4,{ref:rn,className:cn("relative h-4 w-full overflow-hidden rounded-full bg-secondary",Mt),...nn,children:jsxRuntimeExports.jsx(Indicator,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(st||0)}%)`}})}));Progress.displayName=Root$4.displayName;function EmotionVisualizer({emotion:Mt,confidence:st,showLabel:nn=!0,className:rn,size:on="md"}){const[an,sn]=reactExports.useState(!1),un=reactExports.useRef(null);if(reactExports.useEffect(()=>{if(Mt&&Mt!==un.current){sn(!0);const co=setTimeout(()=>sn(!1),1e3);return un.current=Mt,()=>clearTimeout(co)}},[Mt]),!Mt)return null;const Xr={sm:"text-xl p-2",md:"text-3xl p-3",lg:"text-5xl p-4"},to=co=>{const lo={happy:"bg-gradient-to-r from-amber-300 to-yellow-500",sad:"bg-gradient-to-r from-blue-300 to-blue-500",angry:"bg-gradient-to-r from-red-400 to-red-600",neutral:"bg-gradient-to-r from-gray-300 to-gray-500",surprised:"bg-gradient-to-r from-purple-300 to-purple-500",fearful:"bg-gradient-to-r from-indigo-300 to-indigo-500",disgusted:"bg-gradient-to-r from-green-300 to-green-500",calm:"bg-gradient-to-r from-teal-300 to-teal-500",tense:"bg-gradient-to-r from-orange-300 to-orange-500"};return lo[co]||lo.neutral},uo=co=>({happy:"animate-bounceIn",surprised:"animate-bounceIn",angry:"animate-pulse",fearful:"animate-breathe",calm:"animate-breathe"})[co]||"animate-fadeIn",hn=to(Mt),fn=uo(Mt);return jsxRuntimeExports.jsxs("div",{className:cn("flex flex-col items-center",rn),children:[jsxRuntimeExports.jsx("div",{className:cn("rounded-full flex items-center justify-center transition-all",hn,Xr[on],an?"scale-125":"scale-100",an?fn:""),style:{opacity:Math.max(.5,st),boxShadow:`0 0 ${Math.round(st*20)}px rgba(0,0,0,0.2)`},children:jsxRuntimeExports.jsx("span",{className:"drop-shadow-sm",children:EMOTION_ICONS[Mt]})}),nn&&jsxRuntimeExports.jsxs("span",{className:cn("mt-2 font-medium capitalize text-center transition-opacity duration-300",on==="sm"?"text-xs":on==="md"?"text-sm":"text-base",an?"animate-fadeIn":""),children:[Mt,st>0&&jsxRuntimeExports.jsxs("span",{className:"ml-1 opacity-70 text-xs",children:[Math.round(st*100),"%"]})]})]})}function EmotionPanel({currentEmotion:Mt,confidenceLevel:st,className:nn,compact:rn=!1}){const[on,an]=reactExports.useState({neutral:0,happy:0,sad:0,angry:0,surprised:0,fearful:0,disgusted:0,calm:0,tense:0}),[sn,un]=reactExports.useState(null);reactExports.useEffect(()=>{const to=setInterval(()=>{const uo=getEmotionHistory();if(uo.length===0)return;const hn={};uo.forEach(ho=>{hn[ho.emotion]||(hn[ho.emotion]={count:0,totalConfidence:0}),hn[ho.emotion].count++,hn[ho.emotion].totalConfidence+=ho.confidence});const fn=uo.length,co={...on};Object.keys(co).forEach(ho=>{co[ho]=0}),Object.entries(hn).forEach(([ho,mo])=>{const Uo=mo.count/fn;co[ho]=Uo}),an(co);let lo=0,fo=null;Object.entries(hn).forEach(([ho,mo])=>{mo.count>lo&&(lo=mo.count,fo=ho)}),fo&&un(fo)},1e3);return()=>clearInterval(to)},[]);const Xr=Object.entries(on).filter(([to,uo])=>uo>0).sort(([to,uo],[hn,fn])=>fn-uo).slice(0,rn?3:void 0).map(([to,uo])=>({emotion:to,percentage:uo*100}));return jsxRuntimeExports.jsxs(Card,{className:cn("overflow-hidden",nn),children:[jsxRuntimeExports.jsx(CardHeader,{className:cn("px-4 py-2",rn?"pb-0":"pb-2"),children:jsxRuntimeExports.jsxs(CardTitle,{className:"text-base flex items-center justify-between",children:["Emotion Detection",sn&&jsxRuntimeExports.jsx(EmotionVisualizer,{emotion:sn,confidence:.9,size:"sm",showLabel:!1})]})}),jsxRuntimeExports.jsx(CardContent,{className:cn("px-4",rn?"pt-2 pb-3":"py-4"),children:Mt?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[!rn&&jsxRuntimeExports.jsx("div",{className:"flex justify-center mb-4",children:jsxRuntimeExports.jsx(EmotionVisualizer,{emotion:Mt,confidence:st})}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[Xr.map(({emotion:to,percentage:uo})=>jsxRuntimeExports.jsxs("div",{className:"space-y-1",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between text-sm",children:[jsxRuntimeExports.jsx("span",{className:"capitalize",children:to}),jsxRuntimeExports.jsxs("span",{children:[Math.round(uo),"%"]})]}),jsxRuntimeExports.jsx(Progress,{value:uo,className:"h-2"})]},to)),Xr.length===0&&jsxRuntimeExports.jsx("div",{className:"text-center text-muted-foreground text-sm py-2",children:"No emotions detected yet"})]})]}):jsxRuntimeExports.jsx("div",{className:"text-center text-muted-foreground text-sm py-2",children:"Enable camera to detect emotions"})})]})}function VoiceTranscription({messages:Mt}){const st=reactExports.useRef(null);return reactExports.useEffect(()=>{st.current&&st.current.scrollIntoView({behavior:"smooth"})},[Mt]),jsxRuntimeExports.jsxs(Card,{className:"bg-white border-gray-200 p-3 h-[250px] md:h-[300px] overflow-y-auto shadow-sm relative",children:[Mt.length===0&&jsxRuntimeExports.jsx("div",{className:"h-full flex items-center justify-center text-sm text-gray-500",children:jsxRuntimeExports.jsx("div",{className:"text-center",children:"Your conversation will appear here"})}),jsxRuntimeExports.jsxs("div",{className:"space-y-3 min-h-full",children:[Mt.map(nn=>jsxRuntimeExports.jsx("div",{className:`flex ${nn.role==="user"?"justify-end":"justify-start"} w-full`,children:jsxRuntimeExports.jsx("div",{className:`
                max-w-[90%] md:max-w-[95%] ${nn.role==="user"?"flex-row-reverse":"flex-row"} 
                w-auto items-start
              `,children:jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:`
                    rounded-lg px-3 py-2 text-xs md:text-sm break-words
                    ${nn.role==="user"?"bg-blue-500 text-white rounded-tr-none":"bg-gray-100 text-gray-800 rounded-tl-none"}
                  `,children:nn.content}),jsxRuntimeExports.jsx("div",{className:`
                    text-xs text-gray-400 mt-1
                    ${nn.role==="user"?"text-right":"text-left"}
                  `,children:new Date(nn.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})})},nn.id)),jsxRuntimeExports.jsx("div",{ref:st,className:"h-4"})]}),Mt.length>3&&jsxRuntimeExports.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-8 bg-gradient-to-t from-white to-transparent pointer-events-none"})]})}var count=0;function useFocusGuards(){reactExports.useEffect(()=>{const Mt=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",Mt[0]??createFocusGuard()),document.body.insertAdjacentElement("beforeend",Mt[1]??createFocusGuard()),count++,()=>{count===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(st=>st.remove()),count--}},[])}function createFocusGuard(){const Mt=document.createElement("span");return Mt.setAttribute("data-radix-focus-guard",""),Mt.tabIndex=0,Mt.style.outline="none",Mt.style.opacity="0",Mt.style.position="fixed",Mt.style.pointerEvents="none",Mt}var AUTOFOCUS_ON_MOUNT="focusScope.autoFocusOnMount",AUTOFOCUS_ON_UNMOUNT="focusScope.autoFocusOnUnmount",EVENT_OPTIONS$1={bubbles:!1,cancelable:!0},FOCUS_SCOPE_NAME="FocusScope",FocusScope=reactExports.forwardRef((Mt,st)=>{const{loop:nn=!1,trapped:rn=!1,onMountAutoFocus:on,onUnmountAutoFocus:an,...sn}=Mt,[un,Xr]=reactExports.useState(null),to=useCallbackRef$1(on),uo=useCallbackRef$1(an),hn=reactExports.useRef(null),fn=useComposedRefs(st,fo=>Xr(fo)),co=reactExports.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;reactExports.useEffect(()=>{if(rn){let fo=function(_d){if(co.paused||!un)return;const tp=_d.target;un.contains(tp)?hn.current=tp:focus(hn.current,{select:!0})},ho=function(_d){if(co.paused||!un)return;const tp=_d.relatedTarget;tp!==null&&(un.contains(tp)||focus(hn.current,{select:!0}))},mo=function(_d){if(document.activeElement===document.body)for(const ep of _d)ep.removedNodes.length>0&&focus(un)};document.addEventListener("focusin",fo),document.addEventListener("focusout",ho);const Uo=new MutationObserver(mo);return un&&Uo.observe(un,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",fo),document.removeEventListener("focusout",ho),Uo.disconnect()}}},[rn,un,co.paused]),reactExports.useEffect(()=>{if(un){focusScopesStack.add(co);const fo=document.activeElement;if(!un.contains(fo)){const mo=new CustomEvent(AUTOFOCUS_ON_MOUNT,EVENT_OPTIONS$1);un.addEventListener(AUTOFOCUS_ON_MOUNT,to),un.dispatchEvent(mo),mo.defaultPrevented||(focusFirst$2(removeLinks(getTabbableCandidates(un)),{select:!0}),document.activeElement===fo&&focus(un))}return()=>{un.removeEventListener(AUTOFOCUS_ON_MOUNT,to),setTimeout(()=>{const mo=new CustomEvent(AUTOFOCUS_ON_UNMOUNT,EVENT_OPTIONS$1);un.addEventListener(AUTOFOCUS_ON_UNMOUNT,uo),un.dispatchEvent(mo),mo.defaultPrevented||focus(fo??document.body,{select:!0}),un.removeEventListener(AUTOFOCUS_ON_UNMOUNT,uo),focusScopesStack.remove(co)},0)}}},[un,to,uo,co]);const lo=reactExports.useCallback(fo=>{if(!nn&&!rn||co.paused)return;const ho=fo.key==="Tab"&&!fo.altKey&&!fo.ctrlKey&&!fo.metaKey,mo=document.activeElement;if(ho&&mo){const Uo=fo.currentTarget,[_d,tp]=getTabbableEdges(Uo);_d&&tp?!fo.shiftKey&&mo===tp?(fo.preventDefault(),nn&&focus(_d,{select:!0})):fo.shiftKey&&mo===_d&&(fo.preventDefault(),nn&&focus(tp,{select:!0})):mo===Uo&&fo.preventDefault()}},[nn,rn,co.paused]);return jsxRuntimeExports.jsx(Primitive.div,{tabIndex:-1,...sn,ref:fn,onKeyDown:lo})});FocusScope.displayName=FOCUS_SCOPE_NAME;function focusFirst$2(Mt,{select:st=!1}={}){const nn=document.activeElement;for(const rn of Mt)if(focus(rn,{select:st}),document.activeElement!==nn)return}function getTabbableEdges(Mt){const st=getTabbableCandidates(Mt),nn=findVisible(st,Mt),rn=findVisible(st.reverse(),Mt);return[nn,rn]}function getTabbableCandidates(Mt){const st=[],nn=document.createTreeWalker(Mt,NodeFilter.SHOW_ELEMENT,{acceptNode:rn=>{const on=rn.tagName==="INPUT"&&rn.type==="hidden";return rn.disabled||rn.hidden||on?NodeFilter.FILTER_SKIP:rn.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;nn.nextNode();)st.push(nn.currentNode);return st}function findVisible(Mt,st){for(const nn of Mt)if(!isHidden(nn,{upTo:st}))return nn}function isHidden(Mt,{upTo:st}){if(getComputedStyle(Mt).visibility==="hidden")return!0;for(;Mt;){if(st!==void 0&&Mt===st)return!1;if(getComputedStyle(Mt).display==="none")return!0;Mt=Mt.parentElement}return!1}function isSelectableInput(Mt){return Mt instanceof HTMLInputElement&&"select"in Mt}function focus(Mt,{select:st=!1}={}){if(Mt&&Mt.focus){const nn=document.activeElement;Mt.focus({preventScroll:!0}),Mt!==nn&&isSelectableInput(Mt)&&st&&Mt.select()}}var focusScopesStack=createFocusScopesStack();function createFocusScopesStack(){let Mt=[];return{add(st){const nn=Mt[0];st!==nn&&(nn==null||nn.pause()),Mt=arrayRemove(Mt,st),Mt.unshift(st)},remove(st){var nn;Mt=arrayRemove(Mt,st),(nn=Mt[0])==null||nn.resume()}}}function arrayRemove(Mt,st){const nn=[...Mt],rn=nn.indexOf(st);return rn!==-1&&nn.splice(rn,1),nn}function removeLinks(Mt){return Mt.filter(st=>st.tagName!=="A")}const sides=["top","right","bottom","left"],min$4=Math.min,max$4=Math.max,round$2=Math.round,floor=Math.floor,createCoords=Mt=>({x:Mt,y:Mt}),oppositeSideMap={left:"right",right:"left",bottom:"top",top:"bottom"},oppositeAlignmentMap={start:"end",end:"start"};function clamp$1(Mt,st,nn){return max$4(Mt,min$4(st,nn))}function evaluate(Mt,st){return typeof Mt=="function"?Mt(st):Mt}function getSide(Mt){return Mt.split("-")[0]}function getAlignment(Mt){return Mt.split("-")[1]}function getOppositeAxis(Mt){return Mt==="x"?"y":"x"}function getAxisLength(Mt){return Mt==="y"?"height":"width"}function getSideAxis(Mt){return["top","bottom"].includes(getSide(Mt))?"y":"x"}function getAlignmentAxis(Mt){return getOppositeAxis(getSideAxis(Mt))}function getAlignmentSides(Mt,st,nn){nn===void 0&&(nn=!1);const rn=getAlignment(Mt),on=getAlignmentAxis(Mt),an=getAxisLength(on);let sn=on==="x"?rn===(nn?"end":"start")?"right":"left":rn==="start"?"bottom":"top";return st.reference[an]>st.floating[an]&&(sn=getOppositePlacement(sn)),[sn,getOppositePlacement(sn)]}function getExpandedPlacements(Mt){const st=getOppositePlacement(Mt);return[getOppositeAlignmentPlacement(Mt),st,getOppositeAlignmentPlacement(st)]}function getOppositeAlignmentPlacement(Mt){return Mt.replace(/start|end/g,st=>oppositeAlignmentMap[st])}function getSideList(Mt,st,nn){const rn=["left","right"],on=["right","left"],an=["top","bottom"],sn=["bottom","top"];switch(Mt){case"top":case"bottom":return nn?st?on:rn:st?rn:on;case"left":case"right":return st?an:sn;default:return[]}}function getOppositeAxisPlacements(Mt,st,nn,rn){const on=getAlignment(Mt);let an=getSideList(getSide(Mt),nn==="start",rn);return on&&(an=an.map(sn=>sn+"-"+on),st&&(an=an.concat(an.map(getOppositeAlignmentPlacement)))),an}function getOppositePlacement(Mt){return Mt.replace(/left|right|bottom|top/g,st=>oppositeSideMap[st])}function expandPaddingObject(Mt){return{top:0,right:0,bottom:0,left:0,...Mt}}function getPaddingObject(Mt){return typeof Mt!="number"?expandPaddingObject(Mt):{top:Mt,right:Mt,bottom:Mt,left:Mt}}function rectToClientRect(Mt){const{x:st,y:nn,width:rn,height:on}=Mt;return{width:rn,height:on,top:nn,left:st,right:st+rn,bottom:nn+on,x:st,y:nn}}function computeCoordsFromPlacement(Mt,st,nn){let{reference:rn,floating:on}=Mt;const an=getSideAxis(st),sn=getAlignmentAxis(st),un=getAxisLength(sn),Xr=getSide(st),to=an==="y",uo=rn.x+rn.width/2-on.width/2,hn=rn.y+rn.height/2-on.height/2,fn=rn[un]/2-on[un]/2;let co;switch(Xr){case"top":co={x:uo,y:rn.y-on.height};break;case"bottom":co={x:uo,y:rn.y+rn.height};break;case"right":co={x:rn.x+rn.width,y:hn};break;case"left":co={x:rn.x-on.width,y:hn};break;default:co={x:rn.x,y:rn.y}}switch(getAlignment(st)){case"start":co[sn]-=fn*(nn&&to?-1:1);break;case"end":co[sn]+=fn*(nn&&to?-1:1);break}return co}const computePosition$1=async(Mt,st,nn)=>{const{placement:rn="bottom",strategy:on="absolute",middleware:an=[],platform:sn}=nn,un=an.filter(Boolean),Xr=await(sn.isRTL==null?void 0:sn.isRTL(st));let to=await sn.getElementRects({reference:Mt,floating:st,strategy:on}),{x:uo,y:hn}=computeCoordsFromPlacement(to,rn,Xr),fn=rn,co={},lo=0;for(let fo=0;fo<un.length;fo++){const{name:ho,fn:mo}=un[fo],{x:Uo,y:_d,data:tp,reset:ep}=await mo({x:uo,y:hn,initialPlacement:rn,placement:fn,strategy:on,middlewareData:co,rects:to,platform:sn,elements:{reference:Mt,floating:st}});uo=Uo??uo,hn=_d??hn,co={...co,[ho]:{...co[ho],...tp}},ep&&lo<=50&&(lo++,typeof ep=="object"&&(ep.placement&&(fn=ep.placement),ep.rects&&(to=ep.rects===!0?await sn.getElementRects({reference:Mt,floating:st,strategy:on}):ep.rects),{x:uo,y:hn}=computeCoordsFromPlacement(to,fn,Xr)),fo=-1)}return{x:uo,y:hn,placement:fn,strategy:on,middlewareData:co}};async function detectOverflow(Mt,st){var nn;st===void 0&&(st={});const{x:rn,y:on,platform:an,rects:sn,elements:un,strategy:Xr}=Mt,{boundary:to="clippingAncestors",rootBoundary:uo="viewport",elementContext:hn="floating",altBoundary:fn=!1,padding:co=0}=evaluate(st,Mt),lo=getPaddingObject(co),ho=un[fn?hn==="floating"?"reference":"floating":hn],mo=rectToClientRect(await an.getClippingRect({element:(nn=await(an.isElement==null?void 0:an.isElement(ho)))==null||nn?ho:ho.contextElement||await(an.getDocumentElement==null?void 0:an.getDocumentElement(un.floating)),boundary:to,rootBoundary:uo,strategy:Xr})),Uo=hn==="floating"?{x:rn,y:on,width:sn.floating.width,height:sn.floating.height}:sn.reference,_d=await(an.getOffsetParent==null?void 0:an.getOffsetParent(un.floating)),tp=await(an.isElement==null?void 0:an.isElement(_d))?await(an.getScale==null?void 0:an.getScale(_d))||{x:1,y:1}:{x:1,y:1},ep=rectToClientRect(an.convertOffsetParentRelativeRectToViewportRelativeRect?await an.convertOffsetParentRelativeRectToViewportRelativeRect({elements:un,rect:Uo,offsetParent:_d,strategy:Xr}):Uo);return{top:(mo.top-ep.top+lo.top)/tp.y,bottom:(ep.bottom-mo.bottom+lo.bottom)/tp.y,left:(mo.left-ep.left+lo.left)/tp.x,right:(ep.right-mo.right+lo.right)/tp.x}}const arrow$3=Mt=>({name:"arrow",options:Mt,async fn(st){const{x:nn,y:rn,placement:on,rects:an,platform:sn,elements:un,middlewareData:Xr}=st,{element:to,padding:uo=0}=evaluate(Mt,st)||{};if(to==null)return{};const hn=getPaddingObject(uo),fn={x:nn,y:rn},co=getAlignmentAxis(on),lo=getAxisLength(co),fo=await sn.getDimensions(to),ho=co==="y",mo=ho?"top":"left",Uo=ho?"bottom":"right",_d=ho?"clientHeight":"clientWidth",tp=an.reference[lo]+an.reference[co]-fn[co]-an.floating[lo],ep=fn[co]-an.reference[co],np=await(sn.getOffsetParent==null?void 0:sn.getOffsetParent(to));let rp=np?np[_d]:0;(!rp||!await(sn.isElement==null?void 0:sn.isElement(np)))&&(rp=un.floating[_d]||an.floating[lo]);const ip=tp/2-ep/2,op=rp/2-fo[lo]/2-1,ap=min$4(hn[mo],op),sp=min$4(hn[Uo],op),up=ap,pp=rp-fo[lo]-sp,lp=rp/2-fo[lo]/2+ip,dp=clamp$1(up,lp,pp),cp=!Xr.arrow&&getAlignment(on)!=null&&lp!==dp&&an.reference[lo]/2-(lp<up?ap:sp)-fo[lo]/2<0,fp=cp?lp<up?lp-up:lp-pp:0;return{[co]:fn[co]+fp,data:{[co]:dp,centerOffset:lp-dp-fp,...cp&&{alignmentOffset:fp}},reset:cp}}}),flip$2=function(Mt){return Mt===void 0&&(Mt={}),{name:"flip",options:Mt,async fn(st){var nn,rn;const{placement:on,middlewareData:an,rects:sn,initialPlacement:un,platform:Xr,elements:to}=st,{mainAxis:uo=!0,crossAxis:hn=!0,fallbackPlacements:fn,fallbackStrategy:co="bestFit",fallbackAxisSideDirection:lo="none",flipAlignment:fo=!0,...ho}=evaluate(Mt,st);if((nn=an.arrow)!=null&&nn.alignmentOffset)return{};const mo=getSide(on),Uo=getSideAxis(un),_d=getSide(un)===un,tp=await(Xr.isRTL==null?void 0:Xr.isRTL(to.floating)),ep=fn||(_d||!fo?[getOppositePlacement(un)]:getExpandedPlacements(un)),np=lo!=="none";!fn&&np&&ep.push(...getOppositeAxisPlacements(un,fo,lo,tp));const rp=[un,...ep],ip=await detectOverflow(st,ho),op=[];let ap=((rn=an.flip)==null?void 0:rn.overflows)||[];if(uo&&op.push(ip[mo]),hn){const lp=getAlignmentSides(on,sn,tp);op.push(ip[lp[0]],ip[lp[1]])}if(ap=[...ap,{placement:on,overflows:op}],!op.every(lp=>lp<=0)){var sp,up;const lp=(((sp=an.flip)==null?void 0:sp.index)||0)+1,dp=rp[lp];if(dp)return{data:{index:lp,overflows:ap},reset:{placement:dp}};let cp=(up=ap.filter(fp=>fp.overflows[0]<=0).sort((fp,gp)=>fp.overflows[1]-gp.overflows[1])[0])==null?void 0:up.placement;if(!cp)switch(co){case"bestFit":{var pp;const fp=(pp=ap.filter(gp=>{if(np){const mp=getSideAxis(gp.placement);return mp===Uo||mp==="y"}return!0}).map(gp=>[gp.placement,gp.overflows.filter(mp=>mp>0).reduce((mp,xp)=>mp+xp,0)]).sort((gp,mp)=>gp[1]-mp[1])[0])==null?void 0:pp[0];fp&&(cp=fp);break}case"initialPlacement":cp=un;break}if(on!==cp)return{reset:{placement:cp}}}return{}}}};function getSideOffsets(Mt,st){return{top:Mt.top-st.height,right:Mt.right-st.width,bottom:Mt.bottom-st.height,left:Mt.left-st.width}}function isAnySideFullyClipped(Mt){return sides.some(st=>Mt[st]>=0)}const hide$2=function(Mt){return Mt===void 0&&(Mt={}),{name:"hide",options:Mt,async fn(st){const{rects:nn}=st,{strategy:rn="referenceHidden",...on}=evaluate(Mt,st);switch(rn){case"referenceHidden":{const an=await detectOverflow(st,{...on,elementContext:"reference"}),sn=getSideOffsets(an,nn.reference);return{data:{referenceHiddenOffsets:sn,referenceHidden:isAnySideFullyClipped(sn)}}}case"escaped":{const an=await detectOverflow(st,{...on,altBoundary:!0}),sn=getSideOffsets(an,nn.floating);return{data:{escapedOffsets:sn,escaped:isAnySideFullyClipped(sn)}}}default:return{}}}}};async function convertValueToCoords(Mt,st){const{placement:nn,platform:rn,elements:on}=Mt,an=await(rn.isRTL==null?void 0:rn.isRTL(on.floating)),sn=getSide(nn),un=getAlignment(nn),Xr=getSideAxis(nn)==="y",to=["left","top"].includes(sn)?-1:1,uo=an&&Xr?-1:1,hn=evaluate(st,Mt);let{mainAxis:fn,crossAxis:co,alignmentAxis:lo}=typeof hn=="number"?{mainAxis:hn,crossAxis:0,alignmentAxis:null}:{mainAxis:hn.mainAxis||0,crossAxis:hn.crossAxis||0,alignmentAxis:hn.alignmentAxis};return un&&typeof lo=="number"&&(co=un==="end"?lo*-1:lo),Xr?{x:co*uo,y:fn*to}:{x:fn*to,y:co*uo}}const offset$2=function(Mt){return Mt===void 0&&(Mt=0),{name:"offset",options:Mt,async fn(st){var nn,rn;const{x:on,y:an,placement:sn,middlewareData:un}=st,Xr=await convertValueToCoords(st,Mt);return sn===((nn=un.offset)==null?void 0:nn.placement)&&(rn=un.arrow)!=null&&rn.alignmentOffset?{}:{x:on+Xr.x,y:an+Xr.y,data:{...Xr,placement:sn}}}}},shift$2=function(Mt){return Mt===void 0&&(Mt={}),{name:"shift",options:Mt,async fn(st){const{x:nn,y:rn,placement:on}=st,{mainAxis:an=!0,crossAxis:sn=!1,limiter:un={fn:ho=>{let{x:mo,y:Uo}=ho;return{x:mo,y:Uo}}},...Xr}=evaluate(Mt,st),to={x:nn,y:rn},uo=await detectOverflow(st,Xr),hn=getSideAxis(getSide(on)),fn=getOppositeAxis(hn);let co=to[fn],lo=to[hn];if(an){const ho=fn==="y"?"top":"left",mo=fn==="y"?"bottom":"right",Uo=co+uo[ho],_d=co-uo[mo];co=clamp$1(Uo,co,_d)}if(sn){const ho=hn==="y"?"top":"left",mo=hn==="y"?"bottom":"right",Uo=lo+uo[ho],_d=lo-uo[mo];lo=clamp$1(Uo,lo,_d)}const fo=un.fn({...st,[fn]:co,[hn]:lo});return{...fo,data:{x:fo.x-nn,y:fo.y-rn,enabled:{[fn]:an,[hn]:sn}}}}}},limitShift$2=function(Mt){return Mt===void 0&&(Mt={}),{options:Mt,fn(st){const{x:nn,y:rn,placement:on,rects:an,middlewareData:sn}=st,{offset:un=0,mainAxis:Xr=!0,crossAxis:to=!0}=evaluate(Mt,st),uo={x:nn,y:rn},hn=getSideAxis(on),fn=getOppositeAxis(hn);let co=uo[fn],lo=uo[hn];const fo=evaluate(un,st),ho=typeof fo=="number"?{mainAxis:fo,crossAxis:0}:{mainAxis:0,crossAxis:0,...fo};if(Xr){const _d=fn==="y"?"height":"width",tp=an.reference[fn]-an.floating[_d]+ho.mainAxis,ep=an.reference[fn]+an.reference[_d]-ho.mainAxis;co<tp?co=tp:co>ep&&(co=ep)}if(to){var mo,Uo;const _d=fn==="y"?"width":"height",tp=["top","left"].includes(getSide(on)),ep=an.reference[hn]-an.floating[_d]+(tp&&((mo=sn.offset)==null?void 0:mo[hn])||0)+(tp?0:ho.crossAxis),np=an.reference[hn]+an.reference[_d]+(tp?0:((Uo=sn.offset)==null?void 0:Uo[hn])||0)-(tp?ho.crossAxis:0);lo<ep?lo=ep:lo>np&&(lo=np)}return{[fn]:co,[hn]:lo}}}},size$2=function(Mt){return Mt===void 0&&(Mt={}),{name:"size",options:Mt,async fn(st){var nn,rn;const{placement:on,rects:an,platform:sn,elements:un}=st,{apply:Xr=()=>{},...to}=evaluate(Mt,st),uo=await detectOverflow(st,to),hn=getSide(on),fn=getAlignment(on),co=getSideAxis(on)==="y",{width:lo,height:fo}=an.floating;let ho,mo;hn==="top"||hn==="bottom"?(ho=hn,mo=fn===(await(sn.isRTL==null?void 0:sn.isRTL(un.floating))?"start":"end")?"left":"right"):(mo=hn,ho=fn==="end"?"top":"bottom");const Uo=fo-uo.top-uo.bottom,_d=lo-uo.left-uo.right,tp=min$4(fo-uo[ho],Uo),ep=min$4(lo-uo[mo],_d),np=!st.middlewareData.shift;let rp=tp,ip=ep;if((nn=st.middlewareData.shift)!=null&&nn.enabled.x&&(ip=_d),(rn=st.middlewareData.shift)!=null&&rn.enabled.y&&(rp=Uo),np&&!fn){const ap=max$4(uo.left,0),sp=max$4(uo.right,0),up=max$4(uo.top,0),pp=max$4(uo.bottom,0);co?ip=lo-2*(ap!==0||sp!==0?ap+sp:max$4(uo.left,uo.right)):rp=fo-2*(up!==0||pp!==0?up+pp:max$4(uo.top,uo.bottom))}await Xr({...st,availableWidth:ip,availableHeight:rp});const op=await sn.getDimensions(un.floating);return lo!==op.width||fo!==op.height?{reset:{rects:!0}}:{}}}};function hasWindow(){return typeof window<"u"}function getNodeName(Mt){return isNode(Mt)?(Mt.nodeName||"").toLowerCase():"#document"}function getWindow(Mt){var st;return(Mt==null||(st=Mt.ownerDocument)==null?void 0:st.defaultView)||window}function getDocumentElement(Mt){var st;return(st=(isNode(Mt)?Mt.ownerDocument:Mt.document)||window.document)==null?void 0:st.documentElement}function isNode(Mt){return hasWindow()?Mt instanceof Node||Mt instanceof getWindow(Mt).Node:!1}function isElement(Mt){return hasWindow()?Mt instanceof Element||Mt instanceof getWindow(Mt).Element:!1}function isHTMLElement(Mt){return hasWindow()?Mt instanceof HTMLElement||Mt instanceof getWindow(Mt).HTMLElement:!1}function isShadowRoot(Mt){return!hasWindow()||typeof ShadowRoot>"u"?!1:Mt instanceof ShadowRoot||Mt instanceof getWindow(Mt).ShadowRoot}function isOverflowElement(Mt){const{overflow:st,overflowX:nn,overflowY:rn,display:on}=getComputedStyle$1(Mt);return/auto|scroll|overlay|hidden|clip/.test(st+rn+nn)&&!["inline","contents"].includes(on)}function isTableElement(Mt){return["table","td","th"].includes(getNodeName(Mt))}function isTopLayer(Mt){return[":popover-open",":modal"].some(st=>{try{return Mt.matches(st)}catch{return!1}})}function isContainingBlock(Mt){const st=isWebKit(),nn=isElement(Mt)?getComputedStyle$1(Mt):Mt;return nn.transform!=="none"||nn.perspective!=="none"||(nn.containerType?nn.containerType!=="normal":!1)||!st&&(nn.backdropFilter?nn.backdropFilter!=="none":!1)||!st&&(nn.filter?nn.filter!=="none":!1)||["transform","perspective","filter"].some(rn=>(nn.willChange||"").includes(rn))||["paint","layout","strict","content"].some(rn=>(nn.contain||"").includes(rn))}function getContainingBlock(Mt){let st=getParentNode(Mt);for(;isHTMLElement(st)&&!isLastTraversableNode(st);){if(isContainingBlock(st))return st;if(isTopLayer(st))return null;st=getParentNode(st)}return null}function isWebKit(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function isLastTraversableNode(Mt){return["html","body","#document"].includes(getNodeName(Mt))}function getComputedStyle$1(Mt){return getWindow(Mt).getComputedStyle(Mt)}function getNodeScroll(Mt){return isElement(Mt)?{scrollLeft:Mt.scrollLeft,scrollTop:Mt.scrollTop}:{scrollLeft:Mt.scrollX,scrollTop:Mt.scrollY}}function getParentNode(Mt){if(getNodeName(Mt)==="html")return Mt;const st=Mt.assignedSlot||Mt.parentNode||isShadowRoot(Mt)&&Mt.host||getDocumentElement(Mt);return isShadowRoot(st)?st.host:st}function getNearestOverflowAncestor(Mt){const st=getParentNode(Mt);return isLastTraversableNode(st)?Mt.ownerDocument?Mt.ownerDocument.body:Mt.body:isHTMLElement(st)&&isOverflowElement(st)?st:getNearestOverflowAncestor(st)}function getOverflowAncestors(Mt,st,nn){var rn;st===void 0&&(st=[]),nn===void 0&&(nn=!0);const on=getNearestOverflowAncestor(Mt),an=on===((rn=Mt.ownerDocument)==null?void 0:rn.body),sn=getWindow(on);if(an){const un=getFrameElement(sn);return st.concat(sn,sn.visualViewport||[],isOverflowElement(on)?on:[],un&&nn?getOverflowAncestors(un):[])}return st.concat(on,getOverflowAncestors(on,[],nn))}function getFrameElement(Mt){return Mt.parent&&Object.getPrototypeOf(Mt.parent)?Mt.frameElement:null}function getCssDimensions(Mt){const st=getComputedStyle$1(Mt);let nn=parseFloat(st.width)||0,rn=parseFloat(st.height)||0;const on=isHTMLElement(Mt),an=on?Mt.offsetWidth:nn,sn=on?Mt.offsetHeight:rn,un=round$2(nn)!==an||round$2(rn)!==sn;return un&&(nn=an,rn=sn),{width:nn,height:rn,$:un}}function unwrapElement(Mt){return isElement(Mt)?Mt:Mt.contextElement}function getScale(Mt){const st=unwrapElement(Mt);if(!isHTMLElement(st))return createCoords(1);const nn=st.getBoundingClientRect(),{width:rn,height:on,$:an}=getCssDimensions(st);let sn=(an?round$2(nn.width):nn.width)/rn,un=(an?round$2(nn.height):nn.height)/on;return(!sn||!Number.isFinite(sn))&&(sn=1),(!un||!Number.isFinite(un))&&(un=1),{x:sn,y:un}}const noOffsets=createCoords(0);function getVisualOffsets(Mt){const st=getWindow(Mt);return!isWebKit()||!st.visualViewport?noOffsets:{x:st.visualViewport.offsetLeft,y:st.visualViewport.offsetTop}}function shouldAddVisualOffsets(Mt,st,nn){return st===void 0&&(st=!1),!nn||st&&nn!==getWindow(Mt)?!1:st}function getBoundingClientRect(Mt,st,nn,rn){st===void 0&&(st=!1),nn===void 0&&(nn=!1);const on=Mt.getBoundingClientRect(),an=unwrapElement(Mt);let sn=createCoords(1);st&&(rn?isElement(rn)&&(sn=getScale(rn)):sn=getScale(Mt));const un=shouldAddVisualOffsets(an,nn,rn)?getVisualOffsets(an):createCoords(0);let Xr=(on.left+un.x)/sn.x,to=(on.top+un.y)/sn.y,uo=on.width/sn.x,hn=on.height/sn.y;if(an){const fn=getWindow(an),co=rn&&isElement(rn)?getWindow(rn):rn;let lo=fn,fo=getFrameElement(lo);for(;fo&&rn&&co!==lo;){const ho=getScale(fo),mo=fo.getBoundingClientRect(),Uo=getComputedStyle$1(fo),_d=mo.left+(fo.clientLeft+parseFloat(Uo.paddingLeft))*ho.x,tp=mo.top+(fo.clientTop+parseFloat(Uo.paddingTop))*ho.y;Xr*=ho.x,to*=ho.y,uo*=ho.x,hn*=ho.y,Xr+=_d,to+=tp,lo=getWindow(fo),fo=getFrameElement(lo)}}return rectToClientRect({width:uo,height:hn,x:Xr,y:to})}function getWindowScrollBarX(Mt,st){const nn=getNodeScroll(Mt).scrollLeft;return st?st.left+nn:getBoundingClientRect(getDocumentElement(Mt)).left+nn}function getHTMLOffset(Mt,st,nn){nn===void 0&&(nn=!1);const rn=Mt.getBoundingClientRect(),on=rn.left+st.scrollLeft-(nn?0:getWindowScrollBarX(Mt,rn)),an=rn.top+st.scrollTop;return{x:on,y:an}}function convertOffsetParentRelativeRectToViewportRelativeRect(Mt){let{elements:st,rect:nn,offsetParent:rn,strategy:on}=Mt;const an=on==="fixed",sn=getDocumentElement(rn),un=st?isTopLayer(st.floating):!1;if(rn===sn||un&&an)return nn;let Xr={scrollLeft:0,scrollTop:0},to=createCoords(1);const uo=createCoords(0),hn=isHTMLElement(rn);if((hn||!hn&&!an)&&((getNodeName(rn)!=="body"||isOverflowElement(sn))&&(Xr=getNodeScroll(rn)),isHTMLElement(rn))){const co=getBoundingClientRect(rn);to=getScale(rn),uo.x=co.x+rn.clientLeft,uo.y=co.y+rn.clientTop}const fn=sn&&!hn&&!an?getHTMLOffset(sn,Xr,!0):createCoords(0);return{width:nn.width*to.x,height:nn.height*to.y,x:nn.x*to.x-Xr.scrollLeft*to.x+uo.x+fn.x,y:nn.y*to.y-Xr.scrollTop*to.y+uo.y+fn.y}}function getClientRects(Mt){return Array.from(Mt.getClientRects())}function getDocumentRect(Mt){const st=getDocumentElement(Mt),nn=getNodeScroll(Mt),rn=Mt.ownerDocument.body,on=max$4(st.scrollWidth,st.clientWidth,rn.scrollWidth,rn.clientWidth),an=max$4(st.scrollHeight,st.clientHeight,rn.scrollHeight,rn.clientHeight);let sn=-nn.scrollLeft+getWindowScrollBarX(Mt);const un=-nn.scrollTop;return getComputedStyle$1(rn).direction==="rtl"&&(sn+=max$4(st.clientWidth,rn.clientWidth)-on),{width:on,height:an,x:sn,y:un}}function getViewportRect(Mt,st){const nn=getWindow(Mt),rn=getDocumentElement(Mt),on=nn.visualViewport;let an=rn.clientWidth,sn=rn.clientHeight,un=0,Xr=0;if(on){an=on.width,sn=on.height;const to=isWebKit();(!to||to&&st==="fixed")&&(un=on.offsetLeft,Xr=on.offsetTop)}return{width:an,height:sn,x:un,y:Xr}}function getInnerBoundingClientRect(Mt,st){const nn=getBoundingClientRect(Mt,!0,st==="fixed"),rn=nn.top+Mt.clientTop,on=nn.left+Mt.clientLeft,an=isHTMLElement(Mt)?getScale(Mt):createCoords(1),sn=Mt.clientWidth*an.x,un=Mt.clientHeight*an.y,Xr=on*an.x,to=rn*an.y;return{width:sn,height:un,x:Xr,y:to}}function getClientRectFromClippingAncestor(Mt,st,nn){let rn;if(st==="viewport")rn=getViewportRect(Mt,nn);else if(st==="document")rn=getDocumentRect(getDocumentElement(Mt));else if(isElement(st))rn=getInnerBoundingClientRect(st,nn);else{const on=getVisualOffsets(Mt);rn={x:st.x-on.x,y:st.y-on.y,width:st.width,height:st.height}}return rectToClientRect(rn)}function hasFixedPositionAncestor(Mt,st){const nn=getParentNode(Mt);return nn===st||!isElement(nn)||isLastTraversableNode(nn)?!1:getComputedStyle$1(nn).position==="fixed"||hasFixedPositionAncestor(nn,st)}function getClippingElementAncestors(Mt,st){const nn=st.get(Mt);if(nn)return nn;let rn=getOverflowAncestors(Mt,[],!1).filter(un=>isElement(un)&&getNodeName(un)!=="body"),on=null;const an=getComputedStyle$1(Mt).position==="fixed";let sn=an?getParentNode(Mt):Mt;for(;isElement(sn)&&!isLastTraversableNode(sn);){const un=getComputedStyle$1(sn),Xr=isContainingBlock(sn);!Xr&&un.position==="fixed"&&(on=null),(an?!Xr&&!on:!Xr&&un.position==="static"&&!!on&&["absolute","fixed"].includes(on.position)||isOverflowElement(sn)&&!Xr&&hasFixedPositionAncestor(Mt,sn))?rn=rn.filter(uo=>uo!==sn):on=un,sn=getParentNode(sn)}return st.set(Mt,rn),rn}function getClippingRect(Mt){let{element:st,boundary:nn,rootBoundary:rn,strategy:on}=Mt;const sn=[...nn==="clippingAncestors"?isTopLayer(st)?[]:getClippingElementAncestors(st,this._c):[].concat(nn),rn],un=sn[0],Xr=sn.reduce((to,uo)=>{const hn=getClientRectFromClippingAncestor(st,uo,on);return to.top=max$4(hn.top,to.top),to.right=min$4(hn.right,to.right),to.bottom=min$4(hn.bottom,to.bottom),to.left=max$4(hn.left,to.left),to},getClientRectFromClippingAncestor(st,un,on));return{width:Xr.right-Xr.left,height:Xr.bottom-Xr.top,x:Xr.left,y:Xr.top}}function getDimensions(Mt){const{width:st,height:nn}=getCssDimensions(Mt);return{width:st,height:nn}}function getRectRelativeToOffsetParent(Mt,st,nn){const rn=isHTMLElement(st),on=getDocumentElement(st),an=nn==="fixed",sn=getBoundingClientRect(Mt,!0,an,st);let un={scrollLeft:0,scrollTop:0};const Xr=createCoords(0);if(rn||!rn&&!an)if((getNodeName(st)!=="body"||isOverflowElement(on))&&(un=getNodeScroll(st)),rn){const fn=getBoundingClientRect(st,!0,an,st);Xr.x=fn.x+st.clientLeft,Xr.y=fn.y+st.clientTop}else on&&(Xr.x=getWindowScrollBarX(on));const to=on&&!rn&&!an?getHTMLOffset(on,un):createCoords(0),uo=sn.left+un.scrollLeft-Xr.x-to.x,hn=sn.top+un.scrollTop-Xr.y-to.y;return{x:uo,y:hn,width:sn.width,height:sn.height}}function isStaticPositioned(Mt){return getComputedStyle$1(Mt).position==="static"}function getTrueOffsetParent(Mt,st){if(!isHTMLElement(Mt)||getComputedStyle$1(Mt).position==="fixed")return null;if(st)return st(Mt);let nn=Mt.offsetParent;return getDocumentElement(Mt)===nn&&(nn=nn.ownerDocument.body),nn}function getOffsetParent(Mt,st){const nn=getWindow(Mt);if(isTopLayer(Mt))return nn;if(!isHTMLElement(Mt)){let on=getParentNode(Mt);for(;on&&!isLastTraversableNode(on);){if(isElement(on)&&!isStaticPositioned(on))return on;on=getParentNode(on)}return nn}let rn=getTrueOffsetParent(Mt,st);for(;rn&&isTableElement(rn)&&isStaticPositioned(rn);)rn=getTrueOffsetParent(rn,st);return rn&&isLastTraversableNode(rn)&&isStaticPositioned(rn)&&!isContainingBlock(rn)?nn:rn||getContainingBlock(Mt)||nn}const getElementRects=async function(Mt){const st=this.getOffsetParent||getOffsetParent,nn=this.getDimensions,rn=await nn(Mt.floating);return{reference:getRectRelativeToOffsetParent(Mt.reference,await st(Mt.floating),Mt.strategy),floating:{x:0,y:0,width:rn.width,height:rn.height}}};function isRTL(Mt){return getComputedStyle$1(Mt).direction==="rtl"}const platform={convertOffsetParentRelativeRectToViewportRelativeRect,getDocumentElement,getClippingRect,getOffsetParent,getElementRects,getClientRects,getDimensions,getScale,isElement,isRTL};function observeMove(Mt,st){let nn=null,rn;const on=getDocumentElement(Mt);function an(){var un;clearTimeout(rn),(un=nn)==null||un.disconnect(),nn=null}function sn(un,Xr){un===void 0&&(un=!1),Xr===void 0&&(Xr=1),an();const{left:to,top:uo,width:hn,height:fn}=Mt.getBoundingClientRect();if(un||st(),!hn||!fn)return;const co=floor(uo),lo=floor(on.clientWidth-(to+hn)),fo=floor(on.clientHeight-(uo+fn)),ho=floor(to),Uo={rootMargin:-co+"px "+-lo+"px "+-fo+"px "+-ho+"px",threshold:max$4(0,min$4(1,Xr))||1};let _d=!0;function tp(ep){const np=ep[0].intersectionRatio;if(np!==Xr){if(!_d)return sn();np?sn(!1,np):rn=setTimeout(()=>{sn(!1,1e-7)},1e3)}_d=!1}try{nn=new IntersectionObserver(tp,{...Uo,root:on.ownerDocument})}catch{nn=new IntersectionObserver(tp,Uo)}nn.observe(Mt)}return sn(!0),an}function autoUpdate(Mt,st,nn,rn){rn===void 0&&(rn={});const{ancestorScroll:on=!0,ancestorResize:an=!0,elementResize:sn=typeof ResizeObserver=="function",layoutShift:un=typeof IntersectionObserver=="function",animationFrame:Xr=!1}=rn,to=unwrapElement(Mt),uo=on||an?[...to?getOverflowAncestors(to):[],...getOverflowAncestors(st)]:[];uo.forEach(mo=>{on&&mo.addEventListener("scroll",nn,{passive:!0}),an&&mo.addEventListener("resize",nn)});const hn=to&&un?observeMove(to,nn):null;let fn=-1,co=null;sn&&(co=new ResizeObserver(mo=>{let[Uo]=mo;Uo&&Uo.target===to&&co&&(co.unobserve(st),cancelAnimationFrame(fn),fn=requestAnimationFrame(()=>{var _d;(_d=co)==null||_d.observe(st)})),nn()}),to&&!Xr&&co.observe(to),co.observe(st));let lo,fo=Xr?getBoundingClientRect(Mt):null;Xr&&ho();function ho(){const mo=getBoundingClientRect(Mt);fo&&(mo.x!==fo.x||mo.y!==fo.y||mo.width!==fo.width||mo.height!==fo.height)&&nn(),fo=mo,lo=requestAnimationFrame(ho)}return nn(),()=>{var mo;uo.forEach(Uo=>{on&&Uo.removeEventListener("scroll",nn),an&&Uo.removeEventListener("resize",nn)}),hn==null||hn(),(mo=co)==null||mo.disconnect(),co=null,Xr&&cancelAnimationFrame(lo)}}const offset$1=offset$2,shift$1=shift$2,flip$1=flip$2,size$1=size$2,hide$1=hide$2,arrow$2=arrow$3,limitShift$1=limitShift$2,computePosition=(Mt,st,nn)=>{const rn=new Map,on={platform,...nn},an={...on.platform,_c:rn};return computePosition$1(Mt,st,{...on,platform:an})};var index=typeof document<"u"?reactExports.useLayoutEffect:reactExports.useEffect;function deepEqual$1(Mt,st){if(Mt===st)return!0;if(typeof Mt!=typeof st)return!1;if(typeof Mt=="function"&&Mt.toString()===st.toString())return!0;let nn,rn,on;if(Mt&&st&&typeof Mt=="object"){if(Array.isArray(Mt)){if(nn=Mt.length,nn!==st.length)return!1;for(rn=nn;rn--!==0;)if(!deepEqual$1(Mt[rn],st[rn]))return!1;return!0}if(on=Object.keys(Mt),nn=on.length,nn!==Object.keys(st).length)return!1;for(rn=nn;rn--!==0;)if(!{}.hasOwnProperty.call(st,on[rn]))return!1;for(rn=nn;rn--!==0;){const an=on[rn];if(!(an==="_owner"&&Mt.$$typeof)&&!deepEqual$1(Mt[an],st[an]))return!1}return!0}return Mt!==Mt&&st!==st}function getDPR(Mt){return typeof window>"u"?1:(Mt.ownerDocument.defaultView||window).devicePixelRatio||1}function roundByDPR(Mt,st){const nn=getDPR(Mt);return Math.round(st*nn)/nn}function useLatestRef(Mt){const st=reactExports.useRef(Mt);return index(()=>{st.current=Mt}),st}function useFloating(Mt){Mt===void 0&&(Mt={});const{placement:st="bottom",strategy:nn="absolute",middleware:rn=[],platform:on,elements:{reference:an,floating:sn}={},transform:un=!0,whileElementsMounted:Xr,open:to}=Mt,[uo,hn]=reactExports.useState({x:0,y:0,strategy:nn,placement:st,middlewareData:{},isPositioned:!1}),[fn,co]=reactExports.useState(rn);deepEqual$1(fn,rn)||co(rn);const[lo,fo]=reactExports.useState(null),[ho,mo]=reactExports.useState(null),Uo=reactExports.useCallback(gp=>{gp!==np.current&&(np.current=gp,fo(gp))},[]),_d=reactExports.useCallback(gp=>{gp!==rp.current&&(rp.current=gp,mo(gp))},[]),tp=an||lo,ep=sn||ho,np=reactExports.useRef(null),rp=reactExports.useRef(null),ip=reactExports.useRef(uo),op=Xr!=null,ap=useLatestRef(Xr),sp=useLatestRef(on),up=useLatestRef(to),pp=reactExports.useCallback(()=>{if(!np.current||!rp.current)return;const gp={placement:st,strategy:nn,middleware:fn};sp.current&&(gp.platform=sp.current),computePosition(np.current,rp.current,gp).then(mp=>{const xp={...mp,isPositioned:up.current!==!1};lp.current&&!deepEqual$1(ip.current,xp)&&(ip.current=xp,reactDomExports.flushSync(()=>{hn(xp)}))})},[fn,st,nn,sp,up]);index(()=>{to===!1&&ip.current.isPositioned&&(ip.current.isPositioned=!1,hn(gp=>({...gp,isPositioned:!1})))},[to]);const lp=reactExports.useRef(!1);index(()=>(lp.current=!0,()=>{lp.current=!1}),[]),index(()=>{if(tp&&(np.current=tp),ep&&(rp.current=ep),tp&&ep){if(ap.current)return ap.current(tp,ep,pp);pp()}},[tp,ep,pp,ap,op]);const dp=reactExports.useMemo(()=>({reference:np,floating:rp,setReference:Uo,setFloating:_d}),[Uo,_d]),cp=reactExports.useMemo(()=>({reference:tp,floating:ep}),[tp,ep]),fp=reactExports.useMemo(()=>{const gp={position:nn,left:0,top:0};if(!cp.floating)return gp;const mp=roundByDPR(cp.floating,uo.x),xp=roundByDPR(cp.floating,uo.y);return un?{...gp,transform:"translate("+mp+"px, "+xp+"px)",...getDPR(cp.floating)>=1.5&&{willChange:"transform"}}:{position:nn,left:mp,top:xp}},[nn,un,cp.floating,uo.x,uo.y]);return reactExports.useMemo(()=>({...uo,update:pp,refs:dp,elements:cp,floatingStyles:fp}),[uo,pp,dp,cp,fp])}const arrow$1=Mt=>{function st(nn){return{}.hasOwnProperty.call(nn,"current")}return{name:"arrow",options:Mt,fn(nn){const{element:rn,padding:on}=typeof Mt=="function"?Mt(nn):Mt;return rn&&st(rn)?rn.current!=null?arrow$2({element:rn.current,padding:on}).fn(nn):{}:rn?arrow$2({element:rn,padding:on}).fn(nn):{}}}},offset=(Mt,st)=>({...offset$1(Mt),options:[Mt,st]}),shift=(Mt,st)=>({...shift$1(Mt),options:[Mt,st]}),limitShift=(Mt,st)=>({...limitShift$1(Mt),options:[Mt,st]}),flip=(Mt,st)=>({...flip$1(Mt),options:[Mt,st]}),size=(Mt,st)=>({...size$1(Mt),options:[Mt,st]}),hide=(Mt,st)=>({...hide$1(Mt),options:[Mt,st]}),arrow=(Mt,st)=>({...arrow$1(Mt),options:[Mt,st]});var NAME="Arrow",Arrow$1=reactExports.forwardRef((Mt,st)=>{const{children:nn,width:rn=10,height:on=5,...an}=Mt;return jsxRuntimeExports.jsx(Primitive.svg,{...an,ref:st,width:rn,height:on,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:Mt.asChild?nn:jsxRuntimeExports.jsx("polygon",{points:"0,0 30,0 15,10"})})});Arrow$1.displayName=NAME;var Root$3=Arrow$1;function createContextScope$1(Mt,st=[]){let nn=[];function rn(an,sn){const un=reactExports.createContext(sn),Xr=nn.length;nn=[...nn,sn];function to(hn){const{scope:fn,children:co,...lo}=hn,fo=(fn==null?void 0:fn[Mt][Xr])||un,ho=reactExports.useMemo(()=>lo,Object.values(lo));return jsxRuntimeExports.jsx(fo.Provider,{value:ho,children:co})}function uo(hn,fn){const co=(fn==null?void 0:fn[Mt][Xr])||un,lo=reactExports.useContext(co);if(lo)return lo;if(sn!==void 0)return sn;throw new Error(`\`${hn}\` must be used within \`${an}\``)}return to.displayName=an+"Provider",[to,uo]}const on=()=>{const an=nn.map(sn=>reactExports.createContext(sn));return function(un){const Xr=(un==null?void 0:un[Mt])||an;return reactExports.useMemo(()=>({[`__scope${Mt}`]:{...un,[Mt]:Xr}}),[un,Xr])}};return on.scopeName=Mt,[rn,composeContextScopes$1(on,...st)]}function composeContextScopes$1(...Mt){const st=Mt[0];if(Mt.length===1)return st;const nn=()=>{const rn=Mt.map(on=>({useScope:on(),scopeName:on.scopeName}));return function(an){const sn=rn.reduce((un,{useScope:Xr,scopeName:to})=>{const hn=Xr(an)[`__scope${to}`];return{...un,...hn}},{});return reactExports.useMemo(()=>({[`__scope${st.scopeName}`]:sn}),[sn])}};return nn.scopeName=st.scopeName,nn}function useSize(Mt){const[st,nn]=reactExports.useState(void 0);return useLayoutEffect2(()=>{if(Mt){nn({width:Mt.offsetWidth,height:Mt.offsetHeight});const rn=new ResizeObserver(on=>{if(!Array.isArray(on)||!on.length)return;const an=on[0];let sn,un;if("borderBoxSize"in an){const Xr=an.borderBoxSize,to=Array.isArray(Xr)?Xr[0]:Xr;sn=to.inlineSize,un=to.blockSize}else sn=Mt.offsetWidth,un=Mt.offsetHeight;nn({width:sn,height:un})});return rn.observe(Mt,{box:"border-box"}),()=>rn.unobserve(Mt)}else nn(void 0)},[Mt]),st}var POPPER_NAME="Popper",[createPopperContext,createPopperScope]=createContextScope$1(POPPER_NAME),[PopperProvider,usePopperContext]=createPopperContext(POPPER_NAME),Popper=Mt=>{const{__scopePopper:st,children:nn}=Mt,[rn,on]=reactExports.useState(null);return jsxRuntimeExports.jsx(PopperProvider,{scope:st,anchor:rn,onAnchorChange:on,children:nn})};Popper.displayName=POPPER_NAME;var ANCHOR_NAME$1="PopperAnchor",PopperAnchor=reactExports.forwardRef((Mt,st)=>{const{__scopePopper:nn,virtualRef:rn,...on}=Mt,an=usePopperContext(ANCHOR_NAME$1,nn),sn=reactExports.useRef(null),un=useComposedRefs(st,sn);return reactExports.useEffect(()=>{an.onAnchorChange((rn==null?void 0:rn.current)||sn.current)}),rn?null:jsxRuntimeExports.jsx(Primitive.div,{...on,ref:un})});PopperAnchor.displayName=ANCHOR_NAME$1;var CONTENT_NAME$4="PopperContent",[PopperContentProvider,useContentContext]=createPopperContext(CONTENT_NAME$4),PopperContent=reactExports.forwardRef((Mt,st)=>{var Up,Kp,Mp,zp,Bp,Pp;const{__scopePopper:nn,side:rn="bottom",sideOffset:on=0,align:an="center",alignOffset:sn=0,arrowPadding:un=0,avoidCollisions:Xr=!0,collisionBoundary:to=[],collisionPadding:uo=0,sticky:hn="partial",hideWhenDetached:fn=!1,updatePositionStrategy:co="optimized",onPlaced:lo,...fo}=Mt,ho=usePopperContext(CONTENT_NAME$4,nn),[mo,Uo]=reactExports.useState(null),_d=useComposedRefs(st,Gp=>Uo(Gp)),[tp,ep]=reactExports.useState(null),np=useSize(tp),rp=(np==null?void 0:np.width)??0,ip=(np==null?void 0:np.height)??0,op=rn+(an!=="center"?"-"+an:""),ap=typeof uo=="number"?uo:{top:0,right:0,bottom:0,left:0,...uo},sp=Array.isArray(to)?to:[to],up=sp.length>0,pp={padding:ap,boundary:sp.filter(isNotNull),altBoundary:up},{refs:lp,floatingStyles:dp,placement:cp,isPositioned:fp,middlewareData:gp}=useFloating({strategy:"fixed",placement:op,whileElementsMounted:(...Gp)=>autoUpdate(...Gp,{animationFrame:co==="always"}),elements:{reference:ho.anchor},middleware:[offset({mainAxis:on+ip,alignmentAxis:sn}),Xr&&shift({mainAxis:!0,crossAxis:!1,limiter:hn==="partial"?limitShift():void 0,...pp}),Xr&&flip({...pp}),size({...pp,apply:({elements:Gp,rects:Wp,availableWidth:Xp,availableHeight:Qp})=>{const{width:om,height:ym}=Wp.reference,mm=Gp.floating.style;mm.setProperty("--radix-popper-available-width",`${Xp}px`),mm.setProperty("--radix-popper-available-height",`${Qp}px`),mm.setProperty("--radix-popper-anchor-width",`${om}px`),mm.setProperty("--radix-popper-anchor-height",`${ym}px`)}}),tp&&arrow({element:tp,padding:un}),transformOrigin({arrowWidth:rp,arrowHeight:ip}),fn&&hide({strategy:"referenceHidden",...pp})]}),[mp,xp]=getSideAndAlignFromPlacement(cp),_p=useCallbackRef$1(lo);useLayoutEffect2(()=>{fp&&(_p==null||_p())},[fp,_p]);const Sp=(Up=gp.arrow)==null?void 0:Up.x,Cp=(Kp=gp.arrow)==null?void 0:Kp.y,jp=((Mp=gp.arrow)==null?void 0:Mp.centerOffset)!==0,[Dp,Vp]=reactExports.useState();return useLayoutEffect2(()=>{mo&&Vp(window.getComputedStyle(mo).zIndex)},[mo]),jsxRuntimeExports.jsx("div",{ref:lp.setFloating,"data-radix-popper-content-wrapper":"",style:{...dp,transform:fp?dp.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Dp,"--radix-popper-transform-origin":[(zp=gp.transformOrigin)==null?void 0:zp.x,(Bp=gp.transformOrigin)==null?void 0:Bp.y].join(" "),...((Pp=gp.hide)==null?void 0:Pp.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:Mt.dir,children:jsxRuntimeExports.jsx(PopperContentProvider,{scope:nn,placedSide:mp,onArrowChange:ep,arrowX:Sp,arrowY:Cp,shouldHideArrow:jp,children:jsxRuntimeExports.jsx(Primitive.div,{"data-side":mp,"data-align":xp,...fo,ref:_d,style:{...fo.style,animation:fp?void 0:"none"}})})})});PopperContent.displayName=CONTENT_NAME$4;var ARROW_NAME$2="PopperArrow",OPPOSITE_SIDE={top:"bottom",right:"left",bottom:"top",left:"right"},PopperArrow=reactExports.forwardRef(function(st,nn){const{__scopePopper:rn,...on}=st,an=useContentContext(ARROW_NAME$2,rn),sn=OPPOSITE_SIDE[an.placedSide];return jsxRuntimeExports.jsx("span",{ref:an.onArrowChange,style:{position:"absolute",left:an.arrowX,top:an.arrowY,[sn]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[an.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[an.placedSide],visibility:an.shouldHideArrow?"hidden":void 0},children:jsxRuntimeExports.jsx(Root$3,{...on,ref:nn,style:{...on.style,display:"block"}})})});PopperArrow.displayName=ARROW_NAME$2;function isNotNull(Mt){return Mt!==null}var transformOrigin=Mt=>({name:"transformOrigin",options:Mt,fn(st){var ho,mo,Uo;const{placement:nn,rects:rn,middlewareData:on}=st,sn=((ho=on.arrow)==null?void 0:ho.centerOffset)!==0,un=sn?0:Mt.arrowWidth,Xr=sn?0:Mt.arrowHeight,[to,uo]=getSideAndAlignFromPlacement(nn),hn={start:"0%",center:"50%",end:"100%"}[uo],fn=(((mo=on.arrow)==null?void 0:mo.x)??0)+un/2,co=(((Uo=on.arrow)==null?void 0:Uo.y)??0)+Xr/2;let lo="",fo="";return to==="bottom"?(lo=sn?hn:`${fn}px`,fo=`${-Xr}px`):to==="top"?(lo=sn?hn:`${fn}px`,fo=`${rn.floating.height+Xr}px`):to==="right"?(lo=`${-Xr}px`,fo=sn?hn:`${co}px`):to==="left"&&(lo=`${rn.floating.width+Xr}px`,fo=sn?hn:`${co}px`),{data:{x:lo,y:fo}}}});function getSideAndAlignFromPlacement(Mt){const[st,nn="center"]=Mt.split("-");return[st,nn]}var Root2$2=Popper,Anchor=PopperAnchor,Content$2=PopperContent,Arrow=PopperArrow;function createContextScope(Mt,st=[]){let nn=[];function rn(an,sn){const un=reactExports.createContext(sn),Xr=nn.length;nn=[...nn,sn];function to(hn){const{scope:fn,children:co,...lo}=hn,fo=(fn==null?void 0:fn[Mt][Xr])||un,ho=reactExports.useMemo(()=>lo,Object.values(lo));return jsxRuntimeExports.jsx(fo.Provider,{value:ho,children:co})}function uo(hn,fn){const co=(fn==null?void 0:fn[Mt][Xr])||un,lo=reactExports.useContext(co);if(lo)return lo;if(sn!==void 0)return sn;throw new Error(`\`${hn}\` must be used within \`${an}\``)}return to.displayName=an+"Provider",[to,uo]}const on=()=>{const an=nn.map(sn=>reactExports.createContext(sn));return function(un){const Xr=(un==null?void 0:un[Mt])||an;return reactExports.useMemo(()=>({[`__scope${Mt}`]:{...un,[Mt]:Xr}}),[un,Xr])}};return on.scopeName=Mt,[rn,composeContextScopes(on,...st)]}function composeContextScopes(...Mt){const st=Mt[0];if(Mt.length===1)return st;const nn=()=>{const rn=Mt.map(on=>({useScope:on(),scopeName:on.scopeName}));return function(an){const sn=rn.reduce((un,{useScope:Xr,scopeName:to})=>{const hn=Xr(an)[`__scope${to}`];return{...un,...hn}},{});return reactExports.useMemo(()=>({[`__scope${st.scopeName}`]:sn}),[sn])}};return nn.scopeName=st.scopeName,nn}var ENTRY_FOCUS="rovingFocusGroup.onEntryFocus",EVENT_OPTIONS={bubbles:!1,cancelable:!0},GROUP_NAME$2="RovingFocusGroup",[Collection$2,useCollection$2,createCollectionScope$2]=createCollection(GROUP_NAME$2),[createRovingFocusGroupContext,createRovingFocusGroupScope]=createContextScope(GROUP_NAME$2,[createCollectionScope$2]),[RovingFocusProvider,useRovingFocusContext]=createRovingFocusGroupContext(GROUP_NAME$2),RovingFocusGroup=reactExports.forwardRef((Mt,st)=>jsxRuntimeExports.jsx(Collection$2.Provider,{scope:Mt.__scopeRovingFocusGroup,children:jsxRuntimeExports.jsx(Collection$2.Slot,{scope:Mt.__scopeRovingFocusGroup,children:jsxRuntimeExports.jsx(RovingFocusGroupImpl,{...Mt,ref:st})})}));RovingFocusGroup.displayName=GROUP_NAME$2;var RovingFocusGroupImpl=reactExports.forwardRef((Mt,st)=>{const{__scopeRovingFocusGroup:nn,orientation:rn,loop:on=!1,dir:an,currentTabStopId:sn,defaultCurrentTabStopId:un,onCurrentTabStopIdChange:Xr,onEntryFocus:to,preventScrollOnEntryFocus:uo=!1,...hn}=Mt,fn=reactExports.useRef(null),co=useComposedRefs(st,fn),lo=useDirection(an),[fo=null,ho]=useControllableState({prop:sn,defaultProp:un,onChange:Xr}),[mo,Uo]=reactExports.useState(!1),_d=useCallbackRef$1(to),tp=useCollection$2(nn),ep=reactExports.useRef(!1),[np,rp]=reactExports.useState(0);return reactExports.useEffect(()=>{const ip=fn.current;if(ip)return ip.addEventListener(ENTRY_FOCUS,_d),()=>ip.removeEventListener(ENTRY_FOCUS,_d)},[_d]),jsxRuntimeExports.jsx(RovingFocusProvider,{scope:nn,orientation:rn,dir:lo,loop:on,currentTabStopId:fo,onItemFocus:reactExports.useCallback(ip=>ho(ip),[ho]),onItemShiftTab:reactExports.useCallback(()=>Uo(!0),[]),onFocusableItemAdd:reactExports.useCallback(()=>rp(ip=>ip+1),[]),onFocusableItemRemove:reactExports.useCallback(()=>rp(ip=>ip-1),[]),children:jsxRuntimeExports.jsx(Primitive.div,{tabIndex:mo||np===0?-1:0,"data-orientation":rn,...hn,ref:co,style:{outline:"none",...Mt.style},onMouseDown:composeEventHandlers(Mt.onMouseDown,()=>{ep.current=!0}),onFocus:composeEventHandlers(Mt.onFocus,ip=>{const op=!ep.current;if(ip.target===ip.currentTarget&&op&&!mo){const ap=new CustomEvent(ENTRY_FOCUS,EVENT_OPTIONS);if(ip.currentTarget.dispatchEvent(ap),!ap.defaultPrevented){const sp=tp().filter(cp=>cp.focusable),up=sp.find(cp=>cp.active),pp=sp.find(cp=>cp.id===fo),dp=[up,pp,...sp].filter(Boolean).map(cp=>cp.ref.current);focusFirst$1(dp,uo)}}ep.current=!1}),onBlur:composeEventHandlers(Mt.onBlur,()=>Uo(!1))})})}),ITEM_NAME$2="RovingFocusGroupItem",RovingFocusGroupItem=reactExports.forwardRef((Mt,st)=>{const{__scopeRovingFocusGroup:nn,focusable:rn=!0,active:on=!1,tabStopId:an,...sn}=Mt,un=useId(),Xr=an||un,to=useRovingFocusContext(ITEM_NAME$2,nn),uo=to.currentTabStopId===Xr,hn=useCollection$2(nn),{onFocusableItemAdd:fn,onFocusableItemRemove:co}=to;return reactExports.useEffect(()=>{if(rn)return fn(),()=>co()},[rn,fn,co]),jsxRuntimeExports.jsx(Collection$2.ItemSlot,{scope:nn,id:Xr,focusable:rn,active:on,children:jsxRuntimeExports.jsx(Primitive.span,{tabIndex:uo?0:-1,"data-orientation":to.orientation,...sn,ref:st,onMouseDown:composeEventHandlers(Mt.onMouseDown,lo=>{rn?to.onItemFocus(Xr):lo.preventDefault()}),onFocus:composeEventHandlers(Mt.onFocus,()=>to.onItemFocus(Xr)),onKeyDown:composeEventHandlers(Mt.onKeyDown,lo=>{if(lo.key==="Tab"&&lo.shiftKey){to.onItemShiftTab();return}if(lo.target!==lo.currentTarget)return;const fo=getFocusIntent(lo,to.orientation,to.dir);if(fo!==void 0){if(lo.metaKey||lo.ctrlKey||lo.altKey||lo.shiftKey)return;lo.preventDefault();let mo=hn().filter(Uo=>Uo.focusable).map(Uo=>Uo.ref.current);if(fo==="last")mo.reverse();else if(fo==="prev"||fo==="next"){fo==="prev"&&mo.reverse();const Uo=mo.indexOf(lo.currentTarget);mo=to.loop?wrapArray$1(mo,Uo+1):mo.slice(Uo+1)}setTimeout(()=>focusFirst$1(mo))}})})})});RovingFocusGroupItem.displayName=ITEM_NAME$2;var MAP_KEY_TO_FOCUS_INTENT={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function getDirectionAwareKey(Mt,st){return st!=="rtl"?Mt:Mt==="ArrowLeft"?"ArrowRight":Mt==="ArrowRight"?"ArrowLeft":Mt}function getFocusIntent(Mt,st,nn){const rn=getDirectionAwareKey(Mt.key,nn);if(!(st==="vertical"&&["ArrowLeft","ArrowRight"].includes(rn))&&!(st==="horizontal"&&["ArrowUp","ArrowDown"].includes(rn)))return MAP_KEY_TO_FOCUS_INTENT[rn]}function focusFirst$1(Mt,st=!1){const nn=document.activeElement;for(const rn of Mt)if(rn===nn||(rn.focus({preventScroll:st}),document.activeElement!==nn))return}function wrapArray$1(Mt,st){return Mt.map((nn,rn)=>Mt[(st+rn)%Mt.length])}var Root$2=RovingFocusGroup,Item=RovingFocusGroupItem,getDefaultParent=function(Mt){if(typeof document>"u")return null;var st=Array.isArray(Mt)?Mt[0]:Mt;return st.ownerDocument.body},counterMap=new WeakMap,uncontrolledNodes=new WeakMap,markerMap={},lockCount=0,unwrapHost=function(Mt){return Mt&&(Mt.host||unwrapHost(Mt.parentNode))},correctTargets=function(Mt,st){return st.map(function(nn){if(Mt.contains(nn))return nn;var rn=unwrapHost(nn);return rn&&Mt.contains(rn)?rn:(console.error("aria-hidden",nn,"in not contained inside",Mt,". Doing nothing"),null)}).filter(function(nn){return!!nn})},applyAttributeToOthers=function(Mt,st,nn,rn){var on=correctTargets(st,Array.isArray(Mt)?Mt:[Mt]);markerMap[nn]||(markerMap[nn]=new WeakMap);var an=markerMap[nn],sn=[],un=new Set,Xr=new Set(on),to=function(hn){!hn||un.has(hn)||(un.add(hn),to(hn.parentNode))};on.forEach(to);var uo=function(hn){!hn||Xr.has(hn)||Array.prototype.forEach.call(hn.children,function(fn){if(un.has(fn))uo(fn);else try{var co=fn.getAttribute(rn),lo=co!==null&&co!=="false",fo=(counterMap.get(fn)||0)+1,ho=(an.get(fn)||0)+1;counterMap.set(fn,fo),an.set(fn,ho),sn.push(fn),fo===1&&lo&&uncontrolledNodes.set(fn,!0),ho===1&&fn.setAttribute(nn,"true"),lo||fn.setAttribute(rn,"true")}catch(mo){console.error("aria-hidden: cannot operate on ",fn,mo)}})};return uo(st),un.clear(),lockCount++,function(){sn.forEach(function(hn){var fn=counterMap.get(hn)-1,co=an.get(hn)-1;counterMap.set(hn,fn),an.set(hn,co),fn||(uncontrolledNodes.has(hn)||hn.removeAttribute(rn),uncontrolledNodes.delete(hn)),co||hn.removeAttribute(nn)}),lockCount--,lockCount||(counterMap=new WeakMap,counterMap=new WeakMap,uncontrolledNodes=new WeakMap,markerMap={})}},hideOthers=function(Mt,st,nn){nn===void 0&&(nn="data-aria-hidden");var rn=Array.from(Array.isArray(Mt)?Mt:[Mt]),on=getDefaultParent(Mt);return on?(rn.push.apply(rn,Array.from(on.querySelectorAll("[aria-live]"))),applyAttributeToOthers(rn,on,nn,"aria-hidden")):function(){return null}},__assign=function(){return __assign=Object.assign||function(st){for(var nn,rn=1,on=arguments.length;rn<on;rn++){nn=arguments[rn];for(var an in nn)Object.prototype.hasOwnProperty.call(nn,an)&&(st[an]=nn[an])}return st},__assign.apply(this,arguments)};function __rest(Mt,st){var nn={};for(var rn in Mt)Object.prototype.hasOwnProperty.call(Mt,rn)&&st.indexOf(rn)<0&&(nn[rn]=Mt[rn]);if(Mt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var on=0,rn=Object.getOwnPropertySymbols(Mt);on<rn.length;on++)st.indexOf(rn[on])<0&&Object.prototype.propertyIsEnumerable.call(Mt,rn[on])&&(nn[rn[on]]=Mt[rn[on]]);return nn}function __spreadArray(Mt,st,nn){if(nn||arguments.length===2)for(var rn=0,on=st.length,an;rn<on;rn++)(an||!(rn in st))&&(an||(an=Array.prototype.slice.call(st,0,rn)),an[rn]=st[rn]);return Mt.concat(an||Array.prototype.slice.call(st))}typeof SuppressedError=="function"&&SuppressedError;var zeroRightClassName="right-scroll-bar-position",fullWidthClassName="width-before-scroll-bar",noScrollbarsClassName="with-scroll-bars-hidden",removedBarSizeVariable="--removed-body-scroll-bar-size";function assignRef(Mt,st){return typeof Mt=="function"?Mt(st):Mt&&(Mt.current=st),Mt}function useCallbackRef(Mt,st){var nn=reactExports.useState(function(){return{value:Mt,callback:st,facade:{get current(){return nn.value},set current(rn){var on=nn.value;on!==rn&&(nn.value=rn,nn.callback(rn,on))}}}})[0];return nn.callback=st,nn.facade}var useIsomorphicLayoutEffect=typeof window<"u"?reactExports.useLayoutEffect:reactExports.useEffect,currentValues=new WeakMap;function useMergeRefs(Mt,st){var nn=useCallbackRef(null,function(rn){return Mt.forEach(function(on){return assignRef(on,rn)})});return useIsomorphicLayoutEffect(function(){var rn=currentValues.get(nn);if(rn){var on=new Set(rn),an=new Set(Mt),sn=nn.current;on.forEach(function(un){an.has(un)||assignRef(un,null)}),an.forEach(function(un){on.has(un)||assignRef(un,sn)})}currentValues.set(nn,Mt)},[Mt]),nn}function ItoI(Mt){return Mt}function innerCreateMedium(Mt,st){st===void 0&&(st=ItoI);var nn=[],rn=!1,on={read:function(){if(rn)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return nn.length?nn[nn.length-1]:Mt},useMedium:function(an){var sn=st(an,rn);return nn.push(sn),function(){nn=nn.filter(function(un){return un!==sn})}},assignSyncMedium:function(an){for(rn=!0;nn.length;){var sn=nn;nn=[],sn.forEach(an)}nn={push:function(un){return an(un)},filter:function(){return nn}}},assignMedium:function(an){rn=!0;var sn=[];if(nn.length){var un=nn;nn=[],un.forEach(an),sn=nn}var Xr=function(){var uo=sn;sn=[],uo.forEach(an)},to=function(){return Promise.resolve().then(Xr)};to(),nn={push:function(uo){sn.push(uo),to()},filter:function(uo){return sn=sn.filter(uo),nn}}}};return on}function createSidecarMedium(Mt){Mt===void 0&&(Mt={});var st=innerCreateMedium(null);return st.options=__assign({async:!0,ssr:!1},Mt),st}var SideCar$1=function(Mt){var st=Mt.sideCar,nn=__rest(Mt,["sideCar"]);if(!st)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var rn=st.read();if(!rn)throw new Error("Sidecar medium not found");return reactExports.createElement(rn,__assign({},nn))};SideCar$1.isSideCarExport=!0;function exportSidecar(Mt,st){return Mt.useMedium(st),SideCar$1}var effectCar=createSidecarMedium(),nothing=function(){},RemoveScroll=reactExports.forwardRef(function(Mt,st){var nn=reactExports.useRef(null),rn=reactExports.useState({onScrollCapture:nothing,onWheelCapture:nothing,onTouchMoveCapture:nothing}),on=rn[0],an=rn[1],sn=Mt.forwardProps,un=Mt.children,Xr=Mt.className,to=Mt.removeScrollBar,uo=Mt.enabled,hn=Mt.shards,fn=Mt.sideCar,co=Mt.noIsolation,lo=Mt.inert,fo=Mt.allowPinchZoom,ho=Mt.as,mo=ho===void 0?"div":ho,Uo=Mt.gapMode,_d=__rest(Mt,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),tp=fn,ep=useMergeRefs([nn,st]),np=__assign(__assign({},_d),on);return reactExports.createElement(reactExports.Fragment,null,uo&&reactExports.createElement(tp,{sideCar:effectCar,removeScrollBar:to,shards:hn,noIsolation:co,inert:lo,setCallbacks:an,allowPinchZoom:!!fo,lockRef:nn,gapMode:Uo}),sn?reactExports.cloneElement(reactExports.Children.only(un),__assign(__assign({},np),{ref:ep})):reactExports.createElement(mo,__assign({},np,{className:Xr,ref:ep}),un))});RemoveScroll.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};RemoveScroll.classNames={fullWidth:fullWidthClassName,zeroRight:zeroRightClassName};var getNonce=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function makeStyleTag(){if(!document)return null;var Mt=document.createElement("style");Mt.type="text/css";var st=getNonce();return st&&Mt.setAttribute("nonce",st),Mt}function injectStyles(Mt,st){Mt.styleSheet?Mt.styleSheet.cssText=st:Mt.appendChild(document.createTextNode(st))}function insertStyleTag(Mt){var st=document.head||document.getElementsByTagName("head")[0];st.appendChild(Mt)}var stylesheetSingleton=function(){var Mt=0,st=null;return{add:function(nn){Mt==0&&(st=makeStyleTag())&&(injectStyles(st,nn),insertStyleTag(st)),Mt++},remove:function(){Mt--,!Mt&&st&&(st.parentNode&&st.parentNode.removeChild(st),st=null)}}},styleHookSingleton=function(){var Mt=stylesheetSingleton();return function(st,nn){reactExports.useEffect(function(){return Mt.add(st),function(){Mt.remove()}},[st&&nn])}},styleSingleton=function(){var Mt=styleHookSingleton(),st=function(nn){var rn=nn.styles,on=nn.dynamic;return Mt(rn,on),null};return st},zeroGap={left:0,top:0,right:0,gap:0},parse$1=function(Mt){return parseInt(Mt||"",10)||0},getOffset$1=function(Mt){var st=window.getComputedStyle(document.body),nn=st[Mt==="padding"?"paddingLeft":"marginLeft"],rn=st[Mt==="padding"?"paddingTop":"marginTop"],on=st[Mt==="padding"?"paddingRight":"marginRight"];return[parse$1(nn),parse$1(rn),parse$1(on)]},getGapWidth=function(Mt){if(Mt===void 0&&(Mt="margin"),typeof window>"u")return zeroGap;var st=getOffset$1(Mt),nn=document.documentElement.clientWidth,rn=window.innerWidth;return{left:st[0],top:st[1],right:st[2],gap:Math.max(0,rn-nn+st[2]-st[0])}},Style=styleSingleton(),lockAttribute="data-scroll-locked",getStyles=function(Mt,st,nn,rn){var on=Mt.left,an=Mt.top,sn=Mt.right,un=Mt.gap;return nn===void 0&&(nn="margin"),`
  .`.concat(noScrollbarsClassName,` {
   overflow: hidden `).concat(rn,`;
   padding-right: `).concat(un,"px ").concat(rn,`;
  }
  body[`).concat(lockAttribute,`] {
    overflow: hidden `).concat(rn,`;
    overscroll-behavior: contain;
    `).concat([st&&"position: relative ".concat(rn,";"),nn==="margin"&&`
    padding-left: `.concat(on,`px;
    padding-top: `).concat(an,`px;
    padding-right: `).concat(sn,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(un,"px ").concat(rn,`;
    `),nn==="padding"&&"padding-right: ".concat(un,"px ").concat(rn,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(zeroRightClassName,` {
    right: `).concat(un,"px ").concat(rn,`;
  }
  
  .`).concat(fullWidthClassName,` {
    margin-right: `).concat(un,"px ").concat(rn,`;
  }
  
  .`).concat(zeroRightClassName," .").concat(zeroRightClassName,` {
    right: 0 `).concat(rn,`;
  }
  
  .`).concat(fullWidthClassName," .").concat(fullWidthClassName,` {
    margin-right: 0 `).concat(rn,`;
  }
  
  body[`).concat(lockAttribute,`] {
    `).concat(removedBarSizeVariable,": ").concat(un,`px;
  }
`)},getCurrentUseCounter=function(){var Mt=parseInt(document.body.getAttribute(lockAttribute)||"0",10);return isFinite(Mt)?Mt:0},useLockAttribute=function(){reactExports.useEffect(function(){return document.body.setAttribute(lockAttribute,(getCurrentUseCounter()+1).toString()),function(){var Mt=getCurrentUseCounter()-1;Mt<=0?document.body.removeAttribute(lockAttribute):document.body.setAttribute(lockAttribute,Mt.toString())}},[])},RemoveScrollBar=function(Mt){var st=Mt.noRelative,nn=Mt.noImportant,rn=Mt.gapMode,on=rn===void 0?"margin":rn;useLockAttribute();var an=reactExports.useMemo(function(){return getGapWidth(on)},[on]);return reactExports.createElement(Style,{styles:getStyles(an,!st,on,nn?"":"!important")})},passiveSupported=!1;if(typeof window<"u")try{var options=Object.defineProperty({},"passive",{get:function(){return passiveSupported=!0,!0}});window.addEventListener("test",options,options),window.removeEventListener("test",options,options)}catch{passiveSupported=!1}var nonPassive=passiveSupported?{passive:!1}:!1,alwaysContainsScroll=function(Mt){return Mt.tagName==="TEXTAREA"},elementCanBeScrolled=function(Mt,st){if(!(Mt instanceof Element))return!1;var nn=window.getComputedStyle(Mt);return nn[st]!=="hidden"&&!(nn.overflowY===nn.overflowX&&!alwaysContainsScroll(Mt)&&nn[st]==="visible")},elementCouldBeVScrolled=function(Mt){return elementCanBeScrolled(Mt,"overflowY")},elementCouldBeHScrolled=function(Mt){return elementCanBeScrolled(Mt,"overflowX")},locationCouldBeScrolled=function(Mt,st){var nn=st.ownerDocument,rn=st;do{typeof ShadowRoot<"u"&&rn instanceof ShadowRoot&&(rn=rn.host);var on=elementCouldBeScrolled(Mt,rn);if(on){var an=getScrollVariables(Mt,rn),sn=an[1],un=an[2];if(sn>un)return!0}rn=rn.parentNode}while(rn&&rn!==nn.body);return!1},getVScrollVariables=function(Mt){var st=Mt.scrollTop,nn=Mt.scrollHeight,rn=Mt.clientHeight;return[st,nn,rn]},getHScrollVariables=function(Mt){var st=Mt.scrollLeft,nn=Mt.scrollWidth,rn=Mt.clientWidth;return[st,nn,rn]},elementCouldBeScrolled=function(Mt,st){return Mt==="v"?elementCouldBeVScrolled(st):elementCouldBeHScrolled(st)},getScrollVariables=function(Mt,st){return Mt==="v"?getVScrollVariables(st):getHScrollVariables(st)},getDirectionFactor=function(Mt,st){return Mt==="h"&&st==="rtl"?-1:1},handleScroll=function(Mt,st,nn,rn,on){var an=getDirectionFactor(Mt,window.getComputedStyle(st).direction),sn=an*rn,un=nn.target,Xr=st.contains(un),to=!1,uo=sn>0,hn=0,fn=0;do{var co=getScrollVariables(Mt,un),lo=co[0],fo=co[1],ho=co[2],mo=fo-ho-an*lo;(lo||mo)&&elementCouldBeScrolled(Mt,un)&&(hn+=mo,fn+=lo),un instanceof ShadowRoot?un=un.host:un=un.parentNode}while(!Xr&&un!==document.body||Xr&&(st.contains(un)||st===un));return(uo&&(Math.abs(hn)<1||!on)||!uo&&(Math.abs(fn)<1||!on))&&(to=!0),to},getTouchXY=function(Mt){return"changedTouches"in Mt?[Mt.changedTouches[0].clientX,Mt.changedTouches[0].clientY]:[0,0]},getDeltaXY=function(Mt){return[Mt.deltaX,Mt.deltaY]},extractRef=function(Mt){return Mt&&"current"in Mt?Mt.current:Mt},deltaCompare=function(Mt,st){return Mt[0]===st[0]&&Mt[1]===st[1]},generateStyle=function(Mt){return`
  .block-interactivity-`.concat(Mt,` {pointer-events: none;}
  .allow-interactivity-`).concat(Mt,` {pointer-events: all;}
`)},idCounter$1=0,lockStack=[];function RemoveScrollSideCar(Mt){var st=reactExports.useRef([]),nn=reactExports.useRef([0,0]),rn=reactExports.useRef(),on=reactExports.useState(idCounter$1++)[0],an=reactExports.useState(styleSingleton)[0],sn=reactExports.useRef(Mt);reactExports.useEffect(function(){sn.current=Mt},[Mt]),reactExports.useEffect(function(){if(Mt.inert){document.body.classList.add("block-interactivity-".concat(on));var fo=__spreadArray([Mt.lockRef.current],(Mt.shards||[]).map(extractRef),!0).filter(Boolean);return fo.forEach(function(ho){return ho.classList.add("allow-interactivity-".concat(on))}),function(){document.body.classList.remove("block-interactivity-".concat(on)),fo.forEach(function(ho){return ho.classList.remove("allow-interactivity-".concat(on))})}}},[Mt.inert,Mt.lockRef.current,Mt.shards]);var un=reactExports.useCallback(function(fo,ho){if("touches"in fo&&fo.touches.length===2||fo.type==="wheel"&&fo.ctrlKey)return!sn.current.allowPinchZoom;var mo=getTouchXY(fo),Uo=nn.current,_d="deltaX"in fo?fo.deltaX:Uo[0]-mo[0],tp="deltaY"in fo?fo.deltaY:Uo[1]-mo[1],ep,np=fo.target,rp=Math.abs(_d)>Math.abs(tp)?"h":"v";if("touches"in fo&&rp==="h"&&np.type==="range")return!1;var ip=locationCouldBeScrolled(rp,np);if(!ip)return!0;if(ip?ep=rp:(ep=rp==="v"?"h":"v",ip=locationCouldBeScrolled(rp,np)),!ip)return!1;if(!rn.current&&"changedTouches"in fo&&(_d||tp)&&(rn.current=ep),!ep)return!0;var op=rn.current||ep;return handleScroll(op,ho,fo,op==="h"?_d:tp,!0)},[]),Xr=reactExports.useCallback(function(fo){var ho=fo;if(!(!lockStack.length||lockStack[lockStack.length-1]!==an)){var mo="deltaY"in ho?getDeltaXY(ho):getTouchXY(ho),Uo=st.current.filter(function(ep){return ep.name===ho.type&&(ep.target===ho.target||ho.target===ep.shadowParent)&&deltaCompare(ep.delta,mo)})[0];if(Uo&&Uo.should){ho.cancelable&&ho.preventDefault();return}if(!Uo){var _d=(sn.current.shards||[]).map(extractRef).filter(Boolean).filter(function(ep){return ep.contains(ho.target)}),tp=_d.length>0?un(ho,_d[0]):!sn.current.noIsolation;tp&&ho.cancelable&&ho.preventDefault()}}},[]),to=reactExports.useCallback(function(fo,ho,mo,Uo){var _d={name:fo,delta:ho,target:mo,should:Uo,shadowParent:getOutermostShadowParent(mo)};st.current.push(_d),setTimeout(function(){st.current=st.current.filter(function(tp){return tp!==_d})},1)},[]),uo=reactExports.useCallback(function(fo){nn.current=getTouchXY(fo),rn.current=void 0},[]),hn=reactExports.useCallback(function(fo){to(fo.type,getDeltaXY(fo),fo.target,un(fo,Mt.lockRef.current))},[]),fn=reactExports.useCallback(function(fo){to(fo.type,getTouchXY(fo),fo.target,un(fo,Mt.lockRef.current))},[]);reactExports.useEffect(function(){return lockStack.push(an),Mt.setCallbacks({onScrollCapture:hn,onWheelCapture:hn,onTouchMoveCapture:fn}),document.addEventListener("wheel",Xr,nonPassive),document.addEventListener("touchmove",Xr,nonPassive),document.addEventListener("touchstart",uo,nonPassive),function(){lockStack=lockStack.filter(function(fo){return fo!==an}),document.removeEventListener("wheel",Xr,nonPassive),document.removeEventListener("touchmove",Xr,nonPassive),document.removeEventListener("touchstart",uo,nonPassive)}},[]);var co=Mt.removeScrollBar,lo=Mt.inert;return reactExports.createElement(reactExports.Fragment,null,lo?reactExports.createElement(an,{styles:generateStyle(on)}):null,co?reactExports.createElement(RemoveScrollBar,{gapMode:Mt.gapMode}):null)}function getOutermostShadowParent(Mt){for(var st=null;Mt!==null;)Mt instanceof ShadowRoot&&(st=Mt.host,Mt=Mt.host),Mt=Mt.parentNode;return st}const SideCar=exportSidecar(effectCar,RemoveScrollSideCar);var ReactRemoveScroll=reactExports.forwardRef(function(Mt,st){return reactExports.createElement(RemoveScroll,__assign({},Mt,{ref:st,sideCar:SideCar}))});ReactRemoveScroll.classNames=RemoveScroll.classNames;var SELECTION_KEYS=["Enter"," "],FIRST_KEYS=["ArrowDown","PageUp","Home"],LAST_KEYS=["ArrowUp","PageDown","End"],FIRST_LAST_KEYS=[...FIRST_KEYS,...LAST_KEYS],SUB_OPEN_KEYS={ltr:[...SELECTION_KEYS,"ArrowRight"],rtl:[...SELECTION_KEYS,"ArrowLeft"]},SUB_CLOSE_KEYS={ltr:["ArrowLeft"],rtl:["ArrowRight"]},MENU_NAME="Menu",[Collection$1,useCollection$1,createCollectionScope$1]=createCollection(MENU_NAME),[createMenuContext,createMenuScope]=createContextScope$3(MENU_NAME,[createCollectionScope$1,createPopperScope,createRovingFocusGroupScope]),usePopperScope=createPopperScope(),useRovingFocusGroupScope$1=createRovingFocusGroupScope(),[MenuProvider,useMenuContext]=createMenuContext(MENU_NAME),[MenuRootProvider,useMenuRootContext]=createMenuContext(MENU_NAME),Menu=Mt=>{const{__scopeMenu:st,open:nn=!1,children:rn,dir:on,onOpenChange:an,modal:sn=!0}=Mt,un=usePopperScope(st),[Xr,to]=reactExports.useState(null),uo=reactExports.useRef(!1),hn=useCallbackRef$1(an),fn=useDirection(on);return reactExports.useEffect(()=>{const co=()=>{uo.current=!0,document.addEventListener("pointerdown",lo,{capture:!0,once:!0}),document.addEventListener("pointermove",lo,{capture:!0,once:!0})},lo=()=>uo.current=!1;return document.addEventListener("keydown",co,{capture:!0}),()=>{document.removeEventListener("keydown",co,{capture:!0}),document.removeEventListener("pointerdown",lo,{capture:!0}),document.removeEventListener("pointermove",lo,{capture:!0})}},[]),jsxRuntimeExports.jsx(Root2$2,{...un,children:jsxRuntimeExports.jsx(MenuProvider,{scope:st,open:nn,onOpenChange:hn,content:Xr,onContentChange:to,children:jsxRuntimeExports.jsx(MenuRootProvider,{scope:st,onClose:reactExports.useCallback(()=>hn(!1),[hn]),isUsingKeyboardRef:uo,dir:fn,modal:sn,children:rn})})})};Menu.displayName=MENU_NAME;var ANCHOR_NAME="MenuAnchor",MenuAnchor=reactExports.forwardRef((Mt,st)=>{const{__scopeMenu:nn,...rn}=Mt,on=usePopperScope(nn);return jsxRuntimeExports.jsx(Anchor,{...on,...rn,ref:st})});MenuAnchor.displayName=ANCHOR_NAME;var PORTAL_NAME$2="MenuPortal",[PortalProvider$1,usePortalContext$1]=createMenuContext(PORTAL_NAME$2,{forceMount:void 0}),MenuPortal=Mt=>{const{__scopeMenu:st,forceMount:nn,children:rn,container:on}=Mt,an=useMenuContext(PORTAL_NAME$2,st);return jsxRuntimeExports.jsx(PortalProvider$1,{scope:st,forceMount:nn,children:jsxRuntimeExports.jsx(Presence,{present:nn||an.open,children:jsxRuntimeExports.jsx(Portal$2,{asChild:!0,container:on,children:rn})})})};MenuPortal.displayName=PORTAL_NAME$2;var CONTENT_NAME$3="MenuContent",[MenuContentProvider,useMenuContentContext]=createMenuContext(CONTENT_NAME$3),MenuContent=reactExports.forwardRef((Mt,st)=>{const nn=usePortalContext$1(CONTENT_NAME$3,Mt.__scopeMenu),{forceMount:rn=nn.forceMount,...on}=Mt,an=useMenuContext(CONTENT_NAME$3,Mt.__scopeMenu),sn=useMenuRootContext(CONTENT_NAME$3,Mt.__scopeMenu);return jsxRuntimeExports.jsx(Collection$1.Provider,{scope:Mt.__scopeMenu,children:jsxRuntimeExports.jsx(Presence,{present:rn||an.open,children:jsxRuntimeExports.jsx(Collection$1.Slot,{scope:Mt.__scopeMenu,children:sn.modal?jsxRuntimeExports.jsx(MenuRootContentModal,{...on,ref:st}):jsxRuntimeExports.jsx(MenuRootContentNonModal,{...on,ref:st})})})})}),MenuRootContentModal=reactExports.forwardRef((Mt,st)=>{const nn=useMenuContext(CONTENT_NAME$3,Mt.__scopeMenu),rn=reactExports.useRef(null),on=useComposedRefs(st,rn);return reactExports.useEffect(()=>{const an=rn.current;if(an)return hideOthers(an)},[]),jsxRuntimeExports.jsx(MenuContentImpl,{...Mt,ref:on,trapFocus:nn.open,disableOutsidePointerEvents:nn.open,disableOutsideScroll:!0,onFocusOutside:composeEventHandlers(Mt.onFocusOutside,an=>an.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>nn.onOpenChange(!1)})}),MenuRootContentNonModal=reactExports.forwardRef((Mt,st)=>{const nn=useMenuContext(CONTENT_NAME$3,Mt.__scopeMenu);return jsxRuntimeExports.jsx(MenuContentImpl,{...Mt,ref:st,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>nn.onOpenChange(!1)})}),MenuContentImpl=reactExports.forwardRef((Mt,st)=>{const{__scopeMenu:nn,loop:rn=!1,trapFocus:on,onOpenAutoFocus:an,onCloseAutoFocus:sn,disableOutsidePointerEvents:un,onEntryFocus:Xr,onEscapeKeyDown:to,onPointerDownOutside:uo,onFocusOutside:hn,onInteractOutside:fn,onDismiss:co,disableOutsideScroll:lo,...fo}=Mt,ho=useMenuContext(CONTENT_NAME$3,nn),mo=useMenuRootContext(CONTENT_NAME$3,nn),Uo=usePopperScope(nn),_d=useRovingFocusGroupScope$1(nn),tp=useCollection$1(nn),[ep,np]=reactExports.useState(null),rp=reactExports.useRef(null),ip=useComposedRefs(st,rp,ho.onContentChange),op=reactExports.useRef(0),ap=reactExports.useRef(""),sp=reactExports.useRef(0),up=reactExports.useRef(null),pp=reactExports.useRef("right"),lp=reactExports.useRef(0),dp=lo?ReactRemoveScroll:reactExports.Fragment,cp=lo?{as:Slot,allowPinchZoom:!0}:void 0,fp=mp=>{var Up,Kp;const xp=ap.current+mp,_p=tp().filter(Mp=>!Mp.disabled),Sp=document.activeElement,Cp=(Up=_p.find(Mp=>Mp.ref.current===Sp))==null?void 0:Up.textValue,jp=_p.map(Mp=>Mp.textValue),Dp=getNextMatch(jp,xp,Cp),Vp=(Kp=_p.find(Mp=>Mp.textValue===Dp))==null?void 0:Kp.ref.current;(function Mp(zp){ap.current=zp,window.clearTimeout(op.current),zp!==""&&(op.current=window.setTimeout(()=>Mp(""),1e3))})(xp),Vp&&setTimeout(()=>Vp.focus())};reactExports.useEffect(()=>()=>window.clearTimeout(op.current),[]),useFocusGuards();const gp=reactExports.useCallback(mp=>{var _p,Sp;return pp.current===((_p=up.current)==null?void 0:_p.side)&&isPointerInGraceArea(mp,(Sp=up.current)==null?void 0:Sp.area)},[]);return jsxRuntimeExports.jsx(MenuContentProvider,{scope:nn,searchRef:ap,onItemEnter:reactExports.useCallback(mp=>{gp(mp)&&mp.preventDefault()},[gp]),onItemLeave:reactExports.useCallback(mp=>{var xp;gp(mp)||((xp=rp.current)==null||xp.focus(),np(null))},[gp]),onTriggerLeave:reactExports.useCallback(mp=>{gp(mp)&&mp.preventDefault()},[gp]),pointerGraceTimerRef:sp,onPointerGraceIntentChange:reactExports.useCallback(mp=>{up.current=mp},[]),children:jsxRuntimeExports.jsx(dp,{...cp,children:jsxRuntimeExports.jsx(FocusScope,{asChild:!0,trapped:on,onMountAutoFocus:composeEventHandlers(an,mp=>{var xp;mp.preventDefault(),(xp=rp.current)==null||xp.focus({preventScroll:!0})}),onUnmountAutoFocus:sn,children:jsxRuntimeExports.jsx(DismissableLayer,{asChild:!0,disableOutsidePointerEvents:un,onEscapeKeyDown:to,onPointerDownOutside:uo,onFocusOutside:hn,onInteractOutside:fn,onDismiss:co,children:jsxRuntimeExports.jsx(Root$2,{asChild:!0,..._d,dir:mo.dir,orientation:"vertical",loop:rn,currentTabStopId:ep,onCurrentTabStopIdChange:np,onEntryFocus:composeEventHandlers(Xr,mp=>{mo.isUsingKeyboardRef.current||mp.preventDefault()}),preventScrollOnEntryFocus:!0,children:jsxRuntimeExports.jsx(Content$2,{role:"menu","aria-orientation":"vertical","data-state":getOpenState(ho.open),"data-radix-menu-content":"",dir:mo.dir,...Uo,...fo,ref:ip,style:{outline:"none",...fo.style},onKeyDown:composeEventHandlers(fo.onKeyDown,mp=>{const _p=mp.target.closest("[data-radix-menu-content]")===mp.currentTarget,Sp=mp.ctrlKey||mp.altKey||mp.metaKey,Cp=mp.key.length===1;_p&&(mp.key==="Tab"&&mp.preventDefault(),!Sp&&Cp&&fp(mp.key));const jp=rp.current;if(mp.target!==jp||!FIRST_LAST_KEYS.includes(mp.key))return;mp.preventDefault();const Vp=tp().filter(Up=>!Up.disabled).map(Up=>Up.ref.current);LAST_KEYS.includes(mp.key)&&Vp.reverse(),focusFirst(Vp)}),onBlur:composeEventHandlers(Mt.onBlur,mp=>{mp.currentTarget.contains(mp.target)||(window.clearTimeout(op.current),ap.current="")}),onPointerMove:composeEventHandlers(Mt.onPointerMove,whenMouse(mp=>{const xp=mp.target,_p=lp.current!==mp.clientX;if(mp.currentTarget.contains(xp)&&_p){const Sp=mp.clientX>lp.current?"right":"left";pp.current=Sp,lp.current=mp.clientX}}))})})})})})})});MenuContent.displayName=CONTENT_NAME$3;var GROUP_NAME$1="MenuGroup",MenuGroup=reactExports.forwardRef((Mt,st)=>{const{__scopeMenu:nn,...rn}=Mt;return jsxRuntimeExports.jsx(Primitive.div,{role:"group",...rn,ref:st})});MenuGroup.displayName=GROUP_NAME$1;var LABEL_NAME$1="MenuLabel",MenuLabel=reactExports.forwardRef((Mt,st)=>{const{__scopeMenu:nn,...rn}=Mt;return jsxRuntimeExports.jsx(Primitive.div,{...rn,ref:st})});MenuLabel.displayName=LABEL_NAME$1;var ITEM_NAME$1="MenuItem",ITEM_SELECT="menu.itemSelect",MenuItem=reactExports.forwardRef((Mt,st)=>{const{disabled:nn=!1,onSelect:rn,...on}=Mt,an=reactExports.useRef(null),sn=useMenuRootContext(ITEM_NAME$1,Mt.__scopeMenu),un=useMenuContentContext(ITEM_NAME$1,Mt.__scopeMenu),Xr=useComposedRefs(st,an),to=reactExports.useRef(!1),uo=()=>{const hn=an.current;if(!nn&&hn){const fn=new CustomEvent(ITEM_SELECT,{bubbles:!0,cancelable:!0});hn.addEventListener(ITEM_SELECT,co=>rn==null?void 0:rn(co),{once:!0}),dispatchDiscreteCustomEvent(hn,fn),fn.defaultPrevented?to.current=!1:sn.onClose()}};return jsxRuntimeExports.jsx(MenuItemImpl,{...on,ref:Xr,disabled:nn,onClick:composeEventHandlers(Mt.onClick,uo),onPointerDown:hn=>{var fn;(fn=Mt.onPointerDown)==null||fn.call(Mt,hn),to.current=!0},onPointerUp:composeEventHandlers(Mt.onPointerUp,hn=>{var fn;to.current||(fn=hn.currentTarget)==null||fn.click()}),onKeyDown:composeEventHandlers(Mt.onKeyDown,hn=>{const fn=un.searchRef.current!=="";nn||fn&&hn.key===" "||SELECTION_KEYS.includes(hn.key)&&(hn.currentTarget.click(),hn.preventDefault())})})});MenuItem.displayName=ITEM_NAME$1;var MenuItemImpl=reactExports.forwardRef((Mt,st)=>{const{__scopeMenu:nn,disabled:rn=!1,textValue:on,...an}=Mt,sn=useMenuContentContext(ITEM_NAME$1,nn),un=useRovingFocusGroupScope$1(nn),Xr=reactExports.useRef(null),to=useComposedRefs(st,Xr),[uo,hn]=reactExports.useState(!1),[fn,co]=reactExports.useState("");return reactExports.useEffect(()=>{const lo=Xr.current;lo&&co((lo.textContent??"").trim())},[an.children]),jsxRuntimeExports.jsx(Collection$1.ItemSlot,{scope:nn,disabled:rn,textValue:on??fn,children:jsxRuntimeExports.jsx(Item,{asChild:!0,...un,focusable:!rn,children:jsxRuntimeExports.jsx(Primitive.div,{role:"menuitem","data-highlighted":uo?"":void 0,"aria-disabled":rn||void 0,"data-disabled":rn?"":void 0,...an,ref:to,onPointerMove:composeEventHandlers(Mt.onPointerMove,whenMouse(lo=>{rn?sn.onItemLeave(lo):(sn.onItemEnter(lo),lo.defaultPrevented||lo.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:composeEventHandlers(Mt.onPointerLeave,whenMouse(lo=>sn.onItemLeave(lo))),onFocus:composeEventHandlers(Mt.onFocus,()=>hn(!0)),onBlur:composeEventHandlers(Mt.onBlur,()=>hn(!1))})})})}),CHECKBOX_ITEM_NAME$1="MenuCheckboxItem",MenuCheckboxItem=reactExports.forwardRef((Mt,st)=>{const{checked:nn=!1,onCheckedChange:rn,...on}=Mt;return jsxRuntimeExports.jsx(ItemIndicatorProvider,{scope:Mt.__scopeMenu,checked:nn,children:jsxRuntimeExports.jsx(MenuItem,{role:"menuitemcheckbox","aria-checked":isIndeterminate(nn)?"mixed":nn,...on,ref:st,"data-state":getCheckedState(nn),onSelect:composeEventHandlers(on.onSelect,()=>rn==null?void 0:rn(isIndeterminate(nn)?!0:!nn),{checkForDefaultPrevented:!1})})})});MenuCheckboxItem.displayName=CHECKBOX_ITEM_NAME$1;var RADIO_GROUP_NAME$1="MenuRadioGroup",[RadioGroupProvider,useRadioGroupContext]=createMenuContext(RADIO_GROUP_NAME$1,{value:void 0,onValueChange:()=>{}}),MenuRadioGroup=reactExports.forwardRef((Mt,st)=>{const{value:nn,onValueChange:rn,...on}=Mt,an=useCallbackRef$1(rn);return jsxRuntimeExports.jsx(RadioGroupProvider,{scope:Mt.__scopeMenu,value:nn,onValueChange:an,children:jsxRuntimeExports.jsx(MenuGroup,{...on,ref:st})})});MenuRadioGroup.displayName=RADIO_GROUP_NAME$1;var RADIO_ITEM_NAME$1="MenuRadioItem",MenuRadioItem=reactExports.forwardRef((Mt,st)=>{const{value:nn,...rn}=Mt,on=useRadioGroupContext(RADIO_ITEM_NAME$1,Mt.__scopeMenu),an=nn===on.value;return jsxRuntimeExports.jsx(ItemIndicatorProvider,{scope:Mt.__scopeMenu,checked:an,children:jsxRuntimeExports.jsx(MenuItem,{role:"menuitemradio","aria-checked":an,...rn,ref:st,"data-state":getCheckedState(an),onSelect:composeEventHandlers(rn.onSelect,()=>{var sn;return(sn=on.onValueChange)==null?void 0:sn.call(on,nn)},{checkForDefaultPrevented:!1})})})});MenuRadioItem.displayName=RADIO_ITEM_NAME$1;var ITEM_INDICATOR_NAME="MenuItemIndicator",[ItemIndicatorProvider,useItemIndicatorContext]=createMenuContext(ITEM_INDICATOR_NAME,{checked:!1}),MenuItemIndicator=reactExports.forwardRef((Mt,st)=>{const{__scopeMenu:nn,forceMount:rn,...on}=Mt,an=useItemIndicatorContext(ITEM_INDICATOR_NAME,nn);return jsxRuntimeExports.jsx(Presence,{present:rn||isIndeterminate(an.checked)||an.checked===!0,children:jsxRuntimeExports.jsx(Primitive.span,{...on,ref:st,"data-state":getCheckedState(an.checked)})})});MenuItemIndicator.displayName=ITEM_INDICATOR_NAME;var SEPARATOR_NAME$1="MenuSeparator",MenuSeparator=reactExports.forwardRef((Mt,st)=>{const{__scopeMenu:nn,...rn}=Mt;return jsxRuntimeExports.jsx(Primitive.div,{role:"separator","aria-orientation":"horizontal",...rn,ref:st})});MenuSeparator.displayName=SEPARATOR_NAME$1;var ARROW_NAME$1="MenuArrow",MenuArrow=reactExports.forwardRef((Mt,st)=>{const{__scopeMenu:nn,...rn}=Mt,on=usePopperScope(nn);return jsxRuntimeExports.jsx(Arrow,{...on,...rn,ref:st})});MenuArrow.displayName=ARROW_NAME$1;var SUB_NAME="MenuSub",[MenuSubProvider,useMenuSubContext]=createMenuContext(SUB_NAME),SUB_TRIGGER_NAME$1="MenuSubTrigger",MenuSubTrigger=reactExports.forwardRef((Mt,st)=>{const nn=useMenuContext(SUB_TRIGGER_NAME$1,Mt.__scopeMenu),rn=useMenuRootContext(SUB_TRIGGER_NAME$1,Mt.__scopeMenu),on=useMenuSubContext(SUB_TRIGGER_NAME$1,Mt.__scopeMenu),an=useMenuContentContext(SUB_TRIGGER_NAME$1,Mt.__scopeMenu),sn=reactExports.useRef(null),{pointerGraceTimerRef:un,onPointerGraceIntentChange:Xr}=an,to={__scopeMenu:Mt.__scopeMenu},uo=reactExports.useCallback(()=>{sn.current&&window.clearTimeout(sn.current),sn.current=null},[]);return reactExports.useEffect(()=>uo,[uo]),reactExports.useEffect(()=>{const hn=un.current;return()=>{window.clearTimeout(hn),Xr(null)}},[un,Xr]),jsxRuntimeExports.jsx(MenuAnchor,{asChild:!0,...to,children:jsxRuntimeExports.jsx(MenuItemImpl,{id:on.triggerId,"aria-haspopup":"menu","aria-expanded":nn.open,"aria-controls":on.contentId,"data-state":getOpenState(nn.open),...Mt,ref:composeRefs(st,on.onTriggerChange),onClick:hn=>{var fn;(fn=Mt.onClick)==null||fn.call(Mt,hn),!(Mt.disabled||hn.defaultPrevented)&&(hn.currentTarget.focus(),nn.open||nn.onOpenChange(!0))},onPointerMove:composeEventHandlers(Mt.onPointerMove,whenMouse(hn=>{an.onItemEnter(hn),!hn.defaultPrevented&&!Mt.disabled&&!nn.open&&!sn.current&&(an.onPointerGraceIntentChange(null),sn.current=window.setTimeout(()=>{nn.onOpenChange(!0),uo()},100))})),onPointerLeave:composeEventHandlers(Mt.onPointerLeave,whenMouse(hn=>{var co,lo;uo();const fn=(co=nn.content)==null?void 0:co.getBoundingClientRect();if(fn){const fo=(lo=nn.content)==null?void 0:lo.dataset.side,ho=fo==="right",mo=ho?-5:5,Uo=fn[ho?"left":"right"],_d=fn[ho?"right":"left"];an.onPointerGraceIntentChange({area:[{x:hn.clientX+mo,y:hn.clientY},{x:Uo,y:fn.top},{x:_d,y:fn.top},{x:_d,y:fn.bottom},{x:Uo,y:fn.bottom}],side:fo}),window.clearTimeout(un.current),un.current=window.setTimeout(()=>an.onPointerGraceIntentChange(null),300)}else{if(an.onTriggerLeave(hn),hn.defaultPrevented)return;an.onPointerGraceIntentChange(null)}})),onKeyDown:composeEventHandlers(Mt.onKeyDown,hn=>{var co;const fn=an.searchRef.current!=="";Mt.disabled||fn&&hn.key===" "||SUB_OPEN_KEYS[rn.dir].includes(hn.key)&&(nn.onOpenChange(!0),(co=nn.content)==null||co.focus(),hn.preventDefault())})})})});MenuSubTrigger.displayName=SUB_TRIGGER_NAME$1;var SUB_CONTENT_NAME$1="MenuSubContent",MenuSubContent=reactExports.forwardRef((Mt,st)=>{const nn=usePortalContext$1(CONTENT_NAME$3,Mt.__scopeMenu),{forceMount:rn=nn.forceMount,...on}=Mt,an=useMenuContext(CONTENT_NAME$3,Mt.__scopeMenu),sn=useMenuRootContext(CONTENT_NAME$3,Mt.__scopeMenu),un=useMenuSubContext(SUB_CONTENT_NAME$1,Mt.__scopeMenu),Xr=reactExports.useRef(null),to=useComposedRefs(st,Xr);return jsxRuntimeExports.jsx(Collection$1.Provider,{scope:Mt.__scopeMenu,children:jsxRuntimeExports.jsx(Presence,{present:rn||an.open,children:jsxRuntimeExports.jsx(Collection$1.Slot,{scope:Mt.__scopeMenu,children:jsxRuntimeExports.jsx(MenuContentImpl,{id:un.contentId,"aria-labelledby":un.triggerId,...on,ref:to,align:"start",side:sn.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:uo=>{var hn;sn.isUsingKeyboardRef.current&&((hn=Xr.current)==null||hn.focus()),uo.preventDefault()},onCloseAutoFocus:uo=>uo.preventDefault(),onFocusOutside:composeEventHandlers(Mt.onFocusOutside,uo=>{uo.target!==un.trigger&&an.onOpenChange(!1)}),onEscapeKeyDown:composeEventHandlers(Mt.onEscapeKeyDown,uo=>{sn.onClose(),uo.preventDefault()}),onKeyDown:composeEventHandlers(Mt.onKeyDown,uo=>{var co;const hn=uo.currentTarget.contains(uo.target),fn=SUB_CLOSE_KEYS[sn.dir].includes(uo.key);hn&&fn&&(an.onOpenChange(!1),(co=un.trigger)==null||co.focus(),uo.preventDefault())})})})})})});MenuSubContent.displayName=SUB_CONTENT_NAME$1;function getOpenState(Mt){return Mt?"open":"closed"}function isIndeterminate(Mt){return Mt==="indeterminate"}function getCheckedState(Mt){return isIndeterminate(Mt)?"indeterminate":Mt?"checked":"unchecked"}function focusFirst(Mt){const st=document.activeElement;for(const nn of Mt)if(nn===st||(nn.focus(),document.activeElement!==st))return}function wrapArray(Mt,st){return Mt.map((nn,rn)=>Mt[(st+rn)%Mt.length])}function getNextMatch(Mt,st,nn){const on=st.length>1&&Array.from(st).every(to=>to===st[0])?st[0]:st,an=nn?Mt.indexOf(nn):-1;let sn=wrapArray(Mt,Math.max(an,0));on.length===1&&(sn=sn.filter(to=>to!==nn));const Xr=sn.find(to=>to.toLowerCase().startsWith(on.toLowerCase()));return Xr!==nn?Xr:void 0}function isPointInPolygon(Mt,st){const{x:nn,y:rn}=Mt;let on=!1;for(let an=0,sn=st.length-1;an<st.length;sn=an++){const un=st[an].x,Xr=st[an].y,to=st[sn].x,uo=st[sn].y;Xr>rn!=uo>rn&&nn<(to-un)*(rn-Xr)/(uo-Xr)+un&&(on=!on)}return on}function isPointerInGraceArea(Mt,st){if(!st)return!1;const nn={x:Mt.clientX,y:Mt.clientY};return isPointInPolygon(nn,st)}function whenMouse(Mt){return st=>st.pointerType==="mouse"?Mt(st):void 0}var Root3=Menu,Anchor2=MenuAnchor,Portal$1=MenuPortal,Content2$1=MenuContent,Group=MenuGroup,Label$1=MenuLabel,Item2$1=MenuItem,CheckboxItem=MenuCheckboxItem,RadioGroup=MenuRadioGroup,RadioItem=MenuRadioItem,ItemIndicator=MenuItemIndicator,Separator=MenuSeparator,Arrow2=MenuArrow,SubTrigger=MenuSubTrigger,SubContent=MenuSubContent,DROPDOWN_MENU_NAME="DropdownMenu",[createDropdownMenuContext,createDropdownMenuScope]=createContextScope$3(DROPDOWN_MENU_NAME,[createMenuScope]),useMenuScope=createMenuScope(),[DropdownMenuProvider,useDropdownMenuContext]=createDropdownMenuContext(DROPDOWN_MENU_NAME),DropdownMenu$1=Mt=>{const{__scopeDropdownMenu:st,children:nn,dir:rn,open:on,defaultOpen:an,onOpenChange:sn,modal:un=!0}=Mt,Xr=useMenuScope(st),to=reactExports.useRef(null),[uo=!1,hn]=useControllableState({prop:on,defaultProp:an,onChange:sn});return jsxRuntimeExports.jsx(DropdownMenuProvider,{scope:st,triggerId:useId(),triggerRef:to,contentId:useId(),open:uo,onOpenChange:hn,onOpenToggle:reactExports.useCallback(()=>hn(fn=>!fn),[hn]),modal:un,children:jsxRuntimeExports.jsx(Root3,{...Xr,open:uo,onOpenChange:hn,dir:rn,modal:un,children:nn})})};DropdownMenu$1.displayName=DROPDOWN_MENU_NAME;var TRIGGER_NAME$2="DropdownMenuTrigger",DropdownMenuTrigger$1=reactExports.forwardRef((Mt,st)=>{const{__scopeDropdownMenu:nn,disabled:rn=!1,...on}=Mt,an=useDropdownMenuContext(TRIGGER_NAME$2,nn),sn=useMenuScope(nn);return jsxRuntimeExports.jsx(Anchor2,{asChild:!0,...sn,children:jsxRuntimeExports.jsx(Primitive.button,{type:"button",id:an.triggerId,"aria-haspopup":"menu","aria-expanded":an.open,"aria-controls":an.open?an.contentId:void 0,"data-state":an.open?"open":"closed","data-disabled":rn?"":void 0,disabled:rn,...on,ref:composeRefs(st,an.triggerRef),onPointerDown:composeEventHandlers(Mt.onPointerDown,un=>{!rn&&un.button===0&&un.ctrlKey===!1&&(an.onOpenToggle(),an.open||un.preventDefault())}),onKeyDown:composeEventHandlers(Mt.onKeyDown,un=>{rn||(["Enter"," "].includes(un.key)&&an.onOpenToggle(),un.key==="ArrowDown"&&an.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(un.key)&&un.preventDefault())})})})});DropdownMenuTrigger$1.displayName=TRIGGER_NAME$2;var PORTAL_NAME$1="DropdownMenuPortal",DropdownMenuPortal=Mt=>{const{__scopeDropdownMenu:st,...nn}=Mt,rn=useMenuScope(st);return jsxRuntimeExports.jsx(Portal$1,{...rn,...nn})};DropdownMenuPortal.displayName=PORTAL_NAME$1;var CONTENT_NAME$2="DropdownMenuContent",DropdownMenuContent$1=reactExports.forwardRef((Mt,st)=>{const{__scopeDropdownMenu:nn,...rn}=Mt,on=useDropdownMenuContext(CONTENT_NAME$2,nn),an=useMenuScope(nn),sn=reactExports.useRef(!1);return jsxRuntimeExports.jsx(Content2$1,{id:on.contentId,"aria-labelledby":on.triggerId,...an,...rn,ref:st,onCloseAutoFocus:composeEventHandlers(Mt.onCloseAutoFocus,un=>{var Xr;sn.current||(Xr=on.triggerRef.current)==null||Xr.focus(),sn.current=!1,un.preventDefault()}),onInteractOutside:composeEventHandlers(Mt.onInteractOutside,un=>{const Xr=un.detail.originalEvent,to=Xr.button===0&&Xr.ctrlKey===!0,uo=Xr.button===2||to;(!on.modal||uo)&&(sn.current=!0)}),style:{...Mt.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});DropdownMenuContent$1.displayName=CONTENT_NAME$2;var GROUP_NAME="DropdownMenuGroup",DropdownMenuGroup$1=reactExports.forwardRef((Mt,st)=>{const{__scopeDropdownMenu:nn,...rn}=Mt,on=useMenuScope(nn);return jsxRuntimeExports.jsx(Group,{...on,...rn,ref:st})});DropdownMenuGroup$1.displayName=GROUP_NAME;var LABEL_NAME="DropdownMenuLabel",DropdownMenuLabel$1=reactExports.forwardRef((Mt,st)=>{const{__scopeDropdownMenu:nn,...rn}=Mt,on=useMenuScope(nn);return jsxRuntimeExports.jsx(Label$1,{...on,...rn,ref:st})});DropdownMenuLabel$1.displayName=LABEL_NAME;var ITEM_NAME="DropdownMenuItem",DropdownMenuItem$1=reactExports.forwardRef((Mt,st)=>{const{__scopeDropdownMenu:nn,...rn}=Mt,on=useMenuScope(nn);return jsxRuntimeExports.jsx(Item2$1,{...on,...rn,ref:st})});DropdownMenuItem$1.displayName=ITEM_NAME;var CHECKBOX_ITEM_NAME="DropdownMenuCheckboxItem",DropdownMenuCheckboxItem$1=reactExports.forwardRef((Mt,st)=>{const{__scopeDropdownMenu:nn,...rn}=Mt,on=useMenuScope(nn);return jsxRuntimeExports.jsx(CheckboxItem,{...on,...rn,ref:st})});DropdownMenuCheckboxItem$1.displayName=CHECKBOX_ITEM_NAME;var RADIO_GROUP_NAME="DropdownMenuRadioGroup",DropdownMenuRadioGroup=reactExports.forwardRef((Mt,st)=>{const{__scopeDropdownMenu:nn,...rn}=Mt,on=useMenuScope(nn);return jsxRuntimeExports.jsx(RadioGroup,{...on,...rn,ref:st})});DropdownMenuRadioGroup.displayName=RADIO_GROUP_NAME;var RADIO_ITEM_NAME="DropdownMenuRadioItem",DropdownMenuRadioItem$1=reactExports.forwardRef((Mt,st)=>{const{__scopeDropdownMenu:nn,...rn}=Mt,on=useMenuScope(nn);return jsxRuntimeExports.jsx(RadioItem,{...on,...rn,ref:st})});DropdownMenuRadioItem$1.displayName=RADIO_ITEM_NAME;var INDICATOR_NAME="DropdownMenuItemIndicator",DropdownMenuItemIndicator=reactExports.forwardRef((Mt,st)=>{const{__scopeDropdownMenu:nn,...rn}=Mt,on=useMenuScope(nn);return jsxRuntimeExports.jsx(ItemIndicator,{...on,...rn,ref:st})});DropdownMenuItemIndicator.displayName=INDICATOR_NAME;var SEPARATOR_NAME="DropdownMenuSeparator",DropdownMenuSeparator$1=reactExports.forwardRef((Mt,st)=>{const{__scopeDropdownMenu:nn,...rn}=Mt,on=useMenuScope(nn);return jsxRuntimeExports.jsx(Separator,{...on,...rn,ref:st})});DropdownMenuSeparator$1.displayName=SEPARATOR_NAME;var ARROW_NAME="DropdownMenuArrow",DropdownMenuArrow=reactExports.forwardRef((Mt,st)=>{const{__scopeDropdownMenu:nn,...rn}=Mt,on=useMenuScope(nn);return jsxRuntimeExports.jsx(Arrow2,{...on,...rn,ref:st})});DropdownMenuArrow.displayName=ARROW_NAME;var SUB_TRIGGER_NAME="DropdownMenuSubTrigger",DropdownMenuSubTrigger$1=reactExports.forwardRef((Mt,st)=>{const{__scopeDropdownMenu:nn,...rn}=Mt,on=useMenuScope(nn);return jsxRuntimeExports.jsx(SubTrigger,{...on,...rn,ref:st})});DropdownMenuSubTrigger$1.displayName=SUB_TRIGGER_NAME;var SUB_CONTENT_NAME="DropdownMenuSubContent",DropdownMenuSubContent$1=reactExports.forwardRef((Mt,st)=>{const{__scopeDropdownMenu:nn,...rn}=Mt,on=useMenuScope(nn);return jsxRuntimeExports.jsx(SubContent,{...on,...rn,ref:st,style:{...Mt.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});DropdownMenuSubContent$1.displayName=SUB_CONTENT_NAME;var Root2$1=DropdownMenu$1,Trigger$2=DropdownMenuTrigger$1,Portal2=DropdownMenuPortal,Content2=DropdownMenuContent$1,Group2=DropdownMenuGroup$1,Label2=DropdownMenuLabel$1,Item2=DropdownMenuItem$1,CheckboxItem2=DropdownMenuCheckboxItem$1,RadioItem2=DropdownMenuRadioItem$1,ItemIndicator2=DropdownMenuItemIndicator,Separator2=DropdownMenuSeparator$1,SubTrigger2=DropdownMenuSubTrigger$1,SubContent2=DropdownMenuSubContent$1;const DropdownMenu=Root2$1,DropdownMenuTrigger=Trigger$2,DropdownMenuGroup=Group2,DropdownMenuSubTrigger=reactExports.forwardRef(({className:Mt,inset:st,children:nn,...rn},on)=>jsxRuntimeExports.jsxs(SubTrigger2,{ref:on,className:cn("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",st&&"pl-8",Mt),...rn,children:[nn,jsxRuntimeExports.jsx(ChevronRight,{className:"ml-auto h-4 w-4"})]}));DropdownMenuSubTrigger.displayName=SubTrigger2.displayName;const DropdownMenuSubContent=reactExports.forwardRef(({className:Mt,...st},nn)=>jsxRuntimeExports.jsx(SubContent2,{ref:nn,className:cn("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",Mt),...st}));DropdownMenuSubContent.displayName=SubContent2.displayName;const DropdownMenuContent=reactExports.forwardRef(({className:Mt,sideOffset:st=4,...nn},rn)=>jsxRuntimeExports.jsx(Portal2,{children:jsxRuntimeExports.jsx(Content2,{ref:rn,sideOffset:st,className:cn("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",Mt),...nn})}));DropdownMenuContent.displayName=Content2.displayName;const DropdownMenuItem=reactExports.forwardRef(({className:Mt,inset:st,...nn},rn)=>jsxRuntimeExports.jsx(Item2,{ref:rn,className:cn("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",st&&"pl-8",Mt),...nn}));DropdownMenuItem.displayName=Item2.displayName;const DropdownMenuCheckboxItem=reactExports.forwardRef(({className:Mt,children:st,checked:nn,...rn},on)=>jsxRuntimeExports.jsxs(CheckboxItem2,{ref:on,className:cn("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",Mt),checked:nn,...rn,children:[jsxRuntimeExports.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:jsxRuntimeExports.jsx(ItemIndicator2,{children:jsxRuntimeExports.jsx(Check,{className:"h-4 w-4"})})}),st]}));DropdownMenuCheckboxItem.displayName=CheckboxItem2.displayName;const DropdownMenuRadioItem=reactExports.forwardRef(({className:Mt,children:st,...nn},rn)=>jsxRuntimeExports.jsxs(RadioItem2,{ref:rn,className:cn("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",Mt),...nn,children:[jsxRuntimeExports.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:jsxRuntimeExports.jsx(ItemIndicator2,{children:jsxRuntimeExports.jsx(Circle,{className:"h-2 w-2 fill-current"})})}),st]}));DropdownMenuRadioItem.displayName=RadioItem2.displayName;const DropdownMenuLabel=reactExports.forwardRef(({className:Mt,inset:st,...nn},rn)=>jsxRuntimeExports.jsx(Label2,{ref:rn,className:cn("px-2 py-1.5 text-sm font-semibold",st&&"pl-8",Mt),...nn}));DropdownMenuLabel.displayName=Label2.displayName;const DropdownMenuSeparator=reactExports.forwardRef(({className:Mt,...st},nn)=>jsxRuntimeExports.jsx(Separator2,{ref:nn,className:cn("-mx-1 my-1 h-px bg-muted",Mt),...st}));DropdownMenuSeparator.displayName=Separator2.displayName;function clamp(Mt,[st,nn]){return Math.min(nn,Math.max(st,Mt))}function usePrevious(Mt){const st=reactExports.useRef({value:Mt,previous:Mt});return reactExports.useMemo(()=>(st.current.value!==Mt&&(st.current.previous=st.current.value,st.current.value=Mt),st.current.previous),[Mt])}var PAGE_KEYS=["PageUp","PageDown"],ARROW_KEYS=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],BACK_KEYS={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},SLIDER_NAME="Slider",[Collection,useCollection,createCollectionScope]=createCollection(SLIDER_NAME),[createSliderContext,createSliderScope]=createContextScope$3(SLIDER_NAME,[createCollectionScope]),[SliderProvider,useSliderContext]=createSliderContext(SLIDER_NAME),Slider$1=reactExports.forwardRef((Mt,st)=>{const{name:nn,min:rn=0,max:on=100,step:an=1,orientation:sn="horizontal",disabled:un=!1,minStepsBetweenThumbs:Xr=0,defaultValue:to=[rn],value:uo,onValueChange:hn=()=>{},onValueCommit:fn=()=>{},inverted:co=!1,form:lo,...fo}=Mt,ho=reactExports.useRef(new Set),mo=reactExports.useRef(0),_d=sn==="horizontal"?SliderHorizontal:SliderVertical,[tp=[],ep]=useControllableState({prop:uo,defaultProp:to,onChange:sp=>{var pp;(pp=[...ho.current][mo.current])==null||pp.focus(),hn(sp)}}),np=reactExports.useRef(tp);function rp(sp){const up=getClosestValueIndex(tp,sp);ap(sp,up)}function ip(sp){ap(sp,mo.current)}function op(){const sp=np.current[mo.current];tp[mo.current]!==sp&&fn(tp)}function ap(sp,up,{commit:pp}={commit:!1}){const lp=getDecimalCount(an),dp=roundValue(Math.round((sp-rn)/an)*an+rn,lp),cp=clamp(dp,[rn,on]);ep((fp=[])=>{const gp=getNextSortedValues(fp,cp,up);if(hasMinStepsBetweenValues(gp,Xr*an)){mo.current=gp.indexOf(cp);const mp=String(gp)!==String(fp);return mp&&pp&&fn(gp),mp?gp:fp}else return fp})}return jsxRuntimeExports.jsx(SliderProvider,{scope:Mt.__scopeSlider,name:nn,disabled:un,min:rn,max:on,valueIndexToChangeRef:mo,thumbs:ho.current,values:tp,orientation:sn,form:lo,children:jsxRuntimeExports.jsx(Collection.Provider,{scope:Mt.__scopeSlider,children:jsxRuntimeExports.jsx(Collection.Slot,{scope:Mt.__scopeSlider,children:jsxRuntimeExports.jsx(_d,{"aria-disabled":un,"data-disabled":un?"":void 0,...fo,ref:st,onPointerDown:composeEventHandlers(fo.onPointerDown,()=>{un||(np.current=tp)}),min:rn,max:on,inverted:co,onSlideStart:un?void 0:rp,onSlideMove:un?void 0:ip,onSlideEnd:un?void 0:op,onHomeKeyDown:()=>!un&&ap(rn,0,{commit:!0}),onEndKeyDown:()=>!un&&ap(on,tp.length-1,{commit:!0}),onStepKeyDown:({event:sp,direction:up})=>{if(!un){const dp=PAGE_KEYS.includes(sp.key)||sp.shiftKey&&ARROW_KEYS.includes(sp.key)?10:1,cp=mo.current,fp=tp[cp],gp=an*dp*up;ap(fp+gp,cp,{commit:!0})}}})})})})});Slider$1.displayName=SLIDER_NAME;var[SliderOrientationProvider,useSliderOrientationContext]=createSliderContext(SLIDER_NAME,{startEdge:"left",endEdge:"right",size:"width",direction:1}),SliderHorizontal=reactExports.forwardRef((Mt,st)=>{const{min:nn,max:rn,dir:on,inverted:an,onSlideStart:sn,onSlideMove:un,onSlideEnd:Xr,onStepKeyDown:to,...uo}=Mt,[hn,fn]=reactExports.useState(null),co=useComposedRefs(st,_d=>fn(_d)),lo=reactExports.useRef(),fo=useDirection(on),ho=fo==="ltr",mo=ho&&!an||!ho&&an;function Uo(_d){const tp=lo.current||hn.getBoundingClientRect(),ep=[0,tp.width],rp=linearScale(ep,mo?[nn,rn]:[rn,nn]);return lo.current=tp,rp(_d-tp.left)}return jsxRuntimeExports.jsx(SliderOrientationProvider,{scope:Mt.__scopeSlider,startEdge:mo?"left":"right",endEdge:mo?"right":"left",direction:mo?1:-1,size:"width",children:jsxRuntimeExports.jsx(SliderImpl,{dir:fo,"data-orientation":"horizontal",...uo,ref:co,style:{...uo.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:_d=>{const tp=Uo(_d.clientX);sn==null||sn(tp)},onSlideMove:_d=>{const tp=Uo(_d.clientX);un==null||un(tp)},onSlideEnd:()=>{lo.current=void 0,Xr==null||Xr()},onStepKeyDown:_d=>{const ep=BACK_KEYS[mo?"from-left":"from-right"].includes(_d.key);to==null||to({event:_d,direction:ep?-1:1})}})})}),SliderVertical=reactExports.forwardRef((Mt,st)=>{const{min:nn,max:rn,inverted:on,onSlideStart:an,onSlideMove:sn,onSlideEnd:un,onStepKeyDown:Xr,...to}=Mt,uo=reactExports.useRef(null),hn=useComposedRefs(st,uo),fn=reactExports.useRef(),co=!on;function lo(fo){const ho=fn.current||uo.current.getBoundingClientRect(),mo=[0,ho.height],_d=linearScale(mo,co?[rn,nn]:[nn,rn]);return fn.current=ho,_d(fo-ho.top)}return jsxRuntimeExports.jsx(SliderOrientationProvider,{scope:Mt.__scopeSlider,startEdge:co?"bottom":"top",endEdge:co?"top":"bottom",size:"height",direction:co?1:-1,children:jsxRuntimeExports.jsx(SliderImpl,{"data-orientation":"vertical",...to,ref:hn,style:{...to.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:fo=>{const ho=lo(fo.clientY);an==null||an(ho)},onSlideMove:fo=>{const ho=lo(fo.clientY);sn==null||sn(ho)},onSlideEnd:()=>{fn.current=void 0,un==null||un()},onStepKeyDown:fo=>{const mo=BACK_KEYS[co?"from-bottom":"from-top"].includes(fo.key);Xr==null||Xr({event:fo,direction:mo?-1:1})}})})}),SliderImpl=reactExports.forwardRef((Mt,st)=>{const{__scopeSlider:nn,onSlideStart:rn,onSlideMove:on,onSlideEnd:an,onHomeKeyDown:sn,onEndKeyDown:un,onStepKeyDown:Xr,...to}=Mt,uo=useSliderContext(SLIDER_NAME,nn);return jsxRuntimeExports.jsx(Primitive.span,{...to,ref:st,onKeyDown:composeEventHandlers(Mt.onKeyDown,hn=>{hn.key==="Home"?(sn(hn),hn.preventDefault()):hn.key==="End"?(un(hn),hn.preventDefault()):PAGE_KEYS.concat(ARROW_KEYS).includes(hn.key)&&(Xr(hn),hn.preventDefault())}),onPointerDown:composeEventHandlers(Mt.onPointerDown,hn=>{const fn=hn.target;fn.setPointerCapture(hn.pointerId),hn.preventDefault(),uo.thumbs.has(fn)?fn.focus():rn(hn)}),onPointerMove:composeEventHandlers(Mt.onPointerMove,hn=>{hn.target.hasPointerCapture(hn.pointerId)&&on(hn)}),onPointerUp:composeEventHandlers(Mt.onPointerUp,hn=>{const fn=hn.target;fn.hasPointerCapture(hn.pointerId)&&(fn.releasePointerCapture(hn.pointerId),an(hn))})})}),TRACK_NAME="SliderTrack",SliderTrack=reactExports.forwardRef((Mt,st)=>{const{__scopeSlider:nn,...rn}=Mt,on=useSliderContext(TRACK_NAME,nn);return jsxRuntimeExports.jsx(Primitive.span,{"data-disabled":on.disabled?"":void 0,"data-orientation":on.orientation,...rn,ref:st})});SliderTrack.displayName=TRACK_NAME;var RANGE_NAME="SliderRange",SliderRange=reactExports.forwardRef((Mt,st)=>{const{__scopeSlider:nn,...rn}=Mt,on=useSliderContext(RANGE_NAME,nn),an=useSliderOrientationContext(RANGE_NAME,nn),sn=reactExports.useRef(null),un=useComposedRefs(st,sn),Xr=on.values.length,to=on.values.map(fn=>convertValueToPercentage(fn,on.min,on.max)),uo=Xr>1?Math.min(...to):0,hn=100-Math.max(...to);return jsxRuntimeExports.jsx(Primitive.span,{"data-orientation":on.orientation,"data-disabled":on.disabled?"":void 0,...rn,ref:un,style:{...Mt.style,[an.startEdge]:uo+"%",[an.endEdge]:hn+"%"}})});SliderRange.displayName=RANGE_NAME;var THUMB_NAME="SliderThumb",SliderThumb=reactExports.forwardRef((Mt,st)=>{const nn=useCollection(Mt.__scopeSlider),[rn,on]=reactExports.useState(null),an=useComposedRefs(st,un=>on(un)),sn=reactExports.useMemo(()=>rn?nn().findIndex(un=>un.ref.current===rn):-1,[nn,rn]);return jsxRuntimeExports.jsx(SliderThumbImpl,{...Mt,ref:an,index:sn})}),SliderThumbImpl=reactExports.forwardRef((Mt,st)=>{const{__scopeSlider:nn,index:rn,name:on,...an}=Mt,sn=useSliderContext(THUMB_NAME,nn),un=useSliderOrientationContext(THUMB_NAME,nn),[Xr,to]=reactExports.useState(null),uo=useComposedRefs(st,Uo=>to(Uo)),hn=Xr?sn.form||!!Xr.closest("form"):!0,fn=useSize(Xr),co=sn.values[rn],lo=co===void 0?0:convertValueToPercentage(co,sn.min,sn.max),fo=getLabel$1(rn,sn.values.length),ho=fn==null?void 0:fn[un.size],mo=ho?getThumbInBoundsOffset(ho,lo,un.direction):0;return reactExports.useEffect(()=>{if(Xr)return sn.thumbs.add(Xr),()=>{sn.thumbs.delete(Xr)}},[Xr,sn.thumbs]),jsxRuntimeExports.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[un.startEdge]:`calc(${lo}% + ${mo}px)`},children:[jsxRuntimeExports.jsx(Collection.ItemSlot,{scope:Mt.__scopeSlider,children:jsxRuntimeExports.jsx(Primitive.span,{role:"slider","aria-label":Mt["aria-label"]||fo,"aria-valuemin":sn.min,"aria-valuenow":co,"aria-valuemax":sn.max,"aria-orientation":sn.orientation,"data-orientation":sn.orientation,"data-disabled":sn.disabled?"":void 0,tabIndex:sn.disabled?void 0:0,...an,ref:uo,style:co===void 0?{display:"none"}:Mt.style,onFocus:composeEventHandlers(Mt.onFocus,()=>{sn.valueIndexToChangeRef.current=rn})})}),hn&&jsxRuntimeExports.jsx(BubbleInput,{name:on??(sn.name?sn.name+(sn.values.length>1?"[]":""):void 0),form:sn.form,value:co},rn)]})});SliderThumb.displayName=THUMB_NAME;var BubbleInput=Mt=>{const{value:st,...nn}=Mt,rn=reactExports.useRef(null),on=usePrevious(st);return reactExports.useEffect(()=>{const an=rn.current,sn=window.HTMLInputElement.prototype,Xr=Object.getOwnPropertyDescriptor(sn,"value").set;if(on!==st&&Xr){const to=new Event("input",{bubbles:!0});Xr.call(an,st),an.dispatchEvent(to)}},[on,st]),jsxRuntimeExports.jsx("input",{style:{display:"none"},...nn,ref:rn,defaultValue:st})};function getNextSortedValues(Mt=[],st,nn){const rn=[...Mt];return rn[nn]=st,rn.sort((on,an)=>on-an)}function convertValueToPercentage(Mt,st,nn){const an=100/(nn-st)*(Mt-st);return clamp(an,[0,100])}function getLabel$1(Mt,st){return st>2?`Value ${Mt+1} of ${st}`:st===2?["Minimum","Maximum"][Mt]:void 0}function getClosestValueIndex(Mt,st){if(Mt.length===1)return 0;const nn=Mt.map(on=>Math.abs(on-st)),rn=Math.min(...nn);return nn.indexOf(rn)}function getThumbInBoundsOffset(Mt,st,nn){const rn=Mt/2,an=linearScale([0,50],[0,rn]);return(rn-an(st)*nn)*nn}function getStepsBetweenValues(Mt){return Mt.slice(0,-1).map((st,nn)=>Mt[nn+1]-st)}function hasMinStepsBetweenValues(Mt,st){if(st>0){const nn=getStepsBetweenValues(Mt);return Math.min(...nn)>=st}return!0}function linearScale(Mt,st){return nn=>{if(Mt[0]===Mt[1]||st[0]===st[1])return st[0];const rn=(st[1]-st[0])/(Mt[1]-Mt[0]);return st[0]+rn*(nn-Mt[0])}}function getDecimalCount(Mt){return(String(Mt).split(".")[1]||"").length}function roundValue(Mt,st){const nn=Math.pow(10,st);return Math.round(Mt*nn)/nn}var Root$1=Slider$1,Track=SliderTrack,Range=SliderRange,Thumb=SliderThumb;const Slider=reactExports.forwardRef(({className:Mt,...st},nn)=>jsxRuntimeExports.jsxs(Root$1,{ref:nn,className:cn("relative flex w-full touch-none select-none items-center",Mt),...st,children:[jsxRuntimeExports.jsx(Track,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:jsxRuntimeExports.jsx(Range,{className:"absolute h-full bg-primary"})}),jsxRuntimeExports.jsx(Thumb,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));Slider.displayName=Root$1.displayName;const soundLabels={rain:{name:"Rain Sounds",icon:jsxRuntimeExports.jsx(Cloud,{className:"h-4 w-4"})},ocean:{name:"Ocean Waves",icon:jsxRuntimeExports.jsx(Waves,{className:"h-4 w-4"})},forest:{name:"Forest Ambience",icon:jsxRuntimeExports.jsx(Trees,{className:"h-4 w-4"})},meditation:{name:"Meditation Music",icon:jsxRuntimeExports.jsx(Music,{className:"h-4 w-4"})}};function AmbientPlayer({className:Mt,isCompact:st=!1}){const[nn,rn]=reactExports.useState(!1),[on,an]=reactExports.useState(.3),[sn,un]=reactExports.useState("rain"),Xr=reactExports.useRef(null),to=reactExports.useRef(null),uo=reactExports.useRef({});reactExports.useEffect(()=>{if(nn&&!Xr.current)try{Xr.current=new(window.AudioContext||window.webkitAudioContext),to.current=Xr.current.createGain(),to.current.gain.value=on,to.current.connect(Xr.current.destination)}catch(tp){console.error("WebAudio API not supported:",tp)}return()=>{Xr.current&&(fn(),Xr.current.close())}},[nn]),reactExports.useEffect(()=>{to.current&&(to.current.gain.value=on)},[on]),reactExports.useEffect(()=>{nn?hn(sn):fn()},[nn,sn]);const hn=tp=>{if(!(!Xr.current||!to.current))switch(fn(),tp){case"rain":co();break;case"ocean":lo();break;case"forest":fo();break;case"meditation":ho();break}},fn=()=>{Object.keys(uo.current).forEach(tp=>{var ep;if(uo.current[tp]){try{(ep=uo.current[tp])==null||ep.stop()}catch{}uo.current[tp]=null}})},co=()=>{if(!Xr.current||!to.current)return;const tp=Xr.current;for(let ep=0;ep<5;ep++){const np=2*tp.sampleRate,rp=tp.createBuffer(1,np,tp.sampleRate),ip=rp.getChannelData(0);for(let sp=0;sp<np;sp++)ip[sp]=Math.random()*(ep<3?.15:.05)*(1-ep*.15);const op=tp.createBufferSource();op.buffer=rp,op.loop=!0;const ap=tp.createBiquadFilter();ap.type="highpass",ap.frequency.value=400+ep*500,op.connect(ap),ap.connect(to.current),op.start(tp.currentTime+ep*.1),uo.current[`rain_${ep}`]=op}},lo=()=>{if(!Xr.current||!to.current)return;const tp=Xr.current,ep=tp.createOscillator();ep.type="sine",ep.frequency.value=.1;const np=2*tp.sampleRate,rp=tp.createBuffer(1,np,tp.sampleRate),ip=rp.getChannelData(0);for(let up=0;up<np;up++)ip[up]=Math.random()*.25;const op=tp.createBufferSource();op.buffer=rp,op.loop=!0;const ap=tp.createBiquadFilter();ap.type="lowpass",ap.frequency.value=400,ap.Q.value=10;const sp=tp.createGain();sp.gain.value=800,ep.connect(sp),sp.connect(ap.frequency),op.connect(ap),ap.connect(to.current),ep.start(),op.start(),uo.current.ocean_lfo=ep,uo.current.ocean_noise=op},fo=()=>{if(!Xr.current||!to.current)return;const tp=Xr.current,ep=setInterval(()=>{if(!Xr.current||!to.current){clearInterval(ep);return}if(Math.random()>.4){const sp=tp.createOscillator();sp.type="sine";const up=1e3+Math.random()*1e3;sp.frequency.setValueAtTime(up,tp.currentTime),sp.frequency.exponentialRampToValueAtTime(up+500,tp.currentTime+.1);const pp=tp.createGain();pp.gain.setValueAtTime(0,tp.currentTime),pp.gain.linearRampToValueAtTime(.3*on,tp.currentTime+.05),pp.gain.linearRampToValueAtTime(0,tp.currentTime+.2),sp.connect(pp),pp.connect(tp.destination),sp.start(),sp.stop(tp.currentTime+.2)}},2e3),np=2*tp.sampleRate,rp=tp.createBuffer(1,np,tp.sampleRate),ip=rp.getChannelData(0);for(let sp=0;sp<np;sp++)ip[sp]=Math.random()*.07;const op=tp.createBufferSource();op.buffer=rp,op.loop=!0;const ap=tp.createBiquadFilter();ap.type="bandpass",ap.frequency.value=600,ap.Q.value=.5,op.connect(ap),ap.connect(to.current),op.start(),uo.current.forest_wind=op,uo.current.forest_interval=ep},ho=()=>{if(!Xr.current||!to.current)return;const tp=Xr.current,ep=tp.createOscillator();ep.type="sine",ep.frequency.value=60;const np=tp.createOscillator();np.type="sine",np.frequency.value=90;const rp=tp.createOscillator();rp.type="sine",rp.frequency.value=120;const ip=tp.createGain();ip.gain.value=.2;const op=tp.createGain();op.gain.value=.1;const ap=tp.createGain();ap.gain.value=.05,ep.connect(ip),np.connect(op),rp.connect(ap),ip.connect(to.current),op.connect(to.current),ap.connect(to.current),ep.start(),np.start(),rp.start(),uo.current.meditation_drone=ep,uo.current.meditation_fifth=np,uo.current.meditation_octave=rp;const sp=[261.63,293.66,329.63,392,523.25];let up=0;const pp=setInterval(()=>{if(!Xr.current||!to.current){clearInterval(pp);return}const lp=tp.createOscillator();lp.type="sine",lp.frequency.value=sp[up];const dp=tp.createGain();dp.gain.setValueAtTime(0,tp.currentTime),dp.gain.linearRampToValueAtTime(.08*on,tp.currentTime+.1),dp.gain.linearRampToValueAtTime(0,tp.currentTime+1),lp.connect(dp),dp.connect(tp.destination),lp.start(),lp.stop(tp.currentTime+1),up=(up+1)%sp.length},2e3);uo.current.meditation_interval=pp},mo=()=>{rn(!nn)},Uo=tp=>{un(tp),nn&&hn(tp)},_d=tp=>{an(tp[0])};return reactExports.useEffect(()=>()=>{uo.current.forest_interval&&clearInterval(uo.current.forest_interval),uo.current.meditation_interval&&clearInterval(uo.current.meditation_interval)},[]),st?jsxRuntimeExports.jsxs(DropdownMenu,{children:[jsxRuntimeExports.jsx(DropdownMenuTrigger,{asChild:!0,children:jsxRuntimeExports.jsx(Button,{variant:"outline",size:"sm",className:cn("flex items-center gap-1",Mt,nn?"border-blue-300 text-blue-800 bg-blue-50":""),children:nn?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Volume2,{className:"h-4 w-4"}),jsxRuntimeExports.jsx("span",{className:"hidden sm:inline-block",children:"Ambient"})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(VolumeX,{className:"h-4 w-4"}),jsxRuntimeExports.jsx("span",{className:"hidden sm:inline-block",children:"Ambient"})]})})}),jsxRuntimeExports.jsxs(DropdownMenuContent,{className:"w-56",children:[jsxRuntimeExports.jsx(DropdownMenuLabel,{children:"Ambient Sounds"}),jsxRuntimeExports.jsx(DropdownMenuSeparator,{}),jsxRuntimeExports.jsx(DropdownMenuGroup,{children:jsxRuntimeExports.jsx(DropdownMenuItem,{className:"justify-between cursor-pointer",onClick:mo,children:nn?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:["Pause ",jsxRuntimeExports.jsx(CirclePause,{className:"h-4 w-4"})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:["Play ",jsxRuntimeExports.jsx(CirclePlay,{className:"h-4 w-4"})]})})}),jsxRuntimeExports.jsx(DropdownMenuSeparator,{}),jsxRuntimeExports.jsx(DropdownMenuLabel,{children:"Sound Type"}),jsxRuntimeExports.jsx(DropdownMenuGroup,{children:Object.entries(soundLabels).map(([tp,{name:ep,icon:np}])=>jsxRuntimeExports.jsxs(DropdownMenuItem,{className:cn("cursor-pointer",sn===tp&&"bg-blue-50 text-blue-700"),onClick:()=>Uo(tp),children:[jsxRuntimeExports.jsxs("span",{className:"flex items-center gap-2",children:[np,ep]}),sn===tp&&jsxRuntimeExports.jsx("span",{className:"ml-auto text-xs",children:""})]},tp))}),jsxRuntimeExports.jsx(DropdownMenuSeparator,{}),jsxRuntimeExports.jsxs("div",{className:"px-2 py-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center mb-1",children:[jsxRuntimeExports.jsx(Volume2,{className:"h-3 w-3 mr-1"}),jsxRuntimeExports.jsx("span",{className:"text-xs",children:"Volume"})]}),jsxRuntimeExports.jsx(Slider,{defaultValue:[on],max:1,step:.01,onValueChange:_d})]})]})]}):jsxRuntimeExports.jsxs("div",{className:cn("rounded-lg border p-4 shadow-sm",Mt),children:[jsxRuntimeExports.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-medium",children:"Ambient Sounds"}),jsxRuntimeExports.jsx(Button,{onClick:mo,variant:nn?"default":"outline",size:"sm",className:"gap-2",children:nn?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(CirclePause,{className:"h-4 w-4"})," Pause"]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(CirclePlay,{className:"h-4 w-4"})," Play"]})})]}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-2 gap-2 mb-4",children:Object.entries(soundLabels).map(([tp,{name:ep,icon:np}])=>jsxRuntimeExports.jsxs(Button,{variant:sn===tp?"secondary":"outline",size:"sm",className:"justify-start gap-2",onClick:()=>Uo(tp),children:[np,jsxRuntimeExports.jsx("span",{children:ep})]},tp))}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Volume2,{className:"h-4 w-4"}),jsxRuntimeExports.jsx(Slider,{defaultValue:[on],max:1,step:.01,onValueChange:_d,className:"flex-1"})]})]})}function AmbientSoundPlayer({className:Mt}){const[st,nn]=reactExports.useState(!1),rn=()=>{nn(!st)};return jsxRuntimeExports.jsxs("div",{className:`relative ${Mt}`,children:[jsxRuntimeExports.jsxs(Button,{variant:"outline",size:"sm",className:"flex items-center gap-1 bg-primary/10 border-primary/20 text-primary hover:bg-primary/20",onClick:rn,children:[jsxRuntimeExports.jsx(Music,{size:16}),jsxRuntimeExports.jsx("span",{className:"ml-1",children:"Ambient Sound"})]}),jsxRuntimeExports.jsx(AnimatePresence,{children:st&&jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:-10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.95},transition:{duration:.2},className:"absolute z-10 mt-2 p-3 bg-white rounded-lg shadow-lg border border-primary/20 w-[310px] right-0",children:[jsxRuntimeExports.jsx("div",{className:"text-sm font-medium mb-3 text-primary",children:"Ambient Sounds"}),jsxRuntimeExports.jsx(AmbientPlayer,{}),jsxRuntimeExports.jsx("div",{className:"text-xs text-muted-foreground mt-3 italic",children:"Ambient sounds can help create a calming atmosphere during your therapy session."})]})})]})}function InstructionsCard$1(){const[Mt,st]=reactExports.useState(!1),nn=()=>{st(!Mt)};return jsxRuntimeExports.jsxs(Card,{className:"bg-blue-50 border-blue-100 overflow-hidden transition-all duration-300 relative mb-6",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-50/20 to-green-50/20 animate-shimmer"}),jsxRuntimeExports.jsxs(CardHeader,{className:"flex flex-row items-center justify-between py-3 px-4 cursor-pointer relative z-10",onClick:nn,children:[jsxRuntimeExports.jsxs(motion.div,{className:"flex items-center gap-2",whileHover:{x:2},children:[jsxRuntimeExports.jsx(BookOpen,{className:"h-5 w-5 text-blue-600 animate-pulse"}),jsxRuntimeExports.jsx(CardTitle,{className:"text-blue-700 text-base font-medium",children:"Voice Therapy Instructions"})]}),jsxRuntimeExports.jsx(motion.div,{animate:{rotate:Mt?180:0},transition:{duration:.3},children:jsxRuntimeExports.jsx(ChevronDown,{className:"h-5 w-5 text-blue-600"})})]}),jsxRuntimeExports.jsx(AnimatePresence,{initial:!1,children:Mt&&jsxRuntimeExports.jsx(motion.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3,ease:"easeInOut"},className:"overflow-hidden",children:jsxRuntimeExports.jsx(CardContent,{className:"relative z-10",children:jsxRuntimeExports.jsxs(motion.div,{className:"space-y-4",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.1},children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-3",children:[jsxRuntimeExports.jsx("div",{className:"mt-1 bg-blue-100 p-1.5 rounded-full",children:jsxRuntimeExports.jsx(Mic,{className:"h-4 w-4 text-blue-600"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"font-medium text-blue-700 mb-1",children:"How to Use Voice Therapy"}),jsxRuntimeExports.jsx("p",{className:"text-blue-600 text-sm",children:"Speak naturally into your microphone when ready. The AI therapist will listen to your words and analyze your vocal tone to provide personalized responses. Try to speak clearly and at a normal pace for the best results."})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-3",children:[jsxRuntimeExports.jsx("div",{className:"mt-1 bg-blue-100 p-1.5 rounded-full",children:jsxRuntimeExports.jsx(Camera,{className:"h-4 w-4 text-blue-600"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"font-medium text-blue-700 mb-1",children:"Facial Emotion Recognition"}),jsxRuntimeExports.jsx("p",{className:"text-blue-600 text-sm",children:"The camera will detect facial expressions to better understand your emotional state. Position yourself so your face is clearly visible and well-lit for optimal emotion recognition."})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-3",children:[jsxRuntimeExports.jsx("div",{className:"mt-1 bg-green-100 p-1.5 rounded-full",children:jsxRuntimeExports.jsx(Brain,{className:"h-4 w-4 text-green-600"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"font-medium text-green-700 mb-1",children:"AI Personalization"}),jsxRuntimeExports.jsx("p",{className:"text-green-600 text-sm",children:"The AI adapts responses based on your detected emotions, vocal tone, and age group setting. For more personalized interaction, try setting the appropriate age group from the dropdown menu above."})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-3",children:[jsxRuntimeExports.jsx("div",{className:"mt-1 bg-green-100 p-1.5 rounded-full",children:jsxRuntimeExports.jsx(ShieldCheck,{className:"h-4 w-4 text-green-600"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"font-medium text-green-700 mb-1",children:"Privacy"}),jsxRuntimeExports.jsx("p",{className:"text-green-600 text-sm",children:PRIVACY_NOTE})]})]}),jsxRuntimeExports.jsx("div",{className:"pt-2",children:jsxRuntimeExports.jsx(Button,{size:"sm",variant:"outline",className:"w-full text-blue-600 border-blue-200 hover:bg-blue-100 transition-all",onClick:nn,children:"Close Instructions"})})]})})})})]})}function AgeGroupSelector({currentAgeGroup:Mt,onAgeGroupChange:st,label:nn="Language Level",className:rn=""}){const[on,an]=reactExports.useState(!1),sn=Xr=>{switch(Xr){case"children":return"Children (5-12)";case"teenagers":return"Teenagers (13-17)";case"adults":return"Adults (18+)";default:return"Adults (18+)"}},un=Xr=>{switch(Xr){case"children":return jsxRuntimeExports.jsx(Baby,{className:"h-4 w-4 mr-2"});case"teenagers":return jsxRuntimeExports.jsx(School,{className:"h-4 w-4 mr-2"});case"adults":return jsxRuntimeExports.jsx(User,{className:"h-4 w-4 mr-2"});default:return jsxRuntimeExports.jsx(User,{className:"h-4 w-4 mr-2"})}};return jsxRuntimeExports.jsxs("div",{className:`flex flex-col ${rn}`,children:[nn&&jsxRuntimeExports.jsx("label",{className:"text-xs text-beige-500 mb-1",children:nn}),jsxRuntimeExports.jsxs(DropdownMenu,{open:on,onOpenChange:an,children:[jsxRuntimeExports.jsx(DropdownMenuTrigger,{asChild:!0,children:jsxRuntimeExports.jsxs(Button,{variant:"outline",size:"sm",className:"justify-between bg-beige-100 border-beige-300 text-beige-700 h-9 opacity-100",children:[jsxRuntimeExports.jsxs("span",{className:"flex items-center",children:[un(Mt),sn(Mt)]}),jsxRuntimeExports.jsx(ChevronDown,{className:"h-4 w-4 opacity-50"})]})}),jsxRuntimeExports.jsxs(DropdownMenuContent,{align:"end",className:"bg-beige-100 border-beige-300 opacity-100",children:[jsxRuntimeExports.jsxs(DropdownMenuItem,{className:"flex cursor-pointer items-center",onClick:()=>{st("children"),an(!1)},children:[jsxRuntimeExports.jsx(Baby,{className:"h-4 w-4 mr-2"}),"Children (5-12)"]}),jsxRuntimeExports.jsxs(DropdownMenuItem,{className:"flex cursor-pointer items-center",onClick:()=>{st("teenagers"),an(!1)},children:[jsxRuntimeExports.jsx(School,{className:"h-4 w-4 mr-2"}),"Teenagers (13-17)"]}),jsxRuntimeExports.jsxs(DropdownMenuItem,{className:"flex cursor-pointer items-center",onClick:()=>{st("adults"),an(!1)},children:[jsxRuntimeExports.jsx(User,{className:"h-4 w-4 mr-2"}),"Adults (18+)"]})]})]})]})}const COLORS=["#FF5252","#3D5AFE","#00BFA5","#FFD740","#FF4081","#64FFDA","#536DFE","#FFAB40"];function Confetti({active:Mt,onComplete:st,duration:nn=3e3}){const[rn,on]=reactExports.useState([]),[an,sn]=reactExports.useState(!1);return reactExports.useEffect(()=>{if(Mt&&!an){sn(!0);const un=[];for(let to=0;to<50;to++)un.push({id:to,x:Math.random()*100,y:-20-Math.random()*40,color:COLORS[Math.floor(Math.random()*COLORS.length)],size:5+Math.random()*10,opacity:.6+Math.random()*.4,rotation:Math.random()*360});on(un);const Xr=setTimeout(()=>{on([]),sn(!1),st&&st()},nn);return()=>clearTimeout(Xr)}},[Mt,an,st,nn]),jsxRuntimeExports.jsx("div",{className:"fixed inset-0 pointer-events-none z-50 overflow-hidden",children:jsxRuntimeExports.jsx(AnimatePresence,{children:rn.map(un=>jsxRuntimeExports.jsx(motion.div,{initial:{x:`${un.x}vw`,y:`${un.y}vh`,opacity:un.opacity,rotate:un.rotation,scale:0},animate:{y:`${70+Math.random()*20}vh`,x:`${un.x+(Math.random()*20-10)}vw`,rotate:un.rotation+360+Math.random()*180,scale:1},exit:{opacity:0,scale:0},transition:{duration:1.5+Math.random()*1.5,ease:"easeOut",delay:Math.random()*.2},style:{position:"absolute",width:`${un.size}px`,height:`${un.size}px`,backgroundColor:un.color,borderRadius:`${Math.random()>.5?"50%":"0%"}`}},un.id))})})}function SuccessNotification({show:Mt,message:st,onComplete:nn,duration:rn=3e3,withConfetti:on=!1}){const[an,sn]=reactExports.useState(Mt),[un,Xr]=reactExports.useState(!1);return reactExports.useEffect(()=>{if(Mt&&!an){sn(!0),on&&Xr(!0);const to=setTimeout(()=>{sn(!1),nn&&setTimeout(nn,300)},rn);return()=>clearTimeout(to)}!Mt&&an&&sn(!1)},[Mt,an,rn,nn,on]),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[on&&jsxRuntimeExports.jsx(Confetti,{active:un,onComplete:()=>Xr(!1)}),jsxRuntimeExports.jsx(AnimatePresence,{children:an&&jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:-20,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-20,scale:.9},transition:{type:"spring",damping:25,stiffness:300},className:"fixed top-4 right-4 z-50 flex items-center bg-green-50 text-green-800 px-4 py-3 rounded-lg shadow-lg border border-green-200 max-w-sm",children:[jsxRuntimeExports.jsx(motion.div,{initial:{rotate:0,scale:.8},animate:{rotate:[0,15,-15,0],scale:[.8,1.2,1]},transition:{duration:.5},className:"mr-3 text-green-500 flex-shrink-0",children:jsxRuntimeExports.jsx(CircleCheckBig,{size:24})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"font-medium",children:"Success!"}),jsxRuntimeExports.jsx("div",{className:"text-sm text-green-600",children:st})]})]})})]})}const scriptRel="modulepreload",assetsURL=function(Mt){return"/"+Mt},seen={},__vitePreload=function(st,nn,rn){let on=Promise.resolve();if(nn&&nn.length>0){document.getElementsByTagName("link");const sn=document.querySelector("meta[property=csp-nonce]"),un=(sn==null?void 0:sn.nonce)||(sn==null?void 0:sn.getAttribute("nonce"));on=Promise.allSettled(nn.map(Xr=>{if(Xr=assetsURL(Xr),Xr in seen)return;seen[Xr]=!0;const to=Xr.endsWith(".css"),uo=to?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${Xr}"]${uo}`))return;const hn=document.createElement("link");if(hn.rel=to?"stylesheet":scriptRel,to||(hn.as="script"),hn.crossOrigin="",hn.href=Xr,un&&hn.setAttribute("nonce",un),document.head.appendChild(hn),to)return new Promise((fn,co)=>{hn.addEventListener("load",fn),hn.addEventListener("error",()=>co(new Error(`Unable to preload CSS for ${Xr}`)))})}))}function an(sn){const un=new Event("vite:preloadError",{cancelable:!0});if(un.payload=sn,window.dispatchEvent(un),!un.defaultPrevented)throw sn}return on.then(sn=>{for(const un of sn||[])un.status==="rejected"&&an(un.reason);return st().catch(an)})},byteToHex=[];for(let Mt=0;Mt<256;++Mt)byteToHex.push((Mt+256).toString(16).slice(1));function unsafeStringify(Mt,st=0){return(byteToHex[Mt[st+0]]+byteToHex[Mt[st+1]]+byteToHex[Mt[st+2]]+byteToHex[Mt[st+3]]+"-"+byteToHex[Mt[st+4]]+byteToHex[Mt[st+5]]+"-"+byteToHex[Mt[st+6]]+byteToHex[Mt[st+7]]+"-"+byteToHex[Mt[st+8]]+byteToHex[Mt[st+9]]+"-"+byteToHex[Mt[st+10]]+byteToHex[Mt[st+11]]+byteToHex[Mt[st+12]]+byteToHex[Mt[st+13]]+byteToHex[Mt[st+14]]+byteToHex[Mt[st+15]]).toLowerCase()}let getRandomValues;const rnds8=new Uint8Array(16);function rng(){if(!getRandomValues){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");getRandomValues=crypto.getRandomValues.bind(crypto)}return getRandomValues(rnds8)}const randomUUID=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),native={randomUUID};function v4(Mt,st,nn){var on;if(native.randomUUID&&!st&&!Mt)return native.randomUUID();Mt=Mt||{};const rn=Mt.random??((on=Mt.rng)==null?void 0:on.call(Mt))??rng();if(rn.length<16)throw new Error("Random bytes length must be >= 16");return rn[6]=rn[6]&15|64,rn[8]=rn[8]&63|128,unsafeStringify(rn)}let vocalToneHistory$1=[];const getVocalToneHistory$1=()=>vocalToneHistory$1,detectVocalTone=(Mt,st)=>{if(!Mt||Mt.trim().length===0)return{tone:"neutral",confidence:.5};const nn=Mt.toLowerCase().trim(),rn={exclamationCount:(Mt.match(/!/g)||[]).length,questionCount:(Mt.match(/\?/g)||[]).length,capitalsRatio:countUppercaseLetters(Mt)/Math.max(1,Mt.length),wordCount:Mt.split(/\s+/).filter(fn=>fn.length>0).length,avgWordLength:calculateAvgWordLength(Mt),sentenceCount:(Mt.match(/[.!?]+/g)||[]).length,repetition:detectRepetition(Mt),stopWords:countStopWords(nn),punctuationDensity:countPunctuation(Mt)/Math.max(1,Mt.length)},on={neutral:{words:["normal","fine","okay","ok","alright","good","well","sure","yes","no"],weight:1},excited:{words:["excited","happy","great","amazing","wonderful","fantastic","awesome","excellent","love","wow","cool","best","fun","delighted","thrilled","perfect","brilliant"],weight:1.2},sad:{words:["sad","depressed","unhappy","disappointed","sorry","miss","lost","hurt","alone","painful","grief","crying","regret","unfortunate","hopeless","heartbroken","miserable"],weight:1.5},angry:{words:["angry","upset","mad","furious","hate","terrible","worst","annoying","frustrated","irritated","outraged","unfair","ridiculous","wrong","awful","stupid","bad"],weight:1.5},anxious:{words:["worried","anxious","nervous","scared","afraid","stress","panic","concerned","uncertain","fear","frightened","terrified","uneasy","tense","overwhelmed","doubt"],weight:1.3},calm:{words:["calm","relaxed","peaceful","balanced","quiet","comfortable","content","steady","composed","tranquil","serene","patient","gentle","steady","stable"],weight:1.1},uncertain:{words:["maybe","perhaps","not sure","might","guess","possibly","uncertain","confused","unclear","wonder","unsure","doubt","confusing","complicated","hard to say","thinking"],weight:1.2}},an={neutral:0,excited:0,sad:0,angry:0,anxious:0,calm:0,uncertain:0};rn.exclamationCount>0&&(an.excited+=rn.exclamationCount*.3,an.angry+=rn.exclamationCount*.1),rn.questionCount>0&&(an.uncertain+=rn.questionCount*.3),rn.capitalsRatio>.25&&(an.excited+=rn.capitalsRatio*1.5,an.angry+=rn.capitalsRatio*2),rn.repetition>.3&&(an.anxious+=rn.repetition*1.5,an.uncertain+=rn.repetition);for(const[fn,{words:co,weight:lo}]of Object.entries(on))for(const fo of co)try{const ho=fo.length>1?`\\b${fo}\\b`:fo,mo=new RegExp(ho,"gi"),Uo=nn.match(mo);Uo&&(an[fn]+=Uo.length*lo,Uo.forEach(_d=>{const tp=nn.indexOf(_d.toLowerCase()),ep=nn.substring(Math.max(0,tp-20),Math.min(nn.length,tp+_d.length+20));/\b(very|really|so|extremely|absolutely|totally|completely|deeply|highly|terribly|incredibly)\b/i.test(ep)&&(an[fn]+=.5*lo)}))}catch{const mo=nn.split(fo).length-1;mo>0&&(an[fn]+=mo*lo)}const sn=Mt.split(/[.!?]+/).filter(fn=>fn.trim().length>0);if(sn.length>0){const fn=Mt.length/sn.length;fn<15&&sn.length>=2&&(an.angry+=.5,an.anxious+=.3),fn>40&&(an.calm+=.5)}let un=0,Xr="neutral";for(const[fn,co]of Object.entries(an))co>un&&(un=co,Xr=fn);const to=Object.values(an).reduce((fn,co)=>fn+co,0);let uo=.5;to>0&&(uo=.5+Math.min(.5,un/to*.7)),un<.5&&(Xr="neutral",uo=.5);const hn=smoothVocalToneWithHistory(Xr,uo);return vocalToneHistory$1.push({tone:hn.tone,confidence:hn.confidence,timestamp:new Date}),vocalToneHistory$1.length>100&&(vocalToneHistory$1=vocalToneHistory$1.slice(-100)),hn};function smoothVocalToneWithHistory(Mt,st){if(vocalToneHistory$1.length===0||st>.85)return{tone:Mt,confidence:st};const nn=vocalToneHistory$1.slice(-3),rn={};if(nn.forEach(an=>{rn[an.tone]=(rn[an.tone]||0)+1}),rn[Mt]>=1)return{tone:Mt,confidence:st*1.05};const on=Object.entries(rn).sort((an,sn)=>sn[1]-an[1])[0][0];return st>.7?{tone:Mt,confidence:st}:{tone:on,confidence:.6}}function countUppercaseLetters(Mt){return(Mt.match(/[A-Z]/g)||[]).length}function calculateAvgWordLength(Mt){const st=Mt.split(/\s+/).filter(rn=>rn.length>0);return st.length===0?0:st.reduce((rn,on)=>rn+on.length,0)/st.length}function detectRepetition(Mt){const st=Mt.toLowerCase().split(/\s+/).filter(rn=>rn.length>0);return st.length<4?0:new Set(st).size/st.length}function countStopWords(Mt){const st=["i","me","my","myself","we","our","ours","ourselves","you","your","yours","yourself","yourselves","he","him","his","himself","she","her","hers","herself","it","its","itself","they","them","their","theirs","themselves","what","which","who","whom","this","that","these","those","am","is","are","was","were","be","been","being","have","has","had","having","do","does","did","doing","a","an","the","and","but","if","or","because","as","until","while","of","at","by","for","with","about","against","between","into","through","during","before","after","above","below","to","from","up","down","in","out","on","off","over","under","again","further","then","once","here","there","when","where","why","how","all","any","both","each","few","more","most","other","some","such","no","nor","not","only","own","same","so","than","too","very","s","t","can","will","just","don","should","now"],nn=Mt.split(/\s+/);let rn=0;for(const on of nn)st.includes(on)&&rn++;return rn}function countPunctuation(Mt){return(Mt.match(/[.,!?;:'"()\[\]{}]/g)||[]).length}const processTextComplexity=(Mt,st)=>{if(!Mt)return Mt;try{let nn=Mt;if(st===0){const rn={utilize:"use",facilitate:"help",implement:"use",subsequently:"then",additionally:"also",regarding:"about",initiate:"start",terminate:"end",modification:"change",approximately:"about",significantly:"a lot",expedite:"speed up",endeavor:"try",prioritize:"focus on",consequently:"so",nevertheless:"still",furthermore:"also",therefore:"so",comprehend:"understand",inquire:"ask"};for(const[on,an]of Object.entries(rn)){const sn=new RegExp(`\\b${on}\\b`,"gi");nn=nn.replace(sn,an)}}return nn}catch(nn){return console.error("Error processing text complexity:",nn),Mt}};function useLanguageComplexity({defaultAgeGroup:Mt="adults"}={}){const[st,nn]=reactExports.useState(Mt),rn=()=>{switch(st){case"children":return 0;case"teenagers":return 1;case"adults":default:return 2}};return{ageGroup:st,setAgeGroup:nn,getComplexityLevel:rn,getLanguageInstructions:()=>{const un=rn();return LANGUAGE_COMPLEXITY_LEVELS[un].instructions},getLanguageExamples:()=>{const un=rn();return LANGUAGE_COMPLEXITY_LEVELS[un].examples},getTherapeuticPrompt:(un,Xr,to)=>{const uo=rn(),hn=LANGUAGE_COMPLEXITY_LEVELS[uo].instructions,fn=LANGUAGE_COMPLEXITY_LEVELS[uo].examples;let co="";return Xr&&(co+=`The user appears to be feeling ${Xr}. `),to&&(co+=`Their tone of voice suggests they are ${to}. `),`
      You are a compassionate AI therapist having a conversation with someone. 
      ${co}
      
      The person has said: "${un}"
      
      ${hn}
      
      Examples of this language level:
      ${fn}
      
      Respond with empathy, therapeutic insight, and in a way that's appropriate for their emotional state, 
      while maintaining the specified language complexity level.
    `}}}function usePuterAI({initialMessage:Mt,defaultAgeGroup:st="adults"}={}){const[nn,rn]=reactExports.useState(()=>Mt?[{id:v4(),content:Mt,role:"assistant",timestamp:new Date}]:[]),[on,an]=reactExports.useState(!1),[sn,un]=reactExports.useState(null),{ageGroup:Xr,setAgeGroup:to,getComplexityLevel:uo,getTherapeuticPrompt:hn}=useLanguageComplexity({defaultAgeGroup:st}),[fn,co]=reactExports.useState(st==="children"?0:st==="teenagers"?1:2),lo=reactExports.useRef({userMood:{},recentTopics:[],messageCount:Mt?1:0}),fo=reactExports.useCallback(async(Uo,_d,tp)=>{const ep=typeof Uo=="string"?Uo:Uo.text;if(!ep.trim())return;_d&&(lo.current.userMood.facialEmotion=_d),tp&&(lo.current.userMood.vocalTone=tp);const np=ep.trim().replace(/^([a-z])/,ip=>ip.toUpperCase()).replace(/\s{2,}/g," "),rp={id:v4(),content:np,role:"user",timestamp:new Date,mood:{emotion:_d,tone:tp}};rn(ip=>[...ip,rp]),an(!0),un(null);try{if(!window.puter||!window.puter.ai||!window.puter.ai.chat){console.log("Puter AI not detected, attempting to initialize...");const{initializePuterJs:fp}=await __vitePreload(async()=>{const{initializePuterJs:gp}=await Promise.resolve().then(()=>puterService);return{initializePuterJs:gp}},void 0);if(await fp(),!window.puter||!window.puter.ai||!window.puter.ai.chat)throw new Error("Puter AI is not available despite initialization attempt")}const ip=ho(ep);lo.current.recentTopics=[...ip,...lo.current.recentTopics].slice(0,10),lo.current.messageCount++;let op="";lo.current.messageCount>1&&lo.current.recentTopics.length>0&&(op=`This is part of an ongoing conversation about ${lo.current.recentTopics.slice(0,3).join(", ")}.`);const ap=hn(ep,_d,tp),sp=op?`${op}

${ap}`:ap,up=new Promise((fp,gp)=>{const mp=setTimeout(()=>{clearTimeout(mp),gp(new Error("AI response timed out"))},1e4)}),pp=await Promise.race([window.puter.ai.chat(sp),up]);if(!pp||!pp.message||!pp.message.content)throw new Error("Invalid response from AI");const lp=uo(),dp=processTextComplexity(pp.message.content,lp),cp={id:v4(),content:dp,role:"assistant",timestamp:new Date,mood:{emotion:_d?_d==="happy"?"happy":_d==="sad"?"neutral":_d==="angry"?"calm":"neutral":void 0}};rn(fp=>[...fp,cp])}catch(ip){console.error("Error processing AI response:",ip);let op="I encountered an issue processing your request. Please try again.";ip instanceof Error&&(ip.message.includes("timeout")||ip.message.includes("timed out")?op="I'm thinking a bit longer than usual. Let's try again with a simpler response.":ip.message.includes("not available")&&(op="I'm having trouble connecting right now. I'm still here to listen though. Could you try sharing again?")),un(op);const ap={id:v4(),content:op,role:"assistant",timestamp:new Date,mood:{emotion:"neutral"}};rn(sp=>[...sp,ap])}finally{an(!1)}},[hn,uo]),ho=Uo=>{const _d=["i","me","my","myself","we","our","ours","ourselves","you","your","yours","yourself","yourselves","he","him","his","himself","she","her","hers","herself","it","its","itself","they","them","their","theirs","themselves","what","which","who","whom","this","that","these","those","am","is","are","was","were","be","been","being","have","has","had","having","do","does","did","doing","a","an","the","and","but","if","or","because","as","until","while","of","at","by","for","with","about","against","between","into","through","during","before","after","above","below","to","from","up","down","in","out","on","off","over","under","again","further","then","once","here","there","when","where","why","how","all","any","both","each","few","more","most","other","some","such","no","nor","not","only","own","same","so","than","too","very","s","t","can","will","just","don","should","now","d","ll","m","o","re","ve","y","ain","aren","couldn","didn","doesn","hadn","hasn","haven","isn","ma","mightn","mustn","needn","shan","shouldn","wasn","weren","won","wouldn"];return Uo.toLowerCase().replace(/[^\w\s]/g,"").split(/\s+/).filter(tp=>tp.length>3&&!_d.includes(tp)).slice(0,5)},mo=reactExports.useCallback(Uo=>{Uo>=0&&Uo<=2&&(co(Uo),to(Uo===0?"children":Uo===1?"teenagers":"adults"))},[to]);return{messages:nn,sendMessage:fo,isProcessing:on,error:sn,languageComplexity:fn,setComplexity:mo,ageGroup:Xr,setAgeGroup:to}}function useSpeechRecognition({onFinalTranscript:Mt,autoRestart:st=!0,pauseThreshold:nn=1500}={}){const[rn,on]=reactExports.useState(!1),[an,sn]=reactExports.useState(""),[un,Xr]=reactExports.useState(null),to=reactExports.useRef(null),uo=reactExports.useRef(null),hn=reactExports.useRef(null),fn=reactExports.useRef(0),co=reactExports.useCallback(()=>{if(!("webkitSpeechRecognition"in window)&&!("SpeechRecognition"in window))return Xr("Speech recognition is not supported in this browser."),null;const Uo=window.SpeechRecognition||window.webkitSpeechRecognition,_d=new Uo;return _d.continuous=!0,_d.interimResults=!0,_d.lang="en-US",_d.onstart=()=>{on(!0),Xr(null),fn.current=Date.now()},_d.onerror=tp=>{console.error("Speech recognition error",tp.error),tp.error==="no-speech"?st&&fo():tp.error==="aborted"?on(!1):Xr(`Speech recognition error: ${tp.error}`)},_d.onend=()=>{on(!1),st&&(uo.current=window.setTimeout(()=>{try{_d.start()}catch(tp){console.error("Error restarting speech recognition:",tp)}},300))},_d.onresult=tp=>{let ep="",np="";for(let rp=tp.resultIndex;rp<tp.results.length;++rp)tp.results[rp].isFinal?np+=tp.results[rp][0].transcript:ep+=tp.results[rp][0].transcript;np!==""&&lo(np,tp.results[tp.resultIndex][0].confidence),(ep||np)&&(sn(ep||np),fn.current=Date.now(),hn.current&&(clearTimeout(hn.current),hn.current=null),hn.current=window.setTimeout(()=>{ep&&Date.now()-fn.current>=nn&&(lo(ep,.8),sn(""))},nn))},_d},[st,nn]),lo=reactExports.useCallback((Uo,_d)=>{if(!Uo.trim())return;const tp=Uo.trim().replace(/(\s{2,})/g," ").replace(/^\s*i\s+/i,"I ").replace(/(\.\s+|^)([a-z])/g,(np,rp,ip)=>rp+ip.toUpperCase()),ep=detectVocalTone(tp);Mt&&Mt({text:tp,confidence:_d},ep.tone,ep.confidence),sn("")},[Mt]),fo=reactExports.useCallback(()=>{if(to.current){try{to.current.abort()}catch(Uo){console.error("Error aborting recognition:",Uo)}try{setTimeout(()=>{to.current&&to.current.start()},100)}catch(Uo){console.error("Error restarting recognition:",Uo)}}},[]);reactExports.useEffect(()=>(to.current=co(),()=>{if(to.current)try{to.current.abort()}catch(Uo){console.error("Error aborting recognition on cleanup:",Uo)}uo.current&&(clearTimeout(uo.current),uo.current=null),hn.current&&(clearTimeout(hn.current),hn.current=null)}),[co]);const ho=reactExports.useCallback(()=>{if(to.current||(to.current=co()),to.current&&!rn)try{to.current.start()}catch(Uo){console.error("Error starting speech recognition:",Uo),Xr("Error starting speech recognition. Please try again."),to.current=co(),to.current&&setTimeout(()=>{var _d;try{(_d=to.current)==null||_d.start()}catch(tp){console.error("Error on retry start:",tp)}},200)}},[co,rn]),mo=reactExports.useCallback(()=>{if(to.current)try{to.current.stop()}catch(Uo){console.error("Error stopping speech recognition:",Uo)}uo.current&&(clearTimeout(uo.current),uo.current=null),hn.current&&(clearTimeout(hn.current),hn.current=null),on(!1)},[]);return{isListening:rn,transcript:an,error:un,startListening:ho,stopListening:mo,isSupported:"webkitSpeechRecognition"in window||"SpeechRecognition"in window}}function dispatchCallback(Mt,st){Mt&&Mt(st)}function reverseDictionary(Mt){return Object.fromEntries(Object.entries(Mt).map(([st,nn])=>[nn,st]))}function escapeRegExp(Mt){return Mt.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}const Callable=class{constructor(){let Mt=function(...st){return Mt._call(...st)};return Object.setPrototypeOf(Mt,new.target.prototype)}_call(...Mt){throw Error("Must implement _call method in subclass")}};function isTypedArray$4(Mt){var st,nn,rn;return((rn=(nn=(st=Mt==null?void 0:Mt.prototype)==null?void 0:st.__proto__)==null?void 0:nn.constructor)==null?void 0:rn.name)==="TypedArray"}function isIntegralNumber(Mt){return Number.isInteger(Mt)||typeof Mt=="bigint"}function exists(Mt){return Mt!=null}function calculateDimensions(Mt){const st=[];let nn=Mt;for(;Array.isArray(nn);)st.push(nn.length),nn=nn[0];return st}function pop(Mt,st,nn=void 0){const rn=Mt[st];if(rn!==void 0)return delete Mt[st],rn;if(nn===void 0)throw Error(`Key ${st} does not exist in object.`);return nn}function mergeArrays(...Mt){return Array.prototype.concat.apply([],Mt)}function product(...Mt){return Mt.reduce((st,nn)=>st.flatMap(rn=>nn.map(on=>[rn,on])))}function calculateReflectOffset(Mt,st){return Math.abs((Mt+st)%(2*st)-st)}const sharp={},ONNX_NODE=Object.freeze(Object.defineProperty({__proto__:null,default:sharp},Symbol.toStringTag,{value:"Module"}));var ortWeb_min$1={exports:{}};const backends={},backendsSortedByPriority=[],registerBackend=(Mt,st,nn)=>{if(st&&typeof st.init=="function"&&typeof st.createSessionHandler=="function"){const rn=backends[Mt];if(rn===void 0)backends[Mt]={backend:st,priority:nn};else{if(rn.priority>nn)return;if(rn.priority===nn&&rn.backend!==st)throw new Error(`cannot register backend "${Mt}" using priority ${nn}`)}if(nn>=0){const on=backendsSortedByPriority.indexOf(Mt);on!==-1&&backendsSortedByPriority.splice(on,1);for(let an=0;an<backendsSortedByPriority.length;an++)if(backends[backendsSortedByPriority[an]].priority<=nn){backendsSortedByPriority.splice(an,0,Mt);return}backendsSortedByPriority.push(Mt)}return}throw new TypeError("not a valid backend")},resolveBackend=async Mt=>{const st=Mt.length===0?backendsSortedByPriority:Mt,nn=[];for(const rn of st){const on=backends[rn];if(on){if(on.initialized)return on.backend;if(on.aborted)continue;const an=!!on.initPromise;try{return an||(on.initPromise=on.backend.init()),await on.initPromise,on.initialized=!0,on.backend}catch(sn){an||nn.push({name:rn,err:sn}),on.aborted=!0}finally{delete on.initPromise}}}throw new Error(`no available backend found. ERR: ${nn.map(rn=>`[${rn.name}] ${rn.err}`).join(", ")}`)};class EnvImpl{constructor(){this.wasm={},this.webgl={},this.logLevelInternal="warning"}set logLevel(st){if(st!==void 0){if(typeof st!="string"||["verbose","info","warning","error","fatal"].indexOf(st)===-1)throw new Error(`Unsupported logging level: ${st}`);this.logLevelInternal=st}}get logLevel(){return this.logLevelInternal}}const env$2=new EnvImpl,isBigInt64ArrayAvailable=typeof BigInt64Array<"u"&&typeof BigInt64Array.from=="function",isBigUint64ArrayAvailable=typeof BigUint64Array<"u"&&typeof BigUint64Array.from=="function",NUMERIC_TENSOR_TYPE_TO_TYPEDARRAY_MAP=new Map([["float32",Float32Array],["uint8",Uint8Array],["int8",Int8Array],["uint16",Uint16Array],["int16",Int16Array],["int32",Int32Array],["bool",Uint8Array],["float64",Float64Array],["uint32",Uint32Array]]),NUMERIC_TENSOR_TYPEDARRAY_TO_TYPE_MAP=new Map([[Float32Array,"float32"],[Uint8Array,"uint8"],[Int8Array,"int8"],[Uint16Array,"uint16"],[Int16Array,"int16"],[Int32Array,"int32"],[Float64Array,"float64"],[Uint32Array,"uint32"]]);isBigInt64ArrayAvailable&&(NUMERIC_TENSOR_TYPE_TO_TYPEDARRAY_MAP.set("int64",BigInt64Array),NUMERIC_TENSOR_TYPEDARRAY_TO_TYPE_MAP.set(BigInt64Array,"int64"));isBigUint64ArrayAvailable&&(NUMERIC_TENSOR_TYPE_TO_TYPEDARRAY_MAP.set("uint64",BigUint64Array),NUMERIC_TENSOR_TYPEDARRAY_TO_TYPE_MAP.set(BigUint64Array,"uint64"));const calculateSize=Mt=>{let st=1;for(let nn=0;nn<Mt.length;nn++){const rn=Mt[nn];if(typeof rn!="number"||!Number.isSafeInteger(rn))throw new TypeError(`dims[${nn}] must be an integer, got: ${rn}`);if(rn<0)throw new RangeError(`dims[${nn}] must be a non-negative integer, got: ${rn}`);st*=rn}return st};let Tensor$2=class dy{constructor(st,nn,rn){let on,an,sn;if(typeof st=="string")if(on=st,sn=rn,st==="string"){if(!Array.isArray(nn))throw new TypeError("A string tensor's data must be a string array.");an=nn}else{const Xr=NUMERIC_TENSOR_TYPE_TO_TYPEDARRAY_MAP.get(st);if(Xr===void 0)throw new TypeError(`Unsupported tensor type: ${st}.`);if(Array.isArray(nn))an=Xr.from(nn);else if(nn instanceof Xr)an=nn;else throw new TypeError(`A ${on} tensor's data must be type of ${Xr}`)}else if(sn=nn,Array.isArray(st)){if(st.length===0)throw new TypeError("Tensor type cannot be inferred from an empty array.");const Xr=typeof st[0];if(Xr==="string")on="string",an=st;else if(Xr==="boolean")on="bool",an=Uint8Array.from(st);else throw new TypeError(`Invalid element type of data array: ${Xr}.`)}else{const Xr=NUMERIC_TENSOR_TYPEDARRAY_TO_TYPE_MAP.get(st.constructor);if(Xr===void 0)throw new TypeError(`Unsupported type for tensor data: ${st.constructor}.`);on=Xr,an=st}if(sn===void 0)sn=[an.length];else if(!Array.isArray(sn))throw new TypeError("A tensor's dims must be a number array");const un=calculateSize(sn);if(un!==an.length)throw new Error(`Tensor's size(${un}) does not match data length(${an.length}).`);this.dims=sn,this.type=on,this.data=an,this.size=un}static bufferToTensor(st,nn){if(st===void 0)throw new Error("Image buffer must be defined");if(nn.height===void 0||nn.width===void 0)throw new Error("Image height and width must be defined");const{height:rn,width:on}=nn,an=nn.norm;let sn,un;an===void 0||an.mean===void 0?sn=255:sn=an.mean,an===void 0||an.bias===void 0?un=0:un=an.bias;const Xr=nn.bitmapFormat!==void 0?nn.bitmapFormat:"RGBA",to=nn.tensorFormat!==void 0&&nn.tensorFormat!==void 0?nn.tensorFormat:"RGB",uo=rn*on,hn=to==="RGBA"?new Float32Array(uo*4):new Float32Array(uo*3);let fn=4,co=0,lo=1,fo=2,ho=3,mo=0,Uo=uo,_d=uo*2,tp=-1;Xr==="RGB"&&(fn=3,co=0,lo=1,fo=2,ho=-1),to==="RGBA"?tp=uo*3:to==="RBG"?(mo=0,_d=uo,Uo=uo*2):to==="BGR"&&(_d=0,Uo=uo,mo=uo*2);for(let np=0;np<uo;np++,co+=fn,fo+=fn,lo+=fn,ho+=fn)hn[mo++]=(st[co]+un)/sn,hn[Uo++]=(st[lo]+un)/sn,hn[_d++]=(st[fo]+un)/sn,tp!==-1&&ho!==-1&&(hn[tp++]=(st[ho]+un)/sn);return to==="RGBA"?new dy("float32",hn,[1,4,rn,on]):new dy("float32",hn,[1,3,rn,on])}static async fromImage(st,nn){const rn=typeof HTMLImageElement<"u"&&st instanceof HTMLImageElement,on=typeof ImageData<"u"&&st instanceof ImageData,an=typeof ImageBitmap<"u"&&st instanceof ImageBitmap,sn=typeof String<"u"&&(st instanceof String||typeof st=="string");let un,Xr={};if(rn){const to=document.createElement("canvas"),uo=to.getContext("2d");if(uo!=null){let hn=st.naturalHeight,fn=st.naturalWidth;if(nn!==void 0&&nn.resizedHeight!==void 0&&nn.resizedWidth!==void 0&&(hn=nn.resizedHeight,fn=nn.resizedWidth),nn!==void 0){if(Xr=nn,nn.tensorFormat!==void 0)throw new Error("Image input config format must be RGBA for HTMLImageElement");if(Xr.tensorFormat="RGBA",nn.height!==void 0&&nn.height!==hn)throw new Error("Image input config height doesn't match HTMLImageElement height");if(Xr.height=hn,nn.width!==void 0&&nn.width!==fn)throw new Error("Image input config width doesn't match HTMLImageElement width");Xr.width=fn}else Xr.tensorFormat="RGBA",Xr.height=hn,Xr.width=fn;to.width=fn,to.height=hn,uo.drawImage(st,0,0,fn,hn),un=uo.getImageData(0,0,fn,hn).data}else throw new Error("Can not access image data")}else if(on){const to="RGBA";let uo,hn;if(nn!==void 0&&nn.resizedWidth!==void 0&&nn.resizedHeight!==void 0?(uo=nn.resizedHeight,hn=nn.resizedWidth):(uo=st.height,hn=st.width),nn!==void 0){if(Xr=nn,nn.bitmapFormat!==void 0&&nn.bitmapFormat!==to)throw new Error("Image input config format must be RGBA for ImageData");Xr.bitmapFormat="RGBA"}else Xr.bitmapFormat="RGBA";if(Xr.height=uo,Xr.width=hn,nn!==void 0){const fn=document.createElement("canvas");fn.width=hn,fn.height=uo;const co=fn.getContext("2d");if(co!=null)co.putImageData(st,0,0),un=co.getImageData(0,0,hn,uo).data;else throw new Error("Can not access image data")}else un=st.data}else if(an){if(nn===void 0)throw new Error("Please provide image config with format for Imagebitmap");if(nn.bitmapFormat!==void 0)throw new Error("Image input config format must be defined for ImageBitmap");const to=document.createElement("canvas").getContext("2d");if(to!=null){const uo=st.height,hn=st.width;if(to.drawImage(st,0,0,hn,uo),un=to.getImageData(0,0,hn,uo).data,nn!==void 0){if(nn.height!==void 0&&nn.height!==uo)throw new Error("Image input config height doesn't match ImageBitmap height");if(Xr.height=uo,nn.width!==void 0&&nn.width!==hn)throw new Error("Image input config width doesn't match ImageBitmap width");Xr.width=hn}else Xr.height=uo,Xr.width=hn;return dy.bufferToTensor(un,Xr)}else throw new Error("Can not access image data")}else{if(sn)return new Promise((to,uo)=>{const hn=document.createElement("canvas"),fn=hn.getContext("2d");if(!st||!fn)return uo();const co=new Image;co.crossOrigin="Anonymous",co.src=st,co.onload=()=>{hn.width=co.width,hn.height=co.height,fn.drawImage(co,0,0,hn.width,hn.height);const lo=fn.getImageData(0,0,hn.width,hn.height);if(nn!==void 0){if(nn.height!==void 0&&nn.height!==hn.height)throw new Error("Image input config height doesn't match ImageBitmap height");if(Xr.height=hn.height,nn.width!==void 0&&nn.width!==hn.width)throw new Error("Image input config width doesn't match ImageBitmap width");Xr.width=hn.width}else Xr.height=hn.height,Xr.width=hn.width;to(dy.bufferToTensor(lo.data,Xr))}});throw new Error("Input data provided is not supported - aborted tensor creation")}if(un!==void 0)return dy.bufferToTensor(un,Xr);throw new Error("Input data provided is not supported - aborted tensor creation")}toImageData(st){var nn,rn;const on=document.createElement("canvas").getContext("2d");let an;if(on!=null){const sn=this.dims[3],un=this.dims[2],Xr=this.dims[1],to=st!==void 0&&st.format!==void 0?st.format:"RGB",uo=st!==void 0&&((nn=st.norm)===null||nn===void 0?void 0:nn.mean)!==void 0?st.norm.mean:255,hn=st!==void 0&&((rn=st.norm)===null||rn===void 0?void 0:rn.bias)!==void 0?st.norm.bias:0,fn=un*sn;if(st!==void 0){if(st.height!==void 0&&st.height!==un)throw new Error("Image output config height doesn't match tensor height");if(st.width!==void 0&&st.width!==sn)throw new Error("Image output config width doesn't match tensor width");if(st.format!==void 0&&Xr===4&&st.format!=="RGBA"||Xr===3&&st.format!=="RGB"&&st.format!=="BGR")throw new Error("Tensor format doesn't match input tensor dims")}const co=4;let lo=0,fo=1,ho=2,mo=3,Uo=0,_d=fn,tp=fn*2,ep=-1;to==="RGBA"?(Uo=0,_d=fn,tp=fn*2,ep=fn*3):to==="RGB"?(Uo=0,_d=fn,tp=fn*2):to==="RBG"&&(Uo=0,tp=fn,_d=fn*2),an=on.createImageData(sn,un);for(let np=0;np<un*sn;lo+=co,fo+=co,ho+=co,mo+=co,np++)an.data[lo]=(this.data[Uo++]-hn)*uo,an.data[fo]=(this.data[_d++]-hn)*uo,an.data[ho]=(this.data[tp++]-hn)*uo,an.data[mo]=ep===-1?255:(this.data[ep++]-hn)*uo}else throw new Error("Can not access image data");return an}reshape(st){return new dy(this.type,this.data,st)}};const Tensor$1=Tensor$2;let InferenceSession$2=class Dv{constructor(st){this.handler=st}async run(st,nn,rn){const on={};let an={};if(typeof st!="object"||st===null||st instanceof Tensor$1||Array.isArray(st))throw new TypeError("'feeds' must be an object that use input names as keys and OnnxValue as corresponding values.");let sn=!0;if(typeof nn=="object"){if(nn===null)throw new TypeError("Unexpected argument[1]: cannot be null.");if(nn instanceof Tensor$1)throw new TypeError("'fetches' cannot be a Tensor");if(Array.isArray(nn)){if(nn.length===0)throw new TypeError("'fetches' cannot be an empty array.");sn=!1;for(const to of nn){if(typeof to!="string")throw new TypeError("'fetches' must be a string array or an object.");if(this.outputNames.indexOf(to)===-1)throw new RangeError(`'fetches' contains invalid output name: ${to}.`);on[to]=null}if(typeof rn=="object"&&rn!==null)an=rn;else if(typeof rn<"u")throw new TypeError("'options' must be an object.")}else{let to=!1;const uo=Object.getOwnPropertyNames(nn);for(const hn of this.outputNames)if(uo.indexOf(hn)!==-1){const fn=nn[hn];(fn===null||fn instanceof Tensor$1)&&(to=!0,sn=!1,on[hn]=fn)}if(to){if(typeof rn=="object"&&rn!==null)an=rn;else if(typeof rn<"u")throw new TypeError("'options' must be an object.")}else an=nn}}else if(typeof nn<"u")throw new TypeError("Unexpected argument[1]: must be 'fetches' or 'options'.");for(const to of this.inputNames)if(typeof st[to]>"u")throw new Error(`input '${to}' is missing in 'feeds'.`);if(sn)for(const to of this.outputNames)on[to]=null;const un=await this.handler.run(st,on,an),Xr={};for(const to in un)Object.hasOwnProperty.call(un,to)&&(Xr[to]=new Tensor$1(un[to].type,un[to].data,un[to].dims));return Xr}static async create(st,nn,rn,on){let an,sn={};if(typeof st=="string"){if(an=st,typeof nn=="object"&&nn!==null)sn=nn;else if(typeof nn<"u")throw new TypeError("'options' must be an object.")}else if(st instanceof Uint8Array){if(an=st,typeof nn=="object"&&nn!==null)sn=nn;else if(typeof nn<"u")throw new TypeError("'options' must be an object.")}else if(st instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&st instanceof SharedArrayBuffer){const hn=st;let fn=0,co=st.byteLength;if(typeof nn=="object"&&nn!==null)sn=nn;else if(typeof nn=="number"){if(fn=nn,!Number.isSafeInteger(fn))throw new RangeError("'byteOffset' must be an integer.");if(fn<0||fn>=hn.byteLength)throw new RangeError(`'byteOffset' is out of range [0, ${hn.byteLength}).`);if(co=st.byteLength-fn,typeof rn=="number"){if(co=rn,!Number.isSafeInteger(co))throw new RangeError("'byteLength' must be an integer.");if(co<=0||fn+co>hn.byteLength)throw new RangeError(`'byteLength' is out of range (0, ${hn.byteLength-fn}].`);if(typeof on=="object"&&on!==null)sn=on;else if(typeof on<"u")throw new TypeError("'options' must be an object.")}else if(typeof rn<"u")throw new TypeError("'byteLength' must be a number.")}else if(typeof nn<"u")throw new TypeError("'options' must be an object.");an=new Uint8Array(hn,fn,co)}else throw new TypeError("Unexpected argument[0]: must be 'path' or 'buffer'.");const Xr=(sn.executionProviders||[]).map(hn=>typeof hn=="string"?hn:hn.name),uo=await(await resolveBackend(Xr)).createSessionHandler(an,sn);return new Dv(uo)}startProfiling(){this.handler.startProfiling()}endProfiling(){this.handler.endProfiling()}get inputNames(){return this.handler.inputNames}get outputNames(){return this.handler.outputNames}};const InferenceSession$1=InferenceSession$2,lib=Object.freeze(Object.defineProperty({__proto__:null,InferenceSession:InferenceSession$1,Tensor:Tensor$1,env:env$2,registerBackend},Symbol.toStringTag,{value:"Module"})),require$$0=getAugmentedNamespace(lib);/*!
* ONNX Runtime Web v1.14.0
* Copyright (c) Microsoft Corporation. All rights reserved.
* Licensed under the MIT License.
*/(function(module,exports){(function(Mt,st){module.exports=st(require$$0)})(self,__WEBPACK_EXTERNAL_MODULE__1670__=>(()=>{var __webpack_modules__={3474:(Mt,st,nn)=>{var rn,on=(rn=(rn=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0)||"/index.js",function(an){function sn(){return mp.buffer!=_p&&Gp(mp.buffer),Sp}function un(){return mp.buffer!=_p&&Gp(mp.buffer),Cp}function Xr(){return mp.buffer!=_p&&Gp(mp.buffer),jp}function to(){return mp.buffer!=_p&&Gp(mp.buffer),Dp}function uo(){return mp.buffer!=_p&&Gp(mp.buffer),Vp}var hn,fn,co;an=an||{},hn||(hn=an!==void 0?an:{}),hn.ready=new Promise(function(hp,yp){fn=hp,co=yp});var lo,fo,ho,mo,Uo,_d,tp=Object.assign({},hn),ep="./this.program",np=(hp,yp)=>{throw yp},rp=typeof window=="object",ip=typeof importScripts=="function",op=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",ap=hn.ENVIRONMENT_IS_PTHREAD||!1,sp="";function up(hp){return hn.locateFile?hn.locateFile(hp,sp):sp+hp}if(op){let hp;sp=ip?nn(908).dirname(sp)+"/":"//",_d=()=>{Uo||(mo=nn(1384),Uo=nn(908))},lo=function(yp,bp){return _d(),yp=Uo.normalize(yp),mo.readFileSync(yp,bp?void 0:"utf8")},ho=yp=>((yp=lo(yp,!0)).buffer||(yp=new Uint8Array(yp)),yp),fo=(yp,bp,Ep)=>{_d(),yp=Uo.normalize(yp),mo.readFile(yp,function($p,Rp){$p?Ep($p):bp(Rp.buffer)})},1<process.argv.length&&(ep=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),process.on("uncaughtException",function(yp){if(!(yp instanceof Lm))throw yp}),process.on("unhandledRejection",function(yp){throw yp}),np=(yp,bp)=>{if(Sm())throw process.exitCode=yp,bp;bp instanceof Lm||fp("exiting due to exception: "+bp),process.exit(yp)},hn.inspect=function(){return"[Emscripten Module object]"};try{hp=nn(9925)}catch(yp){throw console.error('The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?'),yp}nn.g.Worker=hp.Worker}else(rp||ip)&&(ip?sp=self.location.href:typeof document<"u"&&document.currentScript&&(sp=document.currentScript.src),rn&&(sp=rn),sp=sp.indexOf("blob:")!==0?sp.substr(0,sp.replace(/[?#].*/,"").lastIndexOf("/")+1):"",op||(lo=hp=>{var yp=new XMLHttpRequest;return yp.open("GET",hp,!1),yp.send(null),yp.responseText},ip&&(ho=hp=>{var yp=new XMLHttpRequest;return yp.open("GET",hp,!1),yp.responseType="arraybuffer",yp.send(null),new Uint8Array(yp.response)}),fo=(hp,yp,bp)=>{var Ep=new XMLHttpRequest;Ep.open("GET",hp,!0),Ep.responseType="arraybuffer",Ep.onload=()=>{Ep.status==200||Ep.status==0&&Ep.response?yp(Ep.response):bp()},Ep.onerror=bp,Ep.send(null)}));op&&typeof performance>"u"&&(nn.g.performance=nn(6953).performance);var pp=console.log.bind(console),lp=console.warn.bind(console);op&&(_d(),pp=hp=>mo.writeSync(1,hp+`
`),lp=hp=>mo.writeSync(2,hp+`
`));var dp,cp=hn.print||pp,fp=hn.printErr||lp;Object.assign(hn,tp),tp=null,hn.thisProgram&&(ep=hn.thisProgram),hn.quit&&(np=hn.quit),hn.wasmBinary&&(dp=hn.wasmBinary);var gp=hn.noExitRuntime||!1;typeof WebAssembly!="object"&&tm("no native wasm support detected");var mp,xp,_p,Sp,Cp,jp,Dp,Vp,Up=!1,Kp=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function Mp(hp,yp,bp){var Ep=(yp>>>=0)+bp;for(bp=yp;hp[bp]&&!(bp>=Ep);)++bp;if(16<bp-yp&&hp.buffer&&Kp)return Kp.decode(hp.buffer instanceof SharedArrayBuffer?hp.slice(yp,bp):hp.subarray(yp,bp));for(Ep="";yp<bp;){var $p=hp[yp++];if(128&$p){var Rp=63&hp[yp++];if((224&$p)==192)Ep+=String.fromCharCode((31&$p)<<6|Rp);else{var qp=63&hp[yp++];65536>($p=(240&$p)==224?(15&$p)<<12|Rp<<6|qp:(7&$p)<<18|Rp<<12|qp<<6|63&hp[yp++])?Ep+=String.fromCharCode($p):($p-=65536,Ep+=String.fromCharCode(55296|$p>>10,56320|1023&$p))}}else Ep+=String.fromCharCode($p)}return Ep}function zp(hp,yp){return(hp>>>=0)?Mp(un(),hp,yp):""}function Bp(hp,yp,bp,Ep){if(!(0<Ep))return 0;var $p=bp>>>=0;Ep=bp+Ep-1;for(var Rp=0;Rp<hp.length;++Rp){var qp=hp.charCodeAt(Rp);if(55296<=qp&&57343>=qp&&(qp=65536+((1023&qp)<<10)|1023&hp.charCodeAt(++Rp)),127>=qp){if(bp>=Ep)break;yp[bp++>>>0]=qp}else{if(2047>=qp){if(bp+1>=Ep)break;yp[bp++>>>0]=192|qp>>6}else{if(65535>=qp){if(bp+2>=Ep)break;yp[bp++>>>0]=224|qp>>12}else{if(bp+3>=Ep)break;yp[bp++>>>0]=240|qp>>18,yp[bp++>>>0]=128|qp>>12&63}yp[bp++>>>0]=128|qp>>6&63}yp[bp++>>>0]=128|63&qp}}return yp[bp>>>0]=0,bp-$p}function Pp(hp){for(var yp=0,bp=0;bp<hp.length;++bp){var Ep=hp.charCodeAt(bp);127>=Ep?yp++:2047>=Ep?yp+=2:55296<=Ep&&57343>=Ep?(yp+=4,++bp):yp+=3}return yp}function Gp(hp){_p=hp,hn.HEAP8=Sp=new Int8Array(hp),hn.HEAP16=new Int16Array(hp),hn.HEAP32=jp=new Int32Array(hp),hn.HEAPU8=Cp=new Uint8Array(hp),hn.HEAPU16=new Uint16Array(hp),hn.HEAPU32=Dp=new Uint32Array(hp),hn.HEAPF32=new Float32Array(hp),hn.HEAPF64=Vp=new Float64Array(hp)}ap&&(_p=hn.buffer);var Wp=hn.INITIAL_MEMORY||16777216;if(ap)mp=hn.wasmMemory,_p=hn.buffer;else if(hn.wasmMemory)mp=hn.wasmMemory;else if(!((mp=new WebAssembly.Memory({initial:Wp/65536,maximum:65536,shared:!0})).buffer instanceof SharedArrayBuffer))throw fp("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),op&&console.log("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and also use a recent version)"),Error("bad memory");mp&&(_p=mp.buffer),Wp=_p.byteLength,Gp(_p);var Xp,Qp=[],om=[],ym=[],mm=[];function Sm(){return gp||!1}function xm(){var hp=hn.preRun.shift();Qp.unshift(hp)}var am,wm=0,Pm=null;function tm(hp){throw ap?postMessage({cmd:"onAbort",arg:hp}):hn.onAbort&&hn.onAbort(hp),fp(hp="Aborted("+hp+")"),Up=!0,hp=new WebAssembly.RuntimeError(hp+". Build with -sASSERTIONS for more info."),co(hp),hp}function Xm(){return am.startsWith("data:application/octet-stream;base64,")}function jm(){var hp=am;try{if(hp==am&&dp)return new Uint8Array(dp);if(ho)return ho(hp);throw"both async and sync fetching of the wasm failed"}catch(yp){tm(yp)}}am="ort-wasm-threaded.wasm",Xm()||(am=up(am));var Im={};function Lm(hp){this.name="ExitStatus",this.message="Program terminated with exit("+hp+")",this.status=hp}function ey(hp){(hp=em.Vb[hp])||tm(),em.mc(hp)}function ty(hp){var yp=em.Cc();if(!yp)return 6;em.ac.push(yp),em.Vb[hp.Ub]=yp,yp.Ub=hp.Ub;var bp={cmd:"run",start_routine:hp.Ic,arg:hp.zc,pthread_ptr:hp.Ub};return yp.$b=()=>{bp.time=performance.now(),yp.postMessage(bp,hp.Nc)},yp.loaded&&(yp.$b(),delete yp.$b),0}function Cm(hp){if(ap)return Yp(1,1,hp);Sm()||(em.oc(),hn.onExit&&hn.onExit(hp),Up=!0),np(hp,new Lm(hp))}function Wm(hp,yp){if(!yp&&ap)throw Wy(hp),"unwind";Sm()||ap||(uv(),Bm(ym),sv(0),Xy[1].length&&Qy(1,10),Xy[2].length&&Qy(2,10),em.oc()),Cm(hp)}var em={Yb:[],ac:[],qc:[],Vb:{},fc:function(){ap&&em.Ec()},Pc:function(){},Ec:function(){em.receiveObjectTransfer=em.Gc,em.threadInitTLS=em.pc,em.setExitStatus=em.nc,gp=!1},nc:function(){},oc:function(){for(var hp of Object.values(em.Vb))em.mc(hp);for(hp of em.Yb)hp.terminate();em.Yb=[]},mc:function(hp){var yp=hp.Ub;delete em.Vb[yp],em.Yb.push(hp),em.ac.splice(em.ac.indexOf(hp),1),hp.Ub=0,Jy(yp)},Gc:function(){},pc:function(){em.qc.forEach(hp=>hp())},Fc:function(hp,yp){hp.onmessage=bp=>{var Ep=(bp=bp.data).cmd;if(hp.Ub&&(em.Bc=hp.Ub),bp.targetThread&&bp.targetThread!=Hy()){var $p=em.Vb[bp.Qc];$p?$p.postMessage(bp,bp.transferList):fp('Internal error! Worker sent a message "'+Ep+'" to target pthread '+bp.targetThread+", but that thread no longer exists!")}else Ep==="processProxyingQueue"?Tp(bp.queue):Ep==="spawnThread"?ty(bp):Ep==="cleanupThread"?ey(bp.thread):Ep==="killThread"?(bp=bp.thread,Ep=em.Vb[bp],delete em.Vb[bp],Ep.terminate(),Jy(bp),em.ac.splice(em.ac.indexOf(Ep),1),Ep.Ub=0):Ep==="cancelThread"?em.Vb[bp.thread].postMessage({cmd:"cancel"}):Ep==="loaded"?(hp.loaded=!0,yp&&yp(hp),hp.$b&&(hp.$b(),delete hp.$b)):Ep==="print"?cp("Thread "+bp.threadId+": "+bp.text):Ep==="printErr"?fp("Thread "+bp.threadId+": "+bp.text):Ep==="alert"?alert("Thread "+bp.threadId+": "+bp.text):bp.target==="setimmediate"?hp.postMessage(bp):Ep==="onAbort"?hn.onAbort&&hn.onAbort(bp.arg):Ep&&fp("worker sent an unknown command "+Ep);em.Bc=void 0},hp.onerror=bp=>{throw fp("worker sent an error! "+bp.filename+":"+bp.lineno+": "+bp.message),bp},op&&(hp.on("message",function(bp){hp.onmessage({data:bp})}),hp.on("error",function(bp){hp.onerror(bp)}),hp.on("detachedExit",function(){})),hp.postMessage({cmd:"load",urlOrBlob:hn.mainScriptUrlOrBlob||rn,wasmMemory:mp,wasmModule:xp})},yc:function(){var hp=up("ort-wasm-threaded.worker.js");em.Yb.push(new Worker(hp))},Cc:function(){return em.Yb.length==0&&(em.yc(),em.Fc(em.Yb[0])),em.Yb.pop()}};function Bm(hp){for(;0<hp.length;)hp.shift()(hn)}function Uy(hp){var yp=lm();return hp=hp(),um(yp),hp}function Wy(hp){if(ap)return Yp(2,0,hp);try{Wm(hp)}catch(yp){yp instanceof Lm||yp=="unwind"||np(1,yp)}}hn.PThread=em,hn.establishStackSpace=function(){var hp=Hy(),yp=Xr()[hp+44>>2>>>0];hp=Xr()[hp+48>>2>>>0],pv(yp,yp-hp),um(yp)};var Qm=[];function vm(hp){var yp=Qm[hp];return yp||(hp>=Qm.length&&(Qm.length=hp+1),Qm[hp]=yp=Xp.get(hp)),yp}hn.invokeEntryPoint=function(hp,yp){hp=vm(hp)(yp),Sm()?em.nc(hp):fv(hp)};var uy,Ay,cy=[],im=0,nm=0;function rm(hp){this.Zb=hp,this.Sb=hp-24,this.xc=function(yp){to()[this.Sb+4>>2>>>0]=yp},this.bc=function(){return to()[this.Sb+4>>2>>>0]},this.wc=function(yp){to()[this.Sb+8>>2>>>0]=yp},this.Dc=function(){return to()[this.Sb+8>>2>>>0]},this.rc=function(){Xr()[this.Sb>>2>>>0]=0},this.hc=function(yp){yp=yp?1:0,sn()[this.Sb+12>>0>>>0]=yp},this.uc=function(){return sn()[this.Sb+12>>0>>>0]!=0},this.ic=function(yp){yp=yp?1:0,sn()[this.Sb+13>>0>>>0]=yp},this.kc=function(){return sn()[this.Sb+13>>0>>>0]!=0},this.fc=function(yp,bp){this.cc(0),this.xc(yp),this.wc(bp),this.rc(),this.hc(!1),this.ic(!1)},this.sc=function(){Atomics.add(Xr(),this.Sb>>2,1)},this.Hc=function(){return Atomics.sub(Xr(),this.Sb>>2,1)===1},this.cc=function(yp){to()[this.Sb+16>>2>>>0]=yp},this.tc=function(){return to()[this.Sb+16>>2>>>0]},this.vc=function(){if(hv(this.bc()))return to()[this.Zb>>2>>>0];var yp=this.tc();return yp!==0?yp:this.Zb}}function $y(hp){return av(new rm(hp).Sb)}function ly(hp,yp,bp,Ep){return ap?Yp(3,1,hp,yp,bp,Ep):Py(hp,yp,bp,Ep)}function Py(hp,yp,bp,Ep){if(typeof SharedArrayBuffer>"u")return fp("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var $p=[];return ap&&$p.length===0?ly(hp,yp,bp,Ep):(hp={Ic:bp,Ub:hp,zc:Ep,Nc:$p},ap?(hp.Oc="spawnThread",postMessage(hp,$p),0):ty(hp))}function Cy(hp,yp,bp){return ap?Yp(4,1,hp,yp,bp):0}function Oy(hp,yp){if(ap)return Yp(5,1,hp,yp)}function My(hp,yp){if(ap)return Yp(6,1,hp,yp)}function Ry(hp,yp,bp){if(ap)return Yp(7,1,hp,yp,bp)}function Iy(hp,yp,bp){return ap?Yp(8,1,hp,yp,bp):0}function Ny(hp,yp){if(ap)return Yp(9,1,hp,yp)}function Dy(hp,yp,bp){if(ap)return Yp(10,1,hp,yp,bp)}function jy(hp,yp,bp,Ep){if(ap)return Yp(11,1,hp,yp,bp,Ep)}function Ly(hp,yp,bp,Ep){if(ap)return Yp(12,1,hp,yp,bp,Ep)}function Fy(hp,yp,bp,Ep){if(ap)return Yp(13,1,hp,yp,bp,Ep)}function By(hp){if(ap)return Yp(14,1,hp)}function vp(hp,yp){if(ap)return Yp(15,1,hp,yp)}function wp(hp,yp,bp){if(ap)return Yp(16,1,hp,yp,bp)}function Tp(hp){Atomics.store(Xr(),hp>>2,1),Hy()&&dv(hp),Atomics.compareExchange(Xr(),hp>>2,1,0)}function Ap(hp){return to()[hp>>>2]+4294967296*Xr()[hp+4>>>2]}function Op(hp,yp,bp,Ep,$p,Rp){return ap?Yp(17,1,hp,yp,bp,Ep,$p,Rp):-52}function Np(hp,yp,bp,Ep,$p,Rp){if(ap)return Yp(18,1,hp,yp,bp,Ep,$p,Rp)}function Hp(hp){var yp=Pp(hp)+1,bp=Zy(yp);return bp&&Bp(hp,sn(),bp,yp),bp}function Zp(hp,yp,bp){function Ep(pm){return(pm=pm.toTimeString().match(/\(([A-Za-z ]+)\)$/))?pm[1]:"GMT"}if(ap)return Yp(19,1,hp,yp,bp);var $p=new Date().getFullYear(),Rp=new Date($p,0,1),qp=new Date($p,6,1);$p=Rp.getTimezoneOffset();var Jp=qp.getTimezoneOffset(),fm=Math.max($p,Jp);Xr()[hp>>2>>>0]=60*fm,Xr()[yp>>2>>>0]=+($p!=Jp),hp=Ep(Rp),yp=Ep(qp),hp=Hp(hp),yp=Hp(yp),Jp<$p?(to()[bp>>2>>>0]=hp,to()[bp+4>>2>>>0]=yp):(to()[bp>>2>>>0]=yp,to()[bp+4>>2>>>0]=hp)}function Yp(hp,yp){var bp=arguments.length-2,Ep=arguments;return Uy(()=>{for(var $p=ev(8*bp),Rp=$p>>3,qp=0;qp<bp;qp++){var Jp=Ep[2+qp];uo()[Rp+qp>>>0]=Jp}return lv(hp,bp,$p,yp)})}hn.executeNotifiedProxyingQueue=Tp,Ay=op?()=>{var hp=process.hrtime();return 1e3*hp[0]+hp[1]/1e6}:ap?()=>performance.now()-hn.__performance_now_clock_drift:()=>performance.now();var sm,_m=[],Mm={};function Om(){if(!sm){var hp,yp={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:ep||"./this.program"};for(hp in Mm)Mm[hp]===void 0?delete yp[hp]:yp[hp]=Mm[hp];var bp=[];for(hp in yp)bp.push(hp+"="+yp[hp]);sm=bp}return sm}function kp(hp,yp){if(ap)return Yp(20,1,hp,yp);var bp=0;return Om().forEach(function(Ep,$p){var Rp=yp+bp;for($p=to()[hp+4*$p>>2>>>0]=Rp,Rp=0;Rp<Ep.length;++Rp)sn()[$p++>>0>>>0]=Ep.charCodeAt(Rp);sn()[$p>>0>>>0]=0,bp+=Ep.length+1}),0}function hm(hp,yp){if(ap)return Yp(21,1,hp,yp);var bp=Om();to()[hp>>2>>>0]=bp.length;var Ep=0;return bp.forEach(function($p){Ep+=$p.length+1}),to()[yp>>2>>>0]=Ep,0}function Em(hp){return ap?Yp(22,1,hp):52}function Vm(hp,yp,bp,Ep){return ap?Yp(23,1,hp,yp,bp,Ep):52}function Zm(hp,yp,bp,Ep,$p){return ap?Yp(24,1,hp,yp,bp,Ep,$p):70}var Xy=[null,[],[]];function Qy(hp,yp){var bp=Xy[hp];yp===0||yp===10?((hp===1?cp:fp)(Mp(bp,0)),bp.length=0):bp.push(yp)}function nv(hp,yp,bp,Ep){if(ap)return Yp(25,1,hp,yp,bp,Ep);for(var $p=0,Rp=0;Rp<bp;Rp++){var qp=to()[yp>>2>>>0],Jp=to()[yp+4>>2>>>0];yp+=8;for(var fm=0;fm<Jp;fm++)Qy(hp,un()[qp+fm>>>0]);$p+=Jp}return to()[Ep>>2>>>0]=$p,0}var Dm=0;function Gy(hp){return hp%4==0&&(hp%100!=0||hp%400==0)}var rv=[31,29,31,30,31,30,31,31,30,31,30,31],ov=[31,28,31,30,31,30,31,31,30,31,30,31];function iv(hp,yp,bp,Ep){function $p(Ip,gm,Tm){for(Ip=typeof Ip=="number"?Ip.toString():Ip||"";Ip.length<gm;)Ip=Tm[0]+Ip;return Ip}function Rp(Ip,gm){return $p(Ip,gm,"0")}function qp(Ip,gm){function Tm(gy){return 0>gy?-1:0<gy?1:0}var Jm;return(Jm=Tm(Ip.getFullYear()-gm.getFullYear()))===0&&(Jm=Tm(Ip.getMonth()-gm.getMonth()))===0&&(Jm=Tm(Ip.getDate()-gm.getDate())),Jm}function Jp(Ip){switch(Ip.getDay()){case 0:return new Date(Ip.getFullYear()-1,11,29);case 1:return Ip;case 2:return new Date(Ip.getFullYear(),0,3);case 3:return new Date(Ip.getFullYear(),0,2);case 4:return new Date(Ip.getFullYear(),0,1);case 5:return new Date(Ip.getFullYear()-1,11,31);case 6:return new Date(Ip.getFullYear()-1,11,30)}}function fm(Ip){var gm=Ip.Wb;for(Ip=new Date(new Date(Ip.Xb+1900,0,1).getTime());0<gm;){var Tm=Ip.getMonth(),Jm=(Gy(Ip.getFullYear())?rv:ov)[Tm];if(!(gm>Jm-Ip.getDate())){Ip.setDate(Ip.getDate()+gm);break}gm-=Jm-Ip.getDate()+1,Ip.setDate(1),11>Tm?Ip.setMonth(Tm+1):(Ip.setMonth(0),Ip.setFullYear(Ip.getFullYear()+1))}return Tm=new Date(Ip.getFullYear()+1,0,4),gm=Jp(new Date(Ip.getFullYear(),0,4)),Tm=Jp(Tm),0>=qp(gm,Ip)?0>=qp(Tm,Ip)?Ip.getFullYear()+1:Ip.getFullYear():Ip.getFullYear()-1}var pm=Xr()[Ep+40>>2>>>0];for(var Am in Ep={Lc:Xr()[Ep>>2>>>0],Kc:Xr()[Ep+4>>2>>>0],dc:Xr()[Ep+8>>2>>>0],jc:Xr()[Ep+12>>2>>>0],ec:Xr()[Ep+16>>2>>>0],Xb:Xr()[Ep+20>>2>>>0],Tb:Xr()[Ep+24>>2>>>0],Wb:Xr()[Ep+28>>2>>>0],Rc:Xr()[Ep+32>>2>>>0],Jc:Xr()[Ep+36>>2>>>0],Mc:pm?zp(pm):""},bp=zp(bp),pm={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})bp=bp.replace(new RegExp(Am,"g"),pm[Am]);var Hm="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),zm="January February March April May June July August September October November December".split(" ");for(Am in pm={"%a":function(Ip){return Hm[Ip.Tb].substring(0,3)},"%A":function(Ip){return Hm[Ip.Tb]},"%b":function(Ip){return zm[Ip.ec].substring(0,3)},"%B":function(Ip){return zm[Ip.ec]},"%C":function(Ip){return Rp((Ip.Xb+1900)/100|0,2)},"%d":function(Ip){return Rp(Ip.jc,2)},"%e":function(Ip){return $p(Ip.jc,2," ")},"%g":function(Ip){return fm(Ip).toString().substring(2)},"%G":function(Ip){return fm(Ip)},"%H":function(Ip){return Rp(Ip.dc,2)},"%I":function(Ip){return(Ip=Ip.dc)==0?Ip=12:12<Ip&&(Ip-=12),Rp(Ip,2)},"%j":function(Ip){for(var gm=0,Tm=0;Tm<=Ip.ec-1;gm+=(Gy(Ip.Xb+1900)?rv:ov)[Tm++]);return Rp(Ip.jc+gm,3)},"%m":function(Ip){return Rp(Ip.ec+1,2)},"%M":function(Ip){return Rp(Ip.Kc,2)},"%n":function(){return`
`},"%p":function(Ip){return 0<=Ip.dc&&12>Ip.dc?"AM":"PM"},"%S":function(Ip){return Rp(Ip.Lc,2)},"%t":function(){return"	"},"%u":function(Ip){return Ip.Tb||7},"%U":function(Ip){return Rp(Math.floor((Ip.Wb+7-Ip.Tb)/7),2)},"%V":function(Ip){var gm=Math.floor((Ip.Wb+7-(Ip.Tb+6)%7)/7);if(2>=(Ip.Tb+371-Ip.Wb-2)%7&&gm++,gm)gm==53&&((Tm=(Ip.Tb+371-Ip.Wb)%7)==4||Tm==3&&Gy(Ip.Xb)||(gm=1));else{gm=52;var Tm=(Ip.Tb+7-Ip.Wb-1)%7;(Tm==4||Tm==5&&Gy(Ip.Xb%400-1))&&gm++}return Rp(gm,2)},"%w":function(Ip){return Ip.Tb},"%W":function(Ip){return Rp(Math.floor((Ip.Wb+7-(Ip.Tb+6)%7)/7),2)},"%y":function(Ip){return(Ip.Xb+1900).toString().substring(2)},"%Y":function(Ip){return Ip.Xb+1900},"%z":function(Ip){var gm=0<=(Ip=Ip.Jc);return Ip=Math.abs(Ip)/60,(gm?"+":"-")+("0000"+(Ip/60*100+Ip%60)).slice(-4)},"%Z":function(Ip){return Ip.Mc},"%%":function(){return"%"}},bp=bp.replace(/%%/g,"\0\0"),pm)bp.includes(Am)&&(bp=bp.replace(new RegExp(Am,"g"),pm[Am](Ep)));return Am=function(Ip){var gm=Array(Pp(Ip)+1);return Bp(Ip,gm,0,gm.length),gm}(bp=bp.replace(/\0\0/g,"%")),Am.length>yp?0:(function(Ip,gm){sn().set(Ip,gm>>>0)}(Am,hp),Am.length-1)}em.fc();var jv=[null,Cm,Wy,ly,Cy,Oy,My,Ry,Iy,Ny,Dy,jy,Ly,Fy,By,vp,wp,Op,Np,Zp,kp,hm,Em,Vm,Zm,nv],Lv={b:function(hp){return Zy(hp+24)+24},n:function(hp){return(hp=new rm(hp)).uc()||(hp.hc(!0),im--),hp.ic(!1),cy.push(hp),hp.sc(),hp.vc()},ma:function(hp){throw fp("Unexpected exception thrown, this is not properly supported - aborting"),Up=!0,hp},x:function(){dm(0);var hp=cy.pop();if(hp.Hc()&&!hp.kc()){var yp=hp.Dc();yp&&vm(yp)(hp.Zb),$y(hp.Zb)}nm=0},e:function(){var hp=nm;if(!hp)return Dm=0;var yp=new rm(hp);yp.cc(hp);var bp=yp.bc();if(!bp)return Dm=0,hp;for(var Ep=Array.prototype.slice.call(arguments),$p=0;$p<Ep.length;$p++){var Rp=Ep[$p];if(Rp===0||Rp===bp)break;if(Ky(Rp,bp,yp.Sb+16))return Dm=Rp,hp}return Dm=bp,hp},l:function(){var hp=nm;if(!hp)return Dm=0;var yp=new rm(hp);yp.cc(hp);var bp=yp.bc();if(!bp)return Dm=0,hp;for(var Ep=Array.prototype.slice.call(arguments),$p=0;$p<Ep.length;$p++){var Rp=Ep[$p];if(Rp===0||Rp===bp)break;if(Ky(Rp,bp,yp.Sb+16))return Dm=Rp,hp}return Dm=bp,hp},h:function(){var hp=nm;if(!hp)return Dm=0;var yp=new rm(hp);yp.cc(hp);var bp=yp.bc();if(!bp)return Dm=0,hp;for(var Ep=Array.prototype.slice.call(arguments),$p=0;$p<Ep.length;$p++){var Rp=Ep[$p];if(Rp===0||Rp===bp)break;if(Ky(Rp,bp,yp.Sb+16))return Dm=Rp,hp}return Dm=bp,hp},t:$y,M:function(){var hp=cy.pop();hp||tm("no exception to throw");var yp=hp.Zb;throw hp.kc()||(cy.push(hp),hp.ic(!0),hp.hc(!1),im++),nm=yp,yp},c:function(hp,yp,bp){throw new rm(hp).fc(yp,bp),nm=hp,im++,hp},pa:function(){return im},Fa:function(hp){cv(hp,!ip,1,!rp),em.pc()},T:function(hp){ap?postMessage({cmd:"cleanupThread",thread:hp}):ey(hp)},xa:Py,j:function(hp){throw nm||(nm=hp),hp},H:Cy,Ma:Oy,ua:My,wa:Ry,oa:Iy,Ka:Ny,Ca:Dy,Ja:jy,V:Ly,va:Fy,sa:By,La:vp,ta:wp,Ta:function(){},X:function(){tm("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},Ua:function(){tm("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},W:function(){return Date.now()},ya:function(){return 2097152},Oa:function(){return!0},za:function(hp,yp,bp,Ep){if(hp==yp)setTimeout(()=>Tp(Ep));else if(ap)postMessage({targetThread:hp,cmd:"processProxyingQueue",queue:Ep});else{if(!(hp=em.Vb[hp]))return;hp.postMessage({cmd:"processProxyingQueue",queue:Ep})}return 1},Ea:function(){return-1},Pa:function(hp,yp){hp=new Date(1e3*Ap(hp)),Xr()[yp>>2>>>0]=hp.getUTCSeconds(),Xr()[yp+4>>2>>>0]=hp.getUTCMinutes(),Xr()[yp+8>>2>>>0]=hp.getUTCHours(),Xr()[yp+12>>2>>>0]=hp.getUTCDate(),Xr()[yp+16>>2>>>0]=hp.getUTCMonth(),Xr()[yp+20>>2>>>0]=hp.getUTCFullYear()-1900,Xr()[yp+24>>2>>>0]=hp.getUTCDay(),hp=(hp.getTime()-Date.UTC(hp.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,Xr()[yp+28>>2>>>0]=hp},Qa:function(hp,yp){hp=new Date(1e3*Ap(hp)),Xr()[yp>>2>>>0]=hp.getSeconds(),Xr()[yp+4>>2>>>0]=hp.getMinutes(),Xr()[yp+8>>2>>>0]=hp.getHours(),Xr()[yp+12>>2>>>0]=hp.getDate(),Xr()[yp+16>>2>>>0]=hp.getMonth(),Xr()[yp+20>>2>>>0]=hp.getFullYear()-1900,Xr()[yp+24>>2>>>0]=hp.getDay();var bp=new Date(hp.getFullYear(),0,1),Ep=(hp.getTime()-bp.getTime())/864e5|0;Xr()[yp+28>>2>>>0]=Ep,Xr()[yp+36>>2>>>0]=-60*hp.getTimezoneOffset(),Ep=new Date(hp.getFullYear(),6,1).getTimezoneOffset(),hp=0|(Ep!=(bp=bp.getTimezoneOffset())&&hp.getTimezoneOffset()==Math.min(bp,Ep)),Xr()[yp+32>>2>>>0]=hp},Ra:function(hp){var yp=new Date(Xr()[hp+20>>2>>>0]+1900,Xr()[hp+16>>2>>>0],Xr()[hp+12>>2>>>0],Xr()[hp+8>>2>>>0],Xr()[hp+4>>2>>>0],Xr()[hp>>2>>>0],0),bp=Xr()[hp+32>>2>>>0],Ep=yp.getTimezoneOffset(),$p=new Date(yp.getFullYear(),0,1),Rp=new Date(yp.getFullYear(),6,1).getTimezoneOffset(),qp=$p.getTimezoneOffset(),Jp=Math.min(qp,Rp);return 0>bp?Xr()[hp+32>>2>>>0]=+(Rp!=qp&&Jp==Ep):0<bp!=(Jp==Ep)&&(Rp=Math.max(qp,Rp),yp.setTime(yp.getTime()+6e4*((0<bp?Jp:Rp)-Ep))),Xr()[hp+24>>2>>>0]=yp.getDay(),bp=(yp.getTime()-$p.getTime())/864e5|0,Xr()[hp+28>>2>>>0]=bp,Xr()[hp>>2>>>0]=yp.getSeconds(),Xr()[hp+4>>2>>>0]=yp.getMinutes(),Xr()[hp+8>>2>>>0]=yp.getHours(),Xr()[hp+12>>2>>>0]=yp.getDate(),Xr()[hp+16>>2>>>0]=yp.getMonth(),yp.getTime()/1e3|0},Aa:Op,Ba:Np,Sa:function hp(yp,bp,Ep){hp.Ac||(hp.Ac=!0,Zp(yp,bp,Ep))},y:function(){tm("")},U:function(){if(!op&&!ip){var hp="Blocking on the main thread is very dangerous, see https://emscripten.org/docs/porting/pthreads.html#blocking-on-the-main-browser-thread";uy||(uy={}),uy[hp]||(uy[hp]=1,op&&(hp="warning: "+hp),fp(hp))}},ra:function(){return 4294901760},B:Ay,Ia:function(hp,yp,bp){un().copyWithin(hp>>>0,yp>>>0,yp+bp>>>0)},F:function(){return op?nn(3993).cpus().length:navigator.hardwareConcurrency},Da:function(hp,yp,bp){_m.length=yp,bp>>=3;for(var Ep=0;Ep<yp;Ep++)_m[Ep]=uo()[bp+Ep>>>0];return(0>hp?Im[-hp-1]:jv[hp]).apply(null,_m)},qa:function(hp){var yp=un().length;if((hp>>>=0)<=yp||4294901760<hp)return!1;for(var bp=1;4>=bp;bp*=2){var Ep=yp*(1+.2/bp);Ep=Math.min(Ep,hp+100663296);var $p=Math;Ep=Math.max(hp,Ep),$p=$p.min.call($p,4294901760,Ep+(65536-Ep%65536)%65536);e:{try{mp.grow($p-_p.byteLength+65535>>>16),Gp(mp.buffer);var Rp=1;break e}catch{}Rp=void 0}if(Rp)return!0}return!1},Na:function(){throw"unwind"},Ga:kp,Ha:hm,J:Wm,I:Em,S:Vm,ga:Zm,R:nv,d:function(){return Dm},na:function hp(yp,bp){hp.lc||(hp.lc=function(){if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function"){var $p=new Uint8Array(1);return()=>(crypto.getRandomValues($p),$p[0])}if(op)try{var Rp=nn(Object(function(){var qp=new Error("Cannot find module 'crypto'");throw qp.code="MODULE_NOT_FOUND",qp}()));return()=>Rp.randomBytes(1)[0]}catch{}return()=>tm("randomDevice")}());for(var Ep=0;Ep<bp;Ep++)sn()[yp+Ep>>0>>>0]=hp.lc();return 0},ia:function(hp,yp,bp){var Ep=lm();try{return vm(hp)(yp,bp)}catch($p){if(um(Ep),$p!==$p+0)throw $p;dm(1,0)}},ja:function(hp,yp,bp){var Ep=lm();try{return vm(hp)(yp,bp)}catch($p){if(um(Ep),$p!==$p+0)throw $p;dm(1,0)}},K:function(hp){var yp=lm();try{return vm(hp)()}catch(bp){if(um(yp),bp!==bp+0)throw bp;dm(1,0)}},f:function(hp,yp){var bp=lm();try{return vm(hp)(yp)}catch(Ep){if(um(bp),Ep!==Ep+0)throw Ep;dm(1,0)}},P:function(hp,yp,bp){var Ep=lm();try{return vm(hp)(yp,bp)}catch($p){if(um(Ep),$p!==$p+0)throw $p;dm(1,0)}},Q:function(hp,yp,bp){var Ep=lm();try{return vm(hp)(yp,bp)}catch($p){if(um(Ep),$p!==$p+0)throw $p;dm(1,0)}},k:function(hp,yp,bp){var Ep=lm();try{return vm(hp)(yp,bp)}catch($p){if(um(Ep),$p!==$p+0)throw $p;dm(1,0)}},p:function(hp,yp,bp,Ep){var $p=lm();try{return vm(hp)(yp,bp,Ep)}catch(Rp){if(um($p),Rp!==Rp+0)throw Rp;dm(1,0)}},q:function(hp,yp,bp,Ep,$p){var Rp=lm();try{return vm(hp)(yp,bp,Ep,$p)}catch(qp){if(um(Rp),qp!==qp+0)throw qp;dm(1,0)}},N:function(hp,yp,bp,Ep,$p,Rp){var qp=lm();try{return vm(hp)(yp,bp,Ep,$p,Rp)}catch(Jp){if(um(qp),Jp!==Jp+0)throw Jp;dm(1,0)}},s:function(hp,yp,bp,Ep,$p,Rp){var qp=lm();try{return vm(hp)(yp,bp,Ep,$p,Rp)}catch(Jp){if(um(qp),Jp!==Jp+0)throw Jp;dm(1,0)}},w:function(hp,yp,bp,Ep,$p,Rp,qp){var Jp=lm();try{return vm(hp)(yp,bp,Ep,$p,Rp,qp)}catch(fm){if(um(Jp),fm!==fm+0)throw fm;dm(1,0)}},L:function(hp,yp,bp,Ep,$p,Rp,qp,Jp){var fm=lm();try{return vm(hp)(yp,bp,Ep,$p,Rp,qp,Jp)}catch(pm){if(um(fm),pm!==pm+0)throw pm;dm(1,0)}},E:function(hp,yp,bp,Ep,$p,Rp,qp,Jp,fm,pm,Am,Hm){var zm=lm();try{return vm(hp)(yp,bp,Ep,$p,Rp,qp,Jp,fm,pm,Am,Hm)}catch(Ip){if(um(zm),Ip!==Ip+0)throw Ip;dm(1,0)}},aa:function(hp,yp,bp,Ep,$p,Rp,qp,Jp){var fm=lm();try{return Ev(hp,yp,bp,Ep,$p,Rp,qp,Jp)}catch(pm){if(um(fm),pm!==pm+0)throw pm;dm(1,0)}},_:function(hp,yp,bp,Ep,$p,Rp,qp){var Jp=lm();try{return gv(hp,yp,bp,Ep,$p,Rp,qp)}catch(fm){if(um(Jp),fm!==fm+0)throw fm;dm(1,0)}},Z:function(hp,yp,bp,Ep,$p){var Rp=lm();try{return Sv(hp,yp,bp,Ep,$p)}catch(qp){if(um(Rp),qp!==qp+0)throw qp;dm(1,0)}},ca:function(hp,yp,bp,Ep){var $p=lm();try{return _v(hp,yp,bp,Ep)}catch(Rp){if(um($p),Rp!==Rp+0)throw Rp;dm(1,0)}},$:function(hp){var yp=lm();try{return mv(hp)}catch(bp){if(um(yp),bp!==bp+0)throw bp;dm(1,0)}},ba:function(hp,yp){var bp=lm();try{return wv(hp,yp)}catch(Ep){if(um(bp),Ep!==Ep+0)throw Ep;dm(1,0)}},Y:function(hp,yp,bp){var Ep=lm();try{return yv(hp,yp,bp)}catch($p){if(um(Ep),$p!==$p+0)throw $p;dm(1,0)}},g:function(hp){var yp=lm();try{vm(hp)()}catch(bp){if(um(yp),bp!==bp+0)throw bp;dm(1,0)}},r:function(hp,yp){var bp=lm();try{vm(hp)(yp)}catch(Ep){if(um(bp),Ep!==Ep+0)throw Ep;dm(1,0)}},i:function(hp,yp,bp){var Ep=lm();try{vm(hp)(yp,bp)}catch($p){if(um(Ep),$p!==$p+0)throw $p;dm(1,0)}},ha:function(hp,yp,bp,Ep){var $p=lm();try{vm(hp)(yp,bp,Ep)}catch(Rp){if(um($p),Rp!==Rp+0)throw Rp;dm(1,0)}},m:function(hp,yp,bp,Ep){var $p=lm();try{vm(hp)(yp,bp,Ep)}catch(Rp){if(um($p),Rp!==Rp+0)throw Rp;dm(1,0)}},v:function(hp,yp,bp,Ep,$p){var Rp=lm();try{vm(hp)(yp,bp,Ep,$p)}catch(qp){if(um(Rp),qp!==qp+0)throw qp;dm(1,0)}},u:function(hp,yp,bp,Ep,$p,Rp){var qp=lm();try{vm(hp)(yp,bp,Ep,$p,Rp)}catch(Jp){if(um(qp),Jp!==Jp+0)throw Jp;dm(1,0)}},O:function(hp,yp,bp,Ep,$p,Rp,qp){var Jp=lm();try{vm(hp)(yp,bp,Ep,$p,Rp,qp)}catch(fm){if(um(Jp),fm!==fm+0)throw fm;dm(1,0)}},A:function(hp,yp,bp,Ep,$p,Rp,qp,Jp){var fm=lm();try{vm(hp)(yp,bp,Ep,$p,Rp,qp,Jp)}catch(pm){if(um(fm),pm!==pm+0)throw pm;dm(1,0)}},ka:function(hp,yp,bp,Ep,$p,Rp,qp,Jp,fm){var pm=lm();try{vm(hp)(yp,bp,Ep,$p,Rp,qp,Jp,fm)}catch(Am){if(um(pm),Am!==Am+0)throw Am;dm(1,0)}},C:function(hp,yp,bp,Ep,$p,Rp,qp,Jp,fm,pm,Am){var Hm=lm();try{vm(hp)(yp,bp,Ep,$p,Rp,qp,Jp,fm,pm,Am)}catch(zm){if(um(Hm),zm!==zm+0)throw zm;dm(1,0)}},D:function(hp,yp,bp,Ep,$p,Rp,qp,Jp,fm,pm,Am,Hm,zm,Ip,gm,Tm){var Jm=lm();try{vm(hp)(yp,bp,Ep,$p,Rp,qp,Jp,fm,pm,Am,Hm,zm,Ip,gm,Tm)}catch(gy){if(um(Jm),gy!==gy+0)throw gy;dm(1,0)}},fa:function(hp,yp,bp,Ep,$p,Rp,qp,Jp){var fm=lm();try{vv(hp,yp,bp,Ep,$p,Rp,qp,Jp)}catch(pm){if(um(fm),pm!==pm+0)throw pm;dm(1,0)}},da:function(hp,yp,bp,Ep,$p,Rp,qp,Jp,fm,pm,Am,Hm){var zm=lm();try{bv(hp,yp,bp,Ep,$p,Rp,qp,Jp,fm,pm,Am,Hm)}catch(Ip){if(um(zm),Ip!==Ip+0)throw Ip;dm(1,0)}},ea:function(hp,yp,bp,Ep,$p,Rp){var qp=lm();try{xv(hp,yp,bp,Ep,$p,Rp)}catch(Jp){if(um(qp),Jp!==Jp+0)throw Jp;dm(1,0)}},o:function(hp){return hp},a:mp||hn.wasmMemory,G:function(hp){Dm=hp},la:iv,z:function(hp,yp,bp,Ep){return iv(hp,yp,bp,Ep)}};(function(){function hp($p,Rp){hn.asm=$p.exports,em.qc.push(hn.asm.sb),Xp=hn.asm.ub,om.unshift(hn.asm.Va),xp=Rp,ap||(wm--,hn.monitorRunDependencies&&hn.monitorRunDependencies(wm),wm==0&&Pm&&($p=Pm,Pm=null,$p()))}function yp($p){hp($p.instance,$p.module)}function bp($p){return function(){if(!dp&&(rp||ip)){if(typeof fetch=="function"&&!am.startsWith("file://"))return fetch(am,{credentials:"same-origin"}).then(function(Rp){if(!Rp.ok)throw"failed to load wasm binary file at '"+am+"'";return Rp.arrayBuffer()}).catch(function(){return jm()});if(fo)return new Promise(function(Rp,qp){fo(am,function(Jp){Rp(new Uint8Array(Jp))},qp)})}return Promise.resolve().then(function(){return jm()})}().then(function(Rp){return WebAssembly.instantiate(Rp,Ep)}).then(function(Rp){return Rp}).then($p,function(Rp){fp("failed to asynchronously prepare wasm: "+Rp),tm(Rp)})}var Ep={a:Lv};if(ap||(wm++,hn.monitorRunDependencies&&hn.monitorRunDependencies(wm)),hn.instantiateWasm)try{return hn.instantiateWasm(Ep,hp)}catch($p){return fp("Module.instantiateWasm callback failed with error: "+$p),!1}(dp||typeof WebAssembly.instantiateStreaming!="function"||Xm()||am.startsWith("file://")||op||typeof fetch!="function"?bp(yp):fetch(am,{credentials:"same-origin"}).then(function($p){return WebAssembly.instantiateStreaming($p,Ep).then(yp,function(Rp){return fp("wasm streaming compile failed: "+Rp),fp("falling back to ArrayBuffer instantiation"),bp(yp)})})).catch(co)})(),hn.___wasm_call_ctors=function(){return(hn.___wasm_call_ctors=hn.asm.Va).apply(null,arguments)},hn._OrtInit=function(){return(hn._OrtInit=hn.asm.Wa).apply(null,arguments)},hn._OrtCreateSessionOptions=function(){return(hn._OrtCreateSessionOptions=hn.asm.Xa).apply(null,arguments)},hn._OrtAppendExecutionProvider=function(){return(hn._OrtAppendExecutionProvider=hn.asm.Ya).apply(null,arguments)},hn._OrtAddSessionConfigEntry=function(){return(hn._OrtAddSessionConfigEntry=hn.asm.Za).apply(null,arguments)},hn._OrtReleaseSessionOptions=function(){return(hn._OrtReleaseSessionOptions=hn.asm._a).apply(null,arguments)},hn._OrtCreateSession=function(){return(hn._OrtCreateSession=hn.asm.$a).apply(null,arguments)},hn._OrtReleaseSession=function(){return(hn._OrtReleaseSession=hn.asm.ab).apply(null,arguments)},hn._OrtGetInputCount=function(){return(hn._OrtGetInputCount=hn.asm.bb).apply(null,arguments)},hn._OrtGetOutputCount=function(){return(hn._OrtGetOutputCount=hn.asm.cb).apply(null,arguments)},hn._OrtGetInputName=function(){return(hn._OrtGetInputName=hn.asm.db).apply(null,arguments)},hn._OrtGetOutputName=function(){return(hn._OrtGetOutputName=hn.asm.eb).apply(null,arguments)},hn._OrtFree=function(){return(hn._OrtFree=hn.asm.fb).apply(null,arguments)},hn._OrtCreateTensor=function(){return(hn._OrtCreateTensor=hn.asm.gb).apply(null,arguments)},hn._OrtGetTensorData=function(){return(hn._OrtGetTensorData=hn.asm.hb).apply(null,arguments)},hn._OrtReleaseTensor=function(){return(hn._OrtReleaseTensor=hn.asm.ib).apply(null,arguments)},hn._OrtCreateRunOptions=function(){return(hn._OrtCreateRunOptions=hn.asm.jb).apply(null,arguments)},hn._OrtAddRunConfigEntry=function(){return(hn._OrtAddRunConfigEntry=hn.asm.kb).apply(null,arguments)},hn._OrtReleaseRunOptions=function(){return(hn._OrtReleaseRunOptions=hn.asm.lb).apply(null,arguments)},hn._OrtRun=function(){return(hn._OrtRun=hn.asm.mb).apply(null,arguments)},hn._OrtEndProfiling=function(){return(hn._OrtEndProfiling=hn.asm.nb).apply(null,arguments)};var Hy=hn._pthread_self=function(){return(Hy=hn._pthread_self=hn.asm.ob).apply(null,arguments)},Zy=hn._malloc=function(){return(Zy=hn._malloc=hn.asm.pb).apply(null,arguments)},av=hn._free=function(){return(av=hn._free=hn.asm.qb).apply(null,arguments)},sv=hn._fflush=function(){return(sv=hn._fflush=hn.asm.rb).apply(null,arguments)};hn.__emscripten_tls_init=function(){return(hn.__emscripten_tls_init=hn.asm.sb).apply(null,arguments)};var uv=hn.___funcs_on_exit=function(){return(uv=hn.___funcs_on_exit=hn.asm.tb).apply(null,arguments)},cv=hn.__emscripten_thread_init=function(){return(cv=hn.__emscripten_thread_init=hn.asm.vb).apply(null,arguments)};hn.__emscripten_thread_crashed=function(){return(hn.__emscripten_thread_crashed=hn.asm.wb).apply(null,arguments)};var qy,lv=hn._emscripten_run_in_main_runtime_thread_js=function(){return(lv=hn._emscripten_run_in_main_runtime_thread_js=hn.asm.xb).apply(null,arguments)},dv=hn.__emscripten_proxy_execute_task_queue=function(){return(dv=hn.__emscripten_proxy_execute_task_queue=hn.asm.yb).apply(null,arguments)},Jy=hn.__emscripten_thread_free_data=function(){return(Jy=hn.__emscripten_thread_free_data=hn.asm.zb).apply(null,arguments)},fv=hn.__emscripten_thread_exit=function(){return(fv=hn.__emscripten_thread_exit=hn.asm.Ab).apply(null,arguments)},dm=hn._setThrew=function(){return(dm=hn._setThrew=hn.asm.Bb).apply(null,arguments)},pv=hn._emscripten_stack_set_limits=function(){return(pv=hn._emscripten_stack_set_limits=hn.asm.Cb).apply(null,arguments)},lm=hn.stackSave=function(){return(lm=hn.stackSave=hn.asm.Db).apply(null,arguments)},um=hn.stackRestore=function(){return(um=hn.stackRestore=hn.asm.Eb).apply(null,arguments)},ev=hn.stackAlloc=function(){return(ev=hn.stackAlloc=hn.asm.Fb).apply(null,arguments)},Ky=hn.___cxa_can_catch=function(){return(Ky=hn.___cxa_can_catch=hn.asm.Gb).apply(null,arguments)},hv=hn.___cxa_is_pointer_type=function(){return(hv=hn.___cxa_is_pointer_type=hn.asm.Hb).apply(null,arguments)},mv=hn.dynCall_j=function(){return(mv=hn.dynCall_j=hn.asm.Ib).apply(null,arguments)},gv=hn.dynCall_iiiiij=function(){return(gv=hn.dynCall_iiiiij=hn.asm.Jb).apply(null,arguments)},yv=hn.dynCall_jii=function(){return(yv=hn.dynCall_jii=hn.asm.Kb).apply(null,arguments)},vv=hn.dynCall_viiiiij=function(){return(vv=hn.dynCall_viiiiij=hn.asm.Lb).apply(null,arguments)},xv=hn.dynCall_vjji=function(){return(xv=hn.dynCall_vjji=hn.asm.Mb).apply(null,arguments)},bv=hn.dynCall_viiijjjii=function(){return(bv=hn.dynCall_viiijjjii=hn.asm.Nb).apply(null,arguments)},_v=hn.dynCall_iij=function(){return(_v=hn.dynCall_iij=hn.asm.Ob).apply(null,arguments)},wv=hn.dynCall_ji=function(){return(wv=hn.dynCall_ji=hn.asm.Pb).apply(null,arguments)},Ev=hn.dynCall_iiiiiij=function(){return(Ev=hn.dynCall_iiiiiij=hn.asm.Qb).apply(null,arguments)},Sv=hn.dynCall_iiij=function(){return(Sv=hn.dynCall_iiij=hn.asm.Rb).apply(null,arguments)};function Tv(){function hp(){if(!qy&&(qy=!0,hn.calledRun=!0,!Up)&&(ap||Bm(om),fn(hn),hn.onRuntimeInitialized&&hn.onRuntimeInitialized(),!ap)){if(hn.postRun)for(typeof hn.postRun=="function"&&(hn.postRun=[hn.postRun]);hn.postRun.length;){var yp=hn.postRun.shift();mm.unshift(yp)}Bm(mm)}}if(!(0<wm))if(ap)fn(hn),ap||Bm(om),postMessage({cmd:"loaded"});else{if(hn.preRun)for(typeof hn.preRun=="function"&&(hn.preRun=[hn.preRun]);hn.preRun.length;)xm();Bm(Qp),0<wm||(hn.setStatus?(hn.setStatus("Running..."),setTimeout(function(){setTimeout(function(){hn.setStatus("")},1),hp()},1)):hp())}}if(hn.UTF8ToString=zp,hn.stringToUTF8=function(hp,yp,bp){return Bp(hp,un(),yp,bp)},hn.lengthBytesUTF8=Pp,hn.keepRuntimeAlive=Sm,hn.wasmMemory=mp,hn.stackSave=lm,hn.stackRestore=um,hn.stackAlloc=ev,hn.ExitStatus=Lm,hn.PThread=em,Pm=function hp(){qy||Tv(),qy||(Pm=hp)},hn.preInit)for(typeof hn.preInit=="function"&&(hn.preInit=[hn.preInit]);0<hn.preInit.length;)hn.preInit.pop()();return Tv(),an.ready});Mt.exports=on},932:(Mt,st,nn)=>{var rn,on=(rn=(rn=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0)||"/index.js",function(an){var sn,un,Xr;an=an||{},sn||(sn=an!==void 0?an:{}),sn.ready=new Promise(function(vp,wp){un=vp,Xr=wp});var to,uo,hn,fn,co,lo,fo=Object.assign({},sn),ho="./this.program",mo=(vp,wp)=>{throw wp},Uo=typeof window=="object",_d=typeof importScripts=="function",tp=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",ep="";tp?(ep=_d?nn(908).dirname(ep)+"/":"//",lo=()=>{co||(fn=nn(1384),co=nn(908))},to=function(vp,wp){return lo(),vp=co.normalize(vp),fn.readFileSync(vp,wp?void 0:"utf8")},hn=vp=>((vp=to(vp,!0)).buffer||(vp=new Uint8Array(vp)),vp),uo=(vp,wp,Tp)=>{lo(),vp=co.normalize(vp),fn.readFile(vp,function(Ap,Op){Ap?Tp(Ap):wp(Op.buffer)})},1<process.argv.length&&(ho=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),process.on("uncaughtException",function(vp){if(!(vp instanceof om))throw vp}),process.on("unhandledRejection",function(vp){throw vp}),mo=(vp,wp)=>{if(op||0<Kp)throw process.exitCode=vp,wp;wp instanceof om||ip("exiting due to exception: "+wp),process.exit(vp)},sn.inspect=function(){return"[Emscripten Module object]"}):(Uo||_d)&&(_d?ep=self.location.href:typeof document<"u"&&document.currentScript&&(ep=document.currentScript.src),rn&&(ep=rn),ep=ep.indexOf("blob:")!==0?ep.substr(0,ep.replace(/[?#].*/,"").lastIndexOf("/")+1):"",to=vp=>{var wp=new XMLHttpRequest;return wp.open("GET",vp,!1),wp.send(null),wp.responseText},_d&&(hn=vp=>{var wp=new XMLHttpRequest;return wp.open("GET",vp,!1),wp.responseType="arraybuffer",wp.send(null),new Uint8Array(wp.response)}),uo=(vp,wp,Tp)=>{var Ap=new XMLHttpRequest;Ap.open("GET",vp,!0),Ap.responseType="arraybuffer",Ap.onload=()=>{Ap.status==200||Ap.status==0&&Ap.response?wp(Ap.response):Tp()},Ap.onerror=Tp,Ap.send(null)});var np,rp=sn.print||console.log.bind(console),ip=sn.printErr||console.warn.bind(console);Object.assign(sn,fo),fo=null,sn.thisProgram&&(ho=sn.thisProgram),sn.quit&&(mo=sn.quit),sn.wasmBinary&&(np=sn.wasmBinary);var op=sn.noExitRuntime||!1;typeof WebAssembly!="object"&&Gp("no native wasm support detected");var ap,sp,up,pp,lp,dp,cp=!1,fp=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function gp(vp,wp,Tp){var Ap=(wp>>>=0)+Tp;for(Tp=wp;vp[Tp]&&!(Tp>=Ap);)++Tp;if(16<Tp-wp&&vp.buffer&&fp)return fp.decode(vp.subarray(wp,Tp));for(Ap="";wp<Tp;){var Op=vp[wp++];if(128&Op){var Np=63&vp[wp++];if((224&Op)==192)Ap+=String.fromCharCode((31&Op)<<6|Np);else{var Hp=63&vp[wp++];65536>(Op=(240&Op)==224?(15&Op)<<12|Np<<6|Hp:(7&Op)<<18|Np<<12|Hp<<6|63&vp[wp++])?Ap+=String.fromCharCode(Op):(Op-=65536,Ap+=String.fromCharCode(55296|Op>>10,56320|1023&Op))}}else Ap+=String.fromCharCode(Op)}return Ap}function mp(vp,wp){return(vp>>>=0)?gp(pp,vp,wp):""}function xp(vp,wp,Tp,Ap){if(!(0<Ap))return 0;var Op=Tp>>>=0;Ap=Tp+Ap-1;for(var Np=0;Np<vp.length;++Np){var Hp=vp.charCodeAt(Np);if(55296<=Hp&&57343>=Hp&&(Hp=65536+((1023&Hp)<<10)|1023&vp.charCodeAt(++Np)),127>=Hp){if(Tp>=Ap)break;wp[Tp++>>>0]=Hp}else{if(2047>=Hp){if(Tp+1>=Ap)break;wp[Tp++>>>0]=192|Hp>>6}else{if(65535>=Hp){if(Tp+2>=Ap)break;wp[Tp++>>>0]=224|Hp>>12}else{if(Tp+3>=Ap)break;wp[Tp++>>>0]=240|Hp>>18,wp[Tp++>>>0]=128|Hp>>12&63}wp[Tp++>>>0]=128|Hp>>6&63}wp[Tp++>>>0]=128|63&Hp}}return wp[Tp>>>0]=0,Tp-Op}function _p(vp){for(var wp=0,Tp=0;Tp<vp.length;++Tp){var Ap=vp.charCodeAt(Tp);127>=Ap?wp++:2047>=Ap?wp+=2:55296<=Ap&&57343>=Ap?(wp+=4,++Tp):wp+=3}return wp}function Sp(){var vp=ap.buffer;sp=vp,sn.HEAP8=up=new Int8Array(vp),sn.HEAP16=new Int16Array(vp),sn.HEAP32=lp=new Int32Array(vp),sn.HEAPU8=pp=new Uint8Array(vp),sn.HEAPU16=new Uint16Array(vp),sn.HEAPU32=dp=new Uint32Array(vp),sn.HEAPF32=new Float32Array(vp),sn.HEAPF64=new Float64Array(vp)}var Cp,jp=[],Dp=[],Vp=[],Up=[],Kp=0;function Mp(){var vp=sn.preRun.shift();jp.unshift(vp)}var zp,Bp=0,Pp=null;function Gp(vp){throw sn.onAbort&&sn.onAbort(vp),ip(vp="Aborted("+vp+")"),cp=!0,vp=new WebAssembly.RuntimeError(vp+". Build with -sASSERTIONS for more info."),Xr(vp),vp}function Wp(){return zp.startsWith("data:application/octet-stream;base64,")}if(zp="ort-wasm.wasm",!Wp()){var Xp=zp;zp=sn.locateFile?sn.locateFile(Xp,ep):ep+Xp}function Qp(){var vp=zp;try{if(vp==zp&&np)return new Uint8Array(np);if(hn)return hn(vp);throw"both async and sync fetching of the wasm failed"}catch(wp){Gp(wp)}}function om(vp){this.name="ExitStatus",this.message="Program terminated with exit("+vp+")",this.status=vp}function ym(vp){for(;0<vp.length;)vp.shift()(sn)}var mm=[],Sm=0,xm=0;function am(vp){this.Db=vp,this.zb=vp-24,this.Ub=function(wp){dp[this.zb+4>>2>>>0]=wp},this.Eb=function(){return dp[this.zb+4>>2>>>0]},this.Sb=function(wp){dp[this.zb+8>>2>>>0]=wp},this.Wb=function(){return dp[this.zb+8>>2>>>0]},this.Tb=function(){lp[this.zb>>2>>>0]=0},this.Ib=function(wp){up[this.zb+12>>0>>>0]=wp?1:0},this.Pb=function(){return up[this.zb+12>>0>>>0]!=0},this.Jb=function(wp){up[this.zb+13>>0>>>0]=wp?1:0},this.Lb=function(){return up[this.zb+13>>0>>>0]!=0},this.Rb=function(wp,Tp){this.Fb(0),this.Ub(wp),this.Sb(Tp),this.Tb(),this.Ib(!1),this.Jb(!1)},this.Nb=function(){lp[this.zb>>2>>>0]+=1},this.Xb=function(){var wp=lp[this.zb>>2>>>0];return lp[this.zb>>2>>>0]=wp-1,wp===1},this.Fb=function(wp){dp[this.zb+16>>2>>>0]=wp},this.Ob=function(){return dp[this.zb+16>>2>>>0]},this.Qb=function(){if(Py(this.Eb()))return dp[this.Db>>2>>>0];var wp=this.Ob();return wp!==0?wp:this.Db}}function wm(vp){return uy(new am(vp).zb)}var Pm=[];function tm(vp){var wp=Pm[vp];return wp||(vp>=Pm.length&&(Pm.length=vp+1),Pm[vp]=wp=Cp.get(vp)),wp}function Xm(vp){var wp=_p(vp)+1,Tp=vm(wp);return Tp&&xp(vp,up,Tp,wp),Tp}var jm={};function Im(){if(!Lm){var vp,wp={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:ho||"./this.program"};for(vp in jm)jm[vp]===void 0?delete wp[vp]:wp[vp]=jm[vp];var Tp=[];for(vp in wp)Tp.push(vp+"="+wp[vp]);Lm=Tp}return Lm}var Lm,ey=[null,[],[]];function ty(vp,wp){var Tp=ey[vp];wp===0||wp===10?((vp===1?rp:ip)(gp(Tp,0)),Tp.length=0):Tp.push(wp)}var Cm=0;function Wm(vp){return vp%4==0&&(vp%100!=0||vp%400==0)}var em=[31,29,31,30,31,30,31,31,30,31,30,31],Bm=[31,28,31,30,31,30,31,31,30,31,30,31];function Uy(vp,wp,Tp,Ap){function Op(kp,hm,Em){for(kp=typeof kp=="number"?kp.toString():kp||"";kp.length<hm;)kp=Em[0]+kp;return kp}function Np(kp,hm){return Op(kp,hm,"0")}function Hp(kp,hm){function Em(Zm){return 0>Zm?-1:0<Zm?1:0}var Vm;return(Vm=Em(kp.getFullYear()-hm.getFullYear()))===0&&(Vm=Em(kp.getMonth()-hm.getMonth()))===0&&(Vm=Em(kp.getDate()-hm.getDate())),Vm}function Zp(kp){switch(kp.getDay()){case 0:return new Date(kp.getFullYear()-1,11,29);case 1:return kp;case 2:return new Date(kp.getFullYear(),0,3);case 3:return new Date(kp.getFullYear(),0,2);case 4:return new Date(kp.getFullYear(),0,1);case 5:return new Date(kp.getFullYear()-1,11,31);case 6:return new Date(kp.getFullYear()-1,11,30)}}function Yp(kp){var hm=kp.Bb;for(kp=new Date(new Date(kp.Cb+1900,0,1).getTime());0<hm;){var Em=kp.getMonth(),Vm=(Wm(kp.getFullYear())?em:Bm)[Em];if(!(hm>Vm-kp.getDate())){kp.setDate(kp.getDate()+hm);break}hm-=Vm-kp.getDate()+1,kp.setDate(1),11>Em?kp.setMonth(Em+1):(kp.setMonth(0),kp.setFullYear(kp.getFullYear()+1))}return Em=new Date(kp.getFullYear()+1,0,4),hm=Zp(new Date(kp.getFullYear(),0,4)),Em=Zp(Em),0>=Hp(hm,kp)?0>=Hp(Em,kp)?kp.getFullYear()+1:kp.getFullYear():kp.getFullYear()-1}var sm=lp[Ap+40>>2>>>0];for(var _m in Ap={$b:lp[Ap>>2>>>0],Zb:lp[Ap+4>>2>>>0],Gb:lp[Ap+8>>2>>>0],Kb:lp[Ap+12>>2>>>0],Hb:lp[Ap+16>>2>>>0],Cb:lp[Ap+20>>2>>>0],Ab:lp[Ap+24>>2>>>0],Bb:lp[Ap+28>>2>>>0],bc:lp[Ap+32>>2>>>0],Yb:lp[Ap+36>>2>>>0],ac:sm?mp(sm):""},Tp=mp(Tp),sm={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})Tp=Tp.replace(new RegExp(_m,"g"),sm[_m]);var Mm="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),Om="January February March April May June July August September October November December".split(" ");for(_m in sm={"%a":function(kp){return Mm[kp.Ab].substring(0,3)},"%A":function(kp){return Mm[kp.Ab]},"%b":function(kp){return Om[kp.Hb].substring(0,3)},"%B":function(kp){return Om[kp.Hb]},"%C":function(kp){return Np((kp.Cb+1900)/100|0,2)},"%d":function(kp){return Np(kp.Kb,2)},"%e":function(kp){return Op(kp.Kb,2," ")},"%g":function(kp){return Yp(kp).toString().substring(2)},"%G":function(kp){return Yp(kp)},"%H":function(kp){return Np(kp.Gb,2)},"%I":function(kp){return(kp=kp.Gb)==0?kp=12:12<kp&&(kp-=12),Np(kp,2)},"%j":function(kp){for(var hm=0,Em=0;Em<=kp.Hb-1;hm+=(Wm(kp.Cb+1900)?em:Bm)[Em++]);return Np(kp.Kb+hm,3)},"%m":function(kp){return Np(kp.Hb+1,2)},"%M":function(kp){return Np(kp.Zb,2)},"%n":function(){return`
`},"%p":function(kp){return 0<=kp.Gb&&12>kp.Gb?"AM":"PM"},"%S":function(kp){return Np(kp.$b,2)},"%t":function(){return"	"},"%u":function(kp){return kp.Ab||7},"%U":function(kp){return Np(Math.floor((kp.Bb+7-kp.Ab)/7),2)},"%V":function(kp){var hm=Math.floor((kp.Bb+7-(kp.Ab+6)%7)/7);if(2>=(kp.Ab+371-kp.Bb-2)%7&&hm++,hm)hm==53&&((Em=(kp.Ab+371-kp.Bb)%7)==4||Em==3&&Wm(kp.Cb)||(hm=1));else{hm=52;var Em=(kp.Ab+7-kp.Bb-1)%7;(Em==4||Em==5&&Wm(kp.Cb%400-1))&&hm++}return Np(hm,2)},"%w":function(kp){return kp.Ab},"%W":function(kp){return Np(Math.floor((kp.Bb+7-(kp.Ab+6)%7)/7),2)},"%y":function(kp){return(kp.Cb+1900).toString().substring(2)},"%Y":function(kp){return kp.Cb+1900},"%z":function(kp){var hm=0<=(kp=kp.Yb);return kp=Math.abs(kp)/60,(hm?"+":"-")+("0000"+(kp/60*100+kp%60)).slice(-4)},"%Z":function(kp){return kp.ac},"%%":function(){return"%"}},Tp=Tp.replace(/%%/g,"\0\0"),sm)Tp.includes(_m)&&(Tp=Tp.replace(new RegExp(_m,"g"),sm[_m](Ap)));return _m=function(kp){var hm=Array(_p(kp)+1);return xp(kp,hm,0,hm.length),hm}(Tp=Tp.replace(/\0\0/g,"%")),_m.length>wp?0:(up.set(_m,vp>>>0),_m.length-1)}var Wy={a:function(vp){return vm(vp+24)+24},m:function(vp){return(vp=new am(vp)).Pb()||(vp.Ib(!0),Sm--),vp.Jb(!1),mm.push(vp),vp.Nb(),vp.Qb()},ia:function(vp){throw ip("Unexpected exception thrown, this is not properly supported - aborting"),cp=!0,vp},w:function(){im(0);var vp=mm.pop();if(vp.Xb()&&!vp.Lb()){var wp=vp.Wb();wp&&tm(wp)(vp.Db),wm(vp.Db)}xm=0},d:function(){var vp=xm;if(!vp)return Cm=0;var wp=new am(vp);wp.Fb(vp);var Tp=wp.Eb();if(!Tp)return Cm=0,vp;for(var Ap=Array.prototype.slice.call(arguments),Op=0;Op<Ap.length;Op++){var Np=Ap[Op];if(Np===0||Np===Tp)break;if(ly(Np,Tp,wp.zb+16))return Cm=Np,vp}return Cm=Tp,vp},k:function(){var vp=xm;if(!vp)return Cm=0;var wp=new am(vp);wp.Fb(vp);var Tp=wp.Eb();if(!Tp)return Cm=0,vp;for(var Ap=Array.prototype.slice.call(arguments),Op=0;Op<Ap.length;Op++){var Np=Ap[Op];if(Np===0||Np===Tp)break;if(ly(Np,Tp,wp.zb+16))return Cm=Np,vp}return Cm=Tp,vp},g:function(){var vp=xm;if(!vp)return Cm=0;var wp=new am(vp);wp.Fb(vp);var Tp=wp.Eb();if(!Tp)return Cm=0,vp;for(var Ap=Array.prototype.slice.call(arguments),Op=0;Op<Ap.length;Op++){var Np=Ap[Op];if(Np===0||Np===Tp)break;if(ly(Np,Tp,wp.zb+16))return Cm=Np,vp}return Cm=Tp,vp},s:wm,L:function(){var vp=mm.pop();vp||Gp("no exception to throw");var wp=vp.Db;throw vp.Lb()||(mm.push(vp),vp.Jb(!0),vp.Ib(!1),Sm++),xm=wp,wp},b:function(vp,wp,Tp){throw new am(vp).Rb(wp,Tp),xm=vp,Sm++,vp},la:function(){return Sm},i:function(vp){throw xm||(xm=vp),vp},H:function(){return 0},Ba:function(){},pa:function(){},ra:function(){},ka:function(){return 0},za:function(){},ua:function(){},ya:function(){},R:function(){},qa:function(){},na:function(){},Aa:function(){},oa:function(){},Ha:function(){},Ja:function(){Gp("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},Ia:function(){Gp("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},S:function(){return Date.now()},Ca:function(){return!0},Da:function(vp,wp){vp=new Date(1e3*(dp[vp>>>2]+4294967296*lp[vp+4>>>2])),lp[wp>>2>>>0]=vp.getUTCSeconds(),lp[wp+4>>2>>>0]=vp.getUTCMinutes(),lp[wp+8>>2>>>0]=vp.getUTCHours(),lp[wp+12>>2>>>0]=vp.getUTCDate(),lp[wp+16>>2>>>0]=vp.getUTCMonth(),lp[wp+20>>2>>>0]=vp.getUTCFullYear()-1900,lp[wp+24>>2>>>0]=vp.getUTCDay(),lp[wp+28>>2>>>0]=(vp.getTime()-Date.UTC(vp.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},Ea:function(vp,wp){vp=new Date(1e3*(dp[vp>>>2]+4294967296*lp[vp+4>>>2])),lp[wp>>2>>>0]=vp.getSeconds(),lp[wp+4>>2>>>0]=vp.getMinutes(),lp[wp+8>>2>>>0]=vp.getHours(),lp[wp+12>>2>>>0]=vp.getDate(),lp[wp+16>>2>>>0]=vp.getMonth(),lp[wp+20>>2>>>0]=vp.getFullYear()-1900,lp[wp+24>>2>>>0]=vp.getDay();var Tp=new Date(vp.getFullYear(),0,1);lp[wp+28>>2>>>0]=(vp.getTime()-Tp.getTime())/864e5|0,lp[wp+36>>2>>>0]=-60*vp.getTimezoneOffset();var Ap=new Date(vp.getFullYear(),6,1).getTimezoneOffset();Tp=Tp.getTimezoneOffset(),lp[wp+32>>2>>>0]=0|(Ap!=Tp&&vp.getTimezoneOffset()==Math.min(Tp,Ap))},Fa:function(vp){var wp=new Date(lp[vp+20>>2>>>0]+1900,lp[vp+16>>2>>>0],lp[vp+12>>2>>>0],lp[vp+8>>2>>>0],lp[vp+4>>2>>>0],lp[vp>>2>>>0],0),Tp=lp[vp+32>>2>>>0],Ap=wp.getTimezoneOffset(),Op=new Date(wp.getFullYear(),0,1),Np=new Date(wp.getFullYear(),6,1).getTimezoneOffset(),Hp=Op.getTimezoneOffset(),Zp=Math.min(Hp,Np);return 0>Tp?lp[vp+32>>2>>>0]=+(Np!=Hp&&Zp==Ap):0<Tp!=(Zp==Ap)&&(Np=Math.max(Hp,Np),wp.setTime(wp.getTime()+6e4*((0<Tp?Zp:Np)-Ap))),lp[vp+24>>2>>>0]=wp.getDay(),lp[vp+28>>2>>>0]=(wp.getTime()-Op.getTime())/864e5|0,lp[vp>>2>>>0]=wp.getSeconds(),lp[vp+4>>2>>>0]=wp.getMinutes(),lp[vp+8>>2>>>0]=wp.getHours(),lp[vp+12>>2>>>0]=wp.getDate(),lp[vp+16>>2>>>0]=wp.getMonth(),wp.getTime()/1e3|0},sa:function(){return-52},ta:function(){},Ga:function vp(wp,Tp,Ap){vp.Vb||(vp.Vb=!0,function(Op,Np,Hp){function Zp(Om){return(Om=Om.toTimeString().match(/\(([A-Za-z ]+)\)$/))?Om[1]:"GMT"}var Yp=new Date().getFullYear(),sm=new Date(Yp,0,1),_m=new Date(Yp,6,1);Yp=sm.getTimezoneOffset();var Mm=_m.getTimezoneOffset();lp[Op>>2>>>0]=60*Math.max(Yp,Mm),lp[Np>>2>>>0]=+(Yp!=Mm),Op=Zp(sm),Np=Zp(_m),Op=Xm(Op),Np=Xm(Np),Mm<Yp?(dp[Hp>>2>>>0]=Op,dp[Hp+4>>2>>>0]=Np):(dp[Hp>>2>>>0]=Np,dp[Hp+4>>2>>>0]=Op)}(wp,Tp,Ap))},B:function(){Gp("")},ma:function(){return 4294901760},I:tp?()=>{var vp=process.hrtime();return 1e3*vp[0]+vp[1]/1e6}:()=>performance.now(),xa:function(vp,wp,Tp){pp.copyWithin(vp>>>0,wp>>>0,wp+Tp>>>0)},G:function(vp){var wp=pp.length;if(4294901760<(vp>>>=0))return!1;for(var Tp=1;4>=Tp;Tp*=2){var Ap=wp*(1+.2/Tp);Ap=Math.min(Ap,vp+100663296);var Op=Math;Ap=Math.max(vp,Ap),Op=Op.min.call(Op,4294901760,Ap+(65536-Ap%65536)%65536);e:{try{ap.grow(Op-sp.byteLength+65535>>>16),Sp();var Np=1;break e}catch{}Np=void 0}if(Np)return!0}return!1},va:function(vp,wp){var Tp=0;return Im().forEach(function(Ap,Op){var Np=wp+Tp;for(Op=dp[vp+4*Op>>2>>>0]=Np,Np=0;Np<Ap.length;++Np)up[Op++>>0>>>0]=Ap.charCodeAt(Np);up[Op>>0>>>0]=0,Tp+=Ap.length+1}),0},wa:function(vp,wp){var Tp=Im();dp[vp>>2>>>0]=Tp.length;var Ap=0;return Tp.forEach(function(Op){Ap+=Op.length+1}),dp[wp>>2>>>0]=Ap,0},ba:function(vp){op||0<Kp||(cy(),ym(Vp),Ay(0),ey[1].length&&ty(1,10),ey[2].length&&ty(2,10)),op||0<Kp||(sn.onExit&&sn.onExit(vp),cp=!0),mo(vp,new om(vp))},E:function(){return 52},Q:function(){return 52},ca:function(){return 70},P:function(vp,wp,Tp,Ap){for(var Op=0,Np=0;Np<Tp;Np++){var Hp=dp[wp>>2>>>0],Zp=dp[wp+4>>2>>>0];wp+=8;for(var Yp=0;Yp<Zp;Yp++)ty(vp,pp[Hp+Yp>>>0]);Op+=Zp}return dp[Ap>>2>>>0]=Op,0},c:function(){return Cm},ja:function vp(wp,Tp){vp.Mb||(vp.Mb=function(){if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function"){var Op=new Uint8Array(1);return()=>(crypto.getRandomValues(Op),Op[0])}if(tp)try{var Np=nn(Object(function(){var Hp=new Error("Cannot find module 'crypto'");throw Hp.code="MODULE_NOT_FOUND",Hp}()));return()=>Np.randomBytes(1)[0]}catch{}return()=>Gp("randomDevice")}());for(var Ap=0;Ap<Tp;Ap++)up[wp+Ap>>0>>>0]=vp.Mb();return 0},ea:function(vp,wp,Tp){var Ap=nm();try{return tm(vp)(wp,Tp)}catch(Op){if(rm(Ap),Op!==Op+0)throw Op;im(1,0)}},fa:function(vp,wp,Tp){var Ap=nm();try{return tm(vp)(wp,Tp)}catch(Op){if(rm(Ap),Op!==Op+0)throw Op;im(1,0)}},J:function(vp){var wp=nm();try{return tm(vp)()}catch(Tp){if(rm(wp),Tp!==Tp+0)throw Tp;im(1,0)}},e:function(vp,wp){var Tp=nm();try{return tm(vp)(wp)}catch(Ap){if(rm(Tp),Ap!==Ap+0)throw Ap;im(1,0)}},N:function(vp,wp,Tp){var Ap=nm();try{return tm(vp)(wp,Tp)}catch(Op){if(rm(Ap),Op!==Op+0)throw Op;im(1,0)}},O:function(vp,wp,Tp){var Ap=nm();try{return tm(vp)(wp,Tp)}catch(Op){if(rm(Ap),Op!==Op+0)throw Op;im(1,0)}},j:function(vp,wp,Tp){var Ap=nm();try{return tm(vp)(wp,Tp)}catch(Op){if(rm(Ap),Op!==Op+0)throw Op;im(1,0)}},o:function(vp,wp,Tp,Ap){var Op=nm();try{return tm(vp)(wp,Tp,Ap)}catch(Np){if(rm(Op),Np!==Np+0)throw Np;im(1,0)}},p:function(vp,wp,Tp,Ap,Op){var Np=nm();try{return tm(vp)(wp,Tp,Ap,Op)}catch(Hp){if(rm(Np),Hp!==Hp+0)throw Hp;im(1,0)}},M:function(vp,wp,Tp,Ap,Op,Np){var Hp=nm();try{return tm(vp)(wp,Tp,Ap,Op,Np)}catch(Zp){if(rm(Hp),Zp!==Zp+0)throw Zp;im(1,0)}},r:function(vp,wp,Tp,Ap,Op,Np){var Hp=nm();try{return tm(vp)(wp,Tp,Ap,Op,Np)}catch(Zp){if(rm(Hp),Zp!==Zp+0)throw Zp;im(1,0)}},v:function(vp,wp,Tp,Ap,Op,Np,Hp){var Zp=nm();try{return tm(vp)(wp,Tp,Ap,Op,Np,Hp)}catch(Yp){if(rm(Zp),Yp!==Yp+0)throw Yp;im(1,0)}},K:function(vp,wp,Tp,Ap,Op,Np,Hp,Zp){var Yp=nm();try{return tm(vp)(wp,Tp,Ap,Op,Np,Hp,Zp)}catch(sm){if(rm(Yp),sm!==sm+0)throw sm;im(1,0)}},D:function(vp,wp,Tp,Ap,Op,Np,Hp,Zp,Yp,sm,_m,Mm){var Om=nm();try{return tm(vp)(wp,Tp,Ap,Op,Np,Hp,Zp,Yp,sm,_m,Mm)}catch(kp){if(rm(Om),kp!==kp+0)throw kp;im(1,0)}},X:function(vp,wp,Tp,Ap,Op,Np,Hp,Zp){var Yp=nm();try{return Ly(vp,wp,Tp,Ap,Op,Np,Hp,Zp)}catch(sm){if(rm(Yp),sm!==sm+0)throw sm;im(1,0)}},V:function(vp,wp,Tp,Ap,Op,Np,Hp){var Zp=nm();try{return Oy(vp,wp,Tp,Ap,Op,Np,Hp)}catch(Yp){if(rm(Zp),Yp!==Yp+0)throw Yp;im(1,0)}},U:function(vp,wp,Tp,Ap,Op){var Np=nm();try{return Fy(vp,wp,Tp,Ap,Op)}catch(Hp){if(rm(Np),Hp!==Hp+0)throw Hp;im(1,0)}},Z:function(vp,wp,Tp,Ap){var Op=nm();try{return Dy(vp,wp,Tp,Ap)}catch(Np){if(rm(Op),Np!==Np+0)throw Np;im(1,0)}},W:function(vp){var wp=nm();try{return Cy(vp)}catch(Tp){if(rm(wp),Tp!==Tp+0)throw Tp;im(1,0)}},Y:function(vp,wp){var Tp=nm();try{return jy(vp,wp)}catch(Ap){if(rm(Tp),Ap!==Ap+0)throw Ap;im(1,0)}},T:function(vp,wp,Tp){var Ap=nm();try{return My(vp,wp,Tp)}catch(Op){if(rm(Ap),Op!==Op+0)throw Op;im(1,0)}},f:function(vp){var wp=nm();try{tm(vp)()}catch(Tp){if(rm(wp),Tp!==Tp+0)throw Tp;im(1,0)}},q:function(vp,wp){var Tp=nm();try{tm(vp)(wp)}catch(Ap){if(rm(Tp),Ap!==Ap+0)throw Ap;im(1,0)}},h:function(vp,wp,Tp){var Ap=nm();try{tm(vp)(wp,Tp)}catch(Op){if(rm(Ap),Op!==Op+0)throw Op;im(1,0)}},da:function(vp,wp,Tp,Ap){var Op=nm();try{tm(vp)(wp,Tp,Ap)}catch(Np){if(rm(Op),Np!==Np+0)throw Np;im(1,0)}},l:function(vp,wp,Tp,Ap){var Op=nm();try{tm(vp)(wp,Tp,Ap)}catch(Np){if(rm(Op),Np!==Np+0)throw Np;im(1,0)}},t:function(vp,wp,Tp,Ap,Op){var Np=nm();try{tm(vp)(wp,Tp,Ap,Op)}catch(Hp){if(rm(Np),Hp!==Hp+0)throw Hp;im(1,0)}},u:function(vp,wp,Tp,Ap,Op,Np){var Hp=nm();try{tm(vp)(wp,Tp,Ap,Op,Np)}catch(Zp){if(rm(Hp),Zp!==Zp+0)throw Zp;im(1,0)}},x:function(vp,wp,Tp,Ap,Op,Np,Hp){var Zp=nm();try{tm(vp)(wp,Tp,Ap,Op,Np,Hp)}catch(Yp){if(rm(Zp),Yp!==Yp+0)throw Yp;im(1,0)}},z:function(vp,wp,Tp,Ap,Op,Np,Hp,Zp){var Yp=nm();try{tm(vp)(wp,Tp,Ap,Op,Np,Hp,Zp)}catch(sm){if(rm(Yp),sm!==sm+0)throw sm;im(1,0)}},ga:function(vp,wp,Tp,Ap,Op,Np,Hp,Zp,Yp){var sm=nm();try{tm(vp)(wp,Tp,Ap,Op,Np,Hp,Zp,Yp)}catch(_m){if(rm(sm),_m!==_m+0)throw _m;im(1,0)}},A:function(vp,wp,Tp,Ap,Op,Np,Hp,Zp,Yp,sm,_m){var Mm=nm();try{tm(vp)(wp,Tp,Ap,Op,Np,Hp,Zp,Yp,sm,_m)}catch(Om){if(rm(Mm),Om!==Om+0)throw Om;im(1,0)}},C:function(vp,wp,Tp,Ap,Op,Np,Hp,Zp,Yp,sm,_m,Mm,Om,kp,hm,Em){var Vm=nm();try{tm(vp)(wp,Tp,Ap,Op,Np,Hp,Zp,Yp,sm,_m,Mm,Om,kp,hm,Em)}catch(Zm){if(rm(Vm),Zm!==Zm+0)throw Zm;im(1,0)}},aa:function(vp,wp,Tp,Ap,Op,Np,Hp,Zp){var Yp=nm();try{Ry(vp,wp,Tp,Ap,Op,Np,Hp,Zp)}catch(sm){if(rm(Yp),sm!==sm+0)throw sm;im(1,0)}},_:function(vp,wp,Tp,Ap,Op,Np,Hp,Zp,Yp,sm,_m,Mm){var Om=nm();try{Ny(vp,wp,Tp,Ap,Op,Np,Hp,Zp,Yp,sm,_m,Mm)}catch(kp){if(rm(Om),kp!==kp+0)throw kp;im(1,0)}},$:function(vp,wp,Tp,Ap,Op,Np){var Hp=nm();try{Iy(vp,wp,Tp,Ap,Op,Np)}catch(Zp){if(rm(Hp),Zp!==Zp+0)throw Zp;im(1,0)}},n:function(vp){return vp},F:function(vp){Cm=vp},ha:Uy,y:function(vp,wp,Tp,Ap){return Uy(vp,wp,Tp,Ap)}};(function(){function vp(Op){sn.asm=Op.exports,ap=sn.asm.Ka,Sp(),Cp=sn.asm.ib,Dp.unshift(sn.asm.La),Bp--,sn.monitorRunDependencies&&sn.monitorRunDependencies(Bp),Bp==0&&Pp&&(Op=Pp,Pp=null,Op())}function wp(Op){vp(Op.instance)}function Tp(Op){return function(){if(!np&&(Uo||_d)){if(typeof fetch=="function"&&!zp.startsWith("file://"))return fetch(zp,{credentials:"same-origin"}).then(function(Np){if(!Np.ok)throw"failed to load wasm binary file at '"+zp+"'";return Np.arrayBuffer()}).catch(function(){return Qp()});if(uo)return new Promise(function(Np,Hp){uo(zp,function(Zp){Np(new Uint8Array(Zp))},Hp)})}return Promise.resolve().then(function(){return Qp()})}().then(function(Np){return WebAssembly.instantiate(Np,Ap)}).then(function(Np){return Np}).then(Op,function(Np){ip("failed to asynchronously prepare wasm: "+Np),Gp(Np)})}var Ap={a:Wy};if(Bp++,sn.monitorRunDependencies&&sn.monitorRunDependencies(Bp),sn.instantiateWasm)try{return sn.instantiateWasm(Ap,vp)}catch(Op){return ip("Module.instantiateWasm callback failed with error: "+Op),!1}(np||typeof WebAssembly.instantiateStreaming!="function"||Wp()||zp.startsWith("file://")||tp||typeof fetch!="function"?Tp(wp):fetch(zp,{credentials:"same-origin"}).then(function(Op){return WebAssembly.instantiateStreaming(Op,Ap).then(wp,function(Np){return ip("wasm streaming compile failed: "+Np),ip("falling back to ArrayBuffer instantiation"),Tp(wp)})})).catch(Xr)})(),sn.___wasm_call_ctors=function(){return(sn.___wasm_call_ctors=sn.asm.La).apply(null,arguments)},sn._OrtInit=function(){return(sn._OrtInit=sn.asm.Ma).apply(null,arguments)},sn._OrtCreateSessionOptions=function(){return(sn._OrtCreateSessionOptions=sn.asm.Na).apply(null,arguments)},sn._OrtAppendExecutionProvider=function(){return(sn._OrtAppendExecutionProvider=sn.asm.Oa).apply(null,arguments)},sn._OrtAddSessionConfigEntry=function(){return(sn._OrtAddSessionConfigEntry=sn.asm.Pa).apply(null,arguments)},sn._OrtReleaseSessionOptions=function(){return(sn._OrtReleaseSessionOptions=sn.asm.Qa).apply(null,arguments)},sn._OrtCreateSession=function(){return(sn._OrtCreateSession=sn.asm.Ra).apply(null,arguments)},sn._OrtReleaseSession=function(){return(sn._OrtReleaseSession=sn.asm.Sa).apply(null,arguments)},sn._OrtGetInputCount=function(){return(sn._OrtGetInputCount=sn.asm.Ta).apply(null,arguments)},sn._OrtGetOutputCount=function(){return(sn._OrtGetOutputCount=sn.asm.Ua).apply(null,arguments)},sn._OrtGetInputName=function(){return(sn._OrtGetInputName=sn.asm.Va).apply(null,arguments)},sn._OrtGetOutputName=function(){return(sn._OrtGetOutputName=sn.asm.Wa).apply(null,arguments)},sn._OrtFree=function(){return(sn._OrtFree=sn.asm.Xa).apply(null,arguments)},sn._OrtCreateTensor=function(){return(sn._OrtCreateTensor=sn.asm.Ya).apply(null,arguments)},sn._OrtGetTensorData=function(){return(sn._OrtGetTensorData=sn.asm.Za).apply(null,arguments)},sn._OrtReleaseTensor=function(){return(sn._OrtReleaseTensor=sn.asm._a).apply(null,arguments)},sn._OrtCreateRunOptions=function(){return(sn._OrtCreateRunOptions=sn.asm.$a).apply(null,arguments)},sn._OrtAddRunConfigEntry=function(){return(sn._OrtAddRunConfigEntry=sn.asm.ab).apply(null,arguments)},sn._OrtReleaseRunOptions=function(){return(sn._OrtReleaseRunOptions=sn.asm.bb).apply(null,arguments)},sn._OrtRun=function(){return(sn._OrtRun=sn.asm.cb).apply(null,arguments)},sn._OrtEndProfiling=function(){return(sn._OrtEndProfiling=sn.asm.db).apply(null,arguments)};var Qm,vm=sn._malloc=function(){return(vm=sn._malloc=sn.asm.eb).apply(null,arguments)},uy=sn._free=function(){return(uy=sn._free=sn.asm.fb).apply(null,arguments)},Ay=sn._fflush=function(){return(Ay=sn._fflush=sn.asm.gb).apply(null,arguments)},cy=sn.___funcs_on_exit=function(){return(cy=sn.___funcs_on_exit=sn.asm.hb).apply(null,arguments)},im=sn._setThrew=function(){return(im=sn._setThrew=sn.asm.jb).apply(null,arguments)},nm=sn.stackSave=function(){return(nm=sn.stackSave=sn.asm.kb).apply(null,arguments)},rm=sn.stackRestore=function(){return(rm=sn.stackRestore=sn.asm.lb).apply(null,arguments)},$y=sn.stackAlloc=function(){return($y=sn.stackAlloc=sn.asm.mb).apply(null,arguments)},ly=sn.___cxa_can_catch=function(){return(ly=sn.___cxa_can_catch=sn.asm.nb).apply(null,arguments)},Py=sn.___cxa_is_pointer_type=function(){return(Py=sn.___cxa_is_pointer_type=sn.asm.ob).apply(null,arguments)},Cy=sn.dynCall_j=function(){return(Cy=sn.dynCall_j=sn.asm.pb).apply(null,arguments)},Oy=sn.dynCall_iiiiij=function(){return(Oy=sn.dynCall_iiiiij=sn.asm.qb).apply(null,arguments)},My=sn.dynCall_jii=function(){return(My=sn.dynCall_jii=sn.asm.rb).apply(null,arguments)},Ry=sn.dynCall_viiiiij=function(){return(Ry=sn.dynCall_viiiiij=sn.asm.sb).apply(null,arguments)},Iy=sn.dynCall_vjji=function(){return(Iy=sn.dynCall_vjji=sn.asm.tb).apply(null,arguments)},Ny=sn.dynCall_viiijjjii=function(){return(Ny=sn.dynCall_viiijjjii=sn.asm.ub).apply(null,arguments)},Dy=sn.dynCall_iij=function(){return(Dy=sn.dynCall_iij=sn.asm.vb).apply(null,arguments)},jy=sn.dynCall_ji=function(){return(jy=sn.dynCall_ji=sn.asm.wb).apply(null,arguments)},Ly=sn.dynCall_iiiiiij=function(){return(Ly=sn.dynCall_iiiiiij=sn.asm.xb).apply(null,arguments)},Fy=sn.dynCall_iiij=function(){return(Fy=sn.dynCall_iiij=sn.asm.yb).apply(null,arguments)};function By(){function vp(){if(!Qm&&(Qm=!0,sn.calledRun=!0,!cp)){if(ym(Dp),un(sn),sn.onRuntimeInitialized&&sn.onRuntimeInitialized(),sn.postRun)for(typeof sn.postRun=="function"&&(sn.postRun=[sn.postRun]);sn.postRun.length;){var wp=sn.postRun.shift();Up.unshift(wp)}ym(Up)}}if(!(0<Bp)){if(sn.preRun)for(typeof sn.preRun=="function"&&(sn.preRun=[sn.preRun]);sn.preRun.length;)Mp();ym(jp),0<Bp||(sn.setStatus?(sn.setStatus("Running..."),setTimeout(function(){setTimeout(function(){sn.setStatus("")},1),vp()},1)):vp())}}if(sn.UTF8ToString=mp,sn.stringToUTF8=function(vp,wp,Tp){return xp(vp,pp,wp,Tp)},sn.lengthBytesUTF8=_p,sn.stackSave=nm,sn.stackRestore=rm,sn.stackAlloc=$y,Pp=function vp(){Qm||By(),Qm||(Pp=vp)},sn.preInit)for(typeof sn.preInit=="function"&&(sn.preInit=[sn.preInit]);0<sn.preInit.length;)sn.preInit.pop()();return By(),an.ready});Mt.exports=on},4537:Mt=>{Mt.exports=function(st,nn){for(var rn=new Array(arguments.length-1),on=0,an=2,sn=!0;an<arguments.length;)rn[on++]=arguments[an++];return new Promise(function(un,Xr){rn[on]=function(to){if(sn)if(sn=!1,to)Xr(to);else{for(var uo=new Array(arguments.length-1),hn=0;hn<uo.length;)uo[hn++]=arguments[hn];un.apply(null,uo)}};try{st.apply(nn||null,rn)}catch(to){sn&&(sn=!1,Xr(to))}})}},7419:(Mt,st)=>{var nn=st;nn.length=function(un){var Xr=un.length;if(!Xr)return 0;for(var to=0;--Xr%4>1&&un.charAt(Xr)==="=";)++to;return Math.ceil(3*un.length)/4-to};for(var rn=new Array(64),on=new Array(123),an=0;an<64;)on[rn[an]=an<26?an+65:an<52?an+71:an<62?an-4:an-59|43]=an++;nn.encode=function(un,Xr,to){for(var uo,hn=null,fn=[],co=0,lo=0;Xr<to;){var fo=un[Xr++];switch(lo){case 0:fn[co++]=rn[fo>>2],uo=(3&fo)<<4,lo=1;break;case 1:fn[co++]=rn[uo|fo>>4],uo=(15&fo)<<2,lo=2;break;case 2:fn[co++]=rn[uo|fo>>6],fn[co++]=rn[63&fo],lo=0}co>8191&&((hn||(hn=[])).push(String.fromCharCode.apply(String,fn)),co=0)}return lo&&(fn[co++]=rn[uo],fn[co++]=61,lo===1&&(fn[co++]=61)),hn?(co&&hn.push(String.fromCharCode.apply(String,fn.slice(0,co))),hn.join("")):String.fromCharCode.apply(String,fn.slice(0,co))};var sn="invalid encoding";nn.decode=function(un,Xr,to){for(var uo,hn=to,fn=0,co=0;co<un.length;){var lo=un.charCodeAt(co++);if(lo===61&&fn>1)break;if((lo=on[lo])===void 0)throw Error(sn);switch(fn){case 0:uo=lo,fn=1;break;case 1:Xr[to++]=uo<<2|(48&lo)>>4,uo=lo,fn=2;break;case 2:Xr[to++]=(15&uo)<<4|(60&lo)>>2,uo=lo,fn=3;break;case 3:Xr[to++]=(3&uo)<<6|lo,fn=0}}if(fn===1)throw Error(sn);return to-hn},nn.test=function(un){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(un)}},9211:Mt=>{function st(){this._listeners={}}Mt.exports=st,st.prototype.on=function(nn,rn,on){return(this._listeners[nn]||(this._listeners[nn]=[])).push({fn:rn,ctx:on||this}),this},st.prototype.off=function(nn,rn){if(nn===void 0)this._listeners={};else if(rn===void 0)this._listeners[nn]=[];else for(var on=this._listeners[nn],an=0;an<on.length;)on[an].fn===rn?on.splice(an,1):++an;return this},st.prototype.emit=function(nn){var rn=this._listeners[nn];if(rn){for(var on=[],an=1;an<arguments.length;)on.push(arguments[an++]);for(an=0;an<rn.length;)rn[an].fn.apply(rn[an++].ctx,on)}return this}},945:Mt=>{function st(sn){return typeof Float32Array<"u"?function(){var un=new Float32Array([-0]),Xr=new Uint8Array(un.buffer),to=Xr[3]===128;function uo(lo,fo,ho){un[0]=lo,fo[ho]=Xr[0],fo[ho+1]=Xr[1],fo[ho+2]=Xr[2],fo[ho+3]=Xr[3]}function hn(lo,fo,ho){un[0]=lo,fo[ho]=Xr[3],fo[ho+1]=Xr[2],fo[ho+2]=Xr[1],fo[ho+3]=Xr[0]}function fn(lo,fo){return Xr[0]=lo[fo],Xr[1]=lo[fo+1],Xr[2]=lo[fo+2],Xr[3]=lo[fo+3],un[0]}function co(lo,fo){return Xr[3]=lo[fo],Xr[2]=lo[fo+1],Xr[1]=lo[fo+2],Xr[0]=lo[fo+3],un[0]}sn.writeFloatLE=to?uo:hn,sn.writeFloatBE=to?hn:uo,sn.readFloatLE=to?fn:co,sn.readFloatBE=to?co:fn}():function(){function un(to,uo,hn,fn){var co=uo<0?1:0;if(co&&(uo=-uo),uo===0)to(1/uo>0?0:2147483648,hn,fn);else if(isNaN(uo))to(2143289344,hn,fn);else if(uo>34028234663852886e22)to((co<<31|2139095040)>>>0,hn,fn);else if(uo<11754943508222875e-54)to((co<<31|Math.round(uo/1401298464324817e-60))>>>0,hn,fn);else{var lo=Math.floor(Math.log(uo)/Math.LN2);to((co<<31|lo+127<<23|8388607&Math.round(uo*Math.pow(2,-lo)*8388608))>>>0,hn,fn)}}function Xr(to,uo,hn){var fn=to(uo,hn),co=2*(fn>>31)+1,lo=fn>>>23&255,fo=8388607&fn;return lo===255?fo?NaN:co*(1/0):lo===0?1401298464324817e-60*co*fo:co*Math.pow(2,lo-150)*(fo+8388608)}sn.writeFloatLE=un.bind(null,nn),sn.writeFloatBE=un.bind(null,rn),sn.readFloatLE=Xr.bind(null,on),sn.readFloatBE=Xr.bind(null,an)}(),typeof Float64Array<"u"?function(){var un=new Float64Array([-0]),Xr=new Uint8Array(un.buffer),to=Xr[7]===128;function uo(lo,fo,ho){un[0]=lo,fo[ho]=Xr[0],fo[ho+1]=Xr[1],fo[ho+2]=Xr[2],fo[ho+3]=Xr[3],fo[ho+4]=Xr[4],fo[ho+5]=Xr[5],fo[ho+6]=Xr[6],fo[ho+7]=Xr[7]}function hn(lo,fo,ho){un[0]=lo,fo[ho]=Xr[7],fo[ho+1]=Xr[6],fo[ho+2]=Xr[5],fo[ho+3]=Xr[4],fo[ho+4]=Xr[3],fo[ho+5]=Xr[2],fo[ho+6]=Xr[1],fo[ho+7]=Xr[0]}function fn(lo,fo){return Xr[0]=lo[fo],Xr[1]=lo[fo+1],Xr[2]=lo[fo+2],Xr[3]=lo[fo+3],Xr[4]=lo[fo+4],Xr[5]=lo[fo+5],Xr[6]=lo[fo+6],Xr[7]=lo[fo+7],un[0]}function co(lo,fo){return Xr[7]=lo[fo],Xr[6]=lo[fo+1],Xr[5]=lo[fo+2],Xr[4]=lo[fo+3],Xr[3]=lo[fo+4],Xr[2]=lo[fo+5],Xr[1]=lo[fo+6],Xr[0]=lo[fo+7],un[0]}sn.writeDoubleLE=to?uo:hn,sn.writeDoubleBE=to?hn:uo,sn.readDoubleLE=to?fn:co,sn.readDoubleBE=to?co:fn}():function(){function un(to,uo,hn,fn,co,lo){var fo=fn<0?1:0;if(fo&&(fn=-fn),fn===0)to(0,co,lo+uo),to(1/fn>0?0:2147483648,co,lo+hn);else if(isNaN(fn))to(0,co,lo+uo),to(2146959360,co,lo+hn);else if(fn>17976931348623157e292)to(0,co,lo+uo),to((fo<<31|2146435072)>>>0,co,lo+hn);else{var ho;if(fn<22250738585072014e-324)to((ho=fn/5e-324)>>>0,co,lo+uo),to((fo<<31|ho/4294967296)>>>0,co,lo+hn);else{var mo=Math.floor(Math.log(fn)/Math.LN2);mo===1024&&(mo=1023),to(4503599627370496*(ho=fn*Math.pow(2,-mo))>>>0,co,lo+uo),to((fo<<31|mo+1023<<20|1048576*ho&1048575)>>>0,co,lo+hn)}}}function Xr(to,uo,hn,fn,co){var lo=to(fn,co+uo),fo=to(fn,co+hn),ho=2*(fo>>31)+1,mo=fo>>>20&2047,Uo=4294967296*(1048575&fo)+lo;return mo===2047?Uo?NaN:ho*(1/0):mo===0?5e-324*ho*Uo:ho*Math.pow(2,mo-1075)*(Uo+4503599627370496)}sn.writeDoubleLE=un.bind(null,nn,0,4),sn.writeDoubleBE=un.bind(null,rn,4,0),sn.readDoubleLE=Xr.bind(null,on,0,4),sn.readDoubleBE=Xr.bind(null,an,4,0)}(),sn}function nn(sn,un,Xr){un[Xr]=255&sn,un[Xr+1]=sn>>>8&255,un[Xr+2]=sn>>>16&255,un[Xr+3]=sn>>>24}function rn(sn,un,Xr){un[Xr]=sn>>>24,un[Xr+1]=sn>>>16&255,un[Xr+2]=sn>>>8&255,un[Xr+3]=255&sn}function on(sn,un){return(sn[un]|sn[un+1]<<8|sn[un+2]<<16|sn[un+3]<<24)>>>0}function an(sn,un){return(sn[un]<<24|sn[un+1]<<16|sn[un+2]<<8|sn[un+3])>>>0}Mt.exports=st(st)},7199:module=>{function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(Mt){}return null}module.exports=inquire},6662:Mt=>{Mt.exports=function(st,nn,rn){var on=rn||8192,an=on>>>1,sn=null,un=on;return function(Xr){if(Xr<1||Xr>an)return st(Xr);un+Xr>on&&(sn=st(on),un=0);var to=nn.call(sn,un,un+=Xr);return 7&un&&(un=1+(7|un)),to}}},4997:(Mt,st)=>{var nn=st;nn.length=function(rn){for(var on=0,an=0,sn=0;sn<rn.length;++sn)(an=rn.charCodeAt(sn))<128?on+=1:an<2048?on+=2:(64512&an)==55296&&(64512&rn.charCodeAt(sn+1))==56320?(++sn,on+=4):on+=3;return on},nn.read=function(rn,on,an){if(an-on<1)return"";for(var sn,un=null,Xr=[],to=0;on<an;)(sn=rn[on++])<128?Xr[to++]=sn:sn>191&&sn<224?Xr[to++]=(31&sn)<<6|63&rn[on++]:sn>239&&sn<365?(sn=((7&sn)<<18|(63&rn[on++])<<12|(63&rn[on++])<<6|63&rn[on++])-65536,Xr[to++]=55296+(sn>>10),Xr[to++]=56320+(1023&sn)):Xr[to++]=(15&sn)<<12|(63&rn[on++])<<6|63&rn[on++],to>8191&&((un||(un=[])).push(String.fromCharCode.apply(String,Xr)),to=0);return un?(to&&un.push(String.fromCharCode.apply(String,Xr.slice(0,to))),un.join("")):String.fromCharCode.apply(String,Xr.slice(0,to))},nn.write=function(rn,on,an){for(var sn,un,Xr=an,to=0;to<rn.length;++to)(sn=rn.charCodeAt(to))<128?on[an++]=sn:sn<2048?(on[an++]=sn>>6|192,on[an++]=63&sn|128):(64512&sn)==55296&&(64512&(un=rn.charCodeAt(to+1)))==56320?(sn=65536+((1023&sn)<<10)+(1023&un),++to,on[an++]=sn>>18|240,on[an++]=sn>>12&63|128,on[an++]=sn>>6&63|128,on[an++]=63&sn|128):(on[an++]=sn>>12|224,on[an++]=sn>>6&63|128,on[an++]=63&sn|128);return an-Xr}},3442:(Mt,st)=>{st.__esModule=!0;var nn=function(){function rn(on){if(!on)throw new TypeError("Invalid argument; `value` has no value.");this.value=rn.EMPTY,on&&rn.isGuid(on)&&(this.value=on)}return rn.isGuid=function(on){var an=on.toString();return on&&(on instanceof rn||rn.validator.test(an))},rn.create=function(){return new rn([rn.gen(2),rn.gen(1),rn.gen(1),rn.gen(1),rn.gen(3)].join("-"))},rn.createEmpty=function(){return new rn("emptyguid")},rn.parse=function(on){return new rn(on)},rn.raw=function(){return[rn.gen(2),rn.gen(1),rn.gen(1),rn.gen(1),rn.gen(3)].join("-")},rn.gen=function(on){for(var an="",sn=0;sn<on;sn++)an+=(65536*(1+Math.random())|0).toString(16).substring(1);return an},rn.prototype.equals=function(on){return rn.isGuid(on)&&this.value===on.toString()},rn.prototype.isEmpty=function(){return this.value===rn.EMPTY},rn.prototype.toString=function(){return this.value},rn.prototype.toJSON=function(){return{value:this.value}},rn.validator=new RegExp("^[a-z0-9]{8}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{12}$","i"),rn.EMPTY="00000000-0000-0000-0000-000000000000",rn}();st.Guid=nn},3720:Mt=>{Mt.exports=nn;var st=null;try{st=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function nn(op,ap,sp){this.low=0|op,this.high=0|ap,this.unsigned=!!sp}function rn(op){return(op&&op.__isLong__)===!0}nn.prototype.__isLong__,Object.defineProperty(nn.prototype,"__isLong__",{value:!0}),nn.isLong=rn;var on={},an={};function sn(op,ap){var sp,up,pp;return ap?(pp=0<=(op>>>=0)&&op<256)&&(up=an[op])?up:(sp=Xr(op,(0|op)<0?-1:0,!0),pp&&(an[op]=sp),sp):(pp=-128<=(op|=0)&&op<128)&&(up=on[op])?up:(sp=Xr(op,op<0?-1:0,!1),pp&&(on[op]=sp),sp)}function un(op,ap){if(isNaN(op))return ap?mo:ho;if(ap){if(op<0)return mo;if(op>=co)return np}else{if(op<=-lo)return rp;if(op+1>=lo)return ep}return op<0?un(-op,ap).neg():Xr(op%fn|0,op/fn|0,ap)}function Xr(op,ap,sp){return new nn(op,ap,sp)}nn.fromInt=sn,nn.fromNumber=un,nn.fromBits=Xr;var to=Math.pow;function uo(op,ap,sp){if(op.length===0)throw Error("empty string");if(op==="NaN"||op==="Infinity"||op==="+Infinity"||op==="-Infinity")return ho;if(typeof ap=="number"?(sp=ap,ap=!1):ap=!!ap,(sp=sp||10)<2||36<sp)throw RangeError("radix");var up;if((up=op.indexOf("-"))>0)throw Error("interior hyphen");if(up===0)return uo(op.substring(1),ap,sp).neg();for(var pp=un(to(sp,8)),lp=ho,dp=0;dp<op.length;dp+=8){var cp=Math.min(8,op.length-dp),fp=parseInt(op.substring(dp,dp+cp),sp);if(cp<8){var gp=un(to(sp,cp));lp=lp.mul(gp).add(un(fp))}else lp=(lp=lp.mul(pp)).add(un(fp))}return lp.unsigned=ap,lp}function hn(op,ap){return typeof op=="number"?un(op,ap):typeof op=="string"?uo(op,ap):Xr(op.low,op.high,typeof ap=="boolean"?ap:op.unsigned)}nn.fromString=uo,nn.fromValue=hn;var fn=4294967296,co=fn*fn,lo=co/2,fo=sn(1<<24),ho=sn(0);nn.ZERO=ho;var mo=sn(0,!0);nn.UZERO=mo;var Uo=sn(1);nn.ONE=Uo;var _d=sn(1,!0);nn.UONE=_d;var tp=sn(-1);nn.NEG_ONE=tp;var ep=Xr(-1,2147483647,!1);nn.MAX_VALUE=ep;var np=Xr(-1,-1,!0);nn.MAX_UNSIGNED_VALUE=np;var rp=Xr(0,-2147483648,!1);nn.MIN_VALUE=rp;var ip=nn.prototype;ip.toInt=function(){return this.unsigned?this.low>>>0:this.low},ip.toNumber=function(){return this.unsigned?(this.high>>>0)*fn+(this.low>>>0):this.high*fn+(this.low>>>0)},ip.toString=function(op){if((op=op||10)<2||36<op)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(rp)){var ap=un(op),sp=this.div(ap),up=sp.mul(ap).sub(this);return sp.toString(op)+up.toInt().toString(op)}return"-"+this.neg().toString(op)}for(var pp=un(to(op,6),this.unsigned),lp=this,dp="";;){var cp=lp.div(pp),fp=(lp.sub(cp.mul(pp)).toInt()>>>0).toString(op);if((lp=cp).isZero())return fp+dp;for(;fp.length<6;)fp="0"+fp;dp=""+fp+dp}},ip.getHighBits=function(){return this.high},ip.getHighBitsUnsigned=function(){return this.high>>>0},ip.getLowBits=function(){return this.low},ip.getLowBitsUnsigned=function(){return this.low>>>0},ip.getNumBitsAbs=function(){if(this.isNegative())return this.eq(rp)?64:this.neg().getNumBitsAbs();for(var op=this.high!=0?this.high:this.low,ap=31;ap>0&&!(op&1<<ap);ap--);return this.high!=0?ap+33:ap+1},ip.isZero=function(){return this.high===0&&this.low===0},ip.eqz=ip.isZero,ip.isNegative=function(){return!this.unsigned&&this.high<0},ip.isPositive=function(){return this.unsigned||this.high>=0},ip.isOdd=function(){return(1&this.low)==1},ip.isEven=function(){return(1&this.low)==0},ip.equals=function(op){return rn(op)||(op=hn(op)),(this.unsigned===op.unsigned||this.high>>>31!=1||op.high>>>31!=1)&&this.high===op.high&&this.low===op.low},ip.eq=ip.equals,ip.notEquals=function(op){return!this.eq(op)},ip.neq=ip.notEquals,ip.ne=ip.notEquals,ip.lessThan=function(op){return this.comp(op)<0},ip.lt=ip.lessThan,ip.lessThanOrEqual=function(op){return this.comp(op)<=0},ip.lte=ip.lessThanOrEqual,ip.le=ip.lessThanOrEqual,ip.greaterThan=function(op){return this.comp(op)>0},ip.gt=ip.greaterThan,ip.greaterThanOrEqual=function(op){return this.comp(op)>=0},ip.gte=ip.greaterThanOrEqual,ip.ge=ip.greaterThanOrEqual,ip.compare=function(op){if(rn(op)||(op=hn(op)),this.eq(op))return 0;var ap=this.isNegative(),sp=op.isNegative();return ap&&!sp?-1:!ap&&sp?1:this.unsigned?op.high>>>0>this.high>>>0||op.high===this.high&&op.low>>>0>this.low>>>0?-1:1:this.sub(op).isNegative()?-1:1},ip.comp=ip.compare,ip.negate=function(){return!this.unsigned&&this.eq(rp)?rp:this.not().add(Uo)},ip.neg=ip.negate,ip.add=function(op){rn(op)||(op=hn(op));var ap=this.high>>>16,sp=65535&this.high,up=this.low>>>16,pp=65535&this.low,lp=op.high>>>16,dp=65535&op.high,cp=op.low>>>16,fp=0,gp=0,mp=0,xp=0;return mp+=(xp+=pp+(65535&op.low))>>>16,gp+=(mp+=up+cp)>>>16,fp+=(gp+=sp+dp)>>>16,fp+=ap+lp,Xr((mp&=65535)<<16|(xp&=65535),(fp&=65535)<<16|(gp&=65535),this.unsigned)},ip.subtract=function(op){return rn(op)||(op=hn(op)),this.add(op.neg())},ip.sub=ip.subtract,ip.multiply=function(op){if(this.isZero())return ho;if(rn(op)||(op=hn(op)),st)return Xr(st.mul(this.low,this.high,op.low,op.high),st.get_high(),this.unsigned);if(op.isZero())return ho;if(this.eq(rp))return op.isOdd()?rp:ho;if(op.eq(rp))return this.isOdd()?rp:ho;if(this.isNegative())return op.isNegative()?this.neg().mul(op.neg()):this.neg().mul(op).neg();if(op.isNegative())return this.mul(op.neg()).neg();if(this.lt(fo)&&op.lt(fo))return un(this.toNumber()*op.toNumber(),this.unsigned);var ap=this.high>>>16,sp=65535&this.high,up=this.low>>>16,pp=65535&this.low,lp=op.high>>>16,dp=65535&op.high,cp=op.low>>>16,fp=65535&op.low,gp=0,mp=0,xp=0,_p=0;return xp+=(_p+=pp*fp)>>>16,mp+=(xp+=up*fp)>>>16,xp&=65535,mp+=(xp+=pp*cp)>>>16,gp+=(mp+=sp*fp)>>>16,mp&=65535,gp+=(mp+=up*cp)>>>16,mp&=65535,gp+=(mp+=pp*dp)>>>16,gp+=ap*fp+sp*cp+up*dp+pp*lp,Xr((xp&=65535)<<16|(_p&=65535),(gp&=65535)<<16|(mp&=65535),this.unsigned)},ip.mul=ip.multiply,ip.divide=function(op){if(rn(op)||(op=hn(op)),op.isZero())throw Error("division by zero");var ap,sp,up;if(st)return this.unsigned||this.high!==-2147483648||op.low!==-1||op.high!==-1?Xr((this.unsigned?st.div_u:st.div_s)(this.low,this.high,op.low,op.high),st.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?mo:ho;if(this.unsigned){if(op.unsigned||(op=op.toUnsigned()),op.gt(this))return mo;if(op.gt(this.shru(1)))return _d;up=mo}else{if(this.eq(rp))return op.eq(Uo)||op.eq(tp)?rp:op.eq(rp)?Uo:(ap=this.shr(1).div(op).shl(1)).eq(ho)?op.isNegative()?Uo:tp:(sp=this.sub(op.mul(ap)),up=ap.add(sp.div(op)));if(op.eq(rp))return this.unsigned?mo:ho;if(this.isNegative())return op.isNegative()?this.neg().div(op.neg()):this.neg().div(op).neg();if(op.isNegative())return this.div(op.neg()).neg();up=ho}for(sp=this;sp.gte(op);){ap=Math.max(1,Math.floor(sp.toNumber()/op.toNumber()));for(var pp=Math.ceil(Math.log(ap)/Math.LN2),lp=pp<=48?1:to(2,pp-48),dp=un(ap),cp=dp.mul(op);cp.isNegative()||cp.gt(sp);)cp=(dp=un(ap-=lp,this.unsigned)).mul(op);dp.isZero()&&(dp=Uo),up=up.add(dp),sp=sp.sub(cp)}return up},ip.div=ip.divide,ip.modulo=function(op){return rn(op)||(op=hn(op)),st?Xr((this.unsigned?st.rem_u:st.rem_s)(this.low,this.high,op.low,op.high),st.get_high(),this.unsigned):this.sub(this.div(op).mul(op))},ip.mod=ip.modulo,ip.rem=ip.modulo,ip.not=function(){return Xr(~this.low,~this.high,this.unsigned)},ip.and=function(op){return rn(op)||(op=hn(op)),Xr(this.low&op.low,this.high&op.high,this.unsigned)},ip.or=function(op){return rn(op)||(op=hn(op)),Xr(this.low|op.low,this.high|op.high,this.unsigned)},ip.xor=function(op){return rn(op)||(op=hn(op)),Xr(this.low^op.low,this.high^op.high,this.unsigned)},ip.shiftLeft=function(op){return rn(op)&&(op=op.toInt()),(op&=63)==0?this:op<32?Xr(this.low<<op,this.high<<op|this.low>>>32-op,this.unsigned):Xr(0,this.low<<op-32,this.unsigned)},ip.shl=ip.shiftLeft,ip.shiftRight=function(op){return rn(op)&&(op=op.toInt()),(op&=63)==0?this:op<32?Xr(this.low>>>op|this.high<<32-op,this.high>>op,this.unsigned):Xr(this.high>>op-32,this.high>=0?0:-1,this.unsigned)},ip.shr=ip.shiftRight,ip.shiftRightUnsigned=function(op){if(rn(op)&&(op=op.toInt()),(op&=63)==0)return this;var ap=this.high;return op<32?Xr(this.low>>>op|ap<<32-op,ap>>>op,this.unsigned):Xr(op===32?ap:ap>>>op-32,0,this.unsigned)},ip.shru=ip.shiftRightUnsigned,ip.shr_u=ip.shiftRightUnsigned,ip.toSigned=function(){return this.unsigned?Xr(this.low,this.high,!1):this},ip.toUnsigned=function(){return this.unsigned?this:Xr(this.low,this.high,!0)},ip.toBytes=function(op){return op?this.toBytesLE():this.toBytesBE()},ip.toBytesLE=function(){var op=this.high,ap=this.low;return[255&ap,ap>>>8&255,ap>>>16&255,ap>>>24,255&op,op>>>8&255,op>>>16&255,op>>>24]},ip.toBytesBE=function(){var op=this.high,ap=this.low;return[op>>>24,op>>>16&255,op>>>8&255,255&op,ap>>>24,ap>>>16&255,ap>>>8&255,255&ap]},nn.fromBytes=function(op,ap,sp){return sp?nn.fromBytesLE(op,ap):nn.fromBytesBE(op,ap)},nn.fromBytesLE=function(op,ap){return new nn(op[0]|op[1]<<8|op[2]<<16|op[3]<<24,op[4]|op[5]<<8|op[6]<<16|op[7]<<24,ap)},nn.fromBytesBE=function(op,ap){return new nn(op[4]<<24|op[5]<<16|op[6]<<8|op[7],op[0]<<24|op[1]<<16|op[2]<<8|op[3],ap)}},1446:(Mt,st,nn)=>{var rn,on,an,sn=nn(2100),un=sn.Reader,Xr=sn.Writer,to=sn.util,uo=sn.roots.default||(sn.roots.default={});uo.onnx=((an={}).Version=(rn={},(on=Object.create(rn))[rn[0]="_START_VERSION"]=0,on[rn[1]="IR_VERSION_2017_10_10"]=1,on[rn[2]="IR_VERSION_2017_10_30"]=2,on[rn[3]="IR_VERSION_2017_11_3"]=3,on[rn[4]="IR_VERSION_2019_1_22"]=4,on[rn[5]="IR_VERSION"]=5,on),an.AttributeProto=function(){function hn(fn){if(this.floats=[],this.ints=[],this.strings=[],this.tensors=[],this.graphs=[],fn)for(var co=Object.keys(fn),lo=0;lo<co.length;++lo)fn[co[lo]]!=null&&(this[co[lo]]=fn[co[lo]])}return hn.prototype.name="",hn.prototype.refAttrName="",hn.prototype.docString="",hn.prototype.type=0,hn.prototype.f=0,hn.prototype.i=to.Long?to.Long.fromBits(0,0,!1):0,hn.prototype.s=to.newBuffer([]),hn.prototype.t=null,hn.prototype.g=null,hn.prototype.floats=to.emptyArray,hn.prototype.ints=to.emptyArray,hn.prototype.strings=to.emptyArray,hn.prototype.tensors=to.emptyArray,hn.prototype.graphs=to.emptyArray,hn.create=function(fn){return new hn(fn)},hn.encode=function(fn,co){if(co||(co=Xr.create()),fn.name!=null&&fn.hasOwnProperty("name")&&co.uint32(10).string(fn.name),fn.f!=null&&fn.hasOwnProperty("f")&&co.uint32(21).float(fn.f),fn.i!=null&&fn.hasOwnProperty("i")&&co.uint32(24).int64(fn.i),fn.s!=null&&fn.hasOwnProperty("s")&&co.uint32(34).bytes(fn.s),fn.t!=null&&fn.hasOwnProperty("t")&&uo.onnx.TensorProto.encode(fn.t,co.uint32(42).fork()).ldelim(),fn.g!=null&&fn.hasOwnProperty("g")&&uo.onnx.GraphProto.encode(fn.g,co.uint32(50).fork()).ldelim(),fn.floats!=null&&fn.floats.length){co.uint32(58).fork();for(var lo=0;lo<fn.floats.length;++lo)co.float(fn.floats[lo]);co.ldelim()}if(fn.ints!=null&&fn.ints.length){for(co.uint32(66).fork(),lo=0;lo<fn.ints.length;++lo)co.int64(fn.ints[lo]);co.ldelim()}if(fn.strings!=null&&fn.strings.length)for(lo=0;lo<fn.strings.length;++lo)co.uint32(74).bytes(fn.strings[lo]);if(fn.tensors!=null&&fn.tensors.length)for(lo=0;lo<fn.tensors.length;++lo)uo.onnx.TensorProto.encode(fn.tensors[lo],co.uint32(82).fork()).ldelim();if(fn.graphs!=null&&fn.graphs.length)for(lo=0;lo<fn.graphs.length;++lo)uo.onnx.GraphProto.encode(fn.graphs[lo],co.uint32(90).fork()).ldelim();return fn.docString!=null&&fn.hasOwnProperty("docString")&&co.uint32(106).string(fn.docString),fn.type!=null&&fn.hasOwnProperty("type")&&co.uint32(160).int32(fn.type),fn.refAttrName!=null&&fn.hasOwnProperty("refAttrName")&&co.uint32(170).string(fn.refAttrName),co},hn.encodeDelimited=function(fn,co){return this.encode(fn,co).ldelim()},hn.decode=function(fn,co){fn instanceof un||(fn=un.create(fn));for(var lo=co===void 0?fn.len:fn.pos+co,fo=new uo.onnx.AttributeProto;fn.pos<lo;){var ho=fn.uint32();switch(ho>>>3){case 1:fo.name=fn.string();break;case 21:fo.refAttrName=fn.string();break;case 13:fo.docString=fn.string();break;case 20:fo.type=fn.int32();break;case 2:fo.f=fn.float();break;case 3:fo.i=fn.int64();break;case 4:fo.s=fn.bytes();break;case 5:fo.t=uo.onnx.TensorProto.decode(fn,fn.uint32());break;case 6:fo.g=uo.onnx.GraphProto.decode(fn,fn.uint32());break;case 7:if(fo.floats&&fo.floats.length||(fo.floats=[]),(7&ho)==2)for(var mo=fn.uint32()+fn.pos;fn.pos<mo;)fo.floats.push(fn.float());else fo.floats.push(fn.float());break;case 8:if(fo.ints&&fo.ints.length||(fo.ints=[]),(7&ho)==2)for(mo=fn.uint32()+fn.pos;fn.pos<mo;)fo.ints.push(fn.int64());else fo.ints.push(fn.int64());break;case 9:fo.strings&&fo.strings.length||(fo.strings=[]),fo.strings.push(fn.bytes());break;case 10:fo.tensors&&fo.tensors.length||(fo.tensors=[]),fo.tensors.push(uo.onnx.TensorProto.decode(fn,fn.uint32()));break;case 11:fo.graphs&&fo.graphs.length||(fo.graphs=[]),fo.graphs.push(uo.onnx.GraphProto.decode(fn,fn.uint32()));break;default:fn.skipType(7&ho)}}return fo},hn.decodeDelimited=function(fn){return fn instanceof un||(fn=new un(fn)),this.decode(fn,fn.uint32())},hn.verify=function(fn){if(typeof fn!="object"||fn===null)return"object expected";if(fn.name!=null&&fn.hasOwnProperty("name")&&!to.isString(fn.name))return"name: string expected";if(fn.refAttrName!=null&&fn.hasOwnProperty("refAttrName")&&!to.isString(fn.refAttrName))return"refAttrName: string expected";if(fn.docString!=null&&fn.hasOwnProperty("docString")&&!to.isString(fn.docString))return"docString: string expected";if(fn.type!=null&&fn.hasOwnProperty("type"))switch(fn.type){default:return"type: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:}if(fn.f!=null&&fn.hasOwnProperty("f")&&typeof fn.f!="number")return"f: number expected";if(fn.i!=null&&fn.hasOwnProperty("i")&&!(to.isInteger(fn.i)||fn.i&&to.isInteger(fn.i.low)&&to.isInteger(fn.i.high)))return"i: integer|Long expected";if(fn.s!=null&&fn.hasOwnProperty("s")&&!(fn.s&&typeof fn.s.length=="number"||to.isString(fn.s)))return"s: buffer expected";if(fn.t!=null&&fn.hasOwnProperty("t")&&(lo=uo.onnx.TensorProto.verify(fn.t)))return"t."+lo;if(fn.g!=null&&fn.hasOwnProperty("g")&&(lo=uo.onnx.GraphProto.verify(fn.g)))return"g."+lo;if(fn.floats!=null&&fn.hasOwnProperty("floats")){if(!Array.isArray(fn.floats))return"floats: array expected";for(var co=0;co<fn.floats.length;++co)if(typeof fn.floats[co]!="number")return"floats: number[] expected"}if(fn.ints!=null&&fn.hasOwnProperty("ints")){if(!Array.isArray(fn.ints))return"ints: array expected";for(co=0;co<fn.ints.length;++co)if(!(to.isInteger(fn.ints[co])||fn.ints[co]&&to.isInteger(fn.ints[co].low)&&to.isInteger(fn.ints[co].high)))return"ints: integer|Long[] expected"}if(fn.strings!=null&&fn.hasOwnProperty("strings")){if(!Array.isArray(fn.strings))return"strings: array expected";for(co=0;co<fn.strings.length;++co)if(!(fn.strings[co]&&typeof fn.strings[co].length=="number"||to.isString(fn.strings[co])))return"strings: buffer[] expected"}if(fn.tensors!=null&&fn.hasOwnProperty("tensors")){if(!Array.isArray(fn.tensors))return"tensors: array expected";for(co=0;co<fn.tensors.length;++co)if(lo=uo.onnx.TensorProto.verify(fn.tensors[co]))return"tensors."+lo}if(fn.graphs!=null&&fn.hasOwnProperty("graphs")){if(!Array.isArray(fn.graphs))return"graphs: array expected";for(co=0;co<fn.graphs.length;++co){var lo;if(lo=uo.onnx.GraphProto.verify(fn.graphs[co]))return"graphs."+lo}}return null},hn.fromObject=function(fn){if(fn instanceof uo.onnx.AttributeProto)return fn;var co=new uo.onnx.AttributeProto;switch(fn.name!=null&&(co.name=String(fn.name)),fn.refAttrName!=null&&(co.refAttrName=String(fn.refAttrName)),fn.docString!=null&&(co.docString=String(fn.docString)),fn.type){case"UNDEFINED":case 0:co.type=0;break;case"FLOAT":case 1:co.type=1;break;case"INT":case 2:co.type=2;break;case"STRING":case 3:co.type=3;break;case"TENSOR":case 4:co.type=4;break;case"GRAPH":case 5:co.type=5;break;case"FLOATS":case 6:co.type=6;break;case"INTS":case 7:co.type=7;break;case"STRINGS":case 8:co.type=8;break;case"TENSORS":case 9:co.type=9;break;case"GRAPHS":case 10:co.type=10}if(fn.f!=null&&(co.f=Number(fn.f)),fn.i!=null&&(to.Long?(co.i=to.Long.fromValue(fn.i)).unsigned=!1:typeof fn.i=="string"?co.i=parseInt(fn.i,10):typeof fn.i=="number"?co.i=fn.i:typeof fn.i=="object"&&(co.i=new to.LongBits(fn.i.low>>>0,fn.i.high>>>0).toNumber())),fn.s!=null&&(typeof fn.s=="string"?to.base64.decode(fn.s,co.s=to.newBuffer(to.base64.length(fn.s)),0):fn.s.length&&(co.s=fn.s)),fn.t!=null){if(typeof fn.t!="object")throw TypeError(".onnx.AttributeProto.t: object expected");co.t=uo.onnx.TensorProto.fromObject(fn.t)}if(fn.g!=null){if(typeof fn.g!="object")throw TypeError(".onnx.AttributeProto.g: object expected");co.g=uo.onnx.GraphProto.fromObject(fn.g)}if(fn.floats){if(!Array.isArray(fn.floats))throw TypeError(".onnx.AttributeProto.floats: array expected");co.floats=[];for(var lo=0;lo<fn.floats.length;++lo)co.floats[lo]=Number(fn.floats[lo])}if(fn.ints){if(!Array.isArray(fn.ints))throw TypeError(".onnx.AttributeProto.ints: array expected");for(co.ints=[],lo=0;lo<fn.ints.length;++lo)to.Long?(co.ints[lo]=to.Long.fromValue(fn.ints[lo])).unsigned=!1:typeof fn.ints[lo]=="string"?co.ints[lo]=parseInt(fn.ints[lo],10):typeof fn.ints[lo]=="number"?co.ints[lo]=fn.ints[lo]:typeof fn.ints[lo]=="object"&&(co.ints[lo]=new to.LongBits(fn.ints[lo].low>>>0,fn.ints[lo].high>>>0).toNumber())}if(fn.strings){if(!Array.isArray(fn.strings))throw TypeError(".onnx.AttributeProto.strings: array expected");for(co.strings=[],lo=0;lo<fn.strings.length;++lo)typeof fn.strings[lo]=="string"?to.base64.decode(fn.strings[lo],co.strings[lo]=to.newBuffer(to.base64.length(fn.strings[lo])),0):fn.strings[lo].length&&(co.strings[lo]=fn.strings[lo])}if(fn.tensors){if(!Array.isArray(fn.tensors))throw TypeError(".onnx.AttributeProto.tensors: array expected");for(co.tensors=[],lo=0;lo<fn.tensors.length;++lo){if(typeof fn.tensors[lo]!="object")throw TypeError(".onnx.AttributeProto.tensors: object expected");co.tensors[lo]=uo.onnx.TensorProto.fromObject(fn.tensors[lo])}}if(fn.graphs){if(!Array.isArray(fn.graphs))throw TypeError(".onnx.AttributeProto.graphs: array expected");for(co.graphs=[],lo=0;lo<fn.graphs.length;++lo){if(typeof fn.graphs[lo]!="object")throw TypeError(".onnx.AttributeProto.graphs: object expected");co.graphs[lo]=uo.onnx.GraphProto.fromObject(fn.graphs[lo])}}return co},hn.toObject=function(fn,co){co||(co={});var lo={};if((co.arrays||co.defaults)&&(lo.floats=[],lo.ints=[],lo.strings=[],lo.tensors=[],lo.graphs=[]),co.defaults){if(lo.name="",lo.f=0,to.Long){var fo=new to.Long(0,0,!1);lo.i=co.longs===String?fo.toString():co.longs===Number?fo.toNumber():fo}else lo.i=co.longs===String?"0":0;co.bytes===String?lo.s="":(lo.s=[],co.bytes!==Array&&(lo.s=to.newBuffer(lo.s))),lo.t=null,lo.g=null,lo.docString="",lo.type=co.enums===String?"UNDEFINED":0,lo.refAttrName=""}if(fn.name!=null&&fn.hasOwnProperty("name")&&(lo.name=fn.name),fn.f!=null&&fn.hasOwnProperty("f")&&(lo.f=co.json&&!isFinite(fn.f)?String(fn.f):fn.f),fn.i!=null&&fn.hasOwnProperty("i")&&(typeof fn.i=="number"?lo.i=co.longs===String?String(fn.i):fn.i:lo.i=co.longs===String?to.Long.prototype.toString.call(fn.i):co.longs===Number?new to.LongBits(fn.i.low>>>0,fn.i.high>>>0).toNumber():fn.i),fn.s!=null&&fn.hasOwnProperty("s")&&(lo.s=co.bytes===String?to.base64.encode(fn.s,0,fn.s.length):co.bytes===Array?Array.prototype.slice.call(fn.s):fn.s),fn.t!=null&&fn.hasOwnProperty("t")&&(lo.t=uo.onnx.TensorProto.toObject(fn.t,co)),fn.g!=null&&fn.hasOwnProperty("g")&&(lo.g=uo.onnx.GraphProto.toObject(fn.g,co)),fn.floats&&fn.floats.length){lo.floats=[];for(var ho=0;ho<fn.floats.length;++ho)lo.floats[ho]=co.json&&!isFinite(fn.floats[ho])?String(fn.floats[ho]):fn.floats[ho]}if(fn.ints&&fn.ints.length)for(lo.ints=[],ho=0;ho<fn.ints.length;++ho)typeof fn.ints[ho]=="number"?lo.ints[ho]=co.longs===String?String(fn.ints[ho]):fn.ints[ho]:lo.ints[ho]=co.longs===String?to.Long.prototype.toString.call(fn.ints[ho]):co.longs===Number?new to.LongBits(fn.ints[ho].low>>>0,fn.ints[ho].high>>>0).toNumber():fn.ints[ho];if(fn.strings&&fn.strings.length)for(lo.strings=[],ho=0;ho<fn.strings.length;++ho)lo.strings[ho]=co.bytes===String?to.base64.encode(fn.strings[ho],0,fn.strings[ho].length):co.bytes===Array?Array.prototype.slice.call(fn.strings[ho]):fn.strings[ho];if(fn.tensors&&fn.tensors.length)for(lo.tensors=[],ho=0;ho<fn.tensors.length;++ho)lo.tensors[ho]=uo.onnx.TensorProto.toObject(fn.tensors[ho],co);if(fn.graphs&&fn.graphs.length)for(lo.graphs=[],ho=0;ho<fn.graphs.length;++ho)lo.graphs[ho]=uo.onnx.GraphProto.toObject(fn.graphs[ho],co);return fn.docString!=null&&fn.hasOwnProperty("docString")&&(lo.docString=fn.docString),fn.type!=null&&fn.hasOwnProperty("type")&&(lo.type=co.enums===String?uo.onnx.AttributeProto.AttributeType[fn.type]:fn.type),fn.refAttrName!=null&&fn.hasOwnProperty("refAttrName")&&(lo.refAttrName=fn.refAttrName),lo},hn.prototype.toJSON=function(){return this.constructor.toObject(this,sn.util.toJSONOptions)},hn.AttributeType=function(){var fn={},co=Object.create(fn);return co[fn[0]="UNDEFINED"]=0,co[fn[1]="FLOAT"]=1,co[fn[2]="INT"]=2,co[fn[3]="STRING"]=3,co[fn[4]="TENSOR"]=4,co[fn[5]="GRAPH"]=5,co[fn[6]="FLOATS"]=6,co[fn[7]="INTS"]=7,co[fn[8]="STRINGS"]=8,co[fn[9]="TENSORS"]=9,co[fn[10]="GRAPHS"]=10,co}(),hn}(),an.ValueInfoProto=function(){function hn(fn){if(fn)for(var co=Object.keys(fn),lo=0;lo<co.length;++lo)fn[co[lo]]!=null&&(this[co[lo]]=fn[co[lo]])}return hn.prototype.name="",hn.prototype.type=null,hn.prototype.docString="",hn.create=function(fn){return new hn(fn)},hn.encode=function(fn,co){return co||(co=Xr.create()),fn.name!=null&&fn.hasOwnProperty("name")&&co.uint32(10).string(fn.name),fn.type!=null&&fn.hasOwnProperty("type")&&uo.onnx.TypeProto.encode(fn.type,co.uint32(18).fork()).ldelim(),fn.docString!=null&&fn.hasOwnProperty("docString")&&co.uint32(26).string(fn.docString),co},hn.encodeDelimited=function(fn,co){return this.encode(fn,co).ldelim()},hn.decode=function(fn,co){fn instanceof un||(fn=un.create(fn));for(var lo=co===void 0?fn.len:fn.pos+co,fo=new uo.onnx.ValueInfoProto;fn.pos<lo;){var ho=fn.uint32();switch(ho>>>3){case 1:fo.name=fn.string();break;case 2:fo.type=uo.onnx.TypeProto.decode(fn,fn.uint32());break;case 3:fo.docString=fn.string();break;default:fn.skipType(7&ho)}}return fo},hn.decodeDelimited=function(fn){return fn instanceof un||(fn=new un(fn)),this.decode(fn,fn.uint32())},hn.verify=function(fn){if(typeof fn!="object"||fn===null)return"object expected";if(fn.name!=null&&fn.hasOwnProperty("name")&&!to.isString(fn.name))return"name: string expected";if(fn.type!=null&&fn.hasOwnProperty("type")){var co=uo.onnx.TypeProto.verify(fn.type);if(co)return"type."+co}return fn.docString!=null&&fn.hasOwnProperty("docString")&&!to.isString(fn.docString)?"docString: string expected":null},hn.fromObject=function(fn){if(fn instanceof uo.onnx.ValueInfoProto)return fn;var co=new uo.onnx.ValueInfoProto;if(fn.name!=null&&(co.name=String(fn.name)),fn.type!=null){if(typeof fn.type!="object")throw TypeError(".onnx.ValueInfoProto.type: object expected");co.type=uo.onnx.TypeProto.fromObject(fn.type)}return fn.docString!=null&&(co.docString=String(fn.docString)),co},hn.toObject=function(fn,co){co||(co={});var lo={};return co.defaults&&(lo.name="",lo.type=null,lo.docString=""),fn.name!=null&&fn.hasOwnProperty("name")&&(lo.name=fn.name),fn.type!=null&&fn.hasOwnProperty("type")&&(lo.type=uo.onnx.TypeProto.toObject(fn.type,co)),fn.docString!=null&&fn.hasOwnProperty("docString")&&(lo.docString=fn.docString),lo},hn.prototype.toJSON=function(){return this.constructor.toObject(this,sn.util.toJSONOptions)},hn}(),an.NodeProto=function(){function hn(fn){if(this.input=[],this.output=[],this.attribute=[],fn)for(var co=Object.keys(fn),lo=0;lo<co.length;++lo)fn[co[lo]]!=null&&(this[co[lo]]=fn[co[lo]])}return hn.prototype.input=to.emptyArray,hn.prototype.output=to.emptyArray,hn.prototype.name="",hn.prototype.opType="",hn.prototype.domain="",hn.prototype.attribute=to.emptyArray,hn.prototype.docString="",hn.create=function(fn){return new hn(fn)},hn.encode=function(fn,co){if(co||(co=Xr.create()),fn.input!=null&&fn.input.length)for(var lo=0;lo<fn.input.length;++lo)co.uint32(10).string(fn.input[lo]);if(fn.output!=null&&fn.output.length)for(lo=0;lo<fn.output.length;++lo)co.uint32(18).string(fn.output[lo]);if(fn.name!=null&&fn.hasOwnProperty("name")&&co.uint32(26).string(fn.name),fn.opType!=null&&fn.hasOwnProperty("opType")&&co.uint32(34).string(fn.opType),fn.attribute!=null&&fn.attribute.length)for(lo=0;lo<fn.attribute.length;++lo)uo.onnx.AttributeProto.encode(fn.attribute[lo],co.uint32(42).fork()).ldelim();return fn.docString!=null&&fn.hasOwnProperty("docString")&&co.uint32(50).string(fn.docString),fn.domain!=null&&fn.hasOwnProperty("domain")&&co.uint32(58).string(fn.domain),co},hn.encodeDelimited=function(fn,co){return this.encode(fn,co).ldelim()},hn.decode=function(fn,co){fn instanceof un||(fn=un.create(fn));for(var lo=co===void 0?fn.len:fn.pos+co,fo=new uo.onnx.NodeProto;fn.pos<lo;){var ho=fn.uint32();switch(ho>>>3){case 1:fo.input&&fo.input.length||(fo.input=[]),fo.input.push(fn.string());break;case 2:fo.output&&fo.output.length||(fo.output=[]),fo.output.push(fn.string());break;case 3:fo.name=fn.string();break;case 4:fo.opType=fn.string();break;case 7:fo.domain=fn.string();break;case 5:fo.attribute&&fo.attribute.length||(fo.attribute=[]),fo.attribute.push(uo.onnx.AttributeProto.decode(fn,fn.uint32()));break;case 6:fo.docString=fn.string();break;default:fn.skipType(7&ho)}}return fo},hn.decodeDelimited=function(fn){return fn instanceof un||(fn=new un(fn)),this.decode(fn,fn.uint32())},hn.verify=function(fn){if(typeof fn!="object"||fn===null)return"object expected";if(fn.input!=null&&fn.hasOwnProperty("input")){if(!Array.isArray(fn.input))return"input: array expected";for(var co=0;co<fn.input.length;++co)if(!to.isString(fn.input[co]))return"input: string[] expected"}if(fn.output!=null&&fn.hasOwnProperty("output")){if(!Array.isArray(fn.output))return"output: array expected";for(co=0;co<fn.output.length;++co)if(!to.isString(fn.output[co]))return"output: string[] expected"}if(fn.name!=null&&fn.hasOwnProperty("name")&&!to.isString(fn.name))return"name: string expected";if(fn.opType!=null&&fn.hasOwnProperty("opType")&&!to.isString(fn.opType))return"opType: string expected";if(fn.domain!=null&&fn.hasOwnProperty("domain")&&!to.isString(fn.domain))return"domain: string expected";if(fn.attribute!=null&&fn.hasOwnProperty("attribute")){if(!Array.isArray(fn.attribute))return"attribute: array expected";for(co=0;co<fn.attribute.length;++co){var lo=uo.onnx.AttributeProto.verify(fn.attribute[co]);if(lo)return"attribute."+lo}}return fn.docString!=null&&fn.hasOwnProperty("docString")&&!to.isString(fn.docString)?"docString: string expected":null},hn.fromObject=function(fn){if(fn instanceof uo.onnx.NodeProto)return fn;var co=new uo.onnx.NodeProto;if(fn.input){if(!Array.isArray(fn.input))throw TypeError(".onnx.NodeProto.input: array expected");co.input=[];for(var lo=0;lo<fn.input.length;++lo)co.input[lo]=String(fn.input[lo])}if(fn.output){if(!Array.isArray(fn.output))throw TypeError(".onnx.NodeProto.output: array expected");for(co.output=[],lo=0;lo<fn.output.length;++lo)co.output[lo]=String(fn.output[lo])}if(fn.name!=null&&(co.name=String(fn.name)),fn.opType!=null&&(co.opType=String(fn.opType)),fn.domain!=null&&(co.domain=String(fn.domain)),fn.attribute){if(!Array.isArray(fn.attribute))throw TypeError(".onnx.NodeProto.attribute: array expected");for(co.attribute=[],lo=0;lo<fn.attribute.length;++lo){if(typeof fn.attribute[lo]!="object")throw TypeError(".onnx.NodeProto.attribute: object expected");co.attribute[lo]=uo.onnx.AttributeProto.fromObject(fn.attribute[lo])}}return fn.docString!=null&&(co.docString=String(fn.docString)),co},hn.toObject=function(fn,co){co||(co={});var lo={};if((co.arrays||co.defaults)&&(lo.input=[],lo.output=[],lo.attribute=[]),co.defaults&&(lo.name="",lo.opType="",lo.docString="",lo.domain=""),fn.input&&fn.input.length){lo.input=[];for(var fo=0;fo<fn.input.length;++fo)lo.input[fo]=fn.input[fo]}if(fn.output&&fn.output.length)for(lo.output=[],fo=0;fo<fn.output.length;++fo)lo.output[fo]=fn.output[fo];if(fn.name!=null&&fn.hasOwnProperty("name")&&(lo.name=fn.name),fn.opType!=null&&fn.hasOwnProperty("opType")&&(lo.opType=fn.opType),fn.attribute&&fn.attribute.length)for(lo.attribute=[],fo=0;fo<fn.attribute.length;++fo)lo.attribute[fo]=uo.onnx.AttributeProto.toObject(fn.attribute[fo],co);return fn.docString!=null&&fn.hasOwnProperty("docString")&&(lo.docString=fn.docString),fn.domain!=null&&fn.hasOwnProperty("domain")&&(lo.domain=fn.domain),lo},hn.prototype.toJSON=function(){return this.constructor.toObject(this,sn.util.toJSONOptions)},hn}(),an.ModelProto=function(){function hn(fn){if(this.opsetImport=[],this.metadataProps=[],fn)for(var co=Object.keys(fn),lo=0;lo<co.length;++lo)fn[co[lo]]!=null&&(this[co[lo]]=fn[co[lo]])}return hn.prototype.irVersion=to.Long?to.Long.fromBits(0,0,!1):0,hn.prototype.opsetImport=to.emptyArray,hn.prototype.producerName="",hn.prototype.producerVersion="",hn.prototype.domain="",hn.prototype.modelVersion=to.Long?to.Long.fromBits(0,0,!1):0,hn.prototype.docString="",hn.prototype.graph=null,hn.prototype.metadataProps=to.emptyArray,hn.create=function(fn){return new hn(fn)},hn.encode=function(fn,co){if(co||(co=Xr.create()),fn.irVersion!=null&&fn.hasOwnProperty("irVersion")&&co.uint32(8).int64(fn.irVersion),fn.producerName!=null&&fn.hasOwnProperty("producerName")&&co.uint32(18).string(fn.producerName),fn.producerVersion!=null&&fn.hasOwnProperty("producerVersion")&&co.uint32(26).string(fn.producerVersion),fn.domain!=null&&fn.hasOwnProperty("domain")&&co.uint32(34).string(fn.domain),fn.modelVersion!=null&&fn.hasOwnProperty("modelVersion")&&co.uint32(40).int64(fn.modelVersion),fn.docString!=null&&fn.hasOwnProperty("docString")&&co.uint32(50).string(fn.docString),fn.graph!=null&&fn.hasOwnProperty("graph")&&uo.onnx.GraphProto.encode(fn.graph,co.uint32(58).fork()).ldelim(),fn.opsetImport!=null&&fn.opsetImport.length)for(var lo=0;lo<fn.opsetImport.length;++lo)uo.onnx.OperatorSetIdProto.encode(fn.opsetImport[lo],co.uint32(66).fork()).ldelim();if(fn.metadataProps!=null&&fn.metadataProps.length)for(lo=0;lo<fn.metadataProps.length;++lo)uo.onnx.StringStringEntryProto.encode(fn.metadataProps[lo],co.uint32(114).fork()).ldelim();return co},hn.encodeDelimited=function(fn,co){return this.encode(fn,co).ldelim()},hn.decode=function(fn,co){fn instanceof un||(fn=un.create(fn));for(var lo=co===void 0?fn.len:fn.pos+co,fo=new uo.onnx.ModelProto;fn.pos<lo;){var ho=fn.uint32();switch(ho>>>3){case 1:fo.irVersion=fn.int64();break;case 8:fo.opsetImport&&fo.opsetImport.length||(fo.opsetImport=[]),fo.opsetImport.push(uo.onnx.OperatorSetIdProto.decode(fn,fn.uint32()));break;case 2:fo.producerName=fn.string();break;case 3:fo.producerVersion=fn.string();break;case 4:fo.domain=fn.string();break;case 5:fo.modelVersion=fn.int64();break;case 6:fo.docString=fn.string();break;case 7:fo.graph=uo.onnx.GraphProto.decode(fn,fn.uint32());break;case 14:fo.metadataProps&&fo.metadataProps.length||(fo.metadataProps=[]),fo.metadataProps.push(uo.onnx.StringStringEntryProto.decode(fn,fn.uint32()));break;default:fn.skipType(7&ho)}}return fo},hn.decodeDelimited=function(fn){return fn instanceof un||(fn=new un(fn)),this.decode(fn,fn.uint32())},hn.verify=function(fn){if(typeof fn!="object"||fn===null)return"object expected";if(fn.irVersion!=null&&fn.hasOwnProperty("irVersion")&&!(to.isInteger(fn.irVersion)||fn.irVersion&&to.isInteger(fn.irVersion.low)&&to.isInteger(fn.irVersion.high)))return"irVersion: integer|Long expected";if(fn.opsetImport!=null&&fn.hasOwnProperty("opsetImport")){if(!Array.isArray(fn.opsetImport))return"opsetImport: array expected";for(var co=0;co<fn.opsetImport.length;++co)if(lo=uo.onnx.OperatorSetIdProto.verify(fn.opsetImport[co]))return"opsetImport."+lo}if(fn.producerName!=null&&fn.hasOwnProperty("producerName")&&!to.isString(fn.producerName))return"producerName: string expected";if(fn.producerVersion!=null&&fn.hasOwnProperty("producerVersion")&&!to.isString(fn.producerVersion))return"producerVersion: string expected";if(fn.domain!=null&&fn.hasOwnProperty("domain")&&!to.isString(fn.domain))return"domain: string expected";if(fn.modelVersion!=null&&fn.hasOwnProperty("modelVersion")&&!(to.isInteger(fn.modelVersion)||fn.modelVersion&&to.isInteger(fn.modelVersion.low)&&to.isInteger(fn.modelVersion.high)))return"modelVersion: integer|Long expected";if(fn.docString!=null&&fn.hasOwnProperty("docString")&&!to.isString(fn.docString))return"docString: string expected";if(fn.graph!=null&&fn.hasOwnProperty("graph")&&(lo=uo.onnx.GraphProto.verify(fn.graph)))return"graph."+lo;if(fn.metadataProps!=null&&fn.hasOwnProperty("metadataProps")){if(!Array.isArray(fn.metadataProps))return"metadataProps: array expected";for(co=0;co<fn.metadataProps.length;++co){var lo;if(lo=uo.onnx.StringStringEntryProto.verify(fn.metadataProps[co]))return"metadataProps."+lo}}return null},hn.fromObject=function(fn){if(fn instanceof uo.onnx.ModelProto)return fn;var co=new uo.onnx.ModelProto;if(fn.irVersion!=null&&(to.Long?(co.irVersion=to.Long.fromValue(fn.irVersion)).unsigned=!1:typeof fn.irVersion=="string"?co.irVersion=parseInt(fn.irVersion,10):typeof fn.irVersion=="number"?co.irVersion=fn.irVersion:typeof fn.irVersion=="object"&&(co.irVersion=new to.LongBits(fn.irVersion.low>>>0,fn.irVersion.high>>>0).toNumber())),fn.opsetImport){if(!Array.isArray(fn.opsetImport))throw TypeError(".onnx.ModelProto.opsetImport: array expected");co.opsetImport=[];for(var lo=0;lo<fn.opsetImport.length;++lo){if(typeof fn.opsetImport[lo]!="object")throw TypeError(".onnx.ModelProto.opsetImport: object expected");co.opsetImport[lo]=uo.onnx.OperatorSetIdProto.fromObject(fn.opsetImport[lo])}}if(fn.producerName!=null&&(co.producerName=String(fn.producerName)),fn.producerVersion!=null&&(co.producerVersion=String(fn.producerVersion)),fn.domain!=null&&(co.domain=String(fn.domain)),fn.modelVersion!=null&&(to.Long?(co.modelVersion=to.Long.fromValue(fn.modelVersion)).unsigned=!1:typeof fn.modelVersion=="string"?co.modelVersion=parseInt(fn.modelVersion,10):typeof fn.modelVersion=="number"?co.modelVersion=fn.modelVersion:typeof fn.modelVersion=="object"&&(co.modelVersion=new to.LongBits(fn.modelVersion.low>>>0,fn.modelVersion.high>>>0).toNumber())),fn.docString!=null&&(co.docString=String(fn.docString)),fn.graph!=null){if(typeof fn.graph!="object")throw TypeError(".onnx.ModelProto.graph: object expected");co.graph=uo.onnx.GraphProto.fromObject(fn.graph)}if(fn.metadataProps){if(!Array.isArray(fn.metadataProps))throw TypeError(".onnx.ModelProto.metadataProps: array expected");for(co.metadataProps=[],lo=0;lo<fn.metadataProps.length;++lo){if(typeof fn.metadataProps[lo]!="object")throw TypeError(".onnx.ModelProto.metadataProps: object expected");co.metadataProps[lo]=uo.onnx.StringStringEntryProto.fromObject(fn.metadataProps[lo])}}return co},hn.toObject=function(fn,co){co||(co={});var lo={};if((co.arrays||co.defaults)&&(lo.opsetImport=[],lo.metadataProps=[]),co.defaults){if(to.Long){var fo=new to.Long(0,0,!1);lo.irVersion=co.longs===String?fo.toString():co.longs===Number?fo.toNumber():fo}else lo.irVersion=co.longs===String?"0":0;lo.producerName="",lo.producerVersion="",lo.domain="",to.Long?(fo=new to.Long(0,0,!1),lo.modelVersion=co.longs===String?fo.toString():co.longs===Number?fo.toNumber():fo):lo.modelVersion=co.longs===String?"0":0,lo.docString="",lo.graph=null}if(fn.irVersion!=null&&fn.hasOwnProperty("irVersion")&&(typeof fn.irVersion=="number"?lo.irVersion=co.longs===String?String(fn.irVersion):fn.irVersion:lo.irVersion=co.longs===String?to.Long.prototype.toString.call(fn.irVersion):co.longs===Number?new to.LongBits(fn.irVersion.low>>>0,fn.irVersion.high>>>0).toNumber():fn.irVersion),fn.producerName!=null&&fn.hasOwnProperty("producerName")&&(lo.producerName=fn.producerName),fn.producerVersion!=null&&fn.hasOwnProperty("producerVersion")&&(lo.producerVersion=fn.producerVersion),fn.domain!=null&&fn.hasOwnProperty("domain")&&(lo.domain=fn.domain),fn.modelVersion!=null&&fn.hasOwnProperty("modelVersion")&&(typeof fn.modelVersion=="number"?lo.modelVersion=co.longs===String?String(fn.modelVersion):fn.modelVersion:lo.modelVersion=co.longs===String?to.Long.prototype.toString.call(fn.modelVersion):co.longs===Number?new to.LongBits(fn.modelVersion.low>>>0,fn.modelVersion.high>>>0).toNumber():fn.modelVersion),fn.docString!=null&&fn.hasOwnProperty("docString")&&(lo.docString=fn.docString),fn.graph!=null&&fn.hasOwnProperty("graph")&&(lo.graph=uo.onnx.GraphProto.toObject(fn.graph,co)),fn.opsetImport&&fn.opsetImport.length){lo.opsetImport=[];for(var ho=0;ho<fn.opsetImport.length;++ho)lo.opsetImport[ho]=uo.onnx.OperatorSetIdProto.toObject(fn.opsetImport[ho],co)}if(fn.metadataProps&&fn.metadataProps.length)for(lo.metadataProps=[],ho=0;ho<fn.metadataProps.length;++ho)lo.metadataProps[ho]=uo.onnx.StringStringEntryProto.toObject(fn.metadataProps[ho],co);return lo},hn.prototype.toJSON=function(){return this.constructor.toObject(this,sn.util.toJSONOptions)},hn}(),an.StringStringEntryProto=function(){function hn(fn){if(fn)for(var co=Object.keys(fn),lo=0;lo<co.length;++lo)fn[co[lo]]!=null&&(this[co[lo]]=fn[co[lo]])}return hn.prototype.key="",hn.prototype.value="",hn.create=function(fn){return new hn(fn)},hn.encode=function(fn,co){return co||(co=Xr.create()),fn.key!=null&&fn.hasOwnProperty("key")&&co.uint32(10).string(fn.key),fn.value!=null&&fn.hasOwnProperty("value")&&co.uint32(18).string(fn.value),co},hn.encodeDelimited=function(fn,co){return this.encode(fn,co).ldelim()},hn.decode=function(fn,co){fn instanceof un||(fn=un.create(fn));for(var lo=co===void 0?fn.len:fn.pos+co,fo=new uo.onnx.StringStringEntryProto;fn.pos<lo;){var ho=fn.uint32();switch(ho>>>3){case 1:fo.key=fn.string();break;case 2:fo.value=fn.string();break;default:fn.skipType(7&ho)}}return fo},hn.decodeDelimited=function(fn){return fn instanceof un||(fn=new un(fn)),this.decode(fn,fn.uint32())},hn.verify=function(fn){return typeof fn!="object"||fn===null?"object expected":fn.key!=null&&fn.hasOwnProperty("key")&&!to.isString(fn.key)?"key: string expected":fn.value!=null&&fn.hasOwnProperty("value")&&!to.isString(fn.value)?"value: string expected":null},hn.fromObject=function(fn){if(fn instanceof uo.onnx.StringStringEntryProto)return fn;var co=new uo.onnx.StringStringEntryProto;return fn.key!=null&&(co.key=String(fn.key)),fn.value!=null&&(co.value=String(fn.value)),co},hn.toObject=function(fn,co){co||(co={});var lo={};return co.defaults&&(lo.key="",lo.value=""),fn.key!=null&&fn.hasOwnProperty("key")&&(lo.key=fn.key),fn.value!=null&&fn.hasOwnProperty("value")&&(lo.value=fn.value),lo},hn.prototype.toJSON=function(){return this.constructor.toObject(this,sn.util.toJSONOptions)},hn}(),an.TensorAnnotation=function(){function hn(fn){if(this.quantParameterTensorNames=[],fn)for(var co=Object.keys(fn),lo=0;lo<co.length;++lo)fn[co[lo]]!=null&&(this[co[lo]]=fn[co[lo]])}return hn.prototype.tensorName="",hn.prototype.quantParameterTensorNames=to.emptyArray,hn.create=function(fn){return new hn(fn)},hn.encode=function(fn,co){if(co||(co=Xr.create()),fn.tensorName!=null&&fn.hasOwnProperty("tensorName")&&co.uint32(10).string(fn.tensorName),fn.quantParameterTensorNames!=null&&fn.quantParameterTensorNames.length)for(var lo=0;lo<fn.quantParameterTensorNames.length;++lo)uo.onnx.StringStringEntryProto.encode(fn.quantParameterTensorNames[lo],co.uint32(18).fork()).ldelim();return co},hn.encodeDelimited=function(fn,co){return this.encode(fn,co).ldelim()},hn.decode=function(fn,co){fn instanceof un||(fn=un.create(fn));for(var lo=co===void 0?fn.len:fn.pos+co,fo=new uo.onnx.TensorAnnotation;fn.pos<lo;){var ho=fn.uint32();switch(ho>>>3){case 1:fo.tensorName=fn.string();break;case 2:fo.quantParameterTensorNames&&fo.quantParameterTensorNames.length||(fo.quantParameterTensorNames=[]),fo.quantParameterTensorNames.push(uo.onnx.StringStringEntryProto.decode(fn,fn.uint32()));break;default:fn.skipType(7&ho)}}return fo},hn.decodeDelimited=function(fn){return fn instanceof un||(fn=new un(fn)),this.decode(fn,fn.uint32())},hn.verify=function(fn){if(typeof fn!="object"||fn===null)return"object expected";if(fn.tensorName!=null&&fn.hasOwnProperty("tensorName")&&!to.isString(fn.tensorName))return"tensorName: string expected";if(fn.quantParameterTensorNames!=null&&fn.hasOwnProperty("quantParameterTensorNames")){if(!Array.isArray(fn.quantParameterTensorNames))return"quantParameterTensorNames: array expected";for(var co=0;co<fn.quantParameterTensorNames.length;++co){var lo=uo.onnx.StringStringEntryProto.verify(fn.quantParameterTensorNames[co]);if(lo)return"quantParameterTensorNames."+lo}}return null},hn.fromObject=function(fn){if(fn instanceof uo.onnx.TensorAnnotation)return fn;var co=new uo.onnx.TensorAnnotation;if(fn.tensorName!=null&&(co.tensorName=String(fn.tensorName)),fn.quantParameterTensorNames){if(!Array.isArray(fn.quantParameterTensorNames))throw TypeError(".onnx.TensorAnnotation.quantParameterTensorNames: array expected");co.quantParameterTensorNames=[];for(var lo=0;lo<fn.quantParameterTensorNames.length;++lo){if(typeof fn.quantParameterTensorNames[lo]!="object")throw TypeError(".onnx.TensorAnnotation.quantParameterTensorNames: object expected");co.quantParameterTensorNames[lo]=uo.onnx.StringStringEntryProto.fromObject(fn.quantParameterTensorNames[lo])}}return co},hn.toObject=function(fn,co){co||(co={});var lo={};if((co.arrays||co.defaults)&&(lo.quantParameterTensorNames=[]),co.defaults&&(lo.tensorName=""),fn.tensorName!=null&&fn.hasOwnProperty("tensorName")&&(lo.tensorName=fn.tensorName),fn.quantParameterTensorNames&&fn.quantParameterTensorNames.length){lo.quantParameterTensorNames=[];for(var fo=0;fo<fn.quantParameterTensorNames.length;++fo)lo.quantParameterTensorNames[fo]=uo.onnx.StringStringEntryProto.toObject(fn.quantParameterTensorNames[fo],co)}return lo},hn.prototype.toJSON=function(){return this.constructor.toObject(this,sn.util.toJSONOptions)},hn}(),an.GraphProto=function(){function hn(fn){if(this.node=[],this.initializer=[],this.input=[],this.output=[],this.valueInfo=[],this.quantizationAnnotation=[],fn)for(var co=Object.keys(fn),lo=0;lo<co.length;++lo)fn[co[lo]]!=null&&(this[co[lo]]=fn[co[lo]])}return hn.prototype.node=to.emptyArray,hn.prototype.name="",hn.prototype.initializer=to.emptyArray,hn.prototype.docString="",hn.prototype.input=to.emptyArray,hn.prototype.output=to.emptyArray,hn.prototype.valueInfo=to.emptyArray,hn.prototype.quantizationAnnotation=to.emptyArray,hn.create=function(fn){return new hn(fn)},hn.encode=function(fn,co){if(co||(co=Xr.create()),fn.node!=null&&fn.node.length)for(var lo=0;lo<fn.node.length;++lo)uo.onnx.NodeProto.encode(fn.node[lo],co.uint32(10).fork()).ldelim();if(fn.name!=null&&fn.hasOwnProperty("name")&&co.uint32(18).string(fn.name),fn.initializer!=null&&fn.initializer.length)for(lo=0;lo<fn.initializer.length;++lo)uo.onnx.TensorProto.encode(fn.initializer[lo],co.uint32(42).fork()).ldelim();if(fn.docString!=null&&fn.hasOwnProperty("docString")&&co.uint32(82).string(fn.docString),fn.input!=null&&fn.input.length)for(lo=0;lo<fn.input.length;++lo)uo.onnx.ValueInfoProto.encode(fn.input[lo],co.uint32(90).fork()).ldelim();if(fn.output!=null&&fn.output.length)for(lo=0;lo<fn.output.length;++lo)uo.onnx.ValueInfoProto.encode(fn.output[lo],co.uint32(98).fork()).ldelim();if(fn.valueInfo!=null&&fn.valueInfo.length)for(lo=0;lo<fn.valueInfo.length;++lo)uo.onnx.ValueInfoProto.encode(fn.valueInfo[lo],co.uint32(106).fork()).ldelim();if(fn.quantizationAnnotation!=null&&fn.quantizationAnnotation.length)for(lo=0;lo<fn.quantizationAnnotation.length;++lo)uo.onnx.TensorAnnotation.encode(fn.quantizationAnnotation[lo],co.uint32(114).fork()).ldelim();return co},hn.encodeDelimited=function(fn,co){return this.encode(fn,co).ldelim()},hn.decode=function(fn,co){fn instanceof un||(fn=un.create(fn));for(var lo=co===void 0?fn.len:fn.pos+co,fo=new uo.onnx.GraphProto;fn.pos<lo;){var ho=fn.uint32();switch(ho>>>3){case 1:fo.node&&fo.node.length||(fo.node=[]),fo.node.push(uo.onnx.NodeProto.decode(fn,fn.uint32()));break;case 2:fo.name=fn.string();break;case 5:fo.initializer&&fo.initializer.length||(fo.initializer=[]),fo.initializer.push(uo.onnx.TensorProto.decode(fn,fn.uint32()));break;case 10:fo.docString=fn.string();break;case 11:fo.input&&fo.input.length||(fo.input=[]),fo.input.push(uo.onnx.ValueInfoProto.decode(fn,fn.uint32()));break;case 12:fo.output&&fo.output.length||(fo.output=[]),fo.output.push(uo.onnx.ValueInfoProto.decode(fn,fn.uint32()));break;case 13:fo.valueInfo&&fo.valueInfo.length||(fo.valueInfo=[]),fo.valueInfo.push(uo.onnx.ValueInfoProto.decode(fn,fn.uint32()));break;case 14:fo.quantizationAnnotation&&fo.quantizationAnnotation.length||(fo.quantizationAnnotation=[]),fo.quantizationAnnotation.push(uo.onnx.TensorAnnotation.decode(fn,fn.uint32()));break;default:fn.skipType(7&ho)}}return fo},hn.decodeDelimited=function(fn){return fn instanceof un||(fn=new un(fn)),this.decode(fn,fn.uint32())},hn.verify=function(fn){if(typeof fn!="object"||fn===null)return"object expected";if(fn.node!=null&&fn.hasOwnProperty("node")){if(!Array.isArray(fn.node))return"node: array expected";for(var co=0;co<fn.node.length;++co)if(lo=uo.onnx.NodeProto.verify(fn.node[co]))return"node."+lo}if(fn.name!=null&&fn.hasOwnProperty("name")&&!to.isString(fn.name))return"name: string expected";if(fn.initializer!=null&&fn.hasOwnProperty("initializer")){if(!Array.isArray(fn.initializer))return"initializer: array expected";for(co=0;co<fn.initializer.length;++co)if(lo=uo.onnx.TensorProto.verify(fn.initializer[co]))return"initializer."+lo}if(fn.docString!=null&&fn.hasOwnProperty("docString")&&!to.isString(fn.docString))return"docString: string expected";if(fn.input!=null&&fn.hasOwnProperty("input")){if(!Array.isArray(fn.input))return"input: array expected";for(co=0;co<fn.input.length;++co)if(lo=uo.onnx.ValueInfoProto.verify(fn.input[co]))return"input."+lo}if(fn.output!=null&&fn.hasOwnProperty("output")){if(!Array.isArray(fn.output))return"output: array expected";for(co=0;co<fn.output.length;++co)if(lo=uo.onnx.ValueInfoProto.verify(fn.output[co]))return"output."+lo}if(fn.valueInfo!=null&&fn.hasOwnProperty("valueInfo")){if(!Array.isArray(fn.valueInfo))return"valueInfo: array expected";for(co=0;co<fn.valueInfo.length;++co)if(lo=uo.onnx.ValueInfoProto.verify(fn.valueInfo[co]))return"valueInfo."+lo}if(fn.quantizationAnnotation!=null&&fn.hasOwnProperty("quantizationAnnotation")){if(!Array.isArray(fn.quantizationAnnotation))return"quantizationAnnotation: array expected";for(co=0;co<fn.quantizationAnnotation.length;++co){var lo;if(lo=uo.onnx.TensorAnnotation.verify(fn.quantizationAnnotation[co]))return"quantizationAnnotation."+lo}}return null},hn.fromObject=function(fn){if(fn instanceof uo.onnx.GraphProto)return fn;var co=new uo.onnx.GraphProto;if(fn.node){if(!Array.isArray(fn.node))throw TypeError(".onnx.GraphProto.node: array expected");co.node=[];for(var lo=0;lo<fn.node.length;++lo){if(typeof fn.node[lo]!="object")throw TypeError(".onnx.GraphProto.node: object expected");co.node[lo]=uo.onnx.NodeProto.fromObject(fn.node[lo])}}if(fn.name!=null&&(co.name=String(fn.name)),fn.initializer){if(!Array.isArray(fn.initializer))throw TypeError(".onnx.GraphProto.initializer: array expected");for(co.initializer=[],lo=0;lo<fn.initializer.length;++lo){if(typeof fn.initializer[lo]!="object")throw TypeError(".onnx.GraphProto.initializer: object expected");co.initializer[lo]=uo.onnx.TensorProto.fromObject(fn.initializer[lo])}}if(fn.docString!=null&&(co.docString=String(fn.docString)),fn.input){if(!Array.isArray(fn.input))throw TypeError(".onnx.GraphProto.input: array expected");for(co.input=[],lo=0;lo<fn.input.length;++lo){if(typeof fn.input[lo]!="object")throw TypeError(".onnx.GraphProto.input: object expected");co.input[lo]=uo.onnx.ValueInfoProto.fromObject(fn.input[lo])}}if(fn.output){if(!Array.isArray(fn.output))throw TypeError(".onnx.GraphProto.output: array expected");for(co.output=[],lo=0;lo<fn.output.length;++lo){if(typeof fn.output[lo]!="object")throw TypeError(".onnx.GraphProto.output: object expected");co.output[lo]=uo.onnx.ValueInfoProto.fromObject(fn.output[lo])}}if(fn.valueInfo){if(!Array.isArray(fn.valueInfo))throw TypeError(".onnx.GraphProto.valueInfo: array expected");for(co.valueInfo=[],lo=0;lo<fn.valueInfo.length;++lo){if(typeof fn.valueInfo[lo]!="object")throw TypeError(".onnx.GraphProto.valueInfo: object expected");co.valueInfo[lo]=uo.onnx.ValueInfoProto.fromObject(fn.valueInfo[lo])}}if(fn.quantizationAnnotation){if(!Array.isArray(fn.quantizationAnnotation))throw TypeError(".onnx.GraphProto.quantizationAnnotation: array expected");for(co.quantizationAnnotation=[],lo=0;lo<fn.quantizationAnnotation.length;++lo){if(typeof fn.quantizationAnnotation[lo]!="object")throw TypeError(".onnx.GraphProto.quantizationAnnotation: object expected");co.quantizationAnnotation[lo]=uo.onnx.TensorAnnotation.fromObject(fn.quantizationAnnotation[lo])}}return co},hn.toObject=function(fn,co){co||(co={});var lo={};if((co.arrays||co.defaults)&&(lo.node=[],lo.initializer=[],lo.input=[],lo.output=[],lo.valueInfo=[],lo.quantizationAnnotation=[]),co.defaults&&(lo.name="",lo.docString=""),fn.node&&fn.node.length){lo.node=[];for(var fo=0;fo<fn.node.length;++fo)lo.node[fo]=uo.onnx.NodeProto.toObject(fn.node[fo],co)}if(fn.name!=null&&fn.hasOwnProperty("name")&&(lo.name=fn.name),fn.initializer&&fn.initializer.length)for(lo.initializer=[],fo=0;fo<fn.initializer.length;++fo)lo.initializer[fo]=uo.onnx.TensorProto.toObject(fn.initializer[fo],co);if(fn.docString!=null&&fn.hasOwnProperty("docString")&&(lo.docString=fn.docString),fn.input&&fn.input.length)for(lo.input=[],fo=0;fo<fn.input.length;++fo)lo.input[fo]=uo.onnx.ValueInfoProto.toObject(fn.input[fo],co);if(fn.output&&fn.output.length)for(lo.output=[],fo=0;fo<fn.output.length;++fo)lo.output[fo]=uo.onnx.ValueInfoProto.toObject(fn.output[fo],co);if(fn.valueInfo&&fn.valueInfo.length)for(lo.valueInfo=[],fo=0;fo<fn.valueInfo.length;++fo)lo.valueInfo[fo]=uo.onnx.ValueInfoProto.toObject(fn.valueInfo[fo],co);if(fn.quantizationAnnotation&&fn.quantizationAnnotation.length)for(lo.quantizationAnnotation=[],fo=0;fo<fn.quantizationAnnotation.length;++fo)lo.quantizationAnnotation[fo]=uo.onnx.TensorAnnotation.toObject(fn.quantizationAnnotation[fo],co);return lo},hn.prototype.toJSON=function(){return this.constructor.toObject(this,sn.util.toJSONOptions)},hn}(),an.TensorProto=function(){function hn(fn){if(this.dims=[],this.floatData=[],this.int32Data=[],this.stringData=[],this.int64Data=[],this.externalData=[],this.doubleData=[],this.uint64Data=[],fn)for(var co=Object.keys(fn),lo=0;lo<co.length;++lo)fn[co[lo]]!=null&&(this[co[lo]]=fn[co[lo]])}return hn.prototype.dims=to.emptyArray,hn.prototype.dataType=0,hn.prototype.segment=null,hn.prototype.floatData=to.emptyArray,hn.prototype.int32Data=to.emptyArray,hn.prototype.stringData=to.emptyArray,hn.prototype.int64Data=to.emptyArray,hn.prototype.name="",hn.prototype.docString="",hn.prototype.rawData=to.newBuffer([]),hn.prototype.externalData=to.emptyArray,hn.prototype.dataLocation=0,hn.prototype.doubleData=to.emptyArray,hn.prototype.uint64Data=to.emptyArray,hn.create=function(fn){return new hn(fn)},hn.encode=function(fn,co){if(co||(co=Xr.create()),fn.dims!=null&&fn.dims.length){co.uint32(10).fork();for(var lo=0;lo<fn.dims.length;++lo)co.int64(fn.dims[lo]);co.ldelim()}if(fn.dataType!=null&&fn.hasOwnProperty("dataType")&&co.uint32(16).int32(fn.dataType),fn.segment!=null&&fn.hasOwnProperty("segment")&&uo.onnx.TensorProto.Segment.encode(fn.segment,co.uint32(26).fork()).ldelim(),fn.floatData!=null&&fn.floatData.length){for(co.uint32(34).fork(),lo=0;lo<fn.floatData.length;++lo)co.float(fn.floatData[lo]);co.ldelim()}if(fn.int32Data!=null&&fn.int32Data.length){for(co.uint32(42).fork(),lo=0;lo<fn.int32Data.length;++lo)co.int32(fn.int32Data[lo]);co.ldelim()}if(fn.stringData!=null&&fn.stringData.length)for(lo=0;lo<fn.stringData.length;++lo)co.uint32(50).bytes(fn.stringData[lo]);if(fn.int64Data!=null&&fn.int64Data.length){for(co.uint32(58).fork(),lo=0;lo<fn.int64Data.length;++lo)co.int64(fn.int64Data[lo]);co.ldelim()}if(fn.name!=null&&fn.hasOwnProperty("name")&&co.uint32(66).string(fn.name),fn.rawData!=null&&fn.hasOwnProperty("rawData")&&co.uint32(74).bytes(fn.rawData),fn.doubleData!=null&&fn.doubleData.length){for(co.uint32(82).fork(),lo=0;lo<fn.doubleData.length;++lo)co.double(fn.doubleData[lo]);co.ldelim()}if(fn.uint64Data!=null&&fn.uint64Data.length){for(co.uint32(90).fork(),lo=0;lo<fn.uint64Data.length;++lo)co.uint64(fn.uint64Data[lo]);co.ldelim()}if(fn.docString!=null&&fn.hasOwnProperty("docString")&&co.uint32(98).string(fn.docString),fn.externalData!=null&&fn.externalData.length)for(lo=0;lo<fn.externalData.length;++lo)uo.onnx.StringStringEntryProto.encode(fn.externalData[lo],co.uint32(106).fork()).ldelim();return fn.dataLocation!=null&&fn.hasOwnProperty("dataLocation")&&co.uint32(112).int32(fn.dataLocation),co},hn.encodeDelimited=function(fn,co){return this.encode(fn,co).ldelim()},hn.decode=function(fn,co){fn instanceof un||(fn=un.create(fn));for(var lo=co===void 0?fn.len:fn.pos+co,fo=new uo.onnx.TensorProto;fn.pos<lo;){var ho=fn.uint32();switch(ho>>>3){case 1:if(fo.dims&&fo.dims.length||(fo.dims=[]),(7&ho)==2)for(var mo=fn.uint32()+fn.pos;fn.pos<mo;)fo.dims.push(fn.int64());else fo.dims.push(fn.int64());break;case 2:fo.dataType=fn.int32();break;case 3:fo.segment=uo.onnx.TensorProto.Segment.decode(fn,fn.uint32());break;case 4:if(fo.floatData&&fo.floatData.length||(fo.floatData=[]),(7&ho)==2)for(mo=fn.uint32()+fn.pos;fn.pos<mo;)fo.floatData.push(fn.float());else fo.floatData.push(fn.float());break;case 5:if(fo.int32Data&&fo.int32Data.length||(fo.int32Data=[]),(7&ho)==2)for(mo=fn.uint32()+fn.pos;fn.pos<mo;)fo.int32Data.push(fn.int32());else fo.int32Data.push(fn.int32());break;case 6:fo.stringData&&fo.stringData.length||(fo.stringData=[]),fo.stringData.push(fn.bytes());break;case 7:if(fo.int64Data&&fo.int64Data.length||(fo.int64Data=[]),(7&ho)==2)for(mo=fn.uint32()+fn.pos;fn.pos<mo;)fo.int64Data.push(fn.int64());else fo.int64Data.push(fn.int64());break;case 8:fo.name=fn.string();break;case 12:fo.docString=fn.string();break;case 9:fo.rawData=fn.bytes();break;case 13:fo.externalData&&fo.externalData.length||(fo.externalData=[]),fo.externalData.push(uo.onnx.StringStringEntryProto.decode(fn,fn.uint32()));break;case 14:fo.dataLocation=fn.int32();break;case 10:if(fo.doubleData&&fo.doubleData.length||(fo.doubleData=[]),(7&ho)==2)for(mo=fn.uint32()+fn.pos;fn.pos<mo;)fo.doubleData.push(fn.double());else fo.doubleData.push(fn.double());break;case 11:if(fo.uint64Data&&fo.uint64Data.length||(fo.uint64Data=[]),(7&ho)==2)for(mo=fn.uint32()+fn.pos;fn.pos<mo;)fo.uint64Data.push(fn.uint64());else fo.uint64Data.push(fn.uint64());break;default:fn.skipType(7&ho)}}return fo},hn.decodeDelimited=function(fn){return fn instanceof un||(fn=new un(fn)),this.decode(fn,fn.uint32())},hn.verify=function(fn){if(typeof fn!="object"||fn===null)return"object expected";if(fn.dims!=null&&fn.hasOwnProperty("dims")){if(!Array.isArray(fn.dims))return"dims: array expected";for(var co=0;co<fn.dims.length;++co)if(!(to.isInteger(fn.dims[co])||fn.dims[co]&&to.isInteger(fn.dims[co].low)&&to.isInteger(fn.dims[co].high)))return"dims: integer|Long[] expected"}if(fn.dataType!=null&&fn.hasOwnProperty("dataType")&&!to.isInteger(fn.dataType))return"dataType: integer expected";if(fn.segment!=null&&fn.hasOwnProperty("segment")&&(lo=uo.onnx.TensorProto.Segment.verify(fn.segment)))return"segment."+lo;if(fn.floatData!=null&&fn.hasOwnProperty("floatData")){if(!Array.isArray(fn.floatData))return"floatData: array expected";for(co=0;co<fn.floatData.length;++co)if(typeof fn.floatData[co]!="number")return"floatData: number[] expected"}if(fn.int32Data!=null&&fn.hasOwnProperty("int32Data")){if(!Array.isArray(fn.int32Data))return"int32Data: array expected";for(co=0;co<fn.int32Data.length;++co)if(!to.isInteger(fn.int32Data[co]))return"int32Data: integer[] expected"}if(fn.stringData!=null&&fn.hasOwnProperty("stringData")){if(!Array.isArray(fn.stringData))return"stringData: array expected";for(co=0;co<fn.stringData.length;++co)if(!(fn.stringData[co]&&typeof fn.stringData[co].length=="number"||to.isString(fn.stringData[co])))return"stringData: buffer[] expected"}if(fn.int64Data!=null&&fn.hasOwnProperty("int64Data")){if(!Array.isArray(fn.int64Data))return"int64Data: array expected";for(co=0;co<fn.int64Data.length;++co)if(!(to.isInteger(fn.int64Data[co])||fn.int64Data[co]&&to.isInteger(fn.int64Data[co].low)&&to.isInteger(fn.int64Data[co].high)))return"int64Data: integer|Long[] expected"}if(fn.name!=null&&fn.hasOwnProperty("name")&&!to.isString(fn.name))return"name: string expected";if(fn.docString!=null&&fn.hasOwnProperty("docString")&&!to.isString(fn.docString))return"docString: string expected";if(fn.rawData!=null&&fn.hasOwnProperty("rawData")&&!(fn.rawData&&typeof fn.rawData.length=="number"||to.isString(fn.rawData)))return"rawData: buffer expected";if(fn.externalData!=null&&fn.hasOwnProperty("externalData")){if(!Array.isArray(fn.externalData))return"externalData: array expected";for(co=0;co<fn.externalData.length;++co){var lo;if(lo=uo.onnx.StringStringEntryProto.verify(fn.externalData[co]))return"externalData."+lo}}if(fn.dataLocation!=null&&fn.hasOwnProperty("dataLocation"))switch(fn.dataLocation){default:return"dataLocation: enum value expected";case 0:case 1:}if(fn.doubleData!=null&&fn.hasOwnProperty("doubleData")){if(!Array.isArray(fn.doubleData))return"doubleData: array expected";for(co=0;co<fn.doubleData.length;++co)if(typeof fn.doubleData[co]!="number")return"doubleData: number[] expected"}if(fn.uint64Data!=null&&fn.hasOwnProperty("uint64Data")){if(!Array.isArray(fn.uint64Data))return"uint64Data: array expected";for(co=0;co<fn.uint64Data.length;++co)if(!(to.isInteger(fn.uint64Data[co])||fn.uint64Data[co]&&to.isInteger(fn.uint64Data[co].low)&&to.isInteger(fn.uint64Data[co].high)))return"uint64Data: integer|Long[] expected"}return null},hn.fromObject=function(fn){if(fn instanceof uo.onnx.TensorProto)return fn;var co=new uo.onnx.TensorProto;if(fn.dims){if(!Array.isArray(fn.dims))throw TypeError(".onnx.TensorProto.dims: array expected");co.dims=[];for(var lo=0;lo<fn.dims.length;++lo)to.Long?(co.dims[lo]=to.Long.fromValue(fn.dims[lo])).unsigned=!1:typeof fn.dims[lo]=="string"?co.dims[lo]=parseInt(fn.dims[lo],10):typeof fn.dims[lo]=="number"?co.dims[lo]=fn.dims[lo]:typeof fn.dims[lo]=="object"&&(co.dims[lo]=new to.LongBits(fn.dims[lo].low>>>0,fn.dims[lo].high>>>0).toNumber())}if(fn.dataType!=null&&(co.dataType=0|fn.dataType),fn.segment!=null){if(typeof fn.segment!="object")throw TypeError(".onnx.TensorProto.segment: object expected");co.segment=uo.onnx.TensorProto.Segment.fromObject(fn.segment)}if(fn.floatData){if(!Array.isArray(fn.floatData))throw TypeError(".onnx.TensorProto.floatData: array expected");for(co.floatData=[],lo=0;lo<fn.floatData.length;++lo)co.floatData[lo]=Number(fn.floatData[lo])}if(fn.int32Data){if(!Array.isArray(fn.int32Data))throw TypeError(".onnx.TensorProto.int32Data: array expected");for(co.int32Data=[],lo=0;lo<fn.int32Data.length;++lo)co.int32Data[lo]=0|fn.int32Data[lo]}if(fn.stringData){if(!Array.isArray(fn.stringData))throw TypeError(".onnx.TensorProto.stringData: array expected");for(co.stringData=[],lo=0;lo<fn.stringData.length;++lo)typeof fn.stringData[lo]=="string"?to.base64.decode(fn.stringData[lo],co.stringData[lo]=to.newBuffer(to.base64.length(fn.stringData[lo])),0):fn.stringData[lo].length&&(co.stringData[lo]=fn.stringData[lo])}if(fn.int64Data){if(!Array.isArray(fn.int64Data))throw TypeError(".onnx.TensorProto.int64Data: array expected");for(co.int64Data=[],lo=0;lo<fn.int64Data.length;++lo)to.Long?(co.int64Data[lo]=to.Long.fromValue(fn.int64Data[lo])).unsigned=!1:typeof fn.int64Data[lo]=="string"?co.int64Data[lo]=parseInt(fn.int64Data[lo],10):typeof fn.int64Data[lo]=="number"?co.int64Data[lo]=fn.int64Data[lo]:typeof fn.int64Data[lo]=="object"&&(co.int64Data[lo]=new to.LongBits(fn.int64Data[lo].low>>>0,fn.int64Data[lo].high>>>0).toNumber())}if(fn.name!=null&&(co.name=String(fn.name)),fn.docString!=null&&(co.docString=String(fn.docString)),fn.rawData!=null&&(typeof fn.rawData=="string"?to.base64.decode(fn.rawData,co.rawData=to.newBuffer(to.base64.length(fn.rawData)),0):fn.rawData.length&&(co.rawData=fn.rawData)),fn.externalData){if(!Array.isArray(fn.externalData))throw TypeError(".onnx.TensorProto.externalData: array expected");for(co.externalData=[],lo=0;lo<fn.externalData.length;++lo){if(typeof fn.externalData[lo]!="object")throw TypeError(".onnx.TensorProto.externalData: object expected");co.externalData[lo]=uo.onnx.StringStringEntryProto.fromObject(fn.externalData[lo])}}switch(fn.dataLocation){case"DEFAULT":case 0:co.dataLocation=0;break;case"EXTERNAL":case 1:co.dataLocation=1}if(fn.doubleData){if(!Array.isArray(fn.doubleData))throw TypeError(".onnx.TensorProto.doubleData: array expected");for(co.doubleData=[],lo=0;lo<fn.doubleData.length;++lo)co.doubleData[lo]=Number(fn.doubleData[lo])}if(fn.uint64Data){if(!Array.isArray(fn.uint64Data))throw TypeError(".onnx.TensorProto.uint64Data: array expected");for(co.uint64Data=[],lo=0;lo<fn.uint64Data.length;++lo)to.Long?(co.uint64Data[lo]=to.Long.fromValue(fn.uint64Data[lo])).unsigned=!0:typeof fn.uint64Data[lo]=="string"?co.uint64Data[lo]=parseInt(fn.uint64Data[lo],10):typeof fn.uint64Data[lo]=="number"?co.uint64Data[lo]=fn.uint64Data[lo]:typeof fn.uint64Data[lo]=="object"&&(co.uint64Data[lo]=new to.LongBits(fn.uint64Data[lo].low>>>0,fn.uint64Data[lo].high>>>0).toNumber(!0))}return co},hn.toObject=function(fn,co){co||(co={});var lo={};if((co.arrays||co.defaults)&&(lo.dims=[],lo.floatData=[],lo.int32Data=[],lo.stringData=[],lo.int64Data=[],lo.doubleData=[],lo.uint64Data=[],lo.externalData=[]),co.defaults&&(lo.dataType=0,lo.segment=null,lo.name="",co.bytes===String?lo.rawData="":(lo.rawData=[],co.bytes!==Array&&(lo.rawData=to.newBuffer(lo.rawData))),lo.docString="",lo.dataLocation=co.enums===String?"DEFAULT":0),fn.dims&&fn.dims.length){lo.dims=[];for(var fo=0;fo<fn.dims.length;++fo)typeof fn.dims[fo]=="number"?lo.dims[fo]=co.longs===String?String(fn.dims[fo]):fn.dims[fo]:lo.dims[fo]=co.longs===String?to.Long.prototype.toString.call(fn.dims[fo]):co.longs===Number?new to.LongBits(fn.dims[fo].low>>>0,fn.dims[fo].high>>>0).toNumber():fn.dims[fo]}if(fn.dataType!=null&&fn.hasOwnProperty("dataType")&&(lo.dataType=fn.dataType),fn.segment!=null&&fn.hasOwnProperty("segment")&&(lo.segment=uo.onnx.TensorProto.Segment.toObject(fn.segment,co)),fn.floatData&&fn.floatData.length)for(lo.floatData=[],fo=0;fo<fn.floatData.length;++fo)lo.floatData[fo]=co.json&&!isFinite(fn.floatData[fo])?String(fn.floatData[fo]):fn.floatData[fo];if(fn.int32Data&&fn.int32Data.length)for(lo.int32Data=[],fo=0;fo<fn.int32Data.length;++fo)lo.int32Data[fo]=fn.int32Data[fo];if(fn.stringData&&fn.stringData.length)for(lo.stringData=[],fo=0;fo<fn.stringData.length;++fo)lo.stringData[fo]=co.bytes===String?to.base64.encode(fn.stringData[fo],0,fn.stringData[fo].length):co.bytes===Array?Array.prototype.slice.call(fn.stringData[fo]):fn.stringData[fo];if(fn.int64Data&&fn.int64Data.length)for(lo.int64Data=[],fo=0;fo<fn.int64Data.length;++fo)typeof fn.int64Data[fo]=="number"?lo.int64Data[fo]=co.longs===String?String(fn.int64Data[fo]):fn.int64Data[fo]:lo.int64Data[fo]=co.longs===String?to.Long.prototype.toString.call(fn.int64Data[fo]):co.longs===Number?new to.LongBits(fn.int64Data[fo].low>>>0,fn.int64Data[fo].high>>>0).toNumber():fn.int64Data[fo];if(fn.name!=null&&fn.hasOwnProperty("name")&&(lo.name=fn.name),fn.rawData!=null&&fn.hasOwnProperty("rawData")&&(lo.rawData=co.bytes===String?to.base64.encode(fn.rawData,0,fn.rawData.length):co.bytes===Array?Array.prototype.slice.call(fn.rawData):fn.rawData),fn.doubleData&&fn.doubleData.length)for(lo.doubleData=[],fo=0;fo<fn.doubleData.length;++fo)lo.doubleData[fo]=co.json&&!isFinite(fn.doubleData[fo])?String(fn.doubleData[fo]):fn.doubleData[fo];if(fn.uint64Data&&fn.uint64Data.length)for(lo.uint64Data=[],fo=0;fo<fn.uint64Data.length;++fo)typeof fn.uint64Data[fo]=="number"?lo.uint64Data[fo]=co.longs===String?String(fn.uint64Data[fo]):fn.uint64Data[fo]:lo.uint64Data[fo]=co.longs===String?to.Long.prototype.toString.call(fn.uint64Data[fo]):co.longs===Number?new to.LongBits(fn.uint64Data[fo].low>>>0,fn.uint64Data[fo].high>>>0).toNumber(!0):fn.uint64Data[fo];if(fn.docString!=null&&fn.hasOwnProperty("docString")&&(lo.docString=fn.docString),fn.externalData&&fn.externalData.length)for(lo.externalData=[],fo=0;fo<fn.externalData.length;++fo)lo.externalData[fo]=uo.onnx.StringStringEntryProto.toObject(fn.externalData[fo],co);return fn.dataLocation!=null&&fn.hasOwnProperty("dataLocation")&&(lo.dataLocation=co.enums===String?uo.onnx.TensorProto.DataLocation[fn.dataLocation]:fn.dataLocation),lo},hn.prototype.toJSON=function(){return this.constructor.toObject(this,sn.util.toJSONOptions)},hn.DataType=function(){var fn={},co=Object.create(fn);return co[fn[0]="UNDEFINED"]=0,co[fn[1]="FLOAT"]=1,co[fn[2]="UINT8"]=2,co[fn[3]="INT8"]=3,co[fn[4]="UINT16"]=4,co[fn[5]="INT16"]=5,co[fn[6]="INT32"]=6,co[fn[7]="INT64"]=7,co[fn[8]="STRING"]=8,co[fn[9]="BOOL"]=9,co[fn[10]="FLOAT16"]=10,co[fn[11]="DOUBLE"]=11,co[fn[12]="UINT32"]=12,co[fn[13]="UINT64"]=13,co[fn[14]="COMPLEX64"]=14,co[fn[15]="COMPLEX128"]=15,co[fn[16]="BFLOAT16"]=16,co}(),hn.Segment=function(){function fn(co){if(co)for(var lo=Object.keys(co),fo=0;fo<lo.length;++fo)co[lo[fo]]!=null&&(this[lo[fo]]=co[lo[fo]])}return fn.prototype.begin=to.Long?to.Long.fromBits(0,0,!1):0,fn.prototype.end=to.Long?to.Long.fromBits(0,0,!1):0,fn.create=function(co){return new fn(co)},fn.encode=function(co,lo){return lo||(lo=Xr.create()),co.begin!=null&&co.hasOwnProperty("begin")&&lo.uint32(8).int64(co.begin),co.end!=null&&co.hasOwnProperty("end")&&lo.uint32(16).int64(co.end),lo},fn.encodeDelimited=function(co,lo){return this.encode(co,lo).ldelim()},fn.decode=function(co,lo){co instanceof un||(co=un.create(co));for(var fo=lo===void 0?co.len:co.pos+lo,ho=new uo.onnx.TensorProto.Segment;co.pos<fo;){var mo=co.uint32();switch(mo>>>3){case 1:ho.begin=co.int64();break;case 2:ho.end=co.int64();break;default:co.skipType(7&mo)}}return ho},fn.decodeDelimited=function(co){return co instanceof un||(co=new un(co)),this.decode(co,co.uint32())},fn.verify=function(co){return typeof co!="object"||co===null?"object expected":co.begin!=null&&co.hasOwnProperty("begin")&&!(to.isInteger(co.begin)||co.begin&&to.isInteger(co.begin.low)&&to.isInteger(co.begin.high))?"begin: integer|Long expected":co.end!=null&&co.hasOwnProperty("end")&&!(to.isInteger(co.end)||co.end&&to.isInteger(co.end.low)&&to.isInteger(co.end.high))?"end: integer|Long expected":null},fn.fromObject=function(co){if(co instanceof uo.onnx.TensorProto.Segment)return co;var lo=new uo.onnx.TensorProto.Segment;return co.begin!=null&&(to.Long?(lo.begin=to.Long.fromValue(co.begin)).unsigned=!1:typeof co.begin=="string"?lo.begin=parseInt(co.begin,10):typeof co.begin=="number"?lo.begin=co.begin:typeof co.begin=="object"&&(lo.begin=new to.LongBits(co.begin.low>>>0,co.begin.high>>>0).toNumber())),co.end!=null&&(to.Long?(lo.end=to.Long.fromValue(co.end)).unsigned=!1:typeof co.end=="string"?lo.end=parseInt(co.end,10):typeof co.end=="number"?lo.end=co.end:typeof co.end=="object"&&(lo.end=new to.LongBits(co.end.low>>>0,co.end.high>>>0).toNumber())),lo},fn.toObject=function(co,lo){lo||(lo={});var fo={};if(lo.defaults){if(to.Long){var ho=new to.Long(0,0,!1);fo.begin=lo.longs===String?ho.toString():lo.longs===Number?ho.toNumber():ho}else fo.begin=lo.longs===String?"0":0;to.Long?(ho=new to.Long(0,0,!1),fo.end=lo.longs===String?ho.toString():lo.longs===Number?ho.toNumber():ho):fo.end=lo.longs===String?"0":0}return co.begin!=null&&co.hasOwnProperty("begin")&&(typeof co.begin=="number"?fo.begin=lo.longs===String?String(co.begin):co.begin:fo.begin=lo.longs===String?to.Long.prototype.toString.call(co.begin):lo.longs===Number?new to.LongBits(co.begin.low>>>0,co.begin.high>>>0).toNumber():co.begin),co.end!=null&&co.hasOwnProperty("end")&&(typeof co.end=="number"?fo.end=lo.longs===String?String(co.end):co.end:fo.end=lo.longs===String?to.Long.prototype.toString.call(co.end):lo.longs===Number?new to.LongBits(co.end.low>>>0,co.end.high>>>0).toNumber():co.end),fo},fn.prototype.toJSON=function(){return this.constructor.toObject(this,sn.util.toJSONOptions)},fn}(),hn.DataLocation=function(){var fn={},co=Object.create(fn);return co[fn[0]="DEFAULT"]=0,co[fn[1]="EXTERNAL"]=1,co}(),hn}(),an.TensorShapeProto=function(){function hn(fn){if(this.dim=[],fn)for(var co=Object.keys(fn),lo=0;lo<co.length;++lo)fn[co[lo]]!=null&&(this[co[lo]]=fn[co[lo]])}return hn.prototype.dim=to.emptyArray,hn.create=function(fn){return new hn(fn)},hn.encode=function(fn,co){if(co||(co=Xr.create()),fn.dim!=null&&fn.dim.length)for(var lo=0;lo<fn.dim.length;++lo)uo.onnx.TensorShapeProto.Dimension.encode(fn.dim[lo],co.uint32(10).fork()).ldelim();return co},hn.encodeDelimited=function(fn,co){return this.encode(fn,co).ldelim()},hn.decode=function(fn,co){fn instanceof un||(fn=un.create(fn));for(var lo=co===void 0?fn.len:fn.pos+co,fo=new uo.onnx.TensorShapeProto;fn.pos<lo;){var ho=fn.uint32();ho>>>3==1?(fo.dim&&fo.dim.length||(fo.dim=[]),fo.dim.push(uo.onnx.TensorShapeProto.Dimension.decode(fn,fn.uint32()))):fn.skipType(7&ho)}return fo},hn.decodeDelimited=function(fn){return fn instanceof un||(fn=new un(fn)),this.decode(fn,fn.uint32())},hn.verify=function(fn){if(typeof fn!="object"||fn===null)return"object expected";if(fn.dim!=null&&fn.hasOwnProperty("dim")){if(!Array.isArray(fn.dim))return"dim: array expected";for(var co=0;co<fn.dim.length;++co){var lo=uo.onnx.TensorShapeProto.Dimension.verify(fn.dim[co]);if(lo)return"dim."+lo}}return null},hn.fromObject=function(fn){if(fn instanceof uo.onnx.TensorShapeProto)return fn;var co=new uo.onnx.TensorShapeProto;if(fn.dim){if(!Array.isArray(fn.dim))throw TypeError(".onnx.TensorShapeProto.dim: array expected");co.dim=[];for(var lo=0;lo<fn.dim.length;++lo){if(typeof fn.dim[lo]!="object")throw TypeError(".onnx.TensorShapeProto.dim: object expected");co.dim[lo]=uo.onnx.TensorShapeProto.Dimension.fromObject(fn.dim[lo])}}return co},hn.toObject=function(fn,co){co||(co={});var lo={};if((co.arrays||co.defaults)&&(lo.dim=[]),fn.dim&&fn.dim.length){lo.dim=[];for(var fo=0;fo<fn.dim.length;++fo)lo.dim[fo]=uo.onnx.TensorShapeProto.Dimension.toObject(fn.dim[fo],co)}return lo},hn.prototype.toJSON=function(){return this.constructor.toObject(this,sn.util.toJSONOptions)},hn.Dimension=function(){function fn(lo){if(lo)for(var fo=Object.keys(lo),ho=0;ho<fo.length;++ho)lo[fo[ho]]!=null&&(this[fo[ho]]=lo[fo[ho]])}var co;return fn.prototype.dimValue=to.Long?to.Long.fromBits(0,0,!1):0,fn.prototype.dimParam="",fn.prototype.denotation="",Object.defineProperty(fn.prototype,"value",{get:to.oneOfGetter(co=["dimValue","dimParam"]),set:to.oneOfSetter(co)}),fn.create=function(lo){return new fn(lo)},fn.encode=function(lo,fo){return fo||(fo=Xr.create()),lo.dimValue!=null&&lo.hasOwnProperty("dimValue")&&fo.uint32(8).int64(lo.dimValue),lo.dimParam!=null&&lo.hasOwnProperty("dimParam")&&fo.uint32(18).string(lo.dimParam),lo.denotation!=null&&lo.hasOwnProperty("denotation")&&fo.uint32(26).string(lo.denotation),fo},fn.encodeDelimited=function(lo,fo){return this.encode(lo,fo).ldelim()},fn.decode=function(lo,fo){lo instanceof un||(lo=un.create(lo));for(var ho=fo===void 0?lo.len:lo.pos+fo,mo=new uo.onnx.TensorShapeProto.Dimension;lo.pos<ho;){var Uo=lo.uint32();switch(Uo>>>3){case 1:mo.dimValue=lo.int64();break;case 2:mo.dimParam=lo.string();break;case 3:mo.denotation=lo.string();break;default:lo.skipType(7&Uo)}}return mo},fn.decodeDelimited=function(lo){return lo instanceof un||(lo=new un(lo)),this.decode(lo,lo.uint32())},fn.verify=function(lo){if(typeof lo!="object"||lo===null)return"object expected";var fo={};if(lo.dimValue!=null&&lo.hasOwnProperty("dimValue")&&(fo.value=1,!(to.isInteger(lo.dimValue)||lo.dimValue&&to.isInteger(lo.dimValue.low)&&to.isInteger(lo.dimValue.high))))return"dimValue: integer|Long expected";if(lo.dimParam!=null&&lo.hasOwnProperty("dimParam")){if(fo.value===1)return"value: multiple values";if(fo.value=1,!to.isString(lo.dimParam))return"dimParam: string expected"}return lo.denotation!=null&&lo.hasOwnProperty("denotation")&&!to.isString(lo.denotation)?"denotation: string expected":null},fn.fromObject=function(lo){if(lo instanceof uo.onnx.TensorShapeProto.Dimension)return lo;var fo=new uo.onnx.TensorShapeProto.Dimension;return lo.dimValue!=null&&(to.Long?(fo.dimValue=to.Long.fromValue(lo.dimValue)).unsigned=!1:typeof lo.dimValue=="string"?fo.dimValue=parseInt(lo.dimValue,10):typeof lo.dimValue=="number"?fo.dimValue=lo.dimValue:typeof lo.dimValue=="object"&&(fo.dimValue=new to.LongBits(lo.dimValue.low>>>0,lo.dimValue.high>>>0).toNumber())),lo.dimParam!=null&&(fo.dimParam=String(lo.dimParam)),lo.denotation!=null&&(fo.denotation=String(lo.denotation)),fo},fn.toObject=function(lo,fo){fo||(fo={});var ho={};return fo.defaults&&(ho.denotation=""),lo.dimValue!=null&&lo.hasOwnProperty("dimValue")&&(typeof lo.dimValue=="number"?ho.dimValue=fo.longs===String?String(lo.dimValue):lo.dimValue:ho.dimValue=fo.longs===String?to.Long.prototype.toString.call(lo.dimValue):fo.longs===Number?new to.LongBits(lo.dimValue.low>>>0,lo.dimValue.high>>>0).toNumber():lo.dimValue,fo.oneofs&&(ho.value="dimValue")),lo.dimParam!=null&&lo.hasOwnProperty("dimParam")&&(ho.dimParam=lo.dimParam,fo.oneofs&&(ho.value="dimParam")),lo.denotation!=null&&lo.hasOwnProperty("denotation")&&(ho.denotation=lo.denotation),ho},fn.prototype.toJSON=function(){return this.constructor.toObject(this,sn.util.toJSONOptions)},fn}(),hn}(),an.TypeProto=function(){function hn(co){if(co)for(var lo=Object.keys(co),fo=0;fo<lo.length;++fo)co[lo[fo]]!=null&&(this[lo[fo]]=co[lo[fo]])}var fn;return hn.prototype.tensorType=null,hn.prototype.denotation="",Object.defineProperty(hn.prototype,"value",{get:to.oneOfGetter(fn=["tensorType"]),set:to.oneOfSetter(fn)}),hn.create=function(co){return new hn(co)},hn.encode=function(co,lo){return lo||(lo=Xr.create()),co.tensorType!=null&&co.hasOwnProperty("tensorType")&&uo.onnx.TypeProto.Tensor.encode(co.tensorType,lo.uint32(10).fork()).ldelim(),co.denotation!=null&&co.hasOwnProperty("denotation")&&lo.uint32(50).string(co.denotation),lo},hn.encodeDelimited=function(co,lo){return this.encode(co,lo).ldelim()},hn.decode=function(co,lo){co instanceof un||(co=un.create(co));for(var fo=lo===void 0?co.len:co.pos+lo,ho=new uo.onnx.TypeProto;co.pos<fo;){var mo=co.uint32();switch(mo>>>3){case 1:ho.tensorType=uo.onnx.TypeProto.Tensor.decode(co,co.uint32());break;case 6:ho.denotation=co.string();break;default:co.skipType(7&mo)}}return ho},hn.decodeDelimited=function(co){return co instanceof un||(co=new un(co)),this.decode(co,co.uint32())},hn.verify=function(co){if(typeof co!="object"||co===null)return"object expected";if(co.tensorType!=null&&co.hasOwnProperty("tensorType")){var lo=uo.onnx.TypeProto.Tensor.verify(co.tensorType);if(lo)return"tensorType."+lo}return co.denotation!=null&&co.hasOwnProperty("denotation")&&!to.isString(co.denotation)?"denotation: string expected":null},hn.fromObject=function(co){if(co instanceof uo.onnx.TypeProto)return co;var lo=new uo.onnx.TypeProto;if(co.tensorType!=null){if(typeof co.tensorType!="object")throw TypeError(".onnx.TypeProto.tensorType: object expected");lo.tensorType=uo.onnx.TypeProto.Tensor.fromObject(co.tensorType)}return co.denotation!=null&&(lo.denotation=String(co.denotation)),lo},hn.toObject=function(co,lo){lo||(lo={});var fo={};return lo.defaults&&(fo.denotation=""),co.tensorType!=null&&co.hasOwnProperty("tensorType")&&(fo.tensorType=uo.onnx.TypeProto.Tensor.toObject(co.tensorType,lo),lo.oneofs&&(fo.value="tensorType")),co.denotation!=null&&co.hasOwnProperty("denotation")&&(fo.denotation=co.denotation),fo},hn.prototype.toJSON=function(){return this.constructor.toObject(this,sn.util.toJSONOptions)},hn.Tensor=function(){function co(lo){if(lo)for(var fo=Object.keys(lo),ho=0;ho<fo.length;++ho)lo[fo[ho]]!=null&&(this[fo[ho]]=lo[fo[ho]])}return co.prototype.elemType=0,co.prototype.shape=null,co.create=function(lo){return new co(lo)},co.encode=function(lo,fo){return fo||(fo=Xr.create()),lo.elemType!=null&&lo.hasOwnProperty("elemType")&&fo.uint32(8).int32(lo.elemType),lo.shape!=null&&lo.hasOwnProperty("shape")&&uo.onnx.TensorShapeProto.encode(lo.shape,fo.uint32(18).fork()).ldelim(),fo},co.encodeDelimited=function(lo,fo){return this.encode(lo,fo).ldelim()},co.decode=function(lo,fo){lo instanceof un||(lo=un.create(lo));for(var ho=fo===void 0?lo.len:lo.pos+fo,mo=new uo.onnx.TypeProto.Tensor;lo.pos<ho;){var Uo=lo.uint32();switch(Uo>>>3){case 1:mo.elemType=lo.int32();break;case 2:mo.shape=uo.onnx.TensorShapeProto.decode(lo,lo.uint32());break;default:lo.skipType(7&Uo)}}return mo},co.decodeDelimited=function(lo){return lo instanceof un||(lo=new un(lo)),this.decode(lo,lo.uint32())},co.verify=function(lo){if(typeof lo!="object"||lo===null)return"object expected";if(lo.elemType!=null&&lo.hasOwnProperty("elemType")&&!to.isInteger(lo.elemType))return"elemType: integer expected";if(lo.shape!=null&&lo.hasOwnProperty("shape")){var fo=uo.onnx.TensorShapeProto.verify(lo.shape);if(fo)return"shape."+fo}return null},co.fromObject=function(lo){if(lo instanceof uo.onnx.TypeProto.Tensor)return lo;var fo=new uo.onnx.TypeProto.Tensor;if(lo.elemType!=null&&(fo.elemType=0|lo.elemType),lo.shape!=null){if(typeof lo.shape!="object")throw TypeError(".onnx.TypeProto.Tensor.shape: object expected");fo.shape=uo.onnx.TensorShapeProto.fromObject(lo.shape)}return fo},co.toObject=function(lo,fo){fo||(fo={});var ho={};return fo.defaults&&(ho.elemType=0,ho.shape=null),lo.elemType!=null&&lo.hasOwnProperty("elemType")&&(ho.elemType=lo.elemType),lo.shape!=null&&lo.hasOwnProperty("shape")&&(ho.shape=uo.onnx.TensorShapeProto.toObject(lo.shape,fo)),ho},co.prototype.toJSON=function(){return this.constructor.toObject(this,sn.util.toJSONOptions)},co}(),hn}(),an.OperatorSetIdProto=function(){function hn(fn){if(fn)for(var co=Object.keys(fn),lo=0;lo<co.length;++lo)fn[co[lo]]!=null&&(this[co[lo]]=fn[co[lo]])}return hn.prototype.domain="",hn.prototype.version=to.Long?to.Long.fromBits(0,0,!1):0,hn.create=function(fn){return new hn(fn)},hn.encode=function(fn,co){return co||(co=Xr.create()),fn.domain!=null&&fn.hasOwnProperty("domain")&&co.uint32(10).string(fn.domain),fn.version!=null&&fn.hasOwnProperty("version")&&co.uint32(16).int64(fn.version),co},hn.encodeDelimited=function(fn,co){return this.encode(fn,co).ldelim()},hn.decode=function(fn,co){fn instanceof un||(fn=un.create(fn));for(var lo=co===void 0?fn.len:fn.pos+co,fo=new uo.onnx.OperatorSetIdProto;fn.pos<lo;){var ho=fn.uint32();switch(ho>>>3){case 1:fo.domain=fn.string();break;case 2:fo.version=fn.int64();break;default:fn.skipType(7&ho)}}return fo},hn.decodeDelimited=function(fn){return fn instanceof un||(fn=new un(fn)),this.decode(fn,fn.uint32())},hn.verify=function(fn){return typeof fn!="object"||fn===null?"object expected":fn.domain!=null&&fn.hasOwnProperty("domain")&&!to.isString(fn.domain)?"domain: string expected":fn.version!=null&&fn.hasOwnProperty("version")&&!(to.isInteger(fn.version)||fn.version&&to.isInteger(fn.version.low)&&to.isInteger(fn.version.high))?"version: integer|Long expected":null},hn.fromObject=function(fn){if(fn instanceof uo.onnx.OperatorSetIdProto)return fn;var co=new uo.onnx.OperatorSetIdProto;return fn.domain!=null&&(co.domain=String(fn.domain)),fn.version!=null&&(to.Long?(co.version=to.Long.fromValue(fn.version)).unsigned=!1:typeof fn.version=="string"?co.version=parseInt(fn.version,10):typeof fn.version=="number"?co.version=fn.version:typeof fn.version=="object"&&(co.version=new to.LongBits(fn.version.low>>>0,fn.version.high>>>0).toNumber())),co},hn.toObject=function(fn,co){co||(co={});var lo={};if(co.defaults)if(lo.domain="",to.Long){var fo=new to.Long(0,0,!1);lo.version=co.longs===String?fo.toString():co.longs===Number?fo.toNumber():fo}else lo.version=co.longs===String?"0":0;return fn.domain!=null&&fn.hasOwnProperty("domain")&&(lo.domain=fn.domain),fn.version!=null&&fn.hasOwnProperty("version")&&(typeof fn.version=="number"?lo.version=co.longs===String?String(fn.version):fn.version:lo.version=co.longs===String?to.Long.prototype.toString.call(fn.version):co.longs===Number?new to.LongBits(fn.version.low>>>0,fn.version.high>>>0).toNumber():fn.version),lo},hn.prototype.toJSON=function(){return this.constructor.toObject(this,sn.util.toJSONOptions)},hn}(),an),Mt.exports=uo},2100:(Mt,st,nn)=>{Mt.exports=nn(9482)},9482:(Mt,st,nn)=>{var rn=st;function on(){rn.util._configure(),rn.Writer._configure(rn.BufferWriter),rn.Reader._configure(rn.BufferReader)}rn.build="minimal",rn.Writer=nn(1173),rn.BufferWriter=nn(3155),rn.Reader=nn(1408),rn.BufferReader=nn(593),rn.util=nn(9693),rn.rpc=nn(5994),rn.roots=nn(5054),rn.configure=on,on()},1408:(Mt,st,nn)=>{Mt.exports=Xr;var rn,on=nn(9693),an=on.LongBits,sn=on.utf8;function un(fo,ho){return RangeError("index out of range: "+fo.pos+" + "+(ho||1)+" > "+fo.len)}function Xr(fo){this.buf=fo,this.pos=0,this.len=fo.length}var to,uo=typeof Uint8Array<"u"?function(fo){if(fo instanceof Uint8Array||Array.isArray(fo))return new Xr(fo);throw Error("illegal buffer")}:function(fo){if(Array.isArray(fo))return new Xr(fo);throw Error("illegal buffer")},hn=function(){return on.Buffer?function(fo){return(Xr.create=function(ho){return on.Buffer.isBuffer(ho)?new rn(ho):uo(ho)})(fo)}:uo};function fn(){var fo=new an(0,0),ho=0;if(!(this.len-this.pos>4)){for(;ho<3;++ho){if(this.pos>=this.len)throw un(this);if(fo.lo=(fo.lo|(127&this.buf[this.pos])<<7*ho)>>>0,this.buf[this.pos++]<128)return fo}return fo.lo=(fo.lo|(127&this.buf[this.pos++])<<7*ho)>>>0,fo}for(;ho<4;++ho)if(fo.lo=(fo.lo|(127&this.buf[this.pos])<<7*ho)>>>0,this.buf[this.pos++]<128)return fo;if(fo.lo=(fo.lo|(127&this.buf[this.pos])<<28)>>>0,fo.hi=(fo.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return fo;if(ho=0,this.len-this.pos>4){for(;ho<5;++ho)if(fo.hi=(fo.hi|(127&this.buf[this.pos])<<7*ho+3)>>>0,this.buf[this.pos++]<128)return fo}else for(;ho<5;++ho){if(this.pos>=this.len)throw un(this);if(fo.hi=(fo.hi|(127&this.buf[this.pos])<<7*ho+3)>>>0,this.buf[this.pos++]<128)return fo}throw Error("invalid varint encoding")}function co(fo,ho){return(fo[ho-4]|fo[ho-3]<<8|fo[ho-2]<<16|fo[ho-1]<<24)>>>0}function lo(){if(this.pos+8>this.len)throw un(this,8);return new an(co(this.buf,this.pos+=4),co(this.buf,this.pos+=4))}Xr.create=hn(),Xr.prototype._slice=on.Array.prototype.subarray||on.Array.prototype.slice,Xr.prototype.uint32=(to=4294967295,function(){if(to=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128||(to=(to|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)||(to=(to|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)||(to=(to|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)||(to=(to|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128))return to;if((this.pos+=5)>this.len)throw this.pos=this.len,un(this,10);return to}),Xr.prototype.int32=function(){return 0|this.uint32()},Xr.prototype.sint32=function(){var fo=this.uint32();return fo>>>1^-(1&fo)|0},Xr.prototype.bool=function(){return this.uint32()!==0},Xr.prototype.fixed32=function(){if(this.pos+4>this.len)throw un(this,4);return co(this.buf,this.pos+=4)},Xr.prototype.sfixed32=function(){if(this.pos+4>this.len)throw un(this,4);return 0|co(this.buf,this.pos+=4)},Xr.prototype.float=function(){if(this.pos+4>this.len)throw un(this,4);var fo=on.float.readFloatLE(this.buf,this.pos);return this.pos+=4,fo},Xr.prototype.double=function(){if(this.pos+8>this.len)throw un(this,4);var fo=on.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,fo},Xr.prototype.bytes=function(){var fo=this.uint32(),ho=this.pos,mo=this.pos+fo;if(mo>this.len)throw un(this,fo);return this.pos+=fo,Array.isArray(this.buf)?this.buf.slice(ho,mo):ho===mo?new this.buf.constructor(0):this._slice.call(this.buf,ho,mo)},Xr.prototype.string=function(){var fo=this.bytes();return sn.read(fo,0,fo.length)},Xr.prototype.skip=function(fo){if(typeof fo=="number"){if(this.pos+fo>this.len)throw un(this,fo);this.pos+=fo}else do if(this.pos>=this.len)throw un(this);while(128&this.buf[this.pos++]);return this},Xr.prototype.skipType=function(fo){switch(fo){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(fo=7&this.uint32())!=4;)this.skipType(fo);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+fo+" at offset "+this.pos)}return this},Xr._configure=function(fo){rn=fo,Xr.create=hn(),rn._configure();var ho=on.Long?"toLong":"toNumber";on.merge(Xr.prototype,{int64:function(){return fn.call(this)[ho](!1)},uint64:function(){return fn.call(this)[ho](!0)},sint64:function(){return fn.call(this).zzDecode()[ho](!1)},fixed64:function(){return lo.call(this)[ho](!0)},sfixed64:function(){return lo.call(this)[ho](!1)}})}},593:(Mt,st,nn)=>{Mt.exports=an;var rn=nn(1408);(an.prototype=Object.create(rn.prototype)).constructor=an;var on=nn(9693);function an(sn){rn.call(this,sn)}an._configure=function(){on.Buffer&&(an.prototype._slice=on.Buffer.prototype.slice)},an.prototype.string=function(){var sn=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+sn,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+sn,this.len))},an._configure()},5054:Mt=>{Mt.exports={}},5994:(Mt,st,nn)=>{st.Service=nn(7948)},7948:(Mt,st,nn)=>{Mt.exports=on;var rn=nn(9693);function on(an,sn,un){if(typeof an!="function")throw TypeError("rpcImpl must be a function");rn.EventEmitter.call(this),this.rpcImpl=an,this.requestDelimited=!!sn,this.responseDelimited=!!un}(on.prototype=Object.create(rn.EventEmitter.prototype)).constructor=on,on.prototype.rpcCall=function an(sn,un,Xr,to,uo){if(!to)throw TypeError("request must be specified");var hn=this;if(!uo)return rn.asPromise(an,hn,sn,un,Xr,to);if(hn.rpcImpl)try{return hn.rpcImpl(sn,un[hn.requestDelimited?"encodeDelimited":"encode"](to).finish(),function(fn,co){if(fn)return hn.emit("error",fn,sn),uo(fn);if(co!==null){if(!(co instanceof Xr))try{co=Xr[hn.responseDelimited?"decodeDelimited":"decode"](co)}catch(lo){return hn.emit("error",lo,sn),uo(lo)}return hn.emit("data",co,sn),uo(null,co)}hn.end(!0)})}catch(fn){return hn.emit("error",fn,sn),void setTimeout(function(){uo(fn)},0)}else setTimeout(function(){uo(Error("already ended"))},0)},on.prototype.end=function(an){return this.rpcImpl&&(an||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},1945:(Mt,st,nn)=>{Mt.exports=on;var rn=nn(9693);function on(Xr,to){this.lo=Xr>>>0,this.hi=to>>>0}var an=on.zero=new on(0,0);an.toNumber=function(){return 0},an.zzEncode=an.zzDecode=function(){return this},an.length=function(){return 1};var sn=on.zeroHash="\0\0\0\0\0\0\0\0";on.fromNumber=function(Xr){if(Xr===0)return an;var to=Xr<0;to&&(Xr=-Xr);var uo=Xr>>>0,hn=(Xr-uo)/4294967296>>>0;return to&&(hn=~hn>>>0,uo=~uo>>>0,++uo>4294967295&&(uo=0,++hn>4294967295&&(hn=0))),new on(uo,hn)},on.from=function(Xr){if(typeof Xr=="number")return on.fromNumber(Xr);if(rn.isString(Xr)){if(!rn.Long)return on.fromNumber(parseInt(Xr,10));Xr=rn.Long.fromString(Xr)}return Xr.low||Xr.high?new on(Xr.low>>>0,Xr.high>>>0):an},on.prototype.toNumber=function(Xr){if(!Xr&&this.hi>>>31){var to=1+~this.lo>>>0,uo=~this.hi>>>0;return to||(uo=uo+1>>>0),-(to+4294967296*uo)}return this.lo+4294967296*this.hi},on.prototype.toLong=function(Xr){return rn.Long?new rn.Long(0|this.lo,0|this.hi,!!Xr):{low:0|this.lo,high:0|this.hi,unsigned:!!Xr}};var un=String.prototype.charCodeAt;on.fromHash=function(Xr){return Xr===sn?an:new on((un.call(Xr,0)|un.call(Xr,1)<<8|un.call(Xr,2)<<16|un.call(Xr,3)<<24)>>>0,(un.call(Xr,4)|un.call(Xr,5)<<8|un.call(Xr,6)<<16|un.call(Xr,7)<<24)>>>0)},on.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},on.prototype.zzEncode=function(){var Xr=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^Xr)>>>0,this.lo=(this.lo<<1^Xr)>>>0,this},on.prototype.zzDecode=function(){var Xr=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^Xr)>>>0,this.hi=(this.hi>>>1^Xr)>>>0,this},on.prototype.length=function(){var Xr=this.lo,to=(this.lo>>>28|this.hi<<4)>>>0,uo=this.hi>>>24;return uo===0?to===0?Xr<16384?Xr<128?1:2:Xr<2097152?3:4:to<16384?to<128?5:6:to<2097152?7:8:uo<128?9:10}},9693:function(Mt,st,nn){var rn=st;function on(sn,un,Xr){for(var to=Object.keys(un),uo=0;uo<to.length;++uo)sn[to[uo]]!==void 0&&Xr||(sn[to[uo]]=un[to[uo]]);return sn}function an(sn){function un(Xr,to){if(!(this instanceof un))return new un(Xr,to);Object.defineProperty(this,"message",{get:function(){return Xr}}),Error.captureStackTrace?Error.captureStackTrace(this,un):Object.defineProperty(this,"stack",{value:new Error().stack||""}),to&&on(this,to)}return(un.prototype=Object.create(Error.prototype)).constructor=un,Object.defineProperty(un.prototype,"name",{get:function(){return sn}}),un.prototype.toString=function(){return this.name+": "+this.message},un}rn.asPromise=nn(4537),rn.base64=nn(7419),rn.EventEmitter=nn(9211),rn.float=nn(945),rn.inquire=nn(7199),rn.utf8=nn(4997),rn.pool=nn(6662),rn.LongBits=nn(1945),rn.isNode=!!(nn.g!==void 0&&nn.g&&nn.g.process&&nn.g.process.versions&&nn.g.process.versions.node),rn.global=rn.isNode&&nn.g||typeof window<"u"&&window||typeof self<"u"&&self||this,rn.emptyArray=Object.freeze?Object.freeze([]):[],rn.emptyObject=Object.freeze?Object.freeze({}):{},rn.isInteger=Number.isInteger||function(sn){return typeof sn=="number"&&isFinite(sn)&&Math.floor(sn)===sn},rn.isString=function(sn){return typeof sn=="string"||sn instanceof String},rn.isObject=function(sn){return sn&&typeof sn=="object"},rn.isset=rn.isSet=function(sn,un){var Xr=sn[un];return!(Xr==null||!sn.hasOwnProperty(un))&&(typeof Xr!="object"||(Array.isArray(Xr)?Xr.length:Object.keys(Xr).length)>0)},rn.Buffer=function(){try{var sn=rn.inquire("buffer").Buffer;return sn.prototype.utf8Write?sn:null}catch{return null}}(),rn._Buffer_from=null,rn._Buffer_allocUnsafe=null,rn.newBuffer=function(sn){return typeof sn=="number"?rn.Buffer?rn._Buffer_allocUnsafe(sn):new rn.Array(sn):rn.Buffer?rn._Buffer_from(sn):typeof Uint8Array>"u"?sn:new Uint8Array(sn)},rn.Array=typeof Uint8Array<"u"?Uint8Array:Array,rn.Long=rn.global.dcodeIO&&rn.global.dcodeIO.Long||rn.global.Long||rn.inquire("long"),rn.key2Re=/^true|false|0|1$/,rn.key32Re=/^-?(?:0|[1-9][0-9]*)$/,rn.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,rn.longToHash=function(sn){return sn?rn.LongBits.from(sn).toHash():rn.LongBits.zeroHash},rn.longFromHash=function(sn,un){var Xr=rn.LongBits.fromHash(sn);return rn.Long?rn.Long.fromBits(Xr.lo,Xr.hi,un):Xr.toNumber(!!un)},rn.merge=on,rn.lcFirst=function(sn){return sn.charAt(0).toLowerCase()+sn.substring(1)},rn.newError=an,rn.ProtocolError=an("ProtocolError"),rn.oneOfGetter=function(sn){for(var un={},Xr=0;Xr<sn.length;++Xr)un[sn[Xr]]=1;return function(){for(var to=Object.keys(this),uo=to.length-1;uo>-1;--uo)if(un[to[uo]]===1&&this[to[uo]]!==void 0&&this[to[uo]]!==null)return to[uo]}},rn.oneOfSetter=function(sn){return function(un){for(var Xr=0;Xr<sn.length;++Xr)sn[Xr]!==un&&delete this[sn[Xr]]}},rn.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},rn._configure=function(){var sn=rn.Buffer;sn?(rn._Buffer_from=sn.from!==Uint8Array.from&&sn.from||function(un,Xr){return new sn(un,Xr)},rn._Buffer_allocUnsafe=sn.allocUnsafe||function(un){return new sn(un)}):rn._Buffer_from=rn._Buffer_allocUnsafe=null}},1173:(Mt,st,nn)=>{Mt.exports=hn;var rn,on=nn(9693),an=on.LongBits,sn=on.base64,un=on.utf8;function Xr(Uo,_d,tp){this.fn=Uo,this.len=_d,this.next=void 0,this.val=tp}function to(){}function uo(Uo){this.head=Uo.head,this.tail=Uo.tail,this.len=Uo.len,this.next=Uo.states}function hn(){this.len=0,this.head=new Xr(to,0,0),this.tail=this.head,this.states=null}var fn=function(){return on.Buffer?function(){return(hn.create=function(){return new rn})()}:function(){return new hn}};function co(Uo,_d,tp){_d[tp]=255&Uo}function lo(Uo,_d){this.len=Uo,this.next=void 0,this.val=_d}function fo(Uo,_d,tp){for(;Uo.hi;)_d[tp++]=127&Uo.lo|128,Uo.lo=(Uo.lo>>>7|Uo.hi<<25)>>>0,Uo.hi>>>=7;for(;Uo.lo>127;)_d[tp++]=127&Uo.lo|128,Uo.lo=Uo.lo>>>7;_d[tp++]=Uo.lo}function ho(Uo,_d,tp){_d[tp]=255&Uo,_d[tp+1]=Uo>>>8&255,_d[tp+2]=Uo>>>16&255,_d[tp+3]=Uo>>>24}hn.create=fn(),hn.alloc=function(Uo){return new on.Array(Uo)},on.Array!==Array&&(hn.alloc=on.pool(hn.alloc,on.Array.prototype.subarray)),hn.prototype._push=function(Uo,_d,tp){return this.tail=this.tail.next=new Xr(Uo,_d,tp),this.len+=_d,this},lo.prototype=Object.create(Xr.prototype),lo.prototype.fn=function(Uo,_d,tp){for(;Uo>127;)_d[tp++]=127&Uo|128,Uo>>>=7;_d[tp]=Uo},hn.prototype.uint32=function(Uo){return this.len+=(this.tail=this.tail.next=new lo((Uo>>>=0)<128?1:Uo<16384?2:Uo<2097152?3:Uo<268435456?4:5,Uo)).len,this},hn.prototype.int32=function(Uo){return Uo<0?this._push(fo,10,an.fromNumber(Uo)):this.uint32(Uo)},hn.prototype.sint32=function(Uo){return this.uint32((Uo<<1^Uo>>31)>>>0)},hn.prototype.uint64=function(Uo){var _d=an.from(Uo);return this._push(fo,_d.length(),_d)},hn.prototype.int64=hn.prototype.uint64,hn.prototype.sint64=function(Uo){var _d=an.from(Uo).zzEncode();return this._push(fo,_d.length(),_d)},hn.prototype.bool=function(Uo){return this._push(co,1,Uo?1:0)},hn.prototype.fixed32=function(Uo){return this._push(ho,4,Uo>>>0)},hn.prototype.sfixed32=hn.prototype.fixed32,hn.prototype.fixed64=function(Uo){var _d=an.from(Uo);return this._push(ho,4,_d.lo)._push(ho,4,_d.hi)},hn.prototype.sfixed64=hn.prototype.fixed64,hn.prototype.float=function(Uo){return this._push(on.float.writeFloatLE,4,Uo)},hn.prototype.double=function(Uo){return this._push(on.float.writeDoubleLE,8,Uo)};var mo=on.Array.prototype.set?function(Uo,_d,tp){_d.set(Uo,tp)}:function(Uo,_d,tp){for(var ep=0;ep<Uo.length;++ep)_d[tp+ep]=Uo[ep]};hn.prototype.bytes=function(Uo){var _d=Uo.length>>>0;if(!_d)return this._push(co,1,0);if(on.isString(Uo)){var tp=hn.alloc(_d=sn.length(Uo));sn.decode(Uo,tp,0),Uo=tp}return this.uint32(_d)._push(mo,_d,Uo)},hn.prototype.string=function(Uo){var _d=un.length(Uo);return _d?this.uint32(_d)._push(un.write,_d,Uo):this._push(co,1,0)},hn.prototype.fork=function(){return this.states=new uo(this),this.head=this.tail=new Xr(to,0,0),this.len=0,this},hn.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Xr(to,0,0),this.len=0),this},hn.prototype.ldelim=function(){var Uo=this.head,_d=this.tail,tp=this.len;return this.reset().uint32(tp),tp&&(this.tail.next=Uo.next,this.tail=_d,this.len+=tp),this},hn.prototype.finish=function(){for(var Uo=this.head.next,_d=this.constructor.alloc(this.len),tp=0;Uo;)Uo.fn(Uo.val,_d,tp),tp+=Uo.len,Uo=Uo.next;return _d},hn._configure=function(Uo){rn=Uo,hn.create=fn(),rn._configure()}},3155:(Mt,st,nn)=>{Mt.exports=an;var rn=nn(1173);(an.prototype=Object.create(rn.prototype)).constructor=an;var on=nn(9693);function an(){rn.call(this)}function sn(un,Xr,to){un.length<40?on.utf8.write(un,Xr,to):Xr.utf8Write?Xr.utf8Write(un,to):Xr.write(un,to)}an._configure=function(){an.alloc=on._Buffer_allocUnsafe,an.writeBytesBuffer=on.Buffer&&on.Buffer.prototype instanceof Uint8Array&&on.Buffer.prototype.set.name==="set"?function(un,Xr,to){Xr.set(un,to)}:function(un,Xr,to){if(un.copy)un.copy(Xr,to,0,un.length);else for(var uo=0;uo<un.length;)Xr[to++]=un[uo++]}},an.prototype.bytes=function(un){on.isString(un)&&(un=on._Buffer_from(un,"base64"));var Xr=un.length>>>0;return this.uint32(Xr),Xr&&this._push(an.writeBytesBuffer,Xr,un),this},an.prototype.string=function(un){var Xr=on.Buffer.byteLength(un);return this.uint32(Xr),Xr&&this._push(sn,Xr,un),this},an._configure()},7714:(Mt,st,nn)=>{st.R=void 0;const rn=nn(6919),on=nn(7448);st.R=new class{async init(){}async createSessionHandler(an,sn){const un=new rn.Session(sn);return await un.loadModel(an),new on.OnnxjsSessionHandler(un)}}},4200:(Mt,st,nn)=>{st.c8=st.rX=void 0;const rn=nn(1670),on=nn(5381),an=nn(2157),sn=nn(2306);st.rX=()=>{if((typeof rn.env.wasm.initTimeout!="number"||rn.env.wasm.initTimeout<0)&&(rn.env.wasm.initTimeout=0),typeof rn.env.wasm.simd!="boolean"&&(rn.env.wasm.simd=!0),typeof rn.env.wasm.proxy!="boolean"&&(rn.env.wasm.proxy=!1),typeof rn.env.wasm.numThreads!="number"||!Number.isInteger(rn.env.wasm.numThreads)||rn.env.wasm.numThreads<=0){const un=typeof navigator>"u"?(0,on.cpus)().length:navigator.hardwareConcurrency;rn.env.wasm.numThreads=Math.min(4,Math.ceil((un||1)/2))}},st.c8=new class{async init(){(0,st.rX)(),await(0,an.initWasm)()}async createSessionHandler(un,Xr){const to=new sn.OnnxruntimeWebAssemblySessionHandler;return await to.loadModel(un,Xr),Promise.resolve(to)}}},6018:function(Mt,st,nn){var rn=this&&this.__createBinding||(Object.create?function(sn,un,Xr,to){to===void 0&&(to=Xr);var uo=Object.getOwnPropertyDescriptor(un,Xr);uo&&!("get"in uo?!un.__esModule:uo.writable||uo.configurable)||(uo={enumerable:!0,get:function(){return un[Xr]}}),Object.defineProperty(sn,to,uo)}:function(sn,un,Xr,to){to===void 0&&(to=Xr),sn[to]=un[Xr]}),on=this&&this.__exportStar||function(sn,un){for(var Xr in sn)Xr==="default"||Object.prototype.hasOwnProperty.call(un,Xr)||rn(un,sn,Xr)};Object.defineProperty(st,"__esModule",{value:!0}),on(nn(1670),st);const an=nn(1670);{const sn=nn(7714).R;(0,an.registerBackend)("webgl",sn,-10)}{const sn=nn(4200).c8;(0,an.registerBackend)("cpu",sn,10),(0,an.registerBackend)("wasm",sn,10),(0,an.registerBackend)("xnnpack",sn,9)}},246:(Mt,st)=>{Object.defineProperty(st,"__esModule",{value:!0}),st.createAttributeWithCacheKey=void 0;class nn{constructor(on){Object.assign(this,on)}get cacheKey(){return this._cacheKey||(this._cacheKey=Object.getOwnPropertyNames(this).sort().map(on=>`${this[on]}`).join(";")),this._cacheKey}}st.createAttributeWithCacheKey=rn=>new nn(rn)},7778:(Mt,st,nn)=>{Object.defineProperty(st,"__esModule",{value:!0}),st.Attribute=void 0;const rn=nn(1446),on=nn(9395),an=nn(9162),sn=nn(2517);var un=on.onnxruntime.experimental.fbs;class Xr{constructor(uo){if(this._attributes=new Map,uo!=null){for(const hn of uo)hn instanceof rn.onnx.AttributeProto?this._attributes.set(hn.name,[Xr.getValue(hn),Xr.getType(hn)]):hn instanceof un.Attribute&&this._attributes.set(hn.name(),[Xr.getValue(hn),Xr.getType(hn)]);if(this._attributes.size<uo.length)throw new Error("duplicated attribute names")}}set(uo,hn,fn){this._attributes.set(uo,[fn,hn])}delete(uo){this._attributes.delete(uo)}getFloat(uo,hn){return this.get(uo,"float",hn)}getInt(uo,hn){return this.get(uo,"int",hn)}getString(uo,hn){return this.get(uo,"string",hn)}getTensor(uo,hn){return this.get(uo,"tensor",hn)}getFloats(uo,hn){return this.get(uo,"floats",hn)}getInts(uo,hn){return this.get(uo,"ints",hn)}getStrings(uo,hn){return this.get(uo,"strings",hn)}getTensors(uo,hn){return this.get(uo,"tensors",hn)}get(uo,hn,fn){const co=this._attributes.get(uo);if(co===void 0){if(fn!==void 0)return fn;throw new Error(`required attribute not found: ${uo}`)}if(co[1]!==hn)throw new Error(`type mismatch: expected ${hn} but got ${co[1]}`);return co[0]}static getType(uo){const hn=uo instanceof rn.onnx.AttributeProto?uo.type:uo.type();switch(hn){case rn.onnx.AttributeProto.AttributeType.FLOAT:return"float";case rn.onnx.AttributeProto.AttributeType.INT:return"int";case rn.onnx.AttributeProto.AttributeType.STRING:return"string";case rn.onnx.AttributeProto.AttributeType.TENSOR:return"tensor";case rn.onnx.AttributeProto.AttributeType.FLOATS:return"floats";case rn.onnx.AttributeProto.AttributeType.INTS:return"ints";case rn.onnx.AttributeProto.AttributeType.STRINGS:return"strings";case rn.onnx.AttributeProto.AttributeType.TENSORS:return"tensors";default:throw new Error(`attribute type is not supported yet: ${rn.onnx.AttributeProto.AttributeType[hn]}`)}}static getValue(uo){const hn=uo instanceof rn.onnx.AttributeProto?uo.type:uo.type();if(hn===rn.onnx.AttributeProto.AttributeType.GRAPH||hn===rn.onnx.AttributeProto.AttributeType.GRAPHS)throw new Error("graph attribute is not supported yet");const fn=this.getValueNoCheck(uo);if(hn===rn.onnx.AttributeProto.AttributeType.INT&&sn.LongUtil.isLong(fn))return sn.LongUtil.longToNumber(fn);if(hn===rn.onnx.AttributeProto.AttributeType.INTS){const co=fn,lo=new Array(co.length);for(let fo=0;fo<co.length;fo++){const ho=co[fo];lo[fo]=sn.LongUtil.longToNumber(ho)}return lo}if(hn===rn.onnx.AttributeProto.AttributeType.TENSOR)return uo instanceof rn.onnx.AttributeProto?an.Tensor.fromProto(fn):an.Tensor.fromOrtTensor(fn);if(hn===rn.onnx.AttributeProto.AttributeType.TENSORS){if(uo instanceof rn.onnx.AttributeProto)return fn.map(co=>an.Tensor.fromProto(co));if(uo instanceof un.Attribute)return fn.map(co=>an.Tensor.fromOrtTensor(co))}if(hn===rn.onnx.AttributeProto.AttributeType.STRING&&uo instanceof rn.onnx.AttributeProto){const co=fn;return(0,sn.decodeUtf8String)(co)}return hn===rn.onnx.AttributeProto.AttributeType.STRINGS&&uo instanceof rn.onnx.AttributeProto?fn.map(sn.decodeUtf8String):fn}static getValueNoCheck(uo){return uo instanceof rn.onnx.AttributeProto?this.getValueNoCheckFromOnnxFormat(uo):this.getValueNoCheckFromOrtFormat(uo)}static getValueNoCheckFromOnnxFormat(uo){switch(uo.type){case rn.onnx.AttributeProto.AttributeType.FLOAT:return uo.f;case rn.onnx.AttributeProto.AttributeType.INT:return uo.i;case rn.onnx.AttributeProto.AttributeType.STRING:return uo.s;case rn.onnx.AttributeProto.AttributeType.TENSOR:return uo.t;case rn.onnx.AttributeProto.AttributeType.GRAPH:return uo.g;case rn.onnx.AttributeProto.AttributeType.FLOATS:return uo.floats;case rn.onnx.AttributeProto.AttributeType.INTS:return uo.ints;case rn.onnx.AttributeProto.AttributeType.STRINGS:return uo.strings;case rn.onnx.AttributeProto.AttributeType.TENSORS:return uo.tensors;case rn.onnx.AttributeProto.AttributeType.GRAPHS:return uo.graphs;default:throw new Error(`unsupported attribute type: ${rn.onnx.AttributeProto.AttributeType[uo.type]}`)}}static getValueNoCheckFromOrtFormat(uo){switch(uo.type()){case un.AttributeType.FLOAT:return uo.f();case un.AttributeType.INT:return uo.i();case un.AttributeType.STRING:return uo.s();case un.AttributeType.TENSOR:return uo.t();case un.AttributeType.GRAPH:return uo.g();case un.AttributeType.FLOATS:return uo.floatsArray();case un.AttributeType.INTS:{const hn=[];for(let fn=0;fn<uo.intsLength();fn++)hn.push(uo.ints(fn));return hn}case un.AttributeType.STRINGS:{const hn=[];for(let fn=0;fn<uo.stringsLength();fn++)hn.push(uo.strings(fn));return hn}case un.AttributeType.TENSORS:{const hn=[];for(let fn=0;fn<uo.tensorsLength();fn++)hn.push(uo.tensors(fn));return hn}default:throw new Error(`unsupported attribute type: ${un.AttributeType[uo.type()]}`)}}}st.Attribute=Xr},7091:(Mt,st,nn)=>{Object.defineProperty(st,"__esModule",{value:!0}),st.resolveBackend=st.backend=void 0;const rn=nn(5038),on=new Map;async function an(sn){const un=st.backend;if(un[sn]!==void 0&&function(Xr){const to=Xr;return"initialize"in to&&typeof to.initialize=="function"&&"createSessionHandler"in to&&typeof to.createSessionHandler=="function"&&"dispose"in to&&typeof to.dispose=="function"}(un[sn])){const Xr=un[sn];let to=Xr.initialize();if(typeof to=="object"&&"then"in to&&(to=await to),to)return on.set(sn,Xr),Xr}}st.backend={webgl:new rn.WebGLBackend},st.resolveBackend=async function sn(un){if(!un)return sn(["webgl"]);{const Xr=typeof un=="string"?[un]:un;for(const to of Xr){const uo=on.get(to);if(uo)return uo;const hn=await an(to);if(hn)return hn}}throw new Error("no available backend to use")}},5038:(Mt,st,nn)=>{Object.defineProperty(st,"__esModule",{value:!0}),st.WebGLBackend=void 0;const rn=nn(1670),on=nn(6231),an=nn(6416),sn=nn(7305);st.WebGLBackend=class{get contextId(){return rn.env.webgl.contextId}set contextId(un){rn.env.webgl.contextId=un}get matmulMaxBatchSize(){return rn.env.webgl.matmulMaxBatchSize}set matmulMaxBatchSize(un){rn.env.webgl.matmulMaxBatchSize=un}get textureCacheMode(){return rn.env.webgl.textureCacheMode}set textureCacheMode(un){rn.env.webgl.textureCacheMode=un}get pack(){return rn.env.webgl.pack}set pack(un){rn.env.webgl.pack=un}get async(){return rn.env.webgl.async}set async(un){rn.env.webgl.async=un}initialize(){try{return this.glContext=(0,sn.createWebGLContext)(this.contextId),typeof this.matmulMaxBatchSize!="number"&&(this.matmulMaxBatchSize=16),typeof this.textureCacheMode!="string"&&(this.textureCacheMode="full"),typeof this.pack!="boolean"&&(this.pack=!1),typeof this.async!="boolean"&&(this.async=!1),on.Logger.setWithEnv(rn.env),on.Logger.verbose("WebGLBackend",`Created WebGLContext: ${typeof this.glContext} with matmulMaxBatchSize: ${this.matmulMaxBatchSize}; textureCacheMode: ${this.textureCacheMode}; pack: ${this.pack}; async: ${this.async}.`),!0}catch(un){return on.Logger.warning("WebGLBackend",`Unable to initialize WebGLBackend. ${un}`),!1}}createSessionHandler(un){return new an.WebGLSessionHandler(this,un)}dispose(){this.glContext.dispose()}}},5107:(Mt,st,nn)=>{Object.defineProperty(st,"__esModule",{value:!0}),st.CoordsGlslLib=void 0;const rn=nn(2517),on=nn(8520),an=nn(5060),sn=nn(7859),un=nn(9390);class Xr extends on.GlslLib{constructor(uo){super(uo)}getFunctions(){return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},this.offsetToCoords()),this.coordsToOffset()),this.toVec()),this.valueFrom()),this.getCommonUtilFuncs()),this.getInputsSamplingSnippets()),this.getOutputSamplingSnippet())}getCustomTypes(){return{}}offsetToCoords(){return{offsetToCoords:new on.GlslLibRoutine(`
      vec2 offsetToCoords(int offset, int width, int height) {
        int t = offset / width;
        int s = offset - t*width;
        vec2 coords = (vec2(s,t) + vec2(0.5,0.5)) / vec2(width, height);
        return coords;
      }
      `)}}coordsToOffset(){return{coordsToOffset:new on.GlslLibRoutine(`
      int coordsToOffset(vec2 coords, int width, int height) {
        float s = coords.s * float(width);
        float t = coords.t * float(height);
        int offset = int(t) * width + int(s);
        return offset;
      }
      `)}}getOutputSamplingSnippet(){const uo=this.context.outputTextureLayout;return uo.isPacked?this.getPackedOutputSamplingSnippet(uo):this.getUnpackedOutputSamplingSnippet(uo)}getPackedOutputSamplingSnippet(uo){const hn=uo.unpackedShape,fn=[uo.width,uo.height],co={},lo="getOutputCoords";switch(hn.length){case 0:co[lo]=this.getOutputScalarCoords();break;case 1:co[lo]=this.getOutputPacked1DCoords(hn,fn);break;case 2:co[lo]=this.getOutputPacked2DCoords(hn,fn);break;case 3:co[lo]=this.getOutputPacked3DCoords(hn,fn);break;default:co[lo]=this.getOutputPackedNDCoords(hn,fn)}const fo=`
      void setOutput(vec4 val) {
        ${(0,an.getGlsl)(this.context.glContext.version).output} = val;
      }
    `;return co.floatTextureSetRGBA=new on.GlslLibRoutine(fo),co}getUnpackedOutputSamplingSnippet(uo){const hn=uo.unpackedShape,fn=[uo.width,uo.height],co={},lo="getOutputCoords";switch(hn.length){case 0:co[lo]=this.getOutputScalarCoords();break;case 1:co[lo]=this.getOutputUnpacked1DCoords(hn,fn);break;case 2:co[lo]=this.getOutputUnpacked2DCoords(hn,fn);break;case 3:co[lo]=this.getOutputUnpacked3DCoords(hn,fn);break;case 4:co[lo]=this.getOutputUnpacked4DCoords(hn,fn);break;case 5:co[lo]=this.getOutputUnpacked5DCoords(hn,fn);break;case 6:co[lo]=this.getOutputUnpacked6DCoords(hn,fn);break;default:throw new Error(`Unsupported output dimensionality: ${hn.length}`)}const fo=`
        void setOutput(float val) {
          ${(0,an.getGlsl)(this.context.glContext.version).output} = vec4(val, 0, 0, 0);
        }
    `;return co.floatTextureSetR=new on.GlslLibRoutine(fo),co}getOutputScalarCoords(){return new on.GlslLibRoutine(`
      int getOutputCoords() {
        return 0;
      }
    `)}getOutputPacked1DCoords(uo,hn){const fn=hn;let co="";return fn[0]===1?(co=`
          int getOutputCoords() {
            return 2 * int(TexCoords.y * ${fn[1]}.0);
          }
        `,new on.GlslLibRoutine(co)):fn[1]===1?(co=`
          int getOutputCoords() {
            return 2 * int(TexCoords.x * ${fn[0]}.0);
          }
        `,new on.GlslLibRoutine(co)):(co=`
        int getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                 vec2(${fn[0]}, ${fn[1]}));
          return 2 * (resTexRC.y * ${fn[0]} + resTexRC.x);
        }
      `,new on.GlslLibRoutine(co))}getOutputPacked2DCoords(uo,hn){let fn="";if(rn.ArrayUtil.arraysEqual(uo,hn))return fn=`
        ivec2 getOutputCoords() {
          return 2 * ivec2(TexCoords.xy * vec2(${hn[0]}, ${hn[1]}));
        }
      `,new on.GlslLibRoutine(fn);const co=hn,lo=Math.ceil(uo[1]/2);return fn=`
        ivec2 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${co[0]}, ${co[1]}));

          int index = resTexRC.y * ${co[0]} + resTexRC.x;

          // reverse r and c order for packed texture
          int r = imod(index, ${lo}) * 2;
          int c = 2 * (index / ${lo});

          return ivec2(r, c);
        }
      `,new on.GlslLibRoutine(fn)}getOutputPacked3DCoords(uo,hn){const fn=[hn[0],hn[1]],co=Math.ceil(uo[2]/2),lo=co*Math.ceil(uo[1]/2),fo=`
        ivec3 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${fn[0]}, ${fn[1]}));
          int index = resTexRC.y * ${fn[0]} + resTexRC.x;

          int b = index / ${lo};
          index -= b * ${lo};

          // reverse r and c order for packed texture
          int r = imod(index, ${co}) * 2;
          int c = 2 * (index / ${co});

          return ivec3(b, r, c);
        }
      `;return new on.GlslLibRoutine(fo)}getOutputPackedNDCoords(uo,hn){const fn=[hn[0],hn[1]],co=Math.ceil(uo[uo.length-1]/2),lo=co*Math.ceil(uo[uo.length-2]/2);let fo=lo,ho="",mo="b, r, c";for(let _d=2;_d<uo.length-1;_d++)fo*=uo[uo.length-_d-1],ho=`
      int b${_d} = index / ${fo};
      index -= b${_d} * ${fo};
    `+ho,mo=`b${_d}, `+mo;const Uo=`
      ivec${uo.length} getOutputCoords() {
        ivec2 resTexRC = ivec2(TexCoords.xy *
                              vec2(${fn[0]}, ${fn[1]}));
        int index = resTexRC.y * ${fn[0]} + resTexRC.x;

        ${ho}

        int b = index / ${lo};
        index -= b * ${lo};

        // reverse r and c order for packed texture
        int r = imod(index, ${co}) * 2;
        int c = 2 * (index / ${co});

        return ivec${uo.length}(${mo});
      }
    `;return new on.GlslLibRoutine(Uo)}getOutputUnpacked1DCoords(uo,hn){const fn=`
        int getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${hn[0]}, ${hn[1]}));
          return resTexRC.y * ${hn[0]} + resTexRC.x;
        }
      `;return new on.GlslLibRoutine(fn)}getOutputUnpacked2DCoords(uo,hn){const fn=`
        ivec2 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${hn[0]}, ${hn[1]}));
          int index = resTexRC.y * ${hn[0]} + resTexRC.x;
          int r = index / ${uo[1]};
          int c = index - r * ${uo[1]};
          return ivec2(r, c);
        }
      `;return new on.GlslLibRoutine(fn)}getOutputUnpacked3DCoords(uo,hn){let fn="";const co=uo.length;let lo=null;co<2&&(lo=[]),lo=new Array(co-1),lo[co-2]=uo[co-1];for(let mo=co-3;mo>=0;--mo)lo[mo]=lo[mo+1]*uo[mo+1];const fo=["r","c","d"],ho=lo.map((mo,Uo)=>`int ${fo[Uo]} = index / ${mo}; ${Uo===lo.length-1?`int ${fo[Uo+1]} = index - ${fo[Uo]} * ${mo}`:`index -= ${fo[Uo]} * ${mo}`};`).join("");return fn=`
        ivec3 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${hn[0]}, ${hn[1]}));
          int index = resTexRC.y * ${hn[0]} + resTexRC.x;
          ${ho}
          return ivec3(r, c, d);
        }
      `,new on.GlslLibRoutine(fn)}getOutputUnpacked4DCoords(uo,hn){let fn="";const co=uo.length;let lo=null;co<2&&(lo=[]),lo=new Array(co-1),lo[co-2]=uo[co-1];for(let mo=co-3;mo>=0;--mo)lo[mo]=lo[mo+1]*uo[mo+1];const fo=["r","c","d","d2"],ho=lo.map((mo,Uo)=>`int ${fo[Uo]} = index / ${mo}; ${Uo===lo.length-1?`int ${fo[Uo+1]} = index - ${fo[Uo]} * ${mo}`:`index -= ${fo[Uo]} * ${mo}`};`).join("");return fn=`
      ivec4 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${hn[0]}, ${hn[1]}));
          int index = resTexRC.y * ${hn[0]} + resTexRC.x;
          ${ho}
          return ivec4(r, c, d, d2);
        }
      `,new on.GlslLibRoutine(fn)}getOutputUnpacked5DCoords(uo,hn){let fn="";const co=uo.length;let lo=null;co<2&&(lo=[]),lo=new Array(co-1),lo[co-2]=uo[co-1];for(let mo=co-3;mo>=0;--mo)lo[mo]=lo[mo+1]*uo[mo+1];const fo=["r","c","d","d2","d3"],ho=lo.map((mo,Uo)=>`int ${fo[Uo]} = index / ${mo}; ${Uo===lo.length-1?`int ${fo[Uo+1]} = index - ${fo[Uo]} * ${mo}`:`index -= ${fo[Uo]} * ${mo}`};`).join("");return fn=`
      ivec5 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${hn[0]}, ${hn[1]}));
          int index = resTexRC.y * ${hn[0]} + resTexRC.x;
          ${ho}
          return ivec5(r, c, d, d2, d3);
        }
      `,new on.GlslLibRoutine(fn)}getOutputUnpacked6DCoords(uo,hn){let fn="";const co=uo.length;let lo=null;co<2&&(lo=[]),lo=new Array(co-1),lo[co-2]=uo[co-1];for(let mo=co-3;mo>=0;--mo)lo[mo]=lo[mo+1]*uo[mo+1];const fo=["r","c","d","d2","d3","d4"],ho=lo.map((mo,Uo)=>`int ${fo[Uo]} = index / ${mo}; ${Uo===lo.length-1?`int ${fo[Uo+1]} = index - ${fo[Uo]} * ${mo}`:`index -= ${fo[Uo]} * ${mo}`};`).join("");return fn=`
     ivec6 getOutputCoords() {
         ivec2 resTexRC = ivec2(TexCoords.xy *
                               vec2(${hn[0]}, ${hn[1]}));
         int index = resTexRC.y * ${hn[0]} + resTexRC.x;
         ${ho}
         return ivec6(r, c, d, d2, d3, d4);
       }
     `,new on.GlslLibRoutine(fn)}getCommonUtilFuncs(){const uo={};let hn="uvFromFlat";uo[hn]=new on.GlslLibRoutine(`
    vec2 uvFromFlat(int texNumR, int texNumC, int index) {
      int texC = index / texNumR;
      int texR = index - texC * texNumR;
      // TODO: swap texR, texC order in following function so row is corresponding to u and column is corresponding to
      //       v.
      return (vec2(texR, texC) + halfCR) / vec2(texNumR, texNumC);
    }
    `),hn="packedUVfrom1D",uo[hn]=new on.GlslLibRoutine(`
      vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
        int texelIndex = index / 2;
        int texR = texelIndex / texNumC;
        int texC = texelIndex - texR * texNumC;
        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
      }
      `),hn="packedUVfrom2D",uo[hn]=new on.GlslLibRoutine(`
      vec2 packedUVfrom2D(int texNumR, int texNumC, int texelsInLogicalRow, int row, int col) {
        int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
        int texR = texelIndex / texNumC;
        int texC = texelIndex - texR * texNumC;
        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
      }
      `),hn="packedUVfrom3D",uo[hn]=new on.GlslLibRoutine(`
      vec2 packedUVfrom3D(int texNumR, int texNumC,
          int texelsInBatch, int texelsInLogicalRow, int b,
          int row, int col) {
        int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
        int texR = index / texNumC;
        int texC = index - texR * texNumC;
        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
      }
      `),hn="sampleTexture";const fn=(0,an.getGlsl)(this.context.glContext.version);return uo[hn]=new on.GlslLibRoutine(`
        float sampleTexture(sampler2D textureSampler, vec2 uv) {
            return ${fn.texture2D}(textureSampler, uv).r;
        }`),uo}getInputsSamplingSnippets(){const uo={},hn=this.context.outputTextureLayout;return this.context.programInfo.inputNames.forEach((fn,co)=>{const lo=this.context.inputTextureLayouts[co],fo=(0,un.generateShaderFuncNameFromInputSamplerName)(fn);lo.isPacked?uo[fo]=this.getPackedSamplerFromInput(fo,fn,lo):uo[fo]=this.getUnpackedSamplerFromInput(fo,fn,lo);const ho=(0,un.generateShaderFuncNameFromInputSamplerNameAtOutCoords)(fn);lo.unpackedShape.length<=hn.unpackedShape.length&&(lo.isPacked?uo[ho]=this.getPackedSamplerAtOutputCoords(ho,lo,hn,fn):uo[ho]=this.getUnpackedSamplerAtOutputCoords(ho,lo,hn,fn))}),uo}getPackedSamplerAtOutputCoords(uo,hn,fn,co){const lo=hn.unpackedShape,fo=fn.unpackedShape,ho=co,mo=(0,un.generateShaderFuncNameFromInputSamplerName)(ho),Uo=lo.length,_d=fo.length,tp=rn.BroadcastUtil.getBroadcastDims(lo,fo),ep=(0,un.getCoordsDataType)(_d),np=_d-Uo;let rp;const ip=(0,un.getGlChannels)();rp=Uo===0?"":_d<2&&tp.length>=1?"coords = 0;":tp.map(lp=>`coords.${ip[lp+np]} = 0;`).join(`
`);let op="";op=_d<2&&Uo>0?"coords":lo.map((lp,dp)=>`coords.${ip[dp+np]}`).join(", ");let ap="return outputValue;";const sp=rn.ShapeUtil.size(lo)===1,up=rn.ShapeUtil.size(fo)===1;if(Uo!==1||sp||up){if(sp&&!up)ap=_d===1?`
          return vec4(outputValue.x, outputValue.x, 0., 0.);
        `:`
          return vec4(outputValue.x);
        `;else if(tp.length){const lp=Uo-2,dp=Uo-1;tp.indexOf(lp)>-1&&tp.indexOf(dp)>-1?ap="return vec4(outputValue.x);":tp.indexOf(lp)>-1?ap="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":tp.indexOf(dp)>-1&&(ap="return vec4(outputValue.xx, outputValue.zz);")}}else ap=`
        return vec4(outputValue.xy, outputValue.xy);
      `;const pp=`
      vec4 ${uo}() {
        ${ep} coords = getOutputCoords();
        
        int lastDim = coords.${ip[_d-1]};
        coords.${ip[_d-1]} = coords.${ip[_d-2]};
        coords.${ip[_d-2]} = lastDim;
      
        ${rp}
        vec4 outputValue = ${mo}(${op});
        ${ap}
      }
    `;return new on.GlslLibRoutine(pp,["coordinates.getOutputCoords"])}getUnpackedSamplerAtOutputCoords(uo,hn,fn,co){const lo=[fn.width,fn.height],fo=[hn.width,hn.height],ho=hn.unpackedShape.length,mo=fn.unpackedShape.length,Uo=hn.unpackedShape,_d=fn.unpackedShape,tp=(0,un.generateShaderFuncNameFromInputSamplerName)(co);if(ho===mo&&rn.ArrayUtil.arraysEqual(fo,lo)){const up=`
          float ${uo}() {
            return sampleTexture(${co}, TexCoords);
          }
        `;return new on.GlslLibRoutine(up,["coordinates.sampleTexture"])}const ep=(0,un.getCoordsDataType)(mo),np=rn.BroadcastUtil.getBroadcastDims(Uo,_d),rp=mo-ho;let ip;const op=(0,un.getGlChannels)();ip=ho===0?"":mo<2&&np.length>=1?"coords = 0;":np.map(up=>`coords.${op[up+rp]} = 0;`).join(`
`);let ap="";ap=mo<2&&ho>0?"coords":hn.unpackedShape.map((up,pp)=>`coords.${op[pp+rp]}`).join(", ");const sp=`
        float ${uo}() {
          ${ep} coords = getOutputCoords();
          ${ip}
          return ${tp}(${ap});
        }
      `;return new on.GlslLibRoutine(sp,["coordinates.getOutputCoords"])}getPackedSamplerFromInput(uo,hn,fn){switch(fn.unpackedShape.length){case 0:return this.getPackedSamplerScalar(uo,hn);case 1:return this.getPackedSampler1D(uo,hn,fn);case 2:return this.getPackedSampler2D(uo,hn,fn);case 3:return this.getPackedSampler3D(uo,hn,fn);default:return this.getPackedSamplerND(uo,hn,fn)}}getUnpackedSamplerFromInput(uo,hn,fn){const co=fn.unpackedShape;switch(co.length){case 0:return this.getUnpackedSamplerScalar(uo,hn,fn);case 1:return this.getUnpackedSampler1D(uo,hn,fn);case 2:return this.getUnpackedSampler2D(uo,hn,fn);case 3:return this.getUnpackedSampler3D(uo,hn,fn);case 4:return this.getUnpackedSampler4D(uo,hn,fn);case 5:return this.getUnpackedSampler5D(uo,hn,fn);case 6:return this.getUnpackedSampler6D(uo,hn,fn);default:throw new Error(`Unsupported dimension ${co.length}-D`)}}getPackedSamplerScalar(uo,hn){const fn=`
          vec4 ${uo}() {
            return ${(0,an.getGlsl)(this.context.glContext.version).texture2D}(${hn}, halfCR);
          }
        `;return new on.GlslLibRoutine(fn)}getPackedSampler1D(uo,hn,fn){const co=[fn.width,fn.height],lo=[co[1],co[0]],fo=(0,an.getGlsl)(this.context.glContext.version),ho=`vec4 ${uo}(int index) {
      vec2 uv = packedUVfrom1D(
      ${lo[0]}, ${lo[1]}, index);
      return ${fo.texture2D}(${hn}, uv);
    }`;return new on.GlslLibRoutine(ho,["coordinates.packedUVfrom1D"])}getPackedSampler2D(uo,hn,fn){const co=fn.unpackedShape,lo=[fn.width,fn.height],fo=(0,an.getGlsl)(this.context.glContext.version),ho=lo[0],mo=lo[1];if(lo!=null&&rn.ArrayUtil.arraysEqual(co,lo)){const ep=`vec4 ${uo}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${mo}.0, ${ho}.0);
        return ${fo.texture2D}(${hn}, uv);
      }`;return new on.GlslLibRoutine(ep)}const Uo=lo,_d=Math.ceil(co[1]/2),tp=`vec4 ${uo}(int row, int col) {
      vec2 uv = packedUVfrom2D(${Uo[1]}, ${Uo[0]}, ${_d}, row, col);
      return ${fo.texture2D}(${hn}, uv);
    }`;return new on.GlslLibRoutine(tp,["coordinates.packedUVfrom2D"])}getPackedSampler3D(uo,hn,fn){const co=fn.unpackedShape,lo=[fn.width,fn.height],fo=[lo[0],lo[1]],ho=(0,an.getGlsl)(this.context.glContext.version);if(co[0]===1){const ep=co.slice(1),np=[1,2],rp=(0,un.squeezeInputShape)(co,ep),ip=["b","row","col"],op=JSON.parse(JSON.stringify(fn));op.unpackedShape=rp;const ap=this.getPackedSamplerFromInput(uo,hn,op),sp=`${ap.routineBody}
      vec4 ${uo}(int b, int row, int col) {
        return ${uo}(${(0,un.getSqueezedParams)(ip,np)});
      } `;return new on.GlslLibRoutine(sp,ap.dependencies)}const mo=fo[0],Uo=fo[1],_d=Math.ceil(co[2]/2),tp=`vec4 ${uo}(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        ${Uo}, ${mo}, ${_d*Math.ceil(co[1]/2)}, ${_d}, b, row, col);
      return ${ho.texture2D}(${hn}, uv);}`;return new on.GlslLibRoutine(tp,["coordinates.packedUVfrom3D"])}getPackedSamplerND(uo,hn,fn){const co=fn.unpackedShape,lo=co.length,fo=[fn.width,fn.height],ho=(0,an.getGlsl)(this.context.glContext.version),mo=[fo[0],fo[1]],Uo=mo[1],_d=mo[0],tp=Math.ceil(co[lo-1]/2);let ep=tp*Math.ceil(co[lo-2]/2),np="int b, int row, int col",rp=`b * ${ep} + (row / 2) * ${tp} + (col / 2)`;for(let op=2;op<lo-1;op++)np=`int b${op}, `+np,ep*=co[lo-op-1],rp=`b${op} * ${ep} + `+rp;const ip=`vec4 ${uo}(${np}) {
      int index = ${rp};
      int texR = index / ${_d};
      int texC = index - texR * ${_d};
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${_d}, ${Uo});
      return ${ho.texture2D}(${hn}, uv);
    }`;return new on.GlslLibRoutine(ip)}getUnpackedSamplerScalar(uo,hn,fn){const[co,lo]=[fn.width,fn.height];if(co===1&&lo===1){const ho=`
          float ${uo}() {
            return sampleTexture(${hn}, halfCR);
          }
        `;return new on.GlslLibRoutine(ho,["coordinates.sampleTexture"])}const fo=`
        float ${uo}() {
          int offset_${hn} = coordsToOffset(TexCoords, ${co}, ${lo});
          vec2 uv = uvFromFlat(${co}, ${lo}, offset_${hn});
          return sampleTexture(${hn}, uv);
        }
      `;return new on.GlslLibRoutine(fo,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler1D(uo,hn,fn){const co=fn.width,lo=fn.height;if(lo===1&&co===1){const ho=`
        float ${uo}(int index) {
          return sampleTexture(${hn}, halfCR);
        }
      `;return new on.GlslLibRoutine(ho,["coordinates.sampleTexture"])}if(lo===1){const ho=`
          float ${uo}(int index) {
            vec2 uv = vec2((float(index) + 0.5) / ${co}.0, 0.5);
            return sampleTexture(${hn}, uv);
          }
        `;return new on.GlslLibRoutine(ho,["coordinates.sampleTexture"])}if(co===1){const ho=`
          float ${uo}(int index) {
            vec2 uv = vec2(0.5, (float(index) + 0.5) / ${lo}.0);
            return sampleTexture(${hn}, uv);
          }
        `;return new on.GlslLibRoutine(ho,["coordinates.sampleTexture"])}const fo=`
        float ${uo}(int index) {
          vec2 uv = uvFromFlat(${co}, ${lo}, index);
          return sampleTexture(${hn}, uv);
        }
      `;return new on.GlslLibRoutine(fo,["coordinates.uvFromFlat","coordinates.sampleTexture"])}getUnpackedSampler2D(uo,hn,fn){const co=fn.unpackedShape,lo=[fn.height,fn.width];if(lo!=null&&rn.ArrayUtil.arraysEqual(co,lo)){const ep=`
          float ${uo}(int row, int col) {
            vec2 uv = (vec2(row, col) + halfCR) / vec2(${lo[1]}.0, ${lo[0]}.0);
            return sampleTexture(${hn}, uv);
          }
        `;return new on.GlslLibRoutine(ep,["coordinates.sampleTexture"])}const{newShape:fo,keptDims:ho}=(0,sn.squeezeShape)(co),mo=fo;if(mo.length<co.length){const ep=(0,un.squeezeInputShape)(co,mo),np=JSON.parse(JSON.stringify(fn));np.unpackedShape=ep;const rp=["col","row"],ip=`
          ${this.getUnpackedSamplerFromInput(uo,hn,np).routineBody}
          float ${uo}(int row, int col) {
            return ${uo}(${(0,un.getSqueezedParams)(rp,ho)});
          }
        `;return new on.GlslLibRoutine(ip,["coordinates.sampleTexture"])}const Uo=lo[1],_d=lo[0];if(_d===1){const ep=`
          float ${uo}(int row, int col) {
            int offset_${hn} = coordsToOffset(TexCoords, ${Uo}, ${_d});
            float index = dot(vec3(row, col, offset_${hn}), vec3(${co[1]}, 1, 1));
            vec2 uv = vec2(0.5, (index + 0.5) / ${Uo}.0);
            return sampleTexture(${hn}, uv);
          }
        `;return new on.GlslLibRoutine(ep,["coordinates.sampleTexture","coordinates.coordsToOffset"])}if(Uo===1){const ep=`
          float ${uo}(int row, int col) {
            int offset_${hn} = coordsToOffset(TexCoords, ${Uo}, ${_d});
            float index = dot(vec3(row, col, offset_${hn}), vec3(${co[1]}, 1, 1));
            vec2 uv = vec2((index + 0.5) / ${_d}.0, 0.5);
            return sampleTexture(${hn}, uv);
          }
        `;return new on.GlslLibRoutine(ep,["coordinates.sampleTexture","coordinates.coordsToOffset"])}const tp=`
        float ${uo}(int row, int col) {
          int index = col * ${co[1]} + row;
          vec2 uv = uvFromFlat(${Uo}, ${_d}, index);
          return sampleTexture(${hn}, uv);
        }
      `;return new on.GlslLibRoutine(tp,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler3D(uo,hn,fn){const co=fn.unpackedShape,lo=co[1]*co[2],fo=co[2],{newShape:ho,keptDims:mo}=(0,sn.squeezeShape)(co),Uo=ho;if(Uo.length<co.length){const tp=(0,un.squeezeInputShape)(co,Uo),ep=["batch","col","row"],np=JSON.parse(JSON.stringify(fn));np.unpackedShape=tp;const rp=this.getUnpackedSamplerFromInput(uo,hn,np),ip=mo.reverse(),op=`
          ${rp.routineBody}
          float ${uo}(int batch, int row, int col) {
            return ${uo}(${(0,un.getSqueezedParams)(ep,ip)});
          }
        `;return new on.GlslLibRoutine(op,rp.dependencies)}const _d=`
          float ${uo}(int depth, int row, int col) {
            // Explicitly use integer operations as dot() only works on floats.
            int index = depth * ${lo} + col * ${fo} + row;
            vec2 uv = uvFromFlat(${fn.width}, ${fn.height}, index);
            return sampleTexture(${hn}, uv);
          }
      `;return new on.GlslLibRoutine(_d,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler4D(uo,hn,fn){const co=fn.unpackedShape,lo=co[3],fo=co[2]*lo,ho=`
        float ${uo}(int row, int col, int depth, int depth2) {
          int index = row * ${co[1]*fo} + col * ${fo} +
              depth2 * ${lo} + depth;
          vec2 uv = uvFromFlat(${fn.width}, ${fn.height}, index);
          return sampleTexture(${hn}, uv);
        }
      `;return new on.GlslLibRoutine(ho,["coordinates.uvFromFlat","coordinates.sampleTexture"])}getUnpackedSampler5D(uo,hn,fn){const co=fn.unpackedShape,lo=co[4],fo=co[3]*lo,ho=co[2]*fo,mo=co[1]*ho,{newShape:Uo,keptDims:_d}=(0,sn.squeezeShape)(co);if(Uo.length<co.length){const ep=(0,un.squeezeInputShape)(co,Uo),np=["row","col","depth","depth2","depth3"],rp=JSON.parse(JSON.stringify(fn));rp.unpackedShape=ep;const ip=`
          ${this.getUnpackedSamplerFromInput(uo,hn,rp).routineBody}
          float ${uo}(int row, int col, int depth, int depth2, int depth3) {
            return ${uo}(${(0,un.getSqueezedParams)(np,_d)});
          }
        `;return new on.GlslLibRoutine(ip,["coordinates.sampleTexture","coordinates.uvFromFlat"])}const tp=`
        float ${uo}(int row, int col, int depth, int depth2, int depth3) {
          int index = row * ${mo} + col * ${ho} + depth * ${fo} +
          depth3 * ${lo} + depth2;
          vec2 uv = uvFromFlat(${fn.width}, ${fn.height}, index);
          return sampleTexture(${hn}, uv);
        }
      `;return new on.GlslLibRoutine(tp,["coordinates.sampleTexture","coordinates.uvFromFlat"])}getUnpackedSampler6D(uo,hn,fn){const co=fn.unpackedShape,lo=co[5],fo=co[4]*lo,ho=co[3]*fo,mo=co[2]*ho,Uo=co[1]*mo,{newShape:_d,keptDims:tp}=(0,sn.squeezeShape)(co);if(_d.length<co.length){const np=(0,un.squeezeInputShape)(co,_d),rp=["row","col","depth","depth2","depth3","depth4"],ip=JSON.parse(JSON.stringify(fn));ip.unpackedShape=np;const op=`
            ${this.getUnpackedSamplerFromInput(uo,hn,ip).routineBody}
            float ${uo}(int row, int col, int depth,
              int depth2, int depth3, int depth4) {
              return ${uo}(${(0,un.getSqueezedParams)(rp,tp)});
            }
          `;return new on.GlslLibRoutine(op,["coordinates.sampleTexture","coordinates.uvFromFlat"])}const ep=`
          float ${uo}(int row, int col, int depth,
            int depth2, int depth3, int depth4) {
            int index = row * ${Uo} + col * ${mo} + depth * ${ho} +
            depth2 * ${fo} + depth3 * ${lo} + depth4;
            vec2 uv = uvFromFlat(${fn.width}, ${fn.height}, index);
            return sampleTexture(${hn}, uv);
          }
        `;return new on.GlslLibRoutine(ep,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}toVec(){const uo=this.context.outputTextureLayout,hn=uo.shape.length,fn=uo.strides,co=uo.width,lo=uo.height,fo=[];for(let mo=0;mo<hn-1;++mo)fo.push(`
        c[${mo}] = offset / ${fn[mo]};`),fo.push(`
        offset -= c[${mo}] * ${fn[mo]};`);fo.push(`
        c[${hn-1}] = offset;`);const ho=`
      void toVec(vec2 texCoords, out int c[${hn}]) {
        int offset = coordsToOffset(texCoords, ${co}, ${lo});
        ${fo.join("")}
      }
      void toVec(int offset, out int c[${hn}]) {
        ${fo.join("")}
      }
    `;return{toVec:new on.GlslLibRoutine(ho,["coordinates.coordsToOffset"])}}valueFrom(){const uo={};return this.context.programInfo.inputNames.forEach((hn,fn)=>{const co=this.context.inputTextureLayouts[fn],lo=(co.unpackedShape.length>0?co.unpackedShape:co.shape).length;let fo=`_${hn}`;uo[fo]=new on.GlslLibRoutine(this.getValueFromSingle(hn,lo,co.width,co.height,!1),[`shapeUtils.indicesToOffset${fo}`,"coordinates.offsetToCoords","fragcolor.getColorAsFloat"]),fo+="_T",uo[fo]=new on.GlslLibRoutine(this.getValueFromSingle(hn,lo,co.width,co.height,!0),[`shapeUtils.indicesToOffset${fo}`,"coordinates.offsetToCoords","fragcolor.getColorAsFloat"])}),uo}getValueFromSingle(uo,hn,fn,co,lo){let fo=`_${uo}`;return lo&&(fo+="_T"),`
        float ${fo}(int m[${hn}]) {
          int offset = indicesToOffset${fo}(m);
          vec2 coords = offsetToCoords(offset, ${fn}, ${co});
          float value = getColorAsFloat(${(0,an.getGlsl)(this.context.glContext.version).texture2D}(${uo}, coords));
          return value;
        }
        `}getPackedValueFrom(uo,hn,fn,co,lo){let fo=`_${uo}_Pack`;return lo&&(fo+="_T"),`
        vec4 ${fo}(int m[${hn}]) {
          int offset = indicesToOffset_${uo}(m);
          vec2 coords = offsetToCoords(offset, ${fn}, ${co});
          return ${(0,an.getGlsl)(this.context.glContext.version).texture2D}(${uo}, coords);
        }
        `}}st.CoordsGlslLib=Xr},8520:(Mt,st)=>{var nn;Object.defineProperty(st,"__esModule",{value:!0}),st.TopologicalSortGlslRoutines=st.GlslLibRoutineNode=st.GlslLibRoutine=st.GlslLib=st.GlslContext=st.FunctionType=void 0,(nn=st.FunctionType||(st.FunctionType={}))[nn.ValueBased=0]="ValueBased",nn[nn.Positional=1]="Positional",st.GlslContext=class{constructor(rn,on,an,sn){this.glContext=rn,this.programInfo=on,this.inputTextureLayouts=an,this.outputTextureLayout=sn}},st.GlslLib=class{constructor(rn){this.context=rn}},st.GlslLibRoutine=class{constructor(rn,on){this.routineBody=rn,this.dependencies=on}},st.GlslLibRoutineNode=class{constructor(rn,on,an){this.name=rn,this.dependencies=an||[],on&&(this.routineBody=on)}addDependency(rn){rn&&this.dependencies.push(rn)}},st.TopologicalSortGlslRoutines=class{static returnOrderedNodes(rn){if(!rn||rn.length===0)return[];if(rn.length===1)return rn;const on=new Set,an=new Set,sn=new Array;return this.createOrderedNodes(rn,on,an,sn),sn}static createOrderedNodes(rn,on,an,sn){for(let un=0;un<rn.length;++un)this.dfsTraverse(rn[un],on,an,sn)}static dfsTraverse(rn,on,an,sn){if(!rn||an.has(rn.name))return;if(on.has(rn.name))throw new Error("Cyclic dependency detected. Can't topologically sort routines needed for shader.");on.add(rn.name);const un=rn.dependencies;if(un&&un.length>0)for(let Xr=0;Xr<un.length;++Xr)this.dfsTraverse(un[Xr],on,an,sn);sn.push(rn),an.add(rn.name),on.delete(rn.name)}}},7341:(Mt,st,nn)=>{Object.defineProperty(st,"__esModule",{value:!0}),st.EncodingGlslLib=void 0;const rn=nn(8520);class on extends rn.GlslLib{constructor(sn){super(sn)}getFunctions(){return Object.assign(Object.assign({},this.encodeFloat32()),this.decodeFloat32())}getCustomTypes(){return{}}encodeFloat32(){return{encode:new rn.GlslLibRoutine(`highp vec4 encode(highp float f) {
        return vec4(f, 0.0, 0.0, 0.0);
      }
        `)}}decodeFloat32(){return{decode:new rn.GlslLibRoutine(`highp float decode(highp vec4 rgba) {
        return rgba.r;
      }
        `)}}encodeUint8(){const sn=on.isLittleEndian()?"rgba.rgba=rgba.abgr;":"";return{encode:new rn.GlslLibRoutine(`
      highp vec4 encode(highp float f) {
        highp float F = abs(f);
        highp float Sign = step(0.0,-f);
        highp float Exponent = floor(log2(F));
        highp float Mantissa = (exp2(- Exponent) * F);
        Exponent = floor(log2(F) + 127.0) + floor(log2(Mantissa));
        highp vec4 rgba;
        rgba[0] = 128.0 * Sign  + floor(Exponent*exp2(-1.0));
        rgba[1] = 128.0 * mod(Exponent,2.0) + mod(floor(Mantissa*128.0),128.0);
        rgba[2] = floor(mod(floor(Mantissa*exp2(23.0 -8.0)),exp2(8.0)));
        rgba[3] = floor(exp2(23.0)*mod(Mantissa,exp2(-15.0)));
        ${sn}
        rgba = rgba / 255.0; // values need to be normalized to [0,1]
        return rgba;
    }
        `)}}decodeUint8(){const sn=on.isLittleEndian()?"rgba.rgba=rgba.abgr;":"";return{decode:new rn.GlslLibRoutine(`
        highp float decode(highp vec4 rgba) {
          rgba = rgba * 255.0; // values need to be de-normalized from [0,1] to [0,255]
          ${sn}
          highp float Sign = 1.0 - step(128.0,rgba[0])*2.0;
          highp float Exponent = 2.0 * mod(rgba[0],128.0) + step(128.0,rgba[1]) - 127.0;
          highp float Mantissa = mod(rgba[1],128.0)*65536.0 + rgba[2]*256.0 +rgba[3] + float(0x800000);
          highp float Result =  Sign * exp2(Exponent) * (Mantissa * exp2(-23.0 ));
          return Result;
      }
        `)}}static isLittleEndian(){const sn=new ArrayBuffer(4),un=new Uint32Array(sn),Xr=new Uint8Array(sn);if(un[0]=3735928559,Xr[0]===239)return!0;if(Xr[0]===222)return!1;throw new Error("unknown endianness")}}st.EncodingGlslLib=on},9894:(Mt,st,nn)=>{Object.defineProperty(st,"__esModule",{value:!0}),st.FragColorGlslLib=void 0;const rn=nn(8520),on=nn(5060);class an extends rn.GlslLib{constructor(un){super(un)}getFunctions(){return Object.assign(Object.assign({},this.setFragColor()),this.getColorAsFloat())}getCustomTypes(){return{}}setFragColor(){const un=(0,on.getGlsl)(this.context.glContext.version);return{setFragColor:new rn.GlslLibRoutine(`
        void setFragColor(float value) {
            ${un.output} = encode(value);
        }
        `,["encoding.encode"])}}getColorAsFloat(){return{getColorAsFloat:new rn.GlslLibRoutine(`
        float getColorAsFloat(vec4 color) {
            return decode(color);
        }
        `,["encoding.decode"])}}}st.FragColorGlslLib=an},2848:(Mt,st)=>{Object.defineProperty(st,"__esModule",{value:!0}),st.replaceInlines=void 0;const nn=/@inline[\s\n\r]+(\w+)[\s\n\r]+([0-9a-zA-Z_]+)\s*\(([^)]*)\)\s*{(([^}]|[\n\r])*)}/gm;st.replaceInlines=function(rn){const on={};let an;for(;(an=nn.exec(rn))!==null;){const sn=an[3].split(",").map(un=>{const Xr=un.trim().split(" ");return Xr&&Xr.length===2?{type:Xr[0],name:Xr[1]}:null}).filter(un=>un!==null);on[an[2]]={params:sn,body:an[4]}}for(const sn in on){const un="(\\w+)?\\s+([_0-9a-zA-Z]+)\\s+=\\s+__FUNC__\\((.*)\\)\\s*;".replace("__FUNC__",sn),Xr=new RegExp(un,"gm");for(;(an=Xr.exec(rn))!==null;){const to=an[1],uo=an[2],hn=an[3].split(","),fn=to?`${to} ${uo};`:"";let co=on[sn].body,lo="";on[sn].params.forEach((ho,mo)=>{ho&&(lo+=`${ho.type} ${ho.name} = ${hn[mo]};
`)}),co=`${lo}
 ${co}`,co=co.replace("return",`${uo} = `);const fo=`
      ${fn}
      {
        ${co}
      }
      `;rn=rn.replace(an[0],fo)}}return rn.replace(nn,"")}},8879:(Mt,st,nn)=>{Object.defineProperty(st,"__esModule",{value:!0}),st.GlslPreprocessor=void 0;const rn=nn(8520),on=nn(2848),an=nn(5483),sn=nn(5060);st.GlslPreprocessor=class{constructor(un,Xr,to,uo){this.libs={},this.glslLibRoutineDependencyGraph={},this.context=new rn.GlslContext(un,Xr,to,uo),Object.keys(an.glslRegistry).forEach(fn=>{const co=new an.glslRegistry[fn](this.context);this.libs[fn]=co});const hn=this.glslLibRoutineDependencyGraph;for(const fn in this.libs){const co=this.libs[fn].getFunctions();for(const lo in co){const fo=fn+"."+lo;let ho;hn[fo]?(ho=hn[fo],ho.routineBody=co[lo].routineBody):(ho=new rn.GlslLibRoutineNode(fo,co[lo].routineBody),hn[fo]=ho);const mo=co[lo].dependencies;if(mo)for(let Uo=0;Uo<mo.length;++Uo)if(hn[mo[Uo]])ho.addDependency(hn[mo[Uo]]);else{const _d=new rn.GlslLibRoutineNode(mo[Uo]);hn[mo[Uo]]=_d,ho.addDependency(_d)}}}}preprocess(){const un=this.context.programInfo;let Xr=un.shaderSource;return this.context.programInfo.hasMain||(Xr=`${Xr}
      ${(0,sn.getDefaultFragShaderMain)(this.context.glContext.version,this.context.outputTextureLayout.shape.length)}`),Xr=(0,on.replaceInlines)(Xr),`${(0,sn.getFragShaderPreamble)(this.context.glContext.version)}
    ${this.getUniforms(un.inputNames,un.variables)}
    ${this.getImports(Xr)}
    ${Xr}`}getImports(un){const Xr=this.selectGlslLibRoutinesToBeIncluded(un);if(Xr.length===0)return"";let to="";for(let uo=0;uo<Xr.length;++uo){if(!Xr[uo].routineBody)throw new Error(`Missing body for the Glsl Library routine: ${Xr[uo].name}`);to+=Xr[uo].routineBody+`
`}return to}selectGlslLibRoutinesToBeIncluded(un){const Xr=[];return Object.keys(this.glslLibRoutineDependencyGraph).forEach(to=>{const uo=to.split(".")[1];un.indexOf(uo)!==-1&&Xr.push(this.glslLibRoutineDependencyGraph[to])}),rn.TopologicalSortGlslRoutines.returnOrderedNodes(Xr)}getUniforms(un,Xr){const to=[];if(un)for(const uo of un)to.push(`uniform sampler2D ${uo};`);if(Xr)for(const uo of Xr)to.push(`uniform ${uo.type} ${uo.name}${uo.arrayLength?`[${uo.arrayLength}]`:""};`);return to.join(`
`)}}},5483:(Mt,st,nn)=>{Object.defineProperty(st,"__esModule",{value:!0}),st.glslRegistry=void 0;const rn=nn(5107),on=nn(7341),an=nn(9894),sn=nn(2655),un=nn(3891);st.glslRegistry={encoding:on.EncodingGlslLib,fragcolor:an.FragColorGlslLib,vec:un.VecGlslLib,shapeUtils:sn.ShapeUtilsGlslLib,coordinates:rn.CoordsGlslLib}},2655:(Mt,st,nn)=>{Object.defineProperty(st,"__esModule",{value:!0}),st.ShapeUtilsGlslLib=void 0;const rn=nn(8520);class on extends rn.GlslLib{constructor(sn){super(sn)}getFunctions(){return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},this.bcastIndex()),this.bcastMatmulIndex()),this.offsetToIndices()),this.indicesToOffset()),this.incrementIndices())}getCustomTypes(){return{}}bcastIndex(){const sn=this.context.outputTextureLayout.shape.length,un={};return this.context.programInfo.inputNames.forEach((Xr,to)=>{const uo=this.context.inputTextureLayouts[to].unpackedShape;if(uo.length<=sn){const hn=uo.length,fn=sn-hn,co=`bcastIndices_${Xr}`;let lo="";for(let ho=0;ho<hn;++ho)lo+=`
          realIndices[${ho}] = int( mod(float(bcastedIndices[${fn+ho}]), ${uo[ho]}.0) );
          `;const fo=`
        void ${co} (int bcastedIndices[${sn}], out int realIndices[${hn}]) {
          ${lo}
        }
        `;un[co]=new rn.GlslLibRoutine(fo)}}),un}bcastMatmulIndex(){const sn=this.context.outputTextureLayout.shape.length,un={};return this.context.programInfo.inputNames.forEach((Xr,to)=>{const uo=this.context.inputTextureLayouts[to].shape;if(!(uo.length<2||uo.length>sn)){const hn=uo.length,fn=sn-hn,co=`bcastMatmulIndices_${Xr}`;let lo="";for(let ho=0;ho<hn-2;++ho)lo+=`
          realIndices[${ho}] = int( mod(float(bcastedIndices[${fn+ho}]), ${uo[ho]}.0) );
          `;const fo=`
        void ${co}(int bcastedIndices[${sn}], out int realIndices[${hn}]) {
          ${lo}
          realIndices[${hn-1}] = bcastedIndices[${sn-1}];
          realIndices[${hn-2}] = bcastedIndices[${sn-2}];
        }
        `;un[co]=new rn.GlslLibRoutine(fo)}}),un}indicesToOffset(){const sn={};return this.context.programInfo.inputNames.forEach((un,Xr)=>{const to=this.context.inputTextureLayouts[Xr].shape,uo=this.context.inputTextureLayouts[Xr].strides,hn=to.length;let fn=`indicesToOffset_${un}`;sn[fn]=new rn.GlslLibRoutine(on.indexToOffsetSingle(fn,hn,uo)),fn=`indicesToOffset_${un}_T`,sn[fn]=new rn.GlslLibRoutine(on.indexToOffsetSingle(fn,hn,uo.slice().reverse()))}),sn}static indexToOffsetSingle(sn,un,Xr){let to="";for(let uo=un-1;uo>=0;--uo)to+=`
        offset += indices[${uo}] * ${Xr[uo]};
        `;return`
      int ${sn}(int indices[${un}]) {
        int offset = 0;
        ${to}
        return offset;
      }
      `}offsetToIndices(){const sn={};return this.context.programInfo.inputNames.forEach((un,Xr)=>{const to=this.context.inputTextureLayouts[Xr].shape,uo=this.context.inputTextureLayouts[Xr].strides,hn=to.length;let fn=`offsetToIndices_${un}`;sn[fn]=new rn.GlslLibRoutine(on.offsetToIndicesSingle(fn,hn,uo)),fn=`offsetToIndices_${un}_T`,sn[fn]=new rn.GlslLibRoutine(on.offsetToIndicesSingle(fn,hn,uo.slice().reverse()))}),sn}static offsetToIndicesSingle(sn,un,Xr){const to=[];for(let uo=0;uo<un-1;++uo)to.push(`
      indices[${uo}] = offset / ${Xr[uo]};`),to.push(`
        offset -= indices[${uo}] * ${Xr[uo]};`);return to.push(`
      indices[${un-1}] = offset;`),`
      void ${sn}(int offset, out int indices[${un}]) {
        ${to.join("")}
      }
      `}incrementIndices(){const sn={};return this.context.programInfo.inputNames.forEach((un,Xr)=>{const to=this.context.inputTextureLayouts[Xr].shape,uo=to.length,hn=`incrementIndices_${un}`;let fn="";for(let lo=0;lo<uo;++lo)fn+=`
        shape[${lo}] = ${to[lo]};`;const co=`
        void ${hn}(int axis, out int indices[${uo}]) {
          int shape[${uo}];
          ${fn};
          for(int i = ${uo} -1 ; i >= 0; --i) {
            if(i > axis) continue;
            indices[i] += 1;
            if(indices[i] < shape[i]) {
              break;
            }
            indices[i] = 0;
          }
        }
        `;sn[hn]=new rn.GlslLibRoutine(co)}),sn}}st.ShapeUtilsGlslLib=on},5060:(Mt,st)=>{Object.defineProperty(st,"__esModule",{value:!0}),st.getDefaultFragShaderMain=st.getFragShaderPreamble=st.getVertexShaderSource=st.getGlsl=void 0;const nn={version:"",attribute:"attribute",varyingVertex:"varying",varyingFrag:"varying",texture2D:"texture2D",output:"gl_FragColor",outputDeclaration:""},rn={version:"#version 300 es",attribute:"in",varyingVertex:"out",varyingFrag:"in",texture2D:"texture",output:"outputColor",outputDeclaration:"out vec4 outputColor;"};function on(an){return an===1?nn:rn}st.getGlsl=on,st.getVertexShaderSource=function(an){const sn=on(an);return`${sn.version}
      precision highp float;
      ${sn.attribute} vec3 position;
      ${sn.attribute} vec2 textureCoord;

      ${sn.varyingVertex} vec2 TexCoords;

      void main()
      {
          gl_Position = vec4(position, 1.0);
          TexCoords = textureCoord;
      }`},st.getFragShaderPreamble=function(an){const sn=on(an);return`${sn.version}
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    ${sn.varyingFrag} vec2 TexCoords;
    ${sn.outputDeclaration}
    const vec2 halfCR = vec2(0.5, 0.5);

    // Custom vector types to handle higher dimenalities.
    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    `},st.getDefaultFragShaderMain=function(an,sn){return`
  void main() {
    int indices[${sn}];
    toVec(TexCoords, indices);
    vec4 result = vec4(process(indices));
    ${on(an).output} = result;
  }
  `}},3891:(Mt,st,nn)=>{Object.defineProperty(st,"__esModule",{value:!0}),st.VecGlslLib=void 0;const rn=nn(8520);class on extends rn.GlslLib{constructor(sn){super(sn)}getCustomTypes(){return{}}getFunctions(){return Object.assign(Object.assign(Object.assign(Object.assign({},this.binaryVecFunctions()),this.copyVec()),this.setVecItem()),this.getVecItem())}binaryVecFunctions(){const sn=this.context.outputTextureLayout.shape.length,un={add:"+=",sub:"-=",mul:"*=",div:"/="},Xr={};for(const to in un){const uo=`${to}Vec`;let hn="";for(let co=0;co<sn;++co)hn+=`
          dest[${co}] ${un[to]} src[${co}];
          `;const fn=`
        void ${uo}(int src[${sn}], out int dest[${sn}]) {
          ${hn}
        }
        `;Xr[uo]=new rn.GlslLibRoutine(fn)}return Xr}copyVec(){const sn=this.context.outputTextureLayout.shape.length;let un="";for(let to=0;to<sn;++to)un+=`
        dest[${to}] = src[${to}];
        `;const Xr=`
      void copyVec(int src[${sn}], out int dest[${sn}]) {
        ${un}
      }
      `;return{copyVec:new rn.GlslLibRoutine(Xr)}}setVecItem(){const sn=this.context.outputTextureLayout.shape.length;let un=`
        if(index < 0)
            index =${sn} + index;
        if (index == 0)
            m[0] = value;
        `;for(let to=1;to<sn-1;++to)un+=`
        else if (index == ${to})
            m[${to}] = value;
            `;un+=`
        else
            m[${sn-1}] = value;
        `;const Xr=`
      void setVecItem(out int m[${sn}], int index, int value) {
        ${un}
      }
        `;return{setVecItem:new rn.GlslLibRoutine(Xr)}}getVecItem(){const sn=this.context.outputTextureLayout.shape.length;let un=`
        if(index < 0)
            index = ${sn} + index;
        if (index == 0)
            return m[0];
      `;for(let to=1;to<sn-1;++to)un+=`
        else if (index == ${to})
            return m[${to}];
      `;un+=`
        else
            return m[${sn-1}];
        `;const Xr=`
      int getVecItem(int m[${sn}], int index) {
        ${un}
      }
    `;return{getVecItem:new rn.GlslLibRoutine(Xr)}}}st.VecGlslLib=on},8316:(Mt,st,nn)=>{Object.defineProperty(st,"__esModule",{value:!0}),st.WebGLInferenceHandler=void 0;const rn=nn(6231),on=nn(9162),an=nn(2517),sn=nn(2403),un=nn(7019),Xr=nn(8710),to=nn(5611),uo=nn(4057),hn=nn(2039);st.WebGLInferenceHandler=class{constructor(fn){this.session=fn,this.packedTextureDataCache=new Map,this.unpackedTextureDataCache=new Map}calculateTextureWidthAndHeight(fn,co){return(0,uo.calculateTextureWidthAndHeight)(this.session.layoutStrategy,fn,co)}executeProgram(fn,co){if(co.length<fn.inputNames.length)throw new Error(`Input size mustn't be less than ${fn.inputNames.length}.`);if(fn.inputNames.length!==fn.inputTypes.length)throw new Error("input names size does not match input types");const lo=[];for(let tp=0;tp<fn.inputNames.length;++tp)lo[tp]=this.getOrCreateTextureData(co[tp],fn.inputTypes[tp]);const fo=((tp,ep)=>{const np=ep.map(ip=>`${ip.unpackedShape.join(",")};${ip.width}x${ip.height}`).join("_");let rp=tp.name;return tp.cacheHint&&(rp+="["+tp.cacheHint+"]"),rp+=":"+np,rp})(fn,lo);let ho=this.session.programManager.getArtifact(fo);const mo=ho?ho.programInfo:typeof fn.get=="function"?fn.get():fn,Uo=(0,uo.createTextureLayoutFromTextureType)(this.session.layoutStrategy,mo.output.dims,mo.output.textureType),_d=this.createTextureData(Uo,mo.output.type);return ho||(ho=this.session.programManager.build(mo,lo,_d),this.session.programManager.setArtifact(fo,ho)),this.runProgram(ho,lo,_d),_d}run(fn,co){return this.executeProgram(fn,co).tensor}runProgram(fn,co,lo){for(let fo=0;fo<co.length;++fo)if(!!co[fo].isPacked!=(fn.programInfo.inputTypes[fo]===hn.TextureType.packed))throw new Error(`input[${fo}] property packed inconsistent`);if(!!lo.isPacked!=(fn.programInfo.output.textureType===hn.TextureType.packed))throw new Error("output property packed inconsistent");this.session.programManager.run(fn,co,lo)}getOrCreateTextureData(fn,co){let lo=this.getTextureData(fn.dataId,co===hn.TextureType.packed);if(!lo&&(lo=this.getTextureData(fn.dataId,co!==hn.TextureType.packed),lo))return co===hn.TextureType.packed?this.pack(lo):this.unpack(lo);if(!lo){const fo=(0,uo.createTextureLayoutFromTextureType)(this.session.layoutStrategy,fn.dims,co);if(co===hn.TextureType.packedLastDimension){const Uo=fn.dims;if(Uo.length===4){const _d=[Uo[0],Math.ceil(Uo[1]*Uo[2]*Uo[3]/4)],tp=(0,uo.createTextureLayoutFromTextureType)(this.session.layoutStrategy,_d,co);let ep=fn.numberData;if(Uo[1]*Uo[2]*Uo[3]%4!=0){const np=Uo[0],rp=Uo[1]*Uo[2]*Uo[3],ip=Math.ceil(rp*1/4)*4;ep=new Float32Array(np*ip);for(let op=0;op<np;++op){const ap=op*rp,sp=op*ip+op%1*rp;ep.set(fn.numberData.subarray(ap,ap+rp),sp)}}return this.createTextureData(tp,fn.type,ep,fn,1)}}if(co===hn.TextureType.packed){const ho=(0,uo.createTextureLayoutFromShape)(this.session.layoutStrategy,fn.dims,1,[],{reverseWH:!0}),mo=this.createTextureData(ho,fn.type,fn.numberData,fn,1);lo=this.pack(mo)}else lo=this.createTextureData(fo,fn.type,fn.numberData,fn,1)}return lo}createTextureDataFromLayoutBindTensor(fn,co,lo,fo){return this.createTextureData(fn,co,lo,fo,1)}createTextureData(fn,co,lo,fo,ho){rn.Logger.verbose("InferenceHandler",`Creating TextureData: layout:[${JSON.stringify(fn)}]`);const mo=this.session.textureManager.createTextureFromLayout(co,fn,lo,ho);return this.createTextureDataFromTexture(fn,co,mo,fo)}reshapeUnpacked(fn,co){const lo=this.getOrCreateTextureData(fn,hn.TextureType.unpacked),fo={channels:lo.channels,height:lo.height,width:lo.width,shape:co.length!==0?co:[1],strides:an.ShapeUtil.computeStrides(co),unpackedShape:co};return this.createTextureDataFromTexture(fo,fn.type,lo.texture).tensor}reshapePacked(fn,co){const lo=this.getOrCreateTextureData(fn,hn.TextureType.packed);if((0,un.isReshapeCheap)(fn.dims,co)){const _d={channels:lo.channels,height:lo.height,width:lo.width,shape:co.length!==0?co:[1],strides:an.ShapeUtil.computeStrides(co),unpackedShape:co,isPacked:!0};return this.createTextureDataFromTexture(_d,fn.type,lo.texture).tensor}const fo=(0,un.processDims3D)(fn.dims),ho=(0,un.processDims3D)(co),mo=this.reshapePacked(fn,fo),Uo=this.run((0,un.createPackedReshape3DProgramInfoLoader)(this,mo,ho),[mo]);return this.reshapePacked(Uo,co)}cast(fn,co){const lo=this.getOrCreateTextureData(fn,hn.TextureType.unpacked);return this.createTextureDataFromTexture(lo,co,lo.texture).tensor}createTextureDataFromTexture(fn,co,lo,fo,ho){const mo=Object.assign(Object.assign({},fn),{tensor:fo||new on.Tensor(fn.unpackedShape,co,Uo=>this.readTexture(mo),async Uo=>this.readTextureAsync(mo),void 0,ho),texture:lo});return this.setTextureData(mo.tensor.dataId,mo,fn.isPacked),mo}getTextureData(fn,co=!1){return this.session.isInitializer(fn)?this.session.getTextureData(fn,co):co?this.packedTextureDataCache.get(fn):this.unpackedTextureDataCache.get(fn)}setTextureData(fn,co,lo=!1){this.session.isInitializer(fn)?this.session.setTextureData(fn,co,lo):(lo?this.packedTextureDataCache:this.unpackedTextureDataCache).set(fn,co)}isTextureLayoutCached(fn,co=!1){return!!this.getTextureData(fn.dataId,co)}dispose(){this.session.textureManager.clearActiveTextures(),this.packedTextureDataCache.forEach(fn=>this.session.textureManager.releaseTexture(fn)),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache.forEach(fn=>this.session.textureManager.releaseTexture(fn)),this.unpackedTextureDataCache=new Map}readTexture(fn){return fn.isPacked?this.readTexture(this.unpack(fn)):this.session.backend.glContext.isFloat32DownloadSupported?this.session.textureManager.readTexture(fn,fn.tensor.type,fn.channels):this.session.textureManager.readUint8TextureAsFloat((0,Xr.encodeAsUint8)(this,fn))}async readTextureAsync(fn){return fn.isPacked?this.readTextureAsync(this.unpack(fn)):this.session.backend.glContext.isFloat32DownloadSupported?this.session.textureManager.readTextureAsync(fn,fn.tensor.type,fn.channels):this.session.textureManager.readUint8TextureAsFloat((0,Xr.encodeAsUint8)(this,fn))}pack(fn){return this.executeProgram((0,sn.createPackProgramInfoLoader)(this,fn.tensor),[fn.tensor])}unpack(fn){return this.executeProgram((0,to.createUnpackProgramInfoLoader)(this,fn.tensor),[fn.tensor])}}},1640:function(Mt,st,nn){var rn=this&&this.__createBinding||(Object.create?function(mp,xp,_p,Sp){Sp===void 0&&(Sp=_p);var Cp=Object.getOwnPropertyDescriptor(xp,_p);Cp&&!("get"in Cp?!xp.__esModule:Cp.writable||Cp.configurable)||(Cp={enumerable:!0,get:function(){return xp[_p]}}),Object.defineProperty(mp,Sp,Cp)}:function(mp,xp,_p,Sp){Sp===void 0&&(Sp=_p),mp[Sp]=xp[_p]}),on=this&&this.__setModuleDefault||(Object.create?function(mp,xp){Object.defineProperty(mp,"default",{enumerable:!0,value:xp})}:function(mp,xp){mp.default=xp}),an=this&&this.__importStar||function(mp){if(mp&&mp.__esModule)return mp;var xp={};if(mp!=null)for(var _p in mp)_p!=="default"&&Object.prototype.hasOwnProperty.call(mp,_p)&&rn(xp,mp,_p);return on(xp,mp),xp};Object.defineProperty(st,"__esModule",{value:!0}),st.WEBGL_OP_RESOLVE_RULES=void 0;const sn=nn(2898),un=an(nn(7839)),Xr=nn(4196),to=nn(2069),uo=nn(8138),hn=nn(9663),fn=nn(5193),co=nn(7992),lo=nn(1253),fo=nn(4776),ho=nn(6572),mo=nn(3346),Uo=nn(5623),_d=nn(2870),tp=nn(2143),ep=nn(4939),np=nn(718),rp=nn(2268),ip=nn(8117),op=nn(2278),ap=nn(5524),sp=nn(5975),up=nn(3933),pp=nn(6558),lp=nn(5723),dp=nn(3738),cp=an(nn(4909)),fp=nn(8428),gp=nn(9793);st.WEBGL_OP_RESOLVE_RULES=[["Abs","","6+",cp.abs],["Acos","","7+",cp.acos],["Add","","7+",un.add],["And","","7+",un.and],["Asin","","7+",cp.asin],["Atan","","7+",cp.atan],["AveragePool","","7+",tp.averagePool,tp.parseAveragePoolAttributes],["BatchNormalization","","7+",sn.batchNormalization,sn.parseBatchNormalizationAttributes],["Cast","","6+",Xr.cast,Xr.parseCastAttributes],["Ceil","","6+",cp.ceil],["Clip","","6-10",cp.clip,cp.parseClipAttributes],["Clip","","11+",cp.clipV11],["Concat","","4+",to.concat,to.parseConcatAttributes],["Conv","","1+",uo.conv,uo.parseConvAttributes],["ConvTranspose","","1+",hn.convTranspose,hn.parseConvTransposeAttributes],["Cos","","7+",cp.cos],["Div","","7+",un.div],["Dropout","","7+",cp.identity],["DepthToSpace","","1+",fn.depthToSpace,fn.parseDepthToSpaceAttributes],["Equal","","7+",un.equal],["Elu","","6+",cp.elu,cp.parseEluAttributes],["Exp","","6+",cp.exp],["Flatten","","1+",co.flatten,co.parseFlattenAttributes],["Floor","","6+",cp.floor],["FusedConv","com.microsoft","1+",uo.conv,uo.parseConvAttributes],["Gather","","1+",lo.gather,lo.parseGatherAttributes],["Gemm","","7-10",fo.gemm,fo.parseGemmAttributesV7],["Gemm","","11+",fo.gemm,fo.parseGemmAttributesV11],["GlobalAveragePool","","1+",tp.globalAveragePool,tp.parseGlobalAveragePoolAttributes],["GlobalMaxPool","","1+",tp.globalMaxPool],["Greater","","7+",un.greater],["Identity","","1+",cp.identity],["ImageScaler","","1+",ho.imageScaler,ho.parseImageScalerAttributes],["InstanceNormalization","","6+",mo.instanceNormalization,mo.parseInstanceNormalizationAttributes],["LeakyRelu","","6+",cp.leakyRelu,cp.parseLeakyReluAttributes],["Less","","7+",un.less],["Log","","6+",cp.log],["MatMul","","1+",Uo.matMul,Uo.parseMatMulAttributes],["MaxPool","","1+",tp.maxPool,tp.parseMaxPoolAttributes],["Mul","","7+",un.mul],["Neg","","6+",cp.neg],["Not","","1+",cp.not],["Or","","7+",un.or],["Pad","","2-10",_d.padV2,_d.parsePadAttributesV2],["Pad","","11+",_d.padV11,_d.parsePadAttributesV11],["Pow","","7+",un.pow],["PRelu","","7+",un.pRelu],["ReduceLogSum","","1+",ep.reduceLogSum,ep.parseReduceAttributes],["ReduceMax","","1+",ep.reduceMax,ep.parseReduceAttributes],["ReduceMean","","1+",ep.reduceMean,ep.parseReduceAttributes],["ReduceMin","","1+",ep.reduceMin,ep.parseReduceAttributes],["ReduceProd","","1+",ep.reduceProd,ep.parseReduceAttributes],["ReduceSum","","1-12",ep.reduceSum,ep.parseReduceAttributes],["ReduceSumSquare","","1+",ep.reduceLogSumSquare,ep.parseReduceAttributes],["Relu","","6+",cp.relu],["Reshape","","5+",np.reshape],["Resize","","10",rp.resize,rp.parseResizeAttributesV10],["Resize","","11+",rp.resize,rp.parseResizeAttributesV11],["Shape","","1+",ip.shape],["Sigmoid","","6+",cp.sigmoid],["Sin","","7+",cp.sin],["Slice","","10+",op.sliceV10],["Slice","","1-9",op.slice,op.parseSliceAttributes],["Softmax","","1-12",ap.softmax,ap.parseSoftmaxAttributes],["Softmax","","13+",ap.softmaxV13,ap.parseSoftmaxAttributesV13],["Split","","2-12",sp.split,sp.parseSplitAttributes],["Sqrt","","6+",cp.sqrt],["Squeeze","","1-12",up.squeeze,up.parseSqueezeAttributes],["Squeeze","","13+",up.squeezeV13],["Sub","","7+",un.sub],["Sum","","6+",pp.sum],["Tan","","7+",cp.tan],["Tanh","","6+",cp.tanh],["Tile","","6+",lp.tile],["Transpose","","1+",dp.transpose,dp.parseTransposeAttributes],["Upsample","","7-8",gp.upsample,gp.parseUpsampleAttributesV7],["Upsample","","9",gp.upsample,gp.parseUpsampleAttributesV9],["Unsqueeze","","1-12",fp.unsqueeze,fp.parseUnsqueezeAttributes],["Unsqueeze","","13+",fp.unsqueezeV13],["Xor","","7+",un.xor]]},2898:(Mt,st,nn)=>{Object.defineProperty(st,"__esModule",{value:!0}),st.parseBatchNormalizationAttributes=st.batchNormalization=void 0;const rn=nn(246),on=nn(5060),an=nn(2039),sn={name:"BatchNormalization",inputNames:["A","Scale","B","Mean","Variance"],inputTypes:[an.TextureType.unpacked,an.TextureType.unpacked,an.TextureType.unpacked,an.TextureType.unpacked,an.TextureType.unpacked]};st.batchNormalization=(to,uo,hn)=>(Xr(uo),[to.run(Object.assign(Object.assign({},sn),{cacheHint:hn.cacheKey,get:()=>un(to,uo,hn)}),uo)]),st.parseBatchNormalizationAttributes=to=>{const uo=to.attributes.getFloat("epsilon",1e-5),hn=to.attributes.getFloat("momentum",.9),fn=to.attributes.getInt("spatial",1);return(0,rn.createAttributeWithCacheKey)({epsilon:uo,momentum:hn,spatial:fn})};const un=(to,uo,hn)=>{const fn=(0,on.getGlsl)(to.session.backend.glContext.version),co=uo[0].dims.length,[lo,fo]=to.calculateTextureWidthAndHeight(uo[1].dims,an.TextureType.unpacked),ho=`
  float process(int[${co}] indices) {
    vec2 position = offsetToCoords(indices[1], ${lo}, ${fo});
    float scale = getColorAsFloat(${fn.texture2D}(Scale, position));
    float mean = getColorAsFloat(${fn.texture2D}(Mean, position));
    float variance = getColorAsFloat(${fn.texture2D}(Variance, position));
    float b = getColorAsFloat(${fn.texture2D}(B, position));

    return scale * ( (_A(indices) - mean) / sqrt(variance + float(${hn.epsilon})) ) + b;
  }`;return Object.assign(Object.assign({},sn),{output:{dims:uo[0].dims,type:uo[0].type,textureType:an.TextureType.unpacked},shaderSource:ho})},Xr=to=>{if(!to||to.length!==5)throw new Error("BatchNormalization requires 5 inputs.");const uo=to[0],hn=to[1],fn=to[2],co=to[3],lo=to[4];if(uo.dims.length<3||hn.dims.length!==1||fn.dims.length!==1||co.dims.length!==1||lo.dims.length!==1)throw new Error("invalid input shape.");if(hn.dims[0]!==uo.dims[1]||fn.dims[0]!==uo.dims[1]||co.dims[0]!==uo.dims[1]||lo.dims[0]!==uo.dims[1])throw new Error("invalid input shape.");if(uo.type!=="float32"&&uo.type!=="float64"||hn.type!=="float32"&&hn.type!=="float64"||fn.type!=="float32"&&fn.type!=="float64"||co.type!=="float32"&&co.type!=="float64"||lo.type!=="float32"&&lo.type!=="float64")throw new Error("invalid input tensor types.")}},7839:(Mt,st,nn)=>{Object.defineProperty(st,"__esModule",{value:!0}),st.xor=st.sub=st.pRelu=st.pow=st.or=st.mul=st.less=st.greater=st.equal=st.div=st.and=st.add=st.glslPRelu=st.glslPow=st.glslXor=st.glslOr=st.glslAnd=st.glslLess=st.glslGreater=st.glslEqual=st.glslSub=st.glslMul=st.glslDiv=st.glslAdd=void 0;const rn=nn(2517),on=nn(8520),an=nn(5060),sn=nn(2039);function un(){const ep="add_";return{body:`
  float ${ep}(float a, float b) {
    return a + b;
  }
  vec4 ${ep}(vec4 v1, vec4 v2) {
    return v1 + v2;
  }
  `,name:ep,type:on.FunctionType.ValueBased}}function Xr(){const ep="div_";return{body:`
  float ${ep}(float a, float b) {
    return a / b;
  }
  vec4 ${ep}(vec4 v1, vec4 v2) {
    return v1 / v2;
  }
  `,name:ep,type:on.FunctionType.ValueBased}}function to(){const ep="mul_";return{body:`
  float ${ep}(float a, float b) {
    return a * b;
  }
  vec4 ${ep}(vec4 v1, vec4 v2) {
    return v1 * v2;
  }
  `,name:ep,type:on.FunctionType.ValueBased}}function uo(){const ep="sub_";return{body:`
  float ${ep}(float a, float b) {
    return a - b;
  }
  vec4 ${ep}(vec4 v1, vec4 v2) {
    return v1 - v2;
  }
  `,name:ep,type:on.FunctionType.ValueBased}}function hn(){const ep="equal_";return{body:`
  float ${ep}(float a, float b) {
    return float(a == b);
  }
  vec4 ${ep}(vec4 v1, vec4 v2) {
    return vec4(equal(v1, v2));
  }
  `,name:ep,type:on.FunctionType.ValueBased}}function fn(){const ep="greater_";return{body:`
  float ${ep}(float a, float b) {
    return float(a > b);
  }
  vec4 ${ep}(vec4 v1, vec4 v2) {
    return vec4( v1.r > v2.r ,
      v1.g > v2.g,
      v1.b > v2.b,
      v1.a > v2.a );
  }
  `,name:ep,type:on.FunctionType.ValueBased}}function co(){const ep="less_";return{body:`
  float ${ep}(float a, float b) {
    return float(a < b);
  }
  vec4 ${ep}(vec4 v1, vec4 v2) {
    return vec4( v1.r < v2.r ,
                v1.g < v2.g,
                v1.b < v2.b,
                v1.a < v2.a );
  }
  `,name:ep,type:on.FunctionType.ValueBased}}function lo(){const ep="and_";return{body:`
  float ${ep}(float a, float b) {
    return float( bool(a) && bool(b) );
  }
  vec4 ${ep}(vec4 v1, vec4 v2) {
    bvec4 b1 = bvec4(v1);
    bvec4 b2 = bvec4(v2);
    return vec4( b1.r && b2.r ,
                b1.g && b2.g,
                b1.b && b2.b,
                b1.a && b2.a );
  }
  `,name:ep,type:on.FunctionType.ValueBased}}function fo(){const ep="or_";return{body:`
  float ${ep}(float a, float b) {
    return float( bool(a) || bool(b) );
  }
  vec4 ${ep}(vec4 v1, vec4 v2) {
    bvec4 b1 = bvec4(v1);
    bvec4 b2 = bvec4(v2);
    return vec4( b1.r || b2.r ,
                b1.g || b2.g,
                b1.b || b2.b,
                b1.a || b2.a );
  }
  `,name:ep,type:on.FunctionType.ValueBased}}function ho(){const ep="xor_";return{body:`
  float ${ep}(float a, float b) {
    return float( bool(a) ^^ bool(b) );
  }
  vec4 ${ep}(vec4 v1, vec4 v2) {
    bvec4 b1 = bvec4(v1);
    bvec4 b2 = bvec4(v2);
    return vec4( b1.r ^^ b2.r ,
                b1.g ^^ b2.g,
                b1.b ^^ b2.b,
                b1.a ^^ b2.a );
  }
  `,name:ep,type:on.FunctionType.ValueBased}}function mo(){return function(ep){const np=`${ep}_`;return{body:`
  float ${np}(float a, float b) {
    return ${ep}(a, b);
  }
  vec4 ${np}(vec4 v1, vec4 v2) {
    return ${ep}(v1, v2);
  }
  `,name:np,type:on.FunctionType.ValueBased}}("pow")}function Uo(){const ep="prelu_";return{body:`
  float ${ep}(float a, float b) {
    return a < 0.0 ? a * b: a;
  }
  vec4 ${ep}(vec4 v1, vec4 v2) {
    return vec4(
      v1.r < 0.0 ? v1.r * v2.r: v1.r,
      v1.g < 0.0 ? v1.g * v2.g: v1.g,
      v1.b < 0.0 ? v1.b * v2.b: v1.b,
      v1.a < 0.0 ? v1.a * v2.a: v1.a
      );
  }
  `,name:ep,type:on.FunctionType.ValueBased}}st.glslAdd=un,st.glslDiv=Xr,st.glslMul=to,st.glslSub=uo,st.glslEqual=hn,st.glslGreater=fn,st.glslLess=co,st.glslAnd=lo,st.glslOr=fo,st.glslXor=ho,st.glslPow=mo,st.glslPRelu=Uo;const _d=(ep,np,rp,ip=np[0].type,op)=>{const ap=ep.session.pack?sn.TextureType.packed:sn.TextureType.unpacked;return{name:rp.name,inputNames:["A","B"],inputTypes:[ap,ap],cacheHint:op,get:()=>tp(ep,np,rp,ip)}},tp=(ep,np,rp,ip=np[0].type)=>{const op=ep.session.pack?sn.TextureType.packed:sn.TextureType.unpacked,ap=!rn.ShapeUtil.areEqual(np[0].dims,np[1].dims);let sp=np[0].dims;const up=ep.session.pack;if(ap){const dp=rn.BroadcastUtil.calcShape(np[0].dims,np[1].dims,!1);if(!dp)throw new Error("Can't perform binary op on the given tensors");sp=dp;const cp=sp.length,fp=np[0].dims.length!==0?np[0].dims.length:1,gp=np[1].dims.length!==0?np[1].dims.length:1,mp=np[0].dims.length!==0?"bcastIndices_A(indices, aindices);":"aindices[0] = 0;",xp=np[1].dims.length!==0?"bcastIndices_B(indices, bindices);":"bindices[0] = 0;",_p=(0,an.getGlsl)(ep.session.backend.glContext.version),Sp=up?`
      ${rp.body}
      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();
        vec4 result = ${rp.name}(a, b);
        ${_p.output} = result;
      }`:`
      ${rp.body}
      float process(int indices[${cp}]) {
        int aindices[${fp}];
        int bindices[${gp}];
        ${mp}
        ${xp}
        return ${rp.name}(_A(aindices), _B(bindices));
      }`;return{name:rp.name,inputNames:["A","B"],inputTypes:[op,op],output:{dims:sp,type:ip,textureType:op},shaderSource:Sp,hasMain:up}}const pp=(0,an.getGlsl)(ep.session.backend.glContext.version),lp=`
    ${rp.body}
    void main() {
      vec4 v1 = ${pp.texture2D}(A, TexCoords);
      vec4 v2 = ${pp.texture2D}(B, TexCoords);
      vec4 result = ${rp.name}(v1, v2);
      ${pp.output} = result;
    }
    `;return{name:rp.name,inputNames:["A","B"],inputTypes:[op,op],output:{dims:np[0].dims,type:ip,textureType:op},shaderSource:lp,hasMain:!0}};st.add=(ep,np)=>[ep.run(_d(ep,np,un()),np)],st.and=(ep,np)=>[ep.run(_d(ep,np,lo(),"bool"),np)],st.div=(ep,np)=>[ep.run(_d(ep,np,Xr()),np)],st.equal=(ep,np)=>[ep.run(_d(ep,np,hn(),"bool"),np)],st.greater=(ep,np)=>[ep.run(_d(ep,np,fn(),"bool"),np)],st.less=(ep,np)=>[ep.run(_d(ep,np,co(),"bool"),np)],st.mul=(ep,np)=>[ep.run(_d(ep,np,to()),np)],st.or=(ep,np)=>[ep.run(_d(ep,np,fo(),"bool"),np)],st.pow=(ep,np)=>[ep.run(_d(ep,np,mo()),np)],st.pRelu=(ep,np)=>[ep.run(_d(ep,np,Uo()),np)],st.sub=(ep,np)=>[ep.run(_d(ep,np,uo()),np)],st.xor=(ep,np)=>[ep.run(_d(ep,np,ho(),"bool"),np)]},4196:(Mt,st,nn)=>{Object.defineProperty(st,"__esModule",{value:!0}),st.parseCastAttributes=st.cast=void 0;const rn=nn(2517);st.cast=(an,sn,un)=>(on(sn),[an.cast(sn[0],un)]),st.parseCastAttributes=an=>rn.ProtoUtil.tensorDataTypeFromProto(an.attributes.getInt("to"));const on=an=>{if(!an||an.length!==1)throw new Error("Cast requires 1 input.");if(an[0].type==="string")throw new Error("Invalid input type.")}},1163:(Mt,st,nn)=>{Object.defineProperty(st,"__esModule",{value:!0}),st.createPackedConcatProgramInfoLoader=void 0;const rn=nn(5060),on=nn(2039),an=nn(9390),sn=nn(2827);st.createPackedConcatProgramInfoLoader=(Xr,to,uo)=>{const hn=(fn=to.length,co=uo.cacheKey,{name:"Concat (packed)",inputNames:Array.from({length:fn},(lo,fo)=>`X${fo}`),inputTypes:Array(fn).fill(on.TextureType.packed),cacheHint:co});var fn,co;return Object.assign(Object.assign({},hn),{get:()=>((lo,fo,ho,mo)=>{const Uo=ho[0].dims.slice();if(mo>=Uo.length||mo<-1*Uo.length)throw new Error("axis specified for concat doesn't match input dimensionality");mo<0&&(mo=Uo.length+mo);const _d=Uo.slice(0);for(let mp=1;mp<ho.length;mp++){const xp=ho[mp].dims.slice();for(let _p=0;_p<Uo.length;_p++)if(_p===mo)_d[mo]+=xp[_p];else if(Uo[_p]!==xp[_p])throw new Error("non concat dimensions must match")}const tp=_d.length,ep=(0,sn.getChannels)("coords",tp),np=(0,an.getCoordsDataType)(tp),rp=(0,sn.unpackFromChannel)(),ip=ho.map(mp=>mp.dims),op=(0,an.getGlChannels)(tp),ap=new Array(ip.length-1);ap[0]=ip[0][mo];for(let mp=1;mp<ap.length;mp++)ap[mp]=ap[mp-1]+ip[mp][mo];const sp=op[mo],up=op.slice(-2),pp=op.join();let lp=`if (${sp} < ${ap[0]}) {
        return getChannel(
            getX0(${pp}), vec2(${up.join()}));
        }`;for(let mp=1;mp<ap.length;mp++){const xp=ap[mp-1];lp+=`
            if (${sp} < ${ap[mp]}  && ${sp} >= ${ap[mp-1]}) {
              return getChannel(
                getX${mp}(${un(op,sp,xp)}),
                vec2(${un(up,sp,xp)}));
            }`}const dp=ap.length,cp=ap[ap.length-1];lp+=`
            return getChannel(
              getX${dp}(${un(op,sp,cp)}),
              vec2(${un(up,sp,cp)}));`;const fp=(0,rn.getGlsl)(lo.session.backend.glContext.version),gp=`
          ${rp}
          float getValue(${op.map(mp=>"int "+mp)}) {
            ${lp}
          }

          void main() {
            ${np} coords = getOutputCoords();
            int lastDim = coords.${op[tp-1]};
            coords.${op[tp-1]} = coords.${op[tp-2]};
            coords.${op[tp-2]} = lastDim;

            vec4 result = vec4(getValue(${ep}), 0., 0., 0.);

            ${ep[tp-1]} = ${ep[tp-1]} + 1;
            if (${ep[tp-1]} < ${_d[tp-1]}) {
              result.g = getValue(${ep});
            }

            ${ep[tp-2]} = ${ep[tp-2]} + 1;
            if (${ep[tp-2]} < ${_d[tp-2]}) {
              result.a = getValue(${ep});
            }

            ${ep[tp-1]} = ${ep[tp-1]} - 1;
            if (${ep[tp-2]} < ${_d[tp-2]} &&
                ${ep[tp-1]} < ${_d[tp-1]}) {
              result.b = getValue(${ep});
            }
            ${fp.output} = result;
          }
        `;return Object.assign(Object.assign({},fo),{output:{dims:_d,type:ho[0].type,textureType:on.TextureType.packed},shaderSource:gp,hasMain:!0})})(Xr,hn,to,uo.axis)})};const un=(Xr,to,uo)=>{const hn=Xr.indexOf(to);return Xr.map((fn,co)=>co===hn?`${fn} - ${uo}`:fn).join()}},2069:(Mt,st,nn)=>{Object.defineProperty(st,"__esModule",{value:!0}),st.parseConcatAttributes=st.concat=void 0;const rn=nn(246),on=nn(2039),an=nn(1163);st.concat=(fn,co,lo)=>(hn(co),fn.session.pack&&co[0].dims.length>1?[fn.run((0,an.createPackedConcatProgramInfoLoader)(fn,co,lo),co)]:[fn.run(sn(fn,co,lo),co)]);const sn=(fn,co,lo)=>{const fo=(ho=co.length,mo=lo.cacheKey,{name:"Concat",inputNames:Array.from({length:ho},(Uo,_d)=>`X${_d}`),inputTypes:Array(ho).fill(on.TextureType.unpacked),cacheHint:mo});var ho,mo;return Object.assign(Object.assign({},fo),{get:()=>((Uo,_d,tp,ep)=>{const np=tp[0].dims.slice();if(ep>=np.length||ep<-1*np.length)throw new Error("axis specified for concat doesn't match input dimensionality");ep<0&&(ep=np.length+ep);const rp=np.slice(0);for(let pp=1;pp<tp.length;pp++){const lp=tp[pp].dims.slice();for(let dp=0;dp<np.length;dp++)if(dp===ep)rp[ep]+=lp[dp];else if(np[dp]!==lp[dp])throw new Error("non concat dimensions must match")}const ip=rp.length,op=new Array(tp.length);let ap=0;for(let pp=0;pp<op.length;++pp)ap+=tp[pp].dims[ep],op[pp]=ap;let sp="";sp=tp.length<5?un(op):Xr(op);const up=`
        ${to(tp.length,ip)}
        ${uo(op)}
        ${sp}
        float process(int indices[${ip}]) {
          int textureIndex = getTextureWhereDataResides (indices[${ep}]);

          if(textureIndex != 0) {
            indices[${ep}] = indices[${ep}] - int(getSizeInConcatAxisValueFromIndex(textureIndex-int(1)));
          }

          return fetchDataFromCorrectTexture(textureIndex, indices);
        }`;return Object.assign(Object.assign({},_d),{output:{dims:rp,type:tp[0].type,textureType:on.TextureType.unpacked},shaderSource:up})})(0,fo,co,lo.axis)})},un=fn=>`int getTextureWhereDataResides(int index) {
      ${fn.map((co,lo)=>`if(index<${co}) {return ${lo};}
`).join("")}
    }`,Xr=fn=>un(fn),to=(fn,co)=>{const lo=[`float fetchDataFromCorrectTexture(int textureIndex, int indices[${co}]) {`];for(let fo=0;fo<fn;++fo)fo===0?lo.push(`	if (textureIndex == ${fo}) { return _X${fo}(indices); }`):fo===fn-1?lo.push(`	else { return _X${fo}(indices); }`):lo.push(`	else if (textureIndex == ${fo}) { return _X${fo}(indices); }`);return lo.push("	}"),lo.join(`
`)},uo=fn=>{const co=["int getSizeInConcatAxisValueFromIndex(int index) {"];for(let lo=0;lo<fn.length;++lo)lo===0?co.push(`	if (index == ${lo}) { return ${fn[lo]}; }`):lo===fn.length-1?co.push(`	else { return ${fn[lo]}; }`):co.push(`	else if (index == ${lo}) { return ${fn[lo]}; }`);return co.push("	}"),co.join(`
`)};st.parseConcatAttributes=fn=>(0,rn.createAttributeWithCacheKey)({axis:fn.attributes.getInt("axis")});const hn=fn=>{if(!fn||fn.length<1)throw new Error("too few inputs");const co=fn[0].type,lo=fn[0].dims.length;if(co==="string")throw new Error("string tensor is not supported yet");for(const fo of fn){if(fo.type!==co)throw new Error("input tensors should be one type");if(fo.dims.length!==lo)throw new Error("input tensors should have the same shape")}}},4770:(Mt,st,nn)=>{Object.defineProperty(st,"__esModule",{value:!0}),st.createUnpackedGroupedConvProgramInfoLoader=void 0;const rn=nn(6231),on=nn(5060),an=nn(2039),sn=nn(8138),un=nn(2823);st.createUnpackedGroupedConvProgramInfoLoader=(Xr,to,uo)=>{const hn=(fn=to.length>2,co=uo.cacheKey,{name:"GroupedConv",inputNames:fn?["X","W","Bias"]:["X","W"],inputTypes:fn?[an.TextureType.unpacked,an.TextureType.unpacked,an.TextureType.unpacked]:[an.TextureType.unpacked,an.TextureType.unpacked],cacheHint:co});var fn,co;return Object.assign(Object.assign({},hn),{get:()=>((lo,fo,ho,mo)=>{const Uo=fo.length>2?"value += getBias(output_channel);":"",_d=fo[0].dims.slice(),tp=fo[1].dims.slice(),ep=tp[0]/mo.group;rn.Logger.verbose("GroupedConv",`autpPad:${mo.autoPad}, dilations:${mo.dilations}, group:${mo.group}, kernelShape:${mo.kernelShape}, pads:${mo.pads}, strides:${mo.strides}`);const np=(0,sn.calculateOutputShape)(_d,tp,mo.dilations,mo.pads,mo.strides),rp=(0,on.getGlsl)(lo.session.backend.glContext.version),{activationFunction:ip,applyActivation:op}=(0,un.getActivationSnippet)(mo),ap=`
  const ivec2 strides = ivec2(${mo.strides[0]}, ${mo.strides[1]});
  const ivec2 pads = ivec2(${mo.pads[0]}, ${mo.pads[1]});
  ${ip}
  void main() {
    ivec4 coords = getOutputCoords();
    int batch = coords.x;
    int output_channel = coords.y;
    ivec2 xRCCorner = coords.zw * strides - pads;
    int group_id = output_channel / ${ep};

    float value = 0.0;
    for (int wInChannel = 0; wInChannel < ${tp[1]}; wInChannel++) {
      int input_channel = group_id * ${tp[1]} + wInChannel;
      for (int wHeight = 0; wHeight < ${tp[2]}; wHeight++) {
        int xHeight = xRCCorner.x + wHeight * ${mo.dilations[0]};

        if (xHeight < 0 || xHeight >= ${_d[2]}) {
          continue;
        }

        for (int wWidth = 0; wWidth < ${tp[3]}; wWidth++) {
          int xWidth = xRCCorner.y + wWidth * ${mo.dilations[1]};
          if (xWidth < 0 || xWidth >= ${_d[3]}) {
            continue;
          }

          float xVal = getX(batch, input_channel, xWidth, xHeight);
          float wVal = getW(output_channel, wInChannel, wWidth, wHeight);
          value += xVal*wVal;
        }
      }
    }
    ${Uo}
    ${op}
    ${rp.output} = vec4(value, .0, .0, .0);
  }
`;return Object.assign(Object.assign({},ho),{output:{dims:np,type:fo[0].type,textureType:an.TextureType.unpacked},shaderSource:ap,hasMain:!0})})(Xr,to,hn,uo)})}},1386:(Mt,st,nn)=>{Object.defineProperty(st,"__esModule",{value:!0}),st.conv2DPacked=st.conv2DPackedPointwise=void 0;const rn=nn(8138),on=nn(8555),an=nn(708);st.conv2DPackedPointwise=(sn,un,Xr)=>{const to=un[0].dims,uo=un[1].dims,hn=(0,rn.calculateOutputShape)(to,uo,Xr.dilations,Xr.pads,Xr.strides),fn=sn.reshapePacked(un[0],[to[1],to[2]*to[3]]),co=sn.reshapePacked(un[1],[uo[0],uo[1]]),lo=un.length>2?[co,fn,un[2]]:[co,fn],fo=sn.run((0,an.createPackedMatmulProgramInfoLoader)(sn,lo,Xr),lo);return sn.reshapePacked(fo,hn)},st.conv2DPacked=(sn,un,Xr)=>{const to=un[0].dims,uo=un[1].dims,hn=(0,rn.calculateOutputShape)(to,uo,Xr.dilations,Xr.pads,Xr.strides),fn=sn.run((0,on.createPackedIm2ColProgramInfoLoader)(sn,un[0],un[1],hn,Xr),[un[0]]),co=sn.reshapePacked(un[1],[uo[0],uo[1]*uo[2]*uo[3]]),lo=un.length===3?[co,fn,un[2]]:[co,fn],fo=sn.run((0,an.createPackedMatmulProgramInfoLoader)(sn,lo,Xr),lo);return sn.reshapePacked(fo,hn)}},9663:(Mt,st,nn)=>{Object.defineProperty(st,"__esModule",{value:!0}),st.parseConvTransposeAttributes=st.convTranspose=void 0;const rn=nn(246),on=nn(5060),an=nn(2039),sn=nn(2823),un=(co,lo,fo,ho,mo,Uo)=>(co-1)*lo+fo+(ho-1)*mo+1-Uo,Xr=(co,lo,fo,ho,mo)=>{const Uo=Math.floor(co/2);lo==="SAME_UPPER"?(fo[ho]=Uo,fo[mo]=co-Uo):lo==="SAME_LOWER"&&(fo[ho]=co-Uo,fo[mo]=Uo)};st.convTranspose=(co,lo,fo)=>(fn(lo,fo),to(co,lo,fo));const to=(co,lo,fo)=>{const ho=hn(fo,lo);return[uo(co,lo,ho)]},uo=(co,lo,fo)=>co.run(((ho,mo,Uo)=>{const _d=(tp=mo.length>2,ep=Uo.cacheKey,{name:"ConvTranspose",inputNames:tp?["X","W","B"]:["X","W"],inputTypes:tp?[an.TextureType.unpacked,an.TextureType.unpacked,an.TextureType.unpacked]:[an.TextureType.unpacked,an.TextureType.unpacked],cacheHint:ep});var tp,ep;return Object.assign(Object.assign({},_d),{get:()=>((np,rp,ip,op)=>{const ap=rp.length>2?"getB(output_channel)":"0.0",sp=rp[0].dims,up=rp[1].dims,pp=up[1],lp=up[0]/op.group,dp=[rp[0].dims[0],rp[1].dims[1]*op.group,...op.outputShape],cp=(0,on.getGlsl)(np.session.backend.glContext.version),{activationFunction:fp,applyActivation:gp}=(0,sn.getActivationSnippet)(op),mp=`
  const ivec2 strides = ivec2(${op.strides[0]}, ${op.strides[1]});
  const ivec2 pads = ivec2(${op.pads[0]}, ${op.pads[1]});
  ${fp}
  void main() {
    ivec4 coords = getOutputCoords();
    int batch = coords.x;
    int output_channel = coords.y;

    ivec2 loc = coords.zw + pads;

    int group_id = output_channel / ${pp};
    int wOutChannel = output_channel - group_id * ${pp};

    float value = ${ap};
    for (int inChannelOffset = 0; inChannelOffset < ${lp}; inChannelOffset++) {
      int input_channel = group_id * ${lp} + inChannelOffset;
      for (int wWOff = 0; wWOff < ${up[2]}; wWOff++) {
        for (int wHOff = 0; wHOff < ${up[3]}; wHOff++) {
          ivec2 wOff = ivec2(wWOff * ${op.dilations[0]}, wHOff * ${op.dilations[1]});
          ivec2 wLoc = loc - wOff;
          ivec2 wLocIn = wLoc / strides;
          if (
            wLocIn * strides == wLoc &&
            wLocIn.x >= 0 && wLocIn.x < ${sp[2]} &&
            wLocIn.y >= 0 && wLocIn.y < ${sp[3]}
          ) {
            float xVal = getX(batch, input_channel, wLocIn.y, wLocIn.x);
            float wVal = getW(input_channel, wOutChannel, wHOff, wWOff);
            value += xVal * wVal;
          }
        }
      }
    }
    ${gp}
    ${cp.output} = vec4(value, .0, .0, .0);
  }
`;return Object.assign(Object.assign({},ip),{output:{dims:dp,type:rp[0].type,textureType:an.TextureType.unpacked},shaderSource:mp,hasMain:!0})})(ho,mo,_d,Uo)})})(co,lo,fo),lo),hn=(co,lo)=>{const fo=co.kernelShape.slice();if(co.kernelShape.length===0)for(let _d=2;_d<lo[1].dims.length;++_d)fo.push(lo[1].dims[_d]);const ho=co.pads.slice(),mo=co.outputShape.slice();((_d,tp,ep,np,rp,ip,op,ap)=>{const sp=_d.length-2,up=ap.length===0;for(let pp=0;pp<sp;++pp){const lp=up?_d[pp+2]*ip[pp]:ap[pp],dp=un(_d[pp+2],ip[pp],rp[pp],tp[pp],ep[pp],lp);Xr(dp,np,rp,pp,pp+sp),up&&ap.push(ip[pp]*(_d[pp+2]-1)+op[pp]+(tp[pp]-1)*ep[pp]+1-rp[pp]-rp[pp+sp])}})(lo[0].dims,fo,co.dilations,co.autoPad,ho,co.strides,co.outputPadding,mo);const Uo=Object.assign({},co);return Object.assign(Uo,{kernelShape:fo,pads:ho,outputShape:mo,cacheKey:co.cacheKey}),Uo};st.parseConvTransposeAttributes=co=>{const lo=co.attributes,fo=(0,sn.parseInternalActivationAttributes)(lo),ho=lo.getString("auto_pad","NOTSET"),mo=lo.getInts("dilations",[1,1]),Uo=lo.getInt("group",1),_d=lo.getInts("kernel_shape",[]),tp=lo.getInts("output_padding",[0,0]),ep=lo.getInts("output_shape",[]),np=lo.getInts("pads",[0,0,0,0]),rp=lo.getInts("strides",[1,1]);return(0,rn.createAttributeWithCacheKey)(Object.assign({autoPad:ho,dilations:mo,group:Uo,kernelShape:_d,outputPadding:tp,outputShape:ep,pads:np,strides:rp},fo))};const fn=(co,lo)=>{if(!co||co.length!==2&&co.length!==3)throw new Error("Conv requires 2 or 3 inputs");if(co[0].dims.length!==4||co[1].dims.length!==4)throw new Error("currently only support 2-dimensional conv");if(co[0].dims[1]!==co[1].dims[0])throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");const fo=co[1].dims[1]*lo.group;if(co.length===3&&(co[2].dims.length!==1||co[2].dims[0]!==fo))throw new Error("invalid bias");const ho=co[0].dims.length-2;if(lo.dilations.length!==ho)throw new Error(`dilations should be ${ho}D`);if(lo.strides.length!==ho)throw new Error(`strides should be ${ho}D`);if(lo.pads.length!==2*ho)throw new Error(`pads should be ${2*ho}D`);if(lo.outputPadding.length!==ho)throw new Error(`output_padding should be ${ho}D`);if(lo.kernelShape.length!==0&&lo.kernelShape.length!==co[1].dims.length-2)throw new Error("invalid kernel shape");if(lo.outputShape.length!==0&&lo.outputShape.length!==co[0].dims.length-2)throw new Error("invalid output shape");if(co[0].type!=="float32"||co[1].type!=="float32")throw new Error("ConvTranspose input(X,W) should be float tensor");if(co.length===3&&co[2].type!=="float32")throw new Error("ConvTranspose input(bias) should be float tensor")}},8138:(Mt,st,nn)=>{Object.defineProperty(st,"__esModule",{value:!0}),st.parseConvAttributes=st.conv=st.calculateOutputShape=void 0;const rn=nn(246),on=nn(2517),an=nn(4770),sn=nn(1386),un=nn(9828),Xr=nn(2823),to=nn(3248),uo=nn(5623);st.calculateOutputShape=(ho,mo,Uo,_d,tp)=>{const ep=ho[0],np=ho.slice(2),rp=np.length,ip=mo[0],op=mo.slice(2).map((sp,up)=>sp+(sp-1)*(Uo[up]-1)),ap=np.map((sp,up)=>sp+_d[up]+_d[up+rp]).map((sp,up)=>Math.floor((sp-op[up]+tp[up])/tp[up]));return[ep,ip].concat(...ap)},st.conv=(ho,mo,Uo)=>(fo(mo,Uo),hn(ho,mo,Uo));const hn=(ho,mo,Uo)=>{const _d=lo(Uo,mo),tp=ho.session.pack,ep=_d.kernelShape[0]===1&&_d.kernelShape[1]===1;return _d.group>1?[ho.run((0,an.createUnpackedGroupedConvProgramInfoLoader)(ho,mo,_d),mo)]:ep&&tp?[fn(ho,mo,_d)]:tp&&mo[0].dims.length===4&&mo[0].dims[0]===1&&!ep?[(0,sn.conv2DPacked)(ho,mo,_d)]:[co(ho,mo,_d)]},fn=(ho,mo,Uo)=>{const _d=mo[0].dims,tp=mo[1].dims,ep=(0,st.calculateOutputShape)(_d,tp,Uo.dilations,Uo.pads,Uo.strides),np=ho.reshapeUnpacked(mo[0],[_d[1],_d[2]*_d[3]]),rp=ho.reshapeUnpacked(mo[1],[tp[0],tp[1]]),ip=mo.length>2?[rp,np,mo[2]]:[rp,np],op=ho.run((0,uo.createMatmulProgramInfoLoader)(ip,Uo),ip);return ho.reshapeUnpacked(op,ep)},co=(ho,mo,Uo)=>{const _d=mo[0].dims,tp=mo[1].dims,ep=(0,st.calculateOutputShape)(_d,tp,Uo.dilations,Uo.pads,Uo.strides),np=ho.run((0,to.createIm2ColProgramInfoLoader)(ho,mo[0],mo[1],ep,Uo),[mo[0]]),rp=mo.length===3?[np,mo[1],mo[2]]:[np,mo[1]];return ho.run((0,un.createDotProductProgramInfoLoader)(ho,mo,ep,Uo),rp)},lo=(ho,mo)=>{const Uo=ho.kernelShape.slice();if(ho.kernelShape.length===0)for(let ep=2;ep<mo[1].dims.length;++ep)Uo.push(mo[1].dims[ep]);const _d=ho.pads.slice();on.PoolConvUtil.adjustPadsBasedOnAutoPad(mo[0].dims,ho.strides,ho.dilations,Uo,_d,ho.autoPad);const tp=Object.assign({},ho);return Object.assign(tp,{kernelShape:Uo,pads:_d,cacheKey:ho.cacheKey}),tp};st.parseConvAttributes=ho=>{const mo=ho.attributes,Uo=(0,Xr.parseInternalActivationAttributes)(mo),_d=mo.getString("auto_pad","NOTSET"),tp=mo.getInts("dilations",[1,1]),ep=mo.getInt("group",1),np=mo.getInts("kernel_shape",[]),rp=mo.getInts("pads",[0,0,0,0]),ip=mo.getInts("strides",[1,1]);return(0,rn.createAttributeWithCacheKey)(Object.assign({autoPad:_d,dilations:tp,group:ep,kernelShape:np,pads:rp,strides:ip},Uo))};const fo=(ho,mo)=>{if(!ho||ho.length!==2&&ho.length!==3)throw new Error("Conv requires 2 or 3 inputs");if(ho[0].dims.length!==4||ho[1].dims.length!==4)throw new Error("currently only support 2-dimensional conv");if(ho[0].dims[1]!==ho[1].dims[1]*mo.group)throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");if(ho.length===3&&(ho[2].dims.length!==1||ho[1].dims[0]!==ho[2].dims[0]))throw new Error("invalid bias");const Uo=ho[0].dims.length-2;if(mo.dilations.length!==Uo)throw new Error(`dilations should be ${Uo}D`);if(mo.strides.length!==Uo)throw new Error(`strides should be ${Uo}D`);if(mo.pads.length!==2*Uo)throw new Error(`pads should be ${2*Uo}D`);if(mo.kernelShape.length!==0&&mo.kernelShape.length!==ho[1].dims.length-2)throw new Error("invalid kernel shape");if(ho[0].type!=="float32"||ho[1].type!=="float32")throw new Error("Conv input(X,W) should be float tensor");if(ho.length===3&&ho[2].type!=="float32")throw new Error("Conv input(bias) should be float tensor")}},5193:(Mt,st,nn)=>{Object.defineProperty(st,"__esModule",{value:!0}),st.parseDepthToSpaceAttributes=st.depthToSpace=void 0;const rn=nn(3738);st.depthToSpace=(an,sn,un)=>{on(sn);const Xr=un.blocksize,to=Xr*Xr,uo=un.mode==="DCR"?[0,3,4,1,5,2]:[0,1,4,2,5,3],hn=un.mode==="DCR"?[sn[0].dims[0],Xr,Xr,sn[0].dims[1]/to,sn[0].dims[2],sn[0].dims[3]]:[sn[0].dims[0],sn[0].dims[1]/to,Xr,Xr,sn[0].dims[2],sn[0].dims[3]],fn=an.reshapeUnpacked(sn[0],hn),co={perm:uo,cacheKey:`${uo}`},[lo]=(0,rn.transpose)(an,[fn],co),fo=[sn[0].dims[0],sn[0].dims[1]/to,sn[0].dims[2]*Xr,sn[0].dims[3]*Xr];return[an.reshapeUnpacked(lo,fo)]},st.parseDepthToSpaceAttributes=an=>{const sn=an.attributes.getInt("blocksize");if(sn<1)throw new Error(`blocksize must be >= 1, but got : ${sn} for DepthToSpace`);const un=an.attributes.getString("mode","DCR");if(un!=="DCR"&&un!=="CRD")throw new Error(`unrecognized mode: ${un} for DepthToSpace`);return{mode:un,blocksize:sn}};const on=an=>{if(an.length!==1)throw new Error(`DepthToSpace expect 1 inputs, but got ${an.length}`);if(an[0].type==="string"||an[0].dims.length!==4)throw new TypeError("DepthToSpace input should be a 4-D numeric tensor")}},9828:(Mt,st,nn)=>{Object.defineProperty(st,"__esModule",{value:!0}),st.createDotProductProgramInfoLoader=void 0;const rn=nn(2517),on=nn(5060),an=nn(2039),sn=nn(2823),un=nn(3248);st.createDotProductProgramInfoLoader=(Xr,to,uo,hn)=>{const fn=((co,lo)=>({name:"ConvDotProduct",inputNames:co?["Im2Col","K","B"]:["Im2Col","K"],inputTypes:co?[an.TextureType.unpacked,an.TextureType.packedLastDimension,an.TextureType.unpacked]:[an.TextureType.unpacked,an.TextureType.packedLastDimension],cacheKey:lo.activationCacheKey}))(to.length>2,hn);return Object.assign(Object.assign({},fn),{get:()=>((co,lo,fo,ho,mo)=>{const Uo=fo[0].dims,_d=fo[1].dims,tp=[_d[0],Math.ceil(Uo[1]*_d[2]*_d[3]/4)],ep=(0,un.calculateIm2ColDims)(Uo,_d,ho),[np,rp]=co.calculateTextureWidthAndHeight(tp,an.TextureType.packedLastDimension),ip=rn.ShapeUtil.computeStrides(ep),[op,ap]=co.calculateTextureWidthAndHeight(ep,an.TextureType.packedLastDimension),sp=ho.length,up=fo.length<3?"0.0":"_B(b)",pp=Math.ceil(Uo[1]*_d[2]*_d[3]/4),{activationFunction:lp,applyActivation:dp}=(0,sn.getActivationSnippet)(mo),cp=(0,on.getGlsl)(co.session.backend.glContext.version),fp=`
${lp}
float process(int indices[${sp}]) {
  int b[1];
  b[0] = indices[1];
  int im2col[4];
  im2col[0] = indices[0];
  im2col[1] = indices[2];
  im2col[2] = indices[3];
  int im2colOffset = im2col[0] * ${ip[0]} + im2col[1] * ${ip[1]} + im2col[2] * ${ip[2]};
  int kernelOffset = indices[1] * ${tp[1]};
  float value = ${up};
  for (int i = 0; i < ${pp}; ++i) {
    vec2 im2colCoords = offsetToCoords(im2colOffset, ${op}, ${ap});
    vec2 kernelCoords = offsetToCoords(kernelOffset, ${np}, ${rp});
    value += dot(${cp.texture2D}(Im2Col, im2colCoords), ${cp.texture2D}(K, kernelCoords));
    ++im2colOffset;
    ++kernelOffset;
  }
  ${dp}
  return value;
}`;return Object.assign(Object.assign({},lo),{output:{dims:ho,type:fo[0].type,textureType:an.TextureType.unpacked},shaderSource:fp})})(Xr,fn,to,uo,hn)})}},7992:(Mt,st,nn)=>{Object.defineProperty(st,"__esModule",{value:!0}),st.parseFlattenAttributes=st.flatten=void 0;const rn=nn(2517);st.flatten=(an,sn,un)=>{on(sn,un);const Xr=rn.ShapeUtil.flattenShape(sn[0].dims,un);return[an.reshapeUnpacked(sn[0],Xr)]},st.parseFlattenAttributes=an=>an.attributes.getInt("axis",1);const on=(an,sn)=>{if(!an||an.length!==1)throw new Error("Flatten requires 1 input.");const un=an[0].dims.length;if(un===0)throw new Error("scalar tensor is not supported.");if(sn<-un||sn>un)throw new Error("Invalid axis");if(an[0].type==="string")throw new Error("string tensor is not supported.")}},2823:(Mt,st,nn)=>{Object.defineProperty(st,"__esModule",{value:!0}),st.parseInternalActivationAttributes=st.getActivationSnippet=void 0;const rn=nn(2517),on=nn(4909);st.getActivationSnippet=function(an){let sn;switch(an.activation){case"Relu":sn=(0,on.glslRelu)();break;case"Sigmoid":sn=(0,on.glslSigmoid)();break;case"Clip":sn=(0,on.glslClip)(an.clipMin,an.clipMax);break;default:return{activationFunction:"",applyActivation:""}}const un=sn.name;return{activationFunction:sn.body,applyActivation:`value = ${un}_(value);`}},st.parseInternalActivationAttributes=an=>{const sn=an.getString("activation","");if(sn==="Clip"){const[un,Xr]=an.getFloats("activation_params",[rn.MIN_CLIP,rn.MAX_CLIP]);return{activation:sn,clipMax:Xr,clipMin:un,activationCacheKey:`${sn}:${un},${Xr}`}}return{activation:sn,activationCacheKey:sn}}},1253:(Mt,st,nn)=>{Object.defineProperty(st,"__esModule",{value:!0}),st.parseGatherAttributes=st.gather=void 0;const rn=nn(246),on=nn(782),an=nn(2517),sn=nn(2039);st.gather=(uo,hn,fn)=>(to(hn,fn.axis),[uo.run(Xr(uo,hn,fn),hn)]),st.parseGatherAttributes=uo=>(0,rn.createAttributeWithCacheKey)({axis:uo.attributes.getInt("axis",0)});const un={name:"Gather",inputNames:["A","B"],inputTypes:[sn.TextureType.unpacked,sn.TextureType.unpacked]},Xr=(uo,hn,fn)=>{const co=Object.assign(Object.assign({},un),{cacheHint:fn.cacheKey});return Object.assign(Object.assign({},co),{get:()=>((lo,fo,ho,mo)=>{const Uo=ho[0].dims.slice(),_d=ho[1].dims.slice(),tp=new Array(Uo.length+_d.length-1);mo=an.ShapeUtil.normalizeAxis(mo,Uo.length);const ep=[];for(let rp=0;rp<tp.length;rp++)rp<mo?(tp[rp]=Uo[rp],ep.push(`inputIdx[${rp}] = outputIdx[${rp}];`)):rp<mo+_d.length?(tp[rp]=_d[rp-mo],ep.push(`indexDataIdx[${rp-mo}] = outputIdx[${rp}];`)):(tp[rp]=Uo[rp-_d.length+1],ep.push(`inputIdx[${rp-_d.length+1}] = outputIdx[${rp}];`));const np=`
      float process(int outputIdx[${tp.length||1}]) {
        int inputIdx[${Uo.length}];
        int indexDataIdx[${_d.length||1}];
        indexDataIdx[0] = 0;
        ${ep.join(`
        `)}
        int idx = int(_B(indexDataIdx));
        inputIdx[${mo}] = idx < 0 ? idx + ${Uo[mo]} : idx;
        return _A(inputIdx);
      }`;return Object.assign(Object.assign({},fo),{output:{dims:tp,type:ho[0].type,textureType:sn.TextureType.unpacked},shaderSource:np})})(0,co,hn,fn.axis)})},to=(uo,hn)=>{if(!uo||uo.length!==2)throw new Error("Gather requires 2 inputs.");const fn=uo[0].dims.length;if(fn<1)throw new Error("Invalid input shape.");if(hn<-fn||hn>fn-1)throw new Error("Invalid axis.");if(on.NUMBER_TYPES.indexOf(uo[0].type)===-1)throw new Error("Invaid input type.");if(uo[1].type!=="int32"&&uo[1].type!=="int16")throw new Error("Invaid input type.")}},4776:(Mt,st,nn)=>{Object.defineProperty(st,"__esModule",{value:!0}),st.parseGemmAttributesV11=st.parseGemmAttributesV7=st.gemm=void 0;const rn=nn(246),on=nn(2517),an=nn(2039);st.gemm=(uo,hn,fn)=>(to(hn,fn),[uo.run(un(hn,fn),hn)]);const sn=(uo,hn)=>{const fn=uo.attributes.getInt("transA",0)!==0,co=uo.attributes.getInt("transB",0)!==0,lo=uo.attributes.getFloat("alpha",1),fo=uo.attributes.getFloat("beta",1);return(0,rn.createAttributeWithCacheKey)({transA:fn,transB:co,alpha:lo,beta:fo,isOptionalC:hn})};st.parseGemmAttributesV7=uo=>sn(uo,!1),st.parseGemmAttributesV11=uo=>sn(uo,!0);const un=(uo,hn)=>{const fn={name:"Gemm",inputNames:uo.length===3?["A","B","C"]:["A","B"],inputTypes:uo.length===3?[an.TextureType.unpacked,an.TextureType.unpacked,an.TextureType.unpacked]:[an.TextureType.unpacked,an.TextureType.unpacked],key:hn.cacheKey};return Object.assign(Object.assign({},fn),{get:()=>Xr(fn,uo,hn)})},Xr=(uo,hn,fn)=>{const co=hn[0].dims.slice(),lo=hn[1].dims.slice(),[fo,ho]=on.GemmUtil.getShapeOfGemmResult(co,fn.transA,lo,fn.transB,hn.length===3?hn[2].dims:void 0),mo=[fo,ho];if(!mo)throw new Error("Can't use gemm on the given tensors");let Uo=co[co.length-1],_d="";fn.transA&&(Uo=co[0]),fn.transA&&fn.transB?_d="value += _A_T(a) * _B_T(b);":fn.transA&&!fn.transB?_d="value += _A_T(a) * _B(b);":!fn.transA&&fn.transB?_d="value += _A(a) * _B_T(b);":fn.transA||fn.transB||(_d="value += _A(a) * _B(b);");const tp=mo.length,ep=`
      float process(int indices[${tp}]) {
          int a[${tp}];
          int b[${tp}];
          ${hn.length===3?`int c[${hn[2].dims.length}];`:""}

          copyVec(indices, a);
          copyVec(indices, b);
          ${hn.length===3?"bcastIndices_C(indices, c);":""}

          float value = 0.0;
          for (int k=0; k<${Uo}; ++k) {
              a[${tp-1}] = k;
              b[${tp-2}] = k;
              ${_d}
          }

          value = value * alpha;
          ${hn.length===3?"value += beta * _C(c);":""}
          return value;
      }`;return Object.assign(Object.assign({},uo),{output:{dims:mo,type:hn[0].type,textureType:an.TextureType.unpacked},variables:[{name:"alpha",type:"float",data:fn.alpha},{name:"beta",type:"float",data:fn.beta}],shaderSource:ep})},to=(uo,hn)=>{if(!uo)throw new Error("Input is missing");if(hn.isOptionalC&&(uo.length<2||uo.length>3))throw new Error("Invaid input shape.");if(!hn.isOptionalC&&uo.length!==3)throw new Error("Gemm requires 3 inputs");if(uo.length===3&&uo[2].dims.length!==1&&uo[2].dims.length!==2)throw new Error("Invalid input shape of C");if(uo[0].type!=="float32"&&uo[0].type!=="float64"||uo[1].type!=="float32"&&uo[1].type!=="float64"||uo.length===3&&uo[2].type!=="float32"&&uo[2].type!=="float64")throw new Error("Invalid input type.");if(uo[0].type!==uo[1].type||uo.length===3&&uo[0].type!==uo[2].type)throw new Error("Input types are mismatched")}},8555:(Mt,st,nn)=>{Object.defineProperty(st,"__esModule",{value:!0}),st.createPackedIm2ColProgramInfoLoader=void 0;const rn=nn(5060),on=nn(2039),an=nn(2827);st.createPackedIm2ColProgramInfoLoader=(sn,un,Xr,to,uo)=>{const hn=(fn=uo.cacheKey,{name:"Im2Col (packed)",inputNames:["A"],inputTypes:[on.TextureType.packed],cacheHint:fn});var fn;return Object.assign(Object.assign({},hn),{get:()=>((co,lo,fo,ho,mo,Uo)=>{const _d=fo.dims,tp=ho.dims,ep=mo.length,np=[tp[1]*tp[2]*tp[3],mo[2]*mo[3]],rp=tp[2]*tp[3],ip=(0,an.unpackFromChannel)(),op=(0,rn.getGlsl)(co.session.backend.glContext.version);let ap="";for(let up=0;up<=1;up++)for(let pp=0;pp<=1;pp++)ap+=`
            blockIndex = rc.x + ${pp};
            pos = rc.y + ${up};

            if(blockIndex < ${np[1]} && pos < ${np[0]}) {
              offsetY = int(blockIndex / (${mo[ep-1]})) * ${Uo.strides[0]} -
                ${Uo.pads[0]};
              d0 = offsetY + ${Uo.dilations[0]} * (imod(pos, ${rp}) / ${tp[2]});

              if(d0 < ${_d[2]} && d0 >= 0) {
                offsetX = imod(blockIndex, ${mo[ep-1]}) * ${Uo.strides[1]} -
                  ${Uo.pads[1]};
                d1 = offsetX + ${Uo.dilations[1]} * imod(imod(pos, ${rp}), ${tp[2]});

                if(d1 < ${_d[3]} && d1 >= 0) {

                  ch = int(float(pos)/ ${rp}.);
                    innerDims = vec2(d0, d1);
                    result[${2*up+pp}] = getChannel(
                      getA(0, ch, int(innerDims.x),
                      int(innerDims.y)), innerDims);
                }
              }
            }

          `;const sp=`
      ${ip}

      void main() {
        ivec2 rc = getOutputCoords();
          vec4 result = vec4(0.0);
          int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
          vec2 innerDims;
          ${ap}
          ${op.output} = result;
      }
            `;return Object.assign(Object.assign({},lo),{output:{dims:np,type:fo.type,textureType:on.TextureType.packed},shaderSource:sp,hasMain:!0})})(sn,hn,un,Xr,to,uo)})}},3248:(Mt,st,nn)=>{Object.defineProperty(st,"__esModule",{value:!0}),st.calculateIm2ColDims=st.createIm2ColProgramInfoLoader=void 0;const rn=nn(2039);st.createIm2ColProgramInfoLoader=(on,an,sn,un,Xr)=>{const to=(uo=Xr.cacheKey,{name:"Im2Col",inputNames:["X"],inputTypes:[rn.TextureType.unpacked],cacheHint:uo});var uo;return Object.assign(Object.assign({},to),{get:()=>((hn,fn,co,lo,fo,ho)=>{const mo=co.dims,Uo=lo.dims,_d=fo.length,tp=(0,st.calculateIm2ColDims)(mo,Uo,fo,4),ep=`
        const int XC = ${mo[1]};
        const int XH = ${mo[2]};
        const int XW = ${mo[3]};
        const int KH = ${ho.kernelShape[0]};
        const int KW = ${ho.kernelShape[1]};
        const int dilationH = ${ho.dilations[0]};
        const int dilationW = ${ho.dilations[1]};
        const int strideH = ${ho.strides[0]};
        const int strideW = ${ho.strides[1]};
        const int padH = ${ho.pads[0]};
        const int padW = ${ho.pads[1]};
        const int KHKW = KH*KW;
        const int XCKHKW = XC * KHKW;
        const int outputChannels = 4;
        vec4 process(int indices[${_d}]) {
          int b  = indices[0]; // batch size
          int oh = indices[1] * strideH - padH; //output height
          int ow = indices[2] * strideW - padW; //output width
          int p = indices[3] * outputChannels; //patch
          vec4 value = vec4(0.0);
          for(int i=0; i < outputChannels; ++i) {
            if(p < XCKHKW) {
              int patchC = p / KHKW;
              int patchH = (p - patchC*KHKW) / KW;
              int patchW = (p - patchC*KHKW) - patchH * KW;
              int xh2 = oh + patchH * dilationH;
              int xw2 = ow + patchW * dilationW;
              int x[${mo.length}];
              x[0] = b;
              x[1] = patchC;
              x[2] = xh2;
              x[3] = xw2;
              if(xh2 >= 0 &&
                  xh2 < XH &&
                  xw2 >= 0 &&
                  xw2 < XW) {
                value[i] = _X(x);
              }
            }
            ++p;
          }
          return value;
        }
        `;return Object.assign(Object.assign({},fn),{output:{dims:tp,type:co.type,textureType:rn.TextureType.packedLastDimension},shaderSource:ep})})(0,to,an,sn,un,Xr)})},st.calculateIm2ColDims=(on,an,sn,un=4)=>[sn[0],sn[2],sn[3],Math.ceil(on[1]*an[2]*an[3]/un)]},6572:(Mt,st,nn)=>{Object.defineProperty(st,"__esModule",{value:!0}),st.parseImageScalerAttributes=st.imageScaler=void 0;const rn=nn(246),on=nn(2039);st.imageScaler=(to,uo,hn)=>(Xr(uo),[to.run(sn(to,uo,hn),uo)]),st.parseImageScalerAttributes=to=>{const uo=to.attributes.getFloat("scale"),hn=to.attributes.getFloats("bias");return(0,rn.createAttributeWithCacheKey)({scale:uo,bias:hn})};const an={name:"ImageScaler",inputNames:["X"],inputTypes:[on.TextureType.unpacked]},sn=(to,uo,hn)=>{const fn=Object.assign(Object.assign({},an),{cacheHint:hn.cacheKey});return Object.assign(Object.assign({},fn),{get:()=>((co,lo,fo,ho)=>{const mo=fo[0].dims.slice(),Uo=mo.length,_d=`
      ${un(ho.bias.length)}
      float process(int indices[${Uo}]) {
        return _X(indices) * scale + getBias(bias, indices[1]);
      }`;return Object.assign(Object.assign({},lo),{output:{dims:mo,type:fo[0].type,textureType:on.TextureType.unpacked},variables:[{name:"bias",type:"float",arrayLength:ho.bias.length,data:ho.bias},{name:"scale",type:"float",data:ho.scale}],shaderSource:_d})})(0,fn,uo,hn)})},un=to=>{const uo=[`float getBias(float bias[${to}], int channel) {`];for(let hn=0;hn<to;++hn)hn===0?uo.push(`	if (channel == ${hn}) { return bias[${hn}]; }`):hn===to-1?uo.push(`	else { return bias[${hn}]; }`):uo.push(`	else if (channel == ${hn}) { return bias[${hn}]; }`);return uo.push("	}"),uo.join(`
`)},Xr=to=>{if(!to||to.length!==1)throw new Error("ImageScaler requires 1 input.");if(to[0].dims.length!==4)throw new Error("Invalid input shape.");if(to[0].type!=="float32"&&to[0].type!=="float64")throw new Error("Invalid input type.")}},3346:(Mt,st,nn)=>{Object.defineProperty(st,"__esModule",{value:!0}),st.parseInstanceNormalizationAttributes=st.instanceNormalization=void 0;const rn=nn(5060),on=nn(2039);st.instanceNormalization=(uo,hn,fn)=>{to(hn);const co=uo.run(sn(hn[0]),hn);return[uo.run(Xr(uo,hn[0],fn,co.dims),[hn[0],co,hn[1],hn[2]])]},st.parseInstanceNormalizationAttributes=uo=>uo.attributes.getFloat("epsilon",1e-5);const an={name:"InstanceNormalization_MeanAndVariance",inputNames:["X"],inputTypes:[on.TextureType.unpacked]},sn=uo=>Object.assign(Object.assign({},an),{get:()=>((hn,fn)=>{const co=fn.dims.slice(),lo=co[1],fo=co[2]*co[3],ho=[co[0],lo],mo=`
      vec4 process(int[2] indices) {
        vec4 v = vec4(0.0);
        int a[4];
        a[0] = indices[0];
        a[1] = indices[1];
        float temp = 0.0;
        for(int a2=0; a2<${co[2]}; a2++) {
          a[2] = a2;
          for(int a3=0; a3<${co[3]}; a3++) {
            a[3] = a3;
            float x = _X(a);
            temp += x;
          }
        }
        float mean = temp / float(${fo});
        temp = 0.0;
        for(int a2=0; a2<${co[2]}; a2++) {
          a[2] = a2;
          for(int a3=0; a3<${co[3]}; a3++) {
            a[3] = a3;
            float x = _X(a);
            temp += (x - mean) * (x - mean);
          }
        }
        v.r = mean;
        v.g = temp / float(${fo});

        return v;
      }`;return Object.assign(Object.assign({},hn),{output:{dims:ho,type:fn.type,textureType:on.TextureType.packedLastDimension},shaderSource:mo})})(an,uo)}),un={name:"InstanceNormalization_ComputeOutput",inputNames:["X","MeanAndVariance","Scale","B"],inputTypes:[on.TextureType.unpacked,on.TextureType.packedLastDimension,on.TextureType.unpacked,on.TextureType.unpacked]},Xr=(uo,hn,fn,co)=>{const lo=Object.assign(Object.assign({},un),{cacheHint:`${fn}`});return Object.assign(Object.assign({},lo),{get:()=>((fo,ho,mo,Uo,_d)=>{const tp=(0,rn.getGlsl)(fo.session.backend.glContext.version),[ep,np]=fo.calculateTextureWidthAndHeight(_d,on.TextureType.packedLastDimension),[rp,ip]=[ep/4,np],op=`
      vec4 get_MeanAndVariance(int[2] mv) {
        int offset = indicesToOffset_MeanAndVariance(mv);
        vec2 coords = offsetToCoords(offset, ${rp}, ${ip});
        return ${tp.texture2D}(MeanAndVariance, coords);
      }

      float process(int[4] indices) {
        int mv[2];
        mv[0] = indices[0];
        mv[1] = indices[1];
        vec4 mean_and_variance = get_MeanAndVariance(mv);
        float mean = mean_and_variance.r;
        float variance = mean_and_variance.g;

        int sb[1];
        sb[0] = indices[1];
        float scale = _Scale(sb);
        float b = _B(sb);

        return scale * (_X(indices) - mean) / sqrt(variance + epsilon) + b;
      }`;return Object.assign(Object.assign({},ho),{output:{dims:mo.dims,type:mo.type,textureType:on.TextureType.unpacked},variables:[{name:"epsilon",type:"float",data:Uo}],shaderSource:op})})(uo,lo,hn,fn,co)})},to=uo=>{if(!uo||uo.length!==3)throw new Error("InstanceNormalization requires 3 inputs.");const hn=uo[0],fn=uo[1],co=uo[2];if(hn.dims.length<3||fn.dims.length!==1||co.dims.length!==1)throw new Error("Invalid input shape.");if(fn.dims[0]!==hn.dims[1]||co.dims[0]!==hn.dims[1])throw new Error("Input shapes are mismatched.");if(hn.type!=="float32"&&hn.type!=="float64"||fn.type!=="float32"&&fn.type!=="float64"||co.type!=="float32"&&co.type!=="float64")throw new Error("Invalid input type.");if(uo[0].dims.length!==4)throw new Error("Only support 4-D input shape.")}},708:(Mt,st,nn)=>{Object.defineProperty(st,"__esModule",{value:!0}),st.createPackedMatmulProgramInfoLoader=void 0;const rn=nn(2517),on=nn(5060),an=nn(2039),sn=nn(9390),un=nn(2823),Xr=nn(5623);st.createPackedMatmulProgramInfoLoader=(to,uo,hn)=>{const fn=(co=uo.length>2,lo=hn.activationCacheKey,{name:"MatMul (packed)",inputNames:co?["A","B","Bias"]:["A","B"],inputTypes:co?[an.TextureType.packed,an.TextureType.packed,an.TextureType.packed]:[an.TextureType.packed,an.TextureType.packed],cacheHint:lo});var co,lo;return Object.assign(Object.assign({},fn),{get:()=>((fo,ho,mo,Uo)=>{const _d=mo.length>2,tp=_d?"value += getBiasForMatmul();":"",ep=mo[0].dims,np=mo[1].dims,rp=rn.BroadcastUtil.calcShape(ep,np,!0),ip=!rn.ShapeUtil.areEqual(mo[0].dims,mo[1].dims);if(!rp)throw new Error("Can't use matmul on the given tensors");const op=ep[ep.length-1],ap=Math.ceil(op/2),sp=ep.length,up=np.length,pp=(0,on.getGlsl)(fo.session.backend.glContext.version),lp=(0,sn.getCoordsDataType)(rp.length),dp=rp.length,cp=(0,sn.getGlChannels)(),{activationFunction:fp,applyActivation:gp}=(0,un.getActivationSnippet)(Uo),mp=_d?`${(0,Xr.getBiasForMatmul)(lp,cp,mo[2].dims,rp,!0)}`:"",xp=ip?`${function(jp,Dp,Vp,Up){let Kp=[],Mp=[];const zp=Vp[0].dims,Bp=Vp[1].dims,Pp=zp.length,Gp=Bp.length,Wp=Up.length,Xp=Wp-Pp,Qp=Wp-Gp;Kp=zp.map((am,wm)=>`coords.${Dp[wm+Xp]}`),Kp[Pp-1]="i*2",Kp.join(", "),Mp=Bp.map((am,wm)=>`coords.${Dp[wm+Qp]}`),Mp[Gp-2]="i*2",Mp.join(", ");const om=rn.BroadcastUtil.getBroadcastDims(zp,Up),ym=rn.BroadcastUtil.getBroadcastDims(Bp,Up),mm=om.map(am=>`coords.${Dp[am+Xp]} = 0;`).join(`
`),Sm=ym.map(am=>`coords.${Dp[am+Qp]} = 0;`).join(`
`),xm=`int lastDim = coords.${Dp[Wp-1]};
  coords.${Dp[Wp-1]} = coords.${Dp[Wp-2]};
  coords.${Dp[Wp-2]} = lastDim;`;return`
vec4 getAAtOutCoordsMatmul(int i) {
  ${jp} coords = getOutputCoords();
  ${xm}
  ${mm}
  vec4 outputValue = getA(${Kp});
  return outputValue;
}

vec4 getBAtOutCoordsMatmul(int i) {
  ${jp} coords = getOutputCoords();
  ${xm}
  ${Sm}
  vec4 outputValue = getB(${Mp});
  return outputValue;
}`}(lp,cp,mo,rp)}`:"",_p=ip?"getAAtOutCoordsMatmul(i)":`getA(${function(jp,Dp){let Vp="";for(let Up=0;Up<Dp-2;Up++)Vp+=`rc.${jp[Up]}, `;return Vp+=`rc.${jp[Dp-2]}, i*2`,Vp}(cp,sp)})`,Sp=ip?"getBAtOutCoordsMatmul(i)":`getB(${function(jp,Dp){let Vp="";for(let Up=0;Up<Dp-2;Up++)Vp+=`rc.${jp[Up]}, `;return Vp+=`i*2, rc.${jp[Dp-1]}`,Vp}(cp,up)})`,Cp=`
            ${xp}
            ${mp}
            ${fp}
            void main() {
              ${ip?"":`${lp} rc =
          getOutputCoords(); int lastDim = rc.${cp[dp-1]}; rc.${cp[dp-1]} =
          rc.${cp[dp-2]}; rc.${cp[dp-2]} = lastDim;
      `}

              vec4 value = vec4(0);
              for (int i = 0; i < ${ap}; i++) {
                vec4 a = ${_p};
                vec4 b = ${Sp};

                value += (a.rrbb * b.rgrg);
                value += (a.ggaa * b.baba);
              }
              ${tp}
              ${gp}
              ${pp.output} = value;
            }`;return Object.assign(Object.assign({},ho),{output:{dims:rp,type:mo[0].type,textureType:an.TextureType.packed},shaderSource:Cp,hasMain:!0})})(to,fn,uo,hn)})}},5623:(Mt,st,nn)=>{Object.defineProperty(st,"__esModule",{value:!0}),st.getBiasForMatmul=st.createMatmulProgramInfoLoader=st.parseMatMulAttributes=st.matMul=void 0;const rn=nn(2517),on=nn(2039),an=nn(9390),sn=nn(2823),un=nn(708);function Xr(hn,fn){const co=(lo=hn.length>2,fo=fn.activationCacheKey,{name:"MatMul",inputNames:lo?["A","B","Bias"]:["A","B"],inputTypes:lo?[on.TextureType.unpacked,on.TextureType.unpacked,on.TextureType.unpacked]:[on.TextureType.unpacked,on.TextureType.unpacked],cacheHint:fo});var lo,fo;return Object.assign(Object.assign({},co),{get:()=>function(ho,mo,Uo){const _d=mo[0].dims,tp=mo[1].dims,ep=rn.BroadcastUtil.calcShape(_d,tp,!0);if(!ep)throw new Error("Can't use matmul on the given tensors");const np=(0,an.getCoordsDataType)(ep.length),rp=(0,an.getGlChannels)(),{activationFunction:ip,applyActivation:op}=(0,sn.getActivationSnippet)(Uo),ap=mo.length>2,sp=ap?"value += getBiasForMatmul();":"",up=ap?`${uo(np,rp,mo[2].dims,ep,!1)}`:"",pp=ep.length,lp=_d.length,dp=tp.length,cp=`
    ${ip}
    ${up}
    float process(int indices[${pp}]) {
        int a[${lp}];
        int b[${dp}];
        bcastMatmulIndices_A(indices, a);
        bcastMatmulIndices_B(indices, b);

        float value;
        for (int k=0; k<${_d[_d.length-1]}; ++k) {
            a[${lp-1}] = k;
            b[${dp-2}] = k;
            value += _A(a) * _B(b);
        }
        ${sp}
        ${op}
        return value;
    }`;return Object.assign(Object.assign({},ho),{output:{dims:ep,type:mo[0].type,textureType:on.TextureType.unpacked},shaderSource:cp})}(co,hn,fn)})}st.matMul=(hn,fn,co)=>(to(fn),hn.session.pack?[hn.run((0,un.createPackedMatmulProgramInfoLoader)(hn,fn,co),fn)]:[hn.run(Xr(fn,co),fn)]),st.parseMatMulAttributes=hn=>(0,sn.parseInternalActivationAttributes)(hn.attributes),st.createMatmulProgramInfoLoader=Xr;const to=hn=>{if(!hn||hn.length!==2)throw new Error("MatMul requires 2 inputs.");if(hn[0].dims[hn[0].dims.length-1]!==hn[1].dims[hn[1].dims.length-2])throw new Error("shared dimension does not match.");if(hn[0].type!=="float32"&&hn[0].type!=="float64"||hn[1].type!=="float32"&&hn[1].type!=="float64")throw new Error("inputs should be float type");if(hn[0].type!==hn[1].type)throw new Error("inputs types should match")};function uo(hn,fn,co,lo,fo){let ho="";const mo=co.length,Uo=lo.length,_d=Uo-mo;ho=Uo<2&&mo>0?"coords":co.map((np,rp)=>`coords.${fn[rp+_d]}`).join(", ");const tp=rn.BroadcastUtil.getBroadcastDims(co,lo).map(np=>`coords.${fn[np+_d]} = 0;`).join(`
`);let ep="vec4(outputValue.xx, outputValue.yy)";return rn.ShapeUtil.size(co)===1&&(ep="vec4(outputValue.x)"),fo?`
vec4 getBiasForMatmul() {
  ${hn} coords = getOutputCoords();
  ${tp}
  vec4 outputValue = getBias(${ho});
  return ${ep};
}`:`
float getBiasForMatmul() {
  ${hn} coords = getOutputCoords();
  ${tp}
  return getBias(coords.x);
}`}st.getBiasForMatmul=uo},2403:(Mt,st,nn)=>{Object.defineProperty(st,"__esModule",{value:!0}),st.createPackProgramInfoLoader=void 0;const rn=nn(5060),on=nn(2039),an=nn(9390),sn=nn(2827),un={name:"pack",inputNames:["A"],inputTypes:[on.TextureType.unpackedReversed]};st.createPackProgramInfoLoader=(Xr,to)=>Object.assign(Object.assign({},un),{get:()=>((uo,hn)=>{const fn=(0,rn.getGlsl)(uo.session.backend.glContext.version),co=hn.dims,lo=co.length,fo=hn.dims.length,ho=(0,an.getCoordsDataType)(fo),mo=(0,sn.getChannels)("rc",fo),Uo=(_d=fo,tp=mo,ep=co[co.length-2],np=co[co.length-1],_d===0||_d===1?"":`
    int r = ${tp[_d-2]};
    int c = ${tp[_d-1]};
    int rp1 = ${tp[_d-2]} + 1;
    int cp1 = ${tp[_d-1]} + 1;
    bool rEdge = rp1 >= ${np};
    bool cEdge = cp1 >= ${ep};
    `);var _d,tp,ep,np;let rp;rp=lo===0?[1,1]:lo===1?[co[0],1]:[co[fo-1],co[fo-2]];const ip=function(sp,up,pp){if(sp===0)return"false";if(sp===1)return`rc > ${up[0]}`;let lp="";for(let dp=sp-2;dp<sp;dp++)lp+=`${pp[dp]} >= ${up[dp-sp+2]}`,dp<sp-1&&(lp+="||");return lp}(fo,rp,mo),op=function(sp,up){const pp=sp.length;if(pp===0)return"getA(), 0, 0, 0";if(pp===1)return`getA(rc),
            rc + 1 >= ${sp[0]} ? 0. : getA(rc + 1),
            0, 0`;let lp="";if(pp>2)for(let dp=0;dp<pp-2;++dp)lp+=`${up[dp]},`;return`getA(${lp}r, c),
          rEdge ? 0. : getA(${lp}rp1, c),
          cEdge ? 0. : getA(${lp}r, cp1),
          rEdge || cEdge ? 0. : getA(${lp}rp1, cp1)`}(co,mo),ap=`
        void main() {
          ${ho} rc = getOutputCoords();

          if(${ip}) {
            ${fn.output} = vec4(0);
          } else {
            ${Uo}

            ${fn.output} = vec4(${op});
          }
        }
      `;return Object.assign(Object.assign({},un),{hasMain:!0,output:{dims:hn.dims,type:hn.type,textureType:on.TextureType.packed},shaderSource:ap})})(Xr,to)})},2827:(Mt,st,nn)=>{Object.defineProperty(st,"__esModule",{value:!0}),st.unpackFromChannel=st.getChannels=st.getVecChannels=void 0;const rn=nn(9390);function on(an,sn){return(0,rn.getGlChannels)(sn).map(un=>`${an}.${un}`)}st.getVecChannels=on,st.getChannels=function(an,sn){return sn===1?[an]:on(an,sn)},st.unpackFromChannel=function(){return`
    float getChannel(vec4 frag, int dim) {
      int modCoord = imod(dim, 2);
      return modCoord == 0 ? frag.r : frag.g;
    }

    float getChannel(vec4 frag, vec2 innerDims) {
      vec2 modCoord = mod(innerDims, 2.);
      return modCoord.x == 0. ?
        (modCoord.y == 0. ? frag.r : frag.g) :
        (modCoord.y == 0. ? frag.b : frag.a);
    }
  `}},2870:(Mt,st,nn)=>{Object.defineProperty(st,"__esModule",{value:!0}),st.parsePadAttributesV11=st.padV11=st.parsePadAttributesV2=st.padV2=void 0;const rn=nn(246),on=nn(2517),an=nn(5060),sn=nn(2039),un={name:"Pad",inputNames:["A"],inputTypes:[sn.TextureType.unpacked]};st.padV2=(ho,mo,Uo)=>(uo(mo),[ho.run(Object.assign(Object.assign({},un),{cacheHint:Uo.cacheKey,get:()=>to(ho,mo[0],Uo)}),mo)]),st.parsePadAttributesV2=ho=>{const mo=ho.attributes.getString("mode","constant"),Uo=ho.attributes.getFloat("value",0),_d=ho.attributes.getInts("pads");return(0,rn.createAttributeWithCacheKey)({mode:mo,value:Uo,pads:_d})},st.padV11=(ho,mo,Uo)=>{hn(mo);const _d=Xr(ho,mo,Uo);return(0,st.padV2)(ho,[mo[0]],_d)},st.parsePadAttributesV11=ho=>ho.attributes.getString("mode","constant");const Xr=(ho,mo,Uo)=>{if(!ho.session.isInitializer(mo[1].dataId)||mo.length>=3&&!ho.session.isInitializer(mo[2].dataId))throw new Error("dynamic pad attributes are not allowed");const _d=Array.from(mo[1].integerData),tp=mo.length>=3?mo[2].floatData[0]:0;return(0,rn.createAttributeWithCacheKey)({mode:Uo,pads:_d,value:tp})},to=(ho,mo,Uo)=>{const _d=on.ShapeUtil.padShape(mo.dims.slice(),Uo.pads),tp=_d.length,ep=`
      ${fn(ho,mo,Uo)}
      float process(int[${tp}] indices) {
          return padA(indices);
      }`;return{name:"Pad",inputNames:["A"],inputTypes:[sn.TextureType.unpacked],output:{dims:_d,type:mo.type,textureType:sn.TextureType.unpacked},shaderSource:ep}},uo=ho=>{if(!ho||ho.length!==1)throw new Error("Pad requires 1 input");if(ho[0].type!=="float32"&&ho[0].type!=="float64")throw new Error("Invalid input type.")},hn=ho=>{if(!ho||ho.length!==2&&ho.length!==3)throw new Error("Pad requires 2 or 3 inputs");if(ho[1].type!=="int32")throw new Error("Invalid input type.");if(ho.length>=3&&ho[2].type==="string")throw new Error("Invalid input type.")},fn=(ho,mo,Uo)=>{const _d=(0,an.getGlsl)(ho.session.backend.glContext.version),[tp,ep]=ho.calculateTextureWidthAndHeight(mo.dims,sn.TextureType.unpacked),np=on.ShapeUtil.computeStrides(mo.dims);switch(Uo.mode){case"constant":return co(_d,mo.dims,np,tp,ep,Uo.pads,Uo.value);case"reflect":return lo(_d,mo.dims,np,tp,ep,Uo.pads);case"edge":return fo(_d,mo.dims,np,tp,ep,Uo.pads);default:throw new Error("Invalid mode")}},co=(ho,mo,Uo,_d,tp,ep,np)=>{const rp=mo.length;let ip="";for(let op=rp-1;op>=0;--op)ip+=`
        k = m[${op}] - ${ep[op]};
        if (k < 0)  return constant;
        if (k >= ${mo[op]}) return constant;
        offset += k * ${Uo[op]};
        `;return`
      float padA(int m[${rp}]) {
        const float constant = float(${np});
        int offset = 0;
        int k = 0;
        ${ip}
        vec2 coords = offsetToCoords(offset, ${_d}, ${tp});
        float value = getColorAsFloat(${ho.texture2D}(A, coords));
        return value;
      }
      `},lo=(ho,mo,Uo,_d,tp,ep)=>{const np=mo.length;let rp="";for(let ip=np-1;ip>=0;--ip)rp+=`
        k = m[${ip}] - ${ep[ip]};
        if (k < 0) { k = -k; }
        {
          const int _2n_1 = ${2*(mo[ip]-1)};
          k = int( mod( float(k), float(_2n_1) ) ) ;
          if(k >= ${mo[ip]}) { k = _2n_1 - k; }
        }
        offset += k * ${Uo[ip]};
        `;return`
      float padA(int m[${np}]) {
        int offset = 0;
        int k = 0;
        ${rp}
        vec2 coords = offsetToCoords(offset, ${_d}, ${tp});
        float value = getColorAsFloat(${ho.texture2D}(A, coords));
        return value;
      }
      `},fo=(ho,mo,Uo,_d,tp,ep)=>{const np=mo.length;let rp="";for(let ip=np-1;ip>=0;--ip)rp+=`
        k = m[${ip}] - ${ep[ip]};
        if (k < 0)  k = 0;
        if (k >= ${mo[ip]}) k = ${mo[ip]-1};
        offset += k * ${Uo[ip]};
      `;return`
      float padA(int m[${np}]) {
        int offset = 0;
        int k = 0;
        ${rp}
        vec2 coords = offsetToCoords(offset, ${_d}, ${tp});
        float value = getColorAsFloat(${ho.texture2D}(A, coords));
        return value;
      }
      `}},2143:(Mt,st,nn)=>{Object.defineProperty(st,"__esModule",{value:!0}),st.globalMaxPool=st.parseMaxPoolAttributes=st.maxPool=st.parseGlobalAveragePoolAttributes=st.globalAveragePool=st.parseAveragePoolAttributes=st.averagePool=void 0;const rn=nn(246),on=nn(2517),an=nn(2039);st.averagePool=(fo,ho,mo)=>{hn(ho);const Uo={name:"AveragePool",inputNames:["X"],inputTypes:[an.TextureType.unpacked],cacheHint:mo.cacheKey};return[fo.run(Object.assign(Object.assign({},Uo),{get:()=>sn(ho,Uo,!1,mo)}),ho)]},st.parseAveragePoolAttributes=fo=>{const ho=fo.attributes.getString("auto_pad","NOTSET"),mo=fo.attributes.getInt("ceil_mode",0),Uo=fo.attributes.getInt("count_include_pad",0)!==0,_d=fo.attributes.getInts("kernel_shape"),tp=fo.attributes.getInts("strides",[]),ep=fo.attributes.getInts("pads",[]);if(mo!==0)throw new Error("using ceil() in shape computation is not yet supported for AveragePool");return(0,rn.createAttributeWithCacheKey)({autoPad:ho,ceilMode:mo,countIncludePad:Uo,kernelShape:_d,strides:tp,pads:ep})};const sn=(fo,ho,mo,Uo)=>{const[_d,tp]=Xr(fo,Uo,mo),ep=on.ShapeUtil.size(_d.kernelShape);let np="";_d.countIncludePad?np+=`value /= float(${ep});`:np+=`value /= float(${ep} - pad);`;const rp=`
        ${fn(fo[0].dims,_d,"value += _X(x);",np,"0.0")}
      `;return Object.assign(Object.assign({},ho),{output:{dims:tp,type:fo[0].type,textureType:an.TextureType.unpacked},shaderSource:rp})};st.globalAveragePool=(fo,ho,mo)=>{hn(ho);const Uo={name:"GlobalAveragePool",inputNames:["X"],inputTypes:[an.TextureType.unpacked],cacheHint:`${mo.countIncludePad}`};return[fo.run(Object.assign(Object.assign({},Uo),{get:()=>sn(ho,Uo,!0,mo)}),ho)]},st.parseGlobalAveragePoolAttributes=fo=>{const ho=fo.attributes.getInt("count_include_pad",0)!==0;return(0,rn.createAttributeWithCacheKey)({autoPad:"",ceilMode:0,countIncludePad:ho,kernelShape:[],strides:[],pads:[]})},st.maxPool=(fo,ho,mo)=>{hn(ho);const Uo={name:"MaxPool",inputNames:["X"],inputTypes:[an.TextureType.unpacked],cacheHint:mo.cacheKey};return[fo.run(Object.assign(Object.assign({},Uo),{get:()=>un(ho,Uo,!1,mo)}),ho)]},st.parseMaxPoolAttributes=fo=>{const ho=fo.attributes.getString("auto_pad","NOTSET"),mo=fo.attributes.getInt("ceil_mode",0),Uo=fo.attributes.getInts("kernel_shape"),_d=fo.attributes.getInts("strides",[]),tp=fo.attributes.getInts("pads",[]),ep=fo.attributes.getInt("storage_order",0),np=fo.attributes.getInts("dilations",[]);if(ep!==0)throw new Error("column major storage order is not yet supported for MaxPool");if(mo!==0)throw new Error("using ceil() in shape computation is not yet supported for MaxPool");return(0,rn.createAttributeWithCacheKey)({autoPad:ho,ceilMode:mo,countIncludePad:!1,kernelShape:Uo,strides:_d,pads:tp,storageOrder:ep,dilations:np})};const un=(fo,ho,mo,Uo)=>{const[_d,tp]=Xr(fo,Uo,mo),ep=`
      ${fn(fo[0].dims,_d,`
      value = max(_X(x), value);
    `,"","-1e5")}
    `;return Object.assign(Object.assign({},ho),{output:{dims:tp,type:fo[0].type,textureType:an.TextureType.unpacked},shaderSource:ep})},Xr=(fo,ho,mo)=>{const Uo=fo[0].dims.slice(),_d=Object.hasOwnProperty.call(ho,"dilations"),tp=ho.kernelShape.slice(),ep=ho.strides.slice(),np=_d?ho.dilations.slice():[],rp=ho.pads.slice();on.PoolConvUtil.adjustPoolAttributes(mo,Uo,tp,ep,np,rp);const ip=on.PoolConvUtil.computePoolOutputShape(mo,Uo,ep,np,tp,rp,ho.autoPad),op=Object.assign({},ho);return _d?Object.assign(op,{kernelShape:tp,strides:ep,pads:rp,dilations:np,cacheKey:ho.cacheKey}):Object.assign(op,{kernelShape:tp,strides:ep,pads:rp,cacheKey:ho.cacheKey}),[op,ip]},to={autoPad:"",ceilMode:0,countIncludePad:!1,kernelShape:[],strides:[],pads:[],storageOrder:0,dilations:[],cacheKey:""},uo={name:"GlobalMaxPool",inputNames:["X"],inputTypes:[an.TextureType.unpacked]};st.globalMaxPool=(fo,ho)=>(hn(ho),[fo.run(Object.assign(Object.assign({},uo),{get:()=>un(ho,uo,!0,to)}),ho)]);const hn=fo=>{if(!fo||fo.length!==1)throw new Error("Pool ops requires 1 input.");if(fo[0].type!=="float32"&&fo[0].type!=="float64")throw new Error("Invalid input type.")},fn=(fo,ho,mo,Uo,_d)=>{const tp=fo.length;if(ho.kernelShape.length<=2){const ep=ho.kernelShape[ho.kernelShape.length-1],np=ho.strides[ho.strides.length-1],rp=ho.pads[ho.pads.length/2-1],ip=ho.pads[ho.pads.length-1],op=fo[tp-1];let ap="",sp="",up="";if(ap=rp+ip!==0?`
          for (int i = 0; i < ${ep}; i++) {
            x[${tp} - 1] = indices[${tp} - 1] * ${np} - ${rp} + i;
            if (x[${tp} - 1] < 0 || x[${tp} - 1] >= ${op}) {
              pad++;
              continue;
            }
            ${mo}
          }`:`
          for (int i = 0; i < ${ep}; i++) {
            x[${tp} - 1] = indices[${tp} - 1] * ${np} - ${rp} + i;
            ${mo}
          }`,ho.kernelShape.length===2){const pp=ho.kernelShape[ho.kernelShape.length-2],lp=ho.strides[ho.strides.length-2],dp=ho.pads[ho.pads.length/2-2],cp=ho.pads[ho.pads.length-2],fp=fo[tp-2];sp=dp+cp!==0?`
            for (int j = 0; j < ${pp}; j++) {
              x[${tp} - 2] = indices[${tp} - 2] * ${lp} - ${dp} + j;
              if (x[${tp} - 2] < 0 || x[${tp} - 2] >= ${fp}) {
                pad+= ${ep};
                continue;
              }
          `:`
            for (int j = 0; j < ${pp}; j++) {
              x[${tp} - 2] = indices[${tp} - 2] * ${lp} - ${dp} + j;
            `,up=`
          }
        `}return`
        float process(int indices[${tp}]) {
          int x[${tp}];
          copyVec(indices, x);

          float value = ${_d};
          int pad = 0;
          ${sp}
          ${ap}
          ${up}
          ${Uo}
          return value;
        }
      `}{const ep=on.ShapeUtil.size(ho.kernelShape),np=on.ShapeUtil.computeStrides(ho.kernelShape),rp=np.length,ip=ho.pads.length,op=lo(rp),ap=co(fo,"inputDims"),sp=co(ho.pads,"pads"),up=co(np,"kernelStrides"),pp=co(ho.strides,"strides");let lp="";return lp=ho.pads.reduce((dp,cp)=>dp+cp)?`
            if (x[j] >= inputDims[j] || x[j] < 0) {
              pad++;
              isPad = true;
              break;
            }
          }
          if (!isPad) {
            ${mo}
          }`:`
          }
          ${mo}
        `,`
        ${op}
        float process(int indices[${tp}]) {
          int x[${tp}];
          copyVec(indices, x);
          int offset[${rp}];
          int pads[${ip}];
          int inputDims[${tp}];
          int kernelStrides[${rp}];
          int strides[${rp}];
          ${sp}
          ${ap}
          ${pp}
          ${up}

          float value = ${_d};
          int pad = 0;
          bool isPad = false;
          for (int i = 0; i < ${ep}; i++) {
            offsetToIndices(i, kernelStrides, offset);
            isPad = false;
            for (int j = ${tp} - ${rp}; j < ${tp}; j++) {
              x[j] = indices[j] * strides[j - ${tp} + ${rp}]
                + offset[j - ${tp} + ${rp}] - pads[j - 2];
              ${lp}
          }
          ${Uo}

          return value;
        }
      `}},co=(fo,ho)=>{let mo="";for(let Uo=0;Uo<fo.length;Uo++)mo+=`
      ${ho}[${Uo}] = ${fo[Uo]};
    `;return mo},lo=fo=>`
  void offsetToIndices(int offset, int[${fo}] strides, out int[${fo}] indices) {
    if (${fo} == 0) {
      return;
    }
    for (int i = 0; i < ${fo} - 1; ++i) {
      indices[i] = offset / strides[i];
      offset -= indices[i] * strides[i];
    }
    indices[${fo} - 1] = offset;
  }`},4939:(Mt,st,nn)=>{Object.defineProperty(st,"__esModule",{value:!0}),st.reduceLogSumSquare=st.reduceLogSum=st.reduceProd=st.reduceMin=st.reduceMax=st.reduceMean=st.reduceSum=st.parseReduceAttributes=void 0;const rn=nn(246),on=nn(782),an=nn(2517),sn=nn(2039),un=(uo,hn,fn,co,lo)=>{to(hn);const fo={name:co,inputNames:["A"],inputTypes:[sn.TextureType.unpacked]};return[uo.run(Object.assign(Object.assign({},fo),{cacheHint:fn.cacheKey,get:()=>Xr(uo,hn,fn,co,lo,fo)}),hn)]};st.parseReduceAttributes=uo=>{const hn=uo.attributes.getInts("axes",[]),fn=uo.attributes.getInt("keepdims",1)===1;return(0,rn.createAttributeWithCacheKey)({axes:hn,keepDims:fn})};const Xr=(uo,hn,fn,co,lo,fo)=>{const ho=[],mo=hn[0].dims.length||1,Uo=[],_d=an.ShapeUtil.normalizeAxes(fn.axes,hn[0].dims.length),tp=lo(hn,_d);let ep=tp[1];for(let rp=0;rp<hn[0].dims.length;rp++)_d.indexOf(rp)>=0||_d.length===0?(fn.keepDims&&ho.push(1),ep=`
          for(int j${rp} = 0; j${rp} < ${hn[0].dims[rp]}; j${rp}++) {
            inputIdx[${rp}] = j${rp};
            ${ep}
          }`):(Uo.push(`inputIdx[${rp}] = outputIdx[${ho.length}];`),ho.push(hn[0].dims[rp]));const np=`
      float process(int outputIdx[${ho.length||1}]) {
        float value;                 // final result
        int inputIdx[${mo}];      // addressing input data
        ${Uo.join(`
`)}
        ${tp[0]}       // init ops for reduce max/min
        ${ep}
        ${tp[2]}       // final computation for reduce mean
        return value;
      }`;return Object.assign(Object.assign({},fo),{output:{dims:ho,type:hn[0].type,textureType:sn.TextureType.unpacked},shaderSource:np})},to=uo=>{if(!uo||uo.length!==1)throw new Error("Reduce op requires 1 input.");if(on.NUMBER_TYPES.indexOf(uo[0].type)===-1)throw new Error("Invalid input type.")};st.reduceSum=(uo,hn,fn)=>un(uo,hn,fn,"ReduceSum",()=>["value = 0.0;","value += _A(inputIdx);",""]),st.reduceMean=(uo,hn,fn)=>un(uo,hn,fn,"ReduceMean",(co,lo)=>{let fo=1;for(let ho=0;ho<co[0].dims.length;ho++)(lo.indexOf(ho)>=0||lo.length===0)&&(fo*=co[0].dims[ho]);return["value = 0.0;","value += _A(inputIdx);",`value /= ${fo}.;`]}),st.reduceMax=(uo,hn,fn)=>un(uo,hn,fn,"ReduceMax",(co,lo)=>{const fo=[];for(let ho=0;ho<co[0].dims.length;ho++)(lo.indexOf(ho)>=0||lo.length===0)&&fo.push(`inputIdx[${ho}] = 0;`);return[`${fo.join(`
`)}
value = _A(inputIdx);`,"value = max(value, _A(inputIdx));",""]}),st.reduceMin=(uo,hn,fn)=>un(uo,hn,fn,"ReduceMin",(co,lo)=>{const fo=[];for(let ho=0;ho<co[0].dims.length;ho++)(lo.indexOf(ho)>=0||lo.length===0)&&fo.push(`inputIdx[${ho}] = 0;`);return[`${fo.join(`
`)}
value = _A(inputIdx);`,"value = min(value, _A(inputIdx));",""]}),st.reduceProd=(uo,hn,fn)=>un(uo,hn,fn,"ReduceProd",()=>["value = 1.0;","value *= _A(inputIdx);",""]),st.reduceLogSum=(uo,hn,fn)=>un(uo,hn,fn,"ReduceLogSum",()=>["value = 0.0;","value += _A(inputIdx);","value = log(value);"]),st.reduceLogSumSquare=(uo,hn,fn)=>un(uo,hn,fn,"ReduceLogSumSquare",()=>["float t; value = 0.0;","t = _A(inputIdx); value += t * t;",""])},7019:(Mt,st,nn)=>{Object.defineProperty(st,"__esModule",{value:!0}),st.isReshapeCheap=st.processDims3D=st.createPackedReshape3DProgramInfoLoader=void 0;const rn=nn(2517),on=nn(5060),an=nn(2039),sn=nn(2827);st.createPackedReshape3DProgramInfoLoader=(un,Xr,to)=>{const uo=(hn=>({name:"Reshape (packed)",inputTypes:[an.TextureType.packed],inputNames:["A"],cacheHint:`${hn}`}))(to);return Object.assign(Object.assign({},uo),{get:()=>((hn,fn,co,lo)=>{const fo=fn.dims,ho=lo;let mo="";for(let tp=0;tp<4;tp++){let ep="";switch(tp){case 0:ep="outputCoords = rc;";break;case 1:ep="outputCoords = ivec3(rc.x, rc.y+1, rc.z);";break;case 2:ep="outputCoords = ivec3(rc.x, rc.y, rc.z+1);";break;case 3:ep="outputCoords = ivec3(rc.x, rc.y+1, rc.z+1);";break;default:throw new Error}mo+=`
        ${ep}
        ${tp>0?"if(outputCoords.y < rows && outputCoords.z < cols){":""}
          int flattenedIndex = getFlattenedIndex(outputCoords);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flattenedIndex);
          vec2 innerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${tp}] = getChannel(getA(inputRC.x, inputRC.y, inputRC.z), innerDims);

        ${tp>0?"}":""}
      `}const Uo=(0,on.getGlsl)(hn.session.backend.glContext.version),_d=`
      ${function(tp){const ep=rn.ShapeUtil.computeStrides(tp),np=["b","r","c"],rp="index";return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${ep.map((ip,op)=>`int ${np[op]} = ${rp} / ${ip}; ${op===ep.length-1?`int ${np[op+1]} = ${rp} - ${np[op]} * ${ip}`:`index -= ${np[op]} * ${ip}`};`).join("")}
      return ivec3(b, r, c);
    }
  `}(fo)}
      ${function(tp){const ep=rn.ShapeUtil.computeStrides(tp);return`
  int getFlattenedIndex(ivec3 coords) {
    // reverse y, z order
    return coords.x * ${ep[0]} + coords.z * ${ep[1]} + coords.y;
  }
`}(ho)}
      ${(0,sn.unpackFromChannel)()}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.0);

        ivec3 outputCoords;
        int rows = ${ho[2]};
        int cols = ${ho[1]};

        ${mo}
        ${Uo.output} = result;
      }
    `;return Object.assign(Object.assign({},co),{output:{dims:ho,type:fn.type,textureType:an.TextureType.packed},shaderSource:_d,hasMain:!0})})(un,Xr,uo,to)})},st.processDims3D=function(un){if(un.length===0)return[1,1,1];let Xr=1;for(let to=0;to<un.length-2;++to)Xr*=un[to];return[Xr,un.length>1?un[un.length-2]:1,un[un.length-1]]},st.isReshapeCheap=function(un,Xr){let to=!1;return to=un.length===0||Xr.length===0||(un.length<2||Xr.length<2?un[un.length-1]===Xr[Xr.length-1]:un[un.length-1]===Xr[Xr.length-1]&&un[un.length-2]===Xr[Xr.length-2]),to}},718:(Mt,st,nn)=>{Object.defineProperty(st,"__esModule",{value:!0}),st.reshape=void 0;const rn=nn(2517);st.reshape=(on,an)=>{const sn=rn.ShapeUtil.calculateReshapedDims(an[0].dims,an[1].integerData);return on.session.pack?[on.reshapePacked(an[0],sn)]:[on.reshapeUnpacked(an[0],sn)]}},2268:(Mt,st,nn)=>{Object.defineProperty(st,"__esModule",{value:!0}),st.parseResizeAttributesV11=st.parseResizeAttributesV10=st.resize=void 0;const rn=nn(5060),on=nn(2039),an=nn(9390),sn=nn(2827),un=nn(9793),Xr={name:"Resize",inputNames:["A"],inputTypes:[on.TextureType.packed]};st.resize=(co,lo,fo)=>((0,un.validateInputs)(lo,fo),[co.run(Object.assign(Object.assign({},Xr),{cacheHint:fo.cacheKey,get:()=>to(co,lo,fo)}),lo)]),st.parseResizeAttributesV10=co=>(0,un.parseUpsampleAttributes)(co,10),st.parseResizeAttributesV11=co=>(0,un.parseUpsampleAttributes)(co,11);const to=(co,lo,fo)=>{const ho=(0,rn.getGlsl)(co.session.backend.glContext.version),[mo,Uo]=uo(lo,fo);if(mo.every(lp=>lp===1)&&fo.coordinateTransformMode!=="tf_crop_and_resize")return Object.assign(Object.assign({},Xr),{output:{dims:Uo,type:lo[0].type,textureType:on.TextureType.packed},hasMain:!0,shaderSource:`void main() {
                    vec4 v = ${ho.texture2D}(X, TexCoords);
                    ${ho.output} = v;
                }`});const _d=Uo.length;if(_d<2)throw new Error(`output dimension should be at least 2, but got ${_d}`);const tp=Uo[_d-2],ep=Uo[_d-1],np=lo[0].dims;if(_d!==np.length)throw new Error(`output dimension should match input ${np.length}, but got ${_d}`);const rp=np[_d-2],ip=np[_d-1],op=mo[_d-2],ap=mo[_d-1];let sp="";if(fo.mode!=="linear")throw new Error(`resize (packed) does not support mode: '${fo.mode}'`);switch(fo.coordinateTransformMode){case"asymmetric":sp=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        return vec4(coords) / scaleWHWH;
                    }
                `;break;case"half_pixel":sp=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        return (vec4(coords) + 0.5) / scaleWHWH - 0.5;
                    }
                `;break;case"pytorch_half_pixel":sp=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        vec4 fcoords = vec4(coords);
                        return vec4(
                            ${ep}.0 > 1.0 ? (fcoords.x + 0.5) / scaleWHWH.x - 0.5 : 0.0,
                            ${tp}.0 > 1.0 ? (fcoords.y + 0.5) / scaleWHWH.y - 0.5 : 0.0,
                            ${ep}.0 > 1.0 ? (fcoords.z + 0.5) / scaleWHWH.z - 0.5 : 0.0,
                            ${tp}.0 > 1.0 ? (fcoords.w + 0.5) / scaleWHWH.w - 0.5 : 0.0
                          );
                    }
                `;break;case"align_corners":sp=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        vec4 resized = vec4(${ep}.0 - 1.0, ${tp}.0 - 1.0, ${ep}.0 - 1.0,
                            ${tp}.0 - 1.0);
                        vec4 original = vec4(${ip}.0 - 1.0, ${rp}.0 - 1.0, ${ip}.0 - 1.0,
                            ${rp}.0 - 1.0);
                        vec4 new_scale = original / resized;
                        return vec4(coords) * new_scale;
                    }
                `;break;default:throw new Error(`resize (packed) does not support coordinateTransformMode:                                 '${fo.coordinateTransformMode}'`)}const up=(0,an.getCoordsDataType)(_d),pp=`
            const vec2 inputWH = vec2(${rp}.0, ${ip}.0);
            const vec4 scaleWHWH = vec4(float(${op}), float(${ap}), float(${op}), float(${ap}));
            ${(0,sn.unpackFromChannel)()}
            ${sp}
            float getAValue(int x10, int r, int c, int d) {
                return getChannel(getA(x10, r, c, d), vec2(c, d));
            }
            void main() {
                ${up} rc = getOutputCoords();

                int batch = rc[0];
                int depth = rc[1];

                // retrieve the 4 coordinates that is used in the 4 packed output values.
                ivec4 coords = ivec4(rc.wz, rc.w + 1, rc.z + 1);

                // calculate the source index in fraction
                vec4 sourceFrac = getSourceFracIndex(coords);

                // get the lower and upper bound of the 4 values that will be packed into one texel.
                ivec4 x00 = ivec4(max(sourceFrac.xy, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.xy)));
                ivec4 x01 = ivec4(max(sourceFrac.xw, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.xw)));
                ivec4 x10 = ivec4(max(sourceFrac.zy, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.zy)));
                ivec4 x11 = ivec4(max(sourceFrac.zw, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.zw)));

                bool hasNextRow = rc.w < ${tp-1};
                bool hasNextCol = rc.z < ${ep-1};

                // pack x00, x01, x10, x11's top-left corner into one vec4 structure
                vec4 topLeft = vec4(
                    getAValue(batch, depth, x00.x, x00.y),
                    hasNextCol ? getAValue(batch, depth, x01.x, x01.y) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.x, x10.y) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.x, x11.y) : 0.0);

                // pack x00, x01, x10, x11's top-right corner into one vec4 structure
                vec4 topRight = vec4(
                    getAValue(batch, depth, x00.x, x00.w),
                    hasNextCol ? getAValue(batch, depth, x01.x, x01.w) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.x, x10.w) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.x, x11.w) : 0.0);

                // pack x00, x01, x10, x11's bottom-left corner into one vec4 structure
                vec4 bottomLeft = vec4(
                    getAValue(batch, depth, x00.z, x00.y),
                    hasNextCol ? getAValue(batch, depth, x01.z, x01.y) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.z, x10.y) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.z, x11.y) : 0.0);

                // pack x00, x01, x10, x11's bottom-right corner into one vec4 structure
                vec4 bottomRight = vec4(
                    getAValue(batch, depth, x00.z, x00.w),
                    hasNextCol ? getAValue(batch, depth, x01.z, x01.w) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.z, x10.w) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.z, x11.w) : 0.0);

                // calculate the interpolation fraction on u and v direction
                vec4 frac = vec4(sourceFrac) - floor(sourceFrac);
                vec4 clampFrac = clamp(frac, vec4(0.0), vec4(1.0));

                vec4 top = mix(topLeft, topRight, clampFrac.ywyw);
                vec4 bottom = mix(bottomLeft, bottomRight, clampFrac.ywyw);
                vec4 newValue = mix(top, bottom, clampFrac.xxzz);

                ${ho.output} = vec4(newValue);
            }
        `;return Object.assign(Object.assign({},Xr),{output:{dims:Uo,type:lo[0].type,textureType:on.TextureType.packed},hasMain:!0,shaderSource:pp})},uo=(co,lo)=>{const fo=co[0].dims;let ho,mo=lo.scales;if(mo.length===0){const _d=co[lo.scalesInputIdx];if(_d&&_d.size!==0){if(co[lo.sizesInputIdx])throw new Error("Only one of scales or sizes must be provided as input.");mo=hn(_d,lo.mode,lo.isResize)}else{const tp=co[lo.sizesInputIdx];if(!tp||tp.size===0)throw new Error("Either scales or sizes MUST be provided as input.");ho=Array.from(tp.integerData),mo=fn(ho,fo,lo.mode,lo.isResize)}}else if(co[lo.sizesInputIdx])throw new Error("Only one of scales or sizes must be provided as input.");const Uo=ho||fo.map((_d,tp)=>Math.floor(_d*mo[tp]));return[mo,Uo]},hn=(co,lo,fo)=>{const ho=Array.from(co.floatData);return(0,un.scalesValidation)(ho,lo,fo),ho},fn=(co,lo,fo,ho)=>{const mo=lo.length,Uo=new Array(mo);for(let _d=0,tp=mo;_d<tp;_d++)if(lo[_d]===0){if(co[_d]!==0)throw new Error("Input dim is zero but required output dim is non-zero.");Uo[_d]=1}else Uo[_d]=co[_d]/lo[_d];return(0,un.scalesValidation)(Uo,fo,ho),Uo}},8117:(Mt,st,nn)=>{Object.defineProperty(st,"__esModule",{value:!0}),st.shape=void 0;const rn=nn(9162);st.shape=(an,sn)=>(on(sn),[new rn.Tensor([sn[0].dims.length],"int32",void 0,void 0,new Int32Array(sn[0].dims))]);const on=an=>{if(!an||an.length!==1)throw new Error("Shape requires 1 input.")}},2278:(Mt,st,nn)=>{Object.defineProperty(st,"__esModule",{value:!0}),st.sliceV10=st.parseSliceAttributes=st.slice=void 0;const rn=nn(246),on=nn(782),an=nn(2517),sn=nn(2039),un={name:"Slice",inputNames:["A"],inputTypes:[sn.TextureType.unpacked]};st.slice=(fn,co,lo)=>(to(co),[fn.run(Object.assign(Object.assign({},un),{cacheHint:lo.cacheKey,get:()=>Xr(fn,co[0],lo)}),co)]),st.parseSliceAttributes=fn=>{const co=fn.attributes.getInts("starts"),lo=fn.attributes.getInts("ends"),fo=fn.attributes.getInts("axes",[]);return(0,rn.createAttributeWithCacheKey)({starts:co,ends:lo,axes:fo})};const Xr=(fn,co,lo)=>{const fo=lo.axes.length===0?co.dims.slice(0).map((np,rp)=>rp):lo.axes,ho=an.ShapeUtil.normalizeAxes(fo,co.dims.length),mo=lo.starts.map((np,rp)=>np>co.dims[ho[rp]]-1?co.dims[ho[rp]]:an.ShapeUtil.normalizeAxis(np,co.dims[ho[rp]])),Uo=lo.ends.map((np,rp)=>np>co.dims[ho[rp]]-1?co.dims[ho[rp]]:an.ShapeUtil.normalizeAxis(np,co.dims[ho[rp]])),_d=co.dims.slice(),tp=[];for(let np=0;np<ho.length;np++)_d[ho[np]]=Uo[np]-mo[np],mo[np]>0&&tp.push(`outputIdx[${ho[np]}] += ${mo[np]};`);const ep=`
      float process(int outputIdx[${_d.length}]) {
        ${tp.join(`
      `)}
        return _A(outputIdx);
      }`;return Object.assign(Object.assign({},un),{output:{dims:_d,type:co.type,textureType:sn.TextureType.unpacked},shaderSource:ep})},to=fn=>{if(!fn||fn.length!==1)throw new Error("Slice requires 1 input.");if(on.NUMBER_TYPES.indexOf(fn[0].type)===-1)throw new Error("Invalid input type.")};st.sliceV10=(fn,co)=>{hn(co);const lo=uo(fn,co);return[fn.run(Object.assign(Object.assign({},un),{cacheHint:lo.cacheKey,get:()=>Xr(fn,co[0],lo)}),[co[0]])]};const uo=(fn,co)=>{if(!fn.session.isInitializer(co[1].dataId)||!fn.session.isInitializer(co[2].dataId)||co.length>=4&&!fn.session.isInitializer(co[3].dataId)||co.length>=5&&!fn.session.isInitializer(co[4].dataId))throw new Error("dynamic slice attributes are not allowed");if(co.length>=5&&co[4].integerData.some(mo=>mo!==1))throw new Error("currently non-1 steps is not supported for Slice");const lo=Array.from(co[1].integerData),fo=Array.from(co[2].integerData),ho=co.length>=4?Array.from(co[3].integerData):[];return{starts:lo,ends:fo,axes:ho,cacheKey:`${ho};${lo};${fo}`}},hn=fn=>{if(!fn||fn.length<3||fn.length>5)throw new Error("Invalid input number.");if(fn[1].type!=="int32"||fn[1].dims.length!==1)throw new Error("Invalid input type.");if(fn[2].type!=="int32"||fn[2].dims.length!==1)throw new Error("Invalid input type.");if(fn.length>=4&&(fn[3].type!=="int32"||fn[3].dims.length!==1))throw new Error("Invalid input type.");if(fn.length>=5&&(fn[4].type!=="int32"||fn[4].dims.length!==1))throw new Error("Invalid input type.")}},5524:(Mt,st,nn)=>{Object.defineProperty(st,"__esModule",{value:!0}),st.softmaxV13=st.parseSoftmaxAttributesV13=st.parseSoftmaxAttributes=st.softmax=void 0;const rn=nn(246),on=nn(2517),an=nn(5060),sn=nn(2039),un=nn(3738),Xr={name:"SoftmaxComputeMax",inputNames:["A"],inputTypes:[sn.TextureType.unpacked]},to={name:"SoftmaxComputeScale",inputNames:["A","Max"],inputTypes:[sn.TextureType.unpacked,sn.TextureType.unpacked]},uo={name:"SoftMax",inputNames:["A","Max","Norm"],inputTypes:[sn.TextureType.unpacked,sn.TextureType.unpacked,sn.TextureType.unpacked]};st.softmax=(ho,mo,Uo)=>{fo(mo);const _d=mo[0].dims.slice(),tp=on.ShapeUtil.normalizeAxis(Uo.axis,_d.length),ep=on.ShapeUtil.sizeToDimension(_d,tp),np=on.ShapeUtil.sizeFromDimension(_d,tp);return hn(ho,mo,Uo,ep,np)},st.parseSoftmaxAttributes=ho=>(0,rn.createAttributeWithCacheKey)({axis:ho.attributes.getInt("axis",1)}),st.parseSoftmaxAttributesV13=ho=>(0,rn.createAttributeWithCacheKey)({axis:ho.attributes.getInt("axis",-1)}),st.softmaxV13=(ho,mo,Uo)=>{fo(mo);const _d=mo[0].dims.slice(),tp=on.ShapeUtil.normalizeAxis(Uo.axis,_d.length),ep=_d.length,np=tp!==ep-1,rp=[];let ip,op=[],ap=[];np&&(op=Array.from({length:ep}).map((lp,dp)=>dp),op[tp]=ep-1,op[ep-1]=tp,op.map(lp=>rp.push(_d[lp])),ip=(0,rn.createAttributeWithCacheKey)({perm:op}),ap=(0,un.transpose)(ho,mo,ip));const sp=np?on.ShapeUtil.sizeToDimension(rp,ep-1):on.ShapeUtil.sizeToDimension(_d,ep-1),up=np?on.ShapeUtil.sizeFromDimension(rp,ep-1):on.ShapeUtil.sizeFromDimension(_d,ep-1),pp=hn(ho,np?ap:mo,Uo,sp,up);return np?(0,un.transpose)(ho,pp,ip):pp};const hn=(ho,mo,Uo,_d,tp)=>{const ep=fn(ho,mo[0],_d,tp,[_d]),np=ho.run(Object.assign(Object.assign({},Xr),{cacheHint:Uo.cacheKey,get:()=>ep}),mo),rp=co(ho,mo[0],_d,tp,ep.output.dims,[_d]),ip=ho.run(Object.assign(Object.assign({},to),{cacheHint:Uo.cacheKey,get:()=>rp}),[mo[0],np]),op=lo(ho,mo[0],_d,tp,ep.output.dims,rp.output.dims);return[ho.run(Object.assign(Object.assign({},uo),{cacheHint:Uo.cacheKey,get:()=>op}),[mo[0],np,ip])]},fn=(ho,mo,Uo,_d,tp)=>{const[ep,np]=ho.calculateTextureWidthAndHeight(mo.dims,sn.TextureType.unpacked),rp=tp.length;if(Uo<1||_d<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(tp.length!==1)throw new Error("Dimensionality of the output should be 1");if(tp[0]!==Uo)throw new Error("Shape of the output should be equal to logical row count");const ip=(0,an.getGlsl)(ho.session.backend.glContext.version),op=`
      float process(int[${rp}] indices) {
        int logical_row_start_offset = indices[0] * ${_d};

        float max = getColorAsFloat(${ip.texture2D}(A, offsetToCoords(logical_row_start_offset, ${ep},
        ${np} )));
        for(int i=1; i<${_d}; ++i)
        {
          float current = getColorAsFloat(${ip.texture2D}(A, offsetToCoords(logical_row_start_offset + i,
            ${ep}, ${np})));
          if(current > max)
          max = current;
        }

        return max;
      }`;return Object.assign(Object.assign({},Xr),{output:{dims:tp,type:mo.type,textureType:sn.TextureType.unpacked},shaderSource:op})},co=(ho,mo,Uo,_d,tp,ep)=>{const[np,rp]=ho.calculateTextureWidthAndHeight(mo.dims,sn.TextureType.unpacked),ip=ep.length;if(Uo<1||_d<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(ep.length!==1)throw new Error("Dimensionality of the output should be 1");if(ep[0]!==Uo)throw new Error("Shape of the output should be equal to logical row count");if(tp.length!==1)throw new Error("Dimensionality of the intermediate results should be 1");if(tp[0]!==Uo)throw new Error("Shape of the intermediate results should be equal to logical row count");const op=`
      float process(int[${ip}] indices) {
        int logical_row_start_offset = indices[0] * ${_d};

        float norm_factor = 0.0;
        float max = _Max(indices);
        for(int i=0; i<${_d}; ++i)
        {
          norm_factor += exp(getColorAsFloat(${(0,an.getGlsl)(ho.session.backend.glContext.version).texture2D}(A, offsetToCoords(logical_row_start_offset + i,
            ${np}, ${rp}))) - max);
        }

        return norm_factor;
      }`;return Object.assign(Object.assign({},to),{output:{dims:ep,type:mo.type,textureType:sn.TextureType.unpacked},shaderSource:op})},lo=(ho,mo,Uo,_d,tp,ep)=>{const[np,rp]=ho.calculateTextureWidthAndHeight(mo.dims,sn.TextureType.unpacked),ip=mo.dims.length;if(Uo<1||_d<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(tp.length!==1||ep.length!==1)throw new Error("Dimensionality of the intermediate results should be 1");if(tp[0]!==Uo||ep[0]!==Uo)throw new Error("Shape of the intermediate results should be equal to logical row count");const op=`
      float process(int[${ip}] indices) {

      // get offset of current logical tensor index from the 2-D texture coordinates (TexCoords)
      int offset = coordsToOffset(TexCoords, ${np}, ${rp});

      //determine the logical row for this index
      int logical_row_index[1];
      logical_row_index[0] = offset / ${_d};

      float norm_factor = _Norm(logical_row_index);

      // avoid possible division by 0
      // if norm_facor is 0, all elements are zero
      // if so, return 0
      if(norm_factor == 0.0)
        return 0.0;

      return exp(_A(indices) - _Max(logical_row_index)) / norm_factor;
    }`;return Object.assign(Object.assign({},uo),{output:{dims:mo.dims,type:mo.type,textureType:sn.TextureType.unpacked},shaderSource:op})},fo=ho=>{if(!ho||ho.length!==1)throw new Error("Softmax requires 1 input.");if(ho[0].type!=="float32"&&ho[0].type!=="float64")throw new Error("Invalid input type")}},5975:(Mt,st,nn)=>{Object.defineProperty(st,"__esModule",{value:!0}),st.parseSplitAttributes=st.split=void 0;const rn=nn(246),on=nn(2517),an=nn(2039),sn={name:"Split",inputNames:["A"],inputTypes:[an.TextureType.unpacked]};st.split=(uo,hn,fn)=>{to(hn);const co=on.ShapeUtil.normalizeAxis(fn.axis,hn[0].dims.length),lo=un(uo,hn,co,fn),fo=[];for(let ho=0;ho<lo;++ho)fo.push(uo.run(Object.assign(Object.assign({},sn),{cacheHint:`${fn.cacheKey};${ho}`,get:()=>Xr(uo,hn[0],fn,co,ho)}),hn));return fo},st.parseSplitAttributes=uo=>{const hn=uo.attributes.getInt("axis",0),fn=uo.attributes.getInts("split",[]),co=uo.outputs.length;return(0,rn.createAttributeWithCacheKey)({axis:hn,split:fn,numOutputs:co})};const un=(uo,hn,fn,co)=>{const[,lo]=on.SplitUtil.splitShape(hn[0].dims,fn,co.split,co.numOutputs);return lo.length},Xr=(uo,hn,fn,co,lo)=>{const[fo,ho]=on.SplitUtil.splitShape(hn.dims,co,fn.split,fn.numOutputs),mo=ho[lo],Uo=fo[lo],_d=`
      float process(int indices[${Uo.length}]) {
        indices[${co}] += ${mo};
        return _A(indices);
      }
    `;return Object.assign(Object.assign({},sn),{cacheHint:`${fn.cacheKey}:${lo}`,output:{dims:Uo,type:hn.type,textureType:an.TextureType.unpacked},shaderSource:_d})},to=uo=>{if(!uo||uo.length!==1)throw new Error("Split requires one input.");if(uo[0].type!=="int8"&&uo[0].type!=="uint8"&&uo[0].type!=="int16"&&uo[0].type!=="uint16"&&uo[0].type!=="int32"&&uo[0].type!=="uint32"&&uo[0].type!=="float32"&&uo[0].type!=="float64"&&uo[0].type!=="bool")throw new Error("Invalid input type.")}},3933:(Mt,st,nn)=>{Object.defineProperty(st,"__esModule",{value:!0}),st.parseSqueezeAttributes=st.squeezeV13=st.squeeze=void 0;const rn=nn(2517);st.squeeze=(sn,un,Xr)=>{on(un);const to=rn.ShapeUtil.squeezeShape(un[0].dims,Xr);return[sn.reshapeUnpacked(un[0],to)]},st.squeezeV13=(sn,un)=>(an(un),(0,st.squeeze)(sn,[un[0]],Array.from(un[1].integerData))),st.parseSqueezeAttributes=sn=>sn.attributes.getInts("axes");const on=sn=>{if(!sn||sn.length!==1)throw new Error("Squeeze requires 1 input.");if(sn[0].type==="string")throw new Error("invalid input tensor types.")},an=sn=>{if(!sn||sn.length!==2)throw new Error("Squeeze requires 2 inputs.");if(sn[1].type!=="int32")throw new Error("Invalid input type.")}},6558:(Mt,st,nn)=>{Object.defineProperty(st,"__esModule",{value:!0}),st.sum=void 0;const rn=nn(5060),on=nn(2039);st.sum=(un,Xr)=>{sn(Xr);const to={name:"Sum",inputNames:Xr.map((uo,hn)=>`X${hn}`),inputTypes:new Array(Xr.length).fill(on.TextureType.unpacked)};return[un.run(Object.assign(Object.assign({},to),{get:()=>an(un,Xr,to)}),Xr)]};const an=(un,Xr,to)=>{const uo=(0,rn.getGlsl)(un.session.backend.glContext.version),hn=Xr[0].dims.slice(),fn=`
      void main() {
        vec4 result = ${Xr.map((co,lo)=>`${uo.texture2D}(X${lo},TexCoords)`).join(" + ")};
        ${uo.output} = result;
      }
    `;return Object.assign(Object.assign({},to),{output:{dims:hn,type:Xr[0].type,textureType:on.TextureType.unpacked},hasMain:!0,shaderSource:fn})},sn=un=>{if(!un||un.length===0)throw new Error("Sum requires inputs.");const Xr=un[0].dims.length;for(let to=1;to<un.length;to++){if(Xr!==un[to].dims.length)throw new Error("Input shapes are mismatched.");for(let uo=0;uo<Xr;uo++)if(un[0].dims[uo]!==un[to].dims[uo])throw new Error("Input shapes are not matched.")}if(un[0].type!=="float32"&&un[0].type!=="float64")throw new Error("Invalid input type.");for(let to=1;to<un.length;to++)if(un[0].type!==un[to].type)throw new Error("Input types are not matched.")}},5723:(Mt,st,nn)=>{Object.defineProperty(st,"__esModule",{value:!0}),st.tile=void 0;const rn=nn(782),on=nn(2039);st.tile=(un,Xr)=>{sn(Xr);const to={name:"Tile",inputNames:["A"],inputTypes:[on.TextureType.unpacked]};return[un.run(Object.assign(Object.assign({},to),{get:()=>an(un,Xr,to)}),Xr)]};const an=(un,Xr,to)=>{const uo=Xr[0].dims.slice(),hn=new Array(uo.length),fn=[];for(let fo=0;fo<uo.length;fo++)hn[fo]=uo[fo]*Xr[1].numberData[fo],fn.push(`inputIdx[${fo}] = int(mod(float(outputIdx[${fo}]), ${uo[fo]}.));`);const co=hn.length,lo=`
      float process(int outputIdx[${co}]) {
        int inputIdx[${co}];
        ${fn.join(`
`)}
        return _A(inputIdx);
      }
    `;return Object.assign(Object.assign({},to),{output:{dims:hn,type:Xr[0].type,textureType:on.TextureType.unpacked},shaderSource:lo})},sn=un=>{if(!un||un.length!==2)throw new Error("Tile requires 2 input.");if(un[1].dims.length!==1)throw new Error("The second input shape must 1 dimension.");if(un[1].dims[0]!==un[0].dims.length)throw new Error("Invalid input shape.");if(rn.NUMBER_TYPES.indexOf(un[0].type)===-1)throw new Error("Invalid input type.");if(un[1].type!=="int32"&&un[1].type!=="int16")throw new Error("Invalid repeat type.")}},3738:(Mt,st,nn)=>{Object.defineProperty(st,"__esModule",{value:!0}),st.parseTransposeAttributes=st.transpose=void 0;const rn=nn(246),on=nn(2517),an=nn(2039),sn={name:"Transpose",inputNames:["A"],inputTypes:[an.TextureType.unpacked]};st.transpose=(fn,co,lo)=>(hn(co),[fn.run(Object.assign(Object.assign({},sn),{cacheHint:lo.cacheKey,get:()=>un(fn,co[0],lo.perm)}),co)]),st.parseTransposeAttributes=fn=>(0,rn.createAttributeWithCacheKey)({perm:fn.attributes.getInts("perm",[])});const un=(fn,co,lo)=>{const fo=co.dims;lo=Xr(fo,lo);const ho=to(fo,lo),mo=fo.length,Uo=`
      ${uo("perm",lo,mo)}
      float process(int indices[${mo}]) {
        int a[${mo}];
        perm(a, indices);
        return _A(a);
      }`;return Object.assign(Object.assign({},sn),{output:{dims:ho,type:co.type,textureType:an.TextureType.unpacked},shaderSource:Uo})},Xr=(fn,co)=>(co&&co.length!==fn.length&&(co=[...fn.keys()].reverse()),co),to=(fn,co)=>(co=Xr(fn,co),on.ShapeUtil.sortBasedOnPerm(fn,co)),uo=(fn,co,lo)=>{const fo=[];fo.push(`void ${fn}(out int a[${lo}], int src[${lo}]) {`);for(let ho=0;ho<lo;++ho)fo.push(`	a[${co[ho]}]=src[${ho}];`);return fo.push("	}"),fo.join(`
`)},hn=fn=>{if(!fn||fn.length!==1)throw new Error("Transpose requires 1 input.");if(fn[0].type!=="float32"&&fn[0].type!=="float64")throw new Error("input should be float tensor")}},8710:(Mt,st,nn)=>{Object.defineProperty(st,"__esModule",{value:!0}),st.encodeAsUint8=void 0;const rn=nn(5060),on=nn(2039);st.encodeAsUint8=(an,sn)=>{const un=sn.shape,Xr=(0,rn.getGlsl)(an.session.backend.glContext.version),to=`
    const float FLOAT_MAX = 1.70141184e38;
    const float FLOAT_MIN = 1.17549435e-38;

    bool isNaN(float val) {
      return (val < 1.0 || 0.0 < val || val == 0.0) ? false : true;
    }

    highp vec4 encodeAsUint8(highp float v) {
      if (isNaN(v)) {
        return vec4(255, 255, 255, 255);
      }

      highp float av = abs(v);

      if(av < FLOAT_MIN) {
        return vec4(0.0, 0.0, 0.0, 0.0);
      } else if(v > FLOAT_MAX) {
        return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
      } else if(v < -FLOAT_MAX) {
        return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
      }

      highp vec4 c = vec4(0,0,0,0);

      highp float e = floor(log2(av));
      highp float m = exp2(fract(log2(av))) - 1.0;

      c[2] = floor(128.0 * m);
      m -= c[2] / 128.0;
      c[1] = floor(32768.0 * m);
      m -= c[1] / 32768.0;
      c[0] = floor(8388608.0 * m);

      highp float ebias = e + 127.0;
      c[3] = floor(ebias / 2.0);
      ebias -= c[3] * 2.0;
      c[2] += floor(ebias) * 128.0;

      c[3] += 128.0 * step(0.0, -v);

      return c / 255.0;
    }

    void main() {
      float value = ${Xr.texture2D}(X,TexCoords).r;
      ${Xr.output} = encodeAsUint8(value);
    }`,uo={name:"Uint8Encode",inputTypes:[on.TextureType.unpacked],inputNames:["X"],output:{dims:un,type:sn.tensor.type,textureType:on.TextureType.downloadUint8AsFloat},shaderSource:to,hasMain:!0};return an.executeProgram(uo,[sn.tensor])}},4909:(Mt,st,nn)=>{Object.defineProperty(st,"__esModule",{value:!0}),st.tanh=st.tan=st.sqrt=st.sin=st.sigmoid=st.relu=st.not=st.neg=st.log=st.parseLeakyReluAttributes=st.leakyRelu=st.identity=st.floor=st.exp=st.parseEluAttributes=st.elu=st.cos=st.ceil=st.clipV11=st.parseClipAttributes=st.clip=st.atan=st.asin=st.acos=st.abs=st.glslTanh=st.glslTan=st.glslSqrt=st.glslSigmoid=st.glslRelu=st.glslSin=st.glslNot=st.glslNeg=st.glslLog=st.glslLeakyRelu=st.glslIdentity=st.glslClip=st.glslFloor=st.glslExp=st.glslElu=st.glslCos=st.glslCeil=st.glslAtan=st.glslAsin=st.glslAcos=st.glslAbs=void 0;const rn=nn(246),on=nn(2517),an=nn(8520),sn=nn(5060),un=nn(2039);function Xr(){return pp("abs")}function to(){return pp("acos")}function uo(){return pp("asin")}function hn(){return pp("atan")}function fn(){return pp("ceil")}function co(){return pp("cos")}function lo(cp){const fp="elu";return{body:`
  const float alpha = float(${cp});

  float ${fp}_(float a) {
    return a >= 0.0 ? a: (exp(a) - 1.0) * alpha;
  }
  vec4 ${fp}_(vec4 v) {
    return vec4(${fp}_(v.x), ${fp}_(v.y), ${fp}_(v.z), ${fp}_(v.w));
  }
  `,name:fp,type:an.FunctionType.ValueBased}}function fo(){return pp("exp")}function ho(){return pp("floor")}function mo(cp,fp){const gp="clip";return{body:`
  const float min = float(${cp});
  const float max = float(${fp});

  float ${gp}_(float a) {
    return clamp(a, min, max);
  }
  vec4 ${gp}_(vec4 v) {
    return clamp(v, min, max);
  }
  `,name:gp,type:an.FunctionType.ValueBased}}function Uo(){const cp="indentity";return{body:`
  float ${cp}_(float a) {
    return a;
  }
  vec4 ${cp}_(vec4 v) {
    return v;
  }
  `,name:cp,type:an.FunctionType.ValueBased}}function _d(cp){const fp="leakyRelu";return{body:`
  const float alpha = float(${cp});

  float ${fp}_(float a) {
    return a < 0.0 ? a * alpha : a;
  }
  vec4 ${fp}_(vec4 v) {
    return vec4(${fp}_(v.x), ${fp}_(v.y), ${fp}_(v.z), ${fp}_(v.w));
  }
  `,name:fp,type:an.FunctionType.ValueBased}}function tp(){return pp("log")}function ep(){const cp="neg";return{body:`
  float ${cp}_(float a) {
    return -a;
  }
  vec4 ${cp}_(vec4 v) {
    return -v;
  }
  `,name:cp,type:an.FunctionType.ValueBased}}function np(){const cp="not";return{body:`
  float ${cp}_(float a) {
    return float( ! bool(a) );
  }
  bool ${cp}_(bool a) {
    return !a;
  }
  vec4 ${cp}_(vec4 v) {
    return vec4(!bool(v.x), !bool(v.y), !bool(v.z), !bool(v.w));
  }
  bvec4 ${cp}_(bvec4 v) {
    return bvec4(!v.x, !v.y, !v.z, !v.w);
  }
  `,name:cp,type:an.FunctionType.ValueBased}}function rp(){return pp("sin")}function ip(){const cp="relu";return{body:`
  float ${cp}_(float a) {
    return max( a, 0.0 );
  }
  vec4 ${cp}_(vec4 v) {
    return max( v, 0.0 );
  }
  `,name:cp,type:an.FunctionType.ValueBased}}function op(){const cp="sigmoid";return{body:`
  float ${cp}_(float a) {
    return 1.0 / (1.0 + exp(-a));
  }
  vec4 ${cp}_(vec4 v) {
    return 1.0 / (1.0 + exp(-v));
  }
  `,name:cp,type:an.FunctionType.ValueBased}}function ap(){return pp("sqrt")}function sp(){return pp("tan")}function up(){const cp="tanh";return{body:`
  float ${cp}_(float a) {
    a = clamp(a, -10., 10.);
    a = exp(2.*a);
    return (a - 1.) / (a + 1.);
  }
  vec4 ${cp}_(vec4 v) {
    v = clamp(v, -10., 10.);
    v = exp(2.*v);
    return (v - 1.) / (v + 1.);
  }
  `,name:cp,type:an.FunctionType.ValueBased}}function pp(cp){return{body:`
  float ${cp}_(float a) {
    return ${cp}(a);
  }
  vec4 ${cp}_(vec4 v) {
    return ${cp}(v);
  }
  `,name:cp,type:an.FunctionType.ValueBased}}st.glslAbs=Xr,st.glslAcos=to,st.glslAsin=uo,st.glslAtan=hn,st.glslCeil=fn,st.glslCos=co,st.glslElu=lo,st.glslExp=fo,st.glslFloor=ho,st.glslClip=mo,st.glslIdentity=Uo,st.glslLeakyRelu=_d,st.glslLog=tp,st.glslNeg=ep,st.glslNot=np,st.glslSin=rp,st.glslRelu=ip,st.glslSigmoid=op,st.glslSqrt=ap,st.glslTan=sp,st.glslTanh=up;const lp=(cp,fp,gp,mp)=>{const xp=cp.session.pack?un.TextureType.packed:un.TextureType.unpacked,_p={name:gp.name,inputTypes:[xp],inputNames:["A"],cacheHint:mp};return Object.assign(Object.assign({},_p),{get:()=>((Sp,Cp,jp,Dp)=>{const Vp=Sp.session.pack?un.TextureType.packed:un.TextureType.unpacked,Up=(0,sn.getGlsl)(Sp.session.backend.glContext.version);return Object.assign(Object.assign({},Cp),{output:{dims:jp.dims,type:jp.type,textureType:Vp},shaderSource:`
     ${Dp.body}
     void main() {
       vec4 v = ${Up.texture2D}(A, TexCoords);
       v = ${Dp.name}_(v);
       ${Up.output} = v;
     }
     `,hasMain:!0})})(cp,_p,fp,gp)})};st.abs=(cp,fp)=>[cp.run(lp(cp,fp[0],Xr()),fp)],st.acos=(cp,fp)=>[cp.run(lp(cp,fp[0],to()),fp)],st.asin=(cp,fp)=>[cp.run(lp(cp,fp[0],uo()),fp)],st.atan=(cp,fp)=>[cp.run(lp(cp,fp[0],hn()),fp)],st.clip=(cp,fp,gp)=>[cp.run(lp(cp,fp[0],mo(gp.min,gp.max),gp.cacheKey),fp)],st.parseClipAttributes=cp=>(0,rn.createAttributeWithCacheKey)({min:cp.attributes.getFloat("min",on.MIN_CLIP),max:cp.attributes.getFloat("max",on.MAX_CLIP)}),st.clipV11=(cp,fp)=>{const gp=dp(cp,fp);return(0,st.clip)(cp,[fp[0]],gp)};const dp=(cp,fp)=>{if(fp.length>=3&&(!cp.session.isInitializer(fp[1].dataId)||!cp.session.isInitializer(fp[2].dataId)))throw new Error("dynamic clip attributes are not allowed");const gp=fp.length>=3?fp[1].numberData[0]:on.MIN_CLIP,mp=fp.length>=3?fp[2].numberData[0]:on.MAX_CLIP;return(0,rn.createAttributeWithCacheKey)({min:gp,max:mp})};st.ceil=(cp,fp)=>[cp.run(lp(cp,fp[0],fn()),fp)],st.cos=(cp,fp)=>[cp.run(lp(cp,fp[0],co()),fp)],st.elu=(cp,fp,gp)=>[cp.run(lp(cp,fp[0],lo(gp.alpha),gp.cacheKey),fp)],st.parseEluAttributes=cp=>(0,rn.createAttributeWithCacheKey)({alpha:cp.attributes.getFloat("alpha",1)}),st.exp=(cp,fp)=>[cp.run(lp(cp,fp[0],fo()),fp)],st.floor=(cp,fp)=>[cp.run(lp(cp,fp[0],ho()),fp)],st.identity=(cp,fp)=>[cp.run(lp(cp,fp[0],Uo()),fp)],st.leakyRelu=(cp,fp,gp)=>[cp.run(lp(cp,fp[0],_d(gp.alpha),gp.cacheKey),fp)],st.parseLeakyReluAttributes=cp=>(0,rn.createAttributeWithCacheKey)({alpha:cp.attributes.getFloat("alpha",.01)}),st.log=(cp,fp)=>[cp.run(lp(cp,fp[0],tp()),fp)],st.neg=(cp,fp)=>[cp.run(lp(cp,fp[0],ep()),fp)],st.not=(cp,fp)=>[cp.run(lp(cp,fp[0],np()),fp)],st.relu=(cp,fp)=>[cp.run(lp(cp,fp[0],ip()),fp)],st.sigmoid=(cp,fp)=>[cp.run(lp(cp,fp[0],op()),fp)],st.sin=(cp,fp)=>[cp.run(lp(cp,fp[0],rp()),fp)],st.sqrt=(cp,fp)=>[cp.run(lp(cp,fp[0],ap()),fp)],st.tan=(cp,fp)=>[cp.run(lp(cp,fp[0],sp()),fp)],st.tanh=(cp,fp)=>[cp.run(lp(cp,fp[0],up()),fp)]},5611:(Mt,st,nn)=>{Object.defineProperty(st,"__esModule",{value:!0}),st.createUnpackProgramInfoLoader=st.createUnpackProgramInfo=void 0;const rn=nn(5060),on=nn(2039),an=nn(9390),sn=nn(2827),un={name:"unpack",inputNames:["A"],inputTypes:[on.TextureType.packed]};st.createUnpackProgramInfo=(Xr,to)=>{const uo=to.dims.length,hn=(0,sn.getChannels)("rc",uo),fn=hn.slice(-2),co=(0,an.getCoordsDataType)(uo),lo=(0,sn.unpackFromChannel)(),fo=to.dims.length===0?"":function(Uo,_d){if(Uo===1)return"rc";let tp="";for(let ep=0;ep<Uo;ep++)tp+=_d[ep],ep<Uo-1&&(tp+=",");return tp}(uo,hn),ho=uo<=1?"rc":`vec2(${fn.join(",")})`,mo=`
    ${lo}
    void main() {
      ${co} rc = getOutputCoords();

       // Sample the texture with the coords to get the rgba channel value.
       vec4 packedInput = getA(${fo});

       ${(0,rn.getGlsl)(Xr.session.backend.glContext.version).output} = vec4(getChannel(packedInput, ${ho}), 0, 0, 0);
     }
   `;return Object.assign(Object.assign({},un),{hasMain:!0,output:{dims:to.dims,type:to.type,textureType:on.TextureType.unpacked},shaderSource:mo})},st.createUnpackProgramInfoLoader=(Xr,to)=>Object.assign(Object.assign({},un),{get:()=>(0,st.createUnpackProgramInfo)(Xr,to)})},8428:(Mt,st,nn)=>{Object.defineProperty(st,"__esModule",{value:!0}),st.parseUnsqueezeAttributes=st.unsqueezeV13=st.unsqueeze=void 0;const rn=nn(2517);st.unsqueeze=(sn,un,Xr)=>{on(un);const to=rn.ShapeUtil.unsqueezeShape(un[0].dims,Xr);return[sn.reshapeUnpacked(un[0],to)]},st.unsqueezeV13=(sn,un)=>(an(un),(0,st.unsqueeze)(sn,[un[0]],Array.from(un[1].integerData))),st.parseUnsqueezeAttributes=sn=>sn.attributes.getInts("axes");const on=sn=>{if(!sn||sn.length!==1)throw new Error("Unsqueeze requires 1 input.");if(sn[0].type==="string")throw new Error("invalid input tensor types.")},an=sn=>{if(!sn||sn.length!==2)throw new Error("Unsqueeze requires 2 inputs.");if(sn[1].type!=="int32")throw new Error("Invalid input type.")}},9793:(Mt,st,nn)=>{Object.defineProperty(st,"__esModule",{value:!0}),st.scalesValidation=st.validateInputs=st.parseUpsampleAttributes=st.parseUpsampleAttributesV9=st.parseUpsampleAttributesV7=st.upsample=void 0;const rn=nn(246),on=nn(5060),an=nn(2039),sn={name:"Upsample",inputNames:["X"],inputTypes:[an.TextureType.unpacked]};st.upsample=(Xr,to,uo)=>((0,st.validateInputs)(to,uo),[Xr.run(Object.assign(Object.assign({},sn),{cacheHint:uo.cacheKey,get:()=>un(Xr,to,uo)}),to)]),st.parseUpsampleAttributesV7=Xr=>(0,st.parseUpsampleAttributes)(Xr,7),st.parseUpsampleAttributesV9=Xr=>(0,st.parseUpsampleAttributes)(Xr,9),st.parseUpsampleAttributes=(Xr,to)=>{const uo=to>=10,hn=Xr.attributes.getString("mode","nearest");if(hn!=="nearest"&&hn!=="linear"&&(to<11||hn!=="cubic"))throw new Error(`unrecognized mode: ${hn}`);let fn=[];to<9&&(fn=Xr.attributes.getFloats("scales"),(0,st.scalesValidation)(fn,hn,uo));const co=Xr.attributes.getFloat("extrapolation_value",0),lo=to>10?Xr.attributes.getString("coordinate_transformation_mode","half_pixel"):"asymmetric";if(["asymmetric","pytorch_half_pixel","tf_half_pixel_for_nn","align_corners","tf_crop_and_resize","half_pixel"].indexOf(lo)===-1)throw new Error(`coordinate_transform_mode '${lo}' is not supported`);const fo=lo==="tf_crop_and_resize",ho=fo,mo=hn==="nearest"&&to>=11?Xr.attributes.getString("nearest_mode","round_prefer_floor"):"";if(["round_prefer_floor","round_prefer_ceil","floor","ceil",""].indexOf(mo)===-1)throw new Error(`nearest_mode '${mo}' is not supported`);const Uo=Xr.attributes.getFloat("cubic_coeff_a",-.75),_d=Xr.attributes.getInt("exclude_outside",0)!==0;if(_d&&hn!=="cubic")throw new Error("exclude_outside can be set to 1 only when mode is CUBIC.");const tp=to<11||hn==="nearest"&&lo==="asymmetric"&&mo==="floor";let ep=0,np=0,rp=0;return to>10?Xr.inputs.length>2?(ep=1,np=2,rp=3):(np=1,rp=2):to===9&&(np=1),(0,rn.createAttributeWithCacheKey)({opset:to,isResize:uo,mode:hn,scales:fn,extrapolationValue:co,coordinateTransformMode:lo,useExtrapolation:ho,needRoiInput:fo,nearestMode:mo,cubicCoefficientA:Uo,excludeOutside:_d,useNearest2xOptimization:tp,roiInputIdx:ep,scalesInputIdx:np,sizesInputIdx:rp})};const un=(Xr,to,uo)=>{const hn=(0,on.getGlsl)(Xr.session.backend.glContext.version),[fn,co]=Xr.calculateTextureWidthAndHeight(to[0].dims,an.TextureType.unpacked),lo=to[0].dims.map((rp,ip)=>Math.floor(rp*uo.scales[ip])),[fo,ho]=Xr.calculateTextureWidthAndHeight(lo,an.TextureType.unpacked),mo=lo.length,Uo=new Array(mo),_d=new Array(mo);let tp=`
      int output_pitches[${mo}];
      int input_pitches[${mo}];
      `;for(let rp=mo-1;rp>=0;rp--)Uo[rp]=rp===mo-1?1:Uo[rp+1]*lo[rp+1],_d[rp]=rp===mo-1?1:_d[rp+1]*to[0].dims[rp+1],tp+=`
        output_pitches[${rp}] = ${Uo[rp]};
        input_pitches[${rp}] = ${_d[rp]};
        `;const ep=`
      float getInputFloat(int index) {
        vec2 coords = offsetToCoords(index, ${fn}, ${co});
        float value = getColorAsFloat(${hn.texture2D}(X, coords));
        return value;
      }
      `,np=uo.mode==="nearest"?`
    ${ep}
    float process(int indices[${mo}]) {
      int input_index = 0;
      int output_index = coordsToOffset(TexCoords, ${fo}, ${ho});

      ${tp}

      int d, m;
      for (int dim = 0; dim < ${mo}; ++dim) {
        d = output_index / output_pitches[dim];
        m = output_index - d * output_pitches[dim];
        output_index = m;

        if (scales[dim] != 1 && d > 0) {
          int d2 = d / scales[dim];
          m = d - d2 * scales[dim];
          d = d2;
        }
        input_index += input_pitches[dim] * d;
      }

      return getInputFloat(input_index);
    }`:mo===4?`
    ${ep}
    float process(int indices[4]) {
      int input_index = 0;
      int output_index = coordsToOffset(TexCoords, ${fo}, ${ho});

      ${tp}

      int m;
      int index_of_dim0, index_of_dim1, index_of_dim2, index_of_dim3;
      index_of_dim0 = output_index / output_pitches[0];
      m = output_index - index_of_dim0 * output_pitches[0];
      index_of_dim1 = m / output_pitches[1];
      m = m - index_of_dim1 * output_pitches[1];
      index_of_dim2 = m / output_pitches[2];
      m = m - index_of_dim2 * output_pitches[2];
      index_of_dim3 = m;

      int index_of_input_dim2, index_of_input_dim3, x_offset, y_offset;
      index_of_input_dim2 = index_of_dim2 / scales[2];
      y_offset = index_of_dim2 - index_of_input_dim2 * scales[2];
      index_of_input_dim3 = index_of_dim3 / scales[3];
      x_offset = index_of_dim3 - index_of_input_dim3 * scales[3];

      input_index = index_of_dim0 * input_pitches[0] +
            index_of_dim1 * input_pitches[1] +
            index_of_input_dim2 * input_pitches[2] +
            index_of_input_dim3;

      float x00 = getInputFloat(input_index);
      float x10, x01, x11;

      bool end_of_dim2 = false;
      if (index_of_input_dim2 == (${to[0].dims[2]} - 1)) {
        // It's the end in dimension 2
        x01 = x00;
        end_of_dim2 = true;
      } else {
        x01 = getInputFloat(input_index + input_pitches[2]);
      }

      if (index_of_input_dim3 == (input_pitches[2] - 1)) {
        // It's the end in dimension 3
        x10 = x00;
        x11 = x01;
      }
      else {
        x10 = getInputFloat(input_index + 1);
        x11 = end_of_dim2 ? x10 : getInputFloat(input_index + input_pitches[2] + 1);
      }

      float y0 = x00 + float(y_offset) * (x01 - x00) / float(scales[2]);
      float y1 = x10 + float(y_offset) * (x11 - x10) / float(scales[2]);
      return y0 + float(x_offset) * (y1 - y0) / float(scales[3]);
    }`:`
    ${ep}
    float process(int indices[2]) {
      int input_index = 0;
      int output_index = coordsToOffset(TexCoords, ${fo}, ${ho});

      ${tp}

      int m;
      int index_of_dim0, index_of_dim1;
      index_of_dim0 = output_index / output_pitches[0];
      m = output_index - index_of_dim0 * output_pitches[0];
      index_of_dim1 = m;

      int index_of_input_dim0, index_of_input_dim1, x_offset, y_offset;
      index_of_input_dim0 = index_of_dim0 / scales[0];
      y_offset = index_of_dim0 - index_of_input_dim0 * scales[0];
      index_of_input_dim1 = index_of_dim1 / scales[1];
      x_offset = index_of_dim1 - index_of_input_dim1 * scales[1];

      input_index = index_of_input_dim0 * input_pitches[0] + index_of_input_dim1;

      float x00 = getInputFloat(input_index);
      float x10, x01, x11;

      bool end_of_dim0 = false;
      if (index_of_input_dim0 == (${to[0].dims[0]} - 1)) {
        // It's the end in dimension 0
        x01 = x00;
        end_of_dim0 = true;
      } else {
        x01 = getInputFloat(input_index + input_pitches[0]);
      }

      if (index_of_input_dim1 == (input_pitches[0] - 1)) {
        // It's the end in dimension 1
        x10 = x00;
        x11 = x01;
      }
      else {
        x10 = getInputFloat(input_index + 1);
        x11 = end_of_dim0 ? x10 : getInputFloat(input_index + input_pitches[0] + 1);
      }

      float y0 = x00 + float(y_offset) * (x01 - x00) / float(scales[0]);
      float y1 = x10 + float(y_offset) * (x11 - x10) / float(scales[0]);
      return y0 + float(x_offset) * (y1 - y0) / float(scales[1]);
    }`;return Object.assign(Object.assign({},sn),{output:{dims:lo,type:to[0].type,textureType:an.TextureType.unpacked},shaderSource:np,variables:[{name:"scales",type:"int",arrayLength:uo.scales.length,data:uo.scales.map(rp=>Math.ceil(rp))}]})};st.validateInputs=(Xr,to)=>{if(!Xr||to.opset<9&&Xr.length!==1||to.opset>=9&&to.opset<11&&Xr.length!==2||to.opset>=11&&Xr.length<2)throw new Error("invalid inputs.");if(to.scales.length>0&&Xr[0].dims.length!==to.scales.length)throw new Error("Invalid input shape.");if(Xr[0].type==="string")throw new Error("Invalid input tensor types.")},st.scalesValidation=(Xr,to,uo)=>{if(uo){for(const hn of Xr)if(hn<=0)throw new Error("Scale value should be greater than 0.")}else for(const hn of Xr)if(hn<1)throw new Error("Scale value should be greater than or equal to 1.");if(!(to!=="linear"&&to!=="cubic"||Xr.length===2||Xr.length===4&&Xr[0]===1&&Xr[1]===1))throw new Error(`'Linear' mode and 'Cubic' mode only support 2-D inputs ('Bilinear', 'Bicubic')         or 4-D inputs with the corresponding outermost 2 scale values being 1         in the ${uo?"Resize":"Upsample"} opeartor.`)}},1958:(Mt,st,nn)=>{Object.defineProperty(st,"__esModule",{value:!0}),st.ProgramManager=void 0;const rn=nn(1670),on=nn(6231),an=nn(8879),sn=nn(5060);st.ProgramManager=class{constructor(un,Xr,to){this.profiler=un,this.glContext=Xr,this.textureLayoutStrategy=to,this.repo=new Map,this.attributesBound=!1}getArtifact(un){return this.repo.get(un)}setArtifact(un,Xr){this.repo.set(un,Xr)}run(un,Xr,to){var uo;this.profiler.event("op",`ProgramManager.run ${(uo=un.programInfo.name)!==null&&uo!==void 0?uo:"unknown kernel"}`,()=>{var hn;const fn=this.glContext.gl,co=un.program;fn.useProgram(co);try{this.bindOutput(to),this.attributesBound||this.bindAttributes(un.attribLocations),this.bindUniforms(un.uniformLocations,(hn=un.programInfo.variables)!==null&&hn!==void 0?hn:[],Xr)}catch(lo){throw on.Logger.error("ProgramManager",un.programInfo.shaderSource),lo}this.profiler.event("backend","GlContext.draw()",()=>{this.glContext.draw()})},this.glContext)}dispose(){this.vertexShader&&this.glContext.deleteShader(this.vertexShader),this.repo.forEach(un=>this.glContext.deleteProgram(un.program))}build(un,Xr,to){return this.profiler.event("backend","ProgramManager.build",()=>{const uo=new an.GlslPreprocessor(this.glContext,un,Xr,to),hn=uo.preprocess(),fn=this.compile(hn);return{programInfo:un,program:fn,uniformLocations:this.getUniformLocations(fn,uo.context.programInfo.inputNames,uo.context.programInfo.variables),attribLocations:this.getAttribLocations(fn)}})}compile(un){if(!this.vertexShader){on.Logger.verbose("ProrgramManager","Compiling and caching Vertex shader for the first time");const uo=(0,sn.getVertexShaderSource)(this.glContext.version);this.vertexShader=this.glContext.compileShader(uo,this.glContext.gl.VERTEX_SHADER)}rn.env.debug&&on.Logger.verbose("ProrgramManager",`FragShader:
${un}
`);const Xr=this.glContext.compileShader(un,this.glContext.gl.FRAGMENT_SHADER),to=this.glContext.createProgram(this.vertexShader,Xr);return this.glContext.deleteShader(Xr),to}bindOutput(un){const Xr=un.width,to=un.height;on.Logger.verbose("ProrgramManager",`Binding output texture to Framebuffer: w/h=${Xr}/${to}, shape=${un.shape}, type=${un.tensor.type}`),this.glContext.attachFramebuffer(un.texture,Xr,to)}bindAttributes(un){const Xr=un.position,to=un.textureCoord;this.glContext.setVertexAttributes(Xr,to),this.attributesBound=!0}bindUniforms(un,Xr,to){var uo;const hn=this.glContext.gl;let fn=0;for(const{name:co,type:lo,location:fo,arrayLength:ho}of un){const mo=(uo=Xr.find(Uo=>Uo.name===co))===null||uo===void 0?void 0:uo.data;if(lo!=="sampler2D"&&!mo)throw new Error(`variable '${co}' does not have data defined in program info`);switch(lo){case"sampler2D":this.bindTexture(to[fn],fo,fn),fn++;break;case"float":ho?hn.uniform1fv(fo,mo):hn.uniform1f(fo,mo);break;case"int":ho?hn.uniform1iv(fo,mo):hn.uniform1i(fo,mo);break;default:throw new Error(`Uniform not implemented: ${lo}`)}}}bindTexture(un,Xr,to){this.glContext.bindTextureToUniform(un.texture,to,Xr)}getAttribLocations(un){return{position:this.getAttribLocation(un,"position"),textureCoord:this.getAttribLocation(un,"textureCoord")}}getUniformLocations(un,Xr,to){const uo=[];if(Xr)for(const hn of Xr)uo.push({name:hn,type:"sampler2D",location:this.getUniformLocation(un,hn)});if(to)for(const hn of to)uo.push(Object.assign(Object.assign({},hn),{location:this.getUniformLocation(un,hn.name)}));return uo}getUniformLocation(un,Xr){const to=this.glContext.gl.getUniformLocation(un,Xr);if(to===null)throw new Error(`Uniform ${Xr} not found.`);return to}getAttribLocation(un,Xr){return this.glContext.gl.getAttribLocation(un,Xr)}}},6416:(Mt,st,nn)=>{Object.defineProperty(st,"__esModule",{value:!0}),st.WebGLSessionHandler=void 0;const rn=nn(6231),on=nn(1047),an=nn(8316),sn=nn(1640),un=nn(1958),Xr=nn(7859),to=nn(5702);st.WebGLSessionHandler=class{constructor(uo,hn){this.backend=uo,this.context=hn,this.layoutStrategy=new Xr.PreferLogicalStrategy(uo.glContext.maxTextureSize),this.programManager=new un.ProgramManager(this.context.profiler,uo.glContext,this.layoutStrategy),this.textureManager=new to.TextureManager(uo.glContext,this.layoutStrategy,this.context.profiler,{reuseTextures:uo.textureCacheMode==="full"}),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache=new Map,this.pack=uo.pack,this.pack2unpackMap=new Map,this.unpack2packMap=new Map}createInferenceHandler(){return new an.WebGLInferenceHandler(this)}onGraphInitialized(uo){const hn=uo.getValues().filter(fn=>fn.from===-1&&fn.tensor).map(fn=>fn.tensor.dataId);this.initializers=new Set(hn)}isInitializer(uo){return!!this.initializers&&this.initializers.has(uo)}addInitializer(uo){this.initializers.add(uo)}getTextureData(uo,hn){return hn?this.packedTextureDataCache.get(uo):this.unpackedTextureDataCache.get(uo)}setTextureData(uo,hn,fn=!1){rn.Logger.verbose("WebGLSessionHandler","Storing Texture data in cache"),fn?this.packedTextureDataCache.set(uo,hn):this.unpackedTextureDataCache.set(uo,hn)}dispose(){this.programManager.dispose(),this.textureManager.clearActiveTextures(),this.packedTextureDataCache.forEach(uo=>this.textureManager.releaseTexture(uo,!0)),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache.forEach(uo=>this.textureManager.releaseTexture(uo,!0)),this.unpackedTextureDataCache=new Map}resolve(uo,hn,fn){const co=(0,on.resolveOperator)(uo,hn,sn.WEBGL_OP_RESOLVE_RULES);return{impl:co.opImpl,context:co.opInit?co.opInit(uo,fn):uo}}}},7769:(Mt,st,nn)=>{Object.defineProperty(st,"__esModule",{value:!0}),st.Uint8DataEncoder=st.RGBAFloatDataEncoder=st.RedFloat32DataEncoder=void 0;const rn=nn(6231);st.RedFloat32DataEncoder=class{constructor(on,an=1){if(an===1)this.internalFormat=on.R32F,this.format=on.RED,this.textureType=on.FLOAT,this.channelSize=an;else{if(an!==4)throw new Error(`Invalid number of channels: ${an}`);this.internalFormat=on.RGBA32F,this.format=on.RGBA,this.textureType=on.FLOAT,this.channelSize=an}}encode(on,an){let sn,un;return on.constructor!==Float32Array&&(rn.Logger.warning("Encoder","data was not of type Float32; creating new Float32Array"),un=new Float32Array(on)),an*this.channelSize>on.length?(rn.Logger.warning("Encoder","Source data too small. Allocating larger array"),un=on,sn=this.allocate(an*this.channelSize),un.forEach((Xr,to)=>sn[to]=Xr)):(un=on,sn=un),sn}allocate(on){return new Float32Array(4*on)}decode(on,an){return this.channelSize===1?on.filter((sn,un)=>un%4==0).subarray(0,an):on.subarray(0,an)}},st.RGBAFloatDataEncoder=class{constructor(on,an=1,sn){if(an!==1&&an!==4)throw new Error(`Invalid number of channels: ${an}`);this.internalFormat=on.RGBA,this.format=on.RGBA,this.channelSize=an,this.textureType=sn||on.FLOAT}encode(on,an){let sn=on;return this.channelSize===1&&(rn.Logger.verbose("Encoder","Exploding into a larger array"),sn=this.allocate(an),on.forEach((un,Xr)=>sn[4*Xr]=un)),sn}allocate(on){return new Float32Array(4*on)}decode(on,an){return this.channelSize===1?on.filter((sn,un)=>un%4==0).subarray(0,an):on.subarray(0,an)}},st.Uint8DataEncoder=class{constructor(on,an=1){if(this.channelSize=4,an===1)this.internalFormat=on.ALPHA,this.format=on.ALPHA,this.textureType=on.UNSIGNED_BYTE,this.channelSize=an;else{if(an!==4)throw new Error(`Invalid number of channels: ${an}`);this.internalFormat=on.RGBA,this.format=on.RGBA,this.textureType=on.UNSIGNED_BYTE,this.channelSize=an}}encode(on,an){return new Uint8Array(on.buffer,on.byteOffset,on.byteLength)}allocate(on){return new Uint8Array(on*this.channelSize)}decode(on,an){if(on instanceof Uint8Array)return on.subarray(0,an);throw new Error(`Invalid array type: ${on.constructor}`)}}},7859:(Mt,st,nn)=>{Object.defineProperty(st,"__esModule",{value:!0}),st.getBatchDim=st.sizeToSquarishShape=st.getRowsCols=st.sizeFromShape=st.isInt=st.parseAxisParam=st.squeezeShape=st.PreferLogicalStrategy=st.AlwaysKeepOriginalSizeStrategy=void 0;const rn=nn(6231),on=nn(2517);function an(uo,hn){const fn=[],co=[],lo=hn!=null&&Array.isArray(hn)&&hn.length===0,fo=hn==null||lo?null:sn(hn,uo).sort();let ho=0;for(let mo=0;mo<uo.length;++mo){if(fo!=null){if(fo[ho]===mo&&uo[mo]!==1)throw new Error(`Can't squeeze axis ${mo} since its dim '${uo[mo]}' is not 1`);(fo[ho]==null||fo[ho]>mo)&&uo[mo]===1&&(fn.push(uo[mo]),co.push(mo)),fo[ho]<=mo&&ho++}uo[mo]!==1&&(fn.push(uo[mo]),co.push(mo))}return{newShape:fn,keptDims:co}}function sn(uo,hn){const fn=hn.length;return uo=uo==null?hn.map((co,lo)=>lo):[].concat(uo),(0,on.assert)(uo.every(co=>co>=-fn&&co<fn),()=>`All values in axis param must be in range [-${fn}, ${fn}) but got axis ${uo}`),(0,on.assert)(uo.every(un),()=>`All values in axis param must be integers but got axis ${uo}`),uo.map(co=>co<0?fn+co:co)}function un(uo){return uo%1==0}function Xr(uo){if(uo.length===0)return 1;let hn=uo[0];for(let fn=1;fn<uo.length;fn++)hn*=uo[fn];return hn}function to(uo){const hn=Math.ceil(Math.sqrt(uo));return[hn,Math.ceil(uo/hn)]}st.AlwaysKeepOriginalSizeStrategy=class{constructor(uo){this.maxTextureSize=uo}computeTextureWH(uo,hn){if(uo.length===0)return[1,1];const fn=this.maxTextureSize;if(hn&&hn.breakAxis!==void 0){const fo=hn.breakAxis>=uo.length?1:uo.slice(hn.breakAxis).reduce((mo,Uo)=>mo*Uo),ho=hn.breakAxis<=0?1:uo.slice(0,hn.breakAxis).reduce((mo,Uo)=>mo*Uo);if(!(fo>fn||ho>fn))return[fo,ho];rn.Logger.verbose("TextureLayout",`Given width/height preferences were unattainable: shape:${uo}, breakAxis:${hn.breakAxis}`)}const co=uo.reduce((fo,ho)=>fo*ho);let lo=Math.floor(Math.sqrt(co));for(;lo<fn&&lo<co&&co%lo!=0;lo++);if(lo>=fn||co%lo!=0)throw new Error(`The given dimensions are outside this GPU's boundaries: ${uo}`);return[lo,co/lo]}},st.PreferLogicalStrategy=class{constructor(uo){this.maxTextureSize=uo}computeTextureWH(uo,hn){const fn=this.computeTexture(uo,hn);return hn&&hn.isPacked&&(fn[0]/=2,fn[1]/=2),hn&&hn.reverseWH?[fn[1],fn[0]]:fn}computeTexture(uo,hn){const fn=hn&&hn.isPacked;if(uo.length===0)return fn?[2,2]:[1,1];let co=this.maxTextureSize;if(hn&&hn.breakAxis!==void 0){const ho=hn.breakAxis>=uo.length?1:uo.slice(hn.breakAxis).reduce((Uo,_d)=>Uo*_d),mo=hn.breakAxis<=0?1:uo.slice(0,hn.breakAxis).reduce((Uo,_d)=>Uo*_d);if(!(ho>co||mo>co))return[ho,mo];rn.Logger.verbose("TextureLayout",`Given width/height preferences were unattainable: shape:${uo}, breakAxis:${hn.breakAxis}`)}let lo=uo.slice(0);fn&&(co*=2,lo=lo.map((ho,mo)=>mo>=lo.length-2?lo[mo]%2==0?lo[mo]:lo[mo]+1:lo[mo]),lo.length===1&&(lo=[2,lo[0]])),lo.length!==2&&(lo=an(lo).newShape);const fo=Xr(lo);return lo.length<=1&&fo<=co?[1,fo]:lo.length===2&&lo[0]<=co&&lo[1]<=co?lo:lo.length===3&&lo[0]*lo[1]<=co&&lo[2]<=co?[lo[0]*lo[1],lo[2]]:lo.length===3&&lo[0]<=co&&lo[1]*lo[2]<=co?[lo[0],lo[1]*lo[2]]:lo.length===4&&lo[0]*lo[1]*lo[2]<=co&&lo[3]<=co?[lo[0]*lo[1]*lo[2],lo[3]]:lo.length===4&&lo[0]<=co&&lo[1]*lo[2]*lo[3]<=co?[lo[0],lo[1]*lo[2]*lo[3]]:fn?to(fo/4).map(ho=>2*ho):to(fo)}},st.squeezeShape=an,st.parseAxisParam=sn,st.isInt=un,st.sizeFromShape=Xr,st.getRowsCols=function(uo){if(uo.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[uo.length>1?uo[uo.length-2]:1,uo[uo.length-1]]},st.sizeToSquarishShape=to,st.getBatchDim=function(uo,hn=2){return Xr(uo.slice(0,uo.length-hn))}},4057:(Mt,st,nn)=>{Object.defineProperty(st,"__esModule",{value:!0}),st.createTextureLayoutFromShape=st.calculateTextureWidthAndHeight=st.createTextureLayoutFromTextureType=void 0;const rn=nn(2517),on=nn(2039);st.createTextureLayoutFromTextureType=(an,sn,un)=>{const Xr=un===on.TextureType.unpacked||un===on.TextureType.unpackedReversed?1:4,to=un===on.TextureType.packed,uo=un===on.TextureType.unpackedReversed||un===on.TextureType.packed,hn=un===on.TextureType.packedLastDimension?sn.length-1:void 0,fn=un===on.TextureType.packedLastDimension?sn.map((co,lo)=>lo===sn.length-1?4*co:co):void 0;return(0,st.createTextureLayoutFromShape)(an,sn,Xr,fn,{isPacked:to,reverseWH:uo,breakAxis:hn})},st.calculateTextureWidthAndHeight=(an,sn,un)=>{const Xr=(0,st.createTextureLayoutFromTextureType)(an,sn,un);return[Xr.width,Xr.height]},st.createTextureLayoutFromShape=(an,sn,un=1,Xr,to)=>{const uo=!(!to||!to.isPacked),[hn,fn]=an.computeTextureWH(uo&&Xr||sn,to),co=sn.length;let lo=sn.slice(0);if(co===0&&(lo=[1]),un===1)Xr=sn;else if(uo){if(un!==4)throw new Error("a packed texture must be 4-channel");Xr=sn,co>0&&(lo[co-1]=Math.ceil(lo[co-1]/2)),co>1&&(lo[co-2]=Math.ceil(lo[co-2]/2))}else if(!Xr)throw new Error("Unpacked shape is needed when using channels > 1");return{width:hn,height:fn,channels:un,isPacked:uo,shape:lo,strides:rn.ShapeUtil.computeStrides(lo),unpackedShape:Xr,reversedWH:to&&to.reverseWH}}},5702:(Mt,st,nn)=>{Object.defineProperty(st,"__esModule",{value:!0}),st.TextureManager=void 0;const rn=nn(6231);st.TextureManager=class{constructor(on,an,sn,un){this.glContext=on,this.layoutStrategy=an,this.profiler=sn,this.config=un,this.pendingRead=new Map,un.reuseTextures&&(this.inUseTextures=new Map,this.idleTextures=new Map,this.textureLookup=new Map)}createTextureFromLayout(on,an,sn,un){const Xr=this.toEncoderType(on),to=this.glContext.getEncoder(Xr,an.channels||1,un);if(an.isPacked&&un===1)throw new Error("not implemented");const uo=an.width,hn=an.height;let fn,co;if(this.config.reuseTextures){fn=`${uo}x${hn}_${to.format}_${to.internalFormat}_${to.textureType}`,co=this.inUseTextures.get(fn),co||(co=[],this.inUseTextures.set(fn,co));const fo=this.idleTextures.get(fn);if(fo&&fo.length>0){const ho=fo.pop();return co.push(ho),un===1&&this.glContext.updateTexture(ho,uo,hn,to,this.toTextureData(on,sn)),ho}}rn.Logger.verbose("TextureManager",`Creating new texture of size ${an.width}x${an.height}`);const lo=this.glContext.allocateTexture(uo,hn,to,this.toTextureData(on,sn));return this.config.reuseTextures&&(co.push(lo),this.textureLookup.set(lo,fn)),lo}readTexture(on,an,sn){return sn||(sn=1),this.profiler.event("backend","TextureManager.readTexture",()=>{const un=on.shape.reduce((to,uo)=>to*uo)*sn,Xr=this.glContext.readTexture(on.texture,on.width,on.height,un,this.toEncoderType(an),sn);return this.toTensorData(an,Xr)})}async readTextureAsync(on,an,sn){const un=on.tensor.dataId;if(sn||(sn=1),this.pendingRead.has(un)){const Xr=this.pendingRead.get(un);return new Promise(to=>Xr==null?void 0:Xr.push(to))}return this.profiler.event("backend","TextureManager.readTextureAsync",async()=>{this.pendingRead.set(un,[]);const Xr=on.shape.reduce((fn,co)=>fn*co)*sn;await this.glContext.createAndWaitForFence();const to=this.glContext.readTexture(on.texture,on.width,on.height,Xr,this.toEncoderType(an),sn),uo=this.toTensorData(an,to),hn=this.pendingRead.get(un);return this.pendingRead.delete(un),hn==null||hn.forEach(fn=>fn(uo)),uo})}readUint8TextureAsFloat(on){return this.profiler.event("backend","TextureManager.readUint8TextureAsFloat",()=>{const an=on.shape.reduce((un,Xr)=>un*Xr),sn=this.glContext.readTexture(on.texture,on.width,on.height,4*an,"byte",4);return new Float32Array(sn.buffer,sn.byteOffset,an)})}releaseTexture(on,an){let sn;if(this.config.reuseTextures&&(sn=this.textureLookup.get(on.texture),sn)){an&&this.textureLookup.delete(sn);const un=this.inUseTextures.get(sn);if(un){const Xr=un.indexOf(on.texture);if(Xr!==-1){un.splice(Xr,1);let to=this.idleTextures.get(sn);to||(to=[],this.idleTextures.set(sn,to)),to.push(on.texture)}}}sn&&!an||(rn.Logger.verbose("TextureManager",`Deleting texture of size ${on.width}x${on.height}`),this.glContext.deleteTexture(on.texture))}toTensorData(on,an){switch(on){case"int16":return an instanceof Int16Array?an:Int16Array.from(an);case"int32":return an instanceof Int32Array?an:Int32Array.from(an);case"int8":return an instanceof Int8Array?an:Int8Array.from(an);case"uint16":return an instanceof Uint16Array?an:Uint16Array.from(an);case"uint32":return an instanceof Uint32Array?an:Uint32Array.from(an);case"uint8":case"bool":return an instanceof Uint8Array?an:Uint8Array.from(an);case"float32":return an instanceof Float32Array?an:Float32Array.from(an);case"float64":return an instanceof Float64Array?an:Float64Array.from(an);default:throw new Error(`TensorData type ${on} is not supported`)}}toTextureData(on,an){if(an)return an instanceof Float32Array?an:new Float32Array(an)}toEncoderType(on){return"float"}clearActiveTextures(){this.glContext.clearActiveTextures()}}},2039:(Mt,st)=>{var nn;Object.defineProperty(st,"__esModule",{value:!0}),st.TextureType=void 0,(nn=st.TextureType||(st.TextureType={}))[nn.unpacked=0]="unpacked",nn[nn.unpackedReversed=1]="unpackedReversed",nn[nn.packed=2]="packed",nn[nn.downloadUint8AsFloat=3]="downloadUint8AsFloat",nn[nn.packedLastDimension=4]="packedLastDimension"},9390:(Mt,st,nn)=>{Object.defineProperty(st,"__esModule",{value:!0}),st.getGlChannels=st.getCoordsDataType=st.getSqueezedParams=st.squeezeInputShape=st.generateShaderFuncNameFromInputSamplerNameAtOutCoords=st.generateShaderFuncNameFromInputSamplerName=st.repeatedTry=st.getPackedShape=void 0;const rn=nn(2517);st.getPackedShape=function(on){const an=on.length;return on.slice(0,an-1).concat(on[an-1]/4)},st.repeatedTry=async function(on,an=un=>0,sn){return new Promise((un,Xr)=>{let to=0;const uo=()=>{if(on())return void un();to++;const hn=an(to);sn!=null&&to>=sn?Xr():setTimeout(uo,hn)};uo()})},st.generateShaderFuncNameFromInputSamplerName=function(on){return(0,rn.assert)(on!==void 0&&on.length!==0,()=>"empty string found for sampler name"),"get"+on.charAt(0).toUpperCase()+on.slice(1)},st.generateShaderFuncNameFromInputSamplerNameAtOutCoords=function(on){return(0,rn.assert)(on!==void 0&&on.length!==0,()=>"empty string found for sampler name"),"get"+on.charAt(0).toUpperCase()+on.slice(1)+"AtOutCoords"},st.squeezeInputShape=function(on,an){let sn=JSON.parse(JSON.stringify(on));return sn=an,sn},st.getSqueezedParams=function(on,an){return an.map(sn=>on[sn]).join(", ")},st.getCoordsDataType=function(on){if(on<=1)return"int";if(on===2)return"ivec2";if(on===3)return"ivec3";if(on===4)return"ivec4";if(on===5)return"ivec5";if(on===6)return"ivec6";throw Error(`GPU for rank ${on} is not yet supported`)},st.getGlChannels=function(on=6){return["x","y","z","w","u","v"].slice(0,on)}},7305:(Mt,st,nn)=>{Object.defineProperty(st,"__esModule",{value:!0}),st.createNewWebGLContext=st.createWebGLContext=void 0;const rn=nn(6231),on=nn(1713),an={};function sn(un){const Xr=function(){if(typeof document>"u"){if(typeof OffscreenCanvas>"u")throw new TypeError("failed to create canvas: OffscreenCanvas is not supported");return new OffscreenCanvas(1,1)}const hn=document.createElement("canvas");return hn.width=1,hn.height=1,hn}();let to;const uo={alpha:!1,depth:!1,antialias:!1,stencil:!1,preserveDrawingBuffer:!1,premultipliedAlpha:!1,failIfMajorPerformanceCaveat:!1};if((!un||un==="webgl2")&&(to=Xr.getContext("webgl2",uo),to))try{return new on.WebGLContext(to,2)}catch(hn){rn.Logger.warning("GlContextFactory",`failed to create WebGLContext using contextId 'webgl2'. Error: ${hn}`)}if((!un||un==="webgl")&&(to=Xr.getContext("webgl",uo)||Xr.getContext("experimental-webgl",uo),to))try{return new on.WebGLContext(to,1)}catch(hn){rn.Logger.warning("GlContextFactory",`failed to create WebGLContext using contextId 'webgl' or 'experimental-webgl'. Error: ${hn}`)}throw new Error("WebGL is not supported")}st.createWebGLContext=function un(Xr){let to;Xr&&Xr!=="webgl2"||!("webgl2"in an)?Xr&&Xr!=="webgl"||!("webgl"in an)||(to=an.webgl):to=an.webgl2,to=to||sn(Xr),Xr=Xr||to.version===1?"webgl":"webgl2";const uo=to.gl;return an[Xr]=to,uo.isContextLost()?(delete an[Xr],un(Xr)):(uo.disable(uo.DEPTH_TEST),uo.disable(uo.STENCIL_TEST),uo.disable(uo.BLEND),uo.disable(uo.DITHER),uo.disable(uo.POLYGON_OFFSET_FILL),uo.disable(uo.SAMPLE_COVERAGE),uo.enable(uo.SCISSOR_TEST),uo.enable(uo.CULL_FACE),uo.cullFace(uo.BACK),to)},st.createNewWebGLContext=sn},1713:function(Mt,st,nn){var rn=this&&this.__createBinding||(Object.create?function(uo,hn,fn,co){co===void 0&&(co=fn);var lo=Object.getOwnPropertyDescriptor(hn,fn);lo&&!("get"in lo?!hn.__esModule:lo.writable||lo.configurable)||(lo={enumerable:!0,get:function(){return hn[fn]}}),Object.defineProperty(uo,co,lo)}:function(uo,hn,fn,co){co===void 0&&(co=fn),uo[co]=hn[fn]}),on=this&&this.__setModuleDefault||(Object.create?function(uo,hn){Object.defineProperty(uo,"default",{enumerable:!0,value:hn})}:function(uo,hn){uo.default=hn}),an=this&&this.__importStar||function(uo){if(uo&&uo.__esModule)return uo;var hn={};if(uo!=null)for(var fn in uo)fn!=="default"&&Object.prototype.hasOwnProperty.call(uo,fn)&&rn(hn,uo,fn);return on(hn,uo),hn};Object.defineProperty(st,"__esModule",{value:!0}),st.WebGLContext=st.linearSearchLastTrue=void 0;const sn=nn(1670),un=an(nn(7769)),Xr=nn(9390);function to(uo){let hn=0;for(;hn<uo.length&&uo[hn]();++hn);return hn-1}st.linearSearchLastTrue=to,st.WebGLContext=class{constructor(uo,hn){this.frameBufferBound=!1,this.itemsToPoll=[],this.gl=uo,this.version=hn,this.getExtensions(),this.vertexbuffer=this.createVertexbuffer(),this.framebuffer=this.createFramebuffer(),this.queryVitalParameters()}allocateTexture(uo,hn,fn,co){const lo=this.gl,fo=lo.createTexture();lo.bindTexture(lo.TEXTURE_2D,fo),lo.texParameteri(lo.TEXTURE_2D,lo.TEXTURE_MIN_FILTER,lo.NEAREST),lo.texParameteri(lo.TEXTURE_2D,lo.TEXTURE_MAG_FILTER,lo.NEAREST),lo.texParameteri(lo.TEXTURE_2D,lo.TEXTURE_WRAP_S,lo.CLAMP_TO_EDGE),lo.texParameteri(lo.TEXTURE_2D,lo.TEXTURE_WRAP_T,lo.CLAMP_TO_EDGE);const ho=co?fn.encode(co,uo*hn):null;return lo.texImage2D(lo.TEXTURE_2D,0,fn.internalFormat,uo,hn,0,fn.format,fn.textureType,ho),this.checkError(),fo}updateTexture(uo,hn,fn,co,lo){const fo=this.gl;fo.bindTexture(fo.TEXTURE_2D,uo);const ho=co.encode(lo,hn*fn);fo.texSubImage2D(fo.TEXTURE_2D,0,0,0,hn,fn,co.format,co.textureType,ho),this.checkError()}attachFramebuffer(uo,hn,fn){const co=this.gl;co.bindTexture(co.TEXTURE_2D,uo),co.bindFramebuffer(co.FRAMEBUFFER,this.framebuffer),co.framebufferTexture2D(co.FRAMEBUFFER,co.COLOR_ATTACHMENT0,co.TEXTURE_2D,uo,0),this.checkError(),co.viewport(0,0,hn,fn),co.scissor(0,0,hn,fn)}readTexture(uo,hn,fn,co,lo,fo){const ho=this.gl;fo||(fo=1),this.frameBufferBound||this.attachFramebuffer(uo,hn,fn);const mo=this.getEncoder(lo,fo),Uo=mo.allocate(hn*fn);return ho.bindTexture(ho.TEXTURE_2D,uo),ho.framebufferTexture2D(ho.FRAMEBUFFER,ho.COLOR_ATTACHMENT0,ho.TEXTURE_2D,uo,0),ho.readPixels(0,0,hn,fn,ho.RGBA,mo.textureType,Uo),this.checkError(),mo.decode(Uo,co)}isFramebufferReady(){return!0}getActiveTexture(){const uo=this.gl;return"TEXTURE"+(uo.getParameter(this.gl.ACTIVE_TEXTURE)-uo.TEXTURE0)}getTextureBinding(){return this.gl.getParameter(this.gl.TEXTURE_BINDING_2D)}getFramebufferBinding(){return this.gl.getParameter(this.gl.FRAMEBUFFER_BINDING)}setVertexAttributes(uo,hn){const fn=this.gl;fn.vertexAttribPointer(uo,3,fn.FLOAT,!1,20,0),fn.enableVertexAttribArray(uo),hn!==-1&&(fn.vertexAttribPointer(hn,2,fn.FLOAT,!1,20,12),fn.enableVertexAttribArray(hn)),this.checkError()}createProgram(uo,hn){const fn=this.gl,co=fn.createProgram();return fn.attachShader(co,uo),fn.attachShader(co,hn),fn.linkProgram(co),co}compileShader(uo,hn){const fn=this.gl,co=fn.createShader(hn);if(!co)throw new Error(`createShader() returned null with type ${hn}`);if(fn.shaderSource(co,uo),fn.compileShader(co),fn.getShaderParameter(co,fn.COMPILE_STATUS)===!1)throw new Error(`Failed to compile shader: ${fn.getShaderInfoLog(co)}
Shader source:
${uo}`);return co}deleteShader(uo){this.gl.deleteShader(uo)}bindTextureToUniform(uo,hn,fn){const co=this.gl;co.activeTexture(co.TEXTURE0+hn),this.checkError(),co.bindTexture(co.TEXTURE_2D,uo),this.checkError(),co.uniform1i(fn,hn),this.checkError()}draw(){this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4),this.checkError()}checkError(){if(sn.env.debug){const uo=this.gl,hn=uo.getError();let fn="";switch(hn){case uo.NO_ERROR:return;case uo.INVALID_ENUM:fn="INVALID_ENUM";break;case uo.INVALID_VALUE:fn="INVALID_VALUE";break;case uo.INVALID_OPERATION:fn="INVALID_OPERATION";break;case uo.INVALID_FRAMEBUFFER_OPERATION:fn="INVALID_FRAMEBUFFER_OPERATION";break;case uo.OUT_OF_MEMORY:fn="OUT_OF_MEMORY";break;case uo.CONTEXT_LOST_WEBGL:fn="CONTEXT_LOST_WEBGL";break;default:fn=`Unknown WebGL Error: ${hn.toString(16)}`}throw new Error(fn)}}deleteTexture(uo){this.gl.deleteTexture(uo)}deleteProgram(uo){this.gl.deleteProgram(uo)}getEncoder(uo,hn,fn=0){if(this.version===2)return new un.RedFloat32DataEncoder(this.gl,hn);switch(uo){case"float":return fn===1||this.isRenderFloat32Supported?new un.RGBAFloatDataEncoder(this.gl,hn):new un.RGBAFloatDataEncoder(this.gl,hn,this.textureHalfFloatExtension.HALF_FLOAT_OES);case"int":throw new Error("not implemented");case"byte":return new un.Uint8DataEncoder(this.gl,hn);default:throw new Error(`Invalid dataType: ${uo}`)}}clearActiveTextures(){const uo=this.gl;for(let hn=0;hn<this.maxTextureImageUnits;++hn)uo.activeTexture(uo.TEXTURE0+hn),uo.bindTexture(uo.TEXTURE_2D,null)}dispose(){if(this.disposed)return;const uo=this.gl;uo.bindFramebuffer(uo.FRAMEBUFFER,null),uo.deleteFramebuffer(this.framebuffer),uo.bindBuffer(uo.ARRAY_BUFFER,null),uo.deleteBuffer(this.vertexbuffer),uo.bindBuffer(uo.ELEMENT_ARRAY_BUFFER,null),uo.finish(),this.disposed=!0}createDefaultGeometry(){return new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0])}createVertexbuffer(){const uo=this.gl,hn=uo.createBuffer();if(!hn)throw new Error("createBuffer() returned null");const fn=this.createDefaultGeometry();return uo.bindBuffer(uo.ARRAY_BUFFER,hn),uo.bufferData(uo.ARRAY_BUFFER,fn,uo.STATIC_DRAW),this.checkError(),hn}createFramebuffer(){const uo=this.gl.createFramebuffer();if(!uo)throw new Error("createFramebuffer returned null");return uo}queryVitalParameters(){const uo=this.gl;if(this.isFloatTextureAttachableToFrameBuffer=this.checkFloatTextureAttachableToFrameBuffer(),this.isRenderFloat32Supported=this.checkRenderFloat32(),this.isFloat32DownloadSupported=this.checkFloat32Download(),this.version===1&&!this.textureHalfFloatExtension&&!this.isRenderFloat32Supported)throw new Error("both float32 and float16 TextureType are not supported");this.isBlendSupported=!this.isRenderFloat32Supported||this.checkFloat32Blend(),this.maxTextureSize=uo.getParameter(uo.MAX_TEXTURE_SIZE),this.maxTextureImageUnits=uo.getParameter(uo.MAX_TEXTURE_IMAGE_UNITS),this.version}getExtensions(){this.version===2?(this.colorBufferFloatExtension=this.gl.getExtension("EXT_color_buffer_float"),this.disjointTimerQueryWebgl2Extension=this.gl.getExtension("EXT_disjoint_timer_query_webgl2")):(this.textureFloatExtension=this.gl.getExtension("OES_texture_float"),this.textureHalfFloatExtension=this.gl.getExtension("OES_texture_half_float"))}checkFloatTextureAttachableToFrameBuffer(){const uo=this.gl,hn=uo.createTexture();uo.bindTexture(uo.TEXTURE_2D,hn);const fn=this.version===2?uo.RGBA32F:uo.RGBA;uo.texImage2D(uo.TEXTURE_2D,0,fn,1,1,0,uo.RGBA,uo.FLOAT,null);const co=uo.createFramebuffer();uo.bindFramebuffer(uo.FRAMEBUFFER,co),uo.framebufferTexture2D(uo.FRAMEBUFFER,uo.COLOR_ATTACHMENT0,uo.TEXTURE_2D,hn,0);const lo=uo.checkFramebufferStatus(uo.FRAMEBUFFER)===uo.FRAMEBUFFER_COMPLETE;return uo.bindTexture(uo.TEXTURE_2D,null),uo.bindFramebuffer(uo.FRAMEBUFFER,null),uo.deleteTexture(hn),uo.deleteFramebuffer(co),lo}checkRenderFloat32(){if(this.version===2){if(!this.colorBufferFloatExtension)return!1}else if(!this.textureFloatExtension)return!1;return this.isFloatTextureAttachableToFrameBuffer}checkFloat32Download(){if(this.version===2){if(!this.colorBufferFloatExtension)return!1}else if(!this.textureFloatExtension||!this.gl.getExtension("WEBGL_color_buffer_float"))return!1;return this.isFloatTextureAttachableToFrameBuffer}checkFloat32Blend(){const uo=this.gl;let hn,fn,co,lo,fo;try{hn=uo.createTexture(),fn=uo.createFramebuffer(),uo.bindTexture(uo.TEXTURE_2D,hn);const ho=this.version===2?uo.RGBA32F:uo.RGBA;return uo.texImage2D(uo.TEXTURE_2D,0,ho,1,1,0,uo.RGBA,uo.FLOAT,null),uo.bindFramebuffer(uo.FRAMEBUFFER,fn),uo.framebufferTexture2D(uo.FRAMEBUFFER,uo.COLOR_ATTACHMENT0,uo.TEXTURE_2D,hn,0),uo.enable(uo.BLEND),co=uo.createShader(uo.VERTEX_SHADER),!!co&&(uo.shaderSource(co,"void main(){}"),uo.compileShader(co),lo=uo.createShader(uo.FRAGMENT_SHADER),!!lo&&(uo.shaderSource(lo,"precision highp float;void main(){gl_FragColor=vec4(0.5);}"),uo.compileShader(lo),fo=uo.createProgram(),!!fo&&(uo.attachShader(fo,co),uo.attachShader(fo,lo),uo.linkProgram(fo),uo.useProgram(fo),uo.drawArrays(uo.POINTS,0,1),uo.getError()===uo.NO_ERROR)))}finally{uo.disable(uo.BLEND),fo&&uo.deleteProgram(fo),co&&uo.deleteShader(co),lo&&uo.deleteShader(lo),fn&&(uo.bindFramebuffer(uo.FRAMEBUFFER,null),uo.deleteFramebuffer(fn)),hn&&(uo.bindTexture(uo.TEXTURE_2D,null),uo.deleteTexture(hn))}}beginTimer(){if(this.version===2&&this.disjointTimerQueryWebgl2Extension){const uo=this.gl,hn=this.disjointTimerQueryWebgl2Extension,fn=uo.createQuery();return uo.beginQuery(hn.TIME_ELAPSED_EXT,fn),fn}throw new Error("WebGL1 profiling currently not supported.")}endTimer(){if(this.version!==2||!this.disjointTimerQueryWebgl2Extension)throw new Error("WebGL1 profiling currently not supported");{const uo=this.gl,hn=this.disjointTimerQueryWebgl2Extension;uo.endQuery(hn.TIME_ELAPSED_EXT)}}isTimerResultAvailable(uo){let hn=!1,fn=!1;if(this.version!==2||!this.disjointTimerQueryWebgl2Extension)throw new Error("WebGL1 profiling currently not supported");{const co=this.gl,lo=this.disjointTimerQueryWebgl2Extension;hn=co.getQueryParameter(uo,co.QUERY_RESULT_AVAILABLE),fn=co.getParameter(lo.GPU_DISJOINT_EXT)}return hn&&!fn}getTimerResult(uo){let hn=0;if(this.version!==2)throw new Error("WebGL1 profiling currently not supported");{const fn=this.gl;hn=fn.getQueryParameter(uo,fn.QUERY_RESULT),fn.deleteQuery(uo)}return hn/1e6}async waitForQueryAndGetTime(uo){return await(0,Xr.repeatedTry)(()=>this.isTimerResultAvailable(uo)),this.getTimerResult(uo)}async createAndWaitForFence(){const uo=this.createFence(this.gl);return this.pollFence(uo)}createFence(uo){let hn;const fn=uo,co=fn.fenceSync(fn.SYNC_GPU_COMMANDS_COMPLETE,0);return uo.flush(),hn=co===null?()=>!0:()=>{const lo=fn.clientWaitSync(co,0,0);return lo===fn.ALREADY_SIGNALED||lo===fn.CONDITION_SATISFIED},{query:co,isFencePassed:hn}}async pollFence(uo){return new Promise(hn=>{this.addItemToPoll(()=>uo.isFencePassed(),()=>hn())})}pollItems(){const uo=to(this.itemsToPoll.map(hn=>hn.isDoneFn));for(let hn=0;hn<=uo;++hn){const{resolveFn:fn}=this.itemsToPoll[hn];fn()}this.itemsToPoll=this.itemsToPoll.slice(uo+1)}async addItemToPoll(uo,hn){this.itemsToPoll.push({isDoneFn:uo,resolveFn:hn}),this.itemsToPoll.length>1||await(0,Xr.repeatedTry)(()=>(this.pollItems(),this.itemsToPoll.length===0))}}},1036:(Mt,st,nn)=>{Object.defineProperty(st,"__esModule",{value:!0}),st.ExecutionPlan=void 0;const rn=nn(6231);class on{constructor(sn,un){this.op=sn,this.node=un}}st.ExecutionPlan=class{constructor(an,sn,un){this.graph=an,this.profiler=un,this.initialize(sn)}initialize(an){this.profiler.event("session","ExecutionPlan.initialize",()=>{const sn=this.graph.getNodes();if(sn.length!==an.length)throw new Error("The size of nodes and OPs do not match.");this._ops=an.map((un,Xr)=>new on(un,sn[Xr])),this.reset(),this._starter=[],this._ops.forEach((un,Xr)=>{let to=!0;for(const uo of un.node.inputs)if(!this._values[uo]&&this.graph.getInputIndices().indexOf(uo)===-1){to=!1;break}to&&this._starter.push(Xr)})})}reset(){this._values=this.graph.getValues().map(an=>an.tensor)}async execute(an,sn){return this.profiler.event("session","ExecutionPlan.execute",async()=>{this.reset();const un=an.createInferenceHandler(),Xr=this.graph.getInputIndices();if(sn.length!==Xr.length)throw new Error(`number of input tensors don't match the number of inputs to the model: actual: ${sn.length} expected: ${Xr.length}`);sn.forEach((lo,fo)=>{const ho=Xr[fo];this._values[ho]=lo});const to=this._starter.slice(0),uo=this.graph.getValues(),hn=this.graph.getNodes();let fn=0;for(;fn<to.length;){const lo=to[fn++],fo=this._ops[lo],ho=fo.node.inputs.map(tp=>this._values[tp]);if(ho.indexOf(void 0)!==-1)throw new Error(`unresolved input detected: op: ${fo.node}`);const mo=ho;rn.Logger.verbose("ExecPlan",`Runing op:${fo.node.name} (${mo.map((tp,ep)=>`'${fo.node.inputs[ep]}': ${tp.type}[${tp.dims.join(",")}]`).join(", ")})`);const Uo=await this.profiler.event("node",fo.node.name,async()=>fo.op.impl(un,mo,fo.op.context));if(Uo.length!==fo.node.outputs.length)throw new Error("the size of output does not match model definition.");Uo.forEach((tp,ep)=>{const np=fo.node.outputs[ep];if(this._values[np])throw new Error(`output [${np}] already has value: op:${fo.node.name}`);this._values[np]=tp});const _d=new Set;Uo.forEach((tp,ep)=>{const np=fo.node.outputs[ep];for(const rp of uo[np].to){const ip=hn[rp];let op=!0;for(const ap of ip.inputs)if(!this._values[ap]){op=!1;break}op&&_d.add(rp)}}),to.push(..._d)}const co=[];for(let lo=0;lo<this.graph.getOutputIndices().length;lo++){const fo=this.graph.getOutputIndices()[lo],ho=this._values[fo];if(ho===void 0)throw new Error(`required output [${fo}] does not have value`);fo===0?await ho.getData():ho.data,co.push(ho)}return rn.Logger.verbose("ExecPlan","disposing of inferenceHandler"),un.dispose(),co})}}},7070:(Mt,st,nn)=>{Object.defineProperty(st,"__esModule",{value:!0}),st.Graph=void 0;const rn=nn(1446),on=nn(7778),an=nn(9395),sn=nn(9162),un=nn(2517);var Xr=an.onnxruntime.experimental.fbs;st.Graph={from:(fn,co)=>new hn(fn,co)};class to{constructor(co){this._from=void 0,this._to=[],this.tensor=void 0,this.type=void 0,co&&(this.type=un.ProtoUtil.tensorValueTypeFromProto(co.type.tensorType))}get from(){return this._from}get to(){return this._to}}class uo{constructor(co,lo){co instanceof rn.onnx.NodeProto?(this.name=co.name,this.opType=co.opType,this.attributes=new on.Attribute(co.attribute)):co instanceof Xr.Node&&(this.name=lo??co.name(),this.opType=co.opType(),this.attributes=new on.Attribute(un.ProtoUtil.tensorAttributesFromORTFormat(co))),this.inputs=[],this.outputs=[],this.executeNode=!0}}class hn{constructor(co,lo){if(!co)throw new TypeError("graph is empty");this.buildGraph(co),this.transformGraph(lo),this.checkIsAcyclic()}getInputIndices(){return this._allInputIndices}getInputNames(){return this._allInputNames}getOutputIndices(){return this._allOutputIndices}getOutputNames(){return this._allOutputNames}getValues(){return this._allData}getNodes(){return this._nodes}buildGraph(co){if(co instanceof rn.onnx.GraphProto)this.buildGraphFromOnnxFormat(co);else{if(!(co instanceof Xr.Graph))throw new TypeError("Graph type is not supported.");this.buildGraphFromOrtFormat(co)}}buildGraphFromOnnxFormat(co){const lo=new Map;this._allData=[],this._allInputIndices=[],this._allInputNames=[],this._allOutputIndices=[],this._allOutputNames=[],this._nodes=[];const fo=new Map;if(!co.input)throw new Error("missing information in graph: input");const ho=[];for(const mo of co.input){if(lo.has(mo.name))throw new Error(`duplicated input name: ${mo.name}`);const Uo=this._allData.push(new to(mo))-1;lo.set(mo.name,Uo),ho.push(mo.name)}if(!co.initializer)throw new Error("missing information in graph: initializer");for(const mo of co.initializer){let Uo=lo.get(mo.name);if(Uo===void 0){const _d=new to;_d.type={shape:{dims:un.ProtoUtil.tensorDimsFromProto(mo.dims)},tensorType:un.ProtoUtil.tensorDataTypeFromProto(mo.dataType)},Uo=this._allData.push(_d)-1,lo.set(mo.name,Uo)}this._allData[Uo]._from=-1,this._allData[Uo].tensor=sn.Tensor.fromProto(mo)}for(let mo=0;mo<this._allData.length;mo++)this._allData[mo].tensor||(this._allInputIndices.push(mo),this._allInputNames.push(ho[mo]));if(!co.output)throw new Error("missing information in graph: output");for(const mo of co.output){if(lo.has(mo.name))throw new Error(`duplicated output name: ${mo.name}`);const Uo=this._allData.push(new to(mo))-1;lo.set(mo.name,Uo),this._allOutputIndices.push(Uo),this._allOutputNames.push(mo.name)}if(!co.node)throw new Error("missing information in graph: node");for(const mo of co.node){if(!mo.name)for(let _d=0;;_d++){const tp=`unnamed_${mo.opType}_${_d}`;if(!fo.has(tp)){mo.name=tp;break}}if(fo.has(mo.name))throw new Error(`duplicated node name: ${mo.name}`);const Uo=this._nodes.push(new uo(mo))-1;fo.set(mo.name,Uo)}for(let mo=0;mo<this._nodes.length;mo++){const Uo=this._nodes[mo],_d=co.node[mo];if(!_d.output)throw new Error(`missing output for node: ${_d.name}`);for(const tp of _d.output){let ep=lo.get(tp);if(ep===void 0&&(ep=this._allData.push(new to)-1,lo.set(tp,ep)),Uo.outputs.push(ep),this._allData[ep]._from!==void 0)throw new Error(`multiple nodes output to one data value: ${ep}`);if(this._allData[ep]._from=mo,_d.opType==="Constant"){if(!_d.attribute||_d.attribute.length!==1||!_d.attribute[0].t)throw new Error("missing attributes or missing tensor value in attributes for this Constant operator");if(!_d.output||_d.output.length!==1)throw new Error("missing output or incorrect number of outputs for this Constant operator");Uo.outputs.pop(),Uo.executeNode=!1,this._allData[ep]._from=-1,this._allData[ep].tensor=sn.Tensor.fromProto(_d.attribute[0].t)}}}for(let mo=0;mo<this._nodes.length;mo++){const Uo=this._nodes[mo],_d=co.node[mo];if(!_d.input)throw new Error(`missing input for node: ${_d.name}`);for(const tp of _d.input){const ep=lo.get(tp);if(ep===void 0){if(tp===""&&_d.input.length===3&&_d.opType==="Resize")continue;throw new Error(`unrecognized input '${tp}' for node: ${_d.name}`)}Uo.inputs.push(ep),this._allData[ep]._to.push(mo)}}return!0}buildGraphFromOrtFormat(co){var lo,fo,ho;const mo=new Map;this._allData=[],this._allInputIndices=[],this._allInputNames=[],this._allOutputIndices=[],this._allOutputNames=[],this._nodes=[];const Uo=new Map,_d=[];for(let tp=0;tp<co.inputsLength();tp++){const ep=co.inputs(tp);if(mo.has(ep))throw new Error(`duplicated input name: ${ep}`);for(let np=0;np<co.nodeArgsLength();np++)if(((lo=co.nodeArgs(np))===null||lo===void 0?void 0:lo.name())===ep){const rp=new to;if(((ho=(fo=co.nodeArgs(np))===null||fo===void 0?void 0:fo.type())===null||ho===void 0?void 0:ho.valueType())!==Xr.TypeInfoValue.tensor_type)throw new Error("Unexpected value type for the nodeArg.");const ip=co.nodeArgs(np).type().value(new Xr.TensorTypeAndShape),op=un.ProtoUtil.tensorDataTypeFromProto(ip.elemType()),ap=ip.shape(),sp=[];for(let pp=0;pp<ap.dimLength();pp++)sp.push(un.LongUtil.longToNumber(ap.dim(pp).value().dimValue()));rp.type={shape:{dims:sp},tensorType:op};const up=this._allData.push(rp)-1;mo.set(ep,up),_d.push(ep)}}for(let tp=0;tp<co.initializersLength();tp++){const ep=co.initializers(tp);let np=mo.get(ep.name());if(np===void 0){const rp=new to,ip=un.ProtoUtil.tensorDimsFromORTFormat(ep),op=un.ProtoUtil.tensorDataTypeFromProto(ep.dataType());rp.type={shape:{dims:ip},tensorType:op},np=this._allData.push(rp)-1,mo.set(ep.name(),np)}this._allData[np]._from=-1,this._allData[np].tensor=sn.Tensor.fromOrtTensor(ep)}for(let tp=0;tp<this._allData.length;tp++)this._allData[tp].tensor||(this._allInputIndices.push(tp),this._allInputNames.push(_d[tp]));for(let tp=0;tp<co.outputsLength();tp++){const ep=co.outputs(tp);if(mo.has(ep))throw new Error(`duplicated output name: ${ep}`);const np=this._allData.push(new to)-1;mo.set(ep,np),this._allOutputIndices.push(np),this._allOutputNames.push(ep)}if(!co.nodes)throw new Error("missing information in graph: node");for(let tp=0;tp<co.nodesLength();tp++){const ep=co.nodes(tp);let np=ep.name();if(!np)for(let ip=0;np=`unnamed_${ep.opType()}_${ip}`,Uo.has(np);ip++);if(Uo.has(np))throw new Error(`duplicated node name: ${np}`);const rp=this._nodes.push(new uo(ep,np))-1;Uo.set(np,rp)}for(let tp=0;tp<this._nodes.length;tp++){const ep=this._nodes[tp],np=co.nodes(tp);if(np==null)throw new Error(`No node exists at index ${tp}`);if((np==null?void 0:np.outputsLength())===0)throw new Error(`missing output for node: ${np.name}`);for(let rp=0;rp<(np==null?void 0:np.outputsLength());rp++){const ip=np==null?void 0:np.outputs(rp);let op=mo.get(ip);if(op===void 0&&(op=this._allData.push(new to)-1,mo.set(ip,op)),ep.outputs.push(op),this._allData[op]._from!==void 0)throw new Error(`multiple nodes output to one data value: ${op}`);if(this._allData[op]._from=tp,np.opType()==="Constant"){if(np.attributesLength()!==1||!np.attributes(0).t())throw new Error("missing attributes or missing tensor value in attributes for this Constant operator");if(np.outputsLength()!==1)throw new Error("missing output or incorrect number of outputs for this Constant operator");ep.outputs.pop(),ep.executeNode=!1,this._allData[op]._from=-1,this._allData[op].tensor=sn.Tensor.fromOrtTensor(np.attributes(0).t())}}}for(let tp=0;tp<this._nodes.length;tp++){const ep=this._nodes[tp],np=co.nodes(tp);if(np.inputsLength()===0)throw new Error(`missing input for node: ${np.name}`);for(let rp=0;rp<np.inputsLength();rp++){const ip=np.inputs(rp),op=mo.get(ip);if(op===void 0)throw new Error(`unrecognized input '${ip}' for node: ${np.name()}`);ep.inputs.push(op),this._allData[op]._to.push(tp)}}}checkIsAcyclic(){const co=new Set;this._allInputIndices.forEach(ho=>{this._allData[ho]._to.forEach(mo=>{co.add(mo)})});const lo=Array.from(co),fo=new Array(this._nodes.length).fill("white");for(;lo.length>0;){const ho=lo.pop();fo[ho]==="gray"?fo[ho]="black":(lo.push(ho),fo[ho]="gray",this._nodes[ho].outputs.forEach(mo=>{const Uo=this._allData[mo];if(Uo.tensor!==void 0)throw new Error("node outputs should not be initialized");if(Uo._from!==ho)throw new Error("from property of the Value object doesn't match index of Node being processed");Uo._to.forEach(_d=>{if(fo[_d]==="gray")throw new Error("model graph is cyclic");fo[_d]==="white"&&lo.push(_d)})}))}}transformGraph(co){this.removeAllIdentityNodes(),this.removeAllDropoutNodes(),this.fuseConvActivationNodes(),co&&co.transformGraph(this),this.finalizeGraph()}finalizeGraph(){let co=0;for(let lo=0;lo<this._nodes.length;lo++)this._nodes[lo].executeNode?co>0&&(this._nodes[lo].inputs.forEach(fo=>{const ho=this._allData[fo]._to.indexOf(lo+co);ho!==-1&&(this._allData[fo]._to[ho]=lo)}),this._nodes[lo].outputs.forEach(fo=>{this._allData[fo]._from&&this._allData[fo]._from===lo+co&&(this._allData[fo]._from=lo)})):(co++,this._nodes[lo].outputs.forEach(fo=>{this._allData[fo]._from=-2}),this._nodes.splice(lo,1),lo--);co=0;for(let lo=0;lo<this._allData.length;lo++)if(this._allData[lo].from!==-2||this._allOutputIndices.indexOf(lo+co)!==-1){if(co>0){let fo=-1;this._allData[lo].from!==void 0&&this._allData[lo].from!==-1?(fo=this._nodes[this._allData[lo].from].outputs.indexOf(lo+co),fo!==-1&&(this._nodes[this._allData[lo].from].outputs[fo]=lo)):(fo=this._allInputIndices.indexOf(lo+co),fo!==-1&&(this._allInputIndices[fo]=lo)),this._allData[lo].to.forEach(ho=>{fo=this._nodes[ho].inputs.indexOf(lo+co),fo!==-1&&(this._nodes[ho].inputs[fo]=lo)}),this._allData[lo].to.length===0&&(fo=this._allOutputIndices.indexOf(lo+co),fo!==-1&&(this._allOutputIndices[fo]=lo))}}else co++,this._allData.splice(lo,1),lo--}deleteNode(co){const lo=this._nodes[co];if(lo.outputs.length>1){for(let tp=1;tp<lo.outputs.length;tp++)if(this._allData[lo.outputs[tp]].to.length>0)throw new Error("Node deletion with more than one output connected to other nodes is not supported. ")}lo.executeNode=!1;const fo=lo.inputs[0],ho=lo.outputs[0],mo=this._allData[ho].to,Uo=this._allData[fo].to.indexOf(co);if(Uo===-1)throw new Error("The Value object doesn't have the current Node in it's 'to' property ");this._allData[fo].to.splice(Uo,1),this._allData[ho]._to=[];const _d=this._allOutputIndices.indexOf(ho);if(_d!==-1&&(this._allOutputIndices[_d]=fo),mo&&mo.length>0)for(const tp of mo){const ep=this._nodes[tp].inputs.indexOf(ho);if(ep===-1)throw new Error("The Node object doesn't have the output Value in it's 'inputs' property ");this._nodes[tp].inputs[ep]=fo,this._allData[fo].to.push(tp)}}removeAllDropoutNodes(){let co=0;for(const lo of this._nodes){if(lo.opType==="Dropout"){if(lo.inputs.length!==1)throw new Error("Dropout nodes should only contain one input. ");if(lo.outputs.length!==1&&lo.outputs.length!==2)throw new Error("Dropout nodes should contain either 1 or 2 output(s)");if(lo.outputs.length===2&&this._allData[lo.outputs[1]]._to.length!==0)throw new Error("Dropout nodes's second output should not be referenced by other nodes");this.deleteNode(co)}co++}}removeAllIdentityNodes(){let co=0;for(const lo of this._nodes)lo.opType==="Identity"&&this.deleteNode(co),co++}isActivation(co){switch(co.opType){case"Relu":case"Sigmoid":case"Clip":return!0;default:return!1}}fuseConvActivationNodes(){for(const co of this._nodes)if(co.opType==="Conv"){const lo=this._allData[co.outputs[0]]._to;if(lo.length===1&&this.isActivation(this._nodes[lo[0]])){const fo=this._nodes[lo[0]];if(fo.opType==="Clip")if(fo.inputs.length===1)try{co.attributes.set("activation_params","floats",[fo.attributes.getFloat("min"),fo.attributes.getFloat("max")])}catch{co.attributes.set("activation_params","floats",[un.MIN_CLIP,un.MAX_CLIP])}else{if(!(fo.inputs.length>=3&&this._allData[fo.inputs[1]].tensor!==void 0&&this._allData[fo.inputs[2]].tensor!==void 0))continue;co.attributes.set("activation_params","floats",[this._allData[fo.inputs[1]].tensor.floatData[0],this._allData[fo.inputs[2]].tensor.floatData[0]])}co.attributes.set("activation","string",fo.opType),this.deleteNode(lo[0])}}}}},6231:(Mt,st)=>{Object.defineProperty(st,"__esModule",{value:!0}),st.now=st.Profiler=st.Logger=void 0;const nn={verbose:1e3,info:2e3,warning:4e3,error:5e3,fatal:6e3},rn={none:new class{log(uo,hn,fn){}},console:new class{log(uo,hn,fn){console.log(`${this.color(uo)} ${fn?"\x1B[35m"+fn+"\x1B[0m ":""}${hn}`)}color(uo){switch(uo){case"verbose":return"\x1B[34;40mv\x1B[0m";case"info":return"\x1B[32mi\x1B[0m";case"warning":return"\x1B[30;43mw\x1B[0m";case"error":return"\x1B[31;40me\x1B[0m";case"fatal":return"\x1B[101mf\x1B[0m";default:throw new Error(`unsupported severity: ${uo}`)}}}},on={provider:"console",minimalSeverity:"warning",logDateTime:!0,logSourceLocation:!1};let an={"":on};function sn(uo,hn,fn,co){if(hn===void 0)return lo=uo,{verbose:sn.verbose.bind(null,lo),info:sn.info.bind(null,lo),warning:sn.warning.bind(null,lo),error:sn.error.bind(null,lo),fatal:sn.fatal.bind(null,lo)};if(fn===void 0)un(uo,hn);else if(typeof fn=="number"&&co===void 0)un(uo,hn);else if(typeof fn=="string"&&co===void 0)un(uo,fn,0,hn);else{if(typeof fn!="string"||typeof co!="number")throw new TypeError("input is valid");un(uo,fn,0,hn)}var lo}function un(uo,hn,fn,co){const lo=an[co||""]||an[""];nn[uo]<nn[lo.minimalSeverity]||(lo.logDateTime&&(hn=`${new Date().toISOString()}|${hn}`),lo.logSourceLocation,rn[lo.provider].log(uo,hn,co))}(function(uo){function hn(co){an={},fn("",co||{})}function fn(co,lo){if(co==="*")hn(lo);else{const fo=an[co]||on;an[co]={provider:lo.provider||fo.provider,minimalSeverity:lo.minimalSeverity||fo.minimalSeverity,logDateTime:lo.logDateTime===void 0?fo.logDateTime:lo.logDateTime,logSourceLocation:lo.logSourceLocation===void 0?fo.logSourceLocation:lo.logSourceLocation}}}uo.verbose=function(co,lo){uo("verbose",co,lo)},uo.info=function(co,lo){uo("info",co,lo)},uo.warning=function(co,lo){uo("warning",co,lo)},uo.error=function(co,lo){uo("error",co,lo)},uo.fatal=function(co,lo){uo("fatal",co,lo)},uo.reset=hn,uo.set=fn,uo.setWithEnv=function(co){const lo={};co.logLevel&&(lo.minimalSeverity=co.logLevel),fn("",lo)}})(sn||(sn={})),st.Logger=sn;class Xr{constructor(hn,fn,co,lo,fo,ho){this.category=hn,this.name=fn,this.startTime=co,this.endCallback=lo,this.timer=fo,this.ctx=ho}end(){return this.endCallback(this)}async checkTimer(){if(this.ctx===void 0||this.timer===void 0)throw new Error("No webgl timer found");return this.ctx.endTimer(),this.ctx.waitForQueryAndGetTime(this.timer)}}class to{constructor(hn,fn,co,lo){this.category=hn,this.name=fn,this.startTime=co,this.endTime=lo}}st.Profiler=class{static create(uo){return uo===void 0?new this:new this(uo.maxNumberEvents,uo.flushBatchSize,uo.flushIntervalInMilliseconds)}constructor(uo,hn,fn){this._started=!1,this._flushPointer=0,this._started=!1,this._maxNumberEvents=uo===void 0?1e4:uo,this._flushBatchSize=hn===void 0?10:hn,this._flushIntervalInMilliseconds=fn===void 0?5e3:fn}start(){this._started=!0,this._timingEvents=[],this._flushTime=(0,st.now)(),this._flushPointer=0}stop(){for(this._started=!1;this._flushPointer<this._timingEvents.length;this._flushPointer++)this.logOneEvent(this._timingEvents[this._flushPointer])}event(uo,hn,fn,co){const lo=this._started?this.begin(uo,hn,co):void 0;let fo=!1;const ho=fn();if(ho&&typeof ho.then=="function")return fo=!0,new Promise((mo,Uo)=>{ho.then(async _d=>{lo&&await lo.end(),mo(_d)},async _d=>{lo&&await lo.end(),Uo(_d)})});if(!fo&&lo){const mo=lo.end();if(mo&&typeof mo.then=="function")return new Promise((Uo,_d)=>{mo.then(()=>{Uo(ho)},tp=>{_d(tp)})})}return ho}begin(uo,hn,fn){if(!this._started)throw new Error("profiler is not started yet");if(fn===void 0){const co=(0,st.now)();return this.flush(co),new Xr(uo,hn,co,lo=>this.endSync(lo))}{const co=fn.beginTimer();return new Xr(uo,hn,0,async lo=>this.end(lo),co,fn)}}async end(uo){const hn=await uo.checkTimer();this._timingEvents.length<this._maxNumberEvents&&(this._timingEvents.push(new to(uo.category,uo.name,uo.startTime,hn)),this.flush(hn))}endSync(uo){const hn=(0,st.now)();this._timingEvents.length<this._maxNumberEvents&&(this._timingEvents.push(new to(uo.category,uo.name,uo.startTime,hn)),this.flush(hn))}logOneEvent(uo){st.Logger.verbose(`Profiler.${uo.category}`,`${(uo.endTime-uo.startTime).toFixed(2)}ms on event '${uo.name}' at ${uo.endTime.toFixed(2)}`)}flush(uo){if(this._timingEvents.length-this._flushPointer>=this._flushBatchSize||uo-this._flushTime>=this._flushIntervalInMilliseconds){for(const hn=this._flushPointer;this._flushPointer<hn+this._flushBatchSize&&this._flushPointer<this._timingEvents.length;this._flushPointer++)this.logOneEvent(this._timingEvents[this._flushPointer]);this._flushTime=(0,st.now)()}}get started(){return this._started}},st.now=typeof performance<"u"&&performance.now?()=>performance.now():Date.now},2644:(Mt,st,nn)=>{Object.defineProperty(st,"__esModule",{value:!0}),st.Model=void 0;const rn=nn(5686),on=nn(1446),an=nn(7070),sn=nn(9395),un=nn(2517);var Xr=sn.onnxruntime.experimental.fbs;st.Model=class{constructor(){}load(to,uo,hn){if(!hn)try{return void this.loadFromOnnxFormat(to,uo)}catch(fn){if(hn!==void 0)throw fn}this.loadFromOrtFormat(to,uo)}loadFromOnnxFormat(to,uo){const hn=on.onnx.ModelProto.decode(to);if(un.LongUtil.longToNumber(hn.irVersion)<3)throw new Error("only support ONNX model with IR_VERSION>=3");this._opsets=hn.opsetImport.map(fn=>({domain:fn.domain,version:un.LongUtil.longToNumber(fn.version)})),this._graph=an.Graph.from(hn.graph,uo)}loadFromOrtFormat(to,uo){const hn=new rn.flatbuffers.ByteBuffer(to),fn=Xr.InferenceSession.getRootAsInferenceSession(hn).model();if(un.LongUtil.longToNumber(fn.irVersion())<3)throw new Error("only support ONNX model with IR_VERSION>=3");this._opsets=[];for(let co=0;co<fn.opsetImportLength();co++){const lo=fn.opsetImport(co);this._opsets.push({domain:lo==null?void 0:lo.domain(),version:un.LongUtil.longToNumber(lo.version())})}this._graph=an.Graph.from(fn.graph(),uo)}get graph(){return this._graph}get opsets(){return this._opsets}}},782:(Mt,st)=>{Object.defineProperty(st,"__esModule",{value:!0}),st.FLOAT_TYPES=st.INT_TYPES=st.NUMBER_TYPES=void 0,st.NUMBER_TYPES=["float32","float64","int32","int16","int8","uint16","uint32","uint8"],st.INT_TYPES=["int32","int16","int8","uint16","uint32","uint8"],st.FLOAT_TYPES=["float32","float64"]},1047:(Mt,st)=>{function nn(rn,on){if(on.endsWith("+")){const an=Number.parseInt(on.substring(0,on.length-1),10);return!isNaN(an)&&an<=rn}if(on.split("-").length===2){const an=on.split("-"),sn=Number.parseInt(an[0],10),un=Number.parseInt(an[1],10);return!isNaN(sn)&&!isNaN(un)&&sn<=rn&&rn<=un}return Number.parseInt(on,10)===rn}Object.defineProperty(st,"__esModule",{value:!0}),st.resolveOperator=void 0,st.resolveOperator=function(rn,on,an){for(const sn of an){const un=sn[0],Xr=sn[1],to=sn[2],uo=sn[3],hn=sn[4];if(rn.opType===un){for(const fn of on)if((fn.domain===Xr||fn.domain==="ai.onnx"&&Xr==="")&&nn(fn.version,to))return{opImpl:uo,opInit:hn}}}throw new TypeError(`cannot resolve operator '${rn.opType}' with opsets: ${on.map(sn=>`${sn.domain||"ai.onnx"} v${sn.version}`).join(", ")}`)}},9395:(Mt,st,nn)=>{Object.defineProperty(st,"__esModule",{value:!0}),st.onnxruntime=void 0;const rn=nn(5686);var on,an;on=st.onnxruntime||(st.onnxruntime={}),function(sn){(function(un){un[un.UNDEFINED=0]="UNDEFINED",un[un.FLOAT=1]="FLOAT",un[un.INT=2]="INT",un[un.STRING=3]="STRING",un[un.TENSOR=4]="TENSOR",un[un.GRAPH=5]="GRAPH",un[un.FLOATS=6]="FLOATS",un[un.INTS=7]="INTS",un[un.STRINGS=8]="STRINGS",un[un.TENSORS=9]="TENSORS",un[un.GRAPHS=10]="GRAPHS",un[un.SPARSE_TENSOR=11]="SPARSE_TENSOR",un[un.SPARSE_TENSORS=12]="SPARSE_TENSORS"})(sn.AttributeType||(sn.AttributeType={}))}((an=on.experimental||(on.experimental={})).fbs||(an.fbs={})),function(sn){(function(un){(function(Xr){(function(to){to[to.UNKNOWN=0]="UNKNOWN",to[to.VALUE=1]="VALUE",to[to.PARAM=2]="PARAM"})(Xr.DimensionValueType||(Xr.DimensionValueType={}))})(un.fbs||(un.fbs={}))})(sn.experimental||(sn.experimental={}))}(st.onnxruntime||(st.onnxruntime={})),function(sn){(function(un){(function(Xr){(function(to){to[to.UNDEFINED=0]="UNDEFINED",to[to.FLOAT=1]="FLOAT",to[to.UINT8=2]="UINT8",to[to.INT8=3]="INT8",to[to.UINT16=4]="UINT16",to[to.INT16=5]="INT16",to[to.INT32=6]="INT32",to[to.INT64=7]="INT64",to[to.STRING=8]="STRING",to[to.BOOL=9]="BOOL",to[to.FLOAT16=10]="FLOAT16",to[to.DOUBLE=11]="DOUBLE",to[to.UINT32=12]="UINT32",to[to.UINT64=13]="UINT64",to[to.COMPLEX64=14]="COMPLEX64",to[to.COMPLEX128=15]="COMPLEX128",to[to.BFLOAT16=16]="BFLOAT16"})(Xr.TensorDataType||(Xr.TensorDataType={}))})(un.fbs||(un.fbs={}))})(sn.experimental||(sn.experimental={}))}(st.onnxruntime||(st.onnxruntime={})),function(sn){(function(un){(function(Xr){(function(to){to[to.Primitive=0]="Primitive",to[to.Fused=1]="Fused"})(Xr.NodeType||(Xr.NodeType={}))})(un.fbs||(un.fbs={}))})(sn.experimental||(sn.experimental={}))}(st.onnxruntime||(st.onnxruntime={})),function(sn){(function(un){(function(Xr){(function(to){to[to.NONE=0]="NONE",to[to.tensor_type=1]="tensor_type",to[to.sequence_type=2]="sequence_type",to[to.map_type=3]="map_type"})(Xr.TypeInfoValue||(Xr.TypeInfoValue={}))})(un.fbs||(un.fbs={}))})(sn.experimental||(sn.experimental={}))}(st.onnxruntime||(st.onnxruntime={})),function(sn){(function(un){(function(Xr){class to{constructor(){this.bb=null,this.bb_pos=0}__init(hn,fn){return this.bb_pos=hn,this.bb=fn,this}static getRootAsShape(hn,fn){return(fn||new to).__init(hn.readInt32(hn.position())+hn.position(),hn)}static getSizePrefixedRootAsShape(hn,fn){return hn.setPosition(hn.position()+rn.flatbuffers.SIZE_PREFIX_LENGTH),(fn||new to).__init(hn.readInt32(hn.position())+hn.position(),hn)}dim(hn,fn){let co=this.bb.__offset(this.bb_pos,4);return co?(fn||new sn.experimental.fbs.Dimension).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+co)+4*hn),this.bb):null}dimLength(){let hn=this.bb.__offset(this.bb_pos,4);return hn?this.bb.__vector_len(this.bb_pos+hn):0}static startShape(hn){hn.startObject(1)}static addDim(hn,fn){hn.addFieldOffset(0,fn,0)}static createDimVector(hn,fn){hn.startVector(4,fn.length,4);for(let co=fn.length-1;co>=0;co--)hn.addOffset(fn[co]);return hn.endVector()}static startDimVector(hn,fn){hn.startVector(4,fn,4)}static endShape(hn){return hn.endObject()}static createShape(hn,fn){return to.startShape(hn),to.addDim(hn,fn),to.endShape(hn)}}Xr.Shape=to})(un.fbs||(un.fbs={}))})(sn.experimental||(sn.experimental={}))}(st.onnxruntime||(st.onnxruntime={})),function(sn){(function(un){(function(Xr){class to{constructor(){this.bb=null,this.bb_pos=0}__init(hn,fn){return this.bb_pos=hn,this.bb=fn,this}static getRootAsDimension(hn,fn){return(fn||new to).__init(hn.readInt32(hn.position())+hn.position(),hn)}static getSizePrefixedRootAsDimension(hn,fn){return hn.setPosition(hn.position()+rn.flatbuffers.SIZE_PREFIX_LENGTH),(fn||new to).__init(hn.readInt32(hn.position())+hn.position(),hn)}value(hn){let fn=this.bb.__offset(this.bb_pos,4);return fn?(hn||new sn.experimental.fbs.DimensionValue).__init(this.bb.__indirect(this.bb_pos+fn),this.bb):null}denotation(hn){let fn=this.bb.__offset(this.bb_pos,6);return fn?this.bb.__string(this.bb_pos+fn,hn):null}static startDimension(hn){hn.startObject(2)}static addValue(hn,fn){hn.addFieldOffset(0,fn,0)}static addDenotation(hn,fn){hn.addFieldOffset(1,fn,0)}static endDimension(hn){return hn.endObject()}static createDimension(hn,fn,co){return to.startDimension(hn),to.addValue(hn,fn),to.addDenotation(hn,co),to.endDimension(hn)}}Xr.Dimension=to})(un.fbs||(un.fbs={}))})(sn.experimental||(sn.experimental={}))}(st.onnxruntime||(st.onnxruntime={})),function(sn){(function(un){(function(Xr){class to{constructor(){this.bb=null,this.bb_pos=0}__init(hn,fn){return this.bb_pos=hn,this.bb=fn,this}static getRootAsDimensionValue(hn,fn){return(fn||new to).__init(hn.readInt32(hn.position())+hn.position(),hn)}static getSizePrefixedRootAsDimensionValue(hn,fn){return hn.setPosition(hn.position()+rn.flatbuffers.SIZE_PREFIX_LENGTH),(fn||new to).__init(hn.readInt32(hn.position())+hn.position(),hn)}dimType(){let hn=this.bb.__offset(this.bb_pos,4);return hn?this.bb.readInt8(this.bb_pos+hn):sn.experimental.fbs.DimensionValueType.UNKNOWN}dimValue(){let hn=this.bb.__offset(this.bb_pos,6);return hn?this.bb.readInt64(this.bb_pos+hn):this.bb.createLong(0,0)}dimParam(hn){let fn=this.bb.__offset(this.bb_pos,8);return fn?this.bb.__string(this.bb_pos+fn,hn):null}static startDimensionValue(hn){hn.startObject(3)}static addDimType(hn,fn){hn.addFieldInt8(0,fn,sn.experimental.fbs.DimensionValueType.UNKNOWN)}static addDimValue(hn,fn){hn.addFieldInt64(1,fn,hn.createLong(0,0))}static addDimParam(hn,fn){hn.addFieldOffset(2,fn,0)}static endDimensionValue(hn){return hn.endObject()}static createDimensionValue(hn,fn,co,lo){return to.startDimensionValue(hn),to.addDimType(hn,fn),to.addDimValue(hn,co),to.addDimParam(hn,lo),to.endDimensionValue(hn)}}Xr.DimensionValue=to})(un.fbs||(un.fbs={}))})(sn.experimental||(sn.experimental={}))}(st.onnxruntime||(st.onnxruntime={})),function(sn){(function(un){(function(Xr){class to{constructor(){this.bb=null,this.bb_pos=0}__init(hn,fn){return this.bb_pos=hn,this.bb=fn,this}static getRootAsTensorTypeAndShape(hn,fn){return(fn||new to).__init(hn.readInt32(hn.position())+hn.position(),hn)}static getSizePrefixedRootAsTensorTypeAndShape(hn,fn){return hn.setPosition(hn.position()+rn.flatbuffers.SIZE_PREFIX_LENGTH),(fn||new to).__init(hn.readInt32(hn.position())+hn.position(),hn)}elemType(){let hn=this.bb.__offset(this.bb_pos,4);return hn?this.bb.readInt32(this.bb_pos+hn):sn.experimental.fbs.TensorDataType.UNDEFINED}shape(hn){let fn=this.bb.__offset(this.bb_pos,6);return fn?(hn||new sn.experimental.fbs.Shape).__init(this.bb.__indirect(this.bb_pos+fn),this.bb):null}static startTensorTypeAndShape(hn){hn.startObject(2)}static addElemType(hn,fn){hn.addFieldInt32(0,fn,sn.experimental.fbs.TensorDataType.UNDEFINED)}static addShape(hn,fn){hn.addFieldOffset(1,fn,0)}static endTensorTypeAndShape(hn){return hn.endObject()}static createTensorTypeAndShape(hn,fn,co){return to.startTensorTypeAndShape(hn),to.addElemType(hn,fn),to.addShape(hn,co),to.endTensorTypeAndShape(hn)}}Xr.TensorTypeAndShape=to})(un.fbs||(un.fbs={}))})(sn.experimental||(sn.experimental={}))}(st.onnxruntime||(st.onnxruntime={})),function(sn){(function(un){(function(Xr){class to{constructor(){this.bb=null,this.bb_pos=0}__init(hn,fn){return this.bb_pos=hn,this.bb=fn,this}static getRootAsMapType(hn,fn){return(fn||new to).__init(hn.readInt32(hn.position())+hn.position(),hn)}static getSizePrefixedRootAsMapType(hn,fn){return hn.setPosition(hn.position()+rn.flatbuffers.SIZE_PREFIX_LENGTH),(fn||new to).__init(hn.readInt32(hn.position())+hn.position(),hn)}keyType(){let hn=this.bb.__offset(this.bb_pos,4);return hn?this.bb.readInt32(this.bb_pos+hn):sn.experimental.fbs.TensorDataType.UNDEFINED}valueType(hn){let fn=this.bb.__offset(this.bb_pos,6);return fn?(hn||new sn.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+fn),this.bb):null}static startMapType(hn){hn.startObject(2)}static addKeyType(hn,fn){hn.addFieldInt32(0,fn,sn.experimental.fbs.TensorDataType.UNDEFINED)}static addValueType(hn,fn){hn.addFieldOffset(1,fn,0)}static endMapType(hn){return hn.endObject()}static createMapType(hn,fn,co){return to.startMapType(hn),to.addKeyType(hn,fn),to.addValueType(hn,co),to.endMapType(hn)}}Xr.MapType=to})(un.fbs||(un.fbs={}))})(sn.experimental||(sn.experimental={}))}(st.onnxruntime||(st.onnxruntime={})),function(sn){(function(un){(function(Xr){class to{constructor(){this.bb=null,this.bb_pos=0}__init(hn,fn){return this.bb_pos=hn,this.bb=fn,this}static getRootAsSequenceType(hn,fn){return(fn||new to).__init(hn.readInt32(hn.position())+hn.position(),hn)}static getSizePrefixedRootAsSequenceType(hn,fn){return hn.setPosition(hn.position()+rn.flatbuffers.SIZE_PREFIX_LENGTH),(fn||new to).__init(hn.readInt32(hn.position())+hn.position(),hn)}elemType(hn){let fn=this.bb.__offset(this.bb_pos,4);return fn?(hn||new sn.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+fn),this.bb):null}static startSequenceType(hn){hn.startObject(1)}static addElemType(hn,fn){hn.addFieldOffset(0,fn,0)}static endSequenceType(hn){return hn.endObject()}static createSequenceType(hn,fn){return to.startSequenceType(hn),to.addElemType(hn,fn),to.endSequenceType(hn)}}Xr.SequenceType=to})(un.fbs||(un.fbs={}))})(sn.experimental||(sn.experimental={}))}(st.onnxruntime||(st.onnxruntime={})),function(sn){(function(un){(un.fbs||(un.fbs={})).EdgeEnd=class{constructor(){this.bb=null,this.bb_pos=0}__init(Xr,to){return this.bb_pos=Xr,this.bb=to,this}nodeIndex(){return this.bb.readUint32(this.bb_pos)}srcArgIndex(){return this.bb.readInt32(this.bb_pos+4)}dstArgIndex(){return this.bb.readInt32(this.bb_pos+8)}static createEdgeEnd(Xr,to,uo,hn){return Xr.prep(4,12),Xr.writeInt32(hn),Xr.writeInt32(uo),Xr.writeInt32(to),Xr.offset()}}})(sn.experimental||(sn.experimental={}))}(st.onnxruntime||(st.onnxruntime={})),function(sn){(function(un){(function(Xr){class to{constructor(){this.bb=null,this.bb_pos=0}__init(hn,fn){return this.bb_pos=hn,this.bb=fn,this}static getRootAsNodeEdge(hn,fn){return(fn||new to).__init(hn.readInt32(hn.position())+hn.position(),hn)}static getSizePrefixedRootAsNodeEdge(hn,fn){return hn.setPosition(hn.position()+rn.flatbuffers.SIZE_PREFIX_LENGTH),(fn||new to).__init(hn.readInt32(hn.position())+hn.position(),hn)}nodeIndex(){let hn=this.bb.__offset(this.bb_pos,4);return hn?this.bb.readUint32(this.bb_pos+hn):0}inputEdges(hn,fn){let co=this.bb.__offset(this.bb_pos,6);return co?(fn||new sn.experimental.fbs.EdgeEnd).__init(this.bb.__vector(this.bb_pos+co)+12*hn,this.bb):null}inputEdgesLength(){let hn=this.bb.__offset(this.bb_pos,6);return hn?this.bb.__vector_len(this.bb_pos+hn):0}outputEdges(hn,fn){let co=this.bb.__offset(this.bb_pos,8);return co?(fn||new sn.experimental.fbs.EdgeEnd).__init(this.bb.__vector(this.bb_pos+co)+12*hn,this.bb):null}outputEdgesLength(){let hn=this.bb.__offset(this.bb_pos,8);return hn?this.bb.__vector_len(this.bb_pos+hn):0}static startNodeEdge(hn){hn.startObject(3)}static addNodeIndex(hn,fn){hn.addFieldInt32(0,fn,0)}static addInputEdges(hn,fn){hn.addFieldOffset(1,fn,0)}static startInputEdgesVector(hn,fn){hn.startVector(12,fn,4)}static addOutputEdges(hn,fn){hn.addFieldOffset(2,fn,0)}static startOutputEdgesVector(hn,fn){hn.startVector(12,fn,4)}static endNodeEdge(hn){return hn.endObject()}static createNodeEdge(hn,fn,co,lo){return to.startNodeEdge(hn),to.addNodeIndex(hn,fn),to.addInputEdges(hn,co),to.addOutputEdges(hn,lo),to.endNodeEdge(hn)}}Xr.NodeEdge=to})(un.fbs||(un.fbs={}))})(sn.experimental||(sn.experimental={}))}(st.onnxruntime||(st.onnxruntime={})),function(sn){(function(un){(function(Xr){class to{constructor(){this.bb=null,this.bb_pos=0}__init(hn,fn){return this.bb_pos=hn,this.bb=fn,this}static getRootAsNode(hn,fn){return(fn||new to).__init(hn.readInt32(hn.position())+hn.position(),hn)}static getSizePrefixedRootAsNode(hn,fn){return hn.setPosition(hn.position()+rn.flatbuffers.SIZE_PREFIX_LENGTH),(fn||new to).__init(hn.readInt32(hn.position())+hn.position(),hn)}name(hn){let fn=this.bb.__offset(this.bb_pos,4);return fn?this.bb.__string(this.bb_pos+fn,hn):null}docString(hn){let fn=this.bb.__offset(this.bb_pos,6);return fn?this.bb.__string(this.bb_pos+fn,hn):null}domain(hn){let fn=this.bb.__offset(this.bb_pos,8);return fn?this.bb.__string(this.bb_pos+fn,hn):null}sinceVersion(){let hn=this.bb.__offset(this.bb_pos,10);return hn?this.bb.readInt32(this.bb_pos+hn):0}index(){let hn=this.bb.__offset(this.bb_pos,12);return hn?this.bb.readUint32(this.bb_pos+hn):0}opType(hn){let fn=this.bb.__offset(this.bb_pos,14);return fn?this.bb.__string(this.bb_pos+fn,hn):null}type(){let hn=this.bb.__offset(this.bb_pos,16);return hn?this.bb.readInt32(this.bb_pos+hn):sn.experimental.fbs.NodeType.Primitive}executionProviderType(hn){let fn=this.bb.__offset(this.bb_pos,18);return fn?this.bb.__string(this.bb_pos+fn,hn):null}inputs(hn,fn){let co=this.bb.__offset(this.bb_pos,20);return co?this.bb.__string(this.bb.__vector(this.bb_pos+co)+4*hn,fn):null}inputsLength(){let hn=this.bb.__offset(this.bb_pos,20);return hn?this.bb.__vector_len(this.bb_pos+hn):0}outputs(hn,fn){let co=this.bb.__offset(this.bb_pos,22);return co?this.bb.__string(this.bb.__vector(this.bb_pos+co)+4*hn,fn):null}outputsLength(){let hn=this.bb.__offset(this.bb_pos,22);return hn?this.bb.__vector_len(this.bb_pos+hn):0}attributes(hn,fn){let co=this.bb.__offset(this.bb_pos,24);return co?(fn||new sn.experimental.fbs.Attribute).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+co)+4*hn),this.bb):null}attributesLength(){let hn=this.bb.__offset(this.bb_pos,24);return hn?this.bb.__vector_len(this.bb_pos+hn):0}inputArgCounts(hn){let fn=this.bb.__offset(this.bb_pos,26);return fn?this.bb.readInt32(this.bb.__vector(this.bb_pos+fn)+4*hn):0}inputArgCountsLength(){let hn=this.bb.__offset(this.bb_pos,26);return hn?this.bb.__vector_len(this.bb_pos+hn):0}inputArgCountsArray(){let hn=this.bb.__offset(this.bb_pos,26);return hn?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+hn),this.bb.__vector_len(this.bb_pos+hn)):null}implicitInputs(hn,fn){let co=this.bb.__offset(this.bb_pos,28);return co?this.bb.__string(this.bb.__vector(this.bb_pos+co)+4*hn,fn):null}implicitInputsLength(){let hn=this.bb.__offset(this.bb_pos,28);return hn?this.bb.__vector_len(this.bb_pos+hn):0}static startNode(hn){hn.startObject(13)}static addName(hn,fn){hn.addFieldOffset(0,fn,0)}static addDocString(hn,fn){hn.addFieldOffset(1,fn,0)}static addDomain(hn,fn){hn.addFieldOffset(2,fn,0)}static addSinceVersion(hn,fn){hn.addFieldInt32(3,fn,0)}static addIndex(hn,fn){hn.addFieldInt32(4,fn,0)}static addOpType(hn,fn){hn.addFieldOffset(5,fn,0)}static addType(hn,fn){hn.addFieldInt32(6,fn,sn.experimental.fbs.NodeType.Primitive)}static addExecutionProviderType(hn,fn){hn.addFieldOffset(7,fn,0)}static addInputs(hn,fn){hn.addFieldOffset(8,fn,0)}static createInputsVector(hn,fn){hn.startVector(4,fn.length,4);for(let co=fn.length-1;co>=0;co--)hn.addOffset(fn[co]);return hn.endVector()}static startInputsVector(hn,fn){hn.startVector(4,fn,4)}static addOutputs(hn,fn){hn.addFieldOffset(9,fn,0)}static createOutputsVector(hn,fn){hn.startVector(4,fn.length,4);for(let co=fn.length-1;co>=0;co--)hn.addOffset(fn[co]);return hn.endVector()}static startOutputsVector(hn,fn){hn.startVector(4,fn,4)}static addAttributes(hn,fn){hn.addFieldOffset(10,fn,0)}static createAttributesVector(hn,fn){hn.startVector(4,fn.length,4);for(let co=fn.length-1;co>=0;co--)hn.addOffset(fn[co]);return hn.endVector()}static startAttributesVector(hn,fn){hn.startVector(4,fn,4)}static addInputArgCounts(hn,fn){hn.addFieldOffset(11,fn,0)}static createInputArgCountsVector(hn,fn){hn.startVector(4,fn.length,4);for(let co=fn.length-1;co>=0;co--)hn.addInt32(fn[co]);return hn.endVector()}static startInputArgCountsVector(hn,fn){hn.startVector(4,fn,4)}static addImplicitInputs(hn,fn){hn.addFieldOffset(12,fn,0)}static createImplicitInputsVector(hn,fn){hn.startVector(4,fn.length,4);for(let co=fn.length-1;co>=0;co--)hn.addOffset(fn[co]);return hn.endVector()}static startImplicitInputsVector(hn,fn){hn.startVector(4,fn,4)}static endNode(hn){return hn.endObject()}static createNode(hn,fn,co,lo,fo,ho,mo,Uo,_d,tp,ep,np,rp,ip){return to.startNode(hn),to.addName(hn,fn),to.addDocString(hn,co),to.addDomain(hn,lo),to.addSinceVersion(hn,fo),to.addIndex(hn,ho),to.addOpType(hn,mo),to.addType(hn,Uo),to.addExecutionProviderType(hn,_d),to.addInputs(hn,tp),to.addOutputs(hn,ep),to.addAttributes(hn,np),to.addInputArgCounts(hn,rp),to.addImplicitInputs(hn,ip),to.endNode(hn)}}Xr.Node=to})(un.fbs||(un.fbs={}))})(sn.experimental||(sn.experimental={}))}(st.onnxruntime||(st.onnxruntime={})),function(sn){(function(un){(function(Xr){class to{constructor(){this.bb=null,this.bb_pos=0}__init(hn,fn){return this.bb_pos=hn,this.bb=fn,this}static getRootAsValueInfo(hn,fn){return(fn||new to).__init(hn.readInt32(hn.position())+hn.position(),hn)}static getSizePrefixedRootAsValueInfo(hn,fn){return hn.setPosition(hn.position()+rn.flatbuffers.SIZE_PREFIX_LENGTH),(fn||new to).__init(hn.readInt32(hn.position())+hn.position(),hn)}name(hn){let fn=this.bb.__offset(this.bb_pos,4);return fn?this.bb.__string(this.bb_pos+fn,hn):null}docString(hn){let fn=this.bb.__offset(this.bb_pos,6);return fn?this.bb.__string(this.bb_pos+fn,hn):null}type(hn){let fn=this.bb.__offset(this.bb_pos,8);return fn?(hn||new sn.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+fn),this.bb):null}static startValueInfo(hn){hn.startObject(3)}static addName(hn,fn){hn.addFieldOffset(0,fn,0)}static addDocString(hn,fn){hn.addFieldOffset(1,fn,0)}static addType(hn,fn){hn.addFieldOffset(2,fn,0)}static endValueInfo(hn){return hn.endObject()}static createValueInfo(hn,fn,co,lo){return to.startValueInfo(hn),to.addName(hn,fn),to.addDocString(hn,co),to.addType(hn,lo),to.endValueInfo(hn)}}Xr.ValueInfo=to})(un.fbs||(un.fbs={}))})(sn.experimental||(sn.experimental={}))}(st.onnxruntime||(st.onnxruntime={})),function(sn){(function(un){(function(Xr){class to{constructor(){this.bb=null,this.bb_pos=0}__init(hn,fn){return this.bb_pos=hn,this.bb=fn,this}static getRootAsTypeInfo(hn,fn){return(fn||new to).__init(hn.readInt32(hn.position())+hn.position(),hn)}static getSizePrefixedRootAsTypeInfo(hn,fn){return hn.setPosition(hn.position()+rn.flatbuffers.SIZE_PREFIX_LENGTH),(fn||new to).__init(hn.readInt32(hn.position())+hn.position(),hn)}denotation(hn){let fn=this.bb.__offset(this.bb_pos,4);return fn?this.bb.__string(this.bb_pos+fn,hn):null}valueType(){let hn=this.bb.__offset(this.bb_pos,6);return hn?this.bb.readUint8(this.bb_pos+hn):sn.experimental.fbs.TypeInfoValue.NONE}value(hn){let fn=this.bb.__offset(this.bb_pos,8);return fn?this.bb.__union(hn,this.bb_pos+fn):null}static startTypeInfo(hn){hn.startObject(3)}static addDenotation(hn,fn){hn.addFieldOffset(0,fn,0)}static addValueType(hn,fn){hn.addFieldInt8(1,fn,sn.experimental.fbs.TypeInfoValue.NONE)}static addValue(hn,fn){hn.addFieldOffset(2,fn,0)}static endTypeInfo(hn){return hn.endObject()}static createTypeInfo(hn,fn,co,lo){return to.startTypeInfo(hn),to.addDenotation(hn,fn),to.addValueType(hn,co),to.addValue(hn,lo),to.endTypeInfo(hn)}}Xr.TypeInfo=to})(un.fbs||(un.fbs={}))})(sn.experimental||(sn.experimental={}))}(st.onnxruntime||(st.onnxruntime={})),function(sn){(function(un){(function(Xr){class to{constructor(){this.bb=null,this.bb_pos=0}__init(hn,fn){return this.bb_pos=hn,this.bb=fn,this}static getRootAsOperatorSetId(hn,fn){return(fn||new to).__init(hn.readInt32(hn.position())+hn.position(),hn)}static getSizePrefixedRootAsOperatorSetId(hn,fn){return hn.setPosition(hn.position()+rn.flatbuffers.SIZE_PREFIX_LENGTH),(fn||new to).__init(hn.readInt32(hn.position())+hn.position(),hn)}domain(hn){let fn=this.bb.__offset(this.bb_pos,4);return fn?this.bb.__string(this.bb_pos+fn,hn):null}version(){let hn=this.bb.__offset(this.bb_pos,6);return hn?this.bb.readInt64(this.bb_pos+hn):this.bb.createLong(0,0)}static startOperatorSetId(hn){hn.startObject(2)}static addDomain(hn,fn){hn.addFieldOffset(0,fn,0)}static addVersion(hn,fn){hn.addFieldInt64(1,fn,hn.createLong(0,0))}static endOperatorSetId(hn){return hn.endObject()}static createOperatorSetId(hn,fn,co){return to.startOperatorSetId(hn),to.addDomain(hn,fn),to.addVersion(hn,co),to.endOperatorSetId(hn)}}Xr.OperatorSetId=to})(un.fbs||(un.fbs={}))})(sn.experimental||(sn.experimental={}))}(st.onnxruntime||(st.onnxruntime={})),function(sn){(function(un){(function(Xr){class to{constructor(){this.bb=null,this.bb_pos=0}__init(hn,fn){return this.bb_pos=hn,this.bb=fn,this}static getRootAsTensor(hn,fn){return(fn||new to).__init(hn.readInt32(hn.position())+hn.position(),hn)}static getSizePrefixedRootAsTensor(hn,fn){return hn.setPosition(hn.position()+rn.flatbuffers.SIZE_PREFIX_LENGTH),(fn||new to).__init(hn.readInt32(hn.position())+hn.position(),hn)}name(hn){let fn=this.bb.__offset(this.bb_pos,4);return fn?this.bb.__string(this.bb_pos+fn,hn):null}docString(hn){let fn=this.bb.__offset(this.bb_pos,6);return fn?this.bb.__string(this.bb_pos+fn,hn):null}dims(hn){let fn=this.bb.__offset(this.bb_pos,8);return fn?this.bb.readInt64(this.bb.__vector(this.bb_pos+fn)+8*hn):this.bb.createLong(0,0)}dimsLength(){let hn=this.bb.__offset(this.bb_pos,8);return hn?this.bb.__vector_len(this.bb_pos+hn):0}dataType(){let hn=this.bb.__offset(this.bb_pos,10);return hn?this.bb.readInt32(this.bb_pos+hn):sn.experimental.fbs.TensorDataType.UNDEFINED}rawData(hn){let fn=this.bb.__offset(this.bb_pos,12);return fn?this.bb.readUint8(this.bb.__vector(this.bb_pos+fn)+hn):0}rawDataLength(){let hn=this.bb.__offset(this.bb_pos,12);return hn?this.bb.__vector_len(this.bb_pos+hn):0}rawDataArray(){let hn=this.bb.__offset(this.bb_pos,12);return hn?new Uint8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+hn),this.bb.__vector_len(this.bb_pos+hn)):null}stringData(hn,fn){let co=this.bb.__offset(this.bb_pos,14);return co?this.bb.__string(this.bb.__vector(this.bb_pos+co)+4*hn,fn):null}stringDataLength(){let hn=this.bb.__offset(this.bb_pos,14);return hn?this.bb.__vector_len(this.bb_pos+hn):0}static startTensor(hn){hn.startObject(6)}static addName(hn,fn){hn.addFieldOffset(0,fn,0)}static addDocString(hn,fn){hn.addFieldOffset(1,fn,0)}static addDims(hn,fn){hn.addFieldOffset(2,fn,0)}static createDimsVector(hn,fn){hn.startVector(8,fn.length,8);for(let co=fn.length-1;co>=0;co--)hn.addInt64(fn[co]);return hn.endVector()}static startDimsVector(hn,fn){hn.startVector(8,fn,8)}static addDataType(hn,fn){hn.addFieldInt32(3,fn,sn.experimental.fbs.TensorDataType.UNDEFINED)}static addRawData(hn,fn){hn.addFieldOffset(4,fn,0)}static createRawDataVector(hn,fn){hn.startVector(1,fn.length,1);for(let co=fn.length-1;co>=0;co--)hn.addInt8(fn[co]);return hn.endVector()}static startRawDataVector(hn,fn){hn.startVector(1,fn,1)}static addStringData(hn,fn){hn.addFieldOffset(5,fn,0)}static createStringDataVector(hn,fn){hn.startVector(4,fn.length,4);for(let co=fn.length-1;co>=0;co--)hn.addOffset(fn[co]);return hn.endVector()}static startStringDataVector(hn,fn){hn.startVector(4,fn,4)}static endTensor(hn){return hn.endObject()}static createTensor(hn,fn,co,lo,fo,ho,mo){return to.startTensor(hn),to.addName(hn,fn),to.addDocString(hn,co),to.addDims(hn,lo),to.addDataType(hn,fo),to.addRawData(hn,ho),to.addStringData(hn,mo),to.endTensor(hn)}}Xr.Tensor=to})(un.fbs||(un.fbs={}))})(sn.experimental||(sn.experimental={}))}(st.onnxruntime||(st.onnxruntime={})),function(sn){(function(un){(function(Xr){class to{constructor(){this.bb=null,this.bb_pos=0}__init(hn,fn){return this.bb_pos=hn,this.bb=fn,this}static getRootAsSparseTensor(hn,fn){return(fn||new to).__init(hn.readInt32(hn.position())+hn.position(),hn)}static getSizePrefixedRootAsSparseTensor(hn,fn){return hn.setPosition(hn.position()+rn.flatbuffers.SIZE_PREFIX_LENGTH),(fn||new to).__init(hn.readInt32(hn.position())+hn.position(),hn)}values(hn){let fn=this.bb.__offset(this.bb_pos,4);return fn?(hn||new sn.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+fn),this.bb):null}indices(hn){let fn=this.bb.__offset(this.bb_pos,6);return fn?(hn||new sn.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+fn),this.bb):null}dims(hn){let fn=this.bb.__offset(this.bb_pos,8);return fn?this.bb.readInt64(this.bb.__vector(this.bb_pos+fn)+8*hn):this.bb.createLong(0,0)}dimsLength(){let hn=this.bb.__offset(this.bb_pos,8);return hn?this.bb.__vector_len(this.bb_pos+hn):0}static startSparseTensor(hn){hn.startObject(3)}static addValues(hn,fn){hn.addFieldOffset(0,fn,0)}static addIndices(hn,fn){hn.addFieldOffset(1,fn,0)}static addDims(hn,fn){hn.addFieldOffset(2,fn,0)}static createDimsVector(hn,fn){hn.startVector(8,fn.length,8);for(let co=fn.length-1;co>=0;co--)hn.addInt64(fn[co]);return hn.endVector()}static startDimsVector(hn,fn){hn.startVector(8,fn,8)}static endSparseTensor(hn){return hn.endObject()}static createSparseTensor(hn,fn,co,lo){return to.startSparseTensor(hn),to.addValues(hn,fn),to.addIndices(hn,co),to.addDims(hn,lo),to.endSparseTensor(hn)}}Xr.SparseTensor=to})(un.fbs||(un.fbs={}))})(sn.experimental||(sn.experimental={}))}(st.onnxruntime||(st.onnxruntime={})),function(sn){(function(un){(function(Xr){class to{constructor(){this.bb=null,this.bb_pos=0}__init(hn,fn){return this.bb_pos=hn,this.bb=fn,this}static getRootAsAttribute(hn,fn){return(fn||new to).__init(hn.readInt32(hn.position())+hn.position(),hn)}static getSizePrefixedRootAsAttribute(hn,fn){return hn.setPosition(hn.position()+rn.flatbuffers.SIZE_PREFIX_LENGTH),(fn||new to).__init(hn.readInt32(hn.position())+hn.position(),hn)}name(hn){let fn=this.bb.__offset(this.bb_pos,4);return fn?this.bb.__string(this.bb_pos+fn,hn):null}docString(hn){let fn=this.bb.__offset(this.bb_pos,6);return fn?this.bb.__string(this.bb_pos+fn,hn):null}type(){let hn=this.bb.__offset(this.bb_pos,8);return hn?this.bb.readInt32(this.bb_pos+hn):sn.experimental.fbs.AttributeType.UNDEFINED}f(){let hn=this.bb.__offset(this.bb_pos,10);return hn?this.bb.readFloat32(this.bb_pos+hn):0}i(){let hn=this.bb.__offset(this.bb_pos,12);return hn?this.bb.readInt64(this.bb_pos+hn):this.bb.createLong(0,0)}s(hn){let fn=this.bb.__offset(this.bb_pos,14);return fn?this.bb.__string(this.bb_pos+fn,hn):null}t(hn){let fn=this.bb.__offset(this.bb_pos,16);return fn?(hn||new sn.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+fn),this.bb):null}g(hn){let fn=this.bb.__offset(this.bb_pos,18);return fn?(hn||new sn.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb_pos+fn),this.bb):null}floats(hn){let fn=this.bb.__offset(this.bb_pos,20);return fn?this.bb.readFloat32(this.bb.__vector(this.bb_pos+fn)+4*hn):0}floatsLength(){let hn=this.bb.__offset(this.bb_pos,20);return hn?this.bb.__vector_len(this.bb_pos+hn):0}floatsArray(){let hn=this.bb.__offset(this.bb_pos,20);return hn?new Float32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+hn),this.bb.__vector_len(this.bb_pos+hn)):null}ints(hn){let fn=this.bb.__offset(this.bb_pos,22);return fn?this.bb.readInt64(this.bb.__vector(this.bb_pos+fn)+8*hn):this.bb.createLong(0,0)}intsLength(){let hn=this.bb.__offset(this.bb_pos,22);return hn?this.bb.__vector_len(this.bb_pos+hn):0}strings(hn,fn){let co=this.bb.__offset(this.bb_pos,24);return co?this.bb.__string(this.bb.__vector(this.bb_pos+co)+4*hn,fn):null}stringsLength(){let hn=this.bb.__offset(this.bb_pos,24);return hn?this.bb.__vector_len(this.bb_pos+hn):0}tensors(hn,fn){let co=this.bb.__offset(this.bb_pos,26);return co?(fn||new sn.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+co)+4*hn),this.bb):null}tensorsLength(){let hn=this.bb.__offset(this.bb_pos,26);return hn?this.bb.__vector_len(this.bb_pos+hn):0}graphs(hn,fn){let co=this.bb.__offset(this.bb_pos,28);return co?(fn||new sn.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+co)+4*hn),this.bb):null}graphsLength(){let hn=this.bb.__offset(this.bb_pos,28);return hn?this.bb.__vector_len(this.bb_pos+hn):0}static startAttribute(hn){hn.startObject(13)}static addName(hn,fn){hn.addFieldOffset(0,fn,0)}static addDocString(hn,fn){hn.addFieldOffset(1,fn,0)}static addType(hn,fn){hn.addFieldInt32(2,fn,sn.experimental.fbs.AttributeType.UNDEFINED)}static addF(hn,fn){hn.addFieldFloat32(3,fn,0)}static addI(hn,fn){hn.addFieldInt64(4,fn,hn.createLong(0,0))}static addS(hn,fn){hn.addFieldOffset(5,fn,0)}static addT(hn,fn){hn.addFieldOffset(6,fn,0)}static addG(hn,fn){hn.addFieldOffset(7,fn,0)}static addFloats(hn,fn){hn.addFieldOffset(8,fn,0)}static createFloatsVector(hn,fn){hn.startVector(4,fn.length,4);for(let co=fn.length-1;co>=0;co--)hn.addFloat32(fn[co]);return hn.endVector()}static startFloatsVector(hn,fn){hn.startVector(4,fn,4)}static addInts(hn,fn){hn.addFieldOffset(9,fn,0)}static createIntsVector(hn,fn){hn.startVector(8,fn.length,8);for(let co=fn.length-1;co>=0;co--)hn.addInt64(fn[co]);return hn.endVector()}static startIntsVector(hn,fn){hn.startVector(8,fn,8)}static addStrings(hn,fn){hn.addFieldOffset(10,fn,0)}static createStringsVector(hn,fn){hn.startVector(4,fn.length,4);for(let co=fn.length-1;co>=0;co--)hn.addOffset(fn[co]);return hn.endVector()}static startStringsVector(hn,fn){hn.startVector(4,fn,4)}static addTensors(hn,fn){hn.addFieldOffset(11,fn,0)}static createTensorsVector(hn,fn){hn.startVector(4,fn.length,4);for(let co=fn.length-1;co>=0;co--)hn.addOffset(fn[co]);return hn.endVector()}static startTensorsVector(hn,fn){hn.startVector(4,fn,4)}static addGraphs(hn,fn){hn.addFieldOffset(12,fn,0)}static createGraphsVector(hn,fn){hn.startVector(4,fn.length,4);for(let co=fn.length-1;co>=0;co--)hn.addOffset(fn[co]);return hn.endVector()}static startGraphsVector(hn,fn){hn.startVector(4,fn,4)}static endAttribute(hn){return hn.endObject()}static createAttribute(hn,fn,co,lo,fo,ho,mo,Uo,_d,tp,ep,np,rp,ip){return to.startAttribute(hn),to.addName(hn,fn),to.addDocString(hn,co),to.addType(hn,lo),to.addF(hn,fo),to.addI(hn,ho),to.addS(hn,mo),to.addT(hn,Uo),to.addG(hn,_d),to.addFloats(hn,tp),to.addInts(hn,ep),to.addStrings(hn,np),to.addTensors(hn,rp),to.addGraphs(hn,ip),to.endAttribute(hn)}}Xr.Attribute=to})(un.fbs||(un.fbs={}))})(sn.experimental||(sn.experimental={}))}(st.onnxruntime||(st.onnxruntime={})),function(sn){(function(un){(function(Xr){class to{constructor(){this.bb=null,this.bb_pos=0}__init(hn,fn){return this.bb_pos=hn,this.bb=fn,this}static getRootAsGraph(hn,fn){return(fn||new to).__init(hn.readInt32(hn.position())+hn.position(),hn)}static getSizePrefixedRootAsGraph(hn,fn){return hn.setPosition(hn.position()+rn.flatbuffers.SIZE_PREFIX_LENGTH),(fn||new to).__init(hn.readInt32(hn.position())+hn.position(),hn)}initializers(hn,fn){let co=this.bb.__offset(this.bb_pos,4);return co?(fn||new sn.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+co)+4*hn),this.bb):null}initializersLength(){let hn=this.bb.__offset(this.bb_pos,4);return hn?this.bb.__vector_len(this.bb_pos+hn):0}nodeArgs(hn,fn){let co=this.bb.__offset(this.bb_pos,6);return co?(fn||new sn.experimental.fbs.ValueInfo).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+co)+4*hn),this.bb):null}nodeArgsLength(){let hn=this.bb.__offset(this.bb_pos,6);return hn?this.bb.__vector_len(this.bb_pos+hn):0}nodes(hn,fn){let co=this.bb.__offset(this.bb_pos,8);return co?(fn||new sn.experimental.fbs.Node).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+co)+4*hn),this.bb):null}nodesLength(){let hn=this.bb.__offset(this.bb_pos,8);return hn?this.bb.__vector_len(this.bb_pos+hn):0}maxNodeIndex(){let hn=this.bb.__offset(this.bb_pos,10);return hn?this.bb.readUint32(this.bb_pos+hn):0}nodeEdges(hn,fn){let co=this.bb.__offset(this.bb_pos,12);return co?(fn||new sn.experimental.fbs.NodeEdge).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+co)+4*hn),this.bb):null}nodeEdgesLength(){let hn=this.bb.__offset(this.bb_pos,12);return hn?this.bb.__vector_len(this.bb_pos+hn):0}inputs(hn,fn){let co=this.bb.__offset(this.bb_pos,14);return co?this.bb.__string(this.bb.__vector(this.bb_pos+co)+4*hn,fn):null}inputsLength(){let hn=this.bb.__offset(this.bb_pos,14);return hn?this.bb.__vector_len(this.bb_pos+hn):0}outputs(hn,fn){let co=this.bb.__offset(this.bb_pos,16);return co?this.bb.__string(this.bb.__vector(this.bb_pos+co)+4*hn,fn):null}outputsLength(){let hn=this.bb.__offset(this.bb_pos,16);return hn?this.bb.__vector_len(this.bb_pos+hn):0}sparseInitializers(hn,fn){let co=this.bb.__offset(this.bb_pos,18);return co?(fn||new sn.experimental.fbs.SparseTensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+co)+4*hn),this.bb):null}sparseInitializersLength(){let hn=this.bb.__offset(this.bb_pos,18);return hn?this.bb.__vector_len(this.bb_pos+hn):0}static startGraph(hn){hn.startObject(8)}static addInitializers(hn,fn){hn.addFieldOffset(0,fn,0)}static createInitializersVector(hn,fn){hn.startVector(4,fn.length,4);for(let co=fn.length-1;co>=0;co--)hn.addOffset(fn[co]);return hn.endVector()}static startInitializersVector(hn,fn){hn.startVector(4,fn,4)}static addNodeArgs(hn,fn){hn.addFieldOffset(1,fn,0)}static createNodeArgsVector(hn,fn){hn.startVector(4,fn.length,4);for(let co=fn.length-1;co>=0;co--)hn.addOffset(fn[co]);return hn.endVector()}static startNodeArgsVector(hn,fn){hn.startVector(4,fn,4)}static addNodes(hn,fn){hn.addFieldOffset(2,fn,0)}static createNodesVector(hn,fn){hn.startVector(4,fn.length,4);for(let co=fn.length-1;co>=0;co--)hn.addOffset(fn[co]);return hn.endVector()}static startNodesVector(hn,fn){hn.startVector(4,fn,4)}static addMaxNodeIndex(hn,fn){hn.addFieldInt32(3,fn,0)}static addNodeEdges(hn,fn){hn.addFieldOffset(4,fn,0)}static createNodeEdgesVector(hn,fn){hn.startVector(4,fn.length,4);for(let co=fn.length-1;co>=0;co--)hn.addOffset(fn[co]);return hn.endVector()}static startNodeEdgesVector(hn,fn){hn.startVector(4,fn,4)}static addInputs(hn,fn){hn.addFieldOffset(5,fn,0)}static createInputsVector(hn,fn){hn.startVector(4,fn.length,4);for(let co=fn.length-1;co>=0;co--)hn.addOffset(fn[co]);return hn.endVector()}static startInputsVector(hn,fn){hn.startVector(4,fn,4)}static addOutputs(hn,fn){hn.addFieldOffset(6,fn,0)}static createOutputsVector(hn,fn){hn.startVector(4,fn.length,4);for(let co=fn.length-1;co>=0;co--)hn.addOffset(fn[co]);return hn.endVector()}static startOutputsVector(hn,fn){hn.startVector(4,fn,4)}static addSparseInitializers(hn,fn){hn.addFieldOffset(7,fn,0)}static createSparseInitializersVector(hn,fn){hn.startVector(4,fn.length,4);for(let co=fn.length-1;co>=0;co--)hn.addOffset(fn[co]);return hn.endVector()}static startSparseInitializersVector(hn,fn){hn.startVector(4,fn,4)}static endGraph(hn){return hn.endObject()}static createGraph(hn,fn,co,lo,fo,ho,mo,Uo,_d){return to.startGraph(hn),to.addInitializers(hn,fn),to.addNodeArgs(hn,co),to.addNodes(hn,lo),to.addMaxNodeIndex(hn,fo),to.addNodeEdges(hn,ho),to.addInputs(hn,mo),to.addOutputs(hn,Uo),to.addSparseInitializers(hn,_d),to.endGraph(hn)}}Xr.Graph=to})(un.fbs||(un.fbs={}))})(sn.experimental||(sn.experimental={}))}(st.onnxruntime||(st.onnxruntime={})),function(sn){(function(un){(function(Xr){class to{constructor(){this.bb=null,this.bb_pos=0}__init(hn,fn){return this.bb_pos=hn,this.bb=fn,this}static getRootAsModel(hn,fn){return(fn||new to).__init(hn.readInt32(hn.position())+hn.position(),hn)}static getSizePrefixedRootAsModel(hn,fn){return hn.setPosition(hn.position()+rn.flatbuffers.SIZE_PREFIX_LENGTH),(fn||new to).__init(hn.readInt32(hn.position())+hn.position(),hn)}irVersion(){let hn=this.bb.__offset(this.bb_pos,4);return hn?this.bb.readInt64(this.bb_pos+hn):this.bb.createLong(0,0)}opsetImport(hn,fn){let co=this.bb.__offset(this.bb_pos,6);return co?(fn||new sn.experimental.fbs.OperatorSetId).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+co)+4*hn),this.bb):null}opsetImportLength(){let hn=this.bb.__offset(this.bb_pos,6);return hn?this.bb.__vector_len(this.bb_pos+hn):0}producerName(hn){let fn=this.bb.__offset(this.bb_pos,8);return fn?this.bb.__string(this.bb_pos+fn,hn):null}producerVersion(hn){let fn=this.bb.__offset(this.bb_pos,10);return fn?this.bb.__string(this.bb_pos+fn,hn):null}domain(hn){let fn=this.bb.__offset(this.bb_pos,12);return fn?this.bb.__string(this.bb_pos+fn,hn):null}modelVersion(){let hn=this.bb.__offset(this.bb_pos,14);return hn?this.bb.readInt64(this.bb_pos+hn):this.bb.createLong(0,0)}docString(hn){let fn=this.bb.__offset(this.bb_pos,16);return fn?this.bb.__string(this.bb_pos+fn,hn):null}graph(hn){let fn=this.bb.__offset(this.bb_pos,18);return fn?(hn||new sn.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb_pos+fn),this.bb):null}graphDocString(hn){let fn=this.bb.__offset(this.bb_pos,20);return fn?this.bb.__string(this.bb_pos+fn,hn):null}static startModel(hn){hn.startObject(9)}static addIrVersion(hn,fn){hn.addFieldInt64(0,fn,hn.createLong(0,0))}static addOpsetImport(hn,fn){hn.addFieldOffset(1,fn,0)}static createOpsetImportVector(hn,fn){hn.startVector(4,fn.length,4);for(let co=fn.length-1;co>=0;co--)hn.addOffset(fn[co]);return hn.endVector()}static startOpsetImportVector(hn,fn){hn.startVector(4,fn,4)}static addProducerName(hn,fn){hn.addFieldOffset(2,fn,0)}static addProducerVersion(hn,fn){hn.addFieldOffset(3,fn,0)}static addDomain(hn,fn){hn.addFieldOffset(4,fn,0)}static addModelVersion(hn,fn){hn.addFieldInt64(5,fn,hn.createLong(0,0))}static addDocString(hn,fn){hn.addFieldOffset(6,fn,0)}static addGraph(hn,fn){hn.addFieldOffset(7,fn,0)}static addGraphDocString(hn,fn){hn.addFieldOffset(8,fn,0)}static endModel(hn){return hn.endObject()}static createModel(hn,fn,co,lo,fo,ho,mo,Uo,_d,tp){return to.startModel(hn),to.addIrVersion(hn,fn),to.addOpsetImport(hn,co),to.addProducerName(hn,lo),to.addProducerVersion(hn,fo),to.addDomain(hn,ho),to.addModelVersion(hn,mo),to.addDocString(hn,Uo),to.addGraph(hn,_d),to.addGraphDocString(hn,tp),to.endModel(hn)}}Xr.Model=to})(un.fbs||(un.fbs={}))})(sn.experimental||(sn.experimental={}))}(st.onnxruntime||(st.onnxruntime={})),function(sn){(function(un){(function(Xr){class to{constructor(){this.bb=null,this.bb_pos=0}__init(hn,fn){return this.bb_pos=hn,this.bb=fn,this}static getRootAsKernelCreateInfos(hn,fn){return(fn||new to).__init(hn.readInt32(hn.position())+hn.position(),hn)}static getSizePrefixedRootAsKernelCreateInfos(hn,fn){return hn.setPosition(hn.position()+rn.flatbuffers.SIZE_PREFIX_LENGTH),(fn||new to).__init(hn.readInt32(hn.position())+hn.position(),hn)}nodeIndices(hn){let fn=this.bb.__offset(this.bb_pos,4);return fn?this.bb.readUint32(this.bb.__vector(this.bb_pos+fn)+4*hn):0}nodeIndicesLength(){let hn=this.bb.__offset(this.bb_pos,4);return hn?this.bb.__vector_len(this.bb_pos+hn):0}nodeIndicesArray(){let hn=this.bb.__offset(this.bb_pos,4);return hn?new Uint32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+hn),this.bb.__vector_len(this.bb_pos+hn)):null}kernelDefHashes(hn){let fn=this.bb.__offset(this.bb_pos,6);return fn?this.bb.readUint64(this.bb.__vector(this.bb_pos+fn)+8*hn):this.bb.createLong(0,0)}kernelDefHashesLength(){let hn=this.bb.__offset(this.bb_pos,6);return hn?this.bb.__vector_len(this.bb_pos+hn):0}static startKernelCreateInfos(hn){hn.startObject(2)}static addNodeIndices(hn,fn){hn.addFieldOffset(0,fn,0)}static createNodeIndicesVector(hn,fn){hn.startVector(4,fn.length,4);for(let co=fn.length-1;co>=0;co--)hn.addInt32(fn[co]);return hn.endVector()}static startNodeIndicesVector(hn,fn){hn.startVector(4,fn,4)}static addKernelDefHashes(hn,fn){hn.addFieldOffset(1,fn,0)}static createKernelDefHashesVector(hn,fn){hn.startVector(8,fn.length,8);for(let co=fn.length-1;co>=0;co--)hn.addInt64(fn[co]);return hn.endVector()}static startKernelDefHashesVector(hn,fn){hn.startVector(8,fn,8)}static endKernelCreateInfos(hn){return hn.endObject()}static createKernelCreateInfos(hn,fn,co){return to.startKernelCreateInfos(hn),to.addNodeIndices(hn,fn),to.addKernelDefHashes(hn,co),to.endKernelCreateInfos(hn)}}Xr.KernelCreateInfos=to})(un.fbs||(un.fbs={}))})(sn.experimental||(sn.experimental={}))}(st.onnxruntime||(st.onnxruntime={})),function(sn){(function(un){(function(Xr){class to{constructor(){this.bb=null,this.bb_pos=0}__init(hn,fn){return this.bb_pos=hn,this.bb=fn,this}static getRootAsSubGraphSessionState(hn,fn){return(fn||new to).__init(hn.readInt32(hn.position())+hn.position(),hn)}static getSizePrefixedRootAsSubGraphSessionState(hn,fn){return hn.setPosition(hn.position()+rn.flatbuffers.SIZE_PREFIX_LENGTH),(fn||new to).__init(hn.readInt32(hn.position())+hn.position(),hn)}graphId(hn){let fn=this.bb.__offset(this.bb_pos,4);return fn?this.bb.__string(this.bb_pos+fn,hn):null}sessionState(hn){let fn=this.bb.__offset(this.bb_pos,6);return fn?(hn||new sn.experimental.fbs.SessionState).__init(this.bb.__indirect(this.bb_pos+fn),this.bb):null}static startSubGraphSessionState(hn){hn.startObject(2)}static addGraphId(hn,fn){hn.addFieldOffset(0,fn,0)}static addSessionState(hn,fn){hn.addFieldOffset(1,fn,0)}static endSubGraphSessionState(hn){let fn=hn.endObject();return hn.requiredField(fn,4),fn}static createSubGraphSessionState(hn,fn,co){return to.startSubGraphSessionState(hn),to.addGraphId(hn,fn),to.addSessionState(hn,co),to.endSubGraphSessionState(hn)}}Xr.SubGraphSessionState=to})(un.fbs||(un.fbs={}))})(sn.experimental||(sn.experimental={}))}(st.onnxruntime||(st.onnxruntime={})),function(sn){(function(un){(function(Xr){class to{constructor(){this.bb=null,this.bb_pos=0}__init(hn,fn){return this.bb_pos=hn,this.bb=fn,this}static getRootAsSessionState(hn,fn){return(fn||new to).__init(hn.readInt32(hn.position())+hn.position(),hn)}static getSizePrefixedRootAsSessionState(hn,fn){return hn.setPosition(hn.position()+rn.flatbuffers.SIZE_PREFIX_LENGTH),(fn||new to).__init(hn.readInt32(hn.position())+hn.position(),hn)}kernels(hn){let fn=this.bb.__offset(this.bb_pos,4);return fn?(hn||new sn.experimental.fbs.KernelCreateInfos).__init(this.bb.__indirect(this.bb_pos+fn),this.bb):null}subGraphSessionStates(hn,fn){let co=this.bb.__offset(this.bb_pos,6);return co?(fn||new sn.experimental.fbs.SubGraphSessionState).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+co)+4*hn),this.bb):null}subGraphSessionStatesLength(){let hn=this.bb.__offset(this.bb_pos,6);return hn?this.bb.__vector_len(this.bb_pos+hn):0}static startSessionState(hn){hn.startObject(2)}static addKernels(hn,fn){hn.addFieldOffset(0,fn,0)}static addSubGraphSessionStates(hn,fn){hn.addFieldOffset(1,fn,0)}static createSubGraphSessionStatesVector(hn,fn){hn.startVector(4,fn.length,4);for(let co=fn.length-1;co>=0;co--)hn.addOffset(fn[co]);return hn.endVector()}static startSubGraphSessionStatesVector(hn,fn){hn.startVector(4,fn,4)}static endSessionState(hn){return hn.endObject()}static createSessionState(hn,fn,co){return to.startSessionState(hn),to.addKernels(hn,fn),to.addSubGraphSessionStates(hn,co),to.endSessionState(hn)}}Xr.SessionState=to})(un.fbs||(un.fbs={}))})(sn.experimental||(sn.experimental={}))}(st.onnxruntime||(st.onnxruntime={})),function(sn){(function(un){(function(Xr){class to{constructor(){this.bb=null,this.bb_pos=0}__init(hn,fn){return this.bb_pos=hn,this.bb=fn,this}static getRootAsInferenceSession(hn,fn){return(fn||new to).__init(hn.readInt32(hn.position())+hn.position(),hn)}static getSizePrefixedRootAsInferenceSession(hn,fn){return hn.setPosition(hn.position()+rn.flatbuffers.SIZE_PREFIX_LENGTH),(fn||new to).__init(hn.readInt32(hn.position())+hn.position(),hn)}static bufferHasIdentifier(hn){return hn.__has_identifier("ORTM")}ortVersion(hn){let fn=this.bb.__offset(this.bb_pos,4);return fn?this.bb.__string(this.bb_pos+fn,hn):null}model(hn){let fn=this.bb.__offset(this.bb_pos,6);return fn?(hn||new sn.experimental.fbs.Model).__init(this.bb.__indirect(this.bb_pos+fn),this.bb):null}sessionState(hn){let fn=this.bb.__offset(this.bb_pos,8);return fn?(hn||new sn.experimental.fbs.SessionState).__init(this.bb.__indirect(this.bb_pos+fn),this.bb):null}static startInferenceSession(hn){hn.startObject(3)}static addOrtVersion(hn,fn){hn.addFieldOffset(0,fn,0)}static addModel(hn,fn){hn.addFieldOffset(1,fn,0)}static addSessionState(hn,fn){hn.addFieldOffset(2,fn,0)}static endInferenceSession(hn){return hn.endObject()}static finishInferenceSessionBuffer(hn,fn){hn.finish(fn,"ORTM")}static finishSizePrefixedInferenceSessionBuffer(hn,fn){hn.finish(fn,"ORTM",!0)}static createInferenceSession(hn,fn,co,lo){return to.startInferenceSession(hn),to.addOrtVersion(hn,fn),to.addModel(hn,co),to.addSessionState(hn,lo),to.endInferenceSession(hn)}}Xr.InferenceSession=to})(un.fbs||(un.fbs={}))})(sn.experimental||(sn.experimental={}))}(st.onnxruntime||(st.onnxruntime={}))},7448:(Mt,st,nn)=>{Object.defineProperty(st,"__esModule",{value:!0}),st.OnnxjsSessionHandler=void 0;const rn=nn(1670),on=nn(9162);st.OnnxjsSessionHandler=class{constructor(an){this.session=an,this.inputNames=this.session.inputNames,this.outputNames=this.session.outputNames}async dispose(){}async run(an,sn,un){const Xr=new Map;for(const hn in an)if(Object.hasOwnProperty.call(an,hn)){const fn=an[hn];Xr.set(hn,new on.Tensor(fn.dims,fn.type,void 0,void 0,fn.data))}const to=await this.session.run(Xr),uo={};return to.forEach((hn,fn)=>{uo[fn]=new rn.Tensor(hn.type,hn.data,hn.dims)}),uo}startProfiling(){this.session.startProfiling()}endProfiling(){this.session.endProfiling()}}},6919:(Mt,st,nn)=>{Object.defineProperty(st,"__esModule",{value:!0}),st.Session=void 0;const rn=nn(7067),on=nn(1296),an=nn(7091),sn=nn(1036),un=nn(6231),Xr=nn(2644);st.Session=class{constructor(to={}){this._initialized=!1,this.backendHint=to.backendHint,this.profiler=un.Profiler.create(to.profiler),this.context={profiler:this.profiler,graphInputTypes:[],graphInputDims:[]}}get inputNames(){return this._model.graph.getInputNames()}get outputNames(){return this._model.graph.getOutputNames()}startProfiling(){this.profiler.start()}endProfiling(){this.profiler.stop()}async loadModel(to,uo,hn){await this.profiler.event("session","Session.loadModel",async()=>{const fn=await(0,an.resolveBackend)(this.backendHint);if(this.sessionHandler=fn.createSessionHandler(this.context),this._model=new Xr.Model,typeof to=="string"){const co=to.endsWith(".ort");if(typeof fetch>"u"){const lo=await(0,on.promisify)(rn.readFile)(to);this.initialize(lo,co)}else{const lo=await fetch(to),fo=await lo.arrayBuffer();this.initialize(new Uint8Array(fo),co)}}else if(ArrayBuffer.isView(to))this.initialize(to);else{const co=new Uint8Array(to,uo||0,hn||to.byteLength);this.initialize(co)}})}initialize(to,uo){if(this._initialized)throw new Error("already initialized");this.profiler.event("session","Session.initialize",()=>{const hn=this.sessionHandler.transformGraph?this.sessionHandler:void 0;this._model.load(to,hn,uo),this.sessionHandler.onGraphInitialized&&this.sessionHandler.onGraphInitialized(this._model.graph),this.initializeOps(this._model.graph),this._executionPlan=new sn.ExecutionPlan(this._model.graph,this._ops,this.profiler)}),this._initialized=!0}async run(to){if(!this._initialized)throw new Error("session not initialized yet");return this.profiler.event("session","Session.run",async()=>{const uo=this.normalizeAndValidateInputs(to),hn=await this._executionPlan.execute(this.sessionHandler,uo);return this.createOutput(hn)})}normalizeAndValidateInputs(to){const uo=this._model.graph.getInputNames();if(Array.isArray(to)){if(to.length!==uo.length)throw new Error(`incorrect input array length: expected ${uo.length} but got ${to.length}`)}else{if(to.size!==uo.length)throw new Error(`incorrect input map size: expected ${uo.length} but got ${to.size}`);const hn=new Array(to.size);let fn=0;for(let co=0;co<uo.length;++co){const lo=to.get(uo[co]);if(!lo)throw new Error(`missing input tensor for: '${name}'`);hn[fn++]=lo}to=hn}if(this.context.graphInputTypes&&this.context.graphInputTypes.length!==0&&this.context.graphInputDims&&this.context.graphInputDims.length!==0)this.validateInputTensorDims(this.context.graphInputDims,to,!1);else{const hn=this._model.graph.getInputIndices(),fn=this._model.graph.getValues(),co=new Array(hn.length);for(let lo=0;lo<hn.length;++lo){const fo=fn[hn[lo]];co[lo]=fo.type.shape.dims,this.context.graphInputTypes.push(fo.type.tensorType),this.context.graphInputDims.push(to[lo].dims)}this.validateInputTensorDims(co,to,!0)}return this.validateInputTensorTypes(this.context.graphInputTypes,to),to}validateInputTensorTypes(to,uo){for(let hn=0;hn<uo.length;hn++){const fn=to[hn],co=uo[hn].type;if(fn!==co)throw new Error(`input tensor[${hn}] check failed: expected type '${fn}' but got ${co}`)}}validateInputTensorDims(to,uo,hn){for(let fn=0;fn<uo.length;fn++){const co=to[fn],lo=uo[fn].dims;if(!this.compareTensorDims(co,lo,hn))throw new Error(`input tensor[${fn}] check failed: expected shape '[${co.join(",")}]' but got [${lo.join(",")}]`)}}compareTensorDims(to,uo,hn){if(to.length!==uo.length)return!1;for(let fn=0;fn<to.length;++fn)if(to[fn]!==uo[fn]&&(!hn||to[fn]!==0))return!1;return!0}createOutput(to){const uo=this._model.graph.getOutputNames();if(to.length!==uo.length)throw new Error("expected number of outputs do not match number of generated outputs");const hn=new Map;for(let fn=0;fn<uo.length;++fn)hn.set(uo[fn],to[fn]);return hn}initializeOps(to){const uo=to.getNodes();this._ops=new Array(uo.length);for(let hn=0;hn<uo.length;hn++)this._ops[hn]=this.sessionHandler.resolve(uo[hn],this._model.opsets,to)}}},9162:function(Mt,st,nn){var rn=this&&this.__importDefault||function(fo){return fo&&fo.__esModule?fo:{default:fo}};Object.defineProperty(st,"__esModule",{value:!0}),st.Tensor=void 0;const on=nn(3442),an=rn(nn(3720)),sn=nn(1446),un=nn(9395),Xr=nn(2517);var to=un.onnxruntime.experimental.fbs;class uo{get data(){if(this.cache===void 0){const ho=this.dataProvider(this.dataId);if(ho.length!==this.size)throw new Error("Length of data provided by the Data Provider is inconsistent with the dims of this Tensor.");this.cache=ho}return this.cache}get stringData(){if(this.type!=="string")throw new TypeError("data type is not string");return this.data}get integerData(){switch(this.type){case"uint8":case"int8":case"uint16":case"int16":case"int32":case"uint32":case"bool":return this.data;default:throw new TypeError("data type is not integer (uint8, int8, uint16, int16, int32, uint32, bool)")}}get floatData(){switch(this.type){case"float32":case"float64":return this.data;default:throw new TypeError("data type is not float (float32, float64)")}}get numberData(){if(this.type!=="string")return this.data;throw new TypeError("type cannot be non-number (string)")}get(ho){return this.data[Xr.ShapeUtil.indicesToOffset(ho,this.strides)]}set(ho,mo){this.data[Xr.ShapeUtil.indicesToOffset(ho,this.strides)]=mo}async getData(){return this.cache===void 0&&(this.cache=await this.asyncDataProvider(this.dataId)),this.cache}get strides(){return this._strides||(this._strides=Xr.ShapeUtil.computeStrides(this.dims)),this._strides}constructor(ho,mo,Uo,_d,tp,ep=on.Guid.create()){this.dims=ho,this.type=mo,this.dataProvider=Uo,this.asyncDataProvider=_d,this.cache=tp,this.dataId=ep,this.size=Xr.ShapeUtil.validateDimsAndCalcSize(ho);const np=this.size,rp=Uo===void 0&&_d===void 0&&tp===void 0;if(tp!==void 0&&tp.length!==np)throw new RangeError("Input dims doesn't match data length.");if(mo==="string"){if(!(tp===void 0||Array.isArray(tp)&&tp.every(ip=>typeof ip=="string")))throw new TypeError("cache should be a string array");rp&&(this.cache=new Array(np))}else{if(tp!==void 0){const ip=fn(mo);if(!(tp instanceof ip))throw new TypeError(`cache should be type ${ip.name}`)}if(rp){const ip=new ArrayBuffer(np*function(op){switch(op){case"bool":case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;case"float64":return 8;default:throw new Error(`cannot calculate sizeof() on type ${op}`)}}(mo));this.cache=function(op,ap){return new(fn(ap))(op)}(ip,mo)}}}static fromProto(ho){if(!ho)throw new Error("cannot construct Value from an empty tensor");const mo=Xr.ProtoUtil.tensorDataTypeFromProto(ho.dataType),Uo=Xr.ProtoUtil.tensorDimsFromProto(ho.dims),_d=new uo(Uo,mo);if(mo==="string")ho.stringData.forEach((tp,ep)=>{_d.data[ep]=(0,Xr.decodeUtf8String)(tp)});else if(ho.rawData&&typeof ho.rawData.byteLength=="number"&&ho.rawData.byteLength>0){const tp=_d.data,ep=new DataView(ho.rawData.buffer,ho.rawData.byteOffset,ho.rawData.byteLength),np=hn(ho.dataType),rp=ho.rawData.byteLength/np;if(ho.rawData.byteLength%np!=0)throw new Error("invalid buffer length");if(tp.length!==rp)throw new Error("buffer length mismatch");for(let ip=0;ip<rp;ip++){const op=lo(ep,ho.dataType,ip*np);tp[ip]=op}}else{let tp;switch(ho.dataType){case sn.onnx.TensorProto.DataType.FLOAT:tp=ho.floatData;break;case sn.onnx.TensorProto.DataType.INT32:case sn.onnx.TensorProto.DataType.INT16:case sn.onnx.TensorProto.DataType.UINT16:case sn.onnx.TensorProto.DataType.INT8:case sn.onnx.TensorProto.DataType.UINT8:case sn.onnx.TensorProto.DataType.BOOL:tp=ho.int32Data;break;case sn.onnx.TensorProto.DataType.INT64:tp=ho.int64Data;break;case sn.onnx.TensorProto.DataType.DOUBLE:tp=ho.doubleData;break;case sn.onnx.TensorProto.DataType.UINT32:case sn.onnx.TensorProto.DataType.UINT64:tp=ho.uint64Data;break;default:throw new Error("unspecific error")}if(tp==null)throw new Error("failed to populate data from a tensorproto value");const ep=_d.data;if(ep.length!==tp.length)throw new Error("array length mismatch");for(let np=0;np<tp.length;np++){const rp=tp[np];an.default.isLong(rp)?ep[np]=co(rp,ho.dataType):ep[np]=rp}}return _d}static fromData(ho,mo,Uo){return new uo(mo,Uo,void 0,void 0,ho)}static fromOrtTensor(ho){if(!ho)throw new Error("cannot construct Value from an empty tensor");const mo=Xr.ProtoUtil.tensorDimsFromORTFormat(ho),Uo=Xr.ProtoUtil.tensorDataTypeFromProto(ho.dataType()),_d=new uo(mo,Uo);if(Uo==="string")for(let tp=0;tp<ho.stringDataLength();tp++)_d.data[tp]=ho.stringData(tp);else if(ho.rawDataArray()&&typeof ho.rawDataLength()=="number"&&ho.rawDataLength()>0){const tp=_d.data,ep=new DataView(ho.rawDataArray().buffer,ho.rawDataArray().byteOffset,ho.rawDataLength()),np=hn(ho.dataType()),rp=ho.rawDataLength()/np;if(ho.rawDataLength()%np!=0)throw new Error("invalid buffer length");if(tp.length!==rp)throw new Error("buffer length mismatch");for(let ip=0;ip<rp;ip++){const op=lo(ep,ho.dataType(),ip*np);tp[ip]=op}}return _d}}function hn(fo){switch(fo){case sn.onnx.TensorProto.DataType.UINT8:case sn.onnx.TensorProto.DataType.INT8:case sn.onnx.TensorProto.DataType.BOOL:return 1;case sn.onnx.TensorProto.DataType.UINT16:case sn.onnx.TensorProto.DataType.INT16:return 2;case sn.onnx.TensorProto.DataType.FLOAT:case sn.onnx.TensorProto.DataType.INT32:case sn.onnx.TensorProto.DataType.UINT32:return 4;case sn.onnx.TensorProto.DataType.INT64:case sn.onnx.TensorProto.DataType.DOUBLE:case sn.onnx.TensorProto.DataType.UINT64:return 8;default:throw new Error(`cannot calculate sizeof() on type ${sn.onnx.TensorProto.DataType[fo]}`)}}function fn(fo){switch(fo){case"bool":case"uint8":return Uint8Array;case"int8":return Int8Array;case"int16":return Int16Array;case"uint16":return Uint16Array;case"int32":return Int32Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;default:throw new Error("unspecified error")}}function co(fo,ho){if(ho===sn.onnx.TensorProto.DataType.INT64||ho===to.TensorDataType.INT64){if(fo.greaterThanOrEqual(2147483648)||fo.lessThan(-2147483648))throw new TypeError("int64 is not supported")}else{if(ho!==sn.onnx.TensorProto.DataType.UINT32&&ho!==to.TensorDataType.UINT32&&ho!==sn.onnx.TensorProto.DataType.UINT64&&ho!==to.TensorDataType.UINT64)throw new TypeError(`not a LONG type: ${sn.onnx.TensorProto.DataType[ho]}`);if(fo.greaterThanOrEqual(4294967296)||fo.lessThan(0))throw new TypeError("uint64 is not supported")}return fo.toNumber()}function lo(fo,ho,mo){switch(ho){case sn.onnx.TensorProto.DataType.BOOL:case sn.onnx.TensorProto.DataType.UINT8:return fo.getUint8(mo);case sn.onnx.TensorProto.DataType.INT8:return fo.getInt8(mo);case sn.onnx.TensorProto.DataType.UINT16:return fo.getUint16(mo,!0);case sn.onnx.TensorProto.DataType.INT16:return fo.getInt16(mo,!0);case sn.onnx.TensorProto.DataType.FLOAT:return fo.getFloat32(mo,!0);case sn.onnx.TensorProto.DataType.INT32:return fo.getInt32(mo,!0);case sn.onnx.TensorProto.DataType.UINT32:return fo.getUint32(mo,!0);case sn.onnx.TensorProto.DataType.INT64:return co(an.default.fromBits(fo.getUint32(mo,!0),fo.getUint32(mo+4,!0),!1),ho);case sn.onnx.TensorProto.DataType.DOUBLE:return fo.getFloat64(mo,!0);case sn.onnx.TensorProto.DataType.UINT64:return co(an.default.fromBits(fo.getUint32(mo,!0),fo.getUint32(mo+4,!0),!0),ho);default:throw new Error(`cannot read from DataView for type ${sn.onnx.TensorProto.DataType[ho]}`)}}st.Tensor=uo},2517:function(Mt,st,nn){var rn=this&&this.__importDefault||function(ho){return ho&&ho.__esModule?ho:{default:ho}};Object.defineProperty(st,"__esModule",{value:!0}),st.decodeUtf8String=st.MAX_CLIP=st.MIN_CLIP=st.PoolConvUtil=st.ReduceUtil=st.SplitUtil=st.MathUtil=st.ShapeUtil=st.LongUtil=st.ProtoUtil=st.GemmUtil=st.arrayCopyHelper=st.BroadcastUtil=st.MatMulUtil=st.ArrayUtil=st.assert=st.checkInputsShape=void 0;const on=nn(5686),an=rn(nn(3720)),sn=nn(1446),un=nn(9162);st.checkInputsShape=function(ho,...mo){if(!ho||ho.length!==mo.length)return!1;for(let Uo=0;Uo<ho.length;Uo++)if(!ho[Uo].dims||ho[Uo].dims.length!==mo[Uo])return!1;return!0},st.assert=function(ho,mo){if(!ho)throw new Error(typeof mo=="string"?mo:mo())},st.ArrayUtil=class{static arraysEqual(ho,mo){if(ho.length!==mo.length)return!1;for(let Uo=0;Uo<ho.length;Uo++)if(ho[Uo]!==mo[Uo])return!1;return!0}};class Xr{static preprocessInputShapes(mo,Uo){return[mo.length===1?[1,mo[0]]:mo,Uo.length===1?[Uo[0],1]:Uo]}static postprocessOutputShape(mo,Uo,_d){Uo===1&&mo.splice(mo.length-2,1),_d===1&&mo.pop()}static calcMatMulShape(mo,Uo){return mo[1]!==Uo[0]?void 0:[mo[0],Uo[1]]}}st.MatMulUtil=Xr;class to{static calcShape(mo,Uo,_d=!1){const tp=mo.length,ep=Uo.length;if(tp===0)return Uo;if(ep===0)return mo;const np=Math.max(mo.length,Uo.length),rp=new Array(np);if(_d){if(tp<2||ep<2)return;const ip=Xr.calcMatMulShape([mo[tp-2],mo[tp-1]],[Uo[ep-2],Uo[ep-1]]);if(ip===void 0)return;[rp[np-2],rp[np-1]]=ip}for(let ip=_d?3:1;ip<=np;ip++){const op=tp-ip<0?1:mo[tp-ip],ap=ep-ip<0?1:Uo[ep-ip];if(op!==ap&&op>1&&ap>1)return;rp[np-ip]=Math.max(op,ap)}return rp}static index(mo,Uo){const _d=new Array(Uo.length);return to.fillIndex(mo,Uo,_d),_d}static fillIndex(mo,Uo,_d){const tp=mo.length-Uo.length;for(let ep=0;ep<Uo.length;ep++)_d[ep]=mo[tp+ep]%Uo[ep]}static calc(mo,Uo,_d,tp,ep){const np=to.calcShape(mo.dims,Uo.dims);if(np){if(tp&&!fn.areEqual(np,mo.dims))return;const rp=fn.size(np),ip=tp?mo:new un.Tensor(np,ep||mo.type);if(np.length===0)ip.set([],_d(mo.get([]),Uo.get([])));else{const op=new Array(np.length),ap=new Array(mo.dims.length),sp=new Array(Uo.dims.length);let up,pp=0,lp=0,dp=!1,cp=!1;mo.dims.length===0&&(pp=mo.get([]),dp=!0),Uo.dims.length===0&&(lp=Uo.get([]),cp=!0);for(let fp=0;fp<rp;fp++){up=fp;for(let gp=np.length-1;gp>=0;gp--)op[gp]=up%np[gp],up=Math.floor(up/np[gp]);dp||(to.fillIndex(op,mo.dims,ap),pp=mo.get(ap)),cp||(to.fillIndex(op,Uo.dims,sp),lp=Uo.get(sp)),ip.set(op,_d(pp,lp))}}return ip}}static isValidBroadcast(mo,Uo){const _d=mo.length,tp=Uo.length;if(_d>tp)return!1;for(let ep=1;ep<=_d;ep++)if(mo[_d-ep]!==1&&mo[_d-ep]!==Uo[tp-ep])return!1;return!0}static getBroadcastDims(mo,Uo){const _d=mo.length,tp=[];for(let ep=0;ep<_d;ep++){const np=_d-1-ep,rp=mo[np]||1;(Uo[Uo.length-1-ep]||1)>1&&rp===1&&tp.unshift(np)}return tp}}st.BroadcastUtil=to,st.arrayCopyHelper=function(ho,mo,Uo,_d,tp){if(_d<0||_d>=mo.length)throw new Error("sourceIndex out of bounds");if(Uo<0||Uo>=ho.length)throw new Error("targetIndex out of bounds");if(_d+tp>mo.length)throw new Error("source indices to be copied are outside bounds");if(Uo+tp>ho.length)throw new Error("target array is too small to hold result");for(let ep=0;ep<tp;ep++)ho[Uo+ep]=mo[_d+ep]},st.GemmUtil=class{static getShapeOfGemmResult(ho,mo,Uo,_d,tp){if(ho.length!==2||Uo.length!==2)throw new Error("shape need to be of size 2");let ep,np,rp;mo?(ep=ho[1],np=ho[0]):(ep=ho[0],np=ho[1]);let ip=-1;if(_d?(rp=Uo[0],ip=1):(rp=Uo[1],ip=0),Uo[ip]!==np)throw new Error("dimension mismatch");if(ep<=0||rp<=0||np<=0)throw new Error("invalid shape specified");if(tp&&!to.isValidBroadcast(tp,[ep,rp]))throw new Error("gemm: invalid bias shape for broadcast");return[ep,rp,np]}};class uo{static tensorDataTypeFromProto(mo){switch(mo){case sn.onnx.TensorProto.DataType.INT8:return"int8";case sn.onnx.TensorProto.DataType.UINT8:return"uint8";case sn.onnx.TensorProto.DataType.BOOL:return"bool";case sn.onnx.TensorProto.DataType.INT16:return"int16";case sn.onnx.TensorProto.DataType.UINT16:return"uint16";case sn.onnx.TensorProto.DataType.INT32:return"int32";case sn.onnx.TensorProto.DataType.UINT32:return"uint32";case sn.onnx.TensorProto.DataType.FLOAT:return"float32";case sn.onnx.TensorProto.DataType.DOUBLE:return"float64";case sn.onnx.TensorProto.DataType.STRING:return"string";case sn.onnx.TensorProto.DataType.INT64:return"int32";case sn.onnx.TensorProto.DataType.UINT64:return"uint32";default:throw new Error(`unsupported data type: ${sn.onnx.TensorProto.DataType[mo]}`)}}static tensorDataTypeStringToEnum(mo){switch(mo){case"int8":return sn.onnx.TensorProto.DataType.INT8;case"uint8":return sn.onnx.TensorProto.DataType.UINT8;case"bool":return sn.onnx.TensorProto.DataType.BOOL;case"int16":return sn.onnx.TensorProto.DataType.INT16;case"uint16":return sn.onnx.TensorProto.DataType.UINT16;case"int32":return sn.onnx.TensorProto.DataType.INT32;case"uint32":return sn.onnx.TensorProto.DataType.UINT32;case"float32":return sn.onnx.TensorProto.DataType.FLOAT;case"float64":return sn.onnx.TensorProto.DataType.DOUBLE;case"string":return sn.onnx.TensorProto.DataType.STRING;case"int64":return sn.onnx.TensorProto.DataType.INT64;case"uint64":return sn.onnx.TensorProto.DataType.UINT64;default:throw new Error(`unsupported data type: ${mo}`)}}static tensorDimsFromProto(mo){return mo.map(Uo=>an.default.isLong(Uo)?Uo.toNumber():Uo)}static tensorValueTypeFromProto(mo){return{tensorType:uo.tensorDataTypeFromProto(mo.elemType),shape:{dims:uo.tensorDimsFromProto(mo.shape.dim.map(Uo=>Uo.dimValue))}}}static tensorDimsFromORTFormat(mo){const Uo=[];for(let _d=0;_d<mo.dimsLength();_d++)Uo.push(hn.longToNumber(mo.dims(_d)));return Uo}static tensorAttributesFromORTFormat(mo){const Uo=[];for(let _d=0;_d<mo.attributesLength();_d++)Uo.push(mo.attributes(_d));return Uo}}st.ProtoUtil=uo;class hn{static longToNumber(mo,Uo){return an.default.isLong(mo)?mo.toNumber():mo instanceof on.flatbuffers.Long?an.default.fromValue({low:mo.low,high:mo.high,unsigned:Uo!=null&&Uo}).toNumber():mo}static isLong(mo){return an.default.isLong(mo)||mo instanceof on.flatbuffers.Long}}st.LongUtil=hn;class fn{static size(mo){return fn.getSizeFromDimensionRange(mo,0,mo.length)}static sizeFromDimension(mo,Uo){if(Uo<0||Uo>mo.length)throw new Error(`invalid dimension of ${Uo} for sizeFromDimension as Tensor has ${mo.length} dimensions.`);return fn.getSizeFromDimensionRange(mo,Uo,mo.length)}static sizeToDimension(mo,Uo){if(Uo<0||Uo>mo.length)throw new Error(`invalid dimension of ${Uo} for sizeToDimension as Tensor has ${mo.length} dimensions.`);return fn.getSizeFromDimensionRange(mo,0,Uo)}static getSizeFromDimensionRange(mo,Uo,_d){let tp=1;for(let ep=Uo;ep<_d;ep++){if(mo[ep]<=0)throw new Error("cannot get valid size from specified dimension range. Most likely the range contains 0 or negative values in them.");tp*=mo[ep]}return tp}static computeStrides(mo){const Uo=mo.length;if(Uo===0)return[];if(Uo===1)return[1];const _d=new Array(Uo);_d[Uo-1]=1,_d[Uo-2]=mo[Uo-1];for(let tp=Uo-3;tp>=0;--tp)_d[tp]=_d[tp+1]*mo[tp+1];return _d}static transpose(mo){return mo.slice().reverse()}static indicesToOffset(mo,Uo,_d){_d===void 0&&(_d=mo.length);let tp=0;for(let ep=0;ep<_d;++ep)tp+=Uo[ep]*mo[ep];return tp}static offsetToIndices(mo,Uo){const _d=Uo.length;if(_d===0)return[];if(_d===1)return[mo*Uo[0]];const tp=new Array(Uo.length);for(let ep=0;ep<tp.length-1;++ep)tp[ep]=Math.floor(mo/Uo[ep]),mo-=tp[ep]*Uo[ep];return tp[tp.length-1]=mo,tp}static normalizeAxis(mo,Uo){if(mo<-Uo&&mo>=Uo)throw new Error("unsupported axis for this operation.");return mo<0?mo+Uo:mo}static normalizeAxes(mo,Uo){return mo.map(_d=>this.normalizeAxis(_d,Uo))}static incrementIndex(mo,Uo,_d){if(Uo.length===0||mo.length===0)throw new Error("Index incrementing unsupported for scalar Tensor");if(_d===void 0)_d=Uo.length;else if(_d<=0||_d>Uo.length)throw new Error("Incorrect axis to increment on");for(let tp=_d-1;tp>=0&&(mo[tp]++,!(mo[tp]<Uo[tp]));--tp)mo[tp]=0}static calculateReshapedDims(mo,Uo){if(Uo.length===0){if(mo.length===0||fn.size(mo)===1)return[];throw new Error("cannot reshape to a scalar Tensor")}const _d=Uo.length,tp=new Array(_d);let ep=-1,np=1;for(let ip=0;ip<_d;ip++){if(Uo[ip]<-1)throw new Error("a dimension in shape hints cannot be less than -1");if(Uo[ip]===-1){if(ep!==-1)throw new Error("at most one dimension in shape hints can be -1");ep=ip}else{if(Uo[ip]===0){if(ip>=mo.length)throw new Error("the dimension with value zero exceeds the dimension size of the input tensor");tp[ip]=mo[ip]}else tp[ip]=Uo[ip];np*=tp[ip]}}const rp=fn.size(mo);if(ep!==-1){if(rp%np!=0)throw new Error(`the input tensor cannot be reshaped to the requested shape. Input shape: [${mo}] Output shape: [${Uo}]`);tp[ep]=rp/np}else if(np!==rp)throw new Error("reshapedDims and originalDims don't have matching sizes");return tp}static sortBasedOnPerm(mo,Uo){return Uo?Uo.map(_d=>mo[_d]):mo.slice().reverse()}static padShape(mo,Uo){const _d=mo.length;return mo.map((tp,ep)=>tp+Uo[ep]+Uo[ep+_d])}static areEqual(mo,Uo){return mo.length===Uo.length&&mo.every((_d,tp)=>_d===Uo[tp])}static validateDimsAndCalcSize(mo){if(mo.length>6)throw new TypeError("Only rank 0 to 6 is supported for tensor shape.");let Uo=1;for(const _d of mo){if(!Number.isInteger(_d))throw new TypeError(`Invalid shape: ${_d} is not an integer`);if(_d<0||_d>2147483647)throw new TypeError(`Invalid shape: length ${_d} is not allowed`);Uo*=_d}return Uo}static flattenShape(mo,Uo){Uo<0&&(Uo+=mo.length);const _d=mo.reduce((ep,np)=>ep*np,1),tp=mo.slice(Uo).reduce((ep,np)=>ep*np,1);return[_d/tp,tp]}static squeezeShape(mo,Uo){const _d=new Array;Uo=fn.normalizeAxes(Uo,mo.length);for(let tp=0;tp<mo.length;tp++){const ep=Uo.indexOf(tp)>=0;if(ep&&mo[tp]!==1)throw new Error("squeeze an axis of size different than 1");(Uo.length===0&&mo[tp]>1||Uo.length>0&&!ep)&&_d.push(mo[tp])}return _d}static unsqueezeShape(mo,Uo){const _d=new Array(mo.length+Uo.length);_d.fill(0);for(let ep=0;ep<Uo.length;ep++){const np=fn.normalizeAxis(Uo[ep],_d.length);if(np>=_d.length)throw new Error("'axes' has an out of range axis");if(_d[np]!==0)throw new Error("'axes' has a duplicate axis");_d[np]=1}let tp=0;for(let ep=0;ep<_d.length;ep++)_d[ep]===0&&(_d[ep]=mo[tp++]);if(tp!==mo.length)throw new Error("the unsqueezed dimension could not be established");return _d}}st.ShapeUtil=fn,st.MathUtil=class{static sqr(ho,mo,Uo,_d,tp){if(_d<0||_d>=mo.length)throw new Error("sourceIndex out of bounds");if(Uo<0||Uo>=ho.length)throw new Error("targetIndex out of bounds");if(_d+tp>mo.length)throw new Error("source indices to be copied are outside bounds");if(Uo+tp>ho.length)throw new Error("target array is too small to hold result");for(let ep=0;ep<tp;ep++)ho[Uo+ep]+=Math.pow(mo[_d+ep],2)}static axpy(ho,mo,Uo,_d,tp,ep){if(_d<0||_d>=mo.length)throw new Error("sourceIndex out of bounds");if(Uo<0||Uo>=ho.length)throw new Error("targetIndex out of bounds");if(_d+tp>mo.length)throw new Error("source indices to be copied are outside bounds");if(Uo+tp>ho.length)throw new Error("target array is too small to hold result");for(let np=0;np<tp;np++)ho[Uo+np]+=ep*mo[_d+np]}static powx(ho,mo,Uo,_d,tp,ep){if(_d<0||_d>=mo.length)throw new Error("sourceIndex out of bounds");if(Uo<0||Uo>=ho.length)throw new Error("targetIndex out of bounds");if(_d+tp>mo.length)throw new Error("source indices to be copied are outside bounds");if(Uo+tp>ho.length)throw new Error("target array is too small to hold result");for(let np=0;np<tp;np++)ho[Uo+np]=Math.pow(mo[_d+np],ep)}static mul(ho,mo,Uo,_d,tp){if(_d<0||_d>=mo.length)throw new Error("sourceIndex out of bounds");if(Uo<0||Uo>=ho.length)throw new Error("targetIndex out of bounds");if(_d+tp>mo.length)throw new Error("source indices to be copied are outside bounds");if(Uo+tp>ho.length)throw new Error("target array is too small to hold result");for(let ep=0;ep<tp;ep++)ho[Uo+ep]=mo[_d+ep]*ho[Uo+ep]}};class co{static splitShape(mo,Uo,_d,tp){if(_d.length===0){if(!tp)throw new Error("need to know number of outputs when the 'split' attribute is not specified");co.determineSplit(mo[Uo],tp,_d)}const ep=[],np=[0];for(let rp=0;rp<_d.length;++rp){rp!==0&&np.push(np[rp-1]+_d[rp-1]);const ip=mo.slice();ip[Uo]=_d[rp],ep.push(ip)}return[ep,np]}static determineSplit(mo,Uo,_d){if(mo%Uo!=0)throw new Error("cannot split tensor to equal sized parts");for(let tp=0;tp<Uo;++tp)_d.push(mo/Uo)}}st.SplitUtil=co;class lo{static calcReduce(mo,Uo,_d,tp,ep){const np=mo.dims.slice(0);Uo.length===0&&np.forEach((pp,lp)=>Uo.push(lp));const rp=lo.calcReduceShape(np,Uo,!0),ip=fn.size(rp),op=new un.Tensor(rp,mo.type),ap=fn.computeStrides(rp),sp=fn.computeStrides(np),up=new Array(np.length);for(let pp=0;pp<ip;pp++){const lp=fn.offsetToIndices(pp,ap);to.fillIndex(lp,np,up),op.set(lp,lo.calcReduceByAxis(mo.numberData,Uo,np,0,fn.indicesToOffset(up,sp),tp,ep))}return _d?op:new un.Tensor(lo.calcReduceShape(np,Uo,_d),op.type,void 0,void 0,op.data,op.dataId)}static calcReduceByAxis(mo,Uo,_d,tp,ep,np,rp){let ip=0;if(tp>=Uo.length)return np(mo[ep]);const op=Uo[tp],ap=op>=_d.length?1:fn.size(_d.slice(op+1));for(let sp=0;sp<_d[op];sp++)ip=sp===0?lo.calcReduceByAxis(mo,Uo,_d,tp+1,ep,np,rp):rp(ip,lo.calcReduceByAxis(mo,Uo,_d,tp+1,ep,np,rp)),ep+=ap;return ip}static calcReduceShape(mo,Uo,_d){const tp=mo.slice();for(let ep=0;ep<Uo.length;ep++)tp[Uo[ep]]=_d?1:0;return tp.filter(ep=>ep!==0)}}st.ReduceUtil=lo;class fo{static adjustPoolAttributes(mo,Uo,_d,tp,ep,np){if(!mo&&_d.length!==Uo.length-2)throw new Error("length of specified kernel shapes should be 2 less than length of input dimensions");if(mo)for(let rp=0;rp<Uo.length-2;rp++)rp>=_d.length?_d.push(Uo[rp+2]):_d[rp]=Uo[rp+2];for(let rp=0;rp<_d.length;rp++)if(rp<tp.length){if(tp[rp]<0)throw new Error("strides should be greater than or equal to 1")}else tp.push(1);for(let rp=0;rp<_d.length;rp++)if(rp<ep.length){if(ep[rp]<0)throw new Error("dilations should be greater than or equal to 1")}else ep.push(1);for(let rp=0;rp<2*_d.length;rp++)if(rp<np.length){if(np[rp]<0)throw new Error("pad should be greater than or equal to 1")}else np.push(0);for(let rp=0;rp<_d.length;rp++){if(_d[rp]<=0)throw new Error("kernel shapes need to be greater than 0");if(np[rp]>=_d[rp]||np[rp+_d.length]>=_d[rp])throw new Error("pads should be smaller than kernel")}}static adjustPadsBasedOnAutoPad(mo,Uo,_d,tp,ep,np){if(np){if(ep.length!==2*(mo.length-2))throw new Error("length of pads should be twice the length of data dimensions");if(Uo.length!==mo.length-2)throw new Error("length of strides should be the length of data dimensions");if(tp.length!==mo.length-2)throw new Error("length of kernel shapes should be the length of data dimensions");for(let rp=0;rp<mo.length-2;rp++)fo.adjustPadAndReturnShape(mo[rp+2],Uo[rp],_d[rp],tp[rp],ep,rp,rp+mo.length-2,np)}}static computePoolOutputShape(mo,Uo,_d,tp,ep,np,rp){if(Uo.length<=0)throw new Error("input shape must be of size greater than 0");const ip=[Uo[0],Uo[1]];return fo.computeShapeHelper(mo,Uo,ip,_d,tp,ep,np,rp),ip}static computeConvOutputShape(mo,Uo,_d,tp,ep,np,rp){if(mo.length<=0||Uo.length<=0)throw new Error("invalid input tensor dims or invalid filter tensor dims");const ip=[mo[0],Uo[0]];return fo.computeShapeHelper(!1,mo,ip,_d,tp,ep,np,rp),ip}static computeShapeHelper(mo,Uo,_d,tp,ep,np,rp,ip){if(mo)for(let op=0;op<Uo.length-2;op++)_d.push(1);else for(let op=0;op<Uo.length-2;op++)_d.push(fo.adjustPadAndReturnShape(Uo[op+2],tp[op],ep[op],np[op],rp,op,op+Uo.length-2,ip))}static adjustPadAndReturnShape(mo,Uo,_d,tp,ep,np,rp,ip){const op=_d*(tp-1)+1;if(!ip||ip==="NOTSET")return Math.floor((mo+ep[np]+ep[rp]-op)/Uo+1);switch(ip){case"VALID":return ep[np]=0,ep[rp]=0,Math.floor((mo-op)/Uo+1);case"SAME_LOWER":case"SAME_UPPER":if(_d!==1)throw new Error("Dilation not supported for SAME_UPPER or SAME_LOWER");{const ap=((mo+Uo-1)/Uo-1)*Uo+tp-mo;return ep[np]=Math.floor(ip==="SAME_LOWER"?(ap+1)/2:ap/2),ep[rp]=ap-ep[np],Math.floor((mo+ap-tp)/Uo+1)}default:throw new Error("Unsupported AutoPad type")}}}st.PoolConvUtil=fo,st.MIN_CLIP=-34028234663852886e22,st.MAX_CLIP=34028234663852886e22,st.decodeUtf8String=function(ho){return new TextDecoder().decode(ho)}},7967:(Mt,st)=>{Object.defineProperty(st,"__esModule",{value:!0}),st.iterateExtraOptions=void 0,st.iterateExtraOptions=(nn,rn,on,an)=>{if(typeof nn=="object"&&nn!==null){if(on.has(nn))throw new Error("Circular reference in options");on.add(nn)}Object.entries(nn).forEach(([sn,un])=>{const Xr=rn?rn+sn:sn;if(typeof un=="object")(0,st.iterateExtraOptions)(un,Xr+".",on,an);else if(typeof un=="string"||typeof un=="number")an(Xr,un.toString());else{if(typeof un!="boolean")throw new Error("Can't handle extra config type: "+typeof un);an(Xr,un?"1":"0")}})}},2157:function(Mt,st,nn){var rn,on=this&&this.__createBinding||(Object.create?function(ap,sp,up,pp){pp===void 0&&(pp=up);var lp=Object.getOwnPropertyDescriptor(sp,up);lp&&!("get"in lp?!sp.__esModule:lp.writable||lp.configurable)||(lp={enumerable:!0,get:function(){return sp[up]}}),Object.defineProperty(ap,pp,lp)}:function(ap,sp,up,pp){pp===void 0&&(pp=up),ap[pp]=sp[up]}),an=this&&this.__setModuleDefault||(Object.create?function(ap,sp){Object.defineProperty(ap,"default",{enumerable:!0,value:sp})}:function(ap,sp){ap.default=sp}),sn=this&&this.__importStar||function(ap){if(ap&&ap.__esModule)return ap;var sp={};if(ap!=null)for(var up in ap)up!=="default"&&Object.prototype.hasOwnProperty.call(ap,up)&&on(sp,ap,up);return an(sp,ap),sp};Object.defineProperty(st,"__esModule",{value:!0}),st.endProfiling=st.run=st.releaseSession=st.createSession=st.createSessionFinalize=st.createSessionAllocate=st.initOrt=st.initWasm=void 0;const un=nn(1670),Xr=sn(nn(349)),to=nn(6361),uo=()=>!!un.env.wasm.proxy&&typeof document<"u";let hn,fn,co,lo=!1,fo=!1,ho=!1;const mo=[],Uo=[],_d=[],tp=[],ep=[],np=[],rp=()=>{if(lo||!fo||ho||!hn)throw new Error("worker not ready")},ip=ap=>{switch(ap.data.type){case"init-wasm":lo=!1,ap.data.err?(ho=!0,fn[1](ap.data.err)):(fo=!0,fn[0]());break;case"init-ort":ap.data.err?co[1](ap.data.err):co[0]();break;case"create_allocate":ap.data.err?mo.shift()[1](ap.data.err):mo.shift()[0](ap.data.out);break;case"create_finalize":ap.data.err?Uo.shift()[1](ap.data.err):Uo.shift()[0](ap.data.out);break;case"create":ap.data.err?_d.shift()[1](ap.data.err):_d.shift()[0](ap.data.out);break;case"release":ap.data.err?tp.shift()[1](ap.data.err):tp.shift()[0]();break;case"run":ap.data.err?ep.shift()[1](ap.data.err):ep.shift()[0](ap.data.out);break;case"end-profiling":ap.data.err?np.shift()[1](ap.data.err):np.shift()[0]()}},op=typeof document<"u"?(rn=document==null?void 0:document.currentScript)===null||rn===void 0?void 0:rn.src:void 0;st.initWasm=async()=>{if(uo()){if(fo)return;if(lo)throw new Error("multiple calls to 'initWasm()' detected.");if(ho)throw new Error("previous call to 'initWasm()' failed.");return lo=!0,un.env.wasm.wasmPaths===void 0&&op&&op.indexOf("blob:")!==0&&(un.env.wasm.wasmPaths=op.substr(0,+op.lastIndexOf("/")+1)),new Promise((ap,sp)=>{hn==null||hn.terminate(),hn=nn(9710).Z(),hn.onmessage=ip,fn=[ap,sp];const up={type:"init-wasm",in:un.env.wasm};hn.postMessage(up)})}return(0,to.initializeWebAssembly)(un.env.wasm)},st.initOrt=async(ap,sp)=>{if(uo())return rp(),new Promise((up,pp)=>{co=[up,pp];const lp={type:"init-ort",in:{numThreads:ap,loggingLevel:sp}};hn.postMessage(lp)});Xr.initOrt(ap,sp)},st.createSessionAllocate=async ap=>uo()?(rp(),new Promise((sp,up)=>{mo.push([sp,up]);const pp={type:"create_allocate",in:{model:ap}};hn.postMessage(pp,[ap.buffer])})):Xr.createSessionAllocate(ap),st.createSessionFinalize=async(ap,sp)=>uo()?(rp(),new Promise((up,pp)=>{Uo.push([up,pp]);const lp={type:"create_finalize",in:{modeldata:ap,options:sp}};hn.postMessage(lp)})):Xr.createSessionFinalize(ap,sp),st.createSession=async(ap,sp)=>uo()?(rp(),new Promise((up,pp)=>{_d.push([up,pp]);const lp={type:"create",in:{model:ap,options:sp}};hn.postMessage(lp,[ap.buffer])})):Xr.createSession(ap,sp),st.releaseSession=async ap=>{if(uo())return rp(),new Promise((sp,up)=>{tp.push([sp,up]);const pp={type:"release",in:ap};hn.postMessage(pp)});Xr.releaseSession(ap)},st.run=async(ap,sp,up,pp,lp)=>uo()?(rp(),new Promise((dp,cp)=>{ep.push([dp,cp]);const fp={type:"run",in:{sessionId:ap,inputIndices:sp,inputs:up,outputIndices:pp,options:lp}};hn.postMessage(fp,Xr.extractTransferableBuffers(up))})):Xr.run(ap,sp,up,pp,lp),st.endProfiling=async ap=>{if(uo())return rp(),new Promise((sp,up)=>{np.push([sp,up]);const pp={type:"end-profiling",in:ap};hn.postMessage(pp)});Xr.endProfiling(ap)}},586:(Mt,st,nn)=>{Object.defineProperty(st,"__esModule",{value:!0}),st.setRunOptions=void 0;const rn=nn(7967),on=nn(4983),an=nn(6361);st.setRunOptions=sn=>{const un=(0,an.getInstance)();let Xr=0;const to=[],uo=sn||{};try{if((sn==null?void 0:sn.logSeverityLevel)===void 0)uo.logSeverityLevel=2;else if(typeof sn.logSeverityLevel!="number"||!Number.isInteger(sn.logSeverityLevel)||sn.logSeverityLevel<0||sn.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${sn.logSeverityLevel}`);if((sn==null?void 0:sn.logVerbosityLevel)===void 0)uo.logVerbosityLevel=0;else if(typeof sn.logVerbosityLevel!="number"||!Number.isInteger(sn.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${sn.logVerbosityLevel}`);(sn==null?void 0:sn.terminate)===void 0&&(uo.terminate=!1);let hn=0;if((sn==null?void 0:sn.tag)!==void 0&&(hn=(0,on.allocWasmString)(sn.tag,to)),Xr=un._OrtCreateRunOptions(uo.logSeverityLevel,uo.logVerbosityLevel,!!uo.terminate,hn),Xr===0)throw new Error("Can't create run options");return(sn==null?void 0:sn.extra)!==void 0&&(0,rn.iterateExtraOptions)(sn.extra,"",new WeakSet,(fn,co)=>{const lo=(0,on.allocWasmString)(fn,to),fo=(0,on.allocWasmString)(co,to);if(un._OrtAddRunConfigEntry(Xr,lo,fo)!==0)throw new Error(`Can't set a run config entry: ${fn} - ${co}`)}),[Xr,to]}catch(hn){throw Xr!==0&&un._OrtReleaseRunOptions(Xr),to.forEach(un._free),hn}}},2306:(Mt,st,nn)=>{Object.defineProperty(st,"__esModule",{value:!0}),st.OnnxruntimeWebAssemblySessionHandler=void 0;const rn=nn(2806),on=nn(1670),an=nn(2850),sn=nn(2157);let un;st.OnnxruntimeWebAssemblySessionHandler=class{async createSessionAllocate(Xr){const to=await fetch(Xr),uo=await to.arrayBuffer();return(0,sn.createSessionAllocate)(new Uint8Array(uo))}async loadModel(Xr,to){if(un||(await(0,sn.initOrt)(on.env.wasm.numThreads,(uo=>{switch(uo){case"verbose":return 0;case"info":return 1;case"warning":return 2;case"error":return 3;case"fatal":return 4;default:throw new Error(`unsupported logging level: ${uo}`)}})(on.env.logLevel)),un=!0),typeof Xr=="string")if(typeof fetch>"u"){const uo=await(0,an.promisify)(rn.readFile)(Xr);[this.sessionId,this.inputNames,this.outputNames]=await(0,sn.createSession)(uo,to)}else{const uo=await this.createSessionAllocate(Xr);[this.sessionId,this.inputNames,this.outputNames]=await(0,sn.createSessionFinalize)(uo,to)}else[this.sessionId,this.inputNames,this.outputNames]=await(0,sn.createSession)(Xr,to)}async dispose(){return(0,sn.releaseSession)(this.sessionId)}async run(Xr,to,uo){const hn=[],fn=[];Object.entries(Xr).forEach(ho=>{const mo=ho[0],Uo=ho[1],_d=this.inputNames.indexOf(mo);if(_d===-1)throw new Error(`invalid input '${mo}'`);hn.push(Uo),fn.push(_d)});const co=[];Object.entries(to).forEach(ho=>{const mo=ho[0],Uo=this.outputNames.indexOf(mo);if(Uo===-1)throw new Error(`invalid output '${mo}'`);co.push(Uo)});const lo=await(0,sn.run)(this.sessionId,fn,hn.map(ho=>[ho.type,ho.dims,ho.data]),co,uo),fo={};for(let ho=0;ho<lo.length;ho++)fo[this.outputNames[co[ho]]]=new on.Tensor(lo[ho][0],lo[ho][2],lo[ho][1]);return fo}startProfiling(){}endProfiling(){(0,sn.endProfiling)(this.sessionId)}}},4919:(Mt,st,nn)=>{Object.defineProperty(st,"__esModule",{value:!0}),st.setSessionOptions=void 0;const rn=nn(7967),on=nn(4983),an=nn(6361);st.setSessionOptions=sn=>{const un=(0,an.getInstance)();let Xr=0;const to=[],uo=sn||{};(hn=>{hn.extra||(hn.extra={}),hn.extra.session||(hn.extra.session={});const fn=hn.extra.session;fn.use_ort_model_bytes_directly||(fn.use_ort_model_bytes_directly="1")})(uo);try{(sn==null?void 0:sn.graphOptimizationLevel)===void 0&&(uo.graphOptimizationLevel="all");const hn=(lo=>{switch(lo){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${lo}`)}})(uo.graphOptimizationLevel);(sn==null?void 0:sn.enableCpuMemArena)===void 0&&(uo.enableCpuMemArena=!0),(sn==null?void 0:sn.enableMemPattern)===void 0&&(uo.enableMemPattern=!0),(sn==null?void 0:sn.executionMode)===void 0&&(uo.executionMode="sequential");const fn=(lo=>{switch(lo){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${lo}`)}})(uo.executionMode);let co=0;if((sn==null?void 0:sn.logId)!==void 0&&(co=(0,on.allocWasmString)(sn.logId,to)),(sn==null?void 0:sn.logSeverityLevel)===void 0)uo.logSeverityLevel=2;else if(typeof sn.logSeverityLevel!="number"||!Number.isInteger(sn.logSeverityLevel)||sn.logSeverityLevel<0||sn.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${sn.logSeverityLevel}`);if((sn==null?void 0:sn.logVerbosityLevel)===void 0)uo.logVerbosityLevel=0;else if(typeof sn.logVerbosityLevel!="number"||!Number.isInteger(sn.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${sn.logVerbosityLevel}`);if((sn==null?void 0:sn.enableProfiling)===void 0&&(uo.enableProfiling=!1),Xr=un._OrtCreateSessionOptions(hn,!!uo.enableCpuMemArena,!!uo.enableMemPattern,fn,!!uo.enableProfiling,0,co,uo.logSeverityLevel,uo.logVerbosityLevel),Xr===0)throw new Error("Can't create session options");return sn!=null&&sn.executionProviders&&((lo,fo,ho)=>{for(const mo of fo){let Uo=typeof mo=="string"?mo:mo.name;switch(Uo){case"xnnpack":Uo="XNNPACK";break;case"wasm":case"cpu":continue;default:throw new Error(`not supported EP: ${Uo}`)}const _d=(0,on.allocWasmString)(Uo,ho);if((0,an.getInstance)()._OrtAppendExecutionProvider(lo,_d)!==0)throw new Error(`Can't append execution provider: ${Uo}`)}})(Xr,sn.executionProviders,to),(sn==null?void 0:sn.extra)!==void 0&&(0,rn.iterateExtraOptions)(sn.extra,"",new WeakSet,(lo,fo)=>{const ho=(0,on.allocWasmString)(lo,to),mo=(0,on.allocWasmString)(fo,to);if(un._OrtAddSessionConfigEntry(Xr,ho,mo)!==0)throw new Error(`Can't set a session config entry: ${lo} - ${fo}`)}),[Xr,to]}catch(hn){throw Xr!==0&&un._OrtReleaseSessionOptions(Xr),to.forEach(un._free),hn}}},4983:(Mt,st,nn)=>{Object.defineProperty(st,"__esModule",{value:!0}),st.allocWasmString=void 0;const rn=nn(6361);st.allocWasmString=(on,an)=>{const sn=(0,rn.getInstance)(),un=sn.lengthBytesUTF8(on)+1,Xr=sn._malloc(un);return sn.stringToUTF8(on,Xr,un),an.push(Xr),Xr}},349:(Mt,st,nn)=>{Object.defineProperty(st,"__esModule",{value:!0}),st.extractTransferableBuffers=st.endProfiling=st.run=st.releaseSession=st.createSession=st.createSessionFinalize=st.createSessionAllocate=st.initOrt=void 0;const rn=nn(586),on=nn(4919),an=nn(4983),sn=nn(6361);st.initOrt=(hn,fn)=>{const co=(0,sn.getInstance)()._OrtInit(hn,fn);if(co!==0)throw new Error(`Can't initialize onnxruntime. error code = ${co}`)};const un=new Map;st.createSessionAllocate=hn=>{const fn=(0,sn.getInstance)(),co=fn._malloc(hn.byteLength);return fn.HEAPU8.set(hn,co),[co,hn.byteLength]},st.createSessionFinalize=(hn,fn)=>{const co=(0,sn.getInstance)();let lo=0,fo=0,ho=[];try{if([fo,ho]=(0,on.setSessionOptions)(fn),lo=co._OrtCreateSession(hn[0],hn[1],fo),lo===0)throw new Error("Can't create a session")}finally{co._free(hn[0]),co._OrtReleaseSessionOptions(fo),ho.forEach(co._free)}const mo=co._OrtGetInputCount(lo),Uo=co._OrtGetOutputCount(lo),_d=[],tp=[],ep=[],np=[];for(let rp=0;rp<mo;rp++){const ip=co._OrtGetInputName(lo,rp);if(ip===0)throw new Error("Can't get an input name");tp.push(ip),_d.push(co.UTF8ToString(ip))}for(let rp=0;rp<Uo;rp++){const ip=co._OrtGetOutputName(lo,rp);if(ip===0)throw new Error("Can't get an output name");np.push(ip),ep.push(co.UTF8ToString(ip))}return un.set(lo,[lo,tp,np]),[lo,_d,ep]},st.createSession=(hn,fn)=>{const co=(0,st.createSessionAllocate)(hn);return(0,st.createSessionFinalize)(co,fn)},st.releaseSession=hn=>{const fn=(0,sn.getInstance)(),co=un.get(hn);if(!co)throw new Error("invalid session id");const lo=co[0],fo=co[1],ho=co[2];fo.forEach(fn._OrtFree),ho.forEach(fn._OrtFree),fn._OrtReleaseSession(lo),un.delete(hn)};const Xr=hn=>{switch(hn){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error(`unsupported data type: ${hn}`)}},to=hn=>{switch(hn){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error(`unsupported data type: ${hn}`)}},uo=hn=>{switch(hn){case"float32":return Float32Array;case"uint8":case"bool":return Uint8Array;case"int8":return Int8Array;case"uint16":return Uint16Array;case"int16":return Int16Array;case"int32":return Int32Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${hn}`)}};st.run=(hn,fn,co,lo,fo)=>{const ho=(0,sn.getInstance)(),mo=un.get(hn);if(!mo)throw new Error("invalid session id");const Uo=mo[0],_d=mo[1],tp=mo[2],ep=fn.length,np=lo.length;let rp=0,ip=[];const op=[],ap=[];try{[rp,ip]=(0,rn.setRunOptions)(fo);for(let cp=0;cp<ep;cp++){const fp=co[cp][0],gp=co[cp][1],mp=co[cp][2];let xp,_p;if(Array.isArray(mp)){_p=4*mp.length,xp=ho._malloc(_p),ap.push(xp);let jp=xp/4;for(let Dp=0;Dp<mp.length;Dp++){if(typeof mp[Dp]!="string")throw new TypeError(`tensor data at index ${Dp} is not a string`);ho.HEAPU32[jp++]=(0,an.allocWasmString)(mp[Dp],ap)}}else _p=mp.byteLength,xp=ho._malloc(_p),ap.push(xp),ho.HEAPU8.set(new Uint8Array(mp.buffer,mp.byteOffset,_p),xp);const Sp=ho.stackSave(),Cp=ho.stackAlloc(4*gp.length);try{let jp=Cp/4;gp.forEach(Vp=>ho.HEAP32[jp++]=Vp);const Dp=ho._OrtCreateTensor(Xr(fp),xp,_p,Cp,gp.length);if(Dp===0)throw new Error("Can't create a tensor");op.push(Dp)}finally{ho.stackRestore(Sp)}}const sp=ho.stackSave(),up=ho.stackAlloc(4*ep),pp=ho.stackAlloc(4*ep),lp=ho.stackAlloc(4*np),dp=ho.stackAlloc(4*np);try{let cp=up/4,fp=pp/4,gp=lp/4,mp=dp/4;for(let Sp=0;Sp<ep;Sp++)ho.HEAPU32[cp++]=op[Sp],ho.HEAPU32[fp++]=_d[fn[Sp]];for(let Sp=0;Sp<np;Sp++)ho.HEAPU32[gp++]=0,ho.HEAPU32[mp++]=tp[lo[Sp]];let xp=ho._OrtRun(Uo,pp,up,ep,dp,np,lp,rp);const _p=[];if(xp===0)for(let Sp=0;Sp<np;Sp++){const Cp=ho.HEAPU32[lp/4+Sp],jp=ho.stackSave(),Dp=ho.stackAlloc(16);let Vp,Up=0;try{if(xp=ho._OrtGetTensorData(Cp,Dp,Dp+4,Dp+8,Dp+12),xp!==0)throw new Error(`Can't access output tensor data. error code = ${xp}`);let Kp=Dp/4;const Mp=ho.HEAPU32[Kp++];Up=ho.HEAPU32[Kp++];const zp=ho.HEAPU32[Kp++],Bp=ho.HEAPU32[Kp++],Pp=[];for(let Wp=0;Wp<Bp;Wp++)Pp.push(ho.HEAPU32[zp/4+Wp]);ho._OrtFree(zp);const Gp=Pp.length===0?1:Pp.reduce((Wp,Xp)=>Wp*Xp);if(Vp=to(Mp),Vp==="string"){const Wp=[];let Xp=Up/4;for(let Qp=0;Qp<Gp;Qp++){const om=ho.HEAPU32[Xp++],ym=Qp===Gp-1?void 0:ho.HEAPU32[Xp]-om;Wp.push(ho.UTF8ToString(om,ym))}_p.push([Vp,Pp,Wp])}else{const Wp=new(uo(Vp))(Gp);new Uint8Array(Wp.buffer,Wp.byteOffset,Wp.byteLength).set(ho.HEAPU8.subarray(Up,Up+Wp.byteLength)),_p.push([Vp,Pp,Wp])}}finally{ho.stackRestore(jp),Vp==="string"&&Up&&ho._free(Up),ho._OrtReleaseTensor(Cp)}}if(xp===0)return _p;throw new Error(`failed to call OrtRun(). error code = ${xp}.`)}finally{ho.stackRestore(sp)}}finally{op.forEach(ho._OrtReleaseTensor),ap.forEach(ho._free),ho._OrtReleaseRunOptions(rp),ip.forEach(ho._free)}},st.endProfiling=hn=>{const fn=(0,sn.getInstance)(),co=un.get(hn);if(!co)throw new Error("invalid session id");const lo=co[0],fo=fn._OrtEndProfiling(lo);if(fo===0)throw new Error("Can't get an profile file name");fn._OrtFree(fo)},st.extractTransferableBuffers=hn=>{const fn=[];for(const co of hn){const lo=co[2];!Array.isArray(lo)&&lo.buffer&&fn.push(lo.buffer)}return fn}},6361:function(Mt,st,nn){var rn=this&&this.__createBinding||(Object.create?function(fo,ho,mo,Uo){Uo===void 0&&(Uo=mo);var _d=Object.getOwnPropertyDescriptor(ho,mo);_d&&!("get"in _d?!ho.__esModule:_d.writable||_d.configurable)||(_d={enumerable:!0,get:function(){return ho[mo]}}),Object.defineProperty(fo,Uo,_d)}:function(fo,ho,mo,Uo){Uo===void 0&&(Uo=mo),fo[Uo]=ho[mo]}),on=this&&this.__setModuleDefault||(Object.create?function(fo,ho){Object.defineProperty(fo,"default",{enumerable:!0,value:ho})}:function(fo,ho){fo.default=ho}),an=this&&this.__importStar||function(fo){if(fo&&fo.__esModule)return fo;var ho={};if(fo!=null)for(var mo in fo)mo!=="default"&&Object.prototype.hasOwnProperty.call(fo,mo)&&rn(ho,fo,mo);return on(ho,fo),ho},sn=this&&this.__importDefault||function(fo){return fo&&fo.__esModule?fo:{default:fo}};Object.defineProperty(st,"__esModule",{value:!0}),st.dispose=st.getInstance=st.initializeWebAssembly=void 0;const un=an(nn(6449)),Xr=sn(nn(932)),to=nn(3474);let uo,hn=!1,fn=!1,co=!1;const lo=(fo,ho)=>ho?fo?"ort-wasm-simd-threaded.wasm":"ort-wasm-threaded.wasm":fo?"ort-wasm-simd.wasm":"ort-wasm.wasm";st.initializeWebAssembly=async fo=>{if(hn)return Promise.resolve();if(fn)throw new Error("multiple calls to 'initializeWebAssembly()' detected.");if(co)throw new Error("previous call to 'initializeWebAssembly()' failed.");fn=!0;const ho=fo.initTimeout,mo=fo.numThreads,Uo=fo.simd,_d=mo>1&&(()=>{try{return typeof SharedArrayBuffer<"u"&&(typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11])))}catch{return!1}})(),tp=Uo&&(()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch{return!1}})(),ep=typeof fo.wasmPaths=="string"?fo.wasmPaths:void 0,np=lo(!1,_d),rp=lo(tp,_d),ip=typeof fo.wasmPaths=="object"?fo.wasmPaths[rp]:void 0;let op=!1;const ap=[];if(ho>0&&ap.push(new Promise(sp=>{setTimeout(()=>{op=!0,sp()},ho)})),ap.push(new Promise((sp,up)=>{const pp=_d?to:Xr.default,lp={locateFile:(dp,cp)=>_d&&dp.endsWith(".worker.js")&&typeof Blob<"u"?URL.createObjectURL(new Blob([nn(4154)],{type:"text/javascript"})):dp===np?ip??(ep??cp)+rp:cp+dp};if(_d)if(typeof Blob>"u")lp.mainScriptUrlOrBlob=un.join("/","ort-wasm-threaded.js");else{const dp=`var ortWasmThreaded=(function(){var _scriptDir;return ${pp.toString()}})();`;lp.mainScriptUrlOrBlob=new Blob([dp],{type:"text/javascript"})}pp(lp).then(dp=>{fn=!1,hn=!0,uo=dp,sp()},dp=>{fn=!1,co=!0,up(dp)})})),await Promise.race(ap),op)throw new Error(`WebAssembly backend initializing failed due to timeout: ${ho}ms`)},st.getInstance=()=>{if(hn&&uo)return uo;throw new Error("WebAssembly is not initialized yet.")},st.dispose=()=>{var fo;!hn||fn||co||(fn=!0,(fo=uo.PThread)===null||fo===void 0||fo.terminateAllThreads(),uo=void 0,fn=!1,hn=!1,co=!0)}},9710:(Mt,st,nn)=>{nn.d(st,{Z:()=>an});var rn=nn(477),on=nn.n(rn);function an(){return on()('/*!\n* ONNX Runtime Web v1.14.0\n* Copyright (c) Microsoft Corporation. All rights reserved.\n* Licensed under the MIT License.\n*/\n(()=>{var t={474:(t,e,n)=>{var _scriptDir,r=(_scriptDir=(_scriptDir="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0)||"/index.js",function(t){function e(){return j.buffer!=D&&N(j.buffer),P}function r(){return j.buffer!=D&&N(j.buffer),U}function a(){return j.buffer!=D&&N(j.buffer),F}function i(){return j.buffer!=D&&N(j.buffer),I}function o(){return j.buffer!=D&&N(j.buffer),W}var u,c,s;t=t||{},u||(u=void 0!==t?t:{}),u.ready=new Promise((function(t,e){c=t,s=e}));var l,f,p,h,d,y,b=Object.assign({},u),m="./this.program",g=(t,e)=>{throw e},v="object"==typeof window,w="function"==typeof importScripts,_="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,O=u.ENVIRONMENT_IS_PTHREAD||!1,A="";function S(t){return u.locateFile?u.locateFile(t,A):A+t}if(_){let e;A=w?n(908).dirname(A)+"/":"//",y=()=>{d||(h=n(384),d=n(908))},l=function(t,e){return y(),t=d.normalize(t),h.readFileSync(t,e?void 0:"utf8")},p=t=>((t=l(t,!0)).buffer||(t=new Uint8Array(t)),t),f=(t,e,n)=>{y(),t=d.normalize(t),h.readFile(t,(function(t,r){t?n(t):e(r.buffer)}))},1<process.argv.length&&(m=process.argv[1].replace(/\\\\/g,"/")),process.argv.slice(2),process.on("uncaughtException",(function(t){if(!(t instanceof ct))throw t})),process.on("unhandledRejection",(function(t){throw t})),g=(t,e)=>{if(Q())throw process.exitCode=t,e;e instanceof ct||x("exiting due to exception: "+e),process.exit(t)},u.inspect=function(){return"[Emscripten Module object]"};try{e=n(925)}catch(t){throw console.error(\'The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?\'),t}n.g.Worker=e.Worker}else(v||w)&&(w?A=self.location.href:"undefined"!=typeof document&&document.currentScript&&(A=document.currentScript.src),_scriptDir&&(A=_scriptDir),A=0!==A.indexOf("blob:")?A.substr(0,A.replace(/[?#].*/,"").lastIndexOf("/")+1):"",_||(l=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),e.responseText},w&&(p=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}),f=(t,e,n)=>{var r=new XMLHttpRequest;r.open("GET",t,!0),r.responseType="arraybuffer",r.onload=()=>{200==r.status||0==r.status&&r.response?e(r.response):n()},r.onerror=n,r.send(null)}));_&&"undefined"==typeof performance&&(n.g.performance=n(953).performance);var T=console.log.bind(console),E=console.warn.bind(console);_&&(y(),T=t=>h.writeSync(1,t+"\\n"),E=t=>h.writeSync(2,t+"\\n"));var M,C=u.print||T,x=u.printErr||E;Object.assign(u,b),b=null,u.thisProgram&&(m=u.thisProgram),u.quit&&(g=u.quit),u.wasmBinary&&(M=u.wasmBinary);var R=u.noExitRuntime||!1;"object"!=typeof WebAssembly&&at("no native wasm support detected");var j,k,D,P,U,F,I,W,H=!1,L="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function z(t,e,n){var r=(e>>>=0)+n;for(n=e;t[n]&&!(n>=r);)++n;if(16<n-e&&t.buffer&&L)return L.decode(t.buffer instanceof SharedArrayBuffer?t.slice(e,n):t.subarray(e,n));for(r="";e<n;){var a=t[e++];if(128&a){var i=63&t[e++];if(192==(224&a))r+=String.fromCharCode((31&a)<<6|i);else{var o=63&t[e++];65536>(a=224==(240&a)?(15&a)<<12|i<<6|o:(7&a)<<18|i<<12|o<<6|63&t[e++])?r+=String.fromCharCode(a):(a-=65536,r+=String.fromCharCode(55296|a>>10,56320|1023&a))}}else r+=String.fromCharCode(a)}return r}function Y(t,e){return(t>>>=0)?z(r(),t,e):""}function B(t,e,n,r){if(!(0<r))return 0;var a=n>>>=0;r=n+r-1;for(var i=0;i<t.length;++i){var o=t.charCodeAt(i);if(55296<=o&&57343>=o&&(o=65536+((1023&o)<<10)|1023&t.charCodeAt(++i)),127>=o){if(n>=r)break;e[n++>>>0]=o}else{if(2047>=o){if(n+1>=r)break;e[n++>>>0]=192|o>>6}else{if(65535>=o){if(n+2>=r)break;e[n++>>>0]=224|o>>12}else{if(n+3>=r)break;e[n++>>>0]=240|o>>18,e[n++>>>0]=128|o>>12&63}e[n++>>>0]=128|o>>6&63}e[n++>>>0]=128|63&o}}return e[n>>>0]=0,n-a}function G(t){for(var e=0,n=0;n<t.length;++n){var r=t.charCodeAt(n);127>=r?e++:2047>=r?e+=2:55296<=r&&57343>=r?(e+=4,++n):e+=3}return e}function N(t){D=t,u.HEAP8=P=new Int8Array(t),u.HEAP16=new Int16Array(t),u.HEAP32=F=new Int32Array(t),u.HEAPU8=U=new Uint8Array(t),u.HEAPU16=new Uint16Array(t),u.HEAPU32=I=new Uint32Array(t),u.HEAPF32=new Float32Array(t),u.HEAPF64=W=new Float64Array(t)}O&&(D=u.buffer);var V=u.INITIAL_MEMORY||16777216;if(O)j=u.wasmMemory,D=u.buffer;else if(u.wasmMemory)j=u.wasmMemory;else if(!((j=new WebAssembly.Memory({initial:V/65536,maximum:65536,shared:!0})).buffer instanceof SharedArrayBuffer))throw x("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),_&&console.log("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and also use a recent version)"),Error("bad memory");j&&(D=j.buffer),V=D.byteLength,N(D);var $,q=[],X=[],J=[],Z=[];function Q(){return R||!1}function K(){var t=u.preRun.shift();q.unshift(t)}var tt,et=0,nt=null,rt=null;function at(t){throw O?postMessage({cmd:"onAbort",arg:t}):u.onAbort&&u.onAbort(t),x(t="Aborted("+t+")"),H=!0,t=new WebAssembly.RuntimeError(t+". Build with -sASSERTIONS for more info."),s(t),t}function it(){return tt.startsWith("data:application/octet-stream;base64,")}function ot(){var t=tt;try{if(t==tt&&M)return new Uint8Array(M);if(p)return p(t);throw"both async and sync fetching of the wasm failed"}catch(t){at(t)}}tt="ort-wasm-threaded.wasm",it()||(tt=S(tt));var ut={};function ct(t){this.name="ExitStatus",this.message="Program terminated with exit("+t+")",this.status=t}function st(t){(t=ht.Vb[t])||at(),ht.mc(t)}function lt(t){var e=ht.Cc();if(!e)return 6;ht.ac.push(e),ht.Vb[t.Ub]=e,e.Ub=t.Ub;var n={cmd:"run",start_routine:t.Ic,arg:t.zc,pthread_ptr:t.Ub};return e.$b=()=>{n.time=performance.now(),e.postMessage(n,t.Nc)},e.loaded&&(e.$b(),delete e.$b),0}function ft(t){if(O)return $t(1,1,t);Q()||(ht.oc(),u.onExit&&u.onExit(t),H=!0),g(t,new ct(t))}function pt(t,e){if(!e&&O)throw bt(t),"unwind";Q()||O||(me(),dt(J),be(0),re[1].length&&ae(1,10),re[2].length&&ae(2,10),ht.oc()),ft(t)}var ht={Yb:[],ac:[],qc:[],Vb:{},fc:function(){O&&ht.Ec()},Pc:function(){},Ec:function(){ht.receiveObjectTransfer=ht.Gc,ht.threadInitTLS=ht.pc,ht.setExitStatus=ht.nc,R=!1},nc:function(){},oc:function(){for(var t of Object.values(ht.Vb))ht.mc(t);for(t of ht.Yb)t.terminate();ht.Yb=[]},mc:function(t){var e=t.Ub;delete ht.Vb[e],ht.Yb.push(t),ht.ac.splice(ht.ac.indexOf(t),1),t.Ub=0,Oe(e)},Gc:function(){},pc:function(){ht.qc.forEach((t=>t()))},Fc:function(t,e){t.onmessage=n=>{var r=(n=n.data).cmd;if(t.Ub&&(ht.Bc=t.Ub),n.targetThread&&n.targetThread!=he()){var a=ht.Vb[n.Qc];a?a.postMessage(n,n.transferList):x(\'Internal error! Worker sent a message "\'+r+\'" to target pthread \'+n.targetThread+", but that thread no longer exists!")}else"processProxyingQueue"===r?zt(n.queue):"spawnThread"===r?lt(n):"cleanupThread"===r?st(n.thread):"killThread"===r?(n=n.thread,r=ht.Vb[n],delete ht.Vb[n],r.terminate(),Oe(n),ht.ac.splice(ht.ac.indexOf(r),1),r.Ub=0):"cancelThread"===r?ht.Vb[n.thread].postMessage({cmd:"cancel"}):"loaded"===r?(t.loaded=!0,e&&e(t),t.$b&&(t.$b(),delete t.$b)):"print"===r?C("Thread "+n.threadId+": "+n.text):"printErr"===r?x("Thread "+n.threadId+": "+n.text):"alert"===r?alert("Thread "+n.threadId+": "+n.text):"setimmediate"===n.target?t.postMessage(n):"onAbort"===r?u.onAbort&&u.onAbort(n.arg):r&&x("worker sent an unknown command "+r);ht.Bc=void 0},t.onerror=t=>{throw x("worker sent an error! "+t.filename+":"+t.lineno+": "+t.message),t},_&&(t.on("message",(function(e){t.onmessage({data:e})})),t.on("error",(function(e){t.onerror(e)})),t.on("detachedExit",(function(){}))),t.postMessage({cmd:"load",urlOrBlob:u.mainScriptUrlOrBlob||_scriptDir,wasmMemory:j,wasmModule:k})},yc:function(){var t=S("ort-wasm-threaded.worker.js");ht.Yb.push(new Worker(t))},Cc:function(){return 0==ht.Yb.length&&(ht.yc(),ht.Fc(ht.Yb[0])),ht.Yb.pop()}};function dt(t){for(;0<t.length;)t.shift()(u)}function yt(t){var e=Ee();return t=t(),Me(e),t}function bt(t){if(O)return $t(2,0,t);try{pt(t)}catch(t){t instanceof ct||"unwind"==t||g(1,t)}}u.PThread=ht,u.establishStackSpace=function(){var t=he(),e=a()[t+44>>2>>>0];t=a()[t+48>>2>>>0],Te(e,e-t),Me(e)};var mt=[];function gt(t){var e=mt[t];return e||(t>=mt.length&&(mt.length=t+1),mt[t]=e=$.get(t)),e}u.invokeEntryPoint=function(t,e){t=gt(t)(e),Q()?ht.nc(t):Ae(t)};var vt,wt,_t=[],Ot=0,At=0;function St(t){this.Zb=t,this.Sb=t-24,this.xc=function(t){i()[this.Sb+4>>2>>>0]=t},this.bc=function(){return i()[this.Sb+4>>2>>>0]},this.wc=function(t){i()[this.Sb+8>>2>>>0]=t},this.Dc=function(){return i()[this.Sb+8>>2>>>0]},this.rc=function(){a()[this.Sb>>2>>>0]=0},this.hc=function(t){t=t?1:0,e()[this.Sb+12>>0>>>0]=t},this.uc=function(){return 0!=e()[this.Sb+12>>0>>>0]},this.ic=function(t){t=t?1:0,e()[this.Sb+13>>0>>>0]=t},this.kc=function(){return 0!=e()[this.Sb+13>>0>>>0]},this.fc=function(t,e){this.cc(0),this.xc(t),this.wc(e),this.rc(),this.hc(!1),this.ic(!1)},this.sc=function(){Atomics.add(a(),this.Sb>>2,1)},this.Hc=function(){return 1===Atomics.sub(a(),this.Sb>>2,1)},this.cc=function(t){i()[this.Sb+16>>2>>>0]=t},this.tc=function(){return i()[this.Sb+16>>2>>>0]},this.vc=function(){if(Re(this.bc()))return i()[this.Zb>>2>>>0];var t=this.tc();return 0!==t?t:this.Zb}}function Tt(t){return ye(new St(t).Sb)}function Et(t,e,n,r){return O?$t(3,1,t,e,n,r):Mt(t,e,n,r)}function Mt(t,e,n,r){if("undefined"==typeof SharedArrayBuffer)return x("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var a=[];return O&&0===a.length?Et(t,e,n,r):(t={Ic:n,Ub:t,zc:r,Nc:a},O?(t.Oc="spawnThread",postMessage(t,a),0):lt(t))}function Ct(t,e,n){return O?$t(4,1,t,e,n):0}function xt(t,e){if(O)return $t(5,1,t,e)}function Rt(t,e){if(O)return $t(6,1,t,e)}function jt(t,e,n){if(O)return $t(7,1,t,e,n)}function kt(t,e,n){return O?$t(8,1,t,e,n):0}function Dt(t,e){if(O)return $t(9,1,t,e)}function Pt(t,e,n){if(O)return $t(10,1,t,e,n)}function Ut(t,e,n,r){if(O)return $t(11,1,t,e,n,r)}function Ft(t,e,n,r){if(O)return $t(12,1,t,e,n,r)}function It(t,e,n,r){if(O)return $t(13,1,t,e,n,r)}function Wt(t){if(O)return $t(14,1,t)}function Ht(t,e){if(O)return $t(15,1,t,e)}function Lt(t,e,n){if(O)return $t(16,1,t,e,n)}function zt(t){Atomics.store(a(),t>>2,1),he()&&_e(t),Atomics.compareExchange(a(),t>>2,1,0)}function Yt(t){return i()[t>>>2]+4294967296*a()[t+4>>>2]}function Bt(t,e,n,r,a,i){return O?$t(17,1,t,e,n,r,a,i):-52}function Gt(t,e,n,r,a,i){if(O)return $t(18,1,t,e,n,r,a,i)}function Nt(t){var n=G(t)+1,r=de(n);return r&&B(t,e(),r,n),r}function Vt(t,e,n){function r(t){return(t=t.toTimeString().match(/\\(([A-Za-z ]+)\\)$/))?t[1]:"GMT"}if(O)return $t(19,1,t,e,n);var o=(new Date).getFullYear(),u=new Date(o,0,1),c=new Date(o,6,1);o=u.getTimezoneOffset();var s=c.getTimezoneOffset(),l=Math.max(o,s);a()[t>>2>>>0]=60*l,a()[e>>2>>>0]=Number(o!=s),t=r(u),e=r(c),t=Nt(t),e=Nt(e),s<o?(i()[n>>2>>>0]=t,i()[n+4>>2>>>0]=e):(i()[n>>2>>>0]=e,i()[n+4>>2>>>0]=t)}function $t(t,e){var n=arguments.length-2,r=arguments;return yt((()=>{for(var a=Ce(8*n),i=a>>3,u=0;u<n;u++){var c=r[2+u];o()[i+u>>>0]=c}return we(t,n,a,e)}))}u.executeNotifiedProxyingQueue=zt,wt=_?()=>{var t=process.hrtime();return 1e3*t[0]+t[1]/1e6}:O?()=>performance.now()-u.__performance_now_clock_drift:()=>performance.now();var qt,Xt=[],Jt={};function Zt(){if(!qt){var t,e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:m||"./this.program"};for(t in Jt)void 0===Jt[t]?delete e[t]:e[t]=Jt[t];var n=[];for(t in e)n.push(t+"="+e[t]);qt=n}return qt}function Qt(t,n){if(O)return $t(20,1,t,n);var r=0;return Zt().forEach((function(a,o){var u=n+r;for(o=i()[t+4*o>>2>>>0]=u,u=0;u<a.length;++u)e()[o++>>0>>>0]=a.charCodeAt(u);e()[o>>0>>>0]=0,r+=a.length+1})),0}function Kt(t,e){if(O)return $t(21,1,t,e);var n=Zt();i()[t>>2>>>0]=n.length;var r=0;return n.forEach((function(t){r+=t.length+1})),i()[e>>2>>>0]=r,0}function te(t){return O?$t(22,1,t):52}function ee(t,e,n,r){return O?$t(23,1,t,e,n,r):52}function ne(t,e,n,r,a){return O?$t(24,1,t,e,n,r,a):70}var re=[null,[],[]];function ae(t,e){var n=re[t];0===e||10===e?((1===t?C:x)(z(n,0)),n.length=0):n.push(e)}function ie(t,e,n,a){if(O)return $t(25,1,t,e,n,a);for(var o=0,u=0;u<n;u++){var c=i()[e>>2>>>0],s=i()[e+4>>2>>>0];e+=8;for(var l=0;l<s;l++)ae(t,r()[c+l>>>0]);o+=s}return i()[a>>2>>>0]=o,0}var oe=0;function ue(t){return 0==t%4&&(0!=t%100||0==t%400)}var ce=[31,29,31,30,31,30,31,31,30,31,30,31],se=[31,28,31,30,31,30,31,31,30,31,30,31];function le(t,n,r,i){function o(t,e,n){for(t="number"==typeof t?t.toString():t||"";t.length<e;)t=n[0]+t;return t}function u(t,e){return o(t,e,"0")}function c(t,e){function n(t){return 0>t?-1:0<t?1:0}var r;return 0===(r=n(t.getFullYear()-e.getFullYear()))&&0===(r=n(t.getMonth()-e.getMonth()))&&(r=n(t.getDate()-e.getDate())),r}function s(t){switch(t.getDay()){case 0:return new Date(t.getFullYear()-1,11,29);case 1:return t;case 2:return new Date(t.getFullYear(),0,3);case 3:return new Date(t.getFullYear(),0,2);case 4:return new Date(t.getFullYear(),0,1);case 5:return new Date(t.getFullYear()-1,11,31);case 6:return new Date(t.getFullYear()-1,11,30)}}function l(t){var e=t.Wb;for(t=new Date(new Date(t.Xb+1900,0,1).getTime());0<e;){var n=t.getMonth(),r=(ue(t.getFullYear())?ce:se)[n];if(!(e>r-t.getDate())){t.setDate(t.getDate()+e);break}e-=r-t.getDate()+1,t.setDate(1),11>n?t.setMonth(n+1):(t.setMonth(0),t.setFullYear(t.getFullYear()+1))}return n=new Date(t.getFullYear()+1,0,4),e=s(new Date(t.getFullYear(),0,4)),n=s(n),0>=c(e,t)?0>=c(n,t)?t.getFullYear()+1:t.getFullYear():t.getFullYear()-1}var f=a()[i+40>>2>>>0];for(var p in i={Lc:a()[i>>2>>>0],Kc:a()[i+4>>2>>>0],dc:a()[i+8>>2>>>0],jc:a()[i+12>>2>>>0],ec:a()[i+16>>2>>>0],Xb:a()[i+20>>2>>>0],Tb:a()[i+24>>2>>>0],Wb:a()[i+28>>2>>>0],Rc:a()[i+32>>2>>>0],Jc:a()[i+36>>2>>>0],Mc:f?Y(f):""},r=Y(r),f={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})r=r.replace(new RegExp(p,"g"),f[p]);var h="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),d="January February March April May June July August September October November December".split(" ");for(p in f={"%a":function(t){return h[t.Tb].substring(0,3)},"%A":function(t){return h[t.Tb]},"%b":function(t){return d[t.ec].substring(0,3)},"%B":function(t){return d[t.ec]},"%C":function(t){return u((t.Xb+1900)/100|0,2)},"%d":function(t){return u(t.jc,2)},"%e":function(t){return o(t.jc,2," ")},"%g":function(t){return l(t).toString().substring(2)},"%G":function(t){return l(t)},"%H":function(t){return u(t.dc,2)},"%I":function(t){return 0==(t=t.dc)?t=12:12<t&&(t-=12),u(t,2)},"%j":function(t){for(var e=0,n=0;n<=t.ec-1;e+=(ue(t.Xb+1900)?ce:se)[n++]);return u(t.jc+e,3)},"%m":function(t){return u(t.ec+1,2)},"%M":function(t){return u(t.Kc,2)},"%n":function(){return"\\n"},"%p":function(t){return 0<=t.dc&&12>t.dc?"AM":"PM"},"%S":function(t){return u(t.Lc,2)},"%t":function(){return"\\t"},"%u":function(t){return t.Tb||7},"%U":function(t){return u(Math.floor((t.Wb+7-t.Tb)/7),2)},"%V":function(t){var e=Math.floor((t.Wb+7-(t.Tb+6)%7)/7);if(2>=(t.Tb+371-t.Wb-2)%7&&e++,e)53==e&&(4==(n=(t.Tb+371-t.Wb)%7)||3==n&&ue(t.Xb)||(e=1));else{e=52;var n=(t.Tb+7-t.Wb-1)%7;(4==n||5==n&&ue(t.Xb%400-1))&&e++}return u(e,2)},"%w":function(t){return t.Tb},"%W":function(t){return u(Math.floor((t.Wb+7-(t.Tb+6)%7)/7),2)},"%y":function(t){return(t.Xb+1900).toString().substring(2)},"%Y":function(t){return t.Xb+1900},"%z":function(t){var e=0<=(t=t.Jc);return t=Math.abs(t)/60,(e?"+":"-")+String("0000"+(t/60*100+t%60)).slice(-4)},"%Z":function(t){return t.Mc},"%%":function(){return"%"}},r=r.replace(/%%/g,"\\0\\0"),f)r.includes(p)&&(r=r.replace(new RegExp(p,"g"),f[p](i)));return p=function(t){var e=Array(G(t)+1);return B(t,e,0,e.length),e}(r=r.replace(/\\0\\0/g,"%")),p.length>n?0:(function(t,n){e().set(t,n>>>0)}(p,t),p.length-1)}ht.fc();var fe=[null,ft,bt,Et,Ct,xt,Rt,jt,kt,Dt,Pt,Ut,Ft,It,Wt,Ht,Lt,Bt,Gt,Vt,Qt,Kt,te,ee,ne,ie],pe={b:function(t){return de(t+24)+24},n:function(t){return(t=new St(t)).uc()||(t.hc(!0),Ot--),t.ic(!1),_t.push(t),t.sc(),t.vc()},ma:function(t){throw x("Unexpected exception thrown, this is not properly supported - aborting"),H=!0,t},x:function(){Se(0);var t=_t.pop();if(t.Hc()&&!t.kc()){var e=t.Dc();e&&gt(e)(t.Zb),Tt(t.Zb)}At=0},e:function(){var t=At;if(!t)return oe=0;var e=new St(t);e.cc(t);var n=e.bc();if(!n)return oe=0,t;for(var r=Array.prototype.slice.call(arguments),a=0;a<r.length;a++){var i=r[a];if(0===i||i===n)break;if(xe(i,n,e.Sb+16))return oe=i,t}return oe=n,t},l:function(){var t=At;if(!t)return oe=0;var e=new St(t);e.cc(t);var n=e.bc();if(!n)return oe=0,t;for(var r=Array.prototype.slice.call(arguments),a=0;a<r.length;a++){var i=r[a];if(0===i||i===n)break;if(xe(i,n,e.Sb+16))return oe=i,t}return oe=n,t},h:function(){var t=At;if(!t)return oe=0;var e=new St(t);e.cc(t);var n=e.bc();if(!n)return oe=0,t;for(var r=Array.prototype.slice.call(arguments),a=0;a<r.length;a++){var i=r[a];if(0===i||i===n)break;if(xe(i,n,e.Sb+16))return oe=i,t}return oe=n,t},t:Tt,M:function(){var t=_t.pop();t||at("no exception to throw");var e=t.Zb;throw t.kc()||(_t.push(t),t.ic(!0),t.hc(!1),Ot++),At=e,e},c:function(t,e,n){throw new St(t).fc(e,n),At=t,Ot++,t},pa:function(){return Ot},Fa:function(t){ge(t,!w,1,!v),ht.pc()},T:function(t){O?postMessage({cmd:"cleanupThread",thread:t}):st(t)},xa:Mt,j:function(t){throw At||(At=t),t},H:Ct,Ma:xt,ua:Rt,wa:jt,oa:kt,Ka:Dt,Ca:Pt,Ja:Ut,V:Ft,va:It,sa:Wt,La:Ht,ta:Lt,Ta:function(){},X:function(){at("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},Ua:function(){at("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},W:function(){return Date.now()},ya:function(){return 2097152},Oa:function(){return!0},za:function(t,e,n,r){if(t==e)setTimeout((()=>zt(r)));else if(O)postMessage({targetThread:t,cmd:"processProxyingQueue",queue:r});else{if(!(t=ht.Vb[t]))return;t.postMessage({cmd:"processProxyingQueue",queue:r})}return 1},Ea:function(){return-1},Pa:function(t,e){t=new Date(1e3*Yt(t)),a()[e>>2>>>0]=t.getUTCSeconds(),a()[e+4>>2>>>0]=t.getUTCMinutes(),a()[e+8>>2>>>0]=t.getUTCHours(),a()[e+12>>2>>>0]=t.getUTCDate(),a()[e+16>>2>>>0]=t.getUTCMonth(),a()[e+20>>2>>>0]=t.getUTCFullYear()-1900,a()[e+24>>2>>>0]=t.getUTCDay(),t=(t.getTime()-Date.UTC(t.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,a()[e+28>>2>>>0]=t},Qa:function(t,e){t=new Date(1e3*Yt(t)),a()[e>>2>>>0]=t.getSeconds(),a()[e+4>>2>>>0]=t.getMinutes(),a()[e+8>>2>>>0]=t.getHours(),a()[e+12>>2>>>0]=t.getDate(),a()[e+16>>2>>>0]=t.getMonth(),a()[e+20>>2>>>0]=t.getFullYear()-1900,a()[e+24>>2>>>0]=t.getDay();var n=new Date(t.getFullYear(),0,1),r=(t.getTime()-n.getTime())/864e5|0;a()[e+28>>2>>>0]=r,a()[e+36>>2>>>0]=-60*t.getTimezoneOffset(),r=new Date(t.getFullYear(),6,1).getTimezoneOffset(),t=0|(r!=(n=n.getTimezoneOffset())&&t.getTimezoneOffset()==Math.min(n,r)),a()[e+32>>2>>>0]=t},Ra:function(t){var e=new Date(a()[t+20>>2>>>0]+1900,a()[t+16>>2>>>0],a()[t+12>>2>>>0],a()[t+8>>2>>>0],a()[t+4>>2>>>0],a()[t>>2>>>0],0),n=a()[t+32>>2>>>0],r=e.getTimezoneOffset(),i=new Date(e.getFullYear(),0,1),o=new Date(e.getFullYear(),6,1).getTimezoneOffset(),u=i.getTimezoneOffset(),c=Math.min(u,o);return 0>n?a()[t+32>>2>>>0]=Number(o!=u&&c==r):0<n!=(c==r)&&(o=Math.max(u,o),e.setTime(e.getTime()+6e4*((0<n?c:o)-r))),a()[t+24>>2>>>0]=e.getDay(),n=(e.getTime()-i.getTime())/864e5|0,a()[t+28>>2>>>0]=n,a()[t>>2>>>0]=e.getSeconds(),a()[t+4>>2>>>0]=e.getMinutes(),a()[t+8>>2>>>0]=e.getHours(),a()[t+12>>2>>>0]=e.getDate(),a()[t+16>>2>>>0]=e.getMonth(),e.getTime()/1e3|0},Aa:Bt,Ba:Gt,Sa:function t(e,n,r){t.Ac||(t.Ac=!0,Vt(e,n,r))},y:function(){at("")},U:function(){if(!_&&!w){var t="Blocking on the main thread is very dangerous, see https://emscripten.org/docs/porting/pthreads.html#blocking-on-the-main-browser-thread";vt||(vt={}),vt[t]||(vt[t]=1,_&&(t="warning: "+t),x(t))}},ra:function(){return 4294901760},B:wt,Ia:function(t,e,n){r().copyWithin(t>>>0,e>>>0,e+n>>>0)},F:function(){return _?n(993).cpus().length:navigator.hardwareConcurrency},Da:function(t,e,n){Xt.length=e,n>>=3;for(var r=0;r<e;r++)Xt[r]=o()[n+r>>>0];return(0>t?ut[-t-1]:fe[t]).apply(null,Xt)},qa:function(t){var e=r().length;if((t>>>=0)<=e||4294901760<t)return!1;for(var n=1;4>=n;n*=2){var a=e*(1+.2/n);a=Math.min(a,t+100663296);var i=Math;a=Math.max(t,a),i=i.min.call(i,4294901760,a+(65536-a%65536)%65536);t:{try{j.grow(i-D.byteLength+65535>>>16),N(j.buffer);var o=1;break t}catch(t){}o=void 0}if(o)return!0}return!1},Na:function(){throw"unwind"},Ga:Qt,Ha:Kt,J:pt,I:te,S:ee,ga:ne,R:ie,d:function(){return oe},na:function t(r,a){t.lc||(t.lc=function(){if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues){var t=new Uint8Array(1);return()=>(crypto.getRandomValues(t),t[0])}if(_)try{var e=n(Object(function(){var t=new Error("Cannot find module \'crypto\'");throw t.code="MODULE_NOT_FOUND",t}()));return()=>e.randomBytes(1)[0]}catch(t){}return()=>at("randomDevice")}());for(var i=0;i<a;i++)e()[r+i>>0>>>0]=t.lc();return 0},ia:function(t,e,n){var r=Ee();try{return gt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},ja:function(t,e,n){var r=Ee();try{return gt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},K:function(t){var e=Ee();try{return gt(t)()}catch(t){if(Me(e),t!==t+0)throw t;Se(1,0)}},f:function(t,e){var n=Ee();try{return gt(t)(e)}catch(t){if(Me(n),t!==t+0)throw t;Se(1,0)}},P:function(t,e,n){var r=Ee();try{return gt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},Q:function(t,e,n){var r=Ee();try{return gt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},k:function(t,e,n){var r=Ee();try{return gt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},p:function(t,e,n,r){var a=Ee();try{return gt(t)(e,n,r)}catch(t){if(Me(a),t!==t+0)throw t;Se(1,0)}},q:function(t,e,n,r,a){var i=Ee();try{return gt(t)(e,n,r,a)}catch(t){if(Me(i),t!==t+0)throw t;Se(1,0)}},N:function(t,e,n,r,a,i){var o=Ee();try{return gt(t)(e,n,r,a,i)}catch(t){if(Me(o),t!==t+0)throw t;Se(1,0)}},s:function(t,e,n,r,a,i){var o=Ee();try{return gt(t)(e,n,r,a,i)}catch(t){if(Me(o),t!==t+0)throw t;Se(1,0)}},w:function(t,e,n,r,a,i,o){var u=Ee();try{return gt(t)(e,n,r,a,i,o)}catch(t){if(Me(u),t!==t+0)throw t;Se(1,0)}},L:function(t,e,n,r,a,i,o,u){var c=Ee();try{return gt(t)(e,n,r,a,i,o,u)}catch(t){if(Me(c),t!==t+0)throw t;Se(1,0)}},E:function(t,e,n,r,a,i,o,u,c,s,l,f){var p=Ee();try{return gt(t)(e,n,r,a,i,o,u,c,s,l,f)}catch(t){if(Me(p),t!==t+0)throw t;Se(1,0)}},aa:function(t,e,n,r,a,i,o,u){var c=Ee();try{return He(t,e,n,r,a,i,o,u)}catch(t){if(Me(c),t!==t+0)throw t;Se(1,0)}},_:function(t,e,n,r,a,i,o){var u=Ee();try{return ke(t,e,n,r,a,i,o)}catch(t){if(Me(u),t!==t+0)throw t;Se(1,0)}},Z:function(t,e,n,r,a){var i=Ee();try{return Le(t,e,n,r,a)}catch(t){if(Me(i),t!==t+0)throw t;Se(1,0)}},ca:function(t,e,n,r){var a=Ee();try{return Ie(t,e,n,r)}catch(t){if(Me(a),t!==t+0)throw t;Se(1,0)}},$:function(t){var e=Ee();try{return je(t)}catch(t){if(Me(e),t!==t+0)throw t;Se(1,0)}},ba:function(t,e){var n=Ee();try{return We(t,e)}catch(t){if(Me(n),t!==t+0)throw t;Se(1,0)}},Y:function(t,e,n){var r=Ee();try{return De(t,e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},g:function(t){var e=Ee();try{gt(t)()}catch(t){if(Me(e),t!==t+0)throw t;Se(1,0)}},r:function(t,e){var n=Ee();try{gt(t)(e)}catch(t){if(Me(n),t!==t+0)throw t;Se(1,0)}},i:function(t,e,n){var r=Ee();try{gt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},ha:function(t,e,n,r){var a=Ee();try{gt(t)(e,n,r)}catch(t){if(Me(a),t!==t+0)throw t;Se(1,0)}},m:function(t,e,n,r){var a=Ee();try{gt(t)(e,n,r)}catch(t){if(Me(a),t!==t+0)throw t;Se(1,0)}},v:function(t,e,n,r,a){var i=Ee();try{gt(t)(e,n,r,a)}catch(t){if(Me(i),t!==t+0)throw t;Se(1,0)}},u:function(t,e,n,r,a,i){var o=Ee();try{gt(t)(e,n,r,a,i)}catch(t){if(Me(o),t!==t+0)throw t;Se(1,0)}},O:function(t,e,n,r,a,i,o){var u=Ee();try{gt(t)(e,n,r,a,i,o)}catch(t){if(Me(u),t!==t+0)throw t;Se(1,0)}},A:function(t,e,n,r,a,i,o,u){var c=Ee();try{gt(t)(e,n,r,a,i,o,u)}catch(t){if(Me(c),t!==t+0)throw t;Se(1,0)}},ka:function(t,e,n,r,a,i,o,u,c){var s=Ee();try{gt(t)(e,n,r,a,i,o,u,c)}catch(t){if(Me(s),t!==t+0)throw t;Se(1,0)}},C:function(t,e,n,r,a,i,o,u,c,s,l){var f=Ee();try{gt(t)(e,n,r,a,i,o,u,c,s,l)}catch(t){if(Me(f),t!==t+0)throw t;Se(1,0)}},D:function(t,e,n,r,a,i,o,u,c,s,l,f,p,h,d,y){var b=Ee();try{gt(t)(e,n,r,a,i,o,u,c,s,l,f,p,h,d,y)}catch(t){if(Me(b),t!==t+0)throw t;Se(1,0)}},fa:function(t,e,n,r,a,i,o,u){var c=Ee();try{Pe(t,e,n,r,a,i,o,u)}catch(t){if(Me(c),t!==t+0)throw t;Se(1,0)}},da:function(t,e,n,r,a,i,o,u,c,s,l,f){var p=Ee();try{Fe(t,e,n,r,a,i,o,u,c,s,l,f)}catch(t){if(Me(p),t!==t+0)throw t;Se(1,0)}},ea:function(t,e,n,r,a,i){var o=Ee();try{Ue(t,e,n,r,a,i)}catch(t){if(Me(o),t!==t+0)throw t;Se(1,0)}},o:function(t){return t},a:j||u.wasmMemory,G:function(t){oe=t},la:le,z:function(t,e,n,r){return le(t,e,n,r)}};!function(){function t(t,e){u.asm=t.exports,ht.qc.push(u.asm.sb),$=u.asm.ub,X.unshift(u.asm.Va),k=e,O||(et--,u.monitorRunDependencies&&u.monitorRunDependencies(et),0==et&&(null!==nt&&(clearInterval(nt),nt=null),rt&&(t=rt,rt=null,t())))}function e(e){t(e.instance,e.module)}function n(t){return function(){if(!M&&(v||w)){if("function"==typeof fetch&&!tt.startsWith("file://"))return fetch(tt,{credentials:"same-origin"}).then((function(t){if(!t.ok)throw"failed to load wasm binary file at \'"+tt+"\'";return t.arrayBuffer()})).catch((function(){return ot()}));if(f)return new Promise((function(t,e){f(tt,(function(e){t(new Uint8Array(e))}),e)}))}return Promise.resolve().then((function(){return ot()}))}().then((function(t){return WebAssembly.instantiate(t,r)})).then((function(t){return t})).then(t,(function(t){x("failed to asynchronously prepare wasm: "+t),at(t)}))}var r={a:pe};if(O||(et++,u.monitorRunDependencies&&u.monitorRunDependencies(et)),u.instantiateWasm)try{return u.instantiateWasm(r,t)}catch(t){return x("Module.instantiateWasm callback failed with error: "+t),!1}(M||"function"!=typeof WebAssembly.instantiateStreaming||it()||tt.startsWith("file://")||_||"function"!=typeof fetch?n(e):fetch(tt,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,r).then(e,(function(t){return x("wasm streaming compile failed: "+t),x("falling back to ArrayBuffer instantiation"),n(e)}))}))).catch(s)}(),u.___wasm_call_ctors=function(){return(u.___wasm_call_ctors=u.asm.Va).apply(null,arguments)},u._OrtInit=function(){return(u._OrtInit=u.asm.Wa).apply(null,arguments)},u._OrtCreateSessionOptions=function(){return(u._OrtCreateSessionOptions=u.asm.Xa).apply(null,arguments)},u._OrtAppendExecutionProvider=function(){return(u._OrtAppendExecutionProvider=u.asm.Ya).apply(null,arguments)},u._OrtAddSessionConfigEntry=function(){return(u._OrtAddSessionConfigEntry=u.asm.Za).apply(null,arguments)},u._OrtReleaseSessionOptions=function(){return(u._OrtReleaseSessionOptions=u.asm._a).apply(null,arguments)},u._OrtCreateSession=function(){return(u._OrtCreateSession=u.asm.$a).apply(null,arguments)},u._OrtReleaseSession=function(){return(u._OrtReleaseSession=u.asm.ab).apply(null,arguments)},u._OrtGetInputCount=function(){return(u._OrtGetInputCount=u.asm.bb).apply(null,arguments)},u._OrtGetOutputCount=function(){return(u._OrtGetOutputCount=u.asm.cb).apply(null,arguments)},u._OrtGetInputName=function(){return(u._OrtGetInputName=u.asm.db).apply(null,arguments)},u._OrtGetOutputName=function(){return(u._OrtGetOutputName=u.asm.eb).apply(null,arguments)},u._OrtFree=function(){return(u._OrtFree=u.asm.fb).apply(null,arguments)},u._OrtCreateTensor=function(){return(u._OrtCreateTensor=u.asm.gb).apply(null,arguments)},u._OrtGetTensorData=function(){return(u._OrtGetTensorData=u.asm.hb).apply(null,arguments)},u._OrtReleaseTensor=function(){return(u._OrtReleaseTensor=u.asm.ib).apply(null,arguments)},u._OrtCreateRunOptions=function(){return(u._OrtCreateRunOptions=u.asm.jb).apply(null,arguments)},u._OrtAddRunConfigEntry=function(){return(u._OrtAddRunConfigEntry=u.asm.kb).apply(null,arguments)},u._OrtReleaseRunOptions=function(){return(u._OrtReleaseRunOptions=u.asm.lb).apply(null,arguments)},u._OrtRun=function(){return(u._OrtRun=u.asm.mb).apply(null,arguments)},u._OrtEndProfiling=function(){return(u._OrtEndProfiling=u.asm.nb).apply(null,arguments)};var he=u._pthread_self=function(){return(he=u._pthread_self=u.asm.ob).apply(null,arguments)},de=u._malloc=function(){return(de=u._malloc=u.asm.pb).apply(null,arguments)},ye=u._free=function(){return(ye=u._free=u.asm.qb).apply(null,arguments)},be=u._fflush=function(){return(be=u._fflush=u.asm.rb).apply(null,arguments)};u.__emscripten_tls_init=function(){return(u.__emscripten_tls_init=u.asm.sb).apply(null,arguments)};var me=u.___funcs_on_exit=function(){return(me=u.___funcs_on_exit=u.asm.tb).apply(null,arguments)},ge=u.__emscripten_thread_init=function(){return(ge=u.__emscripten_thread_init=u.asm.vb).apply(null,arguments)};u.__emscripten_thread_crashed=function(){return(u.__emscripten_thread_crashed=u.asm.wb).apply(null,arguments)};var ve,we=u._emscripten_run_in_main_runtime_thread_js=function(){return(we=u._emscripten_run_in_main_runtime_thread_js=u.asm.xb).apply(null,arguments)},_e=u.__emscripten_proxy_execute_task_queue=function(){return(_e=u.__emscripten_proxy_execute_task_queue=u.asm.yb).apply(null,arguments)},Oe=u.__emscripten_thread_free_data=function(){return(Oe=u.__emscripten_thread_free_data=u.asm.zb).apply(null,arguments)},Ae=u.__emscripten_thread_exit=function(){return(Ae=u.__emscripten_thread_exit=u.asm.Ab).apply(null,arguments)},Se=u._setThrew=function(){return(Se=u._setThrew=u.asm.Bb).apply(null,arguments)},Te=u._emscripten_stack_set_limits=function(){return(Te=u._emscripten_stack_set_limits=u.asm.Cb).apply(null,arguments)},Ee=u.stackSave=function(){return(Ee=u.stackSave=u.asm.Db).apply(null,arguments)},Me=u.stackRestore=function(){return(Me=u.stackRestore=u.asm.Eb).apply(null,arguments)},Ce=u.stackAlloc=function(){return(Ce=u.stackAlloc=u.asm.Fb).apply(null,arguments)},xe=u.___cxa_can_catch=function(){return(xe=u.___cxa_can_catch=u.asm.Gb).apply(null,arguments)},Re=u.___cxa_is_pointer_type=function(){return(Re=u.___cxa_is_pointer_type=u.asm.Hb).apply(null,arguments)},je=u.dynCall_j=function(){return(je=u.dynCall_j=u.asm.Ib).apply(null,arguments)},ke=u.dynCall_iiiiij=function(){return(ke=u.dynCall_iiiiij=u.asm.Jb).apply(null,arguments)},De=u.dynCall_jii=function(){return(De=u.dynCall_jii=u.asm.Kb).apply(null,arguments)},Pe=u.dynCall_viiiiij=function(){return(Pe=u.dynCall_viiiiij=u.asm.Lb).apply(null,arguments)},Ue=u.dynCall_vjji=function(){return(Ue=u.dynCall_vjji=u.asm.Mb).apply(null,arguments)},Fe=u.dynCall_viiijjjii=function(){return(Fe=u.dynCall_viiijjjii=u.asm.Nb).apply(null,arguments)},Ie=u.dynCall_iij=function(){return(Ie=u.dynCall_iij=u.asm.Ob).apply(null,arguments)},We=u.dynCall_ji=function(){return(We=u.dynCall_ji=u.asm.Pb).apply(null,arguments)},He=u.dynCall_iiiiiij=function(){return(He=u.dynCall_iiiiiij=u.asm.Qb).apply(null,arguments)},Le=u.dynCall_iiij=function(){return(Le=u.dynCall_iiij=u.asm.Rb).apply(null,arguments)};function ze(){function t(){if(!ve&&(ve=!0,u.calledRun=!0,!H)&&(O||dt(X),c(u),u.onRuntimeInitialized&&u.onRuntimeInitialized(),!O)){if(u.postRun)for("function"==typeof u.postRun&&(u.postRun=[u.postRun]);u.postRun.length;){var t=u.postRun.shift();Z.unshift(t)}dt(Z)}}if(!(0<et))if(O)c(u),O||dt(X),postMessage({cmd:"loaded"});else{if(u.preRun)for("function"==typeof u.preRun&&(u.preRun=[u.preRun]);u.preRun.length;)K();dt(q),0<et||(u.setStatus?(u.setStatus("Running..."),setTimeout((function(){setTimeout((function(){u.setStatus("")}),1),t()}),1)):t())}}if(u.UTF8ToString=Y,u.stringToUTF8=function(t,e,n){return B(t,r(),e,n)},u.lengthBytesUTF8=G,u.keepRuntimeAlive=Q,u.wasmMemory=j,u.stackSave=Ee,u.stackRestore=Me,u.stackAlloc=Ce,u.ExitStatus=ct,u.PThread=ht,rt=function t(){ve||ze(),ve||(rt=t)},u.preInit)for("function"==typeof u.preInit&&(u.preInit=[u.preInit]);0<u.preInit.length;)u.preInit.pop()();return ze(),t.ready});t.exports=r},932:(t,e,n)=>{var _scriptDir,r=(_scriptDir=(_scriptDir="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0)||"/index.js",function(t){var e,r,a;t=t||{},e||(e=void 0!==t?t:{}),e.ready=new Promise((function(t,e){r=t,a=e}));var i,o,u,c,s,l,f=Object.assign({},e),p="./this.program",h=(t,e)=>{throw e},d="object"==typeof window,y="function"==typeof importScripts,b="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,m="";b?(m=y?n(908).dirname(m)+"/":"//",l=()=>{s||(c=n(384),s=n(908))},i=function(t,e){return l(),t=s.normalize(t),c.readFileSync(t,e?void 0:"utf8")},u=t=>((t=i(t,!0)).buffer||(t=new Uint8Array(t)),t),o=(t,e,n)=>{l(),t=s.normalize(t),c.readFile(t,(function(t,r){t?n(t):e(r.buffer)}))},1<process.argv.length&&(p=process.argv[1].replace(/\\\\/g,"/")),process.argv.slice(2),process.on("uncaughtException",(function(t){if(!(t instanceof J))throw t})),process.on("unhandledRejection",(function(t){throw t})),h=(t,e)=>{if(_||0<L)throw process.exitCode=t,e;e instanceof J||w("exiting due to exception: "+e),process.exit(t)},e.inspect=function(){return"[Emscripten Module object]"}):(d||y)&&(y?m=self.location.href:"undefined"!=typeof document&&document.currentScript&&(m=document.currentScript.src),_scriptDir&&(m=_scriptDir),m=0!==m.indexOf("blob:")?m.substr(0,m.replace(/[?#].*/,"").lastIndexOf("/")+1):"",i=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),e.responseText},y&&(u=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}),o=(t,e,n)=>{var r=new XMLHttpRequest;r.open("GET",t,!0),r.responseType="arraybuffer",r.onload=()=>{200==r.status||0==r.status&&r.response?e(r.response):n()},r.onerror=n,r.send(null)});var g,v=e.print||console.log.bind(console),w=e.printErr||console.warn.bind(console);Object.assign(e,f),f=null,e.thisProgram&&(p=e.thisProgram),e.quit&&(h=e.quit),e.wasmBinary&&(g=e.wasmBinary);var _=e.noExitRuntime||!1;"object"!=typeof WebAssembly&&V("no native wasm support detected");var O,A,S,T,E,M,C=!1,x="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function R(t,e,n){var r=(e>>>=0)+n;for(n=e;t[n]&&!(n>=r);)++n;if(16<n-e&&t.buffer&&x)return x.decode(t.subarray(e,n));for(r="";e<n;){var a=t[e++];if(128&a){var i=63&t[e++];if(192==(224&a))r+=String.fromCharCode((31&a)<<6|i);else{var o=63&t[e++];65536>(a=224==(240&a)?(15&a)<<12|i<<6|o:(7&a)<<18|i<<12|o<<6|63&t[e++])?r+=String.fromCharCode(a):(a-=65536,r+=String.fromCharCode(55296|a>>10,56320|1023&a))}}else r+=String.fromCharCode(a)}return r}function j(t,e){return(t>>>=0)?R(T,t,e):""}function k(t,e,n,r){if(!(0<r))return 0;var a=n>>>=0;r=n+r-1;for(var i=0;i<t.length;++i){var o=t.charCodeAt(i);if(55296<=o&&57343>=o&&(o=65536+((1023&o)<<10)|1023&t.charCodeAt(++i)),127>=o){if(n>=r)break;e[n++>>>0]=o}else{if(2047>=o){if(n+1>=r)break;e[n++>>>0]=192|o>>6}else{if(65535>=o){if(n+2>=r)break;e[n++>>>0]=224|o>>12}else{if(n+3>=r)break;e[n++>>>0]=240|o>>18,e[n++>>>0]=128|o>>12&63}e[n++>>>0]=128|o>>6&63}e[n++>>>0]=128|63&o}}return e[n>>>0]=0,n-a}function D(t){for(var e=0,n=0;n<t.length;++n){var r=t.charCodeAt(n);127>=r?e++:2047>=r?e+=2:55296<=r&&57343>=r?(e+=4,++n):e+=3}return e}function P(){var t=O.buffer;A=t,e.HEAP8=S=new Int8Array(t),e.HEAP16=new Int16Array(t),e.HEAP32=E=new Int32Array(t),e.HEAPU8=T=new Uint8Array(t),e.HEAPU16=new Uint16Array(t),e.HEAPU32=M=new Uint32Array(t),e.HEAPF32=new Float32Array(t),e.HEAPF64=new Float64Array(t)}var U,F=[],I=[],W=[],H=[],L=0;function z(){var t=e.preRun.shift();F.unshift(t)}var Y,B=0,G=null,N=null;function V(t){throw e.onAbort&&e.onAbort(t),w(t="Aborted("+t+")"),C=!0,t=new WebAssembly.RuntimeError(t+". Build with -sASSERTIONS for more info."),a(t),t}function $(){return Y.startsWith("data:application/octet-stream;base64,")}if(Y="ort-wasm.wasm",!$()){var q=Y;Y=e.locateFile?e.locateFile(q,m):m+q}function X(){var t=Y;try{if(t==Y&&g)return new Uint8Array(g);if(u)return u(t);throw"both async and sync fetching of the wasm failed"}catch(t){V(t)}}function J(t){this.name="ExitStatus",this.message="Program terminated with exit("+t+")",this.status=t}function Z(t){for(;0<t.length;)t.shift()(e)}var Q=[],K=0,tt=0;function et(t){this.Db=t,this.zb=t-24,this.Ub=function(t){M[this.zb+4>>2>>>0]=t},this.Eb=function(){return M[this.zb+4>>2>>>0]},this.Sb=function(t){M[this.zb+8>>2>>>0]=t},this.Wb=function(){return M[this.zb+8>>2>>>0]},this.Tb=function(){E[this.zb>>2>>>0]=0},this.Ib=function(t){S[this.zb+12>>0>>>0]=t?1:0},this.Pb=function(){return 0!=S[this.zb+12>>0>>>0]},this.Jb=function(t){S[this.zb+13>>0>>>0]=t?1:0},this.Lb=function(){return 0!=S[this.zb+13>>0>>>0]},this.Rb=function(t,e){this.Fb(0),this.Ub(t),this.Sb(e),this.Tb(),this.Ib(!1),this.Jb(!1)},this.Nb=function(){E[this.zb>>2>>>0]+=1},this.Xb=function(){var t=E[this.zb>>2>>>0];return E[this.zb>>2>>>0]=t-1,1===t},this.Fb=function(t){M[this.zb+16>>2>>>0]=t},this.Ob=function(){return M[this.zb+16>>2>>>0]},this.Qb=function(){if(Mt(this.Eb()))return M[this.Db>>2>>>0];var t=this.Ob();return 0!==t?t:this.Db}}function nt(t){return vt(new et(t).zb)}var rt=[];function at(t){var e=rt[t];return e||(t>=rt.length&&(rt.length=t+1),rt[t]=e=U.get(t)),e}function it(t){var e=D(t)+1,n=gt(e);return n&&k(t,S,n,e),n}var ot={};function ut(){if(!ct){var t,e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:p||"./this.program"};for(t in ot)void 0===ot[t]?delete e[t]:e[t]=ot[t];var n=[];for(t in e)n.push(t+"="+e[t]);ct=n}return ct}var ct,st=[null,[],[]];function lt(t,e){var n=st[t];0===e||10===e?((1===t?v:w)(R(n,0)),n.length=0):n.push(e)}var ft=0;function pt(t){return 0==t%4&&(0!=t%100||0==t%400)}var ht=[31,29,31,30,31,30,31,31,30,31,30,31],dt=[31,28,31,30,31,30,31,31,30,31,30,31];function yt(t,e,n,r){function a(t,e,n){for(t="number"==typeof t?t.toString():t||"";t.length<e;)t=n[0]+t;return t}function i(t,e){return a(t,e,"0")}function o(t,e){function n(t){return 0>t?-1:0<t?1:0}var r;return 0===(r=n(t.getFullYear()-e.getFullYear()))&&0===(r=n(t.getMonth()-e.getMonth()))&&(r=n(t.getDate()-e.getDate())),r}function u(t){switch(t.getDay()){case 0:return new Date(t.getFullYear()-1,11,29);case 1:return t;case 2:return new Date(t.getFullYear(),0,3);case 3:return new Date(t.getFullYear(),0,2);case 4:return new Date(t.getFullYear(),0,1);case 5:return new Date(t.getFullYear()-1,11,31);case 6:return new Date(t.getFullYear()-1,11,30)}}function c(t){var e=t.Bb;for(t=new Date(new Date(t.Cb+1900,0,1).getTime());0<e;){var n=t.getMonth(),r=(pt(t.getFullYear())?ht:dt)[n];if(!(e>r-t.getDate())){t.setDate(t.getDate()+e);break}e-=r-t.getDate()+1,t.setDate(1),11>n?t.setMonth(n+1):(t.setMonth(0),t.setFullYear(t.getFullYear()+1))}return n=new Date(t.getFullYear()+1,0,4),e=u(new Date(t.getFullYear(),0,4)),n=u(n),0>=o(e,t)?0>=o(n,t)?t.getFullYear()+1:t.getFullYear():t.getFullYear()-1}var s=E[r+40>>2>>>0];for(var l in r={$b:E[r>>2>>>0],Zb:E[r+4>>2>>>0],Gb:E[r+8>>2>>>0],Kb:E[r+12>>2>>>0],Hb:E[r+16>>2>>>0],Cb:E[r+20>>2>>>0],Ab:E[r+24>>2>>>0],Bb:E[r+28>>2>>>0],bc:E[r+32>>2>>>0],Yb:E[r+36>>2>>>0],ac:s?j(s):""},n=j(n),s={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})n=n.replace(new RegExp(l,"g"),s[l]);var f="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),p="January February March April May June July August September October November December".split(" ");for(l in s={"%a":function(t){return f[t.Ab].substring(0,3)},"%A":function(t){return f[t.Ab]},"%b":function(t){return p[t.Hb].substring(0,3)},"%B":function(t){return p[t.Hb]},"%C":function(t){return i((t.Cb+1900)/100|0,2)},"%d":function(t){return i(t.Kb,2)},"%e":function(t){return a(t.Kb,2," ")},"%g":function(t){return c(t).toString().substring(2)},"%G":function(t){return c(t)},"%H":function(t){return i(t.Gb,2)},"%I":function(t){return 0==(t=t.Gb)?t=12:12<t&&(t-=12),i(t,2)},"%j":function(t){for(var e=0,n=0;n<=t.Hb-1;e+=(pt(t.Cb+1900)?ht:dt)[n++]);return i(t.Kb+e,3)},"%m":function(t){return i(t.Hb+1,2)},"%M":function(t){return i(t.Zb,2)},"%n":function(){return"\\n"},"%p":function(t){return 0<=t.Gb&&12>t.Gb?"AM":"PM"},"%S":function(t){return i(t.$b,2)},"%t":function(){return"\\t"},"%u":function(t){return t.Ab||7},"%U":function(t){return i(Math.floor((t.Bb+7-t.Ab)/7),2)},"%V":function(t){var e=Math.floor((t.Bb+7-(t.Ab+6)%7)/7);if(2>=(t.Ab+371-t.Bb-2)%7&&e++,e)53==e&&(4==(n=(t.Ab+371-t.Bb)%7)||3==n&&pt(t.Cb)||(e=1));else{e=52;var n=(t.Ab+7-t.Bb-1)%7;(4==n||5==n&&pt(t.Cb%400-1))&&e++}return i(e,2)},"%w":function(t){return t.Ab},"%W":function(t){return i(Math.floor((t.Bb+7-(t.Ab+6)%7)/7),2)},"%y":function(t){return(t.Cb+1900).toString().substring(2)},"%Y":function(t){return t.Cb+1900},"%z":function(t){var e=0<=(t=t.Yb);return t=Math.abs(t)/60,(e?"+":"-")+String("0000"+(t/60*100+t%60)).slice(-4)},"%Z":function(t){return t.ac},"%%":function(){return"%"}},n=n.replace(/%%/g,"\\0\\0"),s)n.includes(l)&&(n=n.replace(new RegExp(l,"g"),s[l](r)));return l=function(t){var e=Array(D(t)+1);return k(t,e,0,e.length),e}(n=n.replace(/\\0\\0/g,"%")),l.length>e?0:(S.set(l,t>>>0),l.length-1)}var bt={a:function(t){return gt(t+24)+24},m:function(t){return(t=new et(t)).Pb()||(t.Ib(!0),K--),t.Jb(!1),Q.push(t),t.Nb(),t.Qb()},ia:function(t){throw w("Unexpected exception thrown, this is not properly supported - aborting"),C=!0,t},w:function(){Ot(0);var t=Q.pop();if(t.Xb()&&!t.Lb()){var e=t.Wb();e&&at(e)(t.Db),nt(t.Db)}tt=0},d:function(){var t=tt;if(!t)return ft=0;var e=new et(t);e.Fb(t);var n=e.Eb();if(!n)return ft=0,t;for(var r=Array.prototype.slice.call(arguments),a=0;a<r.length;a++){var i=r[a];if(0===i||i===n)break;if(Et(i,n,e.zb+16))return ft=i,t}return ft=n,t},k:function(){var t=tt;if(!t)return ft=0;var e=new et(t);e.Fb(t);var n=e.Eb();if(!n)return ft=0,t;for(var r=Array.prototype.slice.call(arguments),a=0;a<r.length;a++){var i=r[a];if(0===i||i===n)break;if(Et(i,n,e.zb+16))return ft=i,t}return ft=n,t},g:function(){var t=tt;if(!t)return ft=0;var e=new et(t);e.Fb(t);var n=e.Eb();if(!n)return ft=0,t;for(var r=Array.prototype.slice.call(arguments),a=0;a<r.length;a++){var i=r[a];if(0===i||i===n)break;if(Et(i,n,e.zb+16))return ft=i,t}return ft=n,t},s:nt,L:function(){var t=Q.pop();t||V("no exception to throw");var e=t.Db;throw t.Lb()||(Q.push(t),t.Jb(!0),t.Ib(!1),K++),tt=e,e},b:function(t,e,n){throw new et(t).Rb(e,n),tt=t,K++,t},la:function(){return K},i:function(t){throw tt||(tt=t),t},H:function(){return 0},Ba:function(){},pa:function(){},ra:function(){},ka:function(){return 0},za:function(){},ua:function(){},ya:function(){},R:function(){},qa:function(){},na:function(){},Aa:function(){},oa:function(){},Ha:function(){},Ja:function(){V("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},Ia:function(){V("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},S:function(){return Date.now()},Ca:function(){return!0},Da:function(t,e){t=new Date(1e3*(M[t>>>2]+4294967296*E[t+4>>>2])),E[e>>2>>>0]=t.getUTCSeconds(),E[e+4>>2>>>0]=t.getUTCMinutes(),E[e+8>>2>>>0]=t.getUTCHours(),E[e+12>>2>>>0]=t.getUTCDate(),E[e+16>>2>>>0]=t.getUTCMonth(),E[e+20>>2>>>0]=t.getUTCFullYear()-1900,E[e+24>>2>>>0]=t.getUTCDay(),E[e+28>>2>>>0]=(t.getTime()-Date.UTC(t.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},Ea:function(t,e){t=new Date(1e3*(M[t>>>2]+4294967296*E[t+4>>>2])),E[e>>2>>>0]=t.getSeconds(),E[e+4>>2>>>0]=t.getMinutes(),E[e+8>>2>>>0]=t.getHours(),E[e+12>>2>>>0]=t.getDate(),E[e+16>>2>>>0]=t.getMonth(),E[e+20>>2>>>0]=t.getFullYear()-1900,E[e+24>>2>>>0]=t.getDay();var n=new Date(t.getFullYear(),0,1);E[e+28>>2>>>0]=(t.getTime()-n.getTime())/864e5|0,E[e+36>>2>>>0]=-60*t.getTimezoneOffset();var r=new Date(t.getFullYear(),6,1).getTimezoneOffset();n=n.getTimezoneOffset(),E[e+32>>2>>>0]=0|(r!=n&&t.getTimezoneOffset()==Math.min(n,r))},Fa:function(t){var e=new Date(E[t+20>>2>>>0]+1900,E[t+16>>2>>>0],E[t+12>>2>>>0],E[t+8>>2>>>0],E[t+4>>2>>>0],E[t>>2>>>0],0),n=E[t+32>>2>>>0],r=e.getTimezoneOffset(),a=new Date(e.getFullYear(),0,1),i=new Date(e.getFullYear(),6,1).getTimezoneOffset(),o=a.getTimezoneOffset(),u=Math.min(o,i);return 0>n?E[t+32>>2>>>0]=Number(i!=o&&u==r):0<n!=(u==r)&&(i=Math.max(o,i),e.setTime(e.getTime()+6e4*((0<n?u:i)-r))),E[t+24>>2>>>0]=e.getDay(),E[t+28>>2>>>0]=(e.getTime()-a.getTime())/864e5|0,E[t>>2>>>0]=e.getSeconds(),E[t+4>>2>>>0]=e.getMinutes(),E[t+8>>2>>>0]=e.getHours(),E[t+12>>2>>>0]=e.getDate(),E[t+16>>2>>>0]=e.getMonth(),e.getTime()/1e3|0},sa:function(){return-52},ta:function(){},Ga:function t(e,n,r){t.Vb||(t.Vb=!0,function(t,e,n){function r(t){return(t=t.toTimeString().match(/\\(([A-Za-z ]+)\\)$/))?t[1]:"GMT"}var a=(new Date).getFullYear(),i=new Date(a,0,1),o=new Date(a,6,1);a=i.getTimezoneOffset();var u=o.getTimezoneOffset();E[t>>2>>>0]=60*Math.max(a,u),E[e>>2>>>0]=Number(a!=u),t=r(i),e=r(o),t=it(t),e=it(e),u<a?(M[n>>2>>>0]=t,M[n+4>>2>>>0]=e):(M[n>>2>>>0]=e,M[n+4>>2>>>0]=t)}(e,n,r))},B:function(){V("")},ma:function(){return 4294901760},I:b?()=>{var t=process.hrtime();return 1e3*t[0]+t[1]/1e6}:()=>performance.now(),xa:function(t,e,n){T.copyWithin(t>>>0,e>>>0,e+n>>>0)},G:function(t){var e=T.length;if(4294901760<(t>>>=0))return!1;for(var n=1;4>=n;n*=2){var r=e*(1+.2/n);r=Math.min(r,t+100663296);var a=Math;r=Math.max(t,r),a=a.min.call(a,4294901760,r+(65536-r%65536)%65536);t:{try{O.grow(a-A.byteLength+65535>>>16),P();var i=1;break t}catch(t){}i=void 0}if(i)return!0}return!1},va:function(t,e){var n=0;return ut().forEach((function(r,a){var i=e+n;for(a=M[t+4*a>>2>>>0]=i,i=0;i<r.length;++i)S[a++>>0>>>0]=r.charCodeAt(i);S[a>>0>>>0]=0,n+=r.length+1})),0},wa:function(t,e){var n=ut();M[t>>2>>>0]=n.length;var r=0;return n.forEach((function(t){r+=t.length+1})),M[e>>2>>>0]=r,0},ba:function(t){_||0<L||(_t(),Z(W),wt(0),st[1].length&&lt(1,10),st[2].length&&lt(2,10)),_||0<L||(e.onExit&&e.onExit(t),C=!0),h(t,new J(t))},E:function(){return 52},Q:function(){return 52},ca:function(){return 70},P:function(t,e,n,r){for(var a=0,i=0;i<n;i++){var o=M[e>>2>>>0],u=M[e+4>>2>>>0];e+=8;for(var c=0;c<u;c++)lt(t,T[o+c>>>0]);a+=u}return M[r>>2>>>0]=a,0},c:function(){return ft},ja:function t(e,r){t.Mb||(t.Mb=function(){if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues){var t=new Uint8Array(1);return()=>(crypto.getRandomValues(t),t[0])}if(b)try{var e=n(Object(function(){var t=new Error("Cannot find module \'crypto\'");throw t.code="MODULE_NOT_FOUND",t}()));return()=>e.randomBytes(1)[0]}catch(t){}return()=>V("randomDevice")}());for(var a=0;a<r;a++)S[e+a>>0>>>0]=t.Mb();return 0},ea:function(t,e,n){var r=At();try{return at(t)(e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},fa:function(t,e,n){var r=At();try{return at(t)(e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},J:function(t){var e=At();try{return at(t)()}catch(t){if(St(e),t!==t+0)throw t;Ot(1,0)}},e:function(t,e){var n=At();try{return at(t)(e)}catch(t){if(St(n),t!==t+0)throw t;Ot(1,0)}},N:function(t,e,n){var r=At();try{return at(t)(e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},O:function(t,e,n){var r=At();try{return at(t)(e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},j:function(t,e,n){var r=At();try{return at(t)(e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},o:function(t,e,n,r){var a=At();try{return at(t)(e,n,r)}catch(t){if(St(a),t!==t+0)throw t;Ot(1,0)}},p:function(t,e,n,r,a){var i=At();try{return at(t)(e,n,r,a)}catch(t){if(St(i),t!==t+0)throw t;Ot(1,0)}},M:function(t,e,n,r,a,i){var o=At();try{return at(t)(e,n,r,a,i)}catch(t){if(St(o),t!==t+0)throw t;Ot(1,0)}},r:function(t,e,n,r,a,i){var o=At();try{return at(t)(e,n,r,a,i)}catch(t){if(St(o),t!==t+0)throw t;Ot(1,0)}},v:function(t,e,n,r,a,i,o){var u=At();try{return at(t)(e,n,r,a,i,o)}catch(t){if(St(u),t!==t+0)throw t;Ot(1,0)}},K:function(t,e,n,r,a,i,o,u){var c=At();try{return at(t)(e,n,r,a,i,o,u)}catch(t){if(St(c),t!==t+0)throw t;Ot(1,0)}},D:function(t,e,n,r,a,i,o,u,c,s,l,f){var p=At();try{return at(t)(e,n,r,a,i,o,u,c,s,l,f)}catch(t){if(St(p),t!==t+0)throw t;Ot(1,0)}},X:function(t,e,n,r,a,i,o,u){var c=At();try{return Ft(t,e,n,r,a,i,o,u)}catch(t){if(St(c),t!==t+0)throw t;Ot(1,0)}},V:function(t,e,n,r,a,i,o){var u=At();try{return xt(t,e,n,r,a,i,o)}catch(t){if(St(u),t!==t+0)throw t;Ot(1,0)}},U:function(t,e,n,r,a){var i=At();try{return It(t,e,n,r,a)}catch(t){if(St(i),t!==t+0)throw t;Ot(1,0)}},Z:function(t,e,n,r){var a=At();try{return Pt(t,e,n,r)}catch(t){if(St(a),t!==t+0)throw t;Ot(1,0)}},W:function(t){var e=At();try{return Ct(t)}catch(t){if(St(e),t!==t+0)throw t;Ot(1,0)}},Y:function(t,e){var n=At();try{return Ut(t,e)}catch(t){if(St(n),t!==t+0)throw t;Ot(1,0)}},T:function(t,e,n){var r=At();try{return Rt(t,e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},f:function(t){var e=At();try{at(t)()}catch(t){if(St(e),t!==t+0)throw t;Ot(1,0)}},q:function(t,e){var n=At();try{at(t)(e)}catch(t){if(St(n),t!==t+0)throw t;Ot(1,0)}},h:function(t,e,n){var r=At();try{at(t)(e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},da:function(t,e,n,r){var a=At();try{at(t)(e,n,r)}catch(t){if(St(a),t!==t+0)throw t;Ot(1,0)}},l:function(t,e,n,r){var a=At();try{at(t)(e,n,r)}catch(t){if(St(a),t!==t+0)throw t;Ot(1,0)}},t:function(t,e,n,r,a){var i=At();try{at(t)(e,n,r,a)}catch(t){if(St(i),t!==t+0)throw t;Ot(1,0)}},u:function(t,e,n,r,a,i){var o=At();try{at(t)(e,n,r,a,i)}catch(t){if(St(o),t!==t+0)throw t;Ot(1,0)}},x:function(t,e,n,r,a,i,o){var u=At();try{at(t)(e,n,r,a,i,o)}catch(t){if(St(u),t!==t+0)throw t;Ot(1,0)}},z:function(t,e,n,r,a,i,o,u){var c=At();try{at(t)(e,n,r,a,i,o,u)}catch(t){if(St(c),t!==t+0)throw t;Ot(1,0)}},ga:function(t,e,n,r,a,i,o,u,c){var s=At();try{at(t)(e,n,r,a,i,o,u,c)}catch(t){if(St(s),t!==t+0)throw t;Ot(1,0)}},A:function(t,e,n,r,a,i,o,u,c,s,l){var f=At();try{at(t)(e,n,r,a,i,o,u,c,s,l)}catch(t){if(St(f),t!==t+0)throw t;Ot(1,0)}},C:function(t,e,n,r,a,i,o,u,c,s,l,f,p,h,d,y){var b=At();try{at(t)(e,n,r,a,i,o,u,c,s,l,f,p,h,d,y)}catch(t){if(St(b),t!==t+0)throw t;Ot(1,0)}},aa:function(t,e,n,r,a,i,o,u){var c=At();try{jt(t,e,n,r,a,i,o,u)}catch(t){if(St(c),t!==t+0)throw t;Ot(1,0)}},_:function(t,e,n,r,a,i,o,u,c,s,l,f){var p=At();try{Dt(t,e,n,r,a,i,o,u,c,s,l,f)}catch(t){if(St(p),t!==t+0)throw t;Ot(1,0)}},$:function(t,e,n,r,a,i){var o=At();try{kt(t,e,n,r,a,i)}catch(t){if(St(o),t!==t+0)throw t;Ot(1,0)}},n:function(t){return t},F:function(t){ft=t},ha:yt,y:function(t,e,n,r){return yt(t,e,n,r)}};!function(){function t(t){e.asm=t.exports,O=e.asm.Ka,P(),U=e.asm.ib,I.unshift(e.asm.La),B--,e.monitorRunDependencies&&e.monitorRunDependencies(B),0==B&&(null!==G&&(clearInterval(G),G=null),N&&(t=N,N=null,t()))}function n(e){t(e.instance)}function r(t){return function(){if(!g&&(d||y)){if("function"==typeof fetch&&!Y.startsWith("file://"))return fetch(Y,{credentials:"same-origin"}).then((function(t){if(!t.ok)throw"failed to load wasm binary file at \'"+Y+"\'";return t.arrayBuffer()})).catch((function(){return X()}));if(o)return new Promise((function(t,e){o(Y,(function(e){t(new Uint8Array(e))}),e)}))}return Promise.resolve().then((function(){return X()}))}().then((function(t){return WebAssembly.instantiate(t,i)})).then((function(t){return t})).then(t,(function(t){w("failed to asynchronously prepare wasm: "+t),V(t)}))}var i={a:bt};if(B++,e.monitorRunDependencies&&e.monitorRunDependencies(B),e.instantiateWasm)try{return e.instantiateWasm(i,t)}catch(t){return w("Module.instantiateWasm callback failed with error: "+t),!1}(g||"function"!=typeof WebAssembly.instantiateStreaming||$()||Y.startsWith("file://")||b||"function"!=typeof fetch?r(n):fetch(Y,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,i).then(n,(function(t){return w("wasm streaming compile failed: "+t),w("falling back to ArrayBuffer instantiation"),r(n)}))}))).catch(a)}(),e.___wasm_call_ctors=function(){return(e.___wasm_call_ctors=e.asm.La).apply(null,arguments)},e._OrtInit=function(){return(e._OrtInit=e.asm.Ma).apply(null,arguments)},e._OrtCreateSessionOptions=function(){return(e._OrtCreateSessionOptions=e.asm.Na).apply(null,arguments)},e._OrtAppendExecutionProvider=function(){return(e._OrtAppendExecutionProvider=e.asm.Oa).apply(null,arguments)},e._OrtAddSessionConfigEntry=function(){return(e._OrtAddSessionConfigEntry=e.asm.Pa).apply(null,arguments)},e._OrtReleaseSessionOptions=function(){return(e._OrtReleaseSessionOptions=e.asm.Qa).apply(null,arguments)},e._OrtCreateSession=function(){return(e._OrtCreateSession=e.asm.Ra).apply(null,arguments)},e._OrtReleaseSession=function(){return(e._OrtReleaseSession=e.asm.Sa).apply(null,arguments)},e._OrtGetInputCount=function(){return(e._OrtGetInputCount=e.asm.Ta).apply(null,arguments)},e._OrtGetOutputCount=function(){return(e._OrtGetOutputCount=e.asm.Ua).apply(null,arguments)},e._OrtGetInputName=function(){return(e._OrtGetInputName=e.asm.Va).apply(null,arguments)},e._OrtGetOutputName=function(){return(e._OrtGetOutputName=e.asm.Wa).apply(null,arguments)},e._OrtFree=function(){return(e._OrtFree=e.asm.Xa).apply(null,arguments)},e._OrtCreateTensor=function(){return(e._OrtCreateTensor=e.asm.Ya).apply(null,arguments)},e._OrtGetTensorData=function(){return(e._OrtGetTensorData=e.asm.Za).apply(null,arguments)},e._OrtReleaseTensor=function(){return(e._OrtReleaseTensor=e.asm._a).apply(null,arguments)},e._OrtCreateRunOptions=function(){return(e._OrtCreateRunOptions=e.asm.$a).apply(null,arguments)},e._OrtAddRunConfigEntry=function(){return(e._OrtAddRunConfigEntry=e.asm.ab).apply(null,arguments)},e._OrtReleaseRunOptions=function(){return(e._OrtReleaseRunOptions=e.asm.bb).apply(null,arguments)},e._OrtRun=function(){return(e._OrtRun=e.asm.cb).apply(null,arguments)},e._OrtEndProfiling=function(){return(e._OrtEndProfiling=e.asm.db).apply(null,arguments)};var mt,gt=e._malloc=function(){return(gt=e._malloc=e.asm.eb).apply(null,arguments)},vt=e._free=function(){return(vt=e._free=e.asm.fb).apply(null,arguments)},wt=e._fflush=function(){return(wt=e._fflush=e.asm.gb).apply(null,arguments)},_t=e.___funcs_on_exit=function(){return(_t=e.___funcs_on_exit=e.asm.hb).apply(null,arguments)},Ot=e._setThrew=function(){return(Ot=e._setThrew=e.asm.jb).apply(null,arguments)},At=e.stackSave=function(){return(At=e.stackSave=e.asm.kb).apply(null,arguments)},St=e.stackRestore=function(){return(St=e.stackRestore=e.asm.lb).apply(null,arguments)},Tt=e.stackAlloc=function(){return(Tt=e.stackAlloc=e.asm.mb).apply(null,arguments)},Et=e.___cxa_can_catch=function(){return(Et=e.___cxa_can_catch=e.asm.nb).apply(null,arguments)},Mt=e.___cxa_is_pointer_type=function(){return(Mt=e.___cxa_is_pointer_type=e.asm.ob).apply(null,arguments)},Ct=e.dynCall_j=function(){return(Ct=e.dynCall_j=e.asm.pb).apply(null,arguments)},xt=e.dynCall_iiiiij=function(){return(xt=e.dynCall_iiiiij=e.asm.qb).apply(null,arguments)},Rt=e.dynCall_jii=function(){return(Rt=e.dynCall_jii=e.asm.rb).apply(null,arguments)},jt=e.dynCall_viiiiij=function(){return(jt=e.dynCall_viiiiij=e.asm.sb).apply(null,arguments)},kt=e.dynCall_vjji=function(){return(kt=e.dynCall_vjji=e.asm.tb).apply(null,arguments)},Dt=e.dynCall_viiijjjii=function(){return(Dt=e.dynCall_viiijjjii=e.asm.ub).apply(null,arguments)},Pt=e.dynCall_iij=function(){return(Pt=e.dynCall_iij=e.asm.vb).apply(null,arguments)},Ut=e.dynCall_ji=function(){return(Ut=e.dynCall_ji=e.asm.wb).apply(null,arguments)},Ft=e.dynCall_iiiiiij=function(){return(Ft=e.dynCall_iiiiiij=e.asm.xb).apply(null,arguments)},It=e.dynCall_iiij=function(){return(It=e.dynCall_iiij=e.asm.yb).apply(null,arguments)};function Wt(){function t(){if(!mt&&(mt=!0,e.calledRun=!0,!C)){if(Z(I),r(e),e.onRuntimeInitialized&&e.onRuntimeInitialized(),e.postRun)for("function"==typeof e.postRun&&(e.postRun=[e.postRun]);e.postRun.length;){var t=e.postRun.shift();H.unshift(t)}Z(H)}}if(!(0<B)){if(e.preRun)for("function"==typeof e.preRun&&(e.preRun=[e.preRun]);e.preRun.length;)z();Z(F),0<B||(e.setStatus?(e.setStatus("Running..."),setTimeout((function(){setTimeout((function(){e.setStatus("")}),1),t()}),1)):t())}}if(e.UTF8ToString=j,e.stringToUTF8=function(t,e,n){return k(t,T,e,n)},e.lengthBytesUTF8=D,e.stackSave=At,e.stackRestore=St,e.stackAlloc=Tt,N=function t(){mt||Wt(),mt||(N=t)},e.preInit)for("function"==typeof e.preInit&&(e.preInit=[e.preInit]);0<e.preInit.length;)e.preInit.pop()();return Wt(),t.ready});t.exports=r},967:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.iterateExtraOptions=void 0,e.iterateExtraOptions=(t,n,r,a)=>{if("object"==typeof t&&null!==t){if(r.has(t))throw new Error("Circular reference in options");r.add(t)}Object.entries(t).forEach((([t,i])=>{const o=n?n+t:t;if("object"==typeof i)(0,e.iterateExtraOptions)(i,o+".",r,a);else if("string"==typeof i||"number"==typeof i)a(o,i.toString());else{if("boolean"!=typeof i)throw new Error("Can\'t handle extra config type: "+typeof i);a(o,i?"1":"0")}}))}},586:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setRunOptions=void 0;const r=n(967),a=n(983),i=n(361);e.setRunOptions=t=>{const e=(0,i.getInstance)();let n=0;const o=[],u=t||{};try{if(void 0===(null==t?void 0:t.logSeverityLevel))u.logSeverityLevel=2;else if("number"!=typeof t.logSeverityLevel||!Number.isInteger(t.logSeverityLevel)||t.logSeverityLevel<0||t.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${t.logSeverityLevel}`);if(void 0===(null==t?void 0:t.logVerbosityLevel))u.logVerbosityLevel=0;else if("number"!=typeof t.logVerbosityLevel||!Number.isInteger(t.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${t.logVerbosityLevel}`);void 0===(null==t?void 0:t.terminate)&&(u.terminate=!1);let i=0;if(void 0!==(null==t?void 0:t.tag)&&(i=(0,a.allocWasmString)(t.tag,o)),n=e._OrtCreateRunOptions(u.logSeverityLevel,u.logVerbosityLevel,!!u.terminate,i),0===n)throw new Error("Can\'t create run options");return void 0!==(null==t?void 0:t.extra)&&(0,r.iterateExtraOptions)(t.extra,"",new WeakSet,((t,r)=>{const i=(0,a.allocWasmString)(t,o),u=(0,a.allocWasmString)(r,o);if(0!==e._OrtAddRunConfigEntry(n,i,u))throw new Error(`Can\'t set a run config entry: ${t} - ${r}`)})),[n,o]}catch(t){throw 0!==n&&e._OrtReleaseRunOptions(n),o.forEach(e._free),t}}},919:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setSessionOptions=void 0;const r=n(967),a=n(983),i=n(361);e.setSessionOptions=t=>{const e=(0,i.getInstance)();let n=0;const o=[],u=t||{};(t=>{t.extra||(t.extra={}),t.extra.session||(t.extra.session={});const e=t.extra.session;e.use_ort_model_bytes_directly||(e.use_ort_model_bytes_directly="1")})(u);try{void 0===(null==t?void 0:t.graphOptimizationLevel)&&(u.graphOptimizationLevel="all");const c=(t=>{switch(t){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${t}`)}})(u.graphOptimizationLevel);void 0===(null==t?void 0:t.enableCpuMemArena)&&(u.enableCpuMemArena=!0),void 0===(null==t?void 0:t.enableMemPattern)&&(u.enableMemPattern=!0),void 0===(null==t?void 0:t.executionMode)&&(u.executionMode="sequential");const s=(t=>{switch(t){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${t}`)}})(u.executionMode);let l=0;if(void 0!==(null==t?void 0:t.logId)&&(l=(0,a.allocWasmString)(t.logId,o)),void 0===(null==t?void 0:t.logSeverityLevel))u.logSeverityLevel=2;else if("number"!=typeof t.logSeverityLevel||!Number.isInteger(t.logSeverityLevel)||t.logSeverityLevel<0||t.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${t.logSeverityLevel}`);if(void 0===(null==t?void 0:t.logVerbosityLevel))u.logVerbosityLevel=0;else if("number"!=typeof t.logVerbosityLevel||!Number.isInteger(t.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${t.logVerbosityLevel}`);if(void 0===(null==t?void 0:t.enableProfiling)&&(u.enableProfiling=!1),n=e._OrtCreateSessionOptions(c,!!u.enableCpuMemArena,!!u.enableMemPattern,s,!!u.enableProfiling,0,l,u.logSeverityLevel,u.logVerbosityLevel),0===n)throw new Error("Can\'t create session options");return(null==t?void 0:t.executionProviders)&&((t,e,n)=>{for(const r of e){let e="string"==typeof r?r:r.name;switch(e){case"xnnpack":e="XNNPACK";break;case"wasm":case"cpu":continue;default:throw new Error(`not supported EP: ${e}`)}const o=(0,a.allocWasmString)(e,n);if(0!==(0,i.getInstance)()._OrtAppendExecutionProvider(t,o))throw new Error(`Can\'t append execution provider: ${e}`)}})(n,t.executionProviders,o),void 0!==(null==t?void 0:t.extra)&&(0,r.iterateExtraOptions)(t.extra,"",new WeakSet,((t,r)=>{const i=(0,a.allocWasmString)(t,o),u=(0,a.allocWasmString)(r,o);if(0!==e._OrtAddSessionConfigEntry(n,i,u))throw new Error(`Can\'t set a session config entry: ${t} - ${r}`)})),[n,o]}catch(t){throw 0!==n&&e._OrtReleaseSessionOptions(n),o.forEach(e._free),t}}},983:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.allocWasmString=void 0;const r=n(361);e.allocWasmString=(t,e)=>{const n=(0,r.getInstance)(),a=n.lengthBytesUTF8(t)+1,i=n._malloc(a);return n.stringToUTF8(t,i,a),e.push(i),i}},349:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.extractTransferableBuffers=e.endProfiling=e.run=e.releaseSession=e.createSession=e.createSessionFinalize=e.createSessionAllocate=e.initOrt=void 0;const r=n(586),a=n(919),i=n(983),o=n(361);e.initOrt=(t,e)=>{const n=(0,o.getInstance)()._OrtInit(t,e);if(0!==n)throw new Error(`Can\'t initialize onnxruntime. error code = ${n}`)};const u=new Map;e.createSessionAllocate=t=>{const e=(0,o.getInstance)(),n=e._malloc(t.byteLength);return e.HEAPU8.set(t,n),[n,t.byteLength]},e.createSessionFinalize=(t,e)=>{const n=(0,o.getInstance)();let r=0,i=0,c=[];try{if([i,c]=(0,a.setSessionOptions)(e),r=n._OrtCreateSession(t[0],t[1],i),0===r)throw new Error("Can\'t create a session")}finally{n._free(t[0]),n._OrtReleaseSessionOptions(i),c.forEach(n._free)}const s=n._OrtGetInputCount(r),l=n._OrtGetOutputCount(r),f=[],p=[],h=[],d=[];for(let t=0;t<s;t++){const e=n._OrtGetInputName(r,t);if(0===e)throw new Error("Can\'t get an input name");p.push(e),f.push(n.UTF8ToString(e))}for(let t=0;t<l;t++){const e=n._OrtGetOutputName(r,t);if(0===e)throw new Error("Can\'t get an output name");d.push(e),h.push(n.UTF8ToString(e))}return u.set(r,[r,p,d]),[r,f,h]},e.createSession=(t,n)=>{const r=(0,e.createSessionAllocate)(t);return(0,e.createSessionFinalize)(r,n)},e.releaseSession=t=>{const e=(0,o.getInstance)(),n=u.get(t);if(!n)throw new Error("invalid session id");const r=n[0],a=n[1],i=n[2];a.forEach(e._OrtFree),i.forEach(e._OrtFree),e._OrtReleaseSession(r),u.delete(t)};const c=t=>{switch(t){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error(`unsupported data type: ${t}`)}},s=t=>{switch(t){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error(`unsupported data type: ${t}`)}},l=t=>{switch(t){case"float32":return Float32Array;case"uint8":case"bool":return Uint8Array;case"int8":return Int8Array;case"uint16":return Uint16Array;case"int16":return Int16Array;case"int32":return Int32Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${t}`)}};e.run=(t,e,n,a,f)=>{const p=(0,o.getInstance)(),h=u.get(t);if(!h)throw new Error("invalid session id");const d=h[0],y=h[1],b=h[2],m=e.length,g=a.length;let v=0,w=[];const _=[],O=[];try{[v,w]=(0,r.setRunOptions)(f);for(let t=0;t<m;t++){const e=n[t][0],r=n[t][1],a=n[t][2];let o,u;if(Array.isArray(a)){u=4*a.length,o=p._malloc(u),O.push(o);let t=o/4;for(let e=0;e<a.length;e++){if("string"!=typeof a[e])throw new TypeError(`tensor data at index ${e} is not a string`);p.HEAPU32[t++]=(0,i.allocWasmString)(a[e],O)}}else u=a.byteLength,o=p._malloc(u),O.push(o),p.HEAPU8.set(new Uint8Array(a.buffer,a.byteOffset,u),o);const s=p.stackSave(),l=p.stackAlloc(4*r.length);try{let t=l/4;r.forEach((e=>p.HEAP32[t++]=e));const n=p._OrtCreateTensor(c(e),o,u,l,r.length);if(0===n)throw new Error("Can\'t create a tensor");_.push(n)}finally{p.stackRestore(s)}}const t=p.stackSave(),o=p.stackAlloc(4*m),u=p.stackAlloc(4*m),h=p.stackAlloc(4*g),A=p.stackAlloc(4*g);try{let n=o/4,r=u/4,i=h/4,c=A/4;for(let t=0;t<m;t++)p.HEAPU32[n++]=_[t],p.HEAPU32[r++]=y[e[t]];for(let t=0;t<g;t++)p.HEAPU32[i++]=0,p.HEAPU32[c++]=b[a[t]];let f=p._OrtRun(d,u,o,m,A,g,h,v);const w=[];if(0===f)for(let t=0;t<g;t++){const e=p.HEAPU32[h/4+t],n=p.stackSave(),r=p.stackAlloc(16);let a,i=0;try{if(f=p._OrtGetTensorData(e,r,r+4,r+8,r+12),0!==f)throw new Error(`Can\'t access output tensor data. error code = ${f}`);let t=r/4;const o=p.HEAPU32[t++];i=p.HEAPU32[t++];const u=p.HEAPU32[t++],c=p.HEAPU32[t++],h=[];for(let t=0;t<c;t++)h.push(p.HEAPU32[u/4+t]);p._OrtFree(u);const d=0===h.length?1:h.reduce(((t,e)=>t*e));if(a=s(o),"string"===a){const t=[];let e=i/4;for(let n=0;n<d;n++){const r=p.HEAPU32[e++],a=n===d-1?void 0:p.HEAPU32[e]-r;t.push(p.UTF8ToString(r,a))}w.push([a,h,t])}else{const t=new(l(a))(d);new Uint8Array(t.buffer,t.byteOffset,t.byteLength).set(p.HEAPU8.subarray(i,i+t.byteLength)),w.push([a,h,t])}}finally{p.stackRestore(n),"string"===a&&i&&p._free(i),p._OrtReleaseTensor(e)}}if(0===f)return w;throw new Error(`failed to call OrtRun(). error code = ${f}.`)}finally{p.stackRestore(t)}}finally{_.forEach(p._OrtReleaseTensor),O.forEach(p._free),p._OrtReleaseRunOptions(v),w.forEach(p._free)}},e.endProfiling=t=>{const e=(0,o.getInstance)(),n=u.get(t);if(!n)throw new Error("invalid session id");const r=n[0],a=e._OrtEndProfiling(r);if(0===a)throw new Error("Can\'t get an profile file name");e._OrtFree(a)},e.extractTransferableBuffers=t=>{const e=[];for(const n of t){const t=n[2];!Array.isArray(t)&&t.buffer&&e.push(t.buffer)}return e}},361:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var a=Object.getOwnPropertyDescriptor(e,n);a&&!("get"in a?!e.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,a)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),a=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return a(e,t),e},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.dispose=e.getInstance=e.initializeWebAssembly=void 0;const u=i(n(449)),c=o(n(932)),s=n(474);let l,f=!1,p=!1,h=!1;const d=(t,e)=>e?t?"ort-wasm-simd-threaded.wasm":"ort-wasm-threaded.wasm":t?"ort-wasm-simd.wasm":"ort-wasm.wasm";e.initializeWebAssembly=async t=>{if(f)return Promise.resolve();if(p)throw new Error("multiple calls to \'initializeWebAssembly()\' detected.");if(h)throw new Error("previous call to \'initializeWebAssembly()\' failed.");p=!0;const e=t.initTimeout,r=t.numThreads,a=t.simd,i=r>1&&(()=>{try{return"undefined"!=typeof SharedArrayBuffer&&("undefined"!=typeof MessageChannel&&(new MessageChannel).port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11])))}catch(t){return!1}})(),o=a&&(()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch(t){return!1}})(),y="string"==typeof t.wasmPaths?t.wasmPaths:void 0,b=d(!1,i),m=d(o,i),g="object"==typeof t.wasmPaths?t.wasmPaths[m]:void 0;let v=!1;const w=[];if(e>0&&w.push(new Promise((t=>{setTimeout((()=>{v=!0,t()}),e)}))),w.push(new Promise(((t,e)=>{const r=i?s:c.default,a={locateFile:(t,e)=>i&&t.endsWith(".worker.js")&&"undefined"!=typeof Blob?URL.createObjectURL(new Blob([n(154)],{type:"text/javascript"})):t===b?null!=g?g:(null!=y?y:e)+m:e+t};if(i)if("undefined"==typeof Blob)a.mainScriptUrlOrBlob=u.join("/","ort-wasm-threaded.js");else{const t=`var ortWasmThreaded=(function(){var _scriptDir;return ${r.toString()}})();`;a.mainScriptUrlOrBlob=new Blob([t],{type:"text/javascript"})}r(a).then((e=>{p=!1,f=!0,l=e,t()}),(t=>{p=!1,h=!0,e(t)}))}))),await Promise.race(w),v)throw new Error(`WebAssembly backend initializing failed due to timeout: ${e}ms`)},e.getInstance=()=>{if(f&&l)return l;throw new Error("WebAssembly is not initialized yet.")},e.dispose=()=>{var t;!f||p||h||(p=!0,null===(t=l.PThread)||void 0===t||t.terminateAllThreads(),l=void 0,p=!1,f=!1,h=!0)}},154:t=>{"use strict";t.exports=\'"use strict";var e={},t="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node;if(t){var r=require("worker_threads"),a=r.parentPort;a.on("message",(e=>onmessage({data:e})));var o=require("fs");Object.assign(global,{self:global,require:require,Module:e,location:{href:__filename},Worker:r.Worker,importScripts:function(e){(0,eval)(o.readFileSync(e,"utf8"))},postMessage:function(e){a.postMessage(e)},performance:global.performance||{now:function(){return Date.now()}}})}var s=!1,n=[],i=function(){var e=Array.prototype.slice.call(arguments).join(" ");t?o.writeSync(2,e+"\\\\n"):console.error(e)};self.alert=function(){var t=Array.prototype.slice.call(arguments).join(" ");postMessage({cmd:"alert",text:t,threadId:e._pthread_self()})},e.instantiateWasm=(t,r)=>{var a=new WebAssembly.Instance(e.wasmModule,t);return r(a),e.wasmModule=null,a.exports},self.onunhandledrejection=e=>{throw e.reason??e},self.onmessage=t=>{try{if("load"===t.data.cmd){if(e.wasmModule=t.data.wasmModule,e.wasmMemory=t.data.wasmMemory,e.buffer=e.wasmMemory.buffer,e.ENVIRONMENT_IS_PTHREAD=!0,"string"==typeof t.data.urlOrBlob)importScripts(t.data.urlOrBlob);else{var r=URL.createObjectURL(t.data.urlOrBlob);importScripts(r),URL.revokeObjectURL(r)}ortWasmThreaded(e).then((function(t){e=t}))}else if("run"===t.data.cmd){e.__performance_now_clock_drift=performance.now()-t.data.time,e.__emscripten_thread_init(t.data.pthread_ptr,0,0,1),e.establishStackSpace(),e.PThread.receiveObjectTransfer(t.data),e.PThread.threadInitTLS(),s||(n.forEach((t=>{e.executeNotifiedProxyingQueue(t)})),n=[],s=!0);try{e.invokeEntryPoint(t.data.start_routine,t.data.arg)}catch(t){if("unwind"!=t){if(!(t instanceof e.ExitStatus))throw t;e.keepRuntimeAlive()||e.__emscripten_thread_exit(t.status)}}}else"cancel"===t.data.cmd?e._pthread_self()&&e.__emscripten_thread_exit(-1):"setimmediate"===t.data.target||("processProxyingQueue"===t.data.cmd?s?e.executeNotifiedProxyingQueue(t.data.queue):n.push(t.data.queue):(i("worker.js received unknown command "+t.data.cmd),i(t.data)))}catch(t){throw i("worker.js onmessage() captured an uncaught exception: "+t),t&&t.stack&&i(t.stack),e.__emscripten_thread_crashed&&e.__emscripten_thread_crashed(),t}};\\n\'},384:()=>{},993:()=>{},908:()=>{},953:()=>{},925:()=>{},449:()=>{}},e={};function n(r){var a=e[r];if(void 0!==a)return a.exports;var i=e[r]={exports:{}};return t[r].call(i.exports,i,i.exports,n),i.exports}n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),(()=>{"use strict";const t=n(349),e=n(361);self.onmessage=n=>{switch(n.data.type){case"init-wasm":(0,e.initializeWebAssembly)(n.data.in).then((()=>postMessage({type:"init-wasm"})),(t=>postMessage({type:"init-wasm",err:t})));break;case"init-ort":try{const{numThreads:e,loggingLevel:r}=n.data.in;(0,t.initOrt)(e,r),postMessage({type:"init-ort"})}catch(t){postMessage({type:"init-ort",err:t})}break;case"create_allocate":try{const{model:e}=n.data.in,r=(0,t.createSessionAllocate)(e);postMessage({type:"create_allocate",out:r})}catch(t){postMessage({type:"create_allocate",err:t})}break;case"create_finalize":try{const{modeldata:e,options:r}=n.data.in,a=(0,t.createSessionFinalize)(e,r);postMessage({type:"create_finalize",out:a})}catch(t){postMessage({type:"create_finalize",err:t})}break;case"create":try{const{model:e,options:r}=n.data.in,a=(0,t.createSession)(e,r);postMessage({type:"create",out:a})}catch(t){postMessage({type:"create",err:t})}break;case"release":try{const e=n.data.in;(0,t.releaseSession)(e),postMessage({type:"release"})}catch(t){postMessage({type:"release",err:t})}break;case"run":try{const{sessionId:e,inputIndices:r,inputs:a,outputIndices:i,options:o}=n.data.in,u=(0,t.run)(e,r,a,i,o);postMessage({type:"run",out:u},(0,t.extractTransferableBuffers)(u))}catch(t){postMessage({type:"run",err:t})}break;case"end-profiling":try{const e=n.data.in;(0,t.endProfiling)(e),postMessage({type:"end-profiling"})}catch(t){postMessage({type:"end-profiling",err:t})}}}})()})();\n',"Worker",void 0,void 0)}},477:Mt=>{Mt.exports=function(st,nn,rn,on){var an=self||window;try{try{var sn;try{sn=new an.Blob([st])}catch{(sn=new(an.BlobBuilder||an.WebKitBlobBuilder||an.MozBlobBuilder||an.MSBlobBuilder)).append(st),sn=sn.getBlob()}var un=an.URL||an.webkitURL,Xr=un.createObjectURL(sn),to=new an[nn](Xr,rn);return un.revokeObjectURL(Xr),to}catch{return new an[nn]("data:application/javascript,".concat(encodeURIComponent(st)),rn)}}catch{if(!on)throw Error("Inline worker is not supported");return new an[nn](on,rn)}}},4154:Mt=>{Mt.exports=`"use strict";var e={},t="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node;if(t){var r=require("worker_threads"),a=r.parentPort;a.on("message",(e=>onmessage({data:e})));var o=require("fs");Object.assign(global,{self:global,require:require,Module:e,location:{href:__filename},Worker:r.Worker,importScripts:function(e){(0,eval)(o.readFileSync(e,"utf8"))},postMessage:function(e){a.postMessage(e)},performance:global.performance||{now:function(){return Date.now()}}})}var s=!1,n=[],i=function(){var e=Array.prototype.slice.call(arguments).join(" ");t?o.writeSync(2,e+"\\n"):console.error(e)};self.alert=function(){var t=Array.prototype.slice.call(arguments).join(" ");postMessage({cmd:"alert",text:t,threadId:e._pthread_self()})},e.instantiateWasm=(t,r)=>{var a=new WebAssembly.Instance(e.wasmModule,t);return r(a),e.wasmModule=null,a.exports},self.onunhandledrejection=e=>{throw e.reason??e},self.onmessage=t=>{try{if("load"===t.data.cmd){if(e.wasmModule=t.data.wasmModule,e.wasmMemory=t.data.wasmMemory,e.buffer=e.wasmMemory.buffer,e.ENVIRONMENT_IS_PTHREAD=!0,"string"==typeof t.data.urlOrBlob)importScripts(t.data.urlOrBlob);else{var r=URL.createObjectURL(t.data.urlOrBlob);importScripts(r),URL.revokeObjectURL(r)}ortWasmThreaded(e).then((function(t){e=t}))}else if("run"===t.data.cmd){e.__performance_now_clock_drift=performance.now()-t.data.time,e.__emscripten_thread_init(t.data.pthread_ptr,0,0,1),e.establishStackSpace(),e.PThread.receiveObjectTransfer(t.data),e.PThread.threadInitTLS(),s||(n.forEach((t=>{e.executeNotifiedProxyingQueue(t)})),n=[],s=!0);try{e.invokeEntryPoint(t.data.start_routine,t.data.arg)}catch(t){if("unwind"!=t){if(!(t instanceof e.ExitStatus))throw t;e.keepRuntimeAlive()||e.__emscripten_thread_exit(t.status)}}}else"cancel"===t.data.cmd?e._pthread_self()&&e.__emscripten_thread_exit(-1):"setimmediate"===t.data.target||("processProxyingQueue"===t.data.cmd?s?e.executeNotifiedProxyingQueue(t.data.queue):n.push(t.data.queue):(i("worker.js received unknown command "+t.data.cmd),i(t.data)))}catch(t){throw i("worker.js onmessage() captured an uncaught exception: "+t),t&&t.stack&&i(t.stack),e.__emscripten_thread_crashed&&e.__emscripten_thread_crashed(),t}};
`},1670:Mt=>{Mt.exports=__WEBPACK_EXTERNAL_MODULE__1670__},7067:()=>{},1296:()=>{},1384:()=>{},3993:()=>{},908:()=>{},6953:()=>{},9925:()=>{},2806:()=>{},6449:()=>{},2850:()=>{},5381:()=>{},5686:(Mt,st,nn)=>{nn.r(st),nn.d(st,{flatbuffers:()=>rn});var rn={};rn.Offset,rn.Table,rn.SIZEOF_SHORT=2,rn.SIZEOF_INT=4,rn.FILE_IDENTIFIER_LENGTH=4,rn.SIZE_PREFIX_LENGTH=4,rn.Encoding={UTF8_BYTES:1,UTF16_STRING:2},rn.int32=new Int32Array(2),rn.float32=new Float32Array(rn.int32.buffer),rn.float64=new Float64Array(rn.int32.buffer),rn.isLittleEndian=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1,rn.Long=function(on,an){this.low=0|on,this.high=0|an},rn.Long.create=function(on,an){return on==0&&an==0?rn.Long.ZERO:new rn.Long(on,an)},rn.Long.prototype.toFloat64=function(){return(this.low>>>0)+4294967296*this.high},rn.Long.prototype.equals=function(on){return this.low==on.low&&this.high==on.high},rn.Long.ZERO=new rn.Long(0,0),rn.Builder=function(on){if(on)an=on;else var an=1024;this.bb=rn.ByteBuffer.allocate(an),this.space=an,this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1},rn.Builder.prototype.clear=function(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1},rn.Builder.prototype.forceDefaults=function(on){this.force_defaults=on},rn.Builder.prototype.dataBuffer=function(){return this.bb},rn.Builder.prototype.asUint8Array=function(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())},rn.Builder.prototype.prep=function(on,an){on>this.minalign&&(this.minalign=on);for(var sn=1+~(this.bb.capacity()-this.space+an)&on-1;this.space<sn+on+an;){var un=this.bb.capacity();this.bb=rn.Builder.growByteBuffer(this.bb),this.space+=this.bb.capacity()-un}this.pad(sn)},rn.Builder.prototype.pad=function(on){for(var an=0;an<on;an++)this.bb.writeInt8(--this.space,0)},rn.Builder.prototype.writeInt8=function(on){this.bb.writeInt8(this.space-=1,on)},rn.Builder.prototype.writeInt16=function(on){this.bb.writeInt16(this.space-=2,on)},rn.Builder.prototype.writeInt32=function(on){this.bb.writeInt32(this.space-=4,on)},rn.Builder.prototype.writeInt64=function(on){this.bb.writeInt64(this.space-=8,on)},rn.Builder.prototype.writeFloat32=function(on){this.bb.writeFloat32(this.space-=4,on)},rn.Builder.prototype.writeFloat64=function(on){this.bb.writeFloat64(this.space-=8,on)},rn.Builder.prototype.addInt8=function(on){this.prep(1,0),this.writeInt8(on)},rn.Builder.prototype.addInt16=function(on){this.prep(2,0),this.writeInt16(on)},rn.Builder.prototype.addInt32=function(on){this.prep(4,0),this.writeInt32(on)},rn.Builder.prototype.addInt64=function(on){this.prep(8,0),this.writeInt64(on)},rn.Builder.prototype.addFloat32=function(on){this.prep(4,0),this.writeFloat32(on)},rn.Builder.prototype.addFloat64=function(on){this.prep(8,0),this.writeFloat64(on)},rn.Builder.prototype.addFieldInt8=function(on,an,sn){(this.force_defaults||an!=sn)&&(this.addInt8(an),this.slot(on))},rn.Builder.prototype.addFieldInt16=function(on,an,sn){(this.force_defaults||an!=sn)&&(this.addInt16(an),this.slot(on))},rn.Builder.prototype.addFieldInt32=function(on,an,sn){(this.force_defaults||an!=sn)&&(this.addInt32(an),this.slot(on))},rn.Builder.prototype.addFieldInt64=function(on,an,sn){!this.force_defaults&&an.equals(sn)||(this.addInt64(an),this.slot(on))},rn.Builder.prototype.addFieldFloat32=function(on,an,sn){(this.force_defaults||an!=sn)&&(this.addFloat32(an),this.slot(on))},rn.Builder.prototype.addFieldFloat64=function(on,an,sn){(this.force_defaults||an!=sn)&&(this.addFloat64(an),this.slot(on))},rn.Builder.prototype.addFieldOffset=function(on,an,sn){(this.force_defaults||an!=sn)&&(this.addOffset(an),this.slot(on))},rn.Builder.prototype.addFieldStruct=function(on,an,sn){an!=sn&&(this.nested(an),this.slot(on))},rn.Builder.prototype.nested=function(on){if(on!=this.offset())throw new Error("FlatBuffers: struct must be serialized inline.")},rn.Builder.prototype.notNested=function(){if(this.isNested)throw new Error("FlatBuffers: object serialization must not be nested.")},rn.Builder.prototype.slot=function(on){this.vtable[on]=this.offset()},rn.Builder.prototype.offset=function(){return this.bb.capacity()-this.space},rn.Builder.growByteBuffer=function(on){var an=on.capacity();if(3221225472&an)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");var sn=an<<1,un=rn.ByteBuffer.allocate(sn);return un.setPosition(sn-an),un.bytes().set(on.bytes(),sn-an),un},rn.Builder.prototype.addOffset=function(on){this.prep(rn.SIZEOF_INT,0),this.writeInt32(this.offset()-on+rn.SIZEOF_INT)},rn.Builder.prototype.startObject=function(on){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=on;for(var an=0;an<on;an++)this.vtable[an]=0;this.isNested=!0,this.object_start=this.offset()},rn.Builder.prototype.endObject=function(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);for(var on=this.offset(),an=this.vtable_in_use-1;an>=0&&this.vtable[an]==0;an--);for(var sn=an+1;an>=0;an--)this.addInt16(this.vtable[an]!=0?on-this.vtable[an]:0);this.addInt16(on-this.object_start);var un=(sn+2)*rn.SIZEOF_SHORT;this.addInt16(un);var Xr=0,to=this.space;e:for(an=0;an<this.vtables.length;an++){var uo=this.bb.capacity()-this.vtables[an];if(un==this.bb.readInt16(uo)){for(var hn=rn.SIZEOF_SHORT;hn<un;hn+=rn.SIZEOF_SHORT)if(this.bb.readInt16(to+hn)!=this.bb.readInt16(uo+hn))continue e;Xr=this.vtables[an];break}}return Xr?(this.space=this.bb.capacity()-on,this.bb.writeInt32(this.space,Xr-on)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-on,this.offset()-on)),this.isNested=!1,on},rn.Builder.prototype.finish=function(on,an,sn){var un=sn?rn.SIZE_PREFIX_LENGTH:0;if(an){var Xr=an;if(this.prep(this.minalign,rn.SIZEOF_INT+rn.FILE_IDENTIFIER_LENGTH+un),Xr.length!=rn.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+rn.FILE_IDENTIFIER_LENGTH);for(var to=rn.FILE_IDENTIFIER_LENGTH-1;to>=0;to--)this.writeInt8(Xr.charCodeAt(to))}this.prep(this.minalign,rn.SIZEOF_INT+un),this.addOffset(on),un&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)},rn.Builder.prototype.finishSizePrefixed=function(on,an){this.finish(on,an,!0)},rn.Builder.prototype.requiredField=function(on,an){var sn=this.bb.capacity()-on,un=sn-this.bb.readInt32(sn);if(this.bb.readInt16(un+an)==0)throw new Error("FlatBuffers: field "+an+" must be set")},rn.Builder.prototype.startVector=function(on,an,sn){this.notNested(),this.vector_num_elems=an,this.prep(rn.SIZEOF_INT,on*an),this.prep(sn,on*an)},rn.Builder.prototype.endVector=function(){return this.writeInt32(this.vector_num_elems),this.offset()},rn.Builder.prototype.createString=function(on){if(on instanceof Uint8Array)var an=on;else{an=[];for(var sn=0;sn<on.length;){var un,Xr=on.charCodeAt(sn++);(un=Xr<55296||Xr>=56320?Xr:(Xr<<10)+on.charCodeAt(sn++)+-56613888)<128?an.push(un):(un<2048?an.push(un>>6&31|192):(un<65536?an.push(un>>12&15|224):an.push(un>>18&7|240,un>>12&63|128),an.push(un>>6&63|128)),an.push(63&un|128))}}this.addInt8(0),this.startVector(1,an.length,1),this.bb.setPosition(this.space-=an.length),sn=0;for(var to=this.space,uo=this.bb.bytes();sn<an.length;sn++)uo[to++]=an[sn];return this.endVector()},rn.Builder.prototype.createLong=function(on,an){return rn.Long.create(on,an)},rn.ByteBuffer=function(on){this.bytes_=on,this.position_=0},rn.ByteBuffer.allocate=function(on){return new rn.ByteBuffer(new Uint8Array(on))},rn.ByteBuffer.prototype.clear=function(){this.position_=0},rn.ByteBuffer.prototype.bytes=function(){return this.bytes_},rn.ByteBuffer.prototype.position=function(){return this.position_},rn.ByteBuffer.prototype.setPosition=function(on){this.position_=on},rn.ByteBuffer.prototype.capacity=function(){return this.bytes_.length},rn.ByteBuffer.prototype.readInt8=function(on){return this.readUint8(on)<<24>>24},rn.ByteBuffer.prototype.readUint8=function(on){return this.bytes_[on]},rn.ByteBuffer.prototype.readInt16=function(on){return this.readUint16(on)<<16>>16},rn.ByteBuffer.prototype.readUint16=function(on){return this.bytes_[on]|this.bytes_[on+1]<<8},rn.ByteBuffer.prototype.readInt32=function(on){return this.bytes_[on]|this.bytes_[on+1]<<8|this.bytes_[on+2]<<16|this.bytes_[on+3]<<24},rn.ByteBuffer.prototype.readUint32=function(on){return this.readInt32(on)>>>0},rn.ByteBuffer.prototype.readInt64=function(on){return new rn.Long(this.readInt32(on),this.readInt32(on+4))},rn.ByteBuffer.prototype.readUint64=function(on){return new rn.Long(this.readUint32(on),this.readUint32(on+4))},rn.ByteBuffer.prototype.readFloat32=function(on){return rn.int32[0]=this.readInt32(on),rn.float32[0]},rn.ByteBuffer.prototype.readFloat64=function(on){return rn.int32[rn.isLittleEndian?0:1]=this.readInt32(on),rn.int32[rn.isLittleEndian?1:0]=this.readInt32(on+4),rn.float64[0]},rn.ByteBuffer.prototype.writeInt8=function(on,an){this.bytes_[on]=an},rn.ByteBuffer.prototype.writeUint8=function(on,an){this.bytes_[on]=an},rn.ByteBuffer.prototype.writeInt16=function(on,an){this.bytes_[on]=an,this.bytes_[on+1]=an>>8},rn.ByteBuffer.prototype.writeUint16=function(on,an){this.bytes_[on]=an,this.bytes_[on+1]=an>>8},rn.ByteBuffer.prototype.writeInt32=function(on,an){this.bytes_[on]=an,this.bytes_[on+1]=an>>8,this.bytes_[on+2]=an>>16,this.bytes_[on+3]=an>>24},rn.ByteBuffer.prototype.writeUint32=function(on,an){this.bytes_[on]=an,this.bytes_[on+1]=an>>8,this.bytes_[on+2]=an>>16,this.bytes_[on+3]=an>>24},rn.ByteBuffer.prototype.writeInt64=function(on,an){this.writeInt32(on,an.low),this.writeInt32(on+4,an.high)},rn.ByteBuffer.prototype.writeUint64=function(on,an){this.writeUint32(on,an.low),this.writeUint32(on+4,an.high)},rn.ByteBuffer.prototype.writeFloat32=function(on,an){rn.float32[0]=an,this.writeInt32(on,rn.int32[0])},rn.ByteBuffer.prototype.writeFloat64=function(on,an){rn.float64[0]=an,this.writeInt32(on,rn.int32[rn.isLittleEndian?0:1]),this.writeInt32(on+4,rn.int32[rn.isLittleEndian?1:0])},rn.ByteBuffer.prototype.getBufferIdentifier=function(){if(this.bytes_.length<this.position_+rn.SIZEOF_INT+rn.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");for(var on="",an=0;an<rn.FILE_IDENTIFIER_LENGTH;an++)on+=String.fromCharCode(this.readInt8(this.position_+rn.SIZEOF_INT+an));return on},rn.ByteBuffer.prototype.__offset=function(on,an){var sn=on-this.readInt32(on);return an<this.readInt16(sn)?this.readInt16(sn+an):0},rn.ByteBuffer.prototype.__union=function(on,an){return on.bb_pos=an+this.readInt32(an),on.bb=this,on},rn.ByteBuffer.prototype.__string=function(on,an){on+=this.readInt32(on);var sn=this.readInt32(on),un="",Xr=0;if(on+=rn.SIZEOF_INT,an===rn.Encoding.UTF8_BYTES)return this.bytes_.subarray(on,on+sn);for(;Xr<sn;){var to,uo=this.readUint8(on+Xr++);if(uo<192)to=uo;else{var hn=this.readUint8(on+Xr++);if(uo<224)to=(31&uo)<<6|63&hn;else{var fn=this.readUint8(on+Xr++);to=uo<240?(15&uo)<<12|(63&hn)<<6|63&fn:(7&uo)<<18|(63&hn)<<12|(63&fn)<<6|63&this.readUint8(on+Xr++)}}to<65536?un+=String.fromCharCode(to):(to-=65536,un+=String.fromCharCode(55296+(to>>10),56320+(1023&to)))}return un},rn.ByteBuffer.prototype.__indirect=function(on){return on+this.readInt32(on)},rn.ByteBuffer.prototype.__vector=function(on){return on+this.readInt32(on)+rn.SIZEOF_INT},rn.ByteBuffer.prototype.__vector_len=function(on){return this.readInt32(on+this.readInt32(on))},rn.ByteBuffer.prototype.__has_identifier=function(on){if(on.length!=rn.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+rn.FILE_IDENTIFIER_LENGTH);for(var an=0;an<rn.FILE_IDENTIFIER_LENGTH;an++)if(on.charCodeAt(an)!=this.readInt8(this.position_+rn.SIZEOF_INT+an))return!1;return!0},rn.ByteBuffer.prototype.createLong=function(on,an){return rn.Long.create(on,an)}}},__webpack_module_cache__={};function __webpack_require__(Mt){var st=__webpack_module_cache__[Mt];if(st!==void 0)return st.exports;var nn=__webpack_module_cache__[Mt]={exports:{}};return __webpack_modules__[Mt].call(nn.exports,nn,nn.exports,__webpack_require__),nn.exports}__webpack_require__.n=Mt=>{var st=Mt&&Mt.__esModule?()=>Mt.default:()=>Mt;return __webpack_require__.d(st,{a:st}),st},__webpack_require__.d=(Mt,st)=>{for(var nn in st)__webpack_require__.o(st,nn)&&!__webpack_require__.o(Mt,nn)&&Object.defineProperty(Mt,nn,{enumerable:!0,get:st[nn]})},__webpack_require__.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),__webpack_require__.o=(Mt,st)=>Object.prototype.hasOwnProperty.call(Mt,st),__webpack_require__.r=Mt=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(Mt,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(Mt,"__esModule",{value:!0})};var __webpack_exports__=__webpack_require__(6018);return __webpack_exports__})())})(ortWeb_min$1);var ortWeb_minExports=ortWeb_min$1.exports;const ortWeb_min=getDefaultExportFromCjs(ortWeb_minExports),ONNX_WEB=_mergeNamespaces({__proto__:null,default:ortWeb_min},[ortWeb_minExports]);let ONNX;const executionProviders=["wasm"];var Nv;typeof process<"u"&&((Nv=process==null?void 0:process.release)==null?void 0:Nv.name)==="node"?(ONNX=sharp??ONNX_NODE,executionProviders.unshift("cpu")):(ONNX=ortWeb_min??ONNX_WEB,typeof navigator<"u"&&/iP(hone|od|ad).+16_4.+AppleWebKit/.test(navigator.userAgent)&&(ONNX.env.wasm.simd=!1));const{env:onnx_env}=ONNX,VERSION="2.17.2",WEB_CACHE_AVAILABLE=typeof self<"u"&&"caches"in self,FS_AVAILABLE=!isEmpty(sharp),PATH_AVAILABLE=!isEmpty(sharp),RUNNING_LOCALLY=FS_AVAILABLE&&PATH_AVAILABLE,__dirname=RUNNING_LOCALLY?sharp.dirname(sharp.dirname(sharp.fileURLToPath(import.meta.url))):"./",DEFAULT_CACHE_DIR=RUNNING_LOCALLY?sharp.join(__dirname,"/.cache/"):null,DEFAULT_LOCAL_MODEL_PATH="/models/",localModelPath=RUNNING_LOCALLY?sharp.join(__dirname,DEFAULT_LOCAL_MODEL_PATH):DEFAULT_LOCAL_MODEL_PATH;onnx_env!=null&&onnx_env.wasm&&(onnx_env.wasm.wasmPaths=RUNNING_LOCALLY?sharp.join(__dirname,"/dist/"):`https://cdn.jsdelivr.net/npm/@xenova/transformers@${VERSION}/dist/`);const env$1={backends:{onnx:onnx_env,tfjs:{}},__dirname,version:VERSION,allowRemoteModels:!0,remoteHost:"https://huggingface.co/",remotePathTemplate:"{model}/resolve/{revision}/",allowLocalModels:!0,localModelPath,useFS:FS_AVAILABLE,useBrowserCache:WEB_CACHE_AVAILABLE,useFSCache:FS_AVAILABLE,cacheDir:DEFAULT_CACHE_DIR,useCustomCache:!1,customCache:null};function isEmpty(Mt){return Object.keys(Mt).length===0}var define_process_env_default={};class FileResponse{constructor(st){Fp(this,"_CONTENT_TYPE_MAP",{txt:"text/plain",html:"text/html",css:"text/css",js:"text/javascript",json:"application/json",png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif"});if(this.filePath=st,this.headers=new Headers,this.exists=sharp.existsSync(st),this.exists){this.status=200,this.statusText="OK";let nn=sharp.statSync(st);this.headers.set("content-length",nn.size.toString()),this.updateContentType();let rn=this;this.body=new ReadableStream({start(on){rn.arrayBuffer().then(an=>{on.enqueue(new Uint8Array(an)),on.close()})}})}else this.status=404,this.statusText="Not Found",this.body=null}updateContentType(){const st=this.filePath.toString().split(".").pop().toLowerCase();this.headers.set("content-type",this._CONTENT_TYPE_MAP[st]??"application/octet-stream")}clone(){let st=new FileResponse(this.filePath);return st.exists=this.exists,st.status=this.status,st.statusText=this.statusText,st.headers=new Headers(this.headers),st}async arrayBuffer(){return(await sharp.promises.readFile(this.filePath)).buffer}async blob(){const st=await sharp.promises.readFile(this.filePath);return new Blob([st],{type:this.headers.get("content-type")})}async text(){return await sharp.promises.readFile(this.filePath,"utf8")}async json(){return JSON.parse(await this.text())}}function isValidUrl(Mt,st=null,nn=null){let rn;try{rn=new URL(Mt)}catch{return!1}return!(st&&!st.includes(rn.protocol)||nn&&!nn.includes(rn.hostname))}async function getFile(Mt){var st;if(env$1.useFS&&!isValidUrl(Mt,["http:","https:","blob:"]))return new FileResponse(Mt);if(typeof process<"u"&&((st=process==null?void 0:process.release)==null?void 0:st.name)==="node"){const nn=!!(define_process_env_default!=null&&define_process_env_default.TESTING_REMOTELY),rn=env$1.version,on=new Headers;if(on.set("User-Agent",`transformers.js/${rn}; is_ci/${nn};`),isValidUrl(Mt,["http:","https:"],["huggingface.co","hf.co"])){const sn=(define_process_env_default==null?void 0:define_process_env_default.HF_TOKEN)??(define_process_env_default==null?void 0:define_process_env_default.HF_ACCESS_TOKEN);sn&&on.set("Authorization",`Bearer ${sn}`)}return fetch(Mt,{headers:on})}else return fetch(Mt)}const ERROR_MAPPING={400:"Bad request error occurred while trying to load file",401:"Unauthorized access to file",403:"Forbidden access to file",404:"Could not locate file",408:"Request timeout error occurred while trying to load file",500:"Internal server error error occurred while trying to load file",502:"Bad gateway error occurred while trying to load file",503:"Service unavailable error occurred while trying to load file",504:"Gateway timeout error occurred while trying to load file"};function handleError(Mt,st,nn){if(!nn)return null;const rn=ERROR_MAPPING[Mt]??`Error (${Mt}) occurred while trying to load file`;throw Error(`${rn}: "${st}".`)}class FileCache{constructor(st){this.path=st}async match(st){let nn=sharp.join(this.path,st),rn=new FileResponse(nn);if(rn.exists)return rn}async put(st,nn){const rn=Buffer.from(await nn.arrayBuffer());let on=sharp.join(this.path,st);try{await sharp.promises.mkdir(sharp.dirname(on),{recursive:!0}),await sharp.promises.writeFile(on,rn)}catch(an){console.warn("An error occurred while writing the file to cache:",an)}}}async function tryCache(Mt,...st){for(let nn of st)try{let rn=await Mt.match(nn);if(rn)return rn}catch{continue}}async function getModelFile(Mt,st,nn=!0,rn={}){dispatchCallback(rn.progress_callback,{status:"initiate",name:Mt,file:st});let on;if(!on&&env$1.useBrowserCache){if(typeof caches>"u")throw Error("Browser cache is not available in this environment.");try{on=await caches.open("transformers-cache")}catch(mo){console.warn("An error occurred while opening the browser cache:",mo)}}if(!on&&env$1.useFSCache&&(on=new FileCache(rn.cache_dir??env$1.cacheDir)),!on&&env$1.useCustomCache)throw Error("`env.useCustomCache=true`, but `env.customCache` is not defined.");const an=rn.revision??"main";let sn=pathJoin(Mt,st),un=pathJoin(env$1.localModelPath,sn),Xr=pathJoin(env$1.remoteHost,env$1.remotePathTemplate.replaceAll("{model}",Mt).replaceAll("{revision}",encodeURIComponent(an)),st),to=an==="main"?sn:pathJoin(Mt,an,st),uo,hn=on instanceof FileCache?to:Xr,fn=!1,co;on&&(co=await tryCache(on,un,hn));const lo=co!==void 0;if(co===void 0){if(isValidUrl(sn,["http:","https:"])){if(rn.local_files_only)throw new Error(`\`local_files_only=true\`, but attempted to load a remote file from: ${sn}.`)}else try{co=await getFile(un),uo=un}catch(Uo){console.warn(`Unable to load from local path "${un}": "${Uo}"`)}if(co===void 0||co.status===404){if(rn.local_files_only||!env$1.allowRemoteModels){if(nn)throw Error(`\`local_files_only=true\` or \`env.allowRemoteModels=false\` and file was not found locally at "${un}".`);return null}if(co=await getFile(Xr),co.status!==200)return handleError(co.status,Xr,nn);uo=hn}fn=on&&typeof Response<"u"&&co instanceof Response&&co.status===200}dispatchCallback(rn.progress_callback,{status:"download",name:Mt,file:st});const fo={status:"progress",name:Mt,file:st};let ho;return rn.progress_callback?lo&&typeof navigator<"u"&&/firefox/i.test(navigator.userAgent)?(ho=new Uint8Array(await co.arrayBuffer()),dispatchCallback(rn.progress_callback,{...fo,progress:100,loaded:ho.length,total:ho.length})):ho=await readResponse(co,mo=>{dispatchCallback(rn.progress_callback,{...fo,...mo})}):ho=new Uint8Array(await co.arrayBuffer()),fn&&uo&&await on.match(uo)===void 0&&await on.put(uo,new Response(ho,{headers:co.headers})).catch(mo=>{console.warn(`Unable to add response to browser cache: ${mo}.`)}),dispatchCallback(rn.progress_callback,{status:"done",name:Mt,file:st}),ho}async function getModelJSON(Mt,st,nn=!0,rn={}){let on=await getModelFile(Mt,st,nn,rn);if(on===null)return{};let sn=new TextDecoder("utf-8").decode(on);return JSON.parse(sn)}async function readResponse(Mt,st){const nn=Mt.headers.get("Content-Length");nn===null&&console.warn("Unable to determine content-length from response headers. Will expand buffer when needed.");let rn=parseInt(nn??"0"),on=new Uint8Array(rn),an=0;const sn=Mt.body.getReader();async function un(){const{done:Xr,value:to}=await sn.read();if(Xr)return;let uo=an+to.length;if(uo>rn){rn=uo;let fn=new Uint8Array(rn);fn.set(on),on=fn}on.set(to,an),an=uo;const hn=an/rn*100;return st({progress:hn,loaded:an,total:rn}),un()}return await un(),on}function pathJoin(...Mt){return Mt=Mt.map((st,nn)=>(nn&&(st=st.replace(new RegExp("^/"),"")),nn!==Mt.length-1&&(st=st.replace(new RegExp("/$"),"")),st)),Mt.join("/")}function interpolate_data(Mt,[st,nn,rn],[on,an],sn="bilinear",un=!1){const Xr=an/rn,to=on/nn,uo=new Mt.constructor(on*an*st),hn=nn*rn,fn=on*an;for(let co=0;co<on;++co)for(let lo=0;lo<an;++lo){const fo=co*an+lo,ho=(lo+.5)/Xr-.5,mo=(co+.5)/to-.5;let Uo=Math.floor(ho),_d=Math.floor(mo);const tp=Math.min(Uo+1,rn-1),ep=Math.min(_d+1,nn-1);Uo=Math.max(Uo,0),_d=Math.max(_d,0);const np=ho-Uo,rp=mo-_d,ip=(1-np)*(1-rp),op=np*(1-rp),ap=(1-np)*rp,sp=np*rp,up=_d*rn,pp=ep*rn,lp=up+Uo,dp=up+tp,cp=pp+Uo,fp=pp+tp;for(let gp=0;gp<st;++gp){const mp=gp*hn;uo[gp*fn+fo]=ip*Mt[mp+lp]+op*Mt[mp+dp]+ap*Mt[mp+cp]+sp*Mt[mp+fp]}}return uo}function permute_data(Mt,st,nn){const rn=new Array(nn.length),on=new Array(nn.length);for(let un=nn.length-1,Xr=1;un>=0;--un)on[un]=Xr,rn[un]=st[nn[un]],Xr*=rn[un];const an=nn.map((un,Xr)=>on[nn.indexOf(Xr)]),sn=new Mt.constructor(Mt.length);for(let un=0;un<Mt.length;++un){let Xr=0;for(let to=st.length-1,uo=un;to>=0;--to)Xr+=uo%st[to]*an[to],uo=Math.floor(uo/st[to]);sn[Xr]=Mt[un]}return[sn,rn]}function softmax(Mt){const st=max$3(Mt)[0],nn=Mt.map(an=>Math.exp(an-st)),rn=nn.reduce((an,sn)=>an+sn,0);return nn.map(an=>an/rn)}function log_softmax(Mt){return softmax(Mt).map(rn=>Math.log(rn))}function getTopItems(Mt,st=0){return Mt=Array.from(Mt).map((nn,rn)=>[rn,nn]).sort((nn,rn)=>rn[1]-nn[1]),st!==null&&st>0&&(Mt=Mt.slice(0,st)),Mt}function min$3(Mt){if(Mt.length===0)throw Error("Array must not be empty");let st=Mt[0],nn=0;for(let rn=1;rn<Mt.length;++rn)Mt[rn]<st&&(st=Mt[rn],nn=rn);return[st,nn]}function max$3(Mt){if(Mt.length===0)throw Error("Array must not be empty");let st=Mt[0],nn=0;for(let rn=1;rn<Mt.length;++rn)Mt[rn]>st&&(st=Mt[rn],nn=rn);return[Number(st),nn]}function isPowerOfTwo(Mt){return Mt>0&&(Mt&Mt-1)===0}class P2FFT{constructor(st){if(this.size=st|0,this.size<=1||!isPowerOfTwo(this.size))throw new Error("FFT size must be a power of two larger than 1");this._csize=st<<1,this.table=new Float64Array(this.size*2);for(let rn=0;rn<this.table.length;rn+=2){const on=Math.PI*rn/this.size;this.table[rn]=Math.cos(on),this.table[rn+1]=-Math.sin(on)}let nn=0;for(let rn=1;this.size>rn;rn<<=1)++nn;this._width=nn%2===0?nn-1:nn,this._bitrev=new Int32Array(1<<this._width);for(let rn=0;rn<this._bitrev.length;++rn){this._bitrev[rn]=0;for(let on=0;on<this._width;on+=2){const an=this._width-on-2;this._bitrev[rn]|=(rn>>>on&3)<<an}}}createComplexArray(){return new Float64Array(this._csize)}fromComplexArray(st,nn){const rn=nn||new Array(st.length>>>1);for(let on=0;on<st.length;on+=2)rn[on>>>1]=st[on];return rn}toComplexArray(st,nn){const rn=nn||this.createComplexArray();for(let on=0;on<rn.length;on+=2)rn[on]=st[on>>>1],rn[on+1]=0;return rn}transform(st,nn){if(st===nn)throw new Error("Input and output buffers must be different");this._transform4(st,nn,1)}realTransform(st,nn){if(st===nn)throw new Error("Input and output buffers must be different");this._realTransform4(st,nn,1)}inverseTransform(st,nn){if(st===nn)throw new Error("Input and output buffers must be different");this._transform4(st,nn,-1);for(let rn=0;rn<st.length;++rn)st[rn]/=this.size}_transform4(st,nn,rn){const on=this._csize;let sn=1<<this._width,un=on/sn<<1,Xr,to;const uo=this._bitrev;if(un===4)for(Xr=0,to=0;Xr<on;Xr+=un,++to){const fn=uo[to];this._singleTransform2(nn,st,Xr,fn,sn)}else for(Xr=0,to=0;Xr<on;Xr+=un,++to){const fn=uo[to];this._singleTransform4(nn,st,Xr,fn,sn,rn)}const hn=this.table;for(sn>>=2;sn>=2;sn>>=2){un=on/sn<<1;const fn=un>>>2;for(Xr=0;Xr<on;Xr+=un){const co=Xr+fn-1;for(let lo=Xr,fo=0;lo<co;lo+=2,fo+=sn){const ho=lo,mo=ho+fn,Uo=mo+fn,_d=Uo+fn,tp=st[ho],ep=st[ho+1],np=st[mo],rp=st[mo+1],ip=st[Uo],op=st[Uo+1],ap=st[_d],sp=st[_d+1],up=hn[fo],pp=rn*hn[fo+1],lp=np*up-rp*pp,dp=np*pp+rp*up,cp=hn[2*fo],fp=rn*hn[2*fo+1],gp=ip*cp-op*fp,mp=ip*fp+op*cp,xp=hn[3*fo],_p=rn*hn[3*fo+1],Sp=ap*xp-sp*_p,Cp=ap*_p+sp*xp,jp=tp+gp,Dp=ep+mp,Vp=tp-gp,Up=ep-mp,Kp=lp+Sp,Mp=dp+Cp,zp=rn*(lp-Sp),Bp=rn*(dp-Cp);st[ho]=jp+Kp,st[ho+1]=Dp+Mp,st[mo]=Vp+Bp,st[mo+1]=Up-zp,st[Uo]=jp-Kp,st[Uo+1]=Dp-Mp,st[_d]=Vp-Bp,st[_d+1]=Up+zp}}}}_singleTransform2(st,nn,rn,on,an){const sn=st[on],un=st[on+1],Xr=st[on+an],to=st[on+an+1];nn[rn]=sn+Xr,nn[rn+1]=un+to,nn[rn+2]=sn-Xr,nn[rn+3]=un-to}_singleTransform4(st,nn,rn,on,an,sn){const un=an*2,Xr=an*3,to=st[on],uo=st[on+1],hn=st[on+an],fn=st[on+an+1],co=st[on+un],lo=st[on+un+1],fo=st[on+Xr],ho=st[on+Xr+1],mo=to+co,Uo=uo+lo,_d=to-co,tp=uo-lo,ep=hn+fo,np=fn+ho,rp=sn*(hn-fo),ip=sn*(fn-ho);nn[rn]=mo+ep,nn[rn+1]=Uo+np,nn[rn+2]=_d+ip,nn[rn+3]=tp-rp,nn[rn+4]=mo-ep,nn[rn+5]=Uo-np,nn[rn+6]=_d-ip,nn[rn+7]=tp+rp}_realTransform4(st,nn,rn){const on=this._csize;let sn=1<<this._width,un=on/sn<<1,Xr,to;const uo=this._bitrev;if(un===4)for(Xr=0,to=0;Xr<on;Xr+=un,++to){const co=uo[to];this._singleRealTransform2(nn,st,Xr,co>>>1,sn>>>1)}else for(Xr=0,to=0;Xr<on;Xr+=un,++to){const co=uo[to];this._singleRealTransform4(nn,st,Xr,co>>>1,sn>>>1,rn)}const hn=this.table;for(sn>>=2;sn>=2;sn>>=2){un=on/sn<<1;const co=un>>>1,lo=co>>>1,fo=lo>>>1;for(Xr=0;Xr<on;Xr+=un)for(let ho=0,mo=0;ho<=fo;ho+=2,mo+=sn){const Uo=Xr+ho,_d=Uo+lo,tp=_d+lo,ep=tp+lo,np=st[Uo],rp=st[Uo+1],ip=st[_d],op=st[_d+1],ap=st[tp],sp=st[tp+1],up=st[ep],pp=st[ep+1],lp=np,dp=rp,cp=hn[mo],fp=rn*hn[mo+1],gp=ip*cp-op*fp,mp=ip*fp+op*cp,xp=hn[2*mo],_p=rn*hn[2*mo+1],Sp=ap*xp-sp*_p,Cp=ap*_p+sp*xp,jp=hn[3*mo],Dp=rn*hn[3*mo+1],Vp=up*jp-pp*Dp,Up=up*Dp+pp*jp,Kp=lp+Sp,Mp=dp+Cp,zp=lp-Sp,Bp=dp-Cp,Pp=gp+Vp,Gp=mp+Up,Wp=rn*(gp-Vp),Xp=rn*(mp-Up);if(st[Uo]=Kp+Pp,st[Uo+1]=Mp+Gp,st[_d]=zp+Xp,st[_d+1]=Bp-Wp,ho===0){st[tp]=Kp-Pp,st[tp+1]=Mp-Gp;continue}if(ho===fo)continue;const Qp=Xr+lo-ho,om=Xr+co-ho;st[Qp]=zp-rn*Xp,st[Qp+1]=-Bp-rn*Wp,st[om]=Kp-rn*Pp,st[om+1]=-Mp+rn*Gp}}const fn=on>>>1;for(let co=2;co<fn;co+=2)st[on-co]=st[co],st[on-co+1]=-st[co+1]}_singleRealTransform2(st,nn,rn,on,an){const sn=st[on],un=st[on+an];nn[rn]=sn+un,nn[rn+1]=0,nn[rn+2]=sn-un,nn[rn+3]=0}_singleRealTransform4(st,nn,rn,on,an,sn){const un=an*2,Xr=an*3,to=st[on],uo=st[on+an],hn=st[on+un],fn=st[on+Xr],co=to+hn,lo=to-hn,fo=uo+fn,ho=sn*(uo-fn);nn[rn]=co+fo,nn[rn+1]=0,nn[rn+2]=lo,nn[rn+3]=-ho,nn[rn+4]=co-fo,nn[rn+5]=0,nn[rn+6]=lo,nn[rn+7]=ho}}class NP2FFT{constructor(st){const nn=2*(st-1),rn=2*(2*st-1),on=2**Math.ceil(Math.log2(rn));this.bufferSize=on,this._a=nn;const an=new Float64Array(rn),sn=new Float64Array(on);this._chirpBuffer=new Float64Array(on),this._buffer1=new Float64Array(on),this._buffer2=new Float64Array(on),this._outBuffer1=new Float64Array(on),this._outBuffer2=new Float64Array(on);const un=-2*Math.PI/st,Xr=Math.cos(un),to=Math.sin(un);for(let uo=0;uo<rn>>1;++uo){const hn=(uo+1-st)**2/2,fn=Math.sqrt(Xr**2+to**2)**hn,co=hn*Math.atan2(to,Xr),lo=2*uo;an[lo]=fn*Math.cos(co),an[lo+1]=fn*Math.sin(co),sn[lo]=an[lo],sn[lo+1]=-an[lo+1]}this._slicedChirpBuffer=an.subarray(nn,rn),this._f=new P2FFT(on>>1),this._f.transform(this._chirpBuffer,sn)}_transform(st,nn,rn){const on=this._buffer1,an=this._buffer2,sn=this._outBuffer1,un=this._outBuffer2,Xr=this._chirpBuffer,to=this._slicedChirpBuffer,uo=this._a;if(rn)for(let hn=0;hn<to.length;hn+=2){const fn=hn+1,co=hn>>1,lo=nn[co];on[hn]=lo*to[hn],on[fn]=lo*to[fn]}else for(let hn=0;hn<to.length;hn+=2){const fn=hn+1;on[hn]=nn[hn]*to[hn]-nn[fn]*to[fn],on[fn]=nn[hn]*to[fn]+nn[fn]*to[hn]}this._f.transform(sn,on);for(let hn=0;hn<Xr.length;hn+=2){const fn=hn+1;an[hn]=sn[hn]*Xr[hn]-sn[fn]*Xr[fn],an[fn]=sn[hn]*Xr[fn]+sn[fn]*Xr[hn]}this._f.inverseTransform(un,an);for(let hn=0;hn<un.length;hn+=2){const fn=un[hn+uo],co=un[hn+uo+1],lo=to[hn],fo=to[hn+1];st[hn]=fn*lo-co*fo,st[hn+1]=fn*fo+co*lo}}transform(st,nn){this._transform(st,nn,!1)}realTransform(st,nn){this._transform(st,nn,!0)}}class FFT{constructor(st){this.fft_length=st,this.isPowerOfTwo=isPowerOfTwo(st),this.isPowerOfTwo?(this.fft=new P2FFT(st),this.outputBufferSize=2*st):(this.fft=new NP2FFT(st),this.outputBufferSize=this.fft.bufferSize)}realTransform(st,nn){this.fft.realTransform(st,nn)}transform(st,nn){this.fft.transform(st,nn)}}function medianFilter(Mt,st){if(st%2===0||st<=0)throw new Error("Window size must be a positive odd number");const nn=new Mt.constructor(Mt.length),rn=new Mt.constructor(st),on=Math.floor(st/2);for(let an=0;an<Mt.length;++an){let sn=0;for(let un=-on;un<=on;++un){let Xr=an+un;Xr<0?Xr=Math.abs(Xr):Xr>=Mt.length&&(Xr=2*(Mt.length-1)-Xr),rn[sn++]=Mt[Xr]}rn.sort(),nn[an]=rn[on]}return nn}function round$1(Mt,st){const nn=Math.pow(10,st);return Math.round(Mt*nn)/nn}function bankers_round(Mt){const st=Math.round(Mt);return Math.abs(Mt)%1===.5?st%2===0?st:st-1:st}const DataTypeMap=Object.freeze({float32:Float32Array,float64:Float64Array,string:Array,int8:Int8Array,uint8:Uint8Array,int16:Int16Array,uint16:Uint16Array,int32:Int32Array,uint32:Uint32Array,int64:BigInt64Array,uint64:BigUint64Array,bool:Uint8Array}),ONNXTensor$1=ONNX.Tensor;class Tensor{constructor(...st){Fp(this,"dims");Fp(this,"type");Fp(this,"data");Fp(this,"size");return st[0]instanceof ONNXTensor$1?Object.assign(this,st[0]):Object.assign(this,new ONNXTensor$1(st[0],st[1],st[2])),new Proxy(this,{get:(nn,rn)=>{if(typeof rn=="string"){let on=Number(rn);if(Number.isInteger(on))return nn._getitem(on)}return nn[rn]},set:(nn,rn,on)=>nn[rn]=on})}*[Symbol.iterator](){const[st,...nn]=this.dims;if(nn.length>0){const rn=nn.reduce((on,an)=>on*an);for(let on=0;on<st;++on)yield this._subarray(on,rn,nn)}else yield*this.data}_getitem(st){const[nn,...rn]=this.dims;if(st=safeIndex(st,nn),rn.length>0){const on=rn.reduce((an,sn)=>an*sn);return this._subarray(st,on,rn)}else return new Tensor(this.type,[this.data[st]],rn)}indexOf(st){for(let nn=0;nn<this.data.length;++nn)if(this.data[nn]==st)return nn;return-1}_subarray(st,nn,rn){const on=st*nn,an=(st+1)*nn,sn="subarray"in this.data?this.data.subarray(on,an):this.data.slice(on,an);return new Tensor(this.type,sn,rn)}item(){if(this.data.length!==1)throw new Error(`a Tensor with ${this.data.length} elements cannot be converted to Scalar`);return this.data[0]}tolist(){return reshape(this.data,this.dims)}sigmoid(){return this.clone().sigmoid_()}sigmoid_(){for(let st=0;st<this.data.length;++st)this.data[st]=1/(1+Math.exp(-this.data[st]));return this}mul(st){return this.clone().mul_(st)}mul_(st){for(let nn=0;nn<this.data.length;++nn)this.data[nn]*=st;return this}add(st){return this.clone().add_(st)}add_(st){for(let nn=0;nn<this.data.length;++nn)this.data[nn]+=st;return this}clone(){return new Tensor(this.type,this.data.slice(),this.dims.slice())}slice(...st){let nn=[],rn=[];for(let Xr=0;Xr<this.dims.length;++Xr){let to=st[Xr];if(to==null)rn.push([0,this.dims[Xr]]),nn.push(this.dims[Xr]);else if(typeof to=="number")to=safeIndex(to,this.dims[Xr],Xr),rn.push([to,to+1]);else if(Array.isArray(to)&&to.length===2){if(to[0]>to[1])throw new Error(`Invalid slice: ${to}`);let uo=[Math.max(to[0],0),Math.min(to[1],this.dims[Xr])];rn.push(uo),nn.push(uo[1]-uo[0])}else throw new Error(`Invalid slice: ${to}`)}let on=rn.map(([Xr,to])=>to-Xr),an=on.reduce((Xr,to)=>Xr*to),sn=new this.data.constructor(an);const un=this.stride();for(let Xr=0;Xr<an;++Xr){let to=0;for(let uo=on.length-1,hn=Xr;uo>=0;--uo){const fn=on[uo];to+=(hn%fn+rn[uo][0])*un[uo],hn=Math.floor(hn/fn)}sn[Xr]=this.data[to]}return new Tensor(this.type,sn,nn)}permute(...st){return permute(this,st)}transpose(...st){return this.permute(...st)}sum(st=null,nn=!1){return this.norm(1,st,nn)}norm(st="fro",nn=null,rn=!1){if(st==="fro")st=2;else if(typeof st=="string")throw Error(`Unsupported norm: ${st}`);if(nn===null){let sn=this.data.reduce((un,Xr)=>un+Xr**st,0)**(1/st);return new Tensor(this.type,[sn],[])}nn=safeIndex(nn,this.dims.length);const on=this.dims.slice();on[nn]=1;const an=new this.data.constructor(this.data.length/this.dims[nn]);for(let sn=0;sn<this.data.length;++sn){let un=0;for(let Xr=this.dims.length-1,to=sn,uo=1;Xr>=0;--Xr){const hn=this.dims[Xr];if(Xr!==nn){const fn=to%hn;un+=fn*uo,uo*=on[Xr]}to=Math.floor(to/hn)}an[un]+=this.data[sn]**st}if(st!==1)for(let sn=0;sn<an.length;++sn)an[sn]=an[sn]**(1/st);return rn||on.splice(nn,1),new Tensor(this.type,an,on)}normalize_(st=2,nn=1){nn=safeIndex(nn,this.dims.length);const rn=this.norm(st,nn,!0);for(let on=0;on<this.data.length;++on){let an=0;for(let sn=this.dims.length-1,un=on,Xr=1;sn>=0;--sn){const to=this.dims[sn];if(sn!==nn){const uo=un%to;an+=uo*Xr,Xr*=this.dims[sn]}un=Math.floor(un/to)}this.data[on]/=rn.data[an]}return this}normalize(st=2,nn=1){return this.clone().normalize_(st,nn)}stride(){return dimsToStride(this.dims)}squeeze(st=null){return new Tensor(this.type,this.data,calc_squeeze_dims(this.dims,st))}squeeze_(st=null){return this.dims=calc_squeeze_dims(this.dims,st),this}unsqueeze(st=null){return new Tensor(this.type,this.data,calc_unsqueeze_dims(this.dims,st))}unsqueeze_(st=null){return this.dims=calc_unsqueeze_dims(this.dims,st),this}flatten_(st=0,nn=-1){nn=(nn+this.dims.length)%this.dims.length;let rn=this.dims.slice(0,st),on=this.dims.slice(st,nn+1),an=this.dims.slice(nn+1);return this.dims=[...rn,on.reduce((sn,un)=>sn*un,1),...an],this}flatten(st=0,nn=-1){return this.clone().flatten_(st,nn)}view(...st){let nn=-1;for(let rn=0;rn<st.length;++rn)if(st[rn]===-1){if(nn!==-1)throw new Error("Only one dimension can be inferred");nn=rn}if(nn!==-1){const rn=st.reduce((on,an,sn)=>sn!==nn?on*an:on,1);st[nn]=this.data.length/rn}return new Tensor(this.type,this.data,st)}neg_(){for(let st=0;st<this.data.length;++st)this.data[st]=-this.data[st];return this}neg(){return this.clone().neg_()}clamp_(st,nn){for(let rn=0;rn<this.data.length;++rn)this.data[rn]=Math.min(Math.max(this.data[rn],st),nn);return this}clamp(st,nn){return this.clone().clamp_(st,nn)}round_(){for(let st=0;st<this.data.length;++st)this.data[st]=Math.round(this.data[st]);return this}round(){return this.clone().round_()}to(st){if(this.type===st)return this;if(!DataTypeMap.hasOwnProperty(st))throw new Error(`Unsupported type: ${st}`);return new Tensor(st,DataTypeMap[st].from(this.data),this.dims)}}function reshape(Mt,st){const nn=Mt.length,rn=st.reduce((an,sn)=>an*sn);if(nn!==rn)throw Error(`cannot reshape array of size ${nn} into shape (${st})`);let on=Mt;for(let an=st.length-1;an>=0;an--)on=on.reduce((sn,un)=>{let Xr=sn[sn.length-1];return Xr.length<st[an]?Xr.push(un):sn.push([un]),sn},[[]]);return on[0]}function permute(Mt,st){const[nn,rn]=permute_data(Mt.data,Mt.dims,st);return new Tensor(Mt.type,nn,rn)}function interpolate$1(Mt,[st,nn],rn="bilinear",on=!1){const an=Mt.dims.at(-3)??1,sn=Mt.dims.at(-2),un=Mt.dims.at(-1);let Xr=interpolate_data(Mt.data,[an,sn,un],[st,nn],rn,on);return new Tensor(Mt.type,Xr,[an,st,nn])}function mean_pooling(Mt,st){let nn=[Mt.dims[0],Mt.dims[2]],rn=new Mt.data.constructor(nn[0]*nn[1]),[on,an,sn]=Mt.dims,un=0;for(let Xr=0;Xr<on;++Xr){let to=Xr*sn*an;for(let uo=0;uo<sn;++uo){let hn=0,fn=0,co=Xr*an,lo=to+uo;for(let ho=0;ho<an;++ho){let mo=Number(st.data[co+ho]);fn+=mo,hn+=Mt.data[lo+ho*sn]*mo}let fo=hn/fn;rn[un++]=fo}}return new Tensor(Mt.type,rn,nn)}function calc_squeeze_dims(Mt,st){return Mt=Mt.slice(),st===null?Mt=Mt.filter(nn=>nn!==1):typeof st=="number"?Mt[st]===1&&Mt.splice(st,1):Array.isArray(st)&&(Mt=Mt.filter((nn,rn)=>nn!==1||!st.includes(rn))),Mt}function calc_unsqueeze_dims(Mt,st){return st=safeIndex(st,Mt.length+1),Mt=Mt.slice(),Mt.splice(st,0,1),Mt}function safeIndex(Mt,st,nn=null){if(Mt<-st||Mt>=st)throw new Error(`IndexError: index ${Mt} is out of bounds for dimension${nn===null?"":" "+nn} with size ${st}`);return Mt<0&&(Mt=(Mt%st+st)%st),Mt}function cat(Mt,st=0){st=safeIndex(st,Mt[0].dims.length);const nn=Mt[0].dims.slice();nn[st]=Mt.reduce((sn,un)=>sn+un.dims[st],0);const rn=nn.reduce((sn,un)=>sn*un,1),on=new Mt[0].data.constructor(rn),an=Mt[0].type;if(st===0){let sn=0;for(let un of Mt)on.set(un.data,sn),sn+=un.data.length}else{let sn=0;for(let un=0;un<Mt.length;++un){let Xr=Mt[un];for(let to=0;to<Xr.data.length;++to){let uo=0;for(let hn=Xr.dims.length-1,fn=to,co=1;hn>=0;--hn){const lo=Xr.dims[hn];let fo=fn%lo;hn===st&&(fo+=sn),uo+=fo*co,co*=nn[hn],fn=Math.floor(fn/lo)}on[uo]=Xr.data[to]}sn+=Xr.dims[st]}}return new Tensor(an,on,nn)}function stack(Mt,st=0){return cat(Mt.map(nn=>nn.unsqueeze(st)),st)}function std_mean(Mt,st=null,nn=1,rn=!1){if(st===null){const to=Mt.data.reduce((co,lo)=>co+lo,0)/Mt.data.length,uo=Math.sqrt(Mt.data.reduce((co,lo)=>co+(lo-to)**2,0)/(Mt.data.length-nn)),hn=new Tensor(Mt.type,[to],[]);return[new Tensor(Mt.type,[uo],[]),hn]}st=safeIndex(st,Mt.dims.length);const on=mean(Mt,st,rn),an=Mt.dims.slice();an[st]=1;const sn=new Mt.data.constructor(Mt.data.length/Mt.dims[st]);for(let Xr=0;Xr<Mt.data.length;++Xr){let to=0;for(let uo=Mt.dims.length-1,hn=Xr,fn=1;uo>=0;--uo){const co=Mt.dims[uo];if(uo!==st){const lo=hn%co;to+=lo*fn,fn*=an[uo]}hn=Math.floor(hn/co)}sn[to]+=(Mt.data[Xr]-on.data[to])**2}for(let Xr=0;Xr<sn.length;++Xr)sn[Xr]=Math.sqrt(sn[Xr]/(Mt.dims[st]-nn));return rn||an.splice(st,1),[new Tensor(Mt.type,sn,an),on]}function mean(Mt,st=null,nn=!1){if(st===null){let an=Mt.data.reduce((sn,un)=>sn+un,0);return new Tensor(Mt.type,[an/Mt.data.length],[])}st=safeIndex(st,Mt.dims.length);const rn=Mt.dims.slice();rn[st]=1;const on=new Mt.data.constructor(Mt.data.length/Mt.dims[st]);for(let an=0;an<Mt.data.length;++an){let sn=0;for(let un=Mt.dims.length-1,Xr=an,to=1;un>=0;--un){const uo=Mt.dims[un];if(un!==st){const hn=Xr%uo;sn+=hn*to,to*=rn[un]}Xr=Math.floor(Xr/uo)}on[sn]+=Mt.data[an]}if(Mt.dims[st]!==1)for(let an=0;an<on.length;++an)on[an]=on[an]/Mt.dims[st];return nn||rn.splice(st,1),new Tensor(Mt.type,on,rn)}function dynamicTimeWarping(Mt){const[st,nn]=Mt.dims,rn=[st+1,nn+1],on=new Tensor("float32",new Float32Array(rn[0]*rn[1]).fill(1/0),rn),an=new Tensor("float32",new Float32Array(rn[0]*rn[1]).fill(-1),rn);on[0].data[0]=0;for(let uo=1;uo<nn+1;++uo)for(let hn=1;hn<st+1;++hn){const fn=on[hn-1][uo-1].item(),co=on[hn-1][uo].item(),lo=on[hn][uo-1].item();let fo,ho;fn<co&&fn<lo?(fo=fn,ho=0):co<fn&&co<lo?(fo=co,ho=1):(fo=lo,ho=2),on[hn].data[uo]=Mt[hn-1][uo-1].item()+fo,an[hn].data[uo]=ho}let sn=st,un=nn;an.data.fill(2,0,rn[1]);for(let uo=0;uo<rn[0];++uo)an[uo].data[0]=1;let Xr=[],to=[];for(;sn>0||un>0;)switch(Xr.push(sn-1),to.push(un-1),an[sn][un].item()){case 0:--sn,--un;break;case 1:--sn;break;case 2:--un;break;default:throw new Error(`Internal error in dynamic time warping. Unexpected trace[${sn}, ${un}]. Please file a bug report.`)}return Xr.reverse(),to.reverse(),[Xr,to]}function dimsToStride(Mt){const st=new Array(Mt.length);for(let nn=Mt.length-1,rn=1;nn>=0;--nn)st[nn]=rn,rn*=Mt[nn];return st}function ones(Mt){const st=Mt.reduce((nn,rn)=>nn*rn,1);return new Tensor("int64",new BigInt64Array(st).fill(1n),Mt)}function ones_like(Mt){return ones(Mt.dims)}function quantize_embeddings(Mt,st){if(Mt.dims.length!==2)throw new Error("The tensor must have 2 dimensions");if(Mt.dims.at(-1)%8!==0)throw new Error("The last dimension of the tensor must be a multiple of 8");if(!["binary","ubinary"].includes(st))throw new Error("The precision must be either 'binary' or 'ubinary'");const nn=st==="binary",rn=nn?"int8":"uint8",on=nn?Int8Array:Uint8Array,an=Mt.data,sn=new on(an.length/8);for(let un=0;un<an.length;++un){const Xr=an[un]>0?1:0,to=Math.floor(un/8),uo=un%8;sn[to]|=Xr<<7-uo,nn&&uo===0&&(sn[to]-=128)}return new Tensor(rn,sn,[Mt.dims[0],Mt.dims[1]/8])}class PriorityQueue{constructor(st=(nn,rn)=>nn>rn){this._heap=[],this._comparator=st}get size(){return this._heap.length}isEmpty(){return this.size===0}peek(){return this._heap[0]}push(...st){return this.extend(st)}extend(st){for(const nn of st)this._heap.push(nn),this._siftUp();return this.size}pop(){const st=this.peek(),nn=this.size-1;return nn>0&&this._swap(0,nn),this._heap.pop(),this._siftDown(),st}replace(st){const nn=this.peek();return this._heap[0]=st,this._siftDown(),nn}_parent(st){return(st+1>>>1)-1}_left(st){return(st<<1)+1}_right(st){return st+1<<1}_greater(st,nn){return this._comparator(this._heap[st],this._heap[nn])}_swap(st,nn){const rn=this._heap[st];this._heap[st]=this._heap[nn],this._heap[nn]=rn}_siftUp(){let st=this.size-1;for(;st>0&&this._greater(st,this._parent(st));)this._swap(st,this._parent(st)),st=this._parent(st)}_siftDown(){let st=0;for(;this._left(st)<this.size&&this._greater(this._left(st),st)||this._right(st)<this.size&&this._greater(this._right(st),st);){const nn=this._right(st)<this.size&&this._greater(this._right(st),this._left(st))?this._right(st):this._left(st);this._swap(st,nn),st=nn}}}class CharTrie{constructor(){this.root=CharTrieNode.default()}extend(st){for(let nn of st)this.push(nn)}push(st){let nn=this.root;for(let rn of st){let on=nn.children.get(rn);on===void 0&&(on=CharTrieNode.default(),nn.children.set(rn,on)),nn=on}nn.isLeaf=!0}*commonPrefixSearch(st){let nn=this.root,rn="";for(let on=0;on<st.length&&nn!==void 0;++on){const an=st[on];rn+=an,nn=nn.children.get(an),nn!==void 0&&nn.isLeaf&&(yield rn)}}}class CharTrieNode{constructor(st,nn){this.isLeaf=st,this.children=nn}static default(){return new CharTrieNode(!1,new Map)}}class TokenLattice{constructor(st,nn,rn){this.sentence=st,this.len=st.length,this.bosTokenId=nn,this.eosTokenId=rn,this.nodes=[],this.beginNodes=Array.from({length:this.len+1},()=>[]),this.endNodes=Array.from({length:this.len+1},()=>[]);const on=new TokenLatticeNode(this.bosTokenId,0,0,0,0),an=new TokenLatticeNode(this.eosTokenId,1,this.len,0,0);this.nodes.push(on.clone()),this.nodes.push(an.clone()),this.beginNodes[this.len].push(an),this.endNodes[0].push(on)}insert(st,nn,rn,on){const an=this.nodes.length,sn=new TokenLatticeNode(on,an,st,nn,rn);this.beginNodes[st].push(sn),this.endNodes[st+nn].push(sn),this.nodes.push(sn)}viterbi(){const st=this.len;let nn=0;for(;nn<=st;){if(this.beginNodes[nn].length==0)return[];for(let un of this.beginNodes[nn]){un.prev=null;let Xr=0,to=null;for(let uo of this.endNodes[nn]){const hn=uo.backtraceScore+un.score;(to===null||hn>Xr)&&(to=uo.clone(),Xr=hn)}if(to!==null)un.prev=to,un.backtraceScore=Xr;else return[]}++nn}const rn=[],an=this.beginNodes[st][0].prev;if(an===null)return[];let sn=an.clone();for(;sn.prev!==null;)rn.push(sn.clone()),sn=sn.clone().prev.clone();return rn.reverse(),rn}piece(st){return this.sentence.slice(st.pos,st.pos+st.length)}tokens(){return this.viterbi().map(nn=>this.piece(nn))}tokenIds(){return this.viterbi().map(nn=>nn.tokenId)}}class TokenLatticeNode{constructor(st,nn,rn,on,an){this.tokenId=st,this.nodeId=nn,this.pos=rn,this.length=on,this.score=an,this.prev=null,this.backtraceScore=0}clone(){const st=new TokenLatticeNode(this.tokenId,this.nodeId,this.pos,this.length,this.score);return st.prev=this.prev,st.backtraceScore=this.backtraceScore,st}}var TOKEN_TYPES=Object.freeze({Text:"Text",NumericLiteral:"NumericLiteral",BooleanLiteral:"BooleanLiteral",StringLiteral:"StringLiteral",Identifier:"Identifier",Equals:"Equals",OpenParen:"OpenParen",CloseParen:"CloseParen",OpenStatement:"OpenStatement",CloseStatement:"CloseStatement",OpenExpression:"OpenExpression",CloseExpression:"CloseExpression",OpenSquareBracket:"OpenSquareBracket",CloseSquareBracket:"CloseSquareBracket",OpenCurlyBracket:"OpenCurlyBracket",CloseCurlyBracket:"CloseCurlyBracket",Comma:"Comma",Dot:"Dot",Colon:"Colon",Pipe:"Pipe",CallOperator:"CallOperator",AdditiveBinaryOperator:"AdditiveBinaryOperator",MultiplicativeBinaryOperator:"MultiplicativeBinaryOperator",ComparisonBinaryOperator:"ComparisonBinaryOperator",UnaryOperator:"UnaryOperator",Set:"Set",If:"If",For:"For",In:"In",Is:"Is",NotIn:"NotIn",Else:"Else",EndIf:"EndIf",ElseIf:"ElseIf",EndFor:"EndFor",And:"And",Or:"Or",Not:"UnaryOperator"}),KEYWORDS=Object.freeze({set:TOKEN_TYPES.Set,for:TOKEN_TYPES.For,in:TOKEN_TYPES.In,is:TOKEN_TYPES.Is,if:TOKEN_TYPES.If,else:TOKEN_TYPES.Else,endif:TOKEN_TYPES.EndIf,elif:TOKEN_TYPES.ElseIf,endfor:TOKEN_TYPES.EndFor,and:TOKEN_TYPES.And,or:TOKEN_TYPES.Or,not:TOKEN_TYPES.Not,"not in":TOKEN_TYPES.NotIn,true:TOKEN_TYPES.BooleanLiteral,false:TOKEN_TYPES.BooleanLiteral}),Token=class{constructor(Mt,st){this.value=Mt,this.type=st}};function isWord(Mt){return/\w/.test(Mt)}function isInteger(Mt){return/[0-9]/.test(Mt)}var ORDERED_MAPPING_TABLE=[["{%",TOKEN_TYPES.OpenStatement],["%}",TOKEN_TYPES.CloseStatement],["{{",TOKEN_TYPES.OpenExpression],["}}",TOKEN_TYPES.CloseExpression],["(",TOKEN_TYPES.OpenParen],[")",TOKEN_TYPES.CloseParen],["{",TOKEN_TYPES.OpenCurlyBracket],["}",TOKEN_TYPES.CloseCurlyBracket],["[",TOKEN_TYPES.OpenSquareBracket],["]",TOKEN_TYPES.CloseSquareBracket],[",",TOKEN_TYPES.Comma],[".",TOKEN_TYPES.Dot],[":",TOKEN_TYPES.Colon],["|",TOKEN_TYPES.Pipe],["<=",TOKEN_TYPES.ComparisonBinaryOperator],[">=",TOKEN_TYPES.ComparisonBinaryOperator],["==",TOKEN_TYPES.ComparisonBinaryOperator],["!=",TOKEN_TYPES.ComparisonBinaryOperator],["<",TOKEN_TYPES.ComparisonBinaryOperator],[">",TOKEN_TYPES.ComparisonBinaryOperator],["+",TOKEN_TYPES.AdditiveBinaryOperator],["-",TOKEN_TYPES.AdditiveBinaryOperator],["*",TOKEN_TYPES.MultiplicativeBinaryOperator],["/",TOKEN_TYPES.MultiplicativeBinaryOperator],["%",TOKEN_TYPES.MultiplicativeBinaryOperator],["=",TOKEN_TYPES.Equals]],ESCAPE_CHARACTERS=new Map([["n",`
`],["t","	"],["r","\r"],["b","\b"],["f","\f"],["v","\v"],["'","'"],['"','"'],["\\","\\"]]);function preprocess(Mt,st={}){return Mt.endsWith(`
`)&&(Mt=Mt.slice(0,-1)),Mt=Mt.replace(/{#.*?#}/gs,"{##}"),st.lstrip_blocks&&(Mt=Mt.replace(/^[ \t]*({[#%])/gm,"$1")),st.trim_blocks&&(Mt=Mt.replace(/([#%]})\n/g,"$1")),Mt.replace(/{##}/g,"").replace(/-%}\s*/g,"%}").replace(/\s*{%-/g,"{%").replace(/-}}\s*/g,"}}").replace(/\s*{{-/g,"{{")}function tokenize(Mt,st={}){var sn,un,Xr;const nn=[],rn=preprocess(Mt,st);let on=0;const an=to=>{let uo="";for(;to(rn[on]);){if(rn[on]==="\\"){if(++on,on>=rn.length)throw new SyntaxError("Unexpected end of input");const hn=rn[on++],fn=ESCAPE_CHARACTERS.get(hn);if(fn===void 0)throw new SyntaxError(`Unexpected escaped character: ${hn}`);uo+=fn;continue}if(uo+=rn[on++],on>=rn.length)throw new SyntaxError("Unexpected end of input")}return uo};e:for(;on<rn.length;){const to=(sn=nn.at(-1))==null?void 0:sn.type;if(to===void 0||to===TOKEN_TYPES.CloseStatement||to===TOKEN_TYPES.CloseExpression){let hn="";for(;on<rn.length&&!(rn[on]==="{"&&(rn[on+1]==="%"||rn[on+1]==="{"));)hn+=rn[on++];if(hn.length>0){nn.push(new Token(hn,TOKEN_TYPES.Text));continue}}an(hn=>/\s/.test(hn));const uo=rn[on];if(uo==="-"||uo==="+"){const hn=(un=nn.at(-1))==null?void 0:un.type;if(hn===TOKEN_TYPES.Text||hn===void 0)throw new SyntaxError(`Unexpected character: ${uo}`);switch(hn){case TOKEN_TYPES.Identifier:case TOKEN_TYPES.NumericLiteral:case TOKEN_TYPES.BooleanLiteral:case TOKEN_TYPES.StringLiteral:case TOKEN_TYPES.CloseParen:case TOKEN_TYPES.CloseSquareBracket:break;default:{++on;const fn=an(isInteger);nn.push(new Token(`${uo}${fn}`,fn.length>0?TOKEN_TYPES.NumericLiteral:TOKEN_TYPES.UnaryOperator));continue}}}for(const[hn,fn]of ORDERED_MAPPING_TABLE)if(rn.slice(on,on+hn.length)===hn){nn.push(new Token(hn,fn)),on+=hn.length;continue e}if(uo==="'"||uo==='"'){++on;const hn=an(fn=>fn!==uo);nn.push(new Token(hn,TOKEN_TYPES.StringLiteral)),++on;continue}if(isInteger(uo)){const hn=an(isInteger);nn.push(new Token(hn,TOKEN_TYPES.NumericLiteral));continue}if(isWord(uo)){const hn=an(isWord),fn=Object.hasOwn(KEYWORDS,hn)?KEYWORDS[hn]:TOKEN_TYPES.Identifier;fn===TOKEN_TYPES.In&&((Xr=nn.at(-1))==null?void 0:Xr.type)===TOKEN_TYPES.Not?(nn.pop(),nn.push(new Token("not in",TOKEN_TYPES.NotIn))):nn.push(new Token(hn,fn));continue}throw new SyntaxError(`Unexpected character: ${uo}`)}return nn}var Statement=class{constructor(){Fp(this,"type","Statement")}},Program=class extends Statement{constructor(st){super();Fp(this,"type","Program");this.body=st}},If=class extends Statement{constructor(st,nn,rn){super();Fp(this,"type","If");this.test=st,this.body=nn,this.alternate=rn}},For=class extends Statement{constructor(st,nn,rn){super();Fp(this,"type","For");this.loopvar=st,this.iterable=nn,this.body=rn}},SetStatement=class extends Statement{constructor(st,nn){super();Fp(this,"type","Set");this.assignee=st,this.value=nn}},Expression=class extends Statement{constructor(){super(...arguments);Fp(this,"type","Expression")}},MemberExpression=class extends Expression{constructor(st,nn,rn){super();Fp(this,"type","MemberExpression");this.object=st,this.property=nn,this.computed=rn}},CallExpression=class extends Expression{constructor(st,nn){super();Fp(this,"type","CallExpression");this.callee=st,this.args=nn}},Identifier=class extends Expression{constructor(st){super();Fp(this,"type","Identifier");this.value=st}},Literal=class extends Expression{constructor(st){super();Fp(this,"type","Literal");this.value=st}},NumericLiteral=class extends Literal{constructor(){super(...arguments);Fp(this,"type","NumericLiteral")}},StringLiteral=class extends Literal{constructor(){super(...arguments);Fp(this,"type","StringLiteral")}},BooleanLiteral=class extends Literal{constructor(){super(...arguments);Fp(this,"type","BooleanLiteral")}},ArrayLiteral=class extends Literal{constructor(){super(...arguments);Fp(this,"type","ArrayLiteral")}},TupleLiteral=class extends Literal{constructor(){super(...arguments);Fp(this,"type","TupleLiteral")}},ObjectLiteral=class extends Literal{constructor(){super(...arguments);Fp(this,"type","ObjectLiteral")}},BinaryExpression=class extends Expression{constructor(st,nn,rn){super();Fp(this,"type","BinaryExpression");this.operator=st,this.left=nn,this.right=rn}},FilterExpression=class extends Expression{constructor(st,nn){super();Fp(this,"type","FilterExpression");this.operand=st,this.filter=nn}},TestExpression=class extends Expression{constructor(st,nn,rn){super();Fp(this,"type","TestExpression");this.operand=st,this.negate=nn,this.test=rn}},UnaryExpression=class extends Expression{constructor(st,nn){super();Fp(this,"type","UnaryExpression");this.operator=st,this.argument=nn}},SliceExpression=class extends Expression{constructor(st=void 0,nn=void 0,rn=void 0){super();Fp(this,"type","SliceExpression");this.start=st,this.stop=nn,this.step=rn}},KeywordArgumentExpression=class extends Expression{constructor(st,nn){super();Fp(this,"type","KeywordArgumentExpression");this.key=st,this.value=nn}};function parse(Mt){const st=new Program([]);let nn=0;function rn(dp,cp){const fp=Mt[nn++];if(!fp||fp.type!==dp)throw new Error(`Parser Error: ${cp}. ${fp.type} !== ${dp}.`);return fp}function on(){switch(Mt[nn].type){case TOKEN_TYPES.Text:return un();case TOKEN_TYPES.OpenStatement:return Xr();case TOKEN_TYPES.OpenExpression:return to();default:throw new SyntaxError(`Unexpected token type: ${Mt[nn].type}`)}}function an(...dp){return nn+dp.length<=Mt.length&&dp.some((cp,fp)=>cp!==Mt[nn+fp].type)}function sn(...dp){return nn+dp.length<=Mt.length&&dp.every((cp,fp)=>cp===Mt[nn+fp].type)}function un(){return new StringLiteral(rn(TOKEN_TYPES.Text,"Expected text token").value)}function Xr(){rn(TOKEN_TYPES.OpenStatement,"Expected opening statement token");let dp;switch(Mt[nn].type){case TOKEN_TYPES.Set:++nn,dp=uo(),rn(TOKEN_TYPES.CloseStatement,"Expected closing statement token");break;case TOKEN_TYPES.If:++nn,dp=hn(),rn(TOKEN_TYPES.OpenStatement,"Expected {% token"),rn(TOKEN_TYPES.EndIf,"Expected endif token"),rn(TOKEN_TYPES.CloseStatement,"Expected %} token");break;case TOKEN_TYPES.For:++nn,dp=co(),rn(TOKEN_TYPES.OpenStatement,"Expected {% token"),rn(TOKEN_TYPES.EndFor,"Expected endfor token"),rn(TOKEN_TYPES.CloseStatement,"Expected %} token");break;default:throw new SyntaxError(`Unknown statement type: ${Mt[nn].type}`)}return dp}function to(){rn(TOKEN_TYPES.OpenExpression,"Expected opening expression token");const dp=lo();return rn(TOKEN_TYPES.CloseExpression,"Expected closing expression token"),dp}function uo(){const dp=lo();if(sn(TOKEN_TYPES.Equals)){++nn;const cp=uo();return new SetStatement(dp,cp)}return dp}function hn(){var gp,mp,xp,_p,Sp,Cp,jp,Dp;const dp=lo();rn(TOKEN_TYPES.CloseStatement,"Expected closing statement token");const cp=[],fp=[];for(;!(((gp=Mt[nn])==null?void 0:gp.type)===TOKEN_TYPES.OpenStatement&&(((mp=Mt[nn+1])==null?void 0:mp.type)===TOKEN_TYPES.ElseIf||((xp=Mt[nn+1])==null?void 0:xp.type)===TOKEN_TYPES.Else||((_p=Mt[nn+1])==null?void 0:_p.type)===TOKEN_TYPES.EndIf));)cp.push(on());if(((Sp=Mt[nn])==null?void 0:Sp.type)===TOKEN_TYPES.OpenStatement&&((Cp=Mt[nn+1])==null?void 0:Cp.type)!==TOKEN_TYPES.EndIf)if(++nn,sn(TOKEN_TYPES.ElseIf))rn(TOKEN_TYPES.ElseIf,"Expected elseif token"),fp.push(hn());else for(rn(TOKEN_TYPES.Else,"Expected else token"),rn(TOKEN_TYPES.CloseStatement,"Expected closing statement token");!(((jp=Mt[nn])==null?void 0:jp.type)===TOKEN_TYPES.OpenStatement&&((Dp=Mt[nn+1])==null?void 0:Dp.type)===TOKEN_TYPES.EndIf);)fp.push(on());return new If(dp,cp,fp)}function fn(dp=!1){const cp=dp?lp:lo,fp=[cp()],gp=sn(TOKEN_TYPES.Comma);for(;gp&&(++nn,fp.push(cp()),!!sn(TOKEN_TYPES.Comma)););return gp?new TupleLiteral(fp):fp[0]}function co(){const dp=fn(!0);if(!(dp instanceof Identifier||dp instanceof TupleLiteral))throw new SyntaxError(`Expected identifier/tuple for the loop variable, got ${dp.type} instead`);rn(TOKEN_TYPES.In,"Expected `in` keyword following loop variable");const cp=lo();rn(TOKEN_TYPES.CloseStatement,"Expected closing statement token");const fp=[];for(;an(TOKEN_TYPES.OpenStatement,TOKEN_TYPES.EndFor);)fp.push(on());return new For(dp,cp,fp)}function lo(){return fo()}function fo(){const dp=ho();if(sn(TOKEN_TYPES.If)){++nn;const cp=ho();rn(TOKEN_TYPES.Else,"Expected else token");const fp=ho();return new If(cp,[dp],[fp])}return dp}function ho(){let dp=mo();for(;sn(TOKEN_TYPES.Or);){const cp=Mt[nn];++nn;const fp=mo();dp=new BinaryExpression(cp,dp,fp)}return dp}function mo(){let dp=Uo();for(;sn(TOKEN_TYPES.And);){const cp=Mt[nn];++nn;const fp=Uo();dp=new BinaryExpression(cp,dp,fp)}return dp}function Uo(){let dp;for(;sn(TOKEN_TYPES.Not);){const cp=Mt[nn];++nn;const fp=Uo();dp=new UnaryExpression(cp,fp)}return dp??_d()}function _d(){let dp=tp();for(;sn(TOKEN_TYPES.ComparisonBinaryOperator)||sn(TOKEN_TYPES.In)||sn(TOKEN_TYPES.NotIn);){const cp=Mt[nn];++nn;const fp=tp();dp=new BinaryExpression(cp,dp,fp)}return dp}function tp(){let dp=sp();for(;sn(TOKEN_TYPES.AdditiveBinaryOperator);){const cp=Mt[nn];++nn;const fp=sp();dp=new BinaryExpression(cp,dp,fp)}return dp}function ep(){const dp=ap();return sn(TOKEN_TYPES.OpenParen)?np(dp):dp}function np(dp){let cp=new CallExpression(dp,rp());return sn(TOKEN_TYPES.OpenParen)&&(cp=np(cp)),cp}function rp(){rn(TOKEN_TYPES.OpenParen,"Expected opening parenthesis for arguments list");const dp=ip();return rn(TOKEN_TYPES.CloseParen,"Expected closing parenthesis for arguments list"),dp}function ip(){const dp=[];for(;!sn(TOKEN_TYPES.CloseParen);){let cp=lo();if(sn(TOKEN_TYPES.Equals)){if(++nn,!(cp instanceof Identifier))throw new SyntaxError("Expected identifier for keyword argument");const fp=lo();cp=new KeywordArgumentExpression(cp,fp)}dp.push(cp),sn(TOKEN_TYPES.Comma)&&++nn}return dp}function op(){const dp=[];let cp=!1;for(;!sn(TOKEN_TYPES.CloseSquareBracket);)sn(TOKEN_TYPES.Colon)?(dp.push(void 0),++nn,cp=!0):(dp.push(lo()),sn(TOKEN_TYPES.Colon)&&(++nn,cp=!0));if(dp.length===0)throw new SyntaxError("Expected at least one argument for member/slice expression");if(cp){if(dp.length>3)throw new SyntaxError("Expected 0-3 arguments for slice expression");return new SliceExpression(...dp)}return dp[0]}function ap(){let dp=lp();for(;sn(TOKEN_TYPES.Dot)||sn(TOKEN_TYPES.OpenSquareBracket);){const cp=Mt[nn];++nn;let fp;const gp=cp.type!==TOKEN_TYPES.Dot;if(gp)fp=op(),rn(TOKEN_TYPES.CloseSquareBracket,"Expected closing square bracket");else if(fp=lp(),fp.type!=="Identifier")throw new SyntaxError("Expected identifier following dot operator");dp=new MemberExpression(dp,fp,gp)}return dp}function sp(){let dp=up();for(;sn(TOKEN_TYPES.MultiplicativeBinaryOperator);){const cp=Mt[nn];++nn;const fp=up();dp=new BinaryExpression(cp,dp,fp)}return dp}function up(){let dp=pp();for(;sn(TOKEN_TYPES.Is);){++nn;const cp=sn(TOKEN_TYPES.Not);cp&&++nn;let fp=lp();if(fp instanceof BooleanLiteral&&(fp=new Identifier(fp.value.toString())),!(fp instanceof Identifier))throw new SyntaxError("Expected identifier for the test");dp=new TestExpression(dp,cp,fp)}return dp}function pp(){let dp=ep();for(;sn(TOKEN_TYPES.Pipe);){++nn;let cp=lp();if(!(cp instanceof Identifier))throw new SyntaxError("Expected identifier for the filter");sn(TOKEN_TYPES.OpenParen)&&(cp=np(cp)),dp=new FilterExpression(dp,cp)}return dp}function lp(){const dp=Mt[nn];switch(dp.type){case TOKEN_TYPES.NumericLiteral:return++nn,new NumericLiteral(Number(dp.value));case TOKEN_TYPES.StringLiteral:return++nn,new StringLiteral(dp.value);case TOKEN_TYPES.BooleanLiteral:return++nn,new BooleanLiteral(dp.value==="true");case TOKEN_TYPES.Identifier:return++nn,new Identifier(dp.value);case TOKEN_TYPES.OpenParen:{++nn;const cp=fn();if(Mt[nn].type!==TOKEN_TYPES.CloseParen)throw new SyntaxError(`Expected closing parenthesis, got ${Mt[nn].type} instead`);return++nn,cp}case TOKEN_TYPES.OpenSquareBracket:{++nn;const cp=[];for(;!sn(TOKEN_TYPES.CloseSquareBracket);)cp.push(lo()),sn(TOKEN_TYPES.Comma)&&++nn;return++nn,new ArrayLiteral(cp)}case TOKEN_TYPES.OpenCurlyBracket:{++nn;const cp=new Map;for(;!sn(TOKEN_TYPES.CloseCurlyBracket);){const fp=lo();rn(TOKEN_TYPES.Colon,"Expected colon between key and value in object literal");const gp=lo();cp.set(fp,gp),sn(TOKEN_TYPES.Comma)&&++nn}return++nn,new ObjectLiteral(cp)}default:throw new SyntaxError(`Unexpected token: ${dp.type}`)}}for(;nn<Mt.length;)st.body.push(on());return st}function range$4(Mt,st,nn=1){st===void 0&&(st=Mt,Mt=0);const rn=[];for(let on=Mt;on<st;on+=nn)rn.push(on);return rn}function slice(Mt,st,nn,rn=1){const on=Math.sign(rn);on>=0?(st=(st??(st=0))<0?Math.max(Mt.length+st,0):Math.min(st,Mt.length),nn=(nn??(nn=Mt.length))<0?Math.max(Mt.length+nn,0):Math.min(nn,Mt.length)):(st=(st??(st=Mt.length-1))<0?Math.max(Mt.length+st,-1):Math.min(st,Mt.length-1),nn=(nn??(nn=-1))<-1?Math.max(Mt.length+nn,-1):Math.min(nn,Mt.length-1));const an=[];for(let sn=st;on*sn<on*nn;sn+=rn)an.push(Mt[sn]);return an}function titleCase(Mt){return Mt.replace(/\b\w/g,st=>st.toUpperCase())}var RuntimeValue=class{constructor(Mt=void 0){Fp(this,"type","RuntimeValue");Fp(this,"value");Fp(this,"builtins",new Map);this.value=Mt}__bool__(){return new BooleanValue(!!this.value)}},NumericValue=class extends RuntimeValue{constructor(){super(...arguments);Fp(this,"type","NumericValue")}},StringValue=class extends RuntimeValue{constructor(){super(...arguments);Fp(this,"type","StringValue");Fp(this,"builtins",new Map([["upper",new FunctionValue(()=>new StringValue(this.value.toUpperCase()))],["lower",new FunctionValue(()=>new StringValue(this.value.toLowerCase()))],["strip",new FunctionValue(()=>new StringValue(this.value.trim()))],["title",new FunctionValue(()=>new StringValue(titleCase(this.value)))],["length",new NumericValue(this.value.length)]]))}},BooleanValue=class extends RuntimeValue{constructor(){super(...arguments);Fp(this,"type","BooleanValue")}},ObjectValue=class extends RuntimeValue{constructor(){super(...arguments);Fp(this,"type","ObjectValue");Fp(this,"builtins",new Map([["get",new FunctionValue(([st,nn])=>{if(!(st instanceof StringValue))throw new Error(`Object key must be a string: got ${st.type}`);return this.value.get(st.value)??nn??new NullValue})],["items",new FunctionValue(()=>new ArrayValue(Array.from(this.value.entries()).map(([st,nn])=>new ArrayValue([new StringValue(st),nn]))))]]))}__bool__(){return new BooleanValue(this.value.size>0)}},ArrayValue=class extends RuntimeValue{constructor(){super(...arguments);Fp(this,"type","ArrayValue");Fp(this,"builtins",new Map([["length",new NumericValue(this.value.length)]]))}__bool__(){return new BooleanValue(this.value.length>0)}},TupleValue=class extends ArrayValue{constructor(){super(...arguments);Fp(this,"type","TupleValue")}},FunctionValue=class extends RuntimeValue{constructor(){super(...arguments);Fp(this,"type","FunctionValue")}},NullValue=class extends RuntimeValue{constructor(){super(...arguments);Fp(this,"type","NullValue")}},UndefinedValue=class extends RuntimeValue{constructor(){super(...arguments);Fp(this,"type","UndefinedValue")}},Environment=class{constructor(Mt){Fp(this,"variables",new Map([["namespace",new FunctionValue(Mt=>{if(Mt.length===0)return new ObjectValue(new Map);if(Mt.length!==1||!(Mt[0]instanceof ObjectValue))throw new Error("`namespace` expects either zero arguments or a single object argument");return Mt[0]})]]));Fp(this,"tests",new Map([["boolean",Mt=>Mt.type==="BooleanValue"],["callable",Mt=>Mt instanceof FunctionValue],["odd",Mt=>{if(Mt.type!=="NumericValue")throw new Error(`Cannot apply test "odd" to type: ${Mt.type}`);return Mt.value%2!==0}],["even",Mt=>{if(Mt.type!=="NumericValue")throw new Error(`Cannot apply test "even" to type: ${Mt.type}`);return Mt.value%2===0}],["false",Mt=>Mt.type==="BooleanValue"&&!Mt.value],["true",Mt=>Mt.type==="BooleanValue"&&Mt.value],["number",Mt=>Mt.type==="NumericValue"],["integer",Mt=>Mt.type==="NumericValue"&&Number.isInteger(Mt.value)],["iterable",Mt=>Mt instanceof ArrayValue||Mt instanceof StringValue],["lower",Mt=>{const st=Mt.value;return Mt.type==="StringValue"&&st===st.toLowerCase()}],["upper",Mt=>{const st=Mt.value;return Mt.type==="StringValue"&&st===st.toUpperCase()}],["none",Mt=>Mt.type==="NullValue"],["defined",Mt=>Mt.type!=="UndefinedValue"],["undefined",Mt=>Mt.type==="UndefinedValue"],["equalto",(Mt,st)=>Mt.value===st.value]]));this.parent=Mt}set(Mt,st){return this.declareVariable(Mt,convertToRuntimeValues(st))}declareVariable(Mt,st){if(this.variables.has(Mt))throw new SyntaxError(`Variable already declared: ${Mt}`);return this.variables.set(Mt,st),st}setVariable(Mt,st){return this.variables.set(Mt,st),st}resolve(Mt){if(this.variables.has(Mt))return this;if(this.parent)return this.parent.resolve(Mt);throw new Error(`Unknown variable: ${Mt}`)}lookupVariable(Mt){try{return this.resolve(Mt).variables.get(Mt)??new UndefinedValue}catch{return new UndefinedValue}}},Interpreter=class{constructor(Mt){Fp(this,"global");this.global=Mt??new Environment}run(Mt){return this.evaluate(Mt,this.global)}evaluateBinaryExpression(Mt,st){const nn=this.evaluate(Mt.left,st);switch(Mt.operator.value){case"and":return nn.__bool__().value?this.evaluate(Mt.right,st):nn;case"or":return nn.__bool__().value?nn:this.evaluate(Mt.right,st)}const rn=this.evaluate(Mt.right,st);switch(Mt.operator.value){case"==":return new BooleanValue(nn.value==rn.value);case"!=":return new BooleanValue(nn.value!=rn.value)}if(nn instanceof UndefinedValue||rn instanceof UndefinedValue)throw new Error("Cannot perform operation on undefined values");if(nn instanceof NullValue||rn instanceof NullValue)throw new Error("Cannot perform operation on null values");if(nn instanceof NumericValue&&rn instanceof NumericValue)switch(Mt.operator.value){case"+":return new NumericValue(nn.value+rn.value);case"-":return new NumericValue(nn.value-rn.value);case"*":return new NumericValue(nn.value*rn.value);case"/":return new NumericValue(nn.value/rn.value);case"%":return new NumericValue(nn.value%rn.value);case"<":return new BooleanValue(nn.value<rn.value);case">":return new BooleanValue(nn.value>rn.value);case">=":return new BooleanValue(nn.value>=rn.value);case"<=":return new BooleanValue(nn.value<=rn.value)}else if(nn instanceof ArrayValue&&rn instanceof ArrayValue)switch(Mt.operator.value){case"+":return new ArrayValue(nn.value.concat(rn.value))}else if(rn instanceof ArrayValue){const on=rn.value.find(an=>an.value===nn.value)!==void 0;switch(Mt.operator.value){case"in":return new BooleanValue(on);case"not in":return new BooleanValue(!on)}}if(nn instanceof StringValue||rn instanceof StringValue)switch(Mt.operator.value){case"+":return new StringValue(nn.value.toString()+rn.value.toString())}if(nn instanceof StringValue&&rn instanceof StringValue)switch(Mt.operator.value){case"in":return new BooleanValue(rn.value.includes(nn.value));case"not in":return new BooleanValue(!rn.value.includes(nn.value))}if(nn instanceof StringValue&&rn instanceof ObjectValue)switch(Mt.operator.value){case"in":return new BooleanValue(rn.value.has(nn.value));case"not in":return new BooleanValue(!rn.value.has(nn.value))}throw new SyntaxError(`Unknown operator "${Mt.operator.value}" between ${nn.type} and ${rn.type}`)}evaluateFilterExpression(Mt,st){const nn=this.evaluate(Mt.operand,st);if(Mt.filter.type==="Identifier"){const rn=Mt.filter;if(nn instanceof ArrayValue)switch(rn.value){case"list":return nn;case"first":return nn.value[0];case"last":return nn.value[nn.value.length-1];case"length":return new NumericValue(nn.value.length);case"reverse":return new ArrayValue(nn.value.reverse());case"sort":return new ArrayValue(nn.value.sort((on,an)=>{if(on.type!==an.type)throw new Error(`Cannot compare different types: ${on.type} and ${an.type}`);switch(on.type){case"NumericValue":return on.value-an.value;case"StringValue":return on.value.localeCompare(an.value);default:throw new Error(`Cannot compare type: ${on.type}`)}}));default:throw new Error(`Unknown ArrayValue filter: ${rn.value}`)}else if(nn instanceof StringValue)switch(rn.value){case"length":return new NumericValue(nn.value.length);case"upper":return new StringValue(nn.value.toUpperCase());case"lower":return new StringValue(nn.value.toLowerCase());case"title":return new StringValue(titleCase(nn.value));case"capitalize":return new StringValue(nn.value.charAt(0).toUpperCase()+nn.value.slice(1));case"trim":return new StringValue(nn.value.trim());default:throw new Error(`Unknown StringValue filter: ${rn.value}`)}else if(nn instanceof NumericValue)switch(rn.value){case"abs":return new NumericValue(Math.abs(nn.value));default:throw new Error(`Unknown NumericValue filter: ${rn.value}`)}else if(nn instanceof ObjectValue)switch(rn.value){case"items":return new ArrayValue(Array.from(nn.value.entries()).map(([on,an])=>new ArrayValue([new StringValue(on),an])));case"length":return new NumericValue(nn.value.size);default:throw new Error(`Unknown ObjectValue filter: ${rn.value}`)}throw new Error(`Cannot apply filter "${rn.value}" to type: ${nn.type}`)}else if(Mt.filter.type==="CallExpression"){const rn=Mt.filter;if(rn.callee.type!=="Identifier")throw new Error(`Unknown filter: ${rn.callee.type}`);const on=rn.callee.value;if(nn instanceof ArrayValue){switch(on){case"selectattr":{if(nn.value.some(uo=>!(uo instanceof ObjectValue)))throw new Error("`selectattr` can only be applied to array of objects");if(rn.args.some(uo=>uo.type!=="StringLiteral"))throw new Error("arguments of `selectattr` must be strings");const[an,sn,un]=rn.args.map(uo=>this.evaluate(uo,st));let Xr;if(sn){const uo=st.tests.get(sn.value);if(!uo)throw new Error(`Unknown test: ${sn.value}`);Xr=uo}else Xr=(...uo)=>uo[0].__bool__().value;const to=nn.value.filter(uo=>{const hn=uo.value.get(an.value);return hn?Xr(hn,un):!1});return new ArrayValue(to)}}throw new Error(`Unknown ArrayValue filter: ${on}`)}else throw new Error(`Cannot apply filter "${on}" to type: ${nn.type}`)}throw new Error(`Unknown filter: ${Mt.filter.type}`)}evaluateTestExpression(Mt,st){const nn=this.evaluate(Mt.operand,st),rn=st.tests.get(Mt.test.value);if(!rn)throw new Error(`Unknown test: ${Mt.test.value}`);const on=rn(nn);return new BooleanValue(Mt.negate?!on:on)}evaluateUnaryExpression(Mt,st){const nn=this.evaluate(Mt.argument,st);switch(Mt.operator.value){case"not":return new BooleanValue(!nn.value);default:throw new SyntaxError(`Unknown operator: ${Mt.operator.value}`)}}evalProgram(Mt,st){return this.evaluateBlock(Mt.body,st)}evaluateBlock(Mt,st){let nn="";for(const rn of Mt){const on=this.evaluate(rn,st);on.type!=="NullValue"&&on.type!=="UndefinedValue"&&(nn+=on.value)}return new StringValue(nn)}evaluateIdentifier(Mt,st){return st.lookupVariable(Mt.value)}evaluateCallExpression(Mt,st){const nn=[],rn=new Map;for(const an of Mt.args)if(an.type==="KeywordArgumentExpression"){const sn=an;rn.set(sn.key.value,this.evaluate(sn.value,st))}else nn.push(this.evaluate(an,st));rn.size>0&&nn.push(new ObjectValue(rn));const on=this.evaluate(Mt.callee,st);if(on.type!=="FunctionValue")throw new Error(`Cannot call something that is not a function: got ${on.type}`);return on.value(nn,st)}evaluateSliceExpression(Mt,st,nn){if(!(Mt instanceof ArrayValue||Mt instanceof StringValue))throw new Error("Slice object must be an array or string");const rn=this.evaluate(st.start,nn),on=this.evaluate(st.stop,nn),an=this.evaluate(st.step,nn);if(!(rn instanceof NumericValue||rn instanceof UndefinedValue))throw new Error("Slice start must be numeric or undefined");if(!(on instanceof NumericValue||on instanceof UndefinedValue))throw new Error("Slice stop must be numeric or undefined");if(!(an instanceof NumericValue||an instanceof UndefinedValue))throw new Error("Slice step must be numeric or undefined");return Mt instanceof ArrayValue?new ArrayValue(slice(Mt.value,rn.value,on.value,an.value)):new StringValue(slice(Array.from(Mt.value),rn.value,on.value,an.value).join(""))}evaluateMemberExpression(Mt,st){const nn=this.evaluate(Mt.object,st);let rn;if(Mt.computed){if(Mt.property.type==="SliceExpression")return this.evaluateSliceExpression(nn,Mt.property,st);rn=this.evaluate(Mt.property,st)}else rn=new StringValue(Mt.property.value);let on;if(nn instanceof ObjectValue){if(!(rn instanceof StringValue))throw new Error(`Cannot access property with non-string: got ${rn.type}`);on=nn.value.get(rn.value)??nn.builtins.get(rn.value)}else if(nn instanceof ArrayValue||nn instanceof StringValue)if(rn instanceof NumericValue)on=nn.value.at(rn.value),nn instanceof StringValue&&(on=new StringValue(nn.value.at(rn.value)));else if(rn instanceof StringValue)on=nn.builtins.get(rn.value);else throw new Error(`Cannot access property with non-string/non-number: got ${rn.type}`);else{if(!(rn instanceof StringValue))throw new Error(`Cannot access property with non-string: got ${rn.type}`);on=nn.builtins.get(rn.value)}return on instanceof RuntimeValue?on:new UndefinedValue}evaluateSet(Mt,st){const nn=this.evaluate(Mt.value,st);if(Mt.assignee.type==="Identifier"){const rn=Mt.assignee.value;st.setVariable(rn,nn)}else if(Mt.assignee.type==="MemberExpression"){const rn=Mt.assignee,on=this.evaluate(rn.object,st);if(!(on instanceof ObjectValue))throw new Error("Cannot assign to member of non-object");if(rn.property.type!=="Identifier")throw new Error("Cannot assign to member with non-identifier property");on.value.set(rn.property.value,nn)}else throw new Error(`Invalid LHS inside assignment expression: ${JSON.stringify(Mt.assignee)}`);return new NullValue}evaluateIf(Mt,st){const nn=this.evaluate(Mt.test,st);return this.evaluateBlock(nn.__bool__().value?Mt.body:Mt.alternate,st)}evaluateFor(Mt,st){const nn=new Environment(st),rn=this.evaluate(Mt.iterable,nn);if(!(rn instanceof ArrayValue))throw new Error(`Expected iterable type in for loop: got ${rn.type}`);let on="";for(let an=0;an<rn.value.length;++an){const sn=new Map([["index",new NumericValue(an+1)],["index0",new NumericValue(an)],["revindex",new NumericValue(rn.value.length-an)],["revindex0",new NumericValue(rn.value.length-an-1)],["first",new BooleanValue(an===0)],["last",new BooleanValue(an===rn.value.length-1)],["length",new NumericValue(rn.value.length)],["previtem",an>0?rn.value[an-1]:new UndefinedValue],["nextitem",an<rn.value.length-1?rn.value[an+1]:new UndefinedValue]]);nn.setVariable("loop",new ObjectValue(sn));const un=rn.value[an];if(Mt.loopvar.type==="Identifier")nn.setVariable(Mt.loopvar.value,un);else if(Mt.loopvar.type==="TupleLiteral"){const to=Mt.loopvar;if(un.type!=="ArrayValue")throw new Error(`Cannot unpack non-iterable type: ${un.type}`);const uo=un;if(to.value.length!==uo.value.length)throw new Error(`Too ${to.value.length>uo.value.length?"few":"many"} items to unpack`);for(let hn=0;hn<to.value.length;++hn){if(to.value[hn].type!=="Identifier")throw new Error(`Cannot unpack non-identifier type: ${to.value[hn].type}`);nn.setVariable(to.value[hn].value,uo.value[hn])}}const Xr=this.evaluateBlock(Mt.body,nn);on+=Xr.value}return new StringValue(on)}evaluate(Mt,st){if(Mt===void 0)return new UndefinedValue;switch(Mt.type){case"Program":return this.evalProgram(Mt,st);case"Set":return this.evaluateSet(Mt,st);case"If":return this.evaluateIf(Mt,st);case"For":return this.evaluateFor(Mt,st);case"NumericLiteral":return new NumericValue(Number(Mt.value));case"StringLiteral":return new StringValue(Mt.value);case"BooleanLiteral":return new BooleanValue(Mt.value);case"ArrayLiteral":return new ArrayValue(Mt.value.map(nn=>this.evaluate(nn,st)));case"TupleLiteral":return new TupleValue(Mt.value.map(nn=>this.evaluate(nn,st)));case"ObjectLiteral":{const nn=new Map;for(const[rn,on]of Mt.value){const an=this.evaluate(rn,st);if(!(an instanceof StringValue))throw new Error(`Object keys must be strings: got ${an.type}`);nn.set(an.value,this.evaluate(on,st))}return new ObjectValue(nn)}case"Identifier":return this.evaluateIdentifier(Mt,st);case"CallExpression":return this.evaluateCallExpression(Mt,st);case"MemberExpression":return this.evaluateMemberExpression(Mt,st);case"UnaryExpression":return this.evaluateUnaryExpression(Mt,st);case"BinaryExpression":return this.evaluateBinaryExpression(Mt,st);case"FilterExpression":return this.evaluateFilterExpression(Mt,st);case"TestExpression":return this.evaluateTestExpression(Mt,st);default:throw new SyntaxError(`Unknown node type: ${Mt.type}`)}}};function convertToRuntimeValues(Mt){switch(typeof Mt){case"number":return new NumericValue(Mt);case"string":return new StringValue(Mt);case"boolean":return new BooleanValue(Mt);case"object":return Mt===null?new NullValue:Array.isArray(Mt)?new ArrayValue(Mt.map(convertToRuntimeValues)):new ObjectValue(new Map(Object.entries(Mt).map(([st,nn])=>[st,convertToRuntimeValues(nn)])));case"function":return new FunctionValue((st,nn)=>{const rn=Mt(...st.map(on=>on.value))??null;return convertToRuntimeValues(rn)});default:throw new Error(`Cannot convert to runtime value: ${Mt}`)}}var Template=class{constructor(Mt){Fp(this,"parsed");const st=tokenize(Mt,{lstrip_blocks:!0,trim_blocks:!0});this.parsed=parse(st)}render(Mt){const st=new Environment;st.set("false",!1),st.set("true",!0),st.set("raise_exception",on=>{throw new Error(on)}),st.set("range",range$4);for(const[on,an]of Object.entries(Mt))st.set(on,an);return new Interpreter(st).run(this.parsed).value}};async function loadTokenizer(Mt,st){const nn=await Promise.all([getModelJSON(Mt,"tokenizer.json",!0,st),getModelJSON(Mt,"tokenizer_config.json",!0,st)]);return st.legacy!==null&&(nn[1].legacy=st.legacy),nn}function regexSplit(Mt,st){const nn=[];let rn=0;for(const on of Mt.matchAll(st)){const an=on[0];rn<on.index&&nn.push(Mt.slice(rn,on.index)),an.length>0&&nn.push(an),rn=on.index+an.length}return rn<Mt.length&&nn.push(Mt.slice(rn)),nn}function createPattern(Mt,st=!0){if(Mt.Regex!==void 0){let nn=Mt.Regex.replace(/\\([#&~])/g,"$1");for(const[rn,on]of PROBLEMATIC_REGEX_MAP)nn=nn.replaceAll(rn,on);return new RegExp(nn,"gu")}else if(Mt.String!==void 0){const nn=escapeRegExp(Mt.String);return new RegExp(st?nn:`(${nn})`,"gu")}else return console.warn("Unknown pattern type:",Mt),null}function objectToMap(Mt){return new Map(Object.entries(Mt))}function prepareTensorForDecode(Mt){const st=Mt.dims;switch(st.length){case 1:return Mt.tolist();case 2:if(st[0]!==1)throw new Error("Unable to decode tensor with `batch size !== 1`. Use `tokenizer.batch_decode(...)` for batched inputs.");return Mt.tolist()[0];default:throw new Error(`Expected tensor to have 1-2 dimensions, got ${st.length}.`)}}function clean_up_tokenization(Mt){return Mt.replace(/ \./g,".").replace(/ \?/g,"?").replace(/ \!/g,"!").replace(/ ,/g,",").replace(/ \' /g,"'").replace(/ n\'t/g,"n't").replace(/ \'m/g,"'m").replace(/ \'s/g,"'s").replace(/ \'ve/g,"'ve").replace(/ \'re/g,"'re")}function remove_accents(Mt){return Mt.replace(/[\u0300-\u036f]/g,"")}function lowercase_and_remove_accent(Mt){return remove_accents(Mt.toLowerCase())}function fuse(Mt,st,nn){const rn=[];let on=0;for(;on<Mt.length;){if(rn.push(Mt[on]),(nn.get(Mt[on])??st)!==st){++on;continue}for(;on<Mt.length&&(nn.get(Mt[on])??st)===st;)++on}return rn}function whitespace_split(Mt){return Mt.match(/\S+/g)||[]}const PUNCTUATION_REGEX="\\p{P}\\u0021-\\u002F\\u003A-\\u0040\\u005B-\\u0060\\u007B-\\u007E",PROBLEMATIC_REGEX_MAP=new Map([["(?i:'s|'t|'re|'ve|'m|'ll|'d)","(?:'([sS]|[tT]|[rR][eE]|[vV][eE]|[mM]|[lL][lL]|[dD]))"]]);class AddedToken{constructor(st){this.content=st.content,this.id=st.id,this.single_word=st.single_word??!1,this.lstrip=st.lstrip??!1,this.rstrip=st.rstrip??!1,this.special=st.special??!1,this.normalized=st.normalized??null}}class TokenizerModel extends Callable{constructor(st){super(),this.config=st,this.vocab=[],this.tokens_to_ids=new Map,this.unk_token_id=void 0,this.unk_token=void 0,this.end_of_word_suffix=void 0,this.fuse_unk=this.config.fuse_unk??!1}static fromConfig(st,...nn){switch(st.type){case"WordPiece":return new WordPieceTokenizer(st);case"Unigram":return new Unigram(st,...nn);case"BPE":return new BPE(st);default:if(st.vocab)return new LegacyTokenizerModel(st,...nn);throw new Error(`Unknown TokenizerModel type: ${st.type}`)}}_call(st){let nn=this.encode(st);return this.fuse_unk&&(nn=fuse(nn,this.unk_token_id,this.tokens_to_ids)),nn}encode(st){throw Error("encode should be implemented in subclass.")}convert_tokens_to_ids(st){return st.map(nn=>this.tokens_to_ids.get(nn)??this.unk_token_id)}convert_ids_to_tokens(st){return st.map(nn=>this.vocab[nn]??this.unk_token)}}class WordPieceTokenizer extends TokenizerModel{constructor(st){super(st),this.tokens_to_ids=objectToMap(st.vocab),this.unk_token_id=this.tokens_to_ids.get(st.unk_token),this.unk_token=st.unk_token,this.max_input_chars_per_word=st.max_input_chars_per_word??100,this.vocab=new Array(this.tokens_to_ids.size);for(const[nn,rn]of this.tokens_to_ids)this.vocab[rn]=nn}encode(st){const nn=[];for(const rn of st){const on=[...rn];if(on.length>this.max_input_chars_per_word){nn.push(this.unk_token);continue}let an=!1,sn=0;const un=[];for(;sn<on.length;){let Xr=on.length,to=null;for(;sn<Xr;){let uo=on.slice(sn,Xr).join("");if(sn>0&&(uo=this.config.continuing_subword_prefix+uo),this.tokens_to_ids.has(uo)){to=uo;break}--Xr}if(to===null){an=!0;break}un.push(to),sn=Xr}an?nn.push(this.unk_token):nn.push(...un)}return nn}}class Unigram extends TokenizerModel{constructor(st,nn){super(st);const rn=st.vocab.length;this.vocab=new Array(rn),this.scores=new Array(rn);for(let on=0;on<rn;++on){const an=st.vocab[on];this.vocab[on]=an[0],this.scores[on]=an[1]}this.unk_token_id=st.unk_id,this.unk_token=this.vocab[st.unk_id],this.tokens_to_ids=new Map(this.vocab.map((on,an)=>[on,an])),this.bosToken=" ",this.bosTokenId=this.tokens_to_ids.get(this.bosToken),this.eosToken=nn.eos_token,this.eosTokenId=this.tokens_to_ids.get(this.eosToken),this.unkToken=this.vocab[this.unk_token_id],this.minScore=min$3(this.scores)[0],this.unkScore=this.minScore-10,this.scores[this.unk_token_id]=this.unkScore,this.trie=new CharTrie,this.trie.extend(this.vocab),this.fuse_unk=!0}populateNodes(st){const nn=st.sentence,rn=nn.length;let on=0;for(;on<rn;){let sn=!1;for(let un of this.trie.commonPrefixSearch(nn.slice(on))){const Xr=this.tokens_to_ids.get(un),to=this.scores[Xr],uo=un.length;st.insert(on,uo,to,Xr),!sn&&uo===1&&(sn=!0)}sn||st.insert(on,1,this.unkScore,this.unk_token_id),on+=1}}tokenize(st){const nn=new TokenLattice(st,this.bosTokenId,this.eosTokenId);return this.populateNodes(nn),nn.tokens()}encode(st){const nn=[];for(const rn of st){const on=this.tokenize(rn);nn.push(...on)}return nn}}const BYTES_TO_UNICODE=(()=>{const Mt=[...Array.from({length:94},(on,an)=>an+33),...Array.from({length:12},(on,an)=>an+161),...Array.from({length:82},(on,an)=>an+174)],st=Mt.slice();let nn=0;for(let on=0;on<256;++on)Mt.includes(on)||(Mt.push(on),st.push(256+nn),nn+=1);const rn=st.map(on=>String.fromCharCode(on));return Object.fromEntries(Mt.map((on,an)=>[on,rn[an]]))})(),UNICODE_TO_BYTES=reverseDictionary(BYTES_TO_UNICODE);class BPE extends TokenizerModel{constructor(st){super(st),this.BPE_SPLIT_TOKEN=" ",this.tokens_to_ids=objectToMap(st.vocab),this.unk_token_id=this.tokens_to_ids.get(st.unk_token),this.unk_token=st.unk_token,this.vocab=new Array(this.tokens_to_ids.size);for(const[nn,rn]of this.tokens_to_ids)this.vocab[rn]=nn;this.bpe_ranks=new Map(st.merges.map((nn,rn)=>[nn,rn])),this.merges=st.merges.map(nn=>nn.split(this.BPE_SPLIT_TOKEN)),this.end_of_word_suffix=st.end_of_word_suffix,this.continuing_subword_suffix=st.continuing_subword_suffix??null,this.byte_fallback=this.config.byte_fallback??!1,this.byte_fallback&&(this.text_encoder=new TextEncoder),this.ignore_merges=this.config.ignore_merges??!1,this.cache=new Map}bpe(st){if(st.length===0)return[];const nn=this.cache.get(st);if(nn!==void 0)return nn;const rn=Array.from(st);this.end_of_word_suffix&&(rn[rn.length-1]+=this.end_of_word_suffix);let on=[];if(rn.length>1){const an=new PriorityQueue((Xr,to)=>Xr.score<to.score);let sn={token:rn[0],bias:0,prev:null,next:null},un=sn;for(let Xr=1;Xr<rn.length;++Xr){const to={bias:Xr/rn.length,token:rn[Xr],prev:un,next:null};un.next=to,this._add_node(an,un),un=to}for(;!an.isEmpty();){const Xr=an.pop();if(Xr.deleted||!Xr.next||Xr.next.deleted)continue;if(Xr.deleted=!0,Xr.next.deleted=!0,Xr.prev){const uo={...Xr.prev};Xr.prev.deleted=!0,Xr.prev=uo,uo.prev?uo.prev.next=uo:sn=uo}const to={token:Xr.token+Xr.next.token,bias:Xr.bias,prev:Xr.prev,next:Xr.next.next};to.prev?(to.prev.next=to,this._add_node(an,to.prev)):sn=to,to.next&&(to.next.prev=to,this._add_node(an,to))}for(let Xr=sn;Xr!==null;Xr=Xr.next)on.push(Xr.token)}else on=rn;if(this.continuing_subword_suffix)for(let an=0;an<on.length-1;++an)on[an]+=this.continuing_subword_suffix;return this.cache.set(st,on),on}_add_node(st,nn){const rn=this.bpe_ranks.get(nn.token+this.BPE_SPLIT_TOKEN+nn.next.token);rn!==void 0&&(nn.score=rn+nn.bias,st.push(nn))}encode(st){const nn=[];for(const rn of st){if(this.ignore_merges&&this.tokens_to_ids.has(rn)){nn.push(rn);continue}const on=this.bpe(rn);for(const an of on)this.tokens_to_ids.has(an)?nn.push(an):this.byte_fallback?nn.push(...Array.from(this.text_encoder.encode(an)).map(sn=>`<0x${sn.toString(16).toUpperCase().padStart(2,"0")}>`)):nn.push(this.unk_token)}return nn}}class LegacyTokenizerModel extends TokenizerModel{constructor(st,nn){super(st),this.tokens_to_ids=objectToMap(nn.target_lang?st.vocab[nn.target_lang]:st.vocab),this.bos_token=nn.bos_token,this.bos_token_id=this.tokens_to_ids.get(this.bos_token),this.eos_token=nn.eos_token,this.eos_token_id=this.tokens_to_ids.get(this.eos_token),this.pad_token=nn.pad_token,this.pad_token_id=this.tokens_to_ids.get(this.pad_token),this.unk_token=nn.unk_token,this.unk_token_id=this.tokens_to_ids.get(this.unk_token),this.vocab=new Array(this.tokens_to_ids.size);for(const[rn,on]of this.tokens_to_ids)this.vocab[on]=rn}encode(st){return st}}class Normalizer extends Callable{constructor(st){super(),this.config=st}static fromConfig(st){if(st===null)return null;switch(st.type){case"BertNormalizer":return new BertNormalizer(st);case"Precompiled":return new Precompiled(st);case"Sequence":return new NormalizerSequence(st);case"Replace":return new Replace(st);case"NFC":return new NFC(st);case"NFKC":return new NFKC(st);case"NFKD":return new NFKD(st);case"Strip":return new StripNormalizer(st);case"StripAccents":return new StripAccents(st);case"Lowercase":return new Lowercase(st);case"Prepend":return new Prepend(st);default:throw new Error(`Unknown Normalizer type: ${st.type}`)}}normalize(st){throw Error("normalize should be implemented in subclass.")}_call(st){return this.normalize(st)}}class Replace extends Normalizer{normalize(st){const nn=createPattern(this.config.pattern);return nn===null?st:st.replaceAll(nn,this.config.content)}}class NFC extends Normalizer{normalize(st){return st=st.normalize("NFC"),st}}class NFKC extends Normalizer{normalize(st){return st=st.normalize("NFKC"),st}}class NFKD extends Normalizer{normalize(st){return st=st.normalize("NFKD"),st}}class StripNormalizer extends Normalizer{normalize(st){return this.config.strip_left&&this.config.strip_right?st=st.trim():(this.config.strip_left&&(st=st.trimStart()),this.config.strip_right&&(st=st.trimEnd())),st}}class StripAccents extends Normalizer{normalize(st){return st=remove_accents(st),st}}class Lowercase extends Normalizer{normalize(st){return st=st.toLowerCase(),st}}class Prepend extends Normalizer{normalize(st){return st=this.config.prepend+st,st}}class NormalizerSequence extends Normalizer{constructor(st){super(st),this.normalizers=st.normalizers.map(nn=>Normalizer.fromConfig(nn))}normalize(st){return this.normalizers.reduce((nn,rn)=>rn.normalize(nn),st)}}class BertNormalizer extends Normalizer{_tokenize_chinese_chars(st){const nn=[];for(let rn=0;rn<st.length;++rn){const on=st[rn],an=on.charCodeAt(0);this._is_chinese_char(an)?(nn.push(" "),nn.push(on),nn.push(" ")):nn.push(on)}return nn.join("")}_is_chinese_char(st){return st>=19968&&st<=40959||st>=13312&&st<=19903||st>=131072&&st<=173791||st>=173824&&st<=177983||st>=177984&&st<=178207||st>=178208&&st<=183983||st>=63744&&st<=64255||st>=194560&&st<=195103}stripAccents(st){return st.normalize("NFD").replace(/[\u0300-\u036f]/g,"")}_is_control(st){switch(st){case"	":case`
`:case"\r":return!1;default:return new RegExp("^\\p{Cc}|\\p{Cf}|\\p{Co}|\\p{Cs}$","u").test(st)}}_clean_text(st){const nn=[];for(const rn of st){const on=rn.charCodeAt(0);on===0||on===65533||this._is_control(rn)||(/^\s$/.test(rn)?nn.push(" "):nn.push(rn))}return nn.join("")}normalize(st){return this.config.clean_text&&(st=this._clean_text(st)),this.config.handle_chinese_chars&&(st=this._tokenize_chinese_chars(st)),this.config.lowercase?(st=st.toLowerCase(),this.config.strip_accents!==!1&&(st=this.stripAccents(st))):this.config.strip_accents&&(st=this.stripAccents(st)),st}}class PreTokenizer extends Callable{static fromConfig(st){if(st===null)return null;switch(st.type){case"BertPreTokenizer":return new BertPreTokenizer(st);case"Sequence":return new PreTokenizerSequence(st);case"Whitespace":return new WhitespacePreTokenizer(st);case"WhitespaceSplit":return new WhitespaceSplit(st);case"Metaspace":return new MetaspacePreTokenizer(st);case"ByteLevel":return new ByteLevelPreTokenizer(st);case"Split":return new SplitPreTokenizer(st);case"Punctuation":return new PunctuationPreTokenizer(st);case"Digits":return new DigitsPreTokenizer(st);case"Replace":return new ReplacePreTokenizer(st);default:throw new Error(`Unknown PreTokenizer type: ${st.type}`)}}pre_tokenize_text(st,nn){throw Error("pre_tokenize_text should be implemented in subclass.")}pre_tokenize(st,nn){return(Array.isArray(st)?st.map(rn=>this.pre_tokenize_text(rn,nn)):this.pre_tokenize_text(st,nn)).flat()}_call(st,nn){return this.pre_tokenize(st,nn)}}class BertPreTokenizer extends PreTokenizer{constructor(st){super(),this.pattern=new RegExp(`[^\\s${PUNCTUATION_REGEX}]+|[${PUNCTUATION_REGEX}]`,"gu")}pre_tokenize_text(st,nn){return st.trim().match(this.pattern)||[]}}class ByteLevelPreTokenizer extends PreTokenizer{constructor(st){super(),this.config=st,this.add_prefix_space=this.config.add_prefix_space,this.trim_offsets=this.config.trim_offsets,this.use_regex=this.config.use_regex??!0,this.pattern=new RegExp("'s|'t|'re|'ve|'m|'ll|'d| ?\\p{L}+| ?\\p{N}+| ?[^\\s\\p{L}\\p{N}]+|\\s+(?!\\S)|\\s+","gu"),this.byte_encoder=BYTES_TO_UNICODE,this.text_encoder=new TextEncoder}pre_tokenize_text(st,nn){return this.add_prefix_space&&!st.startsWith(" ")&&(st=" "+st),(this.use_regex?st.match(this.pattern)||[]:[st]).map(on=>Array.from(this.text_encoder.encode(on),an=>this.byte_encoder[an]).join(""))}}class SplitPreTokenizer extends PreTokenizer{constructor(st){super(),this.config=st,this.pattern=createPattern(this.config.pattern,this.config.invert)}pre_tokenize_text(st,nn){return this.pattern===null?[]:this.config.invert?st.match(this.pattern)||[]:regexSplit(st,this.pattern)}}class PunctuationPreTokenizer extends PreTokenizer{constructor(st){super(),this.config=st,this.pattern=new RegExp(`[^${PUNCTUATION_REGEX}]+|[${PUNCTUATION_REGEX}]+`,"gu")}pre_tokenize_text(st,nn){return st.match(this.pattern)||[]}}class DigitsPreTokenizer extends PreTokenizer{constructor(st){super(),this.config=st;const nn=`[^\\d]+|\\d${this.config.individual_digits?"":"+"}`;this.pattern=new RegExp(nn,"gu")}pre_tokenize_text(st,nn){return st.match(this.pattern)||[]}}class PostProcessor extends Callable{constructor(st){super(),this.config=st}static fromConfig(st){if(st===null)return null;switch(st.type){case"TemplateProcessing":return new TemplateProcessing(st);case"ByteLevel":return new ByteLevelPostProcessor(st);case"RobertaProcessing":return new RobertaProcessing(st);case"BertProcessing":return new BertProcessing(st);case"Sequence":return new PostProcessorSequence(st);default:throw new Error(`Unknown PostProcessor type: ${st.type}`)}}post_process(st,...nn){throw Error("post_process should be implemented in subclass.")}_call(st,...nn){return this.post_process(st,...nn)}}class BertProcessing extends PostProcessor{constructor(st){super(st),this.cls=st.cls[0],this.sep=st.sep[0]}post_process(st,nn=null,{add_special_tokens:rn=!0}={}){rn&&(st=mergeArrays([this.cls],st,[this.sep]));let on=new Array(st.length).fill(0);if(nn!==null){const an=rn&&this instanceof RobertaProcessing?[this.sep]:[],sn=rn?[this.sep]:[];st=mergeArrays(st,an,nn,sn),on=mergeArrays(on,new Array(nn.length+an.length+sn.length).fill(1))}return{tokens:st,token_type_ids:on}}}class RobertaProcessing extends BertProcessing{}class TemplateProcessing extends PostProcessor{constructor(st){super(st),this.single=st.single,this.pair=st.pair}post_process(st,nn=null,{add_special_tokens:rn=!0}={}){const on=nn===null?this.single:this.pair;let an=[],sn=[];for(const un of on)"SpecialToken"in un?rn&&(an.push(un.SpecialToken.id),sn.push(un.SpecialToken.type_id)):"Sequence"in un&&(un.Sequence.id==="A"?(an=mergeArrays(an,st),sn=mergeArrays(sn,new Array(st.length).fill(un.Sequence.type_id))):un.Sequence.id==="B"&&(an=mergeArrays(an,nn),sn=mergeArrays(sn,new Array(nn.length).fill(un.Sequence.type_id))));return{tokens:an,token_type_ids:sn}}}class ByteLevelPostProcessor extends PostProcessor{post_process(st,nn=null){return nn&&(st=mergeArrays(st,nn)),{tokens:st}}}class PostProcessorSequence extends PostProcessor{constructor(st){super(st),this.processors=st.processors.map(nn=>PostProcessor.fromConfig(nn))}post_process(st,nn=null,rn={}){let on;for(const an of this.processors)if(an instanceof ByteLevelPostProcessor)st=an.post_process(st).tokens,nn&&(nn=an.post_process(nn).tokens);else{const sn=an.post_process(st,nn,rn);st=sn.tokens,on=sn.token_type_ids}return{tokens:st,token_type_ids:on}}}class Decoder extends Callable{constructor(st){super(),this.config=st,this.added_tokens=[],this.end_of_word_suffix=null,this.trim_offsets=st.trim_offsets}static fromConfig(st){if(st===null)return null;switch(st.type){case"WordPiece":return new WordPieceDecoder(st);case"Metaspace":return new MetaspaceDecoder(st);case"ByteLevel":return new ByteLevelDecoder(st);case"Replace":return new ReplaceDecoder(st);case"ByteFallback":return new ByteFallback(st);case"Fuse":return new FuseDecoder(st);case"Strip":return new StripDecoder(st);case"Sequence":return new DecoderSequence(st);case"CTC":return new CTCDecoder(st);case"BPEDecoder":return new BPEDecoder(st);default:throw new Error(`Unknown Decoder type: ${st.type}`)}}_call(st){return this.decode(st)}decode(st){return this.decode_chain(st).join("")}decode_chain(st){throw Error("`decode_chain` should be implemented in subclass.")}}class ReplaceDecoder extends Decoder{decode_chain(st){const nn=createPattern(this.config.pattern);return nn===null?st:st.map(rn=>rn.replaceAll(nn,this.config.content))}}class ByteFallback extends Decoder{constructor(st){super(st),this.text_decoder=new TextDecoder}decode_chain(st){const nn=[];let rn=[];for(const on of st){let an=null;if(on.length===6&&on.startsWith("<0x")&&on.endsWith(">")){const sn=parseInt(on.slice(3,5),16);isNaN(sn)||(an=sn)}if(an!==null)rn.push(an);else{if(rn.length>0){const sn=this.text_decoder.decode(Uint8Array.from(rn));nn.push(sn),rn=[]}nn.push(on)}}if(rn.length>0){const on=this.text_decoder.decode(Uint8Array.from(rn));nn.push(on),rn=[]}return nn}}class FuseDecoder extends Decoder{decode_chain(st){return[st.join("")]}}class StripDecoder extends Decoder{constructor(st){super(st),this.content=this.config.content,this.start=this.config.start,this.stop=this.config.stop}decode_chain(st){return st.map(nn=>{let rn=0;for(let an=0;an<this.start&&nn[an]===this.content;++an){rn=an+1;continue}let on=nn.length;for(let an=0;an<this.stop;++an){const sn=nn.length-an-1;if(nn[sn]===this.content){on=sn;continue}else break}return nn.slice(rn,on)})}}class WordPieceDecoder extends Decoder{constructor(st){super(st),this.cleanup=st.cleanup}decode_chain(st){return st.map((nn,rn)=>(rn!==0&&(nn.startsWith(this.config.prefix)?nn=nn.replace(this.config.prefix,""):nn=" "+nn),this.cleanup&&(nn=clean_up_tokenization(nn)),nn))}}class ByteLevelDecoder extends Decoder{constructor(st){super(st),this.byte_decoder=UNICODE_TO_BYTES,this.text_decoder=new TextDecoder("utf-8",{fatal:!1,ignoreBOM:!0}),this.end_of_word_suffix=null}convert_tokens_to_string(st){const nn=st.join(""),rn=new Uint8Array([...nn].map(an=>this.byte_decoder[an]));return this.text_decoder.decode(rn)}decode_chain(st){const nn=[];let rn=[];for(const on of st)this.added_tokens.find(an=>an.content===on)!==void 0?(rn.length>0&&(nn.push(this.convert_tokens_to_string(rn)),rn=[]),nn.push(on)):rn.push(on);return rn.length>0&&nn.push(this.convert_tokens_to_string(rn)),nn}}class CTCDecoder extends Decoder{constructor(st){super(st),this.pad_token=this.config.pad_token,this.word_delimiter_token=this.config.word_delimiter_token,this.cleanup=this.config.cleanup}convert_tokens_to_string(st){if(st.length===0)return"";const nn=[st[0]];for(let an=1;an<st.length;++an)st[an]!==nn.at(-1)&&nn.push(st[an]);let on=nn.filter(an=>an!==this.pad_token).join("");return this.cleanup&&(on=clean_up_tokenization(on).replaceAll(this.word_delimiter_token," ").trim()),on}decode_chain(st){return[this.convert_tokens_to_string(st)]}}class DecoderSequence extends Decoder{constructor(st){super(st),this.decoders=st.decoders.map(nn=>Decoder.fromConfig(nn))}decode_chain(st){return this.decoders.reduce((nn,rn)=>rn.decode_chain(nn),st)}}class BPEDecoder extends Decoder{constructor(st){super(st),this.suffix=this.config.suffix}decode_chain(st){return st.map((nn,rn)=>nn.replaceAll(this.suffix,rn===st.length-1?"":" "))}}class VitsDecoder extends Decoder{decode_chain(st){let nn="";for(let rn=1;rn<st.length;rn+=2)nn+=st[rn];return[nn]}}class MetaspacePreTokenizer extends PreTokenizer{constructor(st){super(),this.addPrefixSpace=st.add_prefix_space,this.replacement=st.replacement,this.strRep=st.str_rep||this.replacement,this.prepend_scheme=st.prepend_scheme??"always"}pre_tokenize_text(st,{section_index:nn=void 0}={}){let rn=st.replaceAll(" ",this.strRep);return this.addPrefixSpace&&!rn.startsWith(this.replacement)&&(this.prepend_scheme==="always"||this.prepend_scheme==="first"&&nn===0)&&(rn=this.strRep+rn),[rn]}}class MetaspaceDecoder extends Decoder{constructor(st){super(st),this.addPrefixSpace=st.add_prefix_space,this.replacement=st.replacement}decode_chain(st){const nn=[];for(let rn=0;rn<st.length;++rn){let on=st[rn].replaceAll(this.replacement," ");this.addPrefixSpace&&rn==0&&on.startsWith(" ")&&(on=on.substring(1)),nn.push(on)}return nn}}class Precompiled extends Normalizer{constructor(st){super(st),this.charsmap=st.precompiled_charsmap}normalize(st){return st=st.replace(/[\u0001-\u0008\u000B\u000E-\u001F\u007F\u008F\u009F]/gm,""),st=st.replace(/[\u0009\u000A\u000C\u000D\u1680\u200B\u200C\u200E\u200F\u2028\u2029\u2581\uFEFF\uFFFD]/gm," "),st.includes("")?st=st.split("").map(rn=>rn.normalize("NFKC")).join(""):st=st.normalize("NFKC"),st}}class PreTokenizerSequence extends PreTokenizer{constructor(st){super(),this.tokenizers=st.pretokenizers.map(nn=>PreTokenizer.fromConfig(nn))}pre_tokenize_text(st,nn){return this.tokenizers.reduce((rn,on)=>on.pre_tokenize(rn,nn),[st])}}class WhitespacePreTokenizer extends PreTokenizer{constructor(st){super()}pre_tokenize_text(st,nn){return st.match(/\w+|[^\w\s]+/g)||[]}}class WhitespaceSplit extends PreTokenizer{constructor(st){super()}pre_tokenize_text(st,nn){return whitespace_split(st)}}class ReplacePreTokenizer extends PreTokenizer{constructor(st){super(),this.config=st,this.pattern=createPattern(this.config.pattern),this.content=this.config.content}pre_tokenize_text(st,nn){return this.pattern===null?[st]:[st.replaceAll(this.pattern,this.config.content)]}}const SPECIAL_TOKEN_ATTRIBUTES=["bos_token","eos_token","unk_token","sep_token","pad_token","cls_token","mask_token"];function padHelper(Mt,st,nn,rn){for(const on of Object.keys(Mt)){const an=st-Mt[on].length,sn=nn(on),un=new Array(an).fill(sn);Mt[on]=rn==="right"?mergeArrays(Mt[on],un):mergeArrays(un,Mt[on])}}function truncateHelper(Mt,st){for(const nn of Object.keys(Mt))Mt[nn].length=st}class PreTrainedTokenizer extends Callable{constructor(nn,rn){super();Fp(this,"return_token_type_ids",!1);Fp(this,"_default_chat_template",`{% for message in messages %}{{'<|im_start|>' + message['role'] + '
' + message['content'] + '<|im_end|>' + '
'}}{% endfor %}{% if add_generation_prompt %}{{ '<|im_start|>assistant
' }}{% endif %}`);this._tokenizer_config=rn,this.normalizer=Normalizer.fromConfig(nn.normalizer),this.pre_tokenizer=PreTokenizer.fromConfig(nn.pre_tokenizer),this.model=TokenizerModel.fromConfig(nn.model,rn),this.post_processor=PostProcessor.fromConfig(nn.post_processor),this.decoder=Decoder.fromConfig(nn.decoder),this.special_tokens=[],this.all_special_ids=[],this.added_tokens=[];for(const on of nn.added_tokens){const an=new AddedToken(on);this.added_tokens.push(an),this.model.tokens_to_ids.set(an.content,an.id),this.model.vocab[an.id]=an.content,an.special&&(this.special_tokens.push(an.content),this.all_special_ids.push(an.id))}if(this.additional_special_tokens=rn.additional_special_tokens??[],this.special_tokens.push(...this.additional_special_tokens),this.special_tokens=[...new Set(this.special_tokens)],this.decoder&&(this.decoder.added_tokens=this.added_tokens,this.decoder.end_of_word_suffix=this.model.end_of_word_suffix),this.added_tokens_regex=this.added_tokens.length>0?new RegExp(this.added_tokens.map(on=>`${on.lstrip?"\\s*":""}(${escapeRegExp(on.content)})${on.rstrip?"\\s*":""}`).join("|")):null,this.mask_token=this.getToken("mask_token"),this.mask_token_id=this.model.tokens_to_ids.get(this.mask_token),this.pad_token=this.getToken("pad_token","eos_token"),this.pad_token_id=this.model.tokens_to_ids.get(this.pad_token),this.sep_token=this.getToken("sep_token"),this.sep_token_id=this.model.tokens_to_ids.get(this.sep_token),this.unk_token=this.getToken("unk_token"),this.unk_token_id=this.model.tokens_to_ids.get(this.unk_token),this.model_max_length=rn.model_max_length,this.remove_space=rn.remove_space,this.clean_up_tokenization_spaces=rn.clean_up_tokenization_spaces??!0,this.do_lowercase_and_remove_accent=rn.do_lowercase_and_remove_accent??!1,this.padding_side="right",this.legacy=!1,this.chat_template=rn.chat_template??null,Array.isArray(this.chat_template)){const on=Object.create(null);for(const{name:an,template:sn}of this.chat_template){if(typeof an!="string"||typeof sn!="string")throw new Error('Chat template must be a list of objects with "name" and "template" properties');on[an]=sn}this.chat_template=on}this._compiled_template_cache=new Map}getToken(...nn){for(const rn of nn){const on=this._tokenizer_config[rn];if(on)if(typeof on=="object"){if(on.__type==="AddedToken")return on.content;throw Error(`Unknown token: ${on}`)}else return on}return null}static async from_pretrained(nn,{progress_callback:rn=null,config:on=null,cache_dir:an=null,local_files_only:sn=!1,revision:un="main",legacy:Xr=null}={}){const to=await loadTokenizer(nn,{progress_callback:rn,config:on,cache_dir:an,local_files_only:sn,revision:un,legacy:Xr});return new this(...to)}_call(nn,{text_pair:rn=null,add_special_tokens:on=!0,padding:an=!1,truncation:sn=null,max_length:un=null,return_tensor:Xr=!0,return_token_type_ids:to=null}={}){const uo=Array.isArray(nn);let hn;if(uo){if(nn.length===0)throw Error("text array must be non-empty");if(rn!==null){if(Array.isArray(rn)){if(nn.length!==rn.length)throw Error("text and text_pair must have the same length")}else throw Error("text_pair must also be an array");hn=nn.map((co,lo)=>this._encode_plus(co,rn[lo],{add_special_tokens:on,return_token_type_ids:to}))}else hn=nn.map(co=>this._encode_plus(co,null,{add_special_tokens:on,return_token_type_ids:to}))}else{if(nn==null)throw Error("text may not be null or undefined");if(Array.isArray(rn))throw Error("When specifying `text_pair`, since `text` is a string, `text_pair` must also be a string (i.e., not an array).");hn=[this._encode_plus(nn,rn,{add_special_tokens:on,return_token_type_ids:to})]}if(un===null?an==="max_length"?un=this.model_max_length:un=max$3(hn.map(co=>co.input_ids.length))[0]:sn||console.warn("Truncation was not explicitly activated but `max_length` is provided a specific value, please use `truncation=true` to explicitly truncate examples to max length."),un=Math.min(un,this.model_max_length),an||sn)for(let co=0;co<hn.length;++co)hn[co].input_ids.length!==un&&(hn[co].input_ids.length>un?sn&&truncateHelper(hn[co],un):an&&padHelper(hn[co],un,lo=>lo==="input_ids"?this.pad_token_id:0,this.padding_side));const fn={};if(Xr){if(!(an&&sn)&&hn.some(lo=>{var fo;for(const ho of Object.keys(lo))if(lo[ho].length!==((fo=hn[0][ho])==null?void 0:fo.length))return!0;return!1}))throw Error("Unable to create tensor, you should probably activate truncation and/or padding with 'padding=true' and 'truncation=true' to have batched tensors with the same length.");const co=[hn.length,hn[0].input_ids.length];for(const lo of Object.keys(hn[0]))fn[lo]=new Tensor("int64",BigInt64Array.from(hn.flatMap(fo=>fo[lo]).map(BigInt)),co)}else{for(const co of Object.keys(hn[0]))fn[co]=hn.map(lo=>lo[co]);if(!uo)for(const co of Object.keys(fn))fn[co]=fn[co][0]}return fn}_encode_text(nn){return nn===null?null:(this.added_tokens_regex?nn.split(this.added_tokens_regex).filter(an=>an):[nn]).map((an,sn)=>{if(this.added_tokens.find(Xr=>Xr.content===an)!==void 0)return an;{if(this.remove_space===!0&&(an=an.trim().split(/\s+/).join(" ")),this.do_lowercase_and_remove_accent&&(an=lowercase_and_remove_accent(an)),this.normalizer!==null&&(an=this.normalizer(an)),an.length===0)return[];const Xr=this.pre_tokenizer!==null?this.pre_tokenizer(an,{section_index:sn}):[an];return this.model(Xr)}}).flat()}_encode_plus(nn,rn=null,{add_special_tokens:on=!0,return_token_type_ids:an=null}={}){const sn=this._encode_text(nn),un=this._encode_text(rn),Xr=this.post_processor?this.post_processor(sn,un,{add_special_tokens:on}):{tokens:mergeArrays(sn??[],un??[])},to=this.model.convert_tokens_to_ids(Xr.tokens),uo={input_ids:to,attention_mask:new Array(to.length).fill(1)};return(an??this.return_token_type_ids)&&Xr.token_type_ids&&(uo.token_type_ids=Xr.token_type_ids),uo}encode(nn,rn=null,{add_special_tokens:on=!0,return_token_type_ids:an=null}={}){const{input_ids:sn}=this._encode_plus(nn,rn,{add_special_tokens:on,return_token_type_ids:an});return sn}batch_decode(nn,rn={}){return nn instanceof Tensor&&(nn=nn.tolist()),nn.map(on=>this.decode(on,rn))}decode(nn,rn={}){if(nn instanceof Tensor&&(nn=prepareTensorForDecode(nn)),!Array.isArray(nn)||nn.length===0||!isIntegralNumber(nn[0]))throw Error("token_ids must be a non-empty array of integers.");return this.decode_single(nn,rn)}decode_single(nn,{skip_special_tokens:rn=!1,clean_up_tokenization_spaces:on=null}){let an=this.model.convert_ids_to_tokens(nn);rn&&(an=an.filter(un=>!this.special_tokens.includes(un)));let sn=this.decoder?this.decoder(an):an.join(" ");return this.decoder&&this.decoder.end_of_word_suffix&&(sn=sn.replaceAll(this.decoder.end_of_word_suffix," "),rn&&(sn=sn.trim())),(on??this.clean_up_tokenization_spaces)&&(sn=clean_up_tokenization(sn)),sn}get default_chat_template(){return this._warned_about_chat_template||(console.warn("No chat template is defined for this tokenizer - using a default chat template that implements the ChatML format. If the default is not appropriate for your model, please set `tokenizer.chat_template` to an appropriate template. See https://huggingface.co/docs/transformers/main/chat_templating for more information."),this._warned_about_chat_template=!0),this._default_chat_template}apply_chat_template(nn,{chat_template:rn=null,add_generation_prompt:on=!1,tokenize:an=!0,padding:sn=!1,truncation:un=!1,max_length:Xr=null,return_tensor:to=!0,tokenizer_kwargs:uo={},...hn}={}){if(this.chat_template&&typeof this.chat_template=="object"||this.chat_template===null&&this.default_chat_template&&typeof this.default_chat_template=="object"){const fo=this.chat_template??this.default_chat_template;if(rn!==null&&Object.hasOwn(fo,rn))rn=fo[rn];else if(rn===null&&"default"in fo)rn=fo.default;else if(rn===null)throw Error(`This model has multiple chat templates with no default specified! Please either pass a chat template or the name of the template you wish to use to the 'chat_template' argument. Available template names are ${Object.keys(fo).sort()}.`)}else rn??(rn=this.chat_template??this.default_chat_template);if(typeof rn!="string")throw Error(`chat_template must be a string, but got ${typeof rn}`);let fn=this._compiled_template_cache.get(rn);fn===void 0&&(fn=new Template(rn),this._compiled_template_cache.set(rn,fn));const co=Object.create(null);for(const fo of SPECIAL_TOKEN_ATTRIBUTES){const ho=this.getToken(fo);ho&&(co[fo]=ho)}const lo=fn.render({messages:nn,add_generation_prompt:on,...co,...hn});return an?this._call(lo,{add_special_tokens:!1,padding:sn,truncation:un,max_length:Xr,return_tensor:to,...uo}).input_ids:lo}}class BertTokenizer extends PreTrainedTokenizer{constructor(){super(...arguments);Fp(this,"return_token_type_ids",!0)}}class AlbertTokenizer extends PreTrainedTokenizer{constructor(){super(...arguments);Fp(this,"return_token_type_ids",!0)}}class MobileBertTokenizer extends PreTrainedTokenizer{constructor(){super(...arguments);Fp(this,"return_token_type_ids",!0)}}class SqueezeBertTokenizer extends PreTrainedTokenizer{constructor(){super(...arguments);Fp(this,"return_token_type_ids",!0)}}class DebertaTokenizer extends PreTrainedTokenizer{constructor(){super(...arguments);Fp(this,"return_token_type_ids",!0)}}class DebertaV2Tokenizer extends PreTrainedTokenizer{constructor(){super(...arguments);Fp(this,"return_token_type_ids",!0)}}class HerbertTokenizer extends PreTrainedTokenizer{constructor(){super(...arguments);Fp(this,"return_token_type_ids",!0)}}class ConvBertTokenizer extends PreTrainedTokenizer{constructor(){super(...arguments);Fp(this,"return_token_type_ids",!0)}}class RoFormerTokenizer extends PreTrainedTokenizer{constructor(){super(...arguments);Fp(this,"return_token_type_ids",!0)}}class DistilBertTokenizer extends PreTrainedTokenizer{}class CamembertTokenizer extends PreTrainedTokenizer{}class XLMTokenizer extends PreTrainedTokenizer{constructor(nn,rn){super(nn,rn);Fp(this,"return_token_type_ids",!0);console.warn('WARNING: `XLMTokenizer` is not yet supported by Hugging Face\'s "fast" tokenizers library. Therefore, you may experience slightly inaccurate results.')}}class ElectraTokenizer extends PreTrainedTokenizer{constructor(){super(...arguments);Fp(this,"return_token_type_ids",!0)}}class T5Tokenizer extends PreTrainedTokenizer{}class GPT2Tokenizer extends PreTrainedTokenizer{constructor(){super(...arguments);Fp(this,"_default_chat_template",'{% for message in messages %}" "{{ message.content }}{{ eos_token }}" "{% endfor %}')}}class BartTokenizer extends PreTrainedTokenizer{}class MBartTokenizer extends PreTrainedTokenizer{constructor(st,nn){super(st,nn),this.languageRegex=/^[a-z]{2}_[A-Z]{2}$/,this.language_codes=this.special_tokens.filter(rn=>this.languageRegex.test(rn)),this.lang_to_token=rn=>rn}_build_translation_inputs(st,nn,rn){return _build_translation_inputs(this,st,nn,rn)}}class MBart50Tokenizer extends MBartTokenizer{}class RobertaTokenizer extends PreTrainedTokenizer{}class BloomTokenizer extends GPT2Tokenizer{constructor(st,nn){var an,sn;const rn=".,!?",on=(sn=(an=st.pre_tokenizer)==null?void 0:an.pretokenizers[0])==null?void 0:sn.pattern;on&&on.Regex===` ?[^(\\s|[${rn}])]+`&&(on.Regex=` ?[^\\s${rn}]+`),super(st,nn)}}const SPIECE_UNDERLINE="";class LlamaTokenizer extends PreTrainedTokenizer{constructor(nn,rn){super(nn,rn);Fp(this,"_default_chat_template",`{% if messages[0]['role'] == 'system' %}{% set loop_messages = messages[1:] %}{% set system_message = messages[0]['content'] %}{% elif USE_DEFAULT_PROMPT == true and not '<<SYS>>' in messages[0]['content'] %}{% set loop_messages = messages %}{% set system_message = 'DEFAULT_SYSTEM_MESSAGE' %}{% else %}{% set loop_messages = messages %}{% set system_message = false %}{% endif %}{% for message in loop_messages %}{% if (message['role'] == 'user') != (loop.index0 % 2 == 0) %}{{ raise_exception('Conversation roles must alternate user/assistant/user/assistant/...') }}{% endif %}{% if loop.index0 == 0 and system_message != false %}{% set content = '<<SYS>>
' + system_message + '
<</SYS>>

' + message['content'] %}{% else %}{% set content = message['content'] %}{% endif %}{% if message['role'] == 'user' %}{{ bos_token + '[INST] ' + content.strip() + ' [/INST]' }}{% elif message['role'] == 'system' %}{{ '<<SYS>>
' + content.strip() + '
<</SYS>>

' }}{% elif message['role'] == 'assistant' %}{{ ' '  + content.strip() + ' ' + eos_token }}{% endif %}{% endfor %}`);Fp(this,"DEFAULT_SYSTEM_PROMPT",`You are a helpful, respectful and honest assistant. Always answer as helpfully as possible, while being safe. Your answers should not include any harmful, unethical, racist, sexist, toxic, dangerous, or illegal content. Please ensure that your responses are socially unbiased and positive in nature.

If a question does not make any sense, or is not factually coherent, explain why instead of answering something not correct. If you don't know the answer to a question, please don't share false information.`);this.use_default_system_prompt=rn.use_default_system_prompt??!1,this.legacy=rn.legacy??!0,this.legacy||(this.normalizer=null,this.pre_tokenizer=new MetaspacePreTokenizer({replacement:SPIECE_UNDERLINE,add_prefix_space:!0,prepend_scheme:"first"}))}_encode_text(nn){if(nn===null)return null;if(this.legacy||nn.length===0)return super._encode_text(nn);let rn=super._encode_text(SPIECE_UNDERLINE+nn.replaceAll(SPIECE_UNDERLINE," "));return rn.length>1&&rn[0]===SPIECE_UNDERLINE&&this.special_tokens.includes(rn[1])&&(rn=rn.slice(1)),rn}get default_chat_template(){return super.default_chat_template.replaceAll("USE_DEFAULT_PROMPT",this.use_default_system_prompt?"true":"false").replaceAll("DEFAULT_SYSTEM_MESSAGE",this.DEFAULT_SYSTEM_PROMPT.replaceAll(`
`,"\\n").replaceAll("'","\\'"))}}class CodeLlamaTokenizer extends LlamaTokenizer{}class XLMRobertaTokenizer extends PreTrainedTokenizer{}class MPNetTokenizer extends PreTrainedTokenizer{}class FalconTokenizer extends PreTrainedTokenizer{}class GPTNeoXTokenizer extends PreTrainedTokenizer{}class EsmTokenizer extends PreTrainedTokenizer{}class Qwen2Tokenizer extends PreTrainedTokenizer{}class GemmaTokenizer extends PreTrainedTokenizer{constructor(){super(...arguments);Fp(this,"_default_chat_template",`{% if messages[0]['role'] == 'system' %}{{ raise_exception('System role not supported') }}{% endif %}{% for message in messages %}{% if (message['role'] == 'user') != (loop.index0 % 2 == 0) %}{{ raise_exception('Conversation roles must alternate user/assistant/user/assistant/...') }}{% endif %}{% if (message['role'] == 'assistant') %}{% set role = 'model' %}{% else %}{% set role = message['role'] %}{% endif %}{{ '<start_of_turn>' + role + '
' + message['content'] | trim + '<end_of_turn>
' }}{% endfor %}{% if add_generation_prompt %}{{'<start_of_turn>model
'}}{% endif %}`)}}class Grok1Tokenizer extends PreTrainedTokenizer{}function _build_translation_inputs(Mt,st,nn,rn){if(!("language_codes"in Mt)||!Array.isArray(Mt.language_codes))throw new Error("Tokenizer must have `language_codes` attribute set and it should be an array of language ids.");if(!("languageRegex"in Mt)||!(Mt.languageRegex instanceof RegExp))throw new Error("Tokenizer must have `languageRegex` attribute set and it should be a regular expression.");if(!("lang_to_token"in Mt)||typeof Mt.lang_to_token!="function")throw new Error("Tokenizer must have `lang_to_token` attribute set and it should be a function.");const on=rn.src_lang,an=rn.tgt_lang;if(!Mt.language_codes.includes(an))throw new Error(`Target language code "${an}" is not valid. Must be one of: {${Mt.language_codes.join(", ")}}`);if(on!==void 0){if(!Mt.language_codes.includes(on))throw new Error(`Source language code "${on}" is not valid. Must be one of: {${Mt.language_codes.join(", ")}}`);for(const sn of Mt.post_processor.config.single)if("SpecialToken"in sn&&Mt.languageRegex.test(sn.SpecialToken.id)){sn.SpecialToken.id=Mt.lang_to_token(on);break}}return rn.forced_bos_token_id=Mt.model.convert_tokens_to_ids([Mt.lang_to_token(an)])[0],Mt._call(st,nn)}class NllbTokenizer extends PreTrainedTokenizer{constructor(st,nn){super(st,nn),this.languageRegex=/^[a-z]{3}_[A-Z][a-z]{3}$/,this.language_codes=this.special_tokens.filter(rn=>this.languageRegex.test(rn)),this.lang_to_token=rn=>rn}_build_translation_inputs(st,nn,rn){return _build_translation_inputs(this,st,nn,rn)}}class M2M100Tokenizer extends PreTrainedTokenizer{constructor(st,nn){super(st,nn),this.languageRegex=/^__[a-z]{2,3}__$/,this.language_codes=this.special_tokens.filter(rn=>this.languageRegex.test(rn)).map(rn=>rn.slice(2,-2)),this.lang_to_token=rn=>`__${rn}__`}_build_translation_inputs(st,nn,rn){return _build_translation_inputs(this,st,nn,rn)}}const WHISPER_LANGUAGES=[["en","english"],["zh","chinese"],["de","german"],["es","spanish"],["ru","russian"],["ko","korean"],["fr","french"],["ja","japanese"],["pt","portuguese"],["tr","turkish"],["pl","polish"],["ca","catalan"],["nl","dutch"],["ar","arabic"],["sv","swedish"],["it","italian"],["id","indonesian"],["hi","hindi"],["fi","finnish"],["vi","vietnamese"],["he","hebrew"],["uk","ukrainian"],["el","greek"],["ms","malay"],["cs","czech"],["ro","romanian"],["da","danish"],["hu","hungarian"],["ta","tamil"],["no","norwegian"],["th","thai"],["ur","urdu"],["hr","croatian"],["bg","bulgarian"],["lt","lithuanian"],["la","latin"],["mi","maori"],["ml","malayalam"],["cy","welsh"],["sk","slovak"],["te","telugu"],["fa","persian"],["lv","latvian"],["bn","bengali"],["sr","serbian"],["az","azerbaijani"],["sl","slovenian"],["kn","kannada"],["et","estonian"],["mk","macedonian"],["br","breton"],["eu","basque"],["is","icelandic"],["hy","armenian"],["ne","nepali"],["mn","mongolian"],["bs","bosnian"],["kk","kazakh"],["sq","albanian"],["sw","swahili"],["gl","galician"],["mr","marathi"],["pa","punjabi"],["si","sinhala"],["km","khmer"],["sn","shona"],["yo","yoruba"],["so","somali"],["af","afrikaans"],["oc","occitan"],["ka","georgian"],["be","belarusian"],["tg","tajik"],["sd","sindhi"],["gu","gujarati"],["am","amharic"],["yi","yiddish"],["lo","lao"],["uz","uzbek"],["fo","faroese"],["ht","haitian creole"],["ps","pashto"],["tk","turkmen"],["nn","nynorsk"],["mt","maltese"],["sa","sanskrit"],["lb","luxembourgish"],["my","myanmar"],["bo","tibetan"],["tl","tagalog"],["mg","malagasy"],["as","assamese"],["tt","tatar"],["haw","hawaiian"],["ln","lingala"],["ha","hausa"],["ba","bashkir"],["jw","javanese"],["su","sundanese"]],WHISPER_LANGUAGE_MAPPING=new Map(WHISPER_LANGUAGES),WHISPER_TO_LANGUAGE_CODE_MAPPING=new Map([...WHISPER_LANGUAGES.map(([Mt,st])=>[st,Mt]),["burmese","my"],["valencian","ca"],["flemish","nl"],["haitian","ht"],["letzeburgesch","lb"],["pushto","ps"],["panjabi","pa"],["moldavian","ro"],["moldovan","ro"],["sinhalese","si"],["castilian","es"]]);class WhisperTokenizer extends PreTrainedTokenizer{constructor(){super(...arguments);Fp(this,"_default_chat_template",'{% for message in messages %}" "{{ message.content }}{{ eos_token }}" "{% endfor %}')}_decode_asr(nn,{return_timestamps:rn=!1,return_language:on=!1,time_precision:an=null,force_full_sequences:sn=!0}={}){if(an===null)throw Error("Must specify time_precision");let un=null;const Xr=rn==="word";function to(){return{language:un,timestamp:[null,null],text:""}}const uo=[];let hn=to(),fn=0;const co=this.model.convert_tokens_to_ids(["<|notimestamps|>"])[0]+1;let lo=[],fo=[],ho=!1,mo=null;const Uo=new Set(this.all_special_ids);for(const ep of nn){const np=ep.tokens,rp=Xr?ep.token_timestamps:null;let ip=null,op=co;if("stride"in ep){const[up,pp,lp]=ep.stride;if(fn-=pp,mo=up-lp,pp&&(op=pp/an+co),lp)for(let dp=np.length-1;dp>=0;--dp){const cp=np[dp];if(cp>=co){if(ip!==null&&(cp-co)*an<mo)break;ip=cp}}}let ap=[],sp=[];for(let up=0;up<np.length;++up){const pp=np[up];if(Uo.has(pp)){const lp=this.decode([pp]),dp=WHISPER_LANGUAGE_MAPPING.get(lp.slice(2,-2));if(dp!==void 0){if(un!==null&&dp!==un&&!rn){lo.push(ap);const cp=this.findLongestCommonSequence(lo)[0],fp=this.decode(cp);hn.text=fp,uo.push(hn),lo=[],ap=[],hn=to()}un=hn.language=dp}}else if(pp>=co){const lp=(pp-co)*an+fn,dp=round$1(lp,2);if(ip!==null&&pp>=ip)ho=!0;else if(ho||lo.length>0&&pp<op)ho=!1;else if(hn.timestamp[0]===null)hn.timestamp[0]=dp;else if(dp!==hn.timestamp[0]){hn.timestamp[1]=dp,lo.push(ap),Xr&&fo.push(sp);const[cp,fp]=this.findLongestCommonSequence(lo,fo),gp=this.decode(cp);hn.text=gp,Xr&&(hn.words=this.collateWordTimestamps(cp,fp,un)),uo.push(hn),lo=[],ap=[],fo=[],sp=[],hn=to()}}else if(ap.push(pp),Xr){let lp=round$1(rp[up]+fn,2),dp;up+1<rp.length?dp=round$1(rp[up+1]+fn,2):dp=null,sp.push([lp,dp])}}if("stride"in ep){const[up,pp,lp]=ep.stride;fn+=up-lp}ap.length>0?(lo.push(ap),Xr&&fo.push(sp)):lo.every(up=>up.length===0)&&(hn=to(),lo=[],ap=[],fo=[],sp=[])}if(lo.length>0){if(sn&&rn)throw new Error("Whisper did not predict an ending timestamp, which can happen if audio is cut off in the middle of a word. Also make sure WhisperTimeStampLogitsProcessor was used during generation.");const[ep,np]=this.findLongestCommonSequence(lo,fo),rp=this.decode(ep);hn.text=rp,Xr&&(hn.words=this.collateWordTimestamps(ep,np,un)),uo.push(hn)}let _d=Object.create(null);const tp=uo.map(ep=>ep.text).join("");if(rn||on){for(let ep=0;ep<uo.length;++ep){const np=uo[ep];rn||delete np.timestamp,on||delete np.language}if(Xr){const ep=[];for(const np of uo)for(const rp of np.words)ep.push(rp);_d={chunks:ep}}else _d={chunks:uo}}return[tp,_d]}findLongestCommonSequence(nn,rn=null){let on=nn[0],an=on.length,sn=[];const un=Array.isArray(rn)&&rn.length>0;let Xr=un?[]:null,to=un?rn[0]:null;for(let uo=1;uo<nn.length;++uo){const hn=nn[uo];let fn=0,co=[an,an,0,0];const lo=hn.length;for(let ep=1;ep<an+lo;++ep){const np=ep/1e4,rp=Math.max(0,an-ep),ip=Math.min(an,an+lo-ep),op=on.slice(rp,ip),ap=Math.max(0,ep-an),sp=Math.min(lo,ep),up=hn.slice(ap,sp);if(op.length!==up.length)throw new Error("There is a bug within whisper `decode_asr` function, please report it. Dropping to prevent bad inference.");const pp=op.filter((dp,cp)=>dp===up[cp]).length,lp=pp/ep+np;pp>1&&lp>fn&&(fn=lp,co=[rp,ip,ap,sp])}const[fo,ho,mo,Uo]=co,_d=Math.floor((ho+fo)/2),tp=Math.floor((Uo+mo)/2);sn.push(...on.slice(0,_d)),on=hn.slice(tp),an=on.length,un&&(Xr.push(...to.slice(0,_d)),to=rn[uo].slice(tp))}return sn.push(...on),un?(Xr.push(...to),[sn,Xr]):[sn,[]]}collateWordTimestamps(nn,rn,on){const[an,sn,un]=this.combineTokensIntoWords(nn,on),Xr=[];for(let to=0;to<an.length;++to){const uo=un[to];Xr.push({text:an[to],timestamp:[rn[uo.at(0)][0],rn[uo.at(-1)][1]]})}return Xr}combineTokensIntoWords(nn,rn,on=`"'([{-`,an=`"'.,!?:)]}`){rn=rn??"english";let sn,un,Xr;return["chinese","japanese","thai","lao","myanmar"].includes(rn)?[sn,un,Xr]=this.splitTokensOnUnicode(nn):[sn,un,Xr]=this.splitTokensOnSpaces(nn),this.mergePunctuations(sn,un,Xr,on,an)}decode(nn,rn){let on;return rn&&rn.decode_with_timestamps?(nn instanceof Tensor&&(nn=prepareTensorForDecode(nn)),on=this.decodeWithTimestamps(nn,rn)):on=super.decode(nn,rn),on}decodeWithTimestamps(nn,rn){const on=(rn==null?void 0:rn.time_precision)??.02,an=Array.from(this.all_special_ids).at(-1)+1;let sn=[[]];for(const un of nn)if(un>=an){const Xr=round$1((un-an)*on,2);sn.push(`<|${Xr}|>`),sn.push([])}else sn[sn.length-1].push(un);return sn=sn.map(un=>typeof un=="string"?un:super.decode(un,rn)),sn.join("")}splitTokensOnUnicode(nn){const rn=this.decode(nn,{decode_with_timestamps:!0}),on="",an=[],sn=[],un=[];let Xr=[],to=[],uo=0;for(let hn=0;hn<nn.length;++hn){const fn=nn[hn];Xr.push(fn),to.push(hn);const co=this.decode(Xr,{decode_with_timestamps:!0});(!co.includes(on)||rn[uo+co.indexOf(on)]===on)&&(an.push(co),sn.push(Xr),un.push(to),Xr=[],to=[],uo+=co.length)}return[an,sn,un]}splitTokensOnSpaces(nn){const[rn,on,an]=this.splitTokensOnUnicode(nn),sn=[],un=[],Xr=[],to=new RegExp(`^[${PUNCTUATION_REGEX}]$`,"gu");for(let uo=0;uo<rn.length;++uo){const hn=rn[uo],fn=on[uo],co=an[uo],lo=fn[0]>=this.model.tokens_to_ids.get("<|endoftext|>"),fo=hn.startsWith(" "),ho=hn.trim(),mo=to.test(ho);if(lo||fo||mo||sn.length===0)sn.push(hn),un.push(fn),Xr.push(co);else{const Uo=sn.length-1;sn[Uo]+=hn,un[Uo].push(...fn),Xr[Uo].push(...co)}}return[sn,un,Xr]}mergePunctuations(nn,rn,on,an,sn){const un=structuredClone(nn),Xr=structuredClone(rn),to=structuredClone(on);let uo=un.length-2,hn=un.length-1;for(;uo>=0;)un[uo].startsWith(" ")&&an.includes(un[uo].trim())?(un[hn]=un[uo]+un[hn],Xr[hn]=mergeArrays(Xr[uo],Xr[hn]),to[hn]=mergeArrays(to[uo],to[hn]),un[uo]="",Xr[uo]=[],to[uo]=[]):hn=uo,--uo;for(uo=0,hn=1;hn<un.length;)!un[uo].endsWith(" ")&&sn.includes(un[hn])?(un[uo]+=un[hn],Xr[uo]=mergeArrays(Xr[uo],Xr[hn]),to[uo]=mergeArrays(to[uo],to[hn]),un[hn]="",Xr[hn]=[],to[hn]=[]):uo=hn,++hn;return[un.filter(fn=>fn),Xr.filter(fn=>fn.length>0),to.filter(fn=>fn.length>0)]}get_decoder_prompt_ids({language:nn=null,task:rn=null,no_timestamps:on=!0}={}){const an=[];if(nn){nn=nn.toLowerCase();let sn=WHISPER_TO_LANGUAGE_CODE_MAPPING.get(nn);if(sn===void 0)if(WHISPER_LANGUAGE_MAPPING.has(nn))sn=nn;else{const to=nn.length===2?WHISPER_LANGUAGE_MAPPING.keys():WHISPER_LANGUAGE_MAPPING.values();throw new Error(`Language "${nn}" is not supported. Must be one of: ${JSON.stringify(to)}`)}const un=this.model.tokens_to_ids.get(`<|${sn}|>`);if(un===void 0)throw new Error(`Unable to find language "${sn}" in model vocabulary. Please report this issue at https://github.com/xenova/transformers.js/issues/new/choose.`);an.push(un)}else an.push(null);if(rn){if(rn=rn.toLowerCase(),rn!=="transcribe"&&rn!=="translate")throw new Error(`Task "${rn}" is not supported. Must be one of: ["transcribe", "translate"]`);const sn=this.model.tokens_to_ids.get(`<|${rn}|>`);if(sn===void 0)throw new Error(`Unable to find task "${rn}" in model vocabulary. Please report this issue at https://github.com/xenova/transformers.js/issues/new/choose.`);an.push(sn)}else an.push(null);if(on){const sn=this.model.tokens_to_ids.get("<|notimestamps|>");if(sn===void 0)throw new Error('Unable to find "<|notimestamps|>" in model vocabulary. Please report this issue at https://github.com/xenova/transformers.js/issues/new/choose.');an.push(sn)}return an.map((sn,un)=>[un+1,sn]).filter(sn=>sn[1]!==null)}}class CodeGenTokenizer extends PreTrainedTokenizer{}class CLIPTokenizer extends PreTrainedTokenizer{}class SiglipTokenizer extends PreTrainedTokenizer{}class MarianTokenizer extends PreTrainedTokenizer{constructor(st,nn){super(st,nn),this.languageRegex=/^(>>\w+<<)\s*/g,this.supported_language_codes=this.model.vocab.filter(rn=>this.languageRegex.test(rn)),console.warn('WARNING: `MarianTokenizer` is not yet supported by Hugging Face\'s "fast" tokenizers library. Therefore, you may experience slightly inaccurate results.')}_encode_text(st){if(st===null)return null;const[nn,...rn]=st.trim().split(this.languageRegex);if(rn.length===0)return super._encode_text(nn);if(rn.length===2){const[on,an]=rn;return this.supported_language_codes.includes(on)||console.warn(`Unsupported language code "${on}" detected, which may lead to unexpected behavior. Should be one of: ${JSON.stringify(this.supported_language_codes)}`),mergeArrays([on],super._encode_text(an))}}}class Wav2Vec2CTCTokenizer extends PreTrainedTokenizer{}class BlenderbotTokenizer extends PreTrainedTokenizer{constructor(){super(...arguments);Fp(this,"_default_chat_template","{% for message in messages %}{% if message['role'] == 'user' %}{{ ' ' }}{% endif %}{{ message['content'] }}{% if not loop.last %}{{ '  ' }}{% endif %}{% endfor %}{{ eos_token }}")}}class BlenderbotSmallTokenizer extends BlenderbotTokenizer{}class SpeechT5Tokenizer extends PreTrainedTokenizer{}class NougatTokenizer extends PreTrainedTokenizer{}class VitsTokenizer extends PreTrainedTokenizer{constructor(st,nn){super(st,nn),this.decoder=new VitsDecoder({})}}class CohereTokenizer extends PreTrainedTokenizer{}class AutoTokenizer{static async from_pretrained(st,{quantized:nn=!0,progress_callback:rn=null,config:on=null,cache_dir:an=null,local_files_only:sn=!1,revision:un="main",legacy:Xr=null}={}){var co;const[to,uo]=await loadTokenizer(st,{quantized:nn,progress_callback:rn,config:on,cache_dir:an,local_files_only:sn,revision:un,legacy:Xr}),hn=((co=uo.tokenizer_class)==null?void 0:co.replace(/Fast$/,""))??"PreTrainedTokenizer";let fn=this.TOKENIZER_CLASS_MAPPING[hn];return fn||(console.warn(`Unknown tokenizer class "${hn}", attempting to construct from base class.`),fn=PreTrainedTokenizer),new fn(to,uo)}}Fp(AutoTokenizer,"TOKENIZER_CLASS_MAPPING",{T5Tokenizer,DistilBertTokenizer,CamembertTokenizer,DebertaTokenizer,DebertaV2Tokenizer,BertTokenizer,HerbertTokenizer,ConvBertTokenizer,RoFormerTokenizer,XLMTokenizer,ElectraTokenizer,MobileBertTokenizer,SqueezeBertTokenizer,AlbertTokenizer,GPT2Tokenizer,BartTokenizer,MBartTokenizer,MBart50Tokenizer,RobertaTokenizer,WhisperTokenizer,CodeGenTokenizer,CLIPTokenizer,SiglipTokenizer,MarianTokenizer,BloomTokenizer,NllbTokenizer,M2M100Tokenizer,LlamaTokenizer,CodeLlamaTokenizer,XLMRobertaTokenizer,MPNetTokenizer,FalconTokenizer,GPTNeoXTokenizer,EsmTokenizer,Wav2Vec2CTCTokenizer,BlenderbotTokenizer,BlenderbotSmallTokenizer,SpeechT5Tokenizer,NougatTokenizer,VitsTokenizer,Qwen2Tokenizer,GemmaTokenizer,Grok1Tokenizer,CohereTokenizer,PreTrainedTokenizer});async function loadConfig(Mt,st){return await getModelJSON(Mt,"config.json",!0,st)}class PretrainedConfig{constructor(st){this.model_type=null,this.is_encoder_decoder=!1,Object.assign(this,st)}static async from_pretrained(st,{progress_callback:nn=null,config:rn=null,cache_dir:on=null,local_files_only:an=!1,revision:sn="main"}={}){let un=rn??await loadConfig(st,{progress_callback:nn,config:rn,cache_dir:on,local_files_only:an,revision:sn});return new this(un)}}class AutoConfig{static async from_pretrained(...st){return PretrainedConfig.from_pretrained(...st)}}class LogitsProcessorList extends Callable{constructor(){super(),this.processors=[]}push(st){this.processors.push(st)}extend(st){this.processors.push(...st)}_call(st,nn){for(let rn of nn)this.processors.forEach(on=>on(st,rn))}[Symbol.iterator](){return this.processors.values()}}class LogitsProcessor extends Callable{_call(st,nn){throw Error("`_call` should be implemented in a subclass")}}class ForceTokensLogitsProcessor extends LogitsProcessor{constructor(st){super(),this.force_token_map=Object.fromEntries(st??[])}_call(st,nn){let rn=this.force_token_map[st.length];return exists(rn)&&(nn.data.fill(-1/0),nn.data[rn]=0),nn}}class ForcedBOSTokenLogitsProcessor extends LogitsProcessor{constructor(st){super(),this.bos_token_id=st}_call(st,nn){return st.length===1&&(nn.data.fill(-1/0),nn.data[this.bos_token_id]=0),nn}}class ForcedEOSTokenLogitsProcessor extends LogitsProcessor{constructor(st,nn){super(),this.max_length=st,this.forced_eos_token_id=nn}_call(st,nn){}}class SuppressTokensAtBeginLogitsProcessor extends LogitsProcessor{constructor(st,nn){super(),this.begin_suppress_tokens=st,this.begin_index=nn}_call(st,nn){if(st.length===this.begin_index)for(let rn of this.begin_suppress_tokens)nn.data[rn]=-1/0;return nn}}class WhisperTimeStampLogitsProcessor extends LogitsProcessor{constructor(st){super(),this.eos_token_id=st.eos_token_id,this.no_timestamps_token_id=st.no_timestamps_token_id,this.timestamp_begin=this.no_timestamps_token_id+1,this.begin_index=(st.forced_decoder_ids||[]).length+2,st.forced_decoder_ids.slice(-1)[0][1]===this.no_timestamps_token_id&&(this.begin_index-=1),this.max_initial_timestamp_index=st.max_initial_timestamp_index}_call(st,nn){const rn=nn.data;if(rn[this.no_timestamps_token_id]=-1/0,st.length===this.begin_index-1)return rn.fill(-1/0),rn[this.timestamp_begin]=0,nn;const on=st.slice(this.begin_index),an=on.length>=1&&on[on.length-1]>=this.timestamp_begin,sn=on.length<2||on[on.length-2]>=this.timestamp_begin;if(an&&(sn?rn.subarray(this.timestamp_begin).fill(-1/0):rn.subarray(0,this.eos_token_id).fill(-1/0)),st.length===this.begin_index&&this.max_initial_timestamp_index!==null){const uo=this.timestamp_begin+this.max_initial_timestamp_index;rn.subarray(uo+1).fill(-1/0)}const un=log_softmax(rn),Xr=Math.log(un.subarray(this.timestamp_begin).map(Math.exp).reduce((uo,hn)=>uo+hn)),to=max$3(un.subarray(0,this.timestamp_begin))[0];return Xr>to&&rn.subarray(0,this.timestamp_begin).fill(-1/0),nn}}class NoRepeatNGramLogitsProcessor extends LogitsProcessor{constructor(st){super(),this.no_repeat_ngram_size=st}getNgrams(st){const nn=st.length,rn=[];for(let an=0;an<nn+1-this.no_repeat_ngram_size;++an){const sn=[];for(let un=0;un<this.no_repeat_ngram_size;++un)sn.push(st[an+un]);rn.push(sn)}const on=new Map;for(const an of rn){const sn=an.slice(0,an.length-1),un=JSON.stringify(sn),Xr=on.get(un)??[];Xr.push(an[an.length-1]),on.set(un,Xr)}return on}getGeneratedNgrams(st,nn){const rn=nn.slice(nn.length+1-this.no_repeat_ngram_size,nn.length);return st.get(JSON.stringify(rn))??[]}calcBannedNgramTokens(st){const nn=[];if(st.length+1<this.no_repeat_ngram_size)return nn;{const rn=this.getNgrams(st);return this.getGeneratedNgrams(rn,st)}}_call(st,nn){const rn=this.calcBannedNgramTokens(st);for(const on of rn)nn.data[on]=-1/0;return nn}}class RepetitionPenaltyLogitsProcessor extends LogitsProcessor{constructor(st){super(),this.penalty=st}_call(st,nn){for(const rn of st)nn.data[rn]<0?nn.data[rn]*=this.penalty:nn.data[rn]/=this.penalty;return nn}}class MinLengthLogitsProcessor extends LogitsProcessor{constructor(st,nn){super(),this.min_length=st,this.eos_token_id=Array.isArray(nn)?nn:[nn]}_call(st,nn){if(st.length<this.min_length)for(const rn of this.eos_token_id)nn.data[rn]=-1/0;return nn}}class MinNewTokensLengthLogitsProcessor extends LogitsProcessor{constructor(st,nn,rn){super(),this.prompt_length_to_skip=st,this.min_new_tokens=nn,this.eos_token_id=Array.isArray(rn)?rn:[rn]}_call(st,nn){if(st.length-this.prompt_length_to_skip<this.min_new_tokens)for(const on of this.eos_token_id)nn.data[on]=-1/0;return nn}}class NoBadWordsLogitsProcessor extends LogitsProcessor{constructor(st,nn){super(),this.bad_words_ids=st,this.eos_token_id=Array.isArray(nn)?nn:[nn]}_call(st,nn){for(const rn of this.bad_words_ids){let on=!0;for(let an=1;an<=rn.length-1&&rn.length<st.length;++an)if(rn.at(-an-1)!==st.at(-an)){on=!1;break}on&&(nn.data[rn.at(-1)]=-1/0)}return nn}}const GenerationConfig=class{constructor(Mt={}){this.max_length=Mt.max_length??20,this.max_new_tokens=Mt.max_new_tokens??null,this.min_length=Mt.min_length??0,this.min_new_tokens=Mt.min_new_tokens??null,this.early_stopping=Mt.early_stopping??!1,this.max_time=Mt.max_time??null,this.do_sample=Mt.do_sample??!1,this.num_beams=Mt.num_beams??1,this.num_beam_groups=Mt.num_beam_groups??1,this.penalty_alpha=Mt.penalty_alpha??null,this.use_cache=Mt.use_cache??!0,this.temperature=Mt.temperature??1,this.top_k=Mt.top_k??50,this.top_p=Mt.top_p??1,this.typical_p=Mt.typical_p??1,this.epsilon_cutoff=Mt.epsilon_cutoff??0,this.eta_cutoff=Mt.eta_cutoff??0,this.diversity_penalty=Mt.diversity_penalty??0,this.repetition_penalty=Mt.repetition_penalty??1,this.encoder_repetition_penalty=Mt.encoder_repetition_penalty??1,this.length_penalty=Mt.length_penalty??1,this.no_repeat_ngram_size=Mt.no_repeat_ngram_size??0,this.bad_words_ids=Mt.bad_words_ids??null,this.force_words_ids=Mt.force_words_ids??null,this.renormalize_logits=Mt.renormalize_logits??!1,this.constraints=Mt.constraints??null,this.forced_bos_token_id=Mt.forced_bos_token_id??null,this.forced_eos_token_id=Mt.forced_eos_token_id??null,this.remove_invalid_values=Mt.remove_invalid_values??!1,this.exponential_decay_length_penalty=Mt.exponential_decay_length_penalty??null,this.suppress_tokens=Mt.suppress_tokens??null,this.begin_suppress_tokens=Mt.begin_suppress_tokens??null,this.forced_decoder_ids=Mt.forced_decoder_ids??null,this.num_return_sequences=Mt.num_return_sequences??1,this.output_attentions=Mt.output_attentions??!1,this.output_hidden_states=Mt.output_hidden_states??!1,this.output_scores=Mt.output_scores??!1,this.return_dict_in_generate=Mt.return_dict_in_generate??!1,this.pad_token_id=Mt.pad_token_id??null,this.bos_token_id=Mt.bos_token_id??null,this.eos_token_id=Mt.eos_token_id??null,this.encoder_no_repeat_ngram_size=Mt.encoder_no_repeat_ngram_size??0,this.decoder_start_token_id=Mt.decoder_start_token_id??null,this.generation_kwargs=Mt.generation_kwargs??{}}};class Sampler extends Callable{constructor(st){super(),this.generation_config=st}_call(st,nn=-1){return this.sample(st,nn)}sample(st,nn){throw Error("sample should be implemented in subclasses.")}getLogits(st,nn){let rn=st.dims.at(-1),on=st.data;if(nn===-1)on=on.slice(-rn);else{let an=nn*rn;on=on.slice(an,an+rn)}return this.generation_config.temperature>0&&(on=on.map(an=>an/this.generation_config.temperature)),on}randomSelect(st){let nn=st.reduce((on,an)=>on+an,0),rn=Math.random()*nn;for(let on=0;on<st.length;++on)if(rn-=st[on],rn<=0)return on;return 0}static getSampler(st){if(st.do_sample)return new MultinomialSampler(st);if(st.num_beams>1)return new BeamSearchSampler(st);if(st.num_return_sequences>1)throw Error(`num_return_sequences has to be 1 when doing greedy search, but is ${st.num_return_sequences}.`);return new GreedySampler(st)}}class GreedySampler extends Sampler{sample(st,nn=-1){let rn=this.getLogits(st,nn);return[[max$3(rn)[1],0]]}}class MultinomialSampler extends Sampler{sample(st,nn=-1){let rn=st.dims.at(-1);this.generation_config.top_k>0&&(rn=Math.min(this.generation_config.top_k,rn));const on=this.getLogits(st,nn),an=getTopItems(on,rn),sn=softmax(an.map(un=>un[1]));return Array.from({length:this.generation_config.num_beams},()=>{const un=this.randomSelect(sn);return[an[un][0],Math.log(sn[un])]})}}class BeamSearchSampler extends Sampler{sample(st,nn=-1){let rn=st.dims.at(-1);this.generation_config.top_k>0&&(rn=Math.min(this.generation_config.top_k,rn));const on=this.getLogits(st,nn),an=getTopItems(on,rn),sn=softmax(an.map(un=>un[1]));return Array.from({length:this.generation_config.num_beams},(un,Xr)=>[an[Xr][0],Math.log(sn[Xr])])}}const{InferenceSession,Tensor:ONNXTensor,env}=ONNX,MODEL_TYPES={EncoderOnly:0,EncoderDecoder:1,Seq2Seq:2,Vision2Seq:3,DecoderOnly:4,MaskGeneration:5},MODEL_TYPE_MAPPING=new Map,MODEL_NAME_TO_CLASS_MAPPING=new Map,MODEL_CLASS_TO_NAME_MAPPING=new Map;async function constructSession(Mt,st,nn){let rn=`onnx/${st}${nn.quantized?"_quantized":""}.onnx`,on=await getModelFile(Mt,rn,!0,nn);try{return await InferenceSession.create(on,{executionProviders})}catch(an){if(executionProviders.length===1&&executionProviders[0]==="wasm")throw an;return console.warn(an),console.warn("Something went wrong during model construction (most likely a missing operation). Using `wasm` as a fallback. "),await InferenceSession.create(on,{executionProviders:["wasm"]})}}function validateInputs(Mt,st){const nn=Object.create(null),rn=[];for(const sn of Mt.inputNames){const un=st[sn];if(!(un instanceof Tensor)){rn.push(sn);continue}nn[sn]=env.wasm.proxy?un.clone():un}if(rn.length>0)throw new Error(`An error occurred during model execution: "Missing the following inputs: ${rn.join(", ")}.`);const on=Object.keys(st).length,an=Mt.inputNames.length;if(on>an){let sn=Object.keys(st).filter(un=>!Mt.inputNames.includes(un));console.warn(`WARNING: Too many inputs were provided (${on} > ${an}). The following inputs will be ignored: "${sn.join(", ")}".`)}return nn}async function sessionRun(Mt,st){const nn=validateInputs(Mt,st);try{let rn=await Mt.run(nn);return rn=replaceTensors(rn),rn}catch(rn){throw console.error(`An error occurred during model execution: "${rn}".`),console.error("Inputs given to model:",nn),rn}}function replaceTensors(Mt){for(let st in Mt)Mt[st]instanceof ONNXTensor?Mt[st]=new Tensor(Mt[st]):typeof Mt[st]=="object"&&replaceTensors(Mt[st]);return Mt}function toI64Tensor(Mt){if(Mt instanceof Tensor)return Mt;if(Mt.length===0)throw Error("items must be non-empty");if(Array.isArray(Mt[0])){if(Mt.some(st=>st.length!==Mt[0].length))throw Error("Unable to create tensor, you should probably activate truncation and/or padding with 'padding=True' and/or 'truncation=True' to have batched tensors with the same length.");return new Tensor("int64",BigInt64Array.from(Mt.flat().map(st=>BigInt(st))),[Mt.length,Mt[0].length])}else return new Tensor("int64",BigInt64Array.from(Mt.map(st=>BigInt(st))),[1,Mt.length])}function prepareAttentionMask(Mt,st){let nn=Mt.config.pad_token_id??null,rn=Mt.config.eos_token_id??null;isIntegralNumber(rn)&&(rn=[rn]);let on=st.indexOf(nn)!==-1,an=rn===null||!rn.includes(nn);if(on&&an){let sn=BigInt64Array.from(st.data.map(un=>un!=nn));return new Tensor("int64",sn,st.dims)}else return ones_like(st)}function preparePositionIds(Mt,st,nn){if(!Mt.inputNames.includes("position_ids"))return;const rn=new BigInt64Array(st.attention_mask.data.length);for(let on=0;on<st.attention_mask.dims[0];++on){let an=on*st.attention_mask.dims[1],sn=BigInt(0);for(let un=0;un<st.attention_mask.dims[1];++un){const Xr=an+un;st.attention_mask.data[Xr]===0n?rn[Xr]=BigInt(1):(rn[Xr]=sn,sn+=st.attention_mask.data[Xr])}}st.position_ids=new Tensor("int64",rn,st.attention_mask.dims),nn&&(st.position_ids=st.position_ids.slice(null,-1).unsqueeze_(-1))}function boolTensor(Mt){return new Tensor("bool",[Mt],[1])}async function seq2seqForward(Mt,st){let{encoder_outputs:nn,past_key_values:rn}=st;nn||(nn=(await encoderForward(Mt,st)).last_hidden_state);let on={input_ids:st.decoder_input_ids,encoder_hidden_states:nn};const an=!!rn;Mt.decoder_merged_session.inputNames.includes("use_cache_branch")&&(on.use_cache_branch=boolTensor(an)),Mt.decoder_merged_session.inputNames.includes("encoder_attention_mask")&&(on.encoder_attention_mask=st.attention_mask),preparePositionIds(Mt.decoder_merged_session,on,an),Mt.addPastKeyValues(on,rn);const sn=await sessionRun(Mt.decoder_merged_session,on);let un=sn.logits;rn=Mt.getPastKeyValues(sn,rn);const Xr=Mt.getAttentions(sn);return new Seq2SeqLMOutput({logits:un,past_key_values:rn,encoder_outputs:nn,...Xr})}function seq2seqStartBeams(Mt,st,nn,rn){let on=[],an=0;const sn=Mt.requires_attention_mask??!0;let un=nn.decoder_input_ids??nn.decoder_start_token_id??nn.bos_token_id??nn.eos_token_id;un instanceof Tensor?un=un.tolist().flat():Array.isArray(un)||(un=[un]);for(let Xr of st){Xr.dims=[1,...Xr.dims];let to={inputs:Xr,encoder_outputs:null,prev_model_outputs:null,output_token_ids:un,done:!1,score:0,id:an++};sn&&(to.attention_mask=prepareAttentionMask(Mt,Xr)),on.push(to)}return on}async function seq2seqRunBeam(Mt,st){var sn;const nn=Mt.main_input_name;let rn=st.output_token_ids;st.prev_model_outputs&&(rn=rn.slice(-1));let on={[nn]:st.inputs,decoder_input_ids:toI64Tensor(rn),encoder_outputs:st.encoder_outputs,past_key_values:(sn=st.prev_model_outputs)==null?void 0:sn.past_key_values};st.attention_mask&&(on.attention_mask=st.attention_mask);let an=await Mt.forward(on);return st.prev_model_outputs=an,st.encoder_outputs=an.encoder_outputs,an}function seq2seqUpdatebeam(Mt,st){Mt.output_token_ids=[...Mt.output_token_ids,st]}async function encoderForward(Mt,st){const nn=Object.create(null);for(const rn of Mt.session.inputNames)nn[rn]=st[rn];return Mt.session.inputNames.includes("token_type_ids")&&!nn.token_type_ids&&(nn.token_type_ids=new Tensor("int64",new BigInt64Array(nn.input_ids.data.length),nn.input_ids.dims)),await sessionRun(Mt.session,nn)}async function decoderForward(Mt,st){let{input_ids:nn,past_key_values:rn,attention_mask:on}=st,an={input_ids:nn,attention_mask:on??prepareAttentionMask(Mt,nn)};const sn=!!rn;Mt.session.inputNames.includes("use_cache_branch")&&(an.use_cache_branch=boolTensor(sn)),preparePositionIds(Mt.session,an,sn),Mt.addPastKeyValues(an,rn);let un=await sessionRun(Mt.session,an),Xr=un.logits;return rn=Mt.getPastKeyValues(un,rn),{logits:Xr,past_key_values:rn}}function decoderStartBeams(Mt,st,nn,rn,on){let an=[],sn=0;for(let un of st){let Xr=un.tolist().map(Number);un.dims=[1,...un.dims];let to;on?(to=on[sn],to.dims=[1,...to.dims]):to=prepareAttentionMask(Mt,un);let uo={input:un,model_input_ids:un,attention_mask:to,prev_model_outputs:null,output_token_ids:Xr,num_output_tokens:rn,done:!1,score:0,id:sn++};an.push(uo)}return an}async function decoderRunBeam(Mt,st){var an;let nn=new BigInt64Array(st.output_token_ids.length).fill(1n),rn={input_ids:st.model_input_ids,attention_mask:new Tensor("int64",nn,[1,nn.length]),past_key_values:(an=st.prev_model_outputs)==null?void 0:an.past_key_values},on=await Mt.forward(rn);return st.prev_model_outputs=on,on}function decoderUpdatebeam(Mt,st){Mt.output_token_ids=[...Mt.output_token_ids,st],Mt.model_input_ids=new Tensor("int64",[BigInt(st)],[1,1])}class PreTrainedModel extends Callable{constructor(nn,rn){super();Fp(this,"main_input_name","input_ids");this.config=nn,this.session=rn;const on=MODEL_CLASS_TO_NAME_MAPPING.get(this.constructor),an=MODEL_TYPE_MAPPING.get(on);this.can_generate=!1,this._runBeam=null,this._getStartBeams=null,this._updateBeam=null,this._forward=null,an===MODEL_TYPES.DecoderOnly?(this.can_generate=!0,this._runBeam=decoderRunBeam,this._getStartBeams=decoderStartBeams,this._updateBeam=decoderUpdatebeam,this._forward=decoderForward):an===MODEL_TYPES.Seq2Seq||an===MODEL_TYPES.Vision2Seq?(this.can_generate=!0,this._runBeam=seq2seqRunBeam,this._getStartBeams=seq2seqStartBeams,this._updateBeam=seq2seqUpdatebeam,this._forward=seq2seqForward):an===MODEL_TYPES.EncoderDecoder?this._forward=encoderForward:this._forward=encoderForward}async dispose(){const nn=[];for(let rn of Object.keys(this)){const on=this[rn];on instanceof InferenceSession&&nn.push(on.handler.dispose())}return await Promise.all(nn)}static async from_pretrained(nn,{quantized:rn=!0,progress_callback:on=null,config:an=null,cache_dir:sn=null,local_files_only:un=!1,revision:Xr="main",model_file_name:to=null}={}){let uo={quantized:rn,progress_callback:on,config:an,cache_dir:sn,local_files_only:un,revision:Xr,model_file_name:to};const hn=MODEL_CLASS_TO_NAME_MAPPING.get(this),fn=MODEL_TYPE_MAPPING.get(hn);let co;return fn===MODEL_TYPES.DecoderOnly?co=await Promise.all([AutoConfig.from_pretrained(nn,uo),constructSession(nn,uo.model_file_name??"decoder_model_merged",uo),getModelJSON(nn,"generation_config.json",!1,uo)]):fn===MODEL_TYPES.Seq2Seq||fn===MODEL_TYPES.Vision2Seq?co=await Promise.all([AutoConfig.from_pretrained(nn,uo),constructSession(nn,"encoder_model",uo),constructSession(nn,"decoder_model_merged",uo),getModelJSON(nn,"generation_config.json",!1,uo)]):fn===MODEL_TYPES.MaskGeneration?co=await Promise.all([AutoConfig.from_pretrained(nn,uo),constructSession(nn,"vision_encoder",uo),constructSession(nn,"prompt_encoder_mask_decoder",uo)]):fn===MODEL_TYPES.EncoderDecoder?co=await Promise.all([AutoConfig.from_pretrained(nn,uo),constructSession(nn,"encoder_model",uo),constructSession(nn,"decoder_model_merged",uo)]):(fn!==MODEL_TYPES.EncoderOnly&&console.warn(`Model type for '${hn??(an==null?void 0:an.model_type)}' not found, assuming encoder-only architecture. Please report this at https://github.com/xenova/transformers.js/issues/new/choose.`),co=await Promise.all([AutoConfig.from_pretrained(nn,uo),constructSession(nn,uo.model_file_name??"model",uo)])),new this(...co)}async _call(nn){return await this.forward(nn)}async forward(nn){return await this._forward(this,nn)}_get_logits_processor(nn,rn,on=null){const an=new LogitsProcessorList;if(nn.repetition_penalty!==null&&nn.repetition_penalty!==1&&an.push(new RepetitionPenaltyLogitsProcessor(nn.repetition_penalty)),nn.no_repeat_ngram_size!==null&&nn.no_repeat_ngram_size>0&&an.push(new NoRepeatNGramLogitsProcessor(nn.no_repeat_ngram_size)),nn.bad_words_ids!==null&&an.push(new NoBadWordsLogitsProcessor(nn.bad_words_ids,nn.eos_token_id)),nn.min_length!==null&&nn.eos_token_id!==null&&nn.min_length>0&&an.push(new MinLengthLogitsProcessor(nn.min_length,nn.eos_token_id)),nn.min_new_tokens!==null&&nn.eos_token_id!==null&&nn.min_new_tokens>0&&an.push(new MinNewTokensLengthLogitsProcessor(rn,nn.min_new_tokens,nn.eos_token_id)),nn.forced_bos_token_id!==null&&an.push(new ForcedBOSTokenLogitsProcessor(nn.forced_bos_token_id)),nn.forced_eos_token_id!==null&&an.push(new ForcedEOSTokenLogitsProcessor(nn.max_length,nn.forced_eos_token_id)),nn.begin_suppress_tokens!==null){let sn=rn>1||nn.forced_bos_token_id===null?rn:rn+1;nn.forced_decoder_ids!==null&&(sn+=nn.forced_decoder_ids[nn.forced_decoder_ids.length-1][0]),an.push(new SuppressTokensAtBeginLogitsProcessor(nn.begin_suppress_tokens,sn))}return nn.forced_decoder_ids!==null&&an.push(new ForceTokensLogitsProcessor(nn.forced_decoder_ids)),on!==null&&an.extend(on),an}_get_generation_config(nn){let rn=new GenerationConfig(this.config);return"generation_config"in this&&Object.assign(rn,this.generation_config),nn!==null&&Object.assign(rn,nn),rn}async generate(nn,rn=null,on=null,{inputs_attention_mask:an=null}={}){if(!this.can_generate){let mo=`The current model class (${MODEL_CLASS_TO_NAME_MAPPING.get(this.constructor)}) is not compatible with \`.generate()\`, as it doesn't have a language model head.`;const Uo=this.config.model_type,_d=MODEL_WITH_LM_HEAD_MAPPING_NAMES.get(Uo)??MODEL_FOR_SEQ_TO_SEQ_CAUSAL_LM_MAPPING_NAMES.get(Uo)??MODEL_FOR_SPEECH_SEQ_2_SEQ_MAPPING_NAMES.get(Uo)??MODEL_FOR_VISION_2_SEQ_MAPPING_NAMES.get(Uo);throw _d&&(mo+=` Please use the following class instead: '${_d[0]}'`),Error(mo)}if(!(nn instanceof Tensor)&&!isTypedArray$4(nn)&&!Array.isArray(nn))throw Error(`\`inputs\` must be a Tensor, TypedArray, or Array, but is "${nn.constructor.name}".`);let sn;if(this.config.is_encoder_decoder)sn=0;else if(sn=nn instanceof Tensor?nn.dims.at(-1):nn.length,sn===0)throw Error("Must supply a non-empty array of input token ids.");rn=this._get_generation_config(rn),on=on??new LogitsProcessorList,on=this._get_logits_processor(rn,sn,on);let un=rn.eos_token_id;un!==null&&!Array.isArray(un)&&(un=[un]);let Xr=1;const to=Xr+(rn.max_new_tokens??1/0),uo=Number.isInteger(rn.max_length)&&(rn.max_new_tokens??null)===null;let hn=Sampler.getSampler(rn),fn=this.getStartBeams(nn,rn,Xr,an);for(;fn.some(ho=>!ho.done)&&Xr<to;){let ho=[];for(let mo of fn){if(mo.done){ho.push(mo);continue}if(uo&&mo.output_token_ids.length>=rn.max_length){mo.done=!0,ho.push(mo);continue}let Uo=await this.runBeam(mo);rn.output_attentions&&this.addAttentionsToBeam(mo,Uo),rn.output_scores;let _d=Uo.logits.slice(null,-1,null);on(mo.output_token_ids,_d);let tp=hn(_d);for(let[ep,np]of tp){let rp={...mo};this.updateBeam(rp,ep),rp.score+=np,un&&un.includes(ep)&&(rp.done=!0),ho.push(rp)}}++Xr,ho=this.groupBeams(ho).map(mo=>mo.sort((Uo,_d)=>_d.score-Uo.score).slice(0,rn.num_beams)),fn=ho.flat(),rn.callback_function&&rn.callback_function(fn)}const co=this.groupBeams(fn),lo=ho=>co.map(mo=>rn.num_return_sequences>1?mo.slice(0,rn.num_return_sequences).map(Uo=>Uo[ho]):[mo[0][ho]]).flat(),fo=lo("output_token_ids");if(rn.return_dict_in_generate){const ho=lo("decoder_attentions"),mo=lo("cross_attentions");return{sequences:fo,decoder_attentions:ho,cross_attentions:mo}}else return fo}addAttentionsToBeam(nn,rn){if(this.config.is_encoder_decoder){if(!rn.cross_attentions||rn.cross_attentions.length===0)throw Error("`output_attentions` is true, but the model did not produce cross-attentions. This is most likely because the model was not exported with `output_attentions=True`.");nn.cross_attentions||(nn.cross_attentions=[]),nn.cross_attentions.push(rn.cross_attentions)}if(!rn.decoder_attentions||rn.decoder_attentions.length===0)throw Error("`output_attentions` is true, but the model did not produce decoder-attentions. This is most likely because the model was not exported with `output_attentions=True`.");nn.decoder_attentions||(nn.decoder_attentions=[]),nn.decoder_attentions.push(rn.decoder_attentions)}groupBeams(nn){const rn=Object.create(null);for(const on of nn)rn[on.id]===void 0?rn[on.id]=[on]:rn[on.id].push(on);return Object.values(rn)}getPastKeyValues(nn,rn){const on=Object.create(null);for(const an in nn)if(an.startsWith("present")){let sn=an.replace("present","past_key_values");rn&&an.includes("encoder")?on[sn]=rn[sn]:on[sn]=nn[an]}return on}getAttentions(nn){const rn=Object.create(null);for(const on of["cross_attentions","decoder_attentions"]){const an=[];for(const sn in nn)if(sn.startsWith(on)){const un=sn.split(".").pop();an[un]=nn[sn]}rn[on]=an}return rn}addPastKeyValues(nn,rn){if(rn)Object.assign(nn,rn);else if(this.config.is_encoder_decoder&&(this.add_encoder_pkv??!0)){let an=[1,this.num_encoder_heads,0,this.encoder_dim_kv],sn=[1,this.num_decoder_heads,0,this.decoder_dim_kv];for(let un=0;un<this.num_decoder_layers;++un)nn[`past_key_values.${un}.encoder.key`]=new Tensor("float32",[],an),nn[`past_key_values.${un}.encoder.value`]=new Tensor("float32",[],an),nn[`past_key_values.${un}.decoder.key`]=new Tensor("float32",[],sn),nn[`past_key_values.${un}.decoder.value`]=new Tensor("float32",[],sn)}else if(this.config.model_type==="falcon"){let an=[1*this.num_heads,0,this.dim_kv];for(let sn=0;sn<this.num_layers;++sn)nn[`past_key_values.${sn}.key`]=new Tensor("float32",[],an),nn[`past_key_values.${sn}.value`]=new Tensor("float32",[],an)}else if(this.config.multi_query){let an=[1*this.num_heads,0,2*this.dim_kv];for(let sn=0;sn<this.num_layers;++sn)nn[`past_key_values.${sn}.key_value`]=new Tensor("float32",[],an)}else if(this.config.model_type==="bloom"){let an=[1*this.num_heads,this.dim_kv,0],sn=[1*this.num_heads,0,this.dim_kv];for(let un=0;un<this.num_layers;++un)nn[`past_key_values.${un}.key`]=new Tensor("float32",[],an),nn[`past_key_values.${un}.value`]=new Tensor("float32",[],sn)}else{let an=[1,this.num_heads,0,this.dim_kv];for(let sn=0;sn<this.num_layers;++sn)nn[`past_key_values.${sn}.key`]=new Tensor("float32",[],an),nn[`past_key_values.${sn}.value`]=new Tensor("float32",[],an)}}getStartBeams(nn,rn,on,an){return this._getStartBeams(this,nn,rn,on,an)}async runBeam(nn){return await this._runBeam(this,nn)}updateBeam(nn,rn){return this._updateBeam(nn,rn)}}class ModelOutput{}class BertPreTrainedModel extends PreTrainedModel{}class BertModel extends BertPreTrainedModel{}class BertForMaskedLM extends BertPreTrainedModel{async _call(st){return new MaskedLMOutput(await super._call(st))}}class BertForSequenceClassification extends BertPreTrainedModel{async _call(st){return new SequenceClassifierOutput(await super._call(st))}}class BertForTokenClassification extends BertPreTrainedModel{async _call(st){return new TokenClassifierOutput(await super._call(st))}}class BertForQuestionAnswering extends BertPreTrainedModel{async _call(st){return new QuestionAnsweringModelOutput(await super._call(st))}}class NomicBertPreTrainedModel extends PreTrainedModel{}class NomicBertModel extends NomicBertPreTrainedModel{}class RoFormerPreTrainedModel extends PreTrainedModel{}class RoFormerModel extends RoFormerPreTrainedModel{}class RoFormerForMaskedLM extends RoFormerPreTrainedModel{async _call(st){return new MaskedLMOutput(await super._call(st))}}class RoFormerForSequenceClassification extends RoFormerPreTrainedModel{async _call(st){return new SequenceClassifierOutput(await super._call(st))}}class RoFormerForTokenClassification extends RoFormerPreTrainedModel{async _call(st){return new TokenClassifierOutput(await super._call(st))}}class RoFormerForQuestionAnswering extends RoFormerPreTrainedModel{async _call(st){return new QuestionAnsweringModelOutput(await super._call(st))}}class ConvBertPreTrainedModel extends PreTrainedModel{}class ConvBertModel extends ConvBertPreTrainedModel{}class ConvBertForMaskedLM extends ConvBertPreTrainedModel{async _call(st){return new MaskedLMOutput(await super._call(st))}}class ConvBertForSequenceClassification extends ConvBertPreTrainedModel{async _call(st){return new SequenceClassifierOutput(await super._call(st))}}class ConvBertForTokenClassification extends ConvBertPreTrainedModel{async _call(st){return new TokenClassifierOutput(await super._call(st))}}class ConvBertForQuestionAnswering extends ConvBertPreTrainedModel{async _call(st){return new QuestionAnsweringModelOutput(await super._call(st))}}class ElectraPreTrainedModel extends PreTrainedModel{}class ElectraModel extends ElectraPreTrainedModel{}class ElectraForMaskedLM extends ElectraPreTrainedModel{async _call(st){return new MaskedLMOutput(await super._call(st))}}class ElectraForSequenceClassification extends ElectraPreTrainedModel{async _call(st){return new SequenceClassifierOutput(await super._call(st))}}class ElectraForTokenClassification extends ElectraPreTrainedModel{async _call(st){return new TokenClassifierOutput(await super._call(st))}}class ElectraForQuestionAnswering extends ElectraPreTrainedModel{async _call(st){return new QuestionAnsweringModelOutput(await super._call(st))}}class CamembertPreTrainedModel extends PreTrainedModel{}class CamembertModel extends CamembertPreTrainedModel{}class CamembertForMaskedLM extends CamembertPreTrainedModel{async _call(st){return new MaskedLMOutput(await super._call(st))}}class CamembertForSequenceClassification extends CamembertPreTrainedModel{async _call(st){return new SequenceClassifierOutput(await super._call(st))}}class CamembertForTokenClassification extends CamembertPreTrainedModel{async _call(st){return new TokenClassifierOutput(await super._call(st))}}class CamembertForQuestionAnswering extends CamembertPreTrainedModel{async _call(st){return new QuestionAnsweringModelOutput(await super._call(st))}}class DebertaPreTrainedModel extends PreTrainedModel{}class DebertaModel extends DebertaPreTrainedModel{}class DebertaForMaskedLM extends DebertaPreTrainedModel{async _call(st){return new MaskedLMOutput(await super._call(st))}}class DebertaForSequenceClassification extends DebertaPreTrainedModel{async _call(st){return new SequenceClassifierOutput(await super._call(st))}}class DebertaForTokenClassification extends DebertaPreTrainedModel{async _call(st){return new TokenClassifierOutput(await super._call(st))}}class DebertaForQuestionAnswering extends DebertaPreTrainedModel{async _call(st){return new QuestionAnsweringModelOutput(await super._call(st))}}class DebertaV2PreTrainedModel extends PreTrainedModel{}class DebertaV2Model extends DebertaV2PreTrainedModel{}class DebertaV2ForMaskedLM extends DebertaV2PreTrainedModel{async _call(st){return new MaskedLMOutput(await super._call(st))}}class DebertaV2ForSequenceClassification extends DebertaV2PreTrainedModel{async _call(st){return new SequenceClassifierOutput(await super._call(st))}}class DebertaV2ForTokenClassification extends DebertaV2PreTrainedModel{async _call(st){return new TokenClassifierOutput(await super._call(st))}}class DebertaV2ForQuestionAnswering extends DebertaV2PreTrainedModel{async _call(st){return new QuestionAnsweringModelOutput(await super._call(st))}}class DistilBertPreTrainedModel extends PreTrainedModel{}class DistilBertModel extends DistilBertPreTrainedModel{}class DistilBertForSequenceClassification extends DistilBertPreTrainedModel{async _call(st){return new SequenceClassifierOutput(await super._call(st))}}class DistilBertForTokenClassification extends DistilBertPreTrainedModel{async _call(st){return new TokenClassifierOutput(await super._call(st))}}class DistilBertForQuestionAnswering extends DistilBertPreTrainedModel{async _call(st){return new QuestionAnsweringModelOutput(await super._call(st))}}class DistilBertForMaskedLM extends DistilBertPreTrainedModel{async _call(st){return new MaskedLMOutput(await super._call(st))}}class EsmPreTrainedModel extends PreTrainedModel{}class EsmModel extends EsmPreTrainedModel{}class EsmForMaskedLM extends EsmPreTrainedModel{async _call(st){return new MaskedLMOutput(await super._call(st))}}class EsmForSequenceClassification extends EsmPreTrainedModel{async _call(st){return new SequenceClassifierOutput(await super._call(st))}}class EsmForTokenClassification extends EsmPreTrainedModel{async _call(st){return new TokenClassifierOutput(await super._call(st))}}class MobileBertPreTrainedModel extends PreTrainedModel{}class MobileBertModel extends MobileBertPreTrainedModel{}class MobileBertForMaskedLM extends MobileBertPreTrainedModel{async _call(st){return new MaskedLMOutput(await super._call(st))}}class MobileBertForSequenceClassification extends MobileBertPreTrainedModel{async _call(st){return new SequenceClassifierOutput(await super._call(st))}}class MobileBertForQuestionAnswering extends MobileBertPreTrainedModel{async _call(st){return new QuestionAnsweringModelOutput(await super._call(st))}}class MPNetPreTrainedModel extends PreTrainedModel{}class MPNetModel extends MPNetPreTrainedModel{}class MPNetForMaskedLM extends MPNetPreTrainedModel{async _call(st){return new MaskedLMOutput(await super._call(st))}}class MPNetForSequenceClassification extends MPNetPreTrainedModel{async _call(st){return new SequenceClassifierOutput(await super._call(st))}}class MPNetForTokenClassification extends MPNetPreTrainedModel{async _call(st){return new TokenClassifierOutput(await super._call(st))}}class MPNetForQuestionAnswering extends MPNetPreTrainedModel{async _call(st){return new QuestionAnsweringModelOutput(await super._call(st))}}class SqueezeBertPreTrainedModel extends PreTrainedModel{}class SqueezeBertModel extends SqueezeBertPreTrainedModel{}class SqueezeBertForMaskedLM extends SqueezeBertPreTrainedModel{async _call(st){return new MaskedLMOutput(await super._call(st))}}class SqueezeBertForSequenceClassification extends SqueezeBertPreTrainedModel{async _call(st){return new SequenceClassifierOutput(await super._call(st))}}class SqueezeBertForQuestionAnswering extends SqueezeBertPreTrainedModel{async _call(st){return new QuestionAnsweringModelOutput(await super._call(st))}}class AlbertPreTrainedModel extends PreTrainedModel{}class AlbertModel extends AlbertPreTrainedModel{}class AlbertForSequenceClassification extends AlbertPreTrainedModel{async _call(st){return new SequenceClassifierOutput(await super._call(st))}}class AlbertForQuestionAnswering extends AlbertPreTrainedModel{async _call(st){return new QuestionAnsweringModelOutput(await super._call(st))}}class AlbertForMaskedLM extends AlbertPreTrainedModel{async _call(st){return new MaskedLMOutput(await super._call(st))}}class T5PreTrainedModel extends PreTrainedModel{}class T5Model extends T5PreTrainedModel{}class T5ForConditionalGeneration extends T5PreTrainedModel{constructor(st,nn,rn,on){super(st,nn),this.decoder_merged_session=rn,this.generation_config=on,this.num_decoder_layers=this.config.num_decoder_layers,this.num_decoder_heads=this.config.num_heads,this.decoder_dim_kv=this.config.d_kv,this.num_encoder_layers=this.config.num_layers,this.num_encoder_heads=this.config.num_heads,this.encoder_dim_kv=this.config.d_kv}}class LongT5PreTrainedModel extends PreTrainedModel{}class LongT5Model extends LongT5PreTrainedModel{}class LongT5ForConditionalGeneration extends LongT5PreTrainedModel{constructor(st,nn,rn,on){super(st,nn),this.decoder_merged_session=rn,this.generation_config=on,this.num_decoder_layers=this.config.num_decoder_layers,this.num_decoder_heads=this.config.num_heads,this.decoder_dim_kv=this.config.d_kv,this.num_encoder_layers=this.config.num_layers,this.num_encoder_heads=this.config.num_heads,this.encoder_dim_kv=this.config.d_kv}}class MT5PreTrainedModel extends PreTrainedModel{}class MT5Model extends MT5PreTrainedModel{}class MT5ForConditionalGeneration extends MT5PreTrainedModel{constructor(st,nn,rn,on){super(st,nn),this.decoder_merged_session=rn,this.generation_config=on,this.num_decoder_layers=this.config.num_decoder_layers,this.num_decoder_heads=this.config.num_heads,this.decoder_dim_kv=this.config.d_kv,this.num_encoder_layers=this.config.num_layers,this.num_encoder_heads=this.config.num_heads,this.encoder_dim_kv=this.config.d_kv}}class BartPretrainedModel extends PreTrainedModel{}class BartModel extends BartPretrainedModel{}class BartForConditionalGeneration extends BartPretrainedModel{constructor(st,nn,rn,on){super(st,nn),this.decoder_merged_session=rn,this.generation_config=on,this.num_decoder_layers=this.config.decoder_layers,this.num_decoder_heads=this.config.decoder_attention_heads,this.decoder_dim_kv=this.config.d_model/this.num_decoder_heads,this.num_encoder_layers=this.config.encoder_layers,this.num_encoder_heads=this.config.encoder_attention_heads,this.encoder_dim_kv=this.config.d_model/this.num_encoder_heads}}class BartForSequenceClassification extends BartPretrainedModel{async _call(st){return new SequenceClassifierOutput(await super._call(st))}}class MBartPreTrainedModel extends PreTrainedModel{}class MBartModel extends MBartPreTrainedModel{}class MBartForConditionalGeneration extends MBartPreTrainedModel{constructor(st,nn,rn,on){super(st,nn),this.decoder_merged_session=rn,this.generation_config=on,this.num_decoder_layers=this.config.decoder_layers,this.num_decoder_heads=this.config.decoder_attention_heads,this.decoder_dim_kv=this.config.d_model/this.num_decoder_heads,this.num_encoder_layers=this.config.encoder_layers,this.num_encoder_heads=this.config.encoder_attention_heads,this.encoder_dim_kv=this.config.d_model/this.num_encoder_heads}}class MBartForSequenceClassification extends MBartPreTrainedModel{async _call(st){return new SequenceClassifierOutput(await super._call(st))}}class MBartForCausalLM extends MBartPreTrainedModel{constructor(st,nn,rn){super(st,nn),this.generation_config=rn,this.num_decoder_layers=this.config.decoder_layers,this.num_decoder_heads=this.config.decoder_attention_heads,this.decoder_dim_kv=this.config.d_model/this.num_decoder_heads,this.num_encoder_layers=this.config.encoder_layers,this.num_encoder_heads=this.config.encoder_attention_heads,this.encoder_dim_kv=this.config.d_model/this.num_encoder_heads}}class BlenderbotPreTrainedModel extends PreTrainedModel{}class BlenderbotModel extends BlenderbotPreTrainedModel{}class BlenderbotForConditionalGeneration extends BlenderbotPreTrainedModel{constructor(st,nn,rn,on){super(st,nn),this.decoder_merged_session=rn,this.generation_config=on,this.num_decoder_layers=this.config.decoder_layers,this.num_decoder_heads=this.config.decoder_attention_heads,this.decoder_dim_kv=this.config.d_model/this.num_decoder_heads,this.num_encoder_layers=this.config.encoder_layers,this.num_encoder_heads=this.config.encoder_attention_heads,this.encoder_dim_kv=this.config.d_model/this.num_encoder_heads}}class BlenderbotSmallPreTrainedModel extends PreTrainedModel{}class BlenderbotSmallModel extends BlenderbotSmallPreTrainedModel{}class BlenderbotSmallForConditionalGeneration extends BlenderbotSmallPreTrainedModel{constructor(st,nn,rn,on){super(st,nn),this.decoder_merged_session=rn,this.generation_config=on,this.num_decoder_layers=this.config.decoder_layers,this.num_decoder_heads=this.config.decoder_attention_heads,this.decoder_dim_kv=this.config.d_model/this.num_decoder_heads,this.num_encoder_layers=this.config.encoder_layers,this.num_encoder_heads=this.config.encoder_attention_heads,this.encoder_dim_kv=this.config.d_model/this.num_encoder_heads}}class RobertaPreTrainedModel extends PreTrainedModel{}class RobertaModel extends RobertaPreTrainedModel{}class RobertaForMaskedLM extends RobertaPreTrainedModel{async _call(st){return new MaskedLMOutput(await super._call(st))}}class RobertaForSequenceClassification extends RobertaPreTrainedModel{async _call(st){return new SequenceClassifierOutput(await super._call(st))}}class RobertaForTokenClassification extends RobertaPreTrainedModel{async _call(st){return new TokenClassifierOutput(await super._call(st))}}class RobertaForQuestionAnswering extends RobertaPreTrainedModel{async _call(st){return new QuestionAnsweringModelOutput(await super._call(st))}}class XLMPreTrainedModel extends PreTrainedModel{}class XLMModel extends XLMPreTrainedModel{}class XLMWithLMHeadModel extends XLMPreTrainedModel{async _call(st){return new MaskedLMOutput(await super._call(st))}}class XLMForSequenceClassification extends XLMPreTrainedModel{async _call(st){return new SequenceClassifierOutput(await super._call(st))}}class XLMForTokenClassification extends XLMPreTrainedModel{async _call(st){return new TokenClassifierOutput(await super._call(st))}}class XLMForQuestionAnswering extends XLMPreTrainedModel{async _call(st){return new QuestionAnsweringModelOutput(await super._call(st))}}class XLMRobertaPreTrainedModel extends PreTrainedModel{}class XLMRobertaModel extends XLMRobertaPreTrainedModel{}class XLMRobertaForMaskedLM extends XLMRobertaPreTrainedModel{async _call(st){return new MaskedLMOutput(await super._call(st))}}class XLMRobertaForSequenceClassification extends XLMRobertaPreTrainedModel{async _call(st){return new SequenceClassifierOutput(await super._call(st))}}class XLMRobertaForTokenClassification extends XLMRobertaPreTrainedModel{async _call(st){return new TokenClassifierOutput(await super._call(st))}}class XLMRobertaForQuestionAnswering extends XLMRobertaPreTrainedModel{async _call(st){return new QuestionAnsweringModelOutput(await super._call(st))}}class ASTPreTrainedModel extends PreTrainedModel{}class ASTModel extends ASTPreTrainedModel{}class ASTForAudioClassification extends ASTPreTrainedModel{}class WhisperPreTrainedModel extends PreTrainedModel{}class WhisperModel extends WhisperPreTrainedModel{}class WhisperForConditionalGeneration extends WhisperPreTrainedModel{constructor(nn,rn,on,an){super(nn,rn);Fp(this,"requires_attention_mask",!1);Fp(this,"main_input_name","input_features");this.decoder_merged_session=on,this.generation_config=an,this.num_decoder_layers=this.config.decoder_layers,this.num_decoder_heads=this.config.decoder_attention_heads,this.decoder_dim_kv=this.config.d_model/this.num_decoder_heads,this.num_encoder_layers=this.config.encoder_layers,this.num_encoder_heads=this.config.encoder_attention_heads,this.encoder_dim_kv=this.config.d_model/this.num_encoder_heads}async generate(nn,rn=null,on=null){if(rn=this._get_generation_config(rn),rn.return_timestamps??(rn.return_timestamps=!1),rn.return_timestamps&&(on=[new WhisperTimeStampLogitsProcessor(rn)]),rn.return_token_timestamps&&(rn.output_attentions=!0,rn.return_dict_in_generate=!0,rn.task==="translate"&&console.warn("Token-level timestamps may not be reliable for task 'translate'."),!rn.alignment_heads))throw new Error("Model generation config has no `alignment_heads`, token-level timestamps not available. See https://gist.github.com/hollance/42e32852f24243b748ae6bc1f985b13a on how to add this property to the generation config.");const an=await super.generate(nn,rn,on);return rn.return_token_timestamps&&rn.alignment_heads&&(an.token_timestamps=this._extract_token_timestamps(an,rn.alignment_heads,rn.num_frames)),an}_extract_token_timestamps(nn,rn,on=null,an=.02){if(!nn.cross_attentions)throw new Error("Model outputs must contain cross attentions to extract timestamps. This is most likely because the model was not exported with `output_attentions=True`.");let sn=this.config.median_filter_width;sn===void 0&&(console.warn("Model config has no `median_filter_width`, using default value of 7."),sn=7);const un=nn.cross_attentions.map(uo=>{let hn=Array.from({length:this.config.decoder_layers},(mo,Uo)=>cat(uo.map(_d=>_d[Uo]),2)),fn=stack(rn.map(([mo,Uo])=>on?hn[mo].slice(null,Uo,null,[0,on]):hn[mo].slice(null,Uo)));fn=fn.transpose(1,0,2,3);let[co,lo]=std_mean(fn,-2,0,!0),fo=fn.clone();for(let mo=0;mo<fo.dims[0];++mo){let Uo=fo[mo];for(let _d=0;_d<Uo.dims[0];++_d){let tp=Uo[_d];const ep=co[mo][_d][0],np=lo[mo][_d][0];for(let rp=0;rp<tp.dims[0];++rp){let ip=tp[rp];for(let op=0;op<ip.data.length;++op)ip.data[op]=(ip.data[op]-np.data[op])/ep.data[op];ip.data.set(medianFilter(ip.data,sn))}}}return mean(fo,1)}),Xr=[nn.sequences.length,nn.sequences[0].length],to=new Tensor("float32",new Float32Array(Xr[0]*Xr[1]),Xr);for(let uo=0;uo<Xr[0];++uo){const hn=un[uo].neg().squeeze_(0);let[fn,co]=dynamicTimeWarping(hn),lo=Array.from({length:fn.length-1},(mo,Uo)=>fn[Uo+1]-fn[Uo]),fo=mergeArrays([1],lo).map(mo=>!!mo),ho=[];for(let mo=0;mo<fo.length;++mo)fo[mo]&&ho.push(co[mo]*an);to[uo].data.set(ho,1)}return to}}class VisionEncoderDecoderModel extends PreTrainedModel{constructor(nn,rn,on,an){super(nn,rn);Fp(this,"main_input_name","pixel_values");this.decoder_merged_session=on,this.generation_config=an;const sn=this.config.encoder,un=this.config.decoder,Xr=sn.model_type;(MODEL_MAPPING_NAMES_ENCODER_ONLY.get(Xr)??MODEL_MAPPING_NAMES_ENCODER_DECODER.get(Xr))||console.warn(`Model type for encoder '${Xr}' not found, assuming encoder-only architecture. Please report this at https://github.com/xenova/transformers.js/issues/new/choose.`);const uo=MODEL_WITH_LM_HEAD_MAPPING_NAMES.get(un.model_type);if(!uo)throw new Error(`Unable to construct \`VisionEncoderDecoder\` due to unsupported decoder: "${this.config.decoder.model_type}"`);const hn=uo[1],fn=new hn(un,on,an);this.add_encoder_pkv="num_decoder_layers"in fn,this.add_encoder_pkv?(this.num_decoder_layers=fn.num_decoder_layers,this.num_decoder_heads=fn.num_decoder_heads,this.decoder_dim_kv=fn.decoder_dim_kv,this.num_encoder_layers=fn.num_encoder_layers,this.num_encoder_heads=fn.num_encoder_heads,this.encoder_dim_kv=fn.encoder_dim_kv):(this.num_layers=fn.num_layers,this.num_heads=fn.num_heads,this.dim_kv=fn.dim_kv)}}class CLIPPreTrainedModel extends PreTrainedModel{}class CLIPModel extends CLIPPreTrainedModel{}class CLIPTextModelWithProjection extends CLIPPreTrainedModel{static async from_pretrained(st,nn={}){return nn.model_file_name??(nn.model_file_name="text_model"),super.from_pretrained(st,nn)}}class CLIPVisionModelWithProjection extends CLIPPreTrainedModel{static async from_pretrained(st,nn={}){return nn.model_file_name??(nn.model_file_name="vision_model"),super.from_pretrained(st,nn)}}class SiglipPreTrainedModel extends PreTrainedModel{}class SiglipModel extends SiglipPreTrainedModel{}class SiglipTextModel extends SiglipPreTrainedModel{static async from_pretrained(st,nn={}){return nn.model_file_name??(nn.model_file_name="text_model"),super.from_pretrained(st,nn)}}class SiglipVisionModel extends CLIPPreTrainedModel{static async from_pretrained(st,nn={}){return nn.model_file_name??(nn.model_file_name="vision_model"),super.from_pretrained(st,nn)}}class ChineseCLIPPreTrainedModel extends PreTrainedModel{}class ChineseCLIPModel extends ChineseCLIPPreTrainedModel{}class CLIPSegPreTrainedModel extends PreTrainedModel{}class CLIPSegModel extends CLIPSegPreTrainedModel{}class CLIPSegForImageSegmentation extends CLIPSegPreTrainedModel{}class GPT2PreTrainedModel extends PreTrainedModel{constructor(st,nn,rn){super(st,nn),this.generation_config=rn,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.n_head,this.num_layers=this.config.n_layer,this.dim_kv=this.config.n_embd/this.num_heads}}class GPT2Model extends GPT2PreTrainedModel{}class GPT2LMHeadModel extends GPT2PreTrainedModel{}class GPTNeoPreTrainedModel extends PreTrainedModel{constructor(st,nn,rn){super(st,nn),this.generation_config=rn,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_heads,this.num_layers=this.config.num_layers,this.dim_kv=this.config.hidden_size/this.num_heads}}class GPTNeoModel extends GPTNeoPreTrainedModel{}class GPTNeoForCausalLM extends GPTNeoPreTrainedModel{}class GPTNeoXPreTrainedModel extends PreTrainedModel{constructor(st,nn,rn){super(st,nn),this.generation_config=rn,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_attention_heads,this.num_layers=this.config.num_hidden_layers,this.dim_kv=this.config.hidden_size/this.num_heads}}class GPTNeoXModel extends GPTNeoXPreTrainedModel{}class GPTNeoXForCausalLM extends GPTNeoXPreTrainedModel{}class GPTJPreTrainedModel extends PreTrainedModel{constructor(st,nn,rn){super(st,nn),this.generation_config=rn,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.n_head,this.num_layers=this.config.n_layer,this.dim_kv=this.config.n_embd/this.num_heads}}class GPTJModel extends GPTJPreTrainedModel{}class GPTJForCausalLM extends GPTJPreTrainedModel{}class GPTBigCodePreTrainedModel extends PreTrainedModel{constructor(st,nn,rn){super(st,nn),this.generation_config=rn,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.n_head,this.num_layers=this.config.n_layer,this.dim_kv=this.config.n_embd/this.num_heads}}class GPTBigCodeModel extends GPTBigCodePreTrainedModel{}class GPTBigCodeForCausalLM extends GPTBigCodePreTrainedModel{}class CodeGenPreTrainedModel extends PreTrainedModel{constructor(st,nn,rn){super(st,nn),this.generation_config=rn,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.n_head,this.num_layers=this.config.n_layer,this.dim_kv=this.config.n_embd/this.num_heads}}class CodeGenModel extends CodeGenPreTrainedModel{}class CodeGenForCausalLM extends CodeGenPreTrainedModel{}class LlamaPreTrainedModel extends PreTrainedModel{constructor(st,nn,rn){super(st,nn),this.generation_config=rn,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_key_value_heads??this.config.num_attention_heads,this.num_layers=this.config.num_hidden_layers,this.dim_kv=this.config.hidden_size/this.config.num_attention_heads}}class LlamaModel extends LlamaPreTrainedModel{}class LlamaForCausalLM extends LlamaPreTrainedModel{}class Qwen2PreTrainedModel extends PreTrainedModel{constructor(st,nn,rn){super(st,nn),this.generation_config=rn,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_key_value_heads??this.config.num_attention_heads,this.num_layers=this.config.num_hidden_layers,this.dim_kv=this.config.hidden_size/this.config.num_attention_heads}}class Qwen2Model extends Qwen2PreTrainedModel{}class Qwen2ForCausalLM extends Qwen2PreTrainedModel{}class PhiPreTrainedModel extends PreTrainedModel{constructor(st,nn,rn){super(st,nn),this.generation_config=rn,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_attention_heads,this.num_layers=this.config.num_hidden_layers,this.dim_kv=this.config.hidden_size/this.num_heads}}class PhiModel extends PhiPreTrainedModel{}class PhiForCausalLM extends PhiPreTrainedModel{}class BloomPreTrainedModel extends PreTrainedModel{constructor(st,nn,rn){super(st,nn),this.generation_config=rn,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.n_head,this.num_layers=this.config.n_layer,this.dim_kv=this.config.hidden_size/this.num_heads}}class BloomModel extends BloomPreTrainedModel{}class BloomForCausalLM extends BloomPreTrainedModel{}class MptPreTrainedModel extends PreTrainedModel{constructor(st,nn,rn){super(st,nn),this.generation_config=rn,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.n_heads,this.num_layers=this.config.n_layers,this.dim_kv=this.config.d_model/this.num_heads}}class MptModel extends MptPreTrainedModel{}class MptForCausalLM extends MptPreTrainedModel{}class OPTPreTrainedModel extends PreTrainedModel{constructor(st,nn,rn){super(st,nn),this.generation_config=rn,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_attention_heads,this.num_layers=this.config.num_hidden_layers,this.dim_kv=this.config.hidden_size/this.num_heads}}class OPTModel extends OPTPreTrainedModel{}class OPTForCausalLM extends OPTPreTrainedModel{}class ViTPreTrainedModel extends PreTrainedModel{}class ViTModel extends ViTPreTrainedModel{}class ViTForImageClassification extends ViTPreTrainedModel{async _call(st){return new SequenceClassifierOutput(await super._call(st))}}class FastViTPreTrainedModel extends PreTrainedModel{}class FastViTModel extends FastViTPreTrainedModel{}class FastViTForImageClassification extends FastViTPreTrainedModel{async _call(st){return new SequenceClassifierOutput(await super._call(st))}}class VitMattePreTrainedModel extends PreTrainedModel{}class VitMatteForImageMatting extends VitMattePreTrainedModel{async _call(st){return new ImageMattingOutput(await super._call(st))}}class MobileViTPreTrainedModel extends PreTrainedModel{}class MobileViTModel extends MobileViTPreTrainedModel{}class MobileViTForImageClassification extends MobileViTPreTrainedModel{async _call(st){return new SequenceClassifierOutput(await super._call(st))}}class MobileViTV2PreTrainedModel extends PreTrainedModel{}class MobileViTV2Model extends MobileViTV2PreTrainedModel{}class MobileViTV2ForImageClassification extends MobileViTV2PreTrainedModel{async _call(st){return new SequenceClassifierOutput(await super._call(st))}}class OwlViTPreTrainedModel extends PreTrainedModel{}class OwlViTModel extends OwlViTPreTrainedModel{}class OwlViTForObjectDetection extends OwlViTPreTrainedModel{}class Owlv2PreTrainedModel extends PreTrainedModel{}class Owlv2Model extends Owlv2PreTrainedModel{}class Owlv2ForObjectDetection extends Owlv2PreTrainedModel{}class BeitPreTrainedModel extends PreTrainedModel{}class BeitModel extends BeitPreTrainedModel{}class BeitForImageClassification extends BeitPreTrainedModel{async _call(st){return new SequenceClassifierOutput(await super._call(st))}}class DetrPreTrainedModel extends PreTrainedModel{}class DetrModel extends DetrPreTrainedModel{}class DetrForObjectDetection extends DetrPreTrainedModel{async _call(st){return new DetrObjectDetectionOutput(await super._call(st))}}class DetrForSegmentation extends DetrPreTrainedModel{async _call(st){return new DetrSegmentationOutput(await super._call(st))}}class DetrObjectDetectionOutput extends ModelOutput{constructor({logits:st,pred_boxes:nn}){super(),this.logits=st,this.pred_boxes=nn}}class DetrSegmentationOutput extends ModelOutput{constructor({logits:st,pred_boxes:nn,pred_masks:rn}){super(),this.logits=st,this.pred_boxes=nn,this.pred_masks=rn}}class TableTransformerPreTrainedModel extends PreTrainedModel{}class TableTransformerModel extends TableTransformerPreTrainedModel{}class TableTransformerForObjectDetection extends TableTransformerPreTrainedModel{async _call(st){return new TableTransformerObjectDetectionOutput(await super._call(st))}}class TableTransformerObjectDetectionOutput extends DetrObjectDetectionOutput{}class DeiTPreTrainedModel extends PreTrainedModel{}class DeiTModel extends DeiTPreTrainedModel{}class DeiTForImageClassification extends DeiTPreTrainedModel{async _call(st){return new SequenceClassifierOutput(await super._call(st))}}class ResNetPreTrainedModel extends PreTrainedModel{}class ResNetModel extends ResNetPreTrainedModel{}class ResNetForImageClassification extends ResNetPreTrainedModel{async _call(st){return new SequenceClassifierOutput(await super._call(st))}}class SwinPreTrainedModel extends PreTrainedModel{}class SwinModel extends SwinPreTrainedModel{}class SwinForImageClassification extends SwinPreTrainedModel{async _call(st){return new SequenceClassifierOutput(await super._call(st))}}class Swin2SRPreTrainedModel extends PreTrainedModel{}class Swin2SRModel extends Swin2SRPreTrainedModel{}class Swin2SRForImageSuperResolution extends Swin2SRPreTrainedModel{}class DPTPreTrainedModel extends PreTrainedModel{}class DPTModel extends DPTPreTrainedModel{}class DPTForDepthEstimation extends DPTPreTrainedModel{}class DepthAnythingPreTrainedModel extends PreTrainedModel{}class DepthAnythingForDepthEstimation extends DepthAnythingPreTrainedModel{}class GLPNPreTrainedModel extends PreTrainedModel{}class GLPNModel extends GLPNPreTrainedModel{}class GLPNForDepthEstimation extends GLPNPreTrainedModel{}class DonutSwinPreTrainedModel extends PreTrainedModel{}class DonutSwinModel extends DonutSwinPreTrainedModel{}class ConvNextPreTrainedModel extends PreTrainedModel{}class ConvNextModel extends ConvNextPreTrainedModel{}class ConvNextForImageClassification extends ConvNextPreTrainedModel{async _call(st){return new SequenceClassifierOutput(await super._call(st))}}class ConvNextV2PreTrainedModel extends PreTrainedModel{}class ConvNextV2Model extends ConvNextV2PreTrainedModel{}class ConvNextV2ForImageClassification extends ConvNextV2PreTrainedModel{async _call(st){return new SequenceClassifierOutput(await super._call(st))}}class Dinov2PreTrainedModel extends PreTrainedModel{}class Dinov2Model extends Dinov2PreTrainedModel{}class Dinov2ForImageClassification extends Dinov2PreTrainedModel{async _call(st){return new SequenceClassifierOutput(await super._call(st))}}class YolosPreTrainedModel extends PreTrainedModel{}class YolosModel extends YolosPreTrainedModel{}class YolosForObjectDetection extends YolosPreTrainedModel{async _call(st){return new YolosObjectDetectionOutput(await super._call(st))}}class YolosObjectDetectionOutput extends ModelOutput{constructor({logits:st,pred_boxes:nn}){super(),this.logits=st,this.pred_boxes=nn}}class SamPreTrainedModel extends PreTrainedModel{}class SamModel extends SamPreTrainedModel{constructor(st,nn,rn){super(st,nn),this.prompt_encoder_mask_decoder=rn}async get_image_embeddings({pixel_values:st}){return await encoderForward(this,{pixel_values:st})}async forward(st){if((!st.image_embeddings||!st.image_positional_embeddings)&&(st={...st,...await this.get_image_embeddings(st)}),!st.input_labels){const nn=st.input_points.dims.slice(0,-1),rn=nn.reduce((on,an)=>on*an,1);st.input_labels=new Tensor("int64",new BigInt64Array(rn).fill(1n),nn)}return await sessionRun(this.prompt_encoder_mask_decoder,{input_points:st.input_points,input_labels:st.input_labels,image_embeddings:st.image_embeddings,image_positional_embeddings:st.image_positional_embeddings})}async _call(st){return new SamImageSegmentationOutput(await super._call(st))}}class SamImageSegmentationOutput extends ModelOutput{constructor({iou_scores:st,pred_masks:nn}){super(),this.iou_scores=st,this.pred_masks=nn}}class MarianPreTrainedModel extends PreTrainedModel{}class MarianModel extends MarianPreTrainedModel{}class MarianMTModel extends MarianPreTrainedModel{constructor(st,nn,rn,on){super(st,nn),this.decoder_merged_session=rn,this.generation_config=on,this.num_decoder_layers=this.config.decoder_layers,this.num_decoder_heads=this.config.decoder_attention_heads,this.decoder_dim_kv=this.config.d_model/this.num_decoder_heads,this.num_encoder_layers=this.config.encoder_layers,this.num_encoder_heads=this.config.encoder_attention_heads,this.encoder_dim_kv=this.config.d_model/this.num_encoder_heads}}class M2M100PreTrainedModel extends PreTrainedModel{}class M2M100Model extends M2M100PreTrainedModel{}class M2M100ForConditionalGeneration extends M2M100PreTrainedModel{constructor(st,nn,rn,on){super(st,nn),this.decoder_merged_session=rn,this.generation_config=on,this.num_decoder_layers=this.config.decoder_layers,this.num_decoder_heads=this.config.decoder_attention_heads,this.decoder_dim_kv=this.config.d_model/this.num_decoder_heads,this.num_encoder_layers=this.config.encoder_layers,this.num_encoder_heads=this.config.encoder_attention_heads,this.encoder_dim_kv=this.config.d_model/this.num_encoder_heads}}class Wav2Vec2PreTrainedModel extends PreTrainedModel{}class Wav2Vec2Model extends Wav2Vec2PreTrainedModel{}class Wav2Vec2ForCTC extends Wav2Vec2PreTrainedModel{async _call(st){return new CausalLMOutput(await super._call(st))}}class Wav2Vec2ForSequenceClassification extends Wav2Vec2PreTrainedModel{async _call(st){return new SequenceClassifierOutput(await super._call(st))}}class Wav2Vec2ForAudioFrameClassification extends Wav2Vec2PreTrainedModel{async _call(st){return new TokenClassifierOutput(await super._call(st))}}class UniSpeechPreTrainedModel extends PreTrainedModel{}class UniSpeechModel extends UniSpeechPreTrainedModel{}class UniSpeechForCTC extends UniSpeechPreTrainedModel{async _call(st){return new CausalLMOutput(await super._call(st))}}class UniSpeechForSequenceClassification extends UniSpeechPreTrainedModel{async _call(st){return new SequenceClassifierOutput(await super._call(st))}}class UniSpeechSatPreTrainedModel extends PreTrainedModel{}class UniSpeechSatModel extends UniSpeechSatPreTrainedModel{}class UniSpeechSatForCTC extends UniSpeechSatPreTrainedModel{async _call(st){return new CausalLMOutput(await super._call(st))}}class UniSpeechSatForSequenceClassification extends UniSpeechSatPreTrainedModel{async _call(st){return new SequenceClassifierOutput(await super._call(st))}}class UniSpeechSatForAudioFrameClassification extends UniSpeechSatPreTrainedModel{async _call(st){return new TokenClassifierOutput(await super._call(st))}}class Wav2Vec2BertPreTrainedModel extends PreTrainedModel{}class Wav2Vec2BertModel extends Wav2Vec2BertPreTrainedModel{}class Wav2Vec2BertForCTC extends Wav2Vec2BertPreTrainedModel{async _call(st){return new CausalLMOutput(await super._call(st))}}class Wav2Vec2BertForSequenceClassification extends Wav2Vec2BertPreTrainedModel{async _call(st){return new SequenceClassifierOutput(await super._call(st))}}class HubertModel extends Wav2Vec2PreTrainedModel{}class HubertForCTC extends Wav2Vec2PreTrainedModel{async _call(st){return new CausalLMOutput(await super._call(st))}}class HubertForSequenceClassification extends Wav2Vec2PreTrainedModel{async _call(st){return new SequenceClassifierOutput(await super._call(st))}}class WavLMPreTrainedModel extends PreTrainedModel{}class WavLMModel extends WavLMPreTrainedModel{}class WavLMForCTC extends WavLMPreTrainedModel{async _call(st){return new CausalLMOutput(await super._call(st))}}class WavLMForSequenceClassification extends WavLMPreTrainedModel{async _call(st){return new SequenceClassifierOutput(await super._call(st))}}class WavLMForXVector extends WavLMPreTrainedModel{async _call(st){return new XVectorOutput(await super._call(st))}}class WavLMForAudioFrameClassification extends WavLMPreTrainedModel{async _call(st){return new TokenClassifierOutput(await super._call(st))}}class SpeechT5PreTrainedModel extends PreTrainedModel{}class SpeechT5ForSpeechToText extends SpeechT5PreTrainedModel{}class SpeechT5ForTextToSpeech extends SpeechT5PreTrainedModel{constructor(st,nn,rn,on){super(st,nn),this.decoder_merged_session=rn,this.generation_config=on,this.num_decoder_layers=this.config.decoder_layers,this.num_decoder_heads=this.config.decoder_attention_heads,this.decoder_dim_kv=this.config.hidden_size/this.num_decoder_heads,this.num_encoder_layers=this.config.encoder_layers,this.num_encoder_heads=this.config.encoder_attention_heads,this.encoder_dim_kv=this.config.hidden_size/this.num_encoder_heads}async generate_speech(st,nn,{threshold:rn=.5,minlenratio:on=0,maxlenratio:an=20,vocoder:sn=null}={}){const un={input_ids:st},{encoder_outputs:Xr,encoder_attention_mask:to}=await encoderForward(this,un),uo=Xr.dims[1]/this.config.reduction_factor,hn=Math.floor(uo*an),fn=Math.floor(uo*on),co=this.config.num_mel_bins;let lo=[],fo=null,ho=null,mo=0;for(;;){++mo;const tp=boolTensor(!!ho);let ep;ho?ep=ho.output_sequence_out:ep=new Tensor("float32",new Float32Array(co),[1,1,co]);let np={use_cache_branch:tp,output_sequence:ep,encoder_attention_mask:to,speaker_embeddings:nn,encoder_hidden_states:Xr};this.addPastKeyValues(np,fo),ho=await sessionRun(this.decoder_merged_session,np),fo=this.getPastKeyValues(ho,fo);const{prob:rp,spectrum:ip}=ho;if(lo.push(ip),mo>=fn&&(Array.from(rp.data).filter(op=>op>=rn).length>0||mo>=hn))break}const Uo=cat(lo),{waveform:_d}=await sessionRun(sn.session,{spectrogram:Uo});return{spectrogram:Uo,waveform:_d}}}class SpeechT5HifiGan extends PreTrainedModel{constructor(){super(...arguments);Fp(this,"main_input_name","spectrogram")}}class TrOCRPreTrainedModel extends PreTrainedModel{constructor(st,nn,rn){super(st,nn),this.generation_config=rn,this.config.pad_token_id=this.config.eos_token_id,this.num_encoder_layers=this.num_decoder_layers=this.config.decoder_layers,this.num_encoder_heads=this.num_decoder_heads=this.config.decoder_attention_heads,this.encoder_dim_kv=this.decoder_dim_kv=this.config.d_model/this.num_decoder_heads}}class TrOCRForCausalLM extends TrOCRPreTrainedModel{}class MistralPreTrainedModel extends PreTrainedModel{constructor(st,nn,rn){super(st,nn),this.generation_config=rn,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_key_value_heads,this.num_layers=this.config.num_hidden_layers,this.dim_kv=this.config.hidden_size/this.config.num_attention_heads}}class MistralModel extends MistralPreTrainedModel{}class MistralForCausalLM extends MistralPreTrainedModel{}class Starcoder2PreTrainedModel extends PreTrainedModel{constructor(st,nn,rn){super(st,nn),this.generation_config=rn,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_key_value_heads,this.num_layers=this.config.num_hidden_layers,this.dim_kv=this.config.hidden_size/this.config.num_attention_heads}}class Starcoder2Model extends Starcoder2PreTrainedModel{}class Starcoder2ForCausalLM extends Starcoder2PreTrainedModel{}class FalconPreTrainedModel extends PreTrainedModel{constructor(st,nn,rn){super(st,nn),this.generation_config=rn,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_attention_heads,this.num_layers=this.config.num_hidden_layers,this.dim_kv=this.config.hidden_size/this.config.num_attention_heads}}class FalconModel extends FalconPreTrainedModel{}class FalconForCausalLM extends FalconPreTrainedModel{}class ClapPreTrainedModel extends PreTrainedModel{}class ClapModel extends ClapPreTrainedModel{}class ClapTextModelWithProjection extends ClapPreTrainedModel{static async from_pretrained(st,nn={}){return nn.model_file_name??(nn.model_file_name="text_model"),super.from_pretrained(st,nn)}}class ClapAudioModelWithProjection extends ClapPreTrainedModel{static async from_pretrained(st,nn={}){return nn.model_file_name??(nn.model_file_name="audio_model"),super.from_pretrained(st,nn)}}class VitsPreTrainedModel extends PreTrainedModel{}class VitsModel extends VitsPreTrainedModel{async _call(st){return new VitsModelOutput(await super._call(st))}}class SegformerPreTrainedModel extends PreTrainedModel{}class SegformerForImageClassification extends SegformerPreTrainedModel{}class SegformerForSemanticSegmentation extends SegformerPreTrainedModel{}class StableLmPreTrainedModel extends PreTrainedModel{constructor(st,nn,rn){super(st,nn),this.generation_config=rn,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_attention_heads,this.num_layers=this.config.num_hidden_layers,this.dim_kv=this.config.hidden_size/this.num_heads}}class StableLmForCausalLM extends StableLmPreTrainedModel{}class EfficientNetPreTrainedModel extends PreTrainedModel{}class EfficientNetModel extends EfficientNetPreTrainedModel{}class EfficientNetForImageClassification extends EfficientNetPreTrainedModel{async _call(st){return new SequenceClassifierOutput(await super._call(st))}}class PretrainedMixin{static async from_pretrained(st,{quantized:nn=!0,progress_callback:rn=null,config:on=null,cache_dir:an=null,local_files_only:sn=!1,revision:un="main",model_file_name:Xr=null}={}){let to={quantized:nn,progress_callback:rn,config:on,cache_dir:an,local_files_only:sn,revision:un,model_file_name:Xr};if(on=await AutoConfig.from_pretrained(st,to),to.config||(to.config=on),!this.MODEL_CLASS_MAPPINGS)throw new Error("`MODEL_CLASS_MAPPINGS` not implemented for this type of `AutoClass`: "+this.name);for(let uo of this.MODEL_CLASS_MAPPINGS){const hn=uo.get(on.model_type);if(hn)return await hn[1].from_pretrained(st,to)}if(this.BASE_IF_FAIL)return console.warn(`Unknown model class "${on.model_type}", attempting to construct from base class.`),await PreTrainedModel.from_pretrained(st,to);throw Error(`Unsupported model type: ${on.model_type}`)}}Fp(PretrainedMixin,"MODEL_CLASS_MAPPINGS",null),Fp(PretrainedMixin,"BASE_IF_FAIL",!1);const MODEL_MAPPING_NAMES_ENCODER_ONLY=new Map([["bert",["BertModel",BertModel]],["nomic_bert",["NomicBertModel",NomicBertModel]],["roformer",["RoFormerModel",RoFormerModel]],["electra",["ElectraModel",ElectraModel]],["esm",["EsmModel",EsmModel]],["convbert",["ConvBertModel",ConvBertModel]],["camembert",["CamembertModel",CamembertModel]],["deberta",["DebertaModel",DebertaModel]],["deberta-v2",["DebertaV2Model",DebertaV2Model]],["mpnet",["MPNetModel",MPNetModel]],["albert",["AlbertModel",AlbertModel]],["distilbert",["DistilBertModel",DistilBertModel]],["roberta",["RobertaModel",RobertaModel]],["xlm",["XLMModel",XLMModel]],["xlm-roberta",["XLMRobertaModel",XLMRobertaModel]],["clap",["ClapModel",ClapModel]],["clip",["CLIPModel",CLIPModel]],["clipseg",["CLIPSegModel",CLIPSegModel]],["chinese_clip",["ChineseCLIPModel",ChineseCLIPModel]],["siglip",["SiglipModel",SiglipModel]],["mobilebert",["MobileBertModel",MobileBertModel]],["squeezebert",["SqueezeBertModel",SqueezeBertModel]],["wav2vec2",["Wav2Vec2Model",Wav2Vec2Model]],["wav2vec2-bert",["Wav2Vec2BertModel",Wav2Vec2BertModel]],["unispeech",["UniSpeechModel",UniSpeechModel]],["unispeech-sat",["UniSpeechSatModel",UniSpeechSatModel]],["hubert",["HubertModel",HubertModel]],["wavlm",["WavLMModel",WavLMModel]],["audio-spectrogram-transformer",["ASTModel",ASTModel]],["vits",["VitsModel",VitsModel]],["detr",["DetrModel",DetrModel]],["table-transformer",["TableTransformerModel",TableTransformerModel]],["vit",["ViTModel",ViTModel]],["fastvit",["FastViTModel",FastViTModel]],["mobilevit",["MobileViTModel",MobileViTModel]],["mobilevitv2",["MobileViTV2Model",MobileViTV2Model]],["owlvit",["OwlViTModel",OwlViTModel]],["owlv2",["Owlv2Model",Owlv2Model]],["beit",["BeitModel",BeitModel]],["deit",["DeiTModel",DeiTModel]],["convnext",["ConvNextModel",ConvNextModel]],["convnextv2",["ConvNextV2Model",ConvNextV2Model]],["dinov2",["Dinov2Model",Dinov2Model]],["resnet",["ResNetModel",ResNetModel]],["swin",["SwinModel",SwinModel]],["swin2sr",["Swin2SRModel",Swin2SRModel]],["donut-swin",["DonutSwinModel",DonutSwinModel]],["yolos",["YolosModel",YolosModel]],["dpt",["DPTModel",DPTModel]],["glpn",["GLPNModel",GLPNModel]],["hifigan",["SpeechT5HifiGan",SpeechT5HifiGan]],["efficientnet",["EfficientNetModel",EfficientNetModel]]]),MODEL_MAPPING_NAMES_ENCODER_DECODER=new Map([["t5",["T5Model",T5Model]],["longt5",["LongT5Model",LongT5Model]],["mt5",["MT5Model",MT5Model]],["bart",["BartModel",BartModel]],["mbart",["MBartModel",MBartModel]],["marian",["MarianModel",MarianModel]],["whisper",["WhisperModel",WhisperModel]],["m2m_100",["M2M100Model",M2M100Model]],["blenderbot",["BlenderbotModel",BlenderbotModel]],["blenderbot-small",["BlenderbotSmallModel",BlenderbotSmallModel]]]),MODEL_MAPPING_NAMES_DECODER_ONLY=new Map([["bloom",["BloomModel",BloomModel]],["gpt2",["GPT2Model",GPT2Model]],["gptj",["GPTJModel",GPTJModel]],["gpt_bigcode",["GPTBigCodeModel",GPTBigCodeModel]],["gpt_neo",["GPTNeoModel",GPTNeoModel]],["gpt_neox",["GPTNeoXModel",GPTNeoXModel]],["codegen",["CodeGenModel",CodeGenModel]],["llama",["LlamaModel",LlamaModel]],["qwen2",["Qwen2Model",Qwen2Model]],["phi",["PhiModel",PhiModel]],["mpt",["MptModel",MptModel]],["opt",["OPTModel",OPTModel]],["mistral",["MistralModel",MistralModel]],["starcoder2",["Starcoder2Model",Starcoder2Model]],["falcon",["FalconModel",FalconModel]]]),MODEL_FOR_SPEECH_SEQ_2_SEQ_MAPPING_NAMES=new Map([["speecht5",["SpeechT5ForSpeechToText",SpeechT5ForSpeechToText]],["whisper",["WhisperForConditionalGeneration",WhisperForConditionalGeneration]]]),MODEL_FOR_TEXT_TO_SPECTROGRAM_MAPPING_NAMES=new Map([["speecht5",["SpeechT5ForTextToSpeech",SpeechT5ForTextToSpeech]]]),MODEL_FOR_TEXT_TO_WAVEFORM_MAPPING_NAMES=new Map([["vits",["VitsModel",VitsModel]]]),MODEL_FOR_SEQUENCE_CLASSIFICATION_MAPPING_NAMES=new Map([["bert",["BertForSequenceClassification",BertForSequenceClassification]],["roformer",["RoFormerForSequenceClassification",RoFormerForSequenceClassification]],["electra",["ElectraForSequenceClassification",ElectraForSequenceClassification]],["esm",["EsmForSequenceClassification",EsmForSequenceClassification]],["convbert",["ConvBertForSequenceClassification",ConvBertForSequenceClassification]],["camembert",["CamembertForSequenceClassification",CamembertForSequenceClassification]],["deberta",["DebertaForSequenceClassification",DebertaForSequenceClassification]],["deberta-v2",["DebertaV2ForSequenceClassification",DebertaV2ForSequenceClassification]],["mpnet",["MPNetForSequenceClassification",MPNetForSequenceClassification]],["albert",["AlbertForSequenceClassification",AlbertForSequenceClassification]],["distilbert",["DistilBertForSequenceClassification",DistilBertForSequenceClassification]],["roberta",["RobertaForSequenceClassification",RobertaForSequenceClassification]],["xlm",["XLMForSequenceClassification",XLMForSequenceClassification]],["xlm-roberta",["XLMRobertaForSequenceClassification",XLMRobertaForSequenceClassification]],["bart",["BartForSequenceClassification",BartForSequenceClassification]],["mbart",["MBartForSequenceClassification",MBartForSequenceClassification]],["mobilebert",["MobileBertForSequenceClassification",MobileBertForSequenceClassification]],["squeezebert",["SqueezeBertForSequenceClassification",SqueezeBertForSequenceClassification]]]),MODEL_FOR_TOKEN_CLASSIFICATION_MAPPING_NAMES=new Map([["bert",["BertForTokenClassification",BertForTokenClassification]],["roformer",["RoFormerForTokenClassification",RoFormerForTokenClassification]],["electra",["ElectraForTokenClassification",ElectraForTokenClassification]],["esm",["EsmForTokenClassification",EsmForTokenClassification]],["convbert",["ConvBertForTokenClassification",ConvBertForTokenClassification]],["camembert",["CamembertForTokenClassification",CamembertForTokenClassification]],["deberta",["DebertaForTokenClassification",DebertaForTokenClassification]],["deberta-v2",["DebertaV2ForTokenClassification",DebertaV2ForTokenClassification]],["mpnet",["MPNetForTokenClassification",MPNetForTokenClassification]],["distilbert",["DistilBertForTokenClassification",DistilBertForTokenClassification]],["roberta",["RobertaForTokenClassification",RobertaForTokenClassification]],["xlm",["XLMForTokenClassification",XLMForTokenClassification]],["xlm-roberta",["XLMRobertaForTokenClassification",XLMRobertaForTokenClassification]]]),MODEL_FOR_SEQ_TO_SEQ_CAUSAL_LM_MAPPING_NAMES=new Map([["t5",["T5ForConditionalGeneration",T5ForConditionalGeneration]],["longt5",["LongT5ForConditionalGeneration",LongT5ForConditionalGeneration]],["mt5",["MT5ForConditionalGeneration",MT5ForConditionalGeneration]],["bart",["BartForConditionalGeneration",BartForConditionalGeneration]],["mbart",["MBartForConditionalGeneration",MBartForConditionalGeneration]],["marian",["MarianMTModel",MarianMTModel]],["m2m_100",["M2M100ForConditionalGeneration",M2M100ForConditionalGeneration]],["blenderbot",["BlenderbotForConditionalGeneration",BlenderbotForConditionalGeneration]],["blenderbot-small",["BlenderbotSmallForConditionalGeneration",BlenderbotSmallForConditionalGeneration]]]),MODEL_WITH_LM_HEAD_MAPPING_NAMES=new Map([["bloom",["BloomForCausalLM",BloomForCausalLM]],["gpt2",["GPT2LMHeadModel",GPT2LMHeadModel]],["gptj",["GPTJForCausalLM",GPTJForCausalLM]],["gpt_bigcode",["GPTBigCodeForCausalLM",GPTBigCodeForCausalLM]],["gpt_neo",["GPTNeoForCausalLM",GPTNeoForCausalLM]],["gpt_neox",["GPTNeoXForCausalLM",GPTNeoXForCausalLM]],["codegen",["CodeGenForCausalLM",CodeGenForCausalLM]],["llama",["LlamaForCausalLM",LlamaForCausalLM]],["qwen2",["Qwen2ForCausalLM",Qwen2ForCausalLM]],["phi",["PhiForCausalLM",PhiForCausalLM]],["mpt",["MptForCausalLM",MptForCausalLM]],["opt",["OPTForCausalLM",OPTForCausalLM]],["mbart",["MBartForCausalLM",MBartForCausalLM]],["mistral",["MistralForCausalLM",MistralForCausalLM]],["starcoder2",["Starcoder2ForCausalLM",Starcoder2ForCausalLM]],["falcon",["FalconForCausalLM",FalconForCausalLM]],["trocr",["TrOCRForCausalLM",TrOCRForCausalLM]],["stablelm",["StableLmForCausalLM",StableLmForCausalLM]]]),MODEL_FOR_MASKED_LM_MAPPING_NAMES=new Map([["bert",["BertForMaskedLM",BertForMaskedLM]],["roformer",["RoFormerForMaskedLM",RoFormerForMaskedLM]],["electra",["ElectraForMaskedLM",ElectraForMaskedLM]],["esm",["EsmForMaskedLM",EsmForMaskedLM]],["convbert",["ConvBertForMaskedLM",ConvBertForMaskedLM]],["camembert",["CamembertForMaskedLM",CamembertForMaskedLM]],["deberta",["DebertaForMaskedLM",DebertaForMaskedLM]],["deberta-v2",["DebertaV2ForMaskedLM",DebertaV2ForMaskedLM]],["mpnet",["MPNetForMaskedLM",MPNetForMaskedLM]],["albert",["AlbertForMaskedLM",AlbertForMaskedLM]],["distilbert",["DistilBertForMaskedLM",DistilBertForMaskedLM]],["roberta",["RobertaForMaskedLM",RobertaForMaskedLM]],["xlm",["XLMWithLMHeadModel",XLMWithLMHeadModel]],["xlm-roberta",["XLMRobertaForMaskedLM",XLMRobertaForMaskedLM]],["mobilebert",["MobileBertForMaskedLM",MobileBertForMaskedLM]],["squeezebert",["SqueezeBertForMaskedLM",SqueezeBertForMaskedLM]]]),MODEL_FOR_QUESTION_ANSWERING_MAPPING_NAMES=new Map([["bert",["BertForQuestionAnswering",BertForQuestionAnswering]],["roformer",["RoFormerForQuestionAnswering",RoFormerForQuestionAnswering]],["electra",["ElectraForQuestionAnswering",ElectraForQuestionAnswering]],["convbert",["ConvBertForQuestionAnswering",ConvBertForQuestionAnswering]],["camembert",["CamembertForQuestionAnswering",CamembertForQuestionAnswering]],["deberta",["DebertaForQuestionAnswering",DebertaForQuestionAnswering]],["deberta-v2",["DebertaV2ForQuestionAnswering",DebertaV2ForQuestionAnswering]],["mpnet",["MPNetForQuestionAnswering",MPNetForQuestionAnswering]],["albert",["AlbertForQuestionAnswering",AlbertForQuestionAnswering]],["distilbert",["DistilBertForQuestionAnswering",DistilBertForQuestionAnswering]],["roberta",["RobertaForQuestionAnswering",RobertaForQuestionAnswering]],["xlm",["XLMForQuestionAnswering",XLMForQuestionAnswering]],["xlm-roberta",["XLMRobertaForQuestionAnswering",XLMRobertaForQuestionAnswering]],["mobilebert",["MobileBertForQuestionAnswering",MobileBertForQuestionAnswering]],["squeezebert",["SqueezeBertForQuestionAnswering",SqueezeBertForQuestionAnswering]]]),MODEL_FOR_VISION_2_SEQ_MAPPING_NAMES=new Map([["vision-encoder-decoder",["VisionEncoderDecoderModel",VisionEncoderDecoderModel]]]),MODEL_FOR_DOCUMENT_QUESTION_ANSWERING_MAPPING_NAMES=new Map([["vision-encoder-decoder",["VisionEncoderDecoderModel",VisionEncoderDecoderModel]]]),MODEL_FOR_IMAGE_CLASSIFICATION_MAPPING_NAMES=new Map([["vit",["ViTForImageClassification",ViTForImageClassification]],["fastvit",["FastViTForImageClassification",FastViTForImageClassification]],["mobilevit",["MobileViTForImageClassification",MobileViTForImageClassification]],["mobilevitv2",["MobileViTV2ForImageClassification",MobileViTV2ForImageClassification]],["beit",["BeitForImageClassification",BeitForImageClassification]],["deit",["DeiTForImageClassification",DeiTForImageClassification]],["convnext",["ConvNextForImageClassification",ConvNextForImageClassification]],["convnextv2",["ConvNextV2ForImageClassification",ConvNextV2ForImageClassification]],["dinov2",["Dinov2ForImageClassification",Dinov2ForImageClassification]],["resnet",["ResNetForImageClassification",ResNetForImageClassification]],["swin",["SwinForImageClassification",SwinForImageClassification]],["segformer",["SegformerForImageClassification",SegformerForImageClassification]],["efficientnet",["EfficientNetForImageClassification",EfficientNetForImageClassification]]]),MODEL_FOR_OBJECT_DETECTION_MAPPING_NAMES=new Map([["detr",["DetrForObjectDetection",DetrForObjectDetection]],["table-transformer",["TableTransformerForObjectDetection",TableTransformerForObjectDetection]],["yolos",["YolosForObjectDetection",YolosForObjectDetection]]]),MODEL_FOR_ZERO_SHOT_OBJECT_DETECTION_MAPPING_NAMES=new Map([["owlvit",["OwlViTForObjectDetection",OwlViTForObjectDetection]],["owlv2",["Owlv2ForObjectDetection",Owlv2ForObjectDetection]]]),MODEL_FOR_IMAGE_SEGMENTATION_MAPPING_NAMES=new Map([["detr",["DetrForSegmentation",DetrForSegmentation]],["clipseg",["CLIPSegForImageSegmentation",CLIPSegForImageSegmentation]]]),MODEL_FOR_SEMANTIC_SEGMENTATION_MAPPING_NAMES=new Map([["segformer",["SegformerForSemanticSegmentation",SegformerForSemanticSegmentation]]]),MODEL_FOR_MASK_GENERATION_MAPPING_NAMES=new Map([["sam",["SamModel",SamModel]]]),MODEL_FOR_CTC_MAPPING_NAMES=new Map([["wav2vec2",["Wav2Vec2ForCTC",Wav2Vec2ForCTC]],["wav2vec2-bert",["Wav2Vec2BertForCTC",Wav2Vec2BertForCTC]],["unispeech",["UniSpeechForCTC",UniSpeechForCTC]],["unispeech-sat",["UniSpeechSatForCTC",UniSpeechSatForCTC]],["wavlm",["WavLMForCTC",WavLMForCTC]],["hubert",["HubertForCTC",HubertForCTC]]]),MODEL_FOR_AUDIO_CLASSIFICATION_MAPPING_NAMES=new Map([["wav2vec2",["Wav2Vec2ForSequenceClassification",Wav2Vec2ForSequenceClassification]],["wav2vec2-bert",["Wav2Vec2BertForSequenceClassification",Wav2Vec2BertForSequenceClassification]],["unispeech",["UniSpeechForSequenceClassification",UniSpeechForSequenceClassification]],["unispeech-sat",["UniSpeechSatForSequenceClassification",UniSpeechSatForSequenceClassification]],["wavlm",["WavLMForSequenceClassification",WavLMForSequenceClassification]],["hubert",["HubertForSequenceClassification",HubertForSequenceClassification]],["audio-spectrogram-transformer",["ASTForAudioClassification",ASTForAudioClassification]]]),MODEL_FOR_AUDIO_XVECTOR_MAPPING_NAMES=new Map([["wavlm",["WavLMForXVector",WavLMForXVector]]]),MODEL_FOR_AUDIO_FRAME_CLASSIFICATION_MAPPING_NAMES=new Map([["unispeech-sat",["UniSpeechSatForAudioFrameClassification",UniSpeechSatForAudioFrameClassification]],["wavlm",["WavLMForAudioFrameClassification",WavLMForAudioFrameClassification]],["wav2vec2",["Wav2Vec2ForAudioFrameClassification",Wav2Vec2ForAudioFrameClassification]]]),MODEL_FOR_IMAGE_MATTING_MAPPING_NAMES=new Map([["vitmatte",["VitMatteForImageMatting",VitMatteForImageMatting]]]),MODEL_FOR_IMAGE_TO_IMAGE_MAPPING_NAMES=new Map([["swin2sr",["Swin2SRForImageSuperResolution",Swin2SRForImageSuperResolution]]]),MODEL_FOR_DEPTH_ESTIMATION_MAPPING_NAMES=new Map([["dpt",["DPTForDepthEstimation",DPTForDepthEstimation]],["depth_anything",["DepthAnythingForDepthEstimation",DepthAnythingForDepthEstimation]],["glpn",["GLPNForDepthEstimation",GLPNForDepthEstimation]]]),MODEL_FOR_IMAGE_FEATURE_EXTRACTION_MAPPING_NAMES=new Map([["clip",["CLIPVisionModelWithProjection",CLIPVisionModelWithProjection]],["siglip",["SiglipVisionModel",SiglipVisionModel]]]),MODEL_CLASS_TYPE_MAPPING=[[MODEL_MAPPING_NAMES_ENCODER_ONLY,MODEL_TYPES.EncoderOnly],[MODEL_MAPPING_NAMES_ENCODER_DECODER,MODEL_TYPES.EncoderDecoder],[MODEL_MAPPING_NAMES_DECODER_ONLY,MODEL_TYPES.DecoderOnly],[MODEL_FOR_SEQUENCE_CLASSIFICATION_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_TOKEN_CLASSIFICATION_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_SEQ_TO_SEQ_CAUSAL_LM_MAPPING_NAMES,MODEL_TYPES.Seq2Seq],[MODEL_FOR_SPEECH_SEQ_2_SEQ_MAPPING_NAMES,MODEL_TYPES.Seq2Seq],[MODEL_WITH_LM_HEAD_MAPPING_NAMES,MODEL_TYPES.DecoderOnly],[MODEL_FOR_MASKED_LM_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_QUESTION_ANSWERING_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_VISION_2_SEQ_MAPPING_NAMES,MODEL_TYPES.Vision2Seq],[MODEL_FOR_IMAGE_CLASSIFICATION_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_IMAGE_SEGMENTATION_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_SEMANTIC_SEGMENTATION_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_IMAGE_MATTING_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_IMAGE_TO_IMAGE_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_DEPTH_ESTIMATION_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_OBJECT_DETECTION_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_ZERO_SHOT_OBJECT_DETECTION_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_MASK_GENERATION_MAPPING_NAMES,MODEL_TYPES.MaskGeneration],[MODEL_FOR_CTC_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_AUDIO_CLASSIFICATION_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_TEXT_TO_SPECTROGRAM_MAPPING_NAMES,MODEL_TYPES.Seq2Seq],[MODEL_FOR_TEXT_TO_WAVEFORM_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_AUDIO_XVECTOR_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_AUDIO_FRAME_CLASSIFICATION_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_IMAGE_FEATURE_EXTRACTION_MAPPING_NAMES,MODEL_TYPES.EncoderOnly]];for(const[Mt,st]of MODEL_CLASS_TYPE_MAPPING)for(const[nn,rn]of Mt.values())MODEL_TYPE_MAPPING.set(nn,st),MODEL_CLASS_TO_NAME_MAPPING.set(rn,nn),MODEL_NAME_TO_CLASS_MAPPING.set(nn,rn);const CUSTOM_MAPPING=[["CLIPTextModelWithProjection",CLIPTextModelWithProjection,MODEL_TYPES.EncoderOnly],["SiglipTextModel",SiglipTextModel,MODEL_TYPES.EncoderOnly],["ClapTextModelWithProjection",ClapTextModelWithProjection,MODEL_TYPES.EncoderOnly],["ClapAudioModelWithProjection",ClapAudioModelWithProjection,MODEL_TYPES.EncoderOnly]];for(const[Mt,st,nn]of CUSTOM_MAPPING)MODEL_TYPE_MAPPING.set(Mt,nn),MODEL_CLASS_TO_NAME_MAPPING.set(st,Mt),MODEL_NAME_TO_CLASS_MAPPING.set(Mt,st);class AutoModel extends PretrainedMixin{}Fp(AutoModel,"MODEL_CLASS_MAPPINGS",MODEL_CLASS_TYPE_MAPPING.map(st=>st[0])),Fp(AutoModel,"BASE_IF_FAIL",!0);class AutoModelForSequenceClassification extends PretrainedMixin{}Fp(AutoModelForSequenceClassification,"MODEL_CLASS_MAPPINGS",[MODEL_FOR_SEQUENCE_CLASSIFICATION_MAPPING_NAMES]);class AutoModelForTokenClassification extends PretrainedMixin{}Fp(AutoModelForTokenClassification,"MODEL_CLASS_MAPPINGS",[MODEL_FOR_TOKEN_CLASSIFICATION_MAPPING_NAMES]);class AutoModelForSeq2SeqLM extends PretrainedMixin{}Fp(AutoModelForSeq2SeqLM,"MODEL_CLASS_MAPPINGS",[MODEL_FOR_SEQ_TO_SEQ_CAUSAL_LM_MAPPING_NAMES]);class AutoModelForSpeechSeq2Seq extends PretrainedMixin{}Fp(AutoModelForSpeechSeq2Seq,"MODEL_CLASS_MAPPINGS",[MODEL_FOR_SPEECH_SEQ_2_SEQ_MAPPING_NAMES]);class AutoModelForTextToSpectrogram extends PretrainedMixin{}Fp(AutoModelForTextToSpectrogram,"MODEL_CLASS_MAPPINGS",[MODEL_FOR_TEXT_TO_SPECTROGRAM_MAPPING_NAMES]);class AutoModelForTextToWaveform extends PretrainedMixin{}Fp(AutoModelForTextToWaveform,"MODEL_CLASS_MAPPINGS",[MODEL_FOR_TEXT_TO_WAVEFORM_MAPPING_NAMES]);class AutoModelForCausalLM extends PretrainedMixin{}Fp(AutoModelForCausalLM,"MODEL_CLASS_MAPPINGS",[MODEL_WITH_LM_HEAD_MAPPING_NAMES]);class AutoModelForMaskedLM extends PretrainedMixin{}Fp(AutoModelForMaskedLM,"MODEL_CLASS_MAPPINGS",[MODEL_FOR_MASKED_LM_MAPPING_NAMES]);class AutoModelForQuestionAnswering extends PretrainedMixin{}Fp(AutoModelForQuestionAnswering,"MODEL_CLASS_MAPPINGS",[MODEL_FOR_QUESTION_ANSWERING_MAPPING_NAMES]);class AutoModelForVision2Seq extends PretrainedMixin{}Fp(AutoModelForVision2Seq,"MODEL_CLASS_MAPPINGS",[MODEL_FOR_VISION_2_SEQ_MAPPING_NAMES]);class AutoModelForImageClassification extends PretrainedMixin{}Fp(AutoModelForImageClassification,"MODEL_CLASS_MAPPINGS",[MODEL_FOR_IMAGE_CLASSIFICATION_MAPPING_NAMES]);class AutoModelForImageSegmentation extends PretrainedMixin{}Fp(AutoModelForImageSegmentation,"MODEL_CLASS_MAPPINGS",[MODEL_FOR_IMAGE_SEGMENTATION_MAPPING_NAMES]);class AutoModelForSemanticSegmentation extends PretrainedMixin{}Fp(AutoModelForSemanticSegmentation,"MODEL_CLASS_MAPPINGS",[MODEL_FOR_SEMANTIC_SEGMENTATION_MAPPING_NAMES]);class AutoModelForObjectDetection extends PretrainedMixin{}Fp(AutoModelForObjectDetection,"MODEL_CLASS_MAPPINGS",[MODEL_FOR_OBJECT_DETECTION_MAPPING_NAMES]);class AutoModelForZeroShotObjectDetection extends PretrainedMixin{}Fp(AutoModelForZeroShotObjectDetection,"MODEL_CLASS_MAPPINGS",[MODEL_FOR_ZERO_SHOT_OBJECT_DETECTION_MAPPING_NAMES]);class AutoModelForCTC extends PretrainedMixin{}Fp(AutoModelForCTC,"MODEL_CLASS_MAPPINGS",[MODEL_FOR_CTC_MAPPING_NAMES]);class AutoModelForAudioClassification extends PretrainedMixin{}Fp(AutoModelForAudioClassification,"MODEL_CLASS_MAPPINGS",[MODEL_FOR_AUDIO_CLASSIFICATION_MAPPING_NAMES]);class AutoModelForDocumentQuestionAnswering extends PretrainedMixin{}Fp(AutoModelForDocumentQuestionAnswering,"MODEL_CLASS_MAPPINGS",[MODEL_FOR_DOCUMENT_QUESTION_ANSWERING_MAPPING_NAMES]);class AutoModelForImageToImage extends PretrainedMixin{}Fp(AutoModelForImageToImage,"MODEL_CLASS_MAPPINGS",[MODEL_FOR_IMAGE_TO_IMAGE_MAPPING_NAMES]);class AutoModelForDepthEstimation extends PretrainedMixin{}Fp(AutoModelForDepthEstimation,"MODEL_CLASS_MAPPINGS",[MODEL_FOR_DEPTH_ESTIMATION_MAPPING_NAMES]);class AutoModelForImageFeatureExtraction extends PretrainedMixin{}Fp(AutoModelForImageFeatureExtraction,"MODEL_CLASS_MAPPINGS",[MODEL_FOR_IMAGE_FEATURE_EXTRACTION_MAPPING_NAMES]);class Seq2SeqLMOutput extends ModelOutput{constructor({logits:st,past_key_values:nn,encoder_outputs:rn,decoder_attentions:on=null,cross_attentions:an=null}){super(),this.logits=st,this.past_key_values=nn,this.encoder_outputs=rn,this.decoder_attentions=on,this.cross_attentions=an}}class SequenceClassifierOutput extends ModelOutput{constructor({logits:st}){super(),this.logits=st}}class XVectorOutput extends ModelOutput{constructor({logits:st,embeddings:nn}){super(),this.logits=st,this.embeddings=nn}}class TokenClassifierOutput extends ModelOutput{constructor({logits:st}){super(),this.logits=st}}class MaskedLMOutput extends ModelOutput{constructor({logits:st}){super(),this.logits=st}}class QuestionAnsweringModelOutput extends ModelOutput{constructor({start_logits:st,end_logits:nn}){super(),this.start_logits=st,this.end_logits=nn}}class CausalLMOutput extends ModelOutput{constructor({logits:st}){super(),this.logits=st}}class ImageMattingOutput extends ModelOutput{constructor({alphas:st}){super(),this.alphas=st}}class VitsModelOutput extends ModelOutput{constructor({waveform:st,spectrogram:nn}){super(),this.waveform=st,this.spectrogram=nn}}const BROWSER_ENV=typeof self<"u",WEBWORKER_ENV=BROWSER_ENV&&self.constructor.name==="DedicatedWorkerGlobalScope";let createCanvasFunction,ImageDataClass,loadImageFunction;if(BROWSER_ENV)createCanvasFunction=(Mt,st)=>{if(!self.OffscreenCanvas)throw new Error("OffscreenCanvas not supported by this browser.");return new self.OffscreenCanvas(Mt,st)},loadImageFunction=self.createImageBitmap,ImageDataClass=self.ImageData;else if(sharp)loadImageFunction=async Mt=>{const nn=(await Mt.metadata()).channels;let{data:rn,info:on}=await Mt.rotate().raw().toBuffer({resolveWithObject:!0});const an=new RawImage(new Uint8ClampedArray(rn),on.width,on.height,on.channels);return nn!==void 0&&nn!==on.channels&&an.convert(nn),an};else throw new Error("Unable to load image processing library.");const RESAMPLING_MAPPING={0:"nearest",1:"lanczos",2:"bilinear",3:"bicubic",4:"box",5:"hamming"},CONTENT_TYPE_MAP=new Map([["png","image/png"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["gif","image/gif"]]);class RawImage{constructor(st,nn,rn,on){this.data=st,this.width=nn,this.height=rn,this.channels=on}get size(){return[this.width,this.height]}static async read(st){if(st instanceof RawImage)return st;if(typeof st=="string"||st instanceof URL)return await this.fromURL(st);throw new Error(`Unsupported input type: ${typeof st}`)}static async fromURL(st){let nn=await getFile(st);if(nn.status!==200)throw new Error(`Unable to read image from "${st}" (${nn.status} ${nn.statusText})`);let rn=await nn.blob();return this.fromBlob(rn)}static async fromBlob(st){if(BROWSER_ENV){let nn=await loadImageFunction(st);const rn=createCanvasFunction(nn.width,nn.height).getContext("2d");return rn.drawImage(nn,0,0),new this(rn.getImageData(0,0,nn.width,nn.height).data,nn.width,nn.height,4)}else{let nn=sharp(await st.arrayBuffer());return await loadImageFunction(nn)}}static fromTensor(st,nn="CHW"){if(st.dims.length!==3)throw new Error(`Tensor should have 3 dimensions, but has ${st.dims.length} dimensions.`);if(nn==="CHW")st=st.transpose(1,2,0);else if(nn!=="HWC")throw new Error(`Unsupported channel format: ${nn}`);if(!(st.data instanceof Uint8ClampedArray||st.data instanceof Uint8Array))throw new Error(`Unsupported tensor type: ${st.type}`);switch(st.dims[2]){case 1:case 2:case 3:case 4:return new RawImage(st.data,st.dims[1],st.dims[0],st.dims[2]);default:throw new Error(`Unsupported number of channels: ${st.dims[2]}`)}}grayscale(){if(this.channels===1)return this;let st=new Uint8ClampedArray(this.width*this.height*1);switch(this.channels){case 3:case 4:for(let nn=0,rn=0;nn<this.data.length;nn+=this.channels){const on=this.data[nn],an=this.data[nn+1],sn=this.data[nn+2];st[rn++]=Math.round(.2989*on+.587*an+.114*sn)}break;default:throw new Error(`Conversion failed due to unsupported number of channels: ${this.channels}`)}return this._update(st,this.width,this.height,1)}rgb(){if(this.channels===3)return this;let st=new Uint8ClampedArray(this.width*this.height*3);switch(this.channels){case 1:for(let nn=0,rn=0;nn<this.data.length;++nn)st[rn++]=this.data[nn],st[rn++]=this.data[nn],st[rn++]=this.data[nn];break;case 4:for(let nn=0,rn=0;nn<this.data.length;nn+=4)st[rn++]=this.data[nn],st[rn++]=this.data[nn+1],st[rn++]=this.data[nn+2];break;default:throw new Error(`Conversion failed due to unsupported number of channels: ${this.channels}`)}return this._update(st,this.width,this.height,3)}rgba(){if(this.channels===4)return this;let st=new Uint8ClampedArray(this.width*this.height*4);switch(this.channels){case 1:for(let nn=0,rn=0;nn<this.data.length;++nn)st[rn++]=this.data[nn],st[rn++]=this.data[nn],st[rn++]=this.data[nn],st[rn++]=255;break;case 3:for(let nn=0,rn=0;nn<this.data.length;nn+=3)st[rn++]=this.data[nn],st[rn++]=this.data[nn+1],st[rn++]=this.data[nn+2],st[rn++]=255;break;default:throw new Error(`Conversion failed due to unsupported number of channels: ${this.channels}`)}return this._update(st,this.width,this.height,4)}async resize(st,nn,{resample:rn=2}={}){let on=RESAMPLING_MAPPING[rn]??rn;if(BROWSER_ENV){let an=this.channels,sn=this.toCanvas();const un=createCanvasFunction(st,nn).getContext("2d");return un.drawImage(sn,0,0,st,nn),new RawImage(un.getImageData(0,0,st,nn).data,st,nn,4).convert(an)}else{let an=this.toSharp();switch(on){case"box":case"hamming":(on==="box"||on==="hamming")&&(console.warn(`Resampling method ${on} is not yet supported. Using bilinear instead.`),on="bilinear");case"nearest":case"bilinear":case"bicubic":an=an.affine([st/this.width,0,0,nn/this.height],{interpolator:on});break;case"lanczos":an=an.resize({width:st,height:nn,fit:"fill",kernel:"lanczos3"});break;default:throw new Error(`Resampling method ${on} is not supported.`)}return await loadImageFunction(an)}}async pad([st,nn,rn,on]){if(st=Math.max(st,0),nn=Math.max(nn,0),rn=Math.max(rn,0),on=Math.max(on,0),st===0&&nn===0&&rn===0&&on===0)return this;if(BROWSER_ENV){let an=this.channels,sn=this.toCanvas(),un=this.width+st+nn,Xr=this.height+rn+on;const to=createCanvasFunction(un,Xr).getContext("2d");return to.drawImage(sn,0,0,this.width,this.height,st,rn,un,Xr),new RawImage(to.getImageData(0,0,un,Xr).data,un,Xr,4).convert(an)}else{let an=this.toSharp().extend({left:st,right:nn,top:rn,bottom:on});return await loadImageFunction(an)}}async crop([st,nn,rn,on]){if(st=Math.max(st,0),nn=Math.max(nn,0),rn=Math.min(rn,this.width-1),on=Math.min(on,this.height-1),st===0&&nn===0&&rn===this.width-1&&on===this.height-1)return this;const an=rn-st+1,sn=on-nn+1;if(BROWSER_ENV){const un=this.channels,Xr=this.toCanvas(),to=createCanvasFunction(an,sn).getContext("2d");return to.drawImage(Xr,st,nn,an,sn,0,0,an,sn),new RawImage(to.getImageData(0,0,an,sn).data,an,sn,4).convert(un)}else{const un=this.toSharp().extract({left:st,top:nn,width:an,height:sn});return await loadImageFunction(un)}}async center_crop(st,nn){if(this.width===st&&this.height===nn)return this;let rn=(this.width-st)/2,on=(this.height-nn)/2;if(BROWSER_ENV){let an=this.channels,sn=this.toCanvas();const un=createCanvasFunction(st,nn).getContext("2d");let Xr=0,to=0,uo=0,hn=0;return rn>=0?Xr=rn:uo=-rn,on>=0?to=on:hn=-on,un.drawImage(sn,Xr,to,st,nn,uo,hn,st,nn),new RawImage(un.getImageData(0,0,st,nn).data,st,nn,4).convert(an)}else{let an=this.toSharp();if(rn>=0&&on>=0)an=an.extract({left:Math.floor(rn),top:Math.floor(on),width:st,height:nn});else if(rn<=0&&on<=0){let sn=Math.floor(-on),un=Math.floor(-rn);an=an.extend({top:sn,left:un,right:st-this.width-un,bottom:nn-this.height-sn})}else{let sn=[0,0],un=0;on<0?(sn[0]=Math.floor(-on),sn[1]=nn-this.height-sn[0]):un=Math.floor(on);let Xr=[0,0],to=0;rn<0?(Xr[0]=Math.floor(-rn),Xr[1]=st-this.width-Xr[0]):to=Math.floor(rn),an=an.extend({top:sn[0],bottom:sn[1],left:Xr[0],right:Xr[1]}).extract({left:to,top:un,width:st,height:nn})}return await loadImageFunction(an)}}async toBlob(st="image/png",nn=1){if(!BROWSER_ENV)throw new Error("toBlob() is only supported in browser environments.");return await this.toCanvas().convertToBlob({type:st,quality:nn})}toTensor(st="CHW"){let nn=new Tensor("uint8",new Uint8Array(this.data),[this.height,this.width,this.channels]);if(st!=="HWC")if(st==="CHW")nn=nn.permute(2,0,1);else throw new Error(`Unsupported channel format: ${st}`);return nn}toCanvas(){if(!BROWSER_ENV)throw new Error("toCanvas() is only supported in browser environments.");let st=this.clone().rgba(),nn=createCanvasFunction(st.width,st.height),rn=new ImageDataClass(st.data,st.width,st.height);return nn.getContext("2d").putImageData(rn,0,0),nn}_update(st,nn,rn,on=null){return this.data=st,this.width=nn,this.height=rn,on!==null&&(this.channels=on),this}clone(){return new RawImage(this.data.slice(),this.width,this.height,this.channels)}convert(st){if(this.channels===st)return this;switch(st){case 1:this.grayscale();break;case 3:this.rgb();break;case 4:this.rgba();break;default:throw new Error(`Conversion failed due to unsupported number of channels: ${this.channels}`)}return this}async save(st){if(BROWSER_ENV){if(WEBWORKER_ENV)throw new Error("Unable to save an image from a Web Worker.");const nn=st.split(".").pop().toLowerCase(),rn=CONTENT_TYPE_MAP.get(nn)??"image/png",on=await this.toBlob(rn),an=URL.createObjectURL(on),sn=document.createElement("a");sn.href=an,sn.download=st,sn.click(),sn.remove()}else{if(env$1.useFS)return await this.toSharp().toFile(st);throw new Error("Unable to save the image because filesystem is disabled in this environment.")}}toSharp(){if(BROWSER_ENV)throw new Error("toSharp() is only supported in server-side environments.");return sharp(this.data,{raw:{width:this.width,height:this.height,channels:this.channels}})}}async function read_audio(Mt,st){if(typeof AudioContext>"u")throw Error("Unable to load audio from path/URL since `AudioContext` is not available in your environment. Instead, audio data should be passed directly to the pipeline/processor. For more information and some example code, see https://huggingface.co/docs/transformers.js/guides/node-audio-processing.");const nn=await(await getFile(Mt)).arrayBuffer(),rn=new AudioContext({sampleRate:st});typeof st>"u"&&console.warn(`No sampling rate provided, using default of ${rn.sampleRate}Hz.`);const on=await rn.decodeAudioData(nn);let an;if(on.numberOfChannels===2){const sn=Math.sqrt(2),un=on.getChannelData(0),Xr=on.getChannelData(1);an=new Float32Array(un.length);for(let to=0;to<on.length;++to)an[to]=sn*(un[to]+Xr[to])/2}else an=on.getChannelData(0);return an}function hanning(Mt){if(Mt<1)return new Float64Array;if(Mt===1)return new Float64Array([1]);const st=Mt-1,nn=Math.PI/st,rn=new Float64Array(Mt);for(let on=0;on<Mt;++on){const an=2*on-st;rn[on]=.5+.5*Math.cos(nn*an)}return rn}const HERTZ_TO_MEL_MAPPING={htk:Mt=>2595*Math.log10(1+Mt/700),kaldi:Mt=>1127*Math.log(1+Mt/700),slaney:(Mt,st=1e3,nn=15,rn=27/Math.log(6.4))=>Mt>=st?nn+Math.log(Mt/st)*rn:3*Mt/200};function hertz_to_mel(Mt,st="htk"){const nn=HERTZ_TO_MEL_MAPPING[st];if(!nn)throw new Error('mel_scale should be one of "htk", "slaney" or "kaldi".');return typeof Mt=="number"?nn(Mt):Mt.map(rn=>nn(rn))}const MEL_TO_HERTZ_MAPPING={htk:Mt=>700*(10**(Mt/2595)-1),kaldi:Mt=>700*(Math.exp(Mt/1127)-1),slaney:(Mt,st=1e3,nn=15,rn=Math.log(6.4)/27)=>Mt>=nn?st*Math.exp(rn*(Mt-nn)):200*Mt/3};function mel_to_hertz(Mt,st="htk"){const nn=MEL_TO_HERTZ_MAPPING[st];if(!nn)throw new Error('mel_scale should be one of "htk", "slaney" or "kaldi".');return typeof Mt=="number"?nn(Mt):Mt.map(rn=>nn(rn))}function _create_triangular_filter_bank(Mt,st){const nn=Float64Array.from({length:st.length-1},(sn,un)=>st[un+1]-st[un]),rn=Array.from({length:Mt.length},()=>new Array(st.length));for(let sn=0;sn<Mt.length;++sn){const un=rn[sn];for(let Xr=0;Xr<st.length;++Xr)un[Xr]=st[Xr]-Mt[sn]}const on=st.length-2,an=Array.from({length:on},()=>new Array(Mt.length));for(let sn=0;sn<Mt.length;++sn){const un=rn[sn];for(let Xr=0;Xr<on;++Xr){const to=-un[Xr]/nn[Xr],uo=un[Xr+2]/nn[Xr+1];an[Xr][sn]=Math.max(0,Math.min(to,uo))}}return an}function linspace(Mt,st,nn){const rn=(st-Mt)/(nn-1);return Float64Array.from({length:nn},(on,an)=>Mt+rn*an)}function mel_filter_bank(Mt,st,nn,rn,on,an=null,sn="htk",un=!1){if(an!==null&&an!=="slaney")throw new Error('norm must be one of null or "slaney"');const Xr=hertz_to_mel(nn,sn),to=hertz_to_mel(rn,sn),uo=linspace(Xr,to,st+2);let hn=mel_to_hertz(uo,sn),fn;if(un){const lo=on/(Mt*2);fn=hertz_to_mel(Float64Array.from({length:Mt},(fo,ho)=>ho*lo),sn),hn=uo}else fn=linspace(0,Math.floor(on/2),Mt);const co=_create_triangular_filter_bank(fn,hn);if(an!==null&&an==="slaney")for(let lo=0;lo<st;++lo){const fo=co[lo],ho=2/(hn[lo+2]-hn[lo]);for(let mo=0;mo<Mt;++mo)fo[mo]*=ho}return co}function padReflect(Mt,st,nn){const rn=new Mt.constructor(Mt.length+st+nn),on=Mt.length-1;for(let an=0;an<Mt.length;++an)rn[st+an]=Mt[an];for(let an=1;an<=st;++an)rn[st-an]=Mt[calculateReflectOffset(an,on)];for(let an=1;an<=nn;++an)rn[on+st+an]=Mt[calculateReflectOffset(on-an,on)];return rn}function _db_conversion_helper(Mt,st,nn,rn,on){if(nn<=0)throw new Error("reference must be greater than zero");if(rn<=0)throw new Error("min_value must be greater than zero");nn=Math.max(rn,nn);const an=Math.log10(nn);for(let sn=0;sn<Mt.length;++sn)Mt[sn]=st*Math.log10(Math.max(rn,Mt[sn])-an);if(on!==null){if(on<=0)throw new Error("db_range must be greater than zero");const sn=max$3(Mt)[0]-on;for(let un=0;un<Mt.length;++un)Mt[un]=Math.max(Mt[un],sn)}return Mt}function amplitude_to_db(Mt,st=1,nn=1e-5,rn=null){return _db_conversion_helper(Mt,20,st,nn,rn)}function power_to_db(Mt,st=1,nn=1e-10,rn=null){return _db_conversion_helper(Mt,10,st,nn,rn)}function spectrogram(Mt,st,nn,rn,{fft_length:on=null,power:an=1,center:sn=!0,pad_mode:un="reflect",onesided:Xr=!0,preemphasis:to=null,mel_filters:uo=null,mel_floor:hn=1e-10,log_mel:fn=null,reference:co=1,min_value:lo=1e-10,db_range:fo=null,remove_dc_offset:ho=null,max_num_frames:mo=null,do_pad:Uo=!0,transpose:_d=!1}={}){const tp=st.length;if(on===null&&(on=nn),nn>on)throw Error(`frame_length (${nn}) may not be larger than fft_length (${on})`);if(tp!==nn)throw new Error(`Length of the window (${tp}) must equal frame_length (${nn})`);if(rn<=0)throw new Error("hop_length must be greater than zero");if(an===null&&uo!==null)throw new Error("You have provided `mel_filters` but `power` is `None`. Mel spectrogram computation is not yet supported for complex-valued spectrogram. Specify `power` to fix this issue.");if(sn){if(un!=="reflect")throw new Error(`pad_mode="${un}" not implemented yet.`);const cp=Math.floor((on-1)/2)+1;Mt=padReflect(Mt,cp,cp)}const ep=Math.floor(1+Math.floor((Mt.length-nn)/rn)),np=Xr?Math.floor(on/2)+1:on;let rp=ep,ip=ep;mo!==null&&(mo>ep?Uo&&(ip=mo):ip=rp=mo);const op=new FFT(on),ap=new Float64Array(on),sp=new Float64Array(op.outputBufferSize),up=new Array(rp);for(let cp=0;cp<rp;++cp){const fp=cp*rn;for(let mp=0;mp<nn;++mp)ap[mp]=Mt[fp+mp];if(ho){let mp=0;for(let _p=0;_p<nn;++_p)mp+=ap[_p];const xp=mp/nn;for(let _p=0;_p<nn;++_p)ap[_p]-=xp}if(to!==null){for(let mp=nn-1;mp>=1;--mp)ap[mp]-=to*ap[mp-1];ap[0]*=1-to}for(let mp=0;mp<st.length;++mp)ap[mp]*=st[mp];op.realTransform(sp,ap);const gp=new Array(np);for(let mp=0;mp<gp.length;++mp){const xp=mp<<1;gp[mp]=sp[xp]**2+sp[xp+1]**2}up[cp]=gp}if(an!==null&&an!==2){const cp=2/an;for(let fp=0;fp<up.length;++fp){const gp=up[fp];for(let mp=0;mp<gp.length;++mp)gp[mp]**=cp}}const pp=uo.length,lp=new Float32Array(pp*ip),dp=_d?[ip,pp]:[pp,ip];for(let cp=0;cp<pp;++cp){const fp=uo[cp];for(let gp=0;gp<rp;++gp){const mp=up[gp];let xp=0;for(let _p=0;_p<np;++_p)xp+=fp[_p]*mp[_p];lp[_d?gp*pp+cp:cp*rp+gp]=Math.max(hn,xp)}}if(an!==null&&fn!==null){const cp=Math.min(lp.length,rp*pp);switch(fn){case"log":for(let fp=0;fp<cp;++fp)lp[fp]=Math.log(lp[fp]);break;case"log10":for(let fp=0;fp<cp;++fp)lp[fp]=Math.log10(lp[fp]);break;case"dB":if(an===1)amplitude_to_db(lp,co,lo,fo);else if(an===2)power_to_db(lp,co,lo,fo);else throw new Error(`Cannot use log_mel option '${fn}' with power ${an}`);break;default:throw new Error(`log_mel must be one of null, 'log', 'log10' or 'dB'. Got '${fn}'`)}}return{data:lp,dims:dp}}function window_function(Mt,st,{periodic:nn=!0,frame_length:rn=null,center:on=!0}={}){const an=nn?Mt+1:Mt;let sn;switch(st){case"boxcar":sn=new Float64Array(an).fill(1);break;case"hann":case"hann_window":sn=hanning(an);break;case"povey":sn=hanning(an).map(un=>Math.pow(un,.85));break;default:throw new Error(`Unknown window type ${st}.`)}if(nn&&(sn=sn.subarray(0,Mt)),rn===null)return sn;if(Mt>rn)throw new Error(`Length of the window (${Mt}) may not be larger than frame_length (${rn})`);return sn}function center_to_corners_format([Mt,st,nn,rn]){return[Mt-nn/2,st-rn/2,Mt+nn/2,st+rn/2]}function post_process_object_detection(Mt,st=.5,nn=null,rn=!1){const on=Mt.logits,an=Mt.pred_boxes,[sn,un,Xr]=on.dims;if(nn!==null&&nn.length!==sn)throw Error("Make sure that you pass in as many target sizes as the batch dimension of the logits");let to=[];for(let uo=0;uo<sn;++uo){let hn=nn!==null?nn[uo]:null,fn={boxes:[],classes:[],scores:[]},co=on[uo],lo=an[uo];for(let fo=0;fo<un;++fo){let ho=co[fo],mo=[],Uo;if(rn){Uo=ho.sigmoid().data;for(let _d=0;_d<Uo.length;++_d)Uo[_d]>st&&mo.push(_d)}else{let _d=max$3(ho.data)[1];if(_d===Xr-1)continue;mo.push(_d),Uo=softmax(ho.data)}for(const _d of mo){let tp=lo[fo].data;tp=center_to_corners_format(tp),hn!==null&&(tp=tp.map((ep,np)=>ep*hn[(np+1)%2])),fn.boxes.push(tp),fn.classes.push(_d),fn.scores.push(Uo[_d])}}to.push(fn)}return to}function validate_audio_inputs(Mt,st){var nn;if(!(Mt instanceof Float32Array||Mt instanceof Float64Array))throw new Error(`${st} expects input to be a Float32Array or a Float64Array, but got ${((nn=Mt==null?void 0:Mt.constructor)==null?void 0:nn.name)??typeof Mt} instead. If using the feature extractor directly, remember to use \`read_audio(url, sampling_rate)\` to obtain the raw audio data of the file/url.`)}function constraint_to_multiple_of(Mt,st,nn=0,rn=null){const on=Mt/st;let an=bankers_round(on)*st;return rn!==null&&an>rn&&(an=Math.floor(on)*st),an<nn&&(an=Math.ceil(on)*st),an}function enforce_size_divisibility([Mt,st],nn){return[Math.max(Math.floor(Mt/nn),1)*nn,Math.max(Math.floor(st/nn),1)*nn]}class FeatureExtractor extends Callable{constructor(st){super(),this.config=st}}class ImageFeatureExtractor extends FeatureExtractor{constructor(st){super(st),this.image_mean=this.config.image_mean??this.config.mean,this.image_std=this.config.image_std??this.config.std,this.resample=this.config.resample??2,this.do_rescale=this.config.do_rescale??!0,this.rescale_factor=this.config.rescale_factor??1/255,this.do_normalize=this.config.do_normalize,this.do_resize=this.config.do_resize,this.do_thumbnail=this.config.do_thumbnail,this.size=this.config.size,this.size_divisibility=this.config.size_divisibility??this.config.size_divisor,this.do_center_crop=this.config.do_center_crop,this.crop_size=this.config.crop_size,this.do_convert_rgb=this.config.do_convert_rgb??!0,this.do_crop_margin=this.config.do_crop_margin,this.pad_size=this.config.pad_size,this.do_pad=this.config.do_pad,this.do_pad&&!this.pad_size&&this.size&&this.size.width!==void 0&&this.size.height!==void 0&&(this.pad_size=this.size),this.do_flip_channel_order=this.config.do_flip_channel_order??!1}async thumbnail(st,nn,rn=2){const on=st.height,an=st.width,sn=nn.height,un=nn.width;let Xr=Math.min(on,sn),to=Math.min(an,un);return Xr===on&&to===an?st:(on>an?to=Math.floor(an*Xr/on):an>on&&(Xr=Math.floor(on*to/an)),await st.resize(to,Xr,{resample:rn}))}async crop_margin(st,nn=200){const rn=st.clone().grayscale(),on=min$3(rn.data)[0],sn=max$3(rn.data)[0]-on;if(sn===0)return st;const un=nn/255;let Xr=rn.width,to=rn.height,uo=0,hn=0;for(let fn=0;fn<rn.height;++fn){const co=fn*rn.width;for(let lo=0;lo<rn.width;++lo)(rn.data[co+lo]-on)/sn<un&&(Xr=Math.min(Xr,lo),to=Math.min(to,fn),uo=Math.max(uo,lo),hn=Math.max(hn,fn))}return st=await st.crop([Xr,to,uo,hn]),st}pad_image(st,nn,rn,{mode:on="constant",center:an=!1,constant_values:sn=0}={}){const[un,Xr,to]=nn;let uo,hn;if(typeof rn=="number"?(uo=rn,hn=rn):(uo=rn.width,hn=rn.height),uo!==Xr||hn!==un){const fn=new Float32Array(uo*hn*to);if(Array.isArray(sn))for(let fo=0;fo<fn.length;++fo)fn[fo]=sn[fo%to];else sn!==0&&fn.fill(sn);const[co,lo]=an?[Math.floor((uo-Xr)/2),Math.floor((hn-un)/2)]:[0,0];for(let fo=0;fo<un;++fo){const ho=(fo+lo)*uo,mo=fo*Xr;for(let Uo=0;Uo<Xr;++Uo){const _d=(ho+Uo+co)*to,tp=(mo+Uo)*to;for(let ep=0;ep<to;++ep)fn[_d+ep]=st[tp+ep]}}if(on==="symmetric"){if(an)throw new Error("`center` padding is not supported when `mode` is set to `symmetric`.");const fo=un-1,ho=Xr-1;for(let mo=0;mo<hn;++mo){const Uo=mo*uo,_d=calculateReflectOffset(mo,fo)*Xr;for(let tp=0;tp<uo;++tp){if(mo<un&&tp<Xr)continue;const ep=(Uo+tp)*to,np=(_d+calculateReflectOffset(tp,ho))*to;for(let rp=0;rp<to;++rp)fn[ep+rp]=st[np+rp]}}}st=fn,nn=[hn,uo,to]}return[st,nn]}rescale(st){for(let nn=0;nn<st.length;++nn)st[nn]=this.rescale_factor*st[nn]}get_resize_output_image_size(st,nn){const[rn,on]=st.size;let an,sn;if(this.do_thumbnail){const{height:un,width:Xr}=nn;an=Math.min(un,Xr)}else Number.isInteger(nn)?(an=nn,sn=this.config.max_size??an):nn!==void 0&&(an=nn.shortest_edge,sn=nn.longest_edge);if(an!==void 0||sn!==void 0){const un=an===void 0?1:Math.max(an/rn,an/on),Xr=rn*un,to=on*un,uo=sn===void 0?1:Math.min(sn/Xr,sn/to);let hn=Math.floor(Number((Xr*uo).toFixed(2))),fn=Math.floor(Number((to*uo).toFixed(2)));return this.size_divisibility!==void 0&&([hn,fn]=enforce_size_divisibility([hn,fn],this.size_divisibility)),[hn,fn]}else if(nn!==void 0&&nn.width!==void 0&&nn.height!==void 0){let un=nn.width,Xr=nn.height;if(this.config.keep_aspect_ratio&&this.config.ensure_multiple_of){let to=Xr/on,uo=un/rn;Math.abs(1-uo)<Math.abs(1-to)?to=uo:uo=to,Xr=constraint_to_multiple_of(to*on,this.config.ensure_multiple_of),un=constraint_to_multiple_of(uo*rn,this.config.ensure_multiple_of)}return[un,Xr]}else{if(this.size_divisibility!==void 0)return enforce_size_divisibility([rn,on],this.size_divisibility);throw new Error(`Could not resize image due to unsupported \`this.size\` option in config: ${JSON.stringify(nn)}`)}}async resize(st){const[nn,rn]=this.get_resize_output_image_size(st,this.size);return await st.resize(nn,rn,{resample:this.resample})}async preprocess(st,{do_normalize:nn=null,do_pad:rn=null,do_convert_rgb:on=null,do_convert_grayscale:an=null,do_flip_channel_order:sn=null}={}){this.do_crop_margin&&(st=await this.crop_margin(st));const[un,Xr]=st.size;if(on??this.do_convert_rgb?st=st.rgb():an&&(st=st.grayscale()),this.do_resize&&(st=await this.resize(st)),this.do_thumbnail&&(st=await this.thumbnail(st,this.size,this.resample)),this.do_center_crop){let co,lo;Number.isInteger(this.crop_size)?(co=this.crop_size,lo=this.crop_size):(co=this.crop_size.width,lo=this.crop_size.height),st=await st.center_crop(co,lo)}const to=[st.height,st.width];let uo=Float32Array.from(st.data),hn=[st.height,st.width,st.channels];if(this.do_rescale&&this.rescale(uo),nn??this.do_normalize){let co=this.image_mean;Array.isArray(this.image_mean)||(co=new Array(st.channels).fill(co));let lo=this.image_std;if(Array.isArray(this.image_std)||(lo=new Array(st.channels).fill(co)),co.length!==st.channels||lo.length!==st.channels)throw new Error(`When set to arrays, the length of \`image_mean\` (${co.length}) and \`image_std\` (${lo.length}) must match the number of channels in the image (${st.channels}).`);for(let fo=0;fo<uo.length;fo+=st.channels)for(let ho=0;ho<st.channels;++ho)uo[fo+ho]=(uo[fo+ho]-co[ho])/lo[ho]}if(rn??this.do_pad){if(this.pad_size)[uo,hn]=this.pad_image(uo,[st.height,st.width,st.channels],this.pad_size);else if(this.size_divisibility){const[co,lo]=enforce_size_divisibility([hn[1],hn[0]],this.size_divisibility);[uo,hn]=this.pad_image(uo,hn,{width:co,height:lo})}}if(sn??this.do_flip_channel_order){if(hn[2]!==3)throw new Error("Flipping channel order is only supported for RGB images.");for(let co=0;co<uo.length;co+=3){const lo=uo[co];uo[co]=uo[co+2],uo[co+2]=lo}}const fn=new Tensor("float32",uo,hn).permute(2,0,1);return{original_size:[Xr,un],reshaped_input_size:to,pixel_values:fn}}async _call(st,...nn){Array.isArray(st)||(st=[st]);const rn=await Promise.all(st.map(an=>this.preprocess(an)));return{pixel_values:stack(rn.map(an=>an.pixel_values),0),original_sizes:rn.map(an=>an.original_size),reshaped_input_sizes:rn.map(an=>an.reshaped_input_size)}}}class SegformerFeatureExtractor extends ImageFeatureExtractor{post_process_semantic_segmentation(st,nn=null){const rn=st.logits,on=rn.dims[0];if(nn!==null&&nn.length!==on)throw Error("Make sure that you pass in as many target sizes as the batch dimension of the logits");const an=[];for(let sn=0;sn<on;++sn){const un=nn!==null?nn[sn]:null;let Xr=rn[sn];un!==null&&(Xr=interpolate$1(Xr,un,"bilinear",!1));const[to,uo]=un??Xr.dims.slice(-2),hn=new Tensor("int32",new Int32Array(to*uo),[to,uo]),fn=Xr[0].data;for(let ho=1;ho<Xr.dims[0];++ho){const mo=Xr[ho].data;for(let Uo=0;Uo<mo.length;++Uo)mo[Uo]>fn[Uo]&&(fn[Uo]=mo[Uo],hn.data[Uo]=ho)}const co=new Array(Xr.dims[0]),lo=hn.data;for(let ho=0;ho<lo.length;++ho){const mo=lo[ho];co[mo]=mo}const fo=co.filter(ho=>ho!==void 0);an.push({segmentation:hn,labels:fo})}return an}}class DPTFeatureExtractor extends ImageFeatureExtractor{}class DPTImageProcessor extends DPTFeatureExtractor{}class BitImageProcessor extends ImageFeatureExtractor{}class GLPNFeatureExtractor extends ImageFeatureExtractor{}class CLIPFeatureExtractor extends ImageFeatureExtractor{}class ChineseCLIPFeatureExtractor extends ImageFeatureExtractor{}class SiglipImageProcessor extends ImageFeatureExtractor{}class ConvNextFeatureExtractor extends ImageFeatureExtractor{constructor(st){super(st),this.crop_pct=this.config.crop_pct??224/256}async resize(st){var rn;const nn=(rn=this.size)==null?void 0:rn.shortest_edge;if(nn===void 0)throw new Error("Size dictionary must contain 'shortest_edge' key.");if(nn<384){const on=Math.floor(nn/this.crop_pct),[an,sn]=this.get_resize_output_image_size(st,{shortest_edge:on});st=await st.resize(an,sn,{resample:this.resample}),st=await st.center_crop(nn,nn)}else st=await st.resize(nn,nn,{resample:this.resample});return st}}class ConvNextImageProcessor extends ConvNextFeatureExtractor{}class ViTFeatureExtractor extends ImageFeatureExtractor{}class ViTImageProcessor extends ImageFeatureExtractor{}class EfficientNetImageProcessor extends ImageFeatureExtractor{constructor(st){super(st),this.include_top=this.config.include_top??!0,this.include_top&&(this.image_std=this.image_std.map(nn=>nn*nn))}}class MobileViTFeatureExtractor extends ImageFeatureExtractor{}class MobileViTImageProcessor extends MobileViTFeatureExtractor{}class OwlViTFeatureExtractor extends ImageFeatureExtractor{post_process_object_detection(...st){return post_process_object_detection(...st)}}class Owlv2ImageProcessor extends OwlViTFeatureExtractor{}class DeiTFeatureExtractor extends ImageFeatureExtractor{}class BeitFeatureExtractor extends ImageFeatureExtractor{}class DonutFeatureExtractor extends ImageFeatureExtractor{pad_image(st,nn,rn,on={}){const[an,sn,un]=nn;let Xr=this.image_mean;Array.isArray(this.image_mean)||(Xr=new Array(un).fill(Xr));let to=this.image_std;Array.isArray(to)||(to=new Array(un).fill(Xr));const uo=Xr.map((hn,fn)=>-hn/to[fn]);return super.pad_image(st,nn,rn,{center:!0,constant_values:uo,...on})}}class NougatImageProcessor extends DonutFeatureExtractor{}class DetrFeatureExtractor extends ImageFeatureExtractor{async _call(st){const nn=await super._call(st),rn=[nn.pixel_values.dims[0],64,64],on=new Tensor("int64",new BigInt64Array(rn.reduce((an,sn)=>an*sn)).fill(1n),rn);return{...nn,pixel_mask:on}}post_process_object_detection(...st){return post_process_object_detection(...st)}remove_low_and_no_objects(st,nn,rn,on){let an=[],sn=[],un=[];for(let Xr=0;Xr<st.dims[0];++Xr){let to=st[Xr],uo=nn[Xr],hn=max$3(to.data)[1];if(hn===on)continue;let co=softmax(to.data)[hn];co>rn&&(an.push(uo),sn.push(co),un.push(hn))}return[an,sn,un]}check_segment_validity(st,nn,rn,on=.5,an=.8){let sn=[],un=0,Xr=0;for(let uo=0;uo<st.length;++uo)st[uo]===rn&&(sn.push(uo),++un),nn[rn].data[uo]>=on&&++Xr;let to=un>0&&Xr>0;return to&&(to=un/Xr>an),[to,sn]}compute_segments(st,nn,rn,on,an,sn=null,un=null){let[Xr,to]=un??st[0].dims,uo=new Tensor("int32",new Int32Array(Xr*to),[Xr,to]),hn=[];if(un!==null)for(let fo=0;fo<st.length;++fo)st[fo]=interpolate$1(st[fo],un,"bilinear",!1);let fn=new Int32Array(st[0].data.length),co=new Float32Array(st[0].data.length);for(let fo=0;fo<st.length;++fo){let ho=nn[fo];for(let mo=0;mo<st[fo].data.length;++mo)st[fo].data[mo]*=ho,st[fo].data[mo]>co[mo]&&(fn[mo]=fo,co[mo]=st[fo].data[mo])}let lo=0;for(let fo=0;fo<rn.length;++fo){let ho=rn[fo],[mo,Uo]=this.check_segment_validity(fn,st,fo,on,an);if(mo){++lo;for(let _d of Uo)uo.data[_d]=lo;hn.push({id:lo,label_id:ho,score:nn[fo]})}}return[uo,hn]}post_process_panoptic_segmentation(st,nn=.5,rn=.5,on=.8,an=null,sn=null){an===null&&(console.warn("`label_ids_to_fuse` unset. No instance will be fused."),an=new Set);const un=st.logits,to=st.pred_masks.sigmoid();let[uo,hn,fn]=un.dims;if(fn-=1,sn!==null&&sn.length!==uo)throw Error("Make sure that you pass in as many target sizes as the batch dimension of the logits");let co=[];for(let lo=0;lo<uo;++lo){let fo=sn!==null?sn[lo]:null,ho=un[lo],mo=to[lo],[Uo,_d,tp]=this.remove_low_and_no_objects(ho,mo,nn,fn);if(tp.length===0){let[rp,ip]=fo??mo.dims.slice(-2),op=new Tensor("int32",new Int32Array(rp*ip).fill(-1),[rp,ip]);co.push({segmentation:op,segments_info:[]});continue}let[ep,np]=this.compute_segments(Uo,_d,tp,rn,on,an,fo);co.push({segmentation:ep,segments_info:np})}return co}post_process_instance_segmentation(){throw Error("Not implemented yet")}}class YolosFeatureExtractor extends ImageFeatureExtractor{post_process_object_detection(...st){return post_process_object_detection(...st)}}class SamImageProcessor extends ImageFeatureExtractor{reshape_input_points(st,nn,rn){st=structuredClone(st);let on=calculateDimensions(st);if(on.length===3)on=[1,...on],st=[st];else if(on.length!==4)throw Error("The input_points must be a 4D tensor of shape `batch_size`, `point_batch_size`, `nb_points_per_image`, `2`.");for(let an=0;an<st.length;++an){let sn=nn[an],un=rn[an],Xr=[un[0]/sn[0],un[1]/sn[1]];for(let to=0;to<st[an].length;++to)for(let uo=0;uo<st[an][to].length;++uo)for(let hn=0;hn<st[an][to][uo].length;++hn)st[an][to][uo][hn]*=Xr[hn]}return new Tensor("float32",Float32Array.from(st.flat(1/0)),on)}add_input_labels(st,nn){let rn=calculateDimensions(st);if(rn.length===2)rn=[1,...rn],st=[st];else if(rn.length!==3)throw Error("The input_points must be a 4D tensor of shape `batch_size`, `point_batch_size`, `nb_points_per_image`, `2`.");if(rn.some((on,an)=>on!==nn.dims[an]))throw Error(`The first ${rn.length} dimensions of 'input_points' and 'input_labels' must be the same.`);return new Tensor("int64",st.flat(1/0).map(BigInt),rn)}async _call(st,nn=null,rn=null){const on=await super._call(st);if(nn&&(on.input_points=this.reshape_input_points(nn,on.original_sizes,on.reshaped_input_sizes)),rn){if(!on.input_points)throw Error("`input_points` must be provided if `input_labels` are provided.");on.input_labels=this.add_input_labels(rn,on.input_points)}return on}post_process_masks(st,nn,rn,{mask_threshold:on=0,binarize:an=!0,pad_size:sn=null}={}){const un=[];sn=sn??this.pad_size;const Xr=[sn.height,sn.width];for(let to=0;to<nn.length;++to){const uo=nn[to],hn=rn[to],fn=st[to],co=[];for(let lo=0;lo<fn.dims[0];++lo){const fo=fn[lo];let ho=interpolate$1(fo,Xr,"bilinear",!1);if(ho=ho.slice(null,[0,hn[0]],[0,hn[1]]),ho=interpolate$1(ho,uo,"bilinear",!1),an){const mo=new Uint8Array(ho.data.length);for(let Uo=0;Uo<ho.data.length;++Uo)ho.data[Uo]>on&&(mo[Uo]=1);ho=new Tensor("bool",mo,ho.dims)}co.push(ho)}un.push(stack(co))}return un}}class Swin2SRImageProcessor extends ImageFeatureExtractor{pad_image(st,nn,rn,on={}){const[an,sn,un]=nn;return super.pad_image(st,nn,{width:sn+(rn-sn%rn)%rn,height:an+(rn-an%rn)%rn},{mode:"symmetric",center:!1,constant_values:-1,...on})}}class VitMatteImageProcessor extends ImageFeatureExtractor{async _call(st,nn){Array.isArray(st)||(st=[st]),Array.isArray(nn)||(nn=[nn]);const rn=await Promise.all(st.map(sn=>this.preprocess(sn))),on=await Promise.all(nn.map(sn=>this.preprocess(sn,{do_normalize:!1,do_convert_rgb:!1,do_convert_grayscale:!0})));return{pixel_values:stack(rn.map((sn,un)=>cat([sn.pixel_values,on[un].pixel_values],0)),0),original_sizes:rn.map(sn=>sn.original_size),reshaped_input_sizes:rn.map(sn=>sn.reshaped_input_size)}}}class WhisperFeatureExtractor extends FeatureExtractor{constructor(st){var nn;super(st),(nn=this.config).mel_filters??(nn.mel_filters=mel_filter_bank(Math.floor(1+this.config.n_fft/2),this.config.feature_size,0,8e3,this.config.sampling_rate,"slaney","slaney")),this.window=window_function(this.config.n_fft,"hann")}_extract_fbank_features(st){const{data:nn,dims:rn}=spectrogram(st,this.window,this.config.n_fft,this.config.hop_length,{power:2,mel_filters:this.config.mel_filters,log_mel:"log10",max_num_frames:this.config.nb_max_frames}),on=max$3(nn)[0];for(let an=0;an<nn.length;++an)nn[an]=(Math.max(nn[an],on-8)+4)/4;return{data:nn,dims:rn}}async _call(st){validate_audio_inputs(st,"WhisperFeatureExtractor");let nn;st.length>this.config.n_samples?(console.warn("Attempting to extract features for audio longer than 30 seconds. If using a pipeline to extract transcript from a long audio clip, remember to specify `chunk_length_s` and/or `stride_length_s`."),nn=st.slice(0,this.config.n_samples)):(nn=new Float32Array(this.config.n_samples),nn.set(st));const{data:rn,dims:on}=this._extract_fbank_features(nn);return{input_features:new Tensor("float32",rn,[1,...on])}}}class Wav2Vec2FeatureExtractor extends FeatureExtractor{_zero_mean_unit_var_norm(st){const rn=st.reduce((an,sn)=>an+sn,0)/st.length,on=st.reduce((an,sn)=>an+(sn-rn)**2,0)/st.length;return st.map(an=>(an-rn)/Math.sqrt(on+1e-7))}async _call(st){validate_audio_inputs(st,"Wav2Vec2FeatureExtractor"),st instanceof Float64Array&&(st=new Float32Array(st));let nn=st;this.config.do_normalize&&(nn=this._zero_mean_unit_var_norm(nn));const rn=[1,nn.length];return{input_values:new Tensor("float32",nn,rn),attention_mask:new Tensor("int64",new BigInt64Array(nn.length).fill(1n),rn)}}}class SeamlessM4TFeatureExtractor extends FeatureExtractor{constructor(st){super(st);const nn=this.config.sampling_rate,rn=mel_filter_bank(256,this.config.num_mel_bins,20,Math.floor(nn/2),nn,null,"kaldi",!0);for(let on=0;on<rn.length;++on)rn[on].push(0);this.mel_filters=rn,this.window=window_function(400,"povey",{periodic:!1})}_extract_fbank_features(st,nn){return st=st.map(rn=>rn*32768),spectrogram(st,this.window,400,160,{fft_length:512,power:2,center:!1,preemphasis:.97,mel_filters:this.mel_filters,log_mel:"log",mel_floor:1192092955078125e-22,remove_dc_offset:!0,max_num_frames:nn,transpose:!0})}async _call(st,{padding:nn=!0,pad_to_multiple_of:rn=2,do_normalize_per_mel_bins:on=!0,return_attention_mask:an=!0}={}){validate_audio_inputs(st,"SeamlessM4TFeatureExtractor");let sn=this._extract_fbank_features(st,this.config.max_length);if(on){const[lo,fo]=sn.dims;for(let ho=0;ho<fo;++ho){let mo=0;for(let ep=0;ep<lo;++ep)mo+=sn.data[ep*fo+ho];const Uo=mo/lo;let _d=0;for(let ep=0;ep<lo;++ep)_d+=(sn.data[ep*fo+ho]-Uo)**2;_d/=lo-1;const tp=Math.sqrt(_d+1e-7);for(let ep=0;ep<lo;++ep){const np=ep*fo+ho;sn.data[np]=(sn.data[np]-Uo)/tp}}}let un;if(nn){const[lo,fo]=sn.dims,ho=lo%rn;if(ho>0){const mo=new Float32Array(fo*(lo+ho));mo.set(sn.data),mo.fill(this.config.padding_value,sn.data.length);const Uo=lo+ho;sn={data:mo,dims:[Uo,fo]},an&&(un=new Tensor("int64",new BigInt64Array(Uo),[1,Uo]),un.data.fill(1n,0,lo))}}const[Xr,to]=sn.dims,uo=this.config.stride;if(Xr%uo!==0)throw new Error(`The number of frames (${Xr}) must be a multiple of the stride (${uo}).`);const fn=new Tensor("float32",sn.data,sn.dims).view(1,Math.floor(Xr/uo),to*uo),co={input_features:fn};if(an){const lo=fn.dims[1],fo=new Tensor("int64",new BigInt64Array(lo),[1,lo]);if(un)for(let ho=1,mo=0;ho<Xr;ho+=uo,++mo)fo.data[mo]=un.data[ho];else fo.data.fill(1n);co.attention_mask=fo}return co}}class ASTFeatureExtractor extends FeatureExtractor{constructor(st){super(st);const nn=this.config.sampling_rate,rn=mel_filter_bank(256,this.config.num_mel_bins,20,Math.floor(nn/2),nn,null,"kaldi",!0);for(let on=0;on<rn.length;++on)rn[on].push(0);this.mel_filters=rn,this.window=window_function(400,"hann",{periodic:!1}),this.mean=this.config.mean,this.std=this.config.std}_extract_fbank_features(st,nn){return spectrogram(st,this.window,400,160,{fft_length:512,power:2,center:!1,preemphasis:.97,mel_filters:this.mel_filters,log_mel:"log",mel_floor:1192092955078125e-22,remove_dc_offset:!0,max_num_frames:nn,transpose:!0})}async _call(st){validate_audio_inputs(st,"ASTFeatureExtractor");const nn=this._extract_fbank_features(st,this.config.max_length);if(this.config.do_normalize){const rn=this.std*2;for(let on=0;on<nn.data.length;++on)nn.data[on]=(nn.data[on]-this.mean)/rn}return{input_values:new Tensor("float32",nn.data,[1,...nn.dims])}}}class ClapFeatureExtractor extends FeatureExtractor{constructor(st){super(st),this.mel_filters=mel_filter_bank(this.config.nb_frequency_bins,this.config.feature_size,this.config.frequency_min,this.config.frequency_max,this.config.sampling_rate,null,"htk"),this.mel_filters_slaney=mel_filter_bank(this.config.nb_frequency_bins,this.config.feature_size,this.config.frequency_min,this.config.frequency_max,this.config.sampling_rate,"slaney","slaney"),this.window=window_function(this.config.fft_window_size,"hann")}_get_input_mel(st,nn,rn,on){let an,sn=!1;const un=st.length-nn;if(un>0)if(rn==="rand_trunc"){sn=!0;const Xr=Math.floor(Math.random()*(un+1));st=st.subarray(Xr,Xr+nn),an=this._extract_fbank_features(st,this.mel_filters_slaney,this.config.nb_max_samples),an.dims=[1,...an.dims]}else throw new Error(`Truncation strategy "${rn}" not implemented`);else{if(un<0){let Xr=new Float64Array(nn);if(Xr.set(st),on==="repeat")for(let to=st.length;to<nn;to+=st.length)Xr.set(st.subarray(0,Math.min(st.length,nn-to)),to);else if(on==="repeatpad")for(let to=st.length;to<-un;to+=st.length)Xr.set(st,to);st=Xr}if(rn==="fusion")throw new Error(`Truncation strategy "${rn}" not implemented`);an=this._extract_fbank_features(st,this.mel_filters_slaney,this.config.nb_max_samples),an.dims=[1,...an.dims]}return{...an,longer:sn}}_extract_fbank_features(st,nn,rn=null){return spectrogram(st,this.window,this.config.fft_window_size,this.config.hop_length,{power:2,mel_filters:nn,log_mel:"dB",max_num_frames:rn,do_pad:!1,transpose:!0})}async _call(st,{max_length:nn=null}={}){validate_audio_inputs(st,"ClapFeatureExtractor");const rn=this._get_input_mel(st,nn??this.config.nb_max_samples,this.config.truncation,this.config.padding);return{input_features:new Tensor("float32",rn.data,[1,...rn.dims])}}}class SpeechT5FeatureExtractor extends FeatureExtractor{}class Processor extends Callable{constructor(st){super(),this.feature_extractor=st}async _call(st,...nn){return await this.feature_extractor(st,...nn)}}class SamProcessor extends Processor{async _call(...st){return await this.feature_extractor(...st)}post_process_masks(...st){return this.feature_extractor.post_process_masks(...st)}reshape_input_points(...st){return this.feature_extractor.reshape_input_points(...st)}}class WhisperProcessor extends Processor{async _call(st){return await this.feature_extractor(st)}}class Wav2Vec2ProcessorWithLM extends Processor{async _call(st){return await this.feature_extractor(st)}}class SpeechT5Processor extends Processor{async _call(st){return await this.feature_extractor(st)}}class OwlViTProcessor extends Processor{}class AutoProcessor{static async from_pretrained(st,{progress_callback:nn=null,config:rn=null,cache_dir:on=null,local_files_only:an=!1,revision:sn="main"}={}){let un=rn??await getModelJSON(st,"preprocessor_config.json",!0,{progress_callback:nn,config:rn,cache_dir:on,local_files_only:an,revision:sn}),Xr=un.feature_extractor_type??un.image_processor_type,to=this.FEATURE_EXTRACTOR_CLASS_MAPPING[Xr];if(!to)if(un.size!==void 0)console.warn(`Feature extractor type "${Xr}" not found, assuming ImageFeatureExtractor due to size parameter in config.`),to=ImageFeatureExtractor;else throw new Error(`Unknown Feature Extractor type: ${Xr}`);let uo=this.PROCESSOR_CLASS_MAPPING[un.processor_class]??Processor,hn=new to(un);return new uo(hn)}}Fp(AutoProcessor,"FEATURE_EXTRACTOR_CLASS_MAPPING",{ImageFeatureExtractor,WhisperFeatureExtractor,ViTFeatureExtractor,MobileViTFeatureExtractor,MobileViTImageProcessor,OwlViTFeatureExtractor,Owlv2ImageProcessor,CLIPFeatureExtractor,ChineseCLIPFeatureExtractor,SiglipImageProcessor,ConvNextFeatureExtractor,ConvNextImageProcessor,SegformerFeatureExtractor,BitImageProcessor,DPTImageProcessor,DPTFeatureExtractor,GLPNFeatureExtractor,BeitFeatureExtractor,DeiTFeatureExtractor,DetrFeatureExtractor,YolosFeatureExtractor,DonutFeatureExtractor,NougatImageProcessor,EfficientNetImageProcessor,ViTImageProcessor,VitMatteImageProcessor,SamImageProcessor,Swin2SRImageProcessor,Wav2Vec2FeatureExtractor,SeamlessM4TFeatureExtractor,SpeechT5FeatureExtractor,ASTFeatureExtractor,ClapFeatureExtractor}),Fp(AutoProcessor,"PROCESSOR_CLASS_MAPPING",{WhisperProcessor,Wav2Vec2ProcessorWithLM,SamProcessor,SpeechT5Processor,OwlViTProcessor});async function prepareImages(Mt){return Array.isArray(Mt)||(Mt=[Mt]),await Promise.all(Mt.map(st=>RawImage.read(st)))}async function prepareAudios(Mt,st){return Array.isArray(Mt)||(Mt=[Mt]),await Promise.all(Mt.map(nn=>typeof nn=="string"||nn instanceof URL?read_audio(nn,st):nn instanceof Float64Array?new Float32Array(nn):nn))}function get_bounding_box(Mt,st){st&&(Mt=Mt.map(sn=>sn|0));const[nn,rn,on,an]=Mt;return{xmin:nn,ymin:rn,xmax:on,ymax:an}}class Pipeline extends Callable{constructor({task:st,model:nn,tokenizer:rn=null,processor:on=null}){super(),this.task=st,this.model=nn,this.tokenizer=rn,this.processor=on}async dispose(){await this.model.dispose()}}class TextClassificationPipeline extends Pipeline{constructor(st){super(st)}async _call(st,{topk:nn=1}={}){const rn=this.tokenizer(st,{padding:!0,truncation:!0}),on=await this.model(rn),an=this.model.config.problem_type==="multi_label_classification"?Xr=>Xr.sigmoid().data:Xr=>softmax(Xr.data),sn=this.model.config.id2label,un=[];for(const Xr of on.logits){const to=an(Xr),hn=getTopItems(to,nn).map(fn=>({label:sn[fn[0]],score:fn[1]}));nn===1?un.push(...hn):un.push(hn)}return Array.isArray(st)||nn===1?un:un[0]}}class TokenClassificationPipeline extends Pipeline{constructor(st){super(st)}async _call(st,{ignore_labels:nn=["O"]}={}){const rn=Array.isArray(st),on=this.tokenizer(rn?st:[st],{padding:!0,truncation:!0}),sn=(await this.model(on)).logits,un=this.model.config.id2label,Xr=[];for(let to=0;to<sn.dims[0];++to){const uo=on.input_ids[to],hn=sn[to],fn=[];for(let co=0;co<hn.dims[0];++co){const lo=hn[co],fo=max$3(lo.data)[1],ho=un?un[fo]:`LABEL_${fo}`;if(nn.includes(ho))continue;const mo=this.tokenizer.decode([uo[co].item()],{skip_special_tokens:!0});if(mo==="")continue;const Uo=softmax(lo.data);fn.push({entity:ho,score:Uo[fo],index:co,word:mo,start:null,end:null})}Xr.push(fn)}return rn?Xr:Xr[0]}}class QuestionAnsweringPipeline extends Pipeline{constructor(st){super(st)}async _call(st,nn,{topk:rn=1}={}){const on=this.tokenizer(st,{text_pair:nn,padding:!0,truncation:!0}),an=await this.model(on),sn=[];for(let un=0;un<an.start_logits.dims[0];++un){const Xr=on.input_ids[un],to=Xr.indexOf(this.tokenizer.sep_token_id),uo=Array.from(softmax(an.start_logits[un].data)).map((co,lo)=>[co,lo]).filter(co=>co[1]>to),hn=Array.from(softmax(an.end_logits[un].data)).map((co,lo)=>[co,lo]).filter(co=>co[1]>to),fn=product(uo,hn).filter(co=>co[0][1]<=co[1][1]).map(co=>[co[0][1],co[1][1],co[0][0]*co[1][0]]).sort((co,lo)=>lo[2]-co[2]);for(let co=0;co<Math.min(fn.length,rn);++co){const[lo,fo,ho]=fn[co],mo=[...Xr].slice(lo,fo+1),Uo=this.tokenizer.decode(mo,{skip_special_tokens:!0});sn.push({answer:Uo,score:ho})}}return rn===1?sn[0]:sn}}class FillMaskPipeline extends Pipeline{constructor(st){super(st)}async _call(st,{topk:nn=5}={}){const rn=this.tokenizer(st,{padding:!0,truncation:!0}),on=await this.model(rn),an=[];for(let sn=0;sn<rn.input_ids.dims[0];++sn){const un=rn.input_ids[sn],Xr=un.indexOf(this.tokenizer.mask_token_id);if(Xr===-1)throw Error(`Mask token (${this.tokenizer.mask_token}) not found in text.`);const uo=on.logits[sn][Xr],hn=getTopItems(softmax(uo.data),nn);an.push(hn.map(fn=>{const co=[...un];return co[Xr]=fn[0],{score:fn[1],token:fn[0],token_str:this.tokenizer.model.vocab[fn[0]],sequence:this.tokenizer.decode(co,{skip_special_tokens:!0})}}))}return Array.isArray(st)?an:an[0]}}class Text2TextGenerationPipeline extends Pipeline{constructor(nn){super(nn);Fp(this,"_key","generated_text")}async _call(nn,rn={}){Array.isArray(nn)||(nn=[nn]),this.model.config.prefix&&(nn=nn.map(to=>this.model.config.prefix+to));const on=this.model.config.task_specific_params;on&&on[this.task]&&on[this.task].prefix&&(nn=nn.map(to=>on[this.task].prefix+to));const an=this.tokenizer,sn={padding:!0,truncation:!0};let un;this instanceof TranslationPipeline&&"_build_translation_inputs"in an?un=an._build_translation_inputs(nn,sn,rn).input_ids:un=an(nn,sn).input_ids;const Xr=await this.model.generate(un,rn);return an.batch_decode(Xr,{skip_special_tokens:!0}).map(to=>({[this._key]:to}))}}class SummarizationPipeline extends Text2TextGenerationPipeline{constructor(nn){super(nn);Fp(this,"_key","summary_text")}}class TranslationPipeline extends Text2TextGenerationPipeline{constructor(nn){super(nn);Fp(this,"_key","translation_text")}}function isChat(Mt){return Array.isArray(Mt)&&Mt.every(st=>"role"in st&&"content"in st)}class TextGenerationPipeline extends Pipeline{constructor(st){super(st)}async _call(st,nn={}){let rn=!1,on=!1,an;if(typeof st=="string")an=st=[st];else if(Array.isArray(st)&&st.every(lo=>typeof lo=="string"))rn=!0,an=st;else{if(isChat(st))st=[st];else if(Array.isArray(st)&&st.every(isChat))rn=!0;else throw new Error("Input must be a string, an array of strings, a Chat, or an array of Chats");on=!0,an=st.map(lo=>this.tokenizer.apply_chat_template(lo,{tokenize:!1,add_generation_prompt:!0}))}const sn=nn.add_special_tokens??!1,un=on?!1:nn.return_full_text??!0;this.tokenizer.padding_side="left";const{input_ids:Xr,attention_mask:to}=this.tokenizer(an,{add_special_tokens:sn,padding:!0,truncation:!0}),uo=await this.model.generate(Xr,nn,null,{inputs_attention_mask:to});let hn=this.tokenizer.batch_decode(uo,{skip_special_tokens:!0}),fn;!un&&Xr.dims.at(-1)>0&&(fn=this.tokenizer.batch_decode(Xr,{skip_special_tokens:!0}).map(lo=>lo.length));const co=Array.from({length:st.length},lo=>[]);for(let lo=0;lo<hn.length;++lo){const fo=Math.floor(lo/uo.length*st.length);fn&&(hn[lo]=hn[lo].slice(fn[fo])),co[fo].push({generated_text:on?[...st[fo],{role:"assistant",content:hn[lo]}]:hn[lo]})}return!rn&&co.length===1?co[0]:co}}class ZeroShotClassificationPipeline extends Pipeline{constructor(st){super(st),this.label2id=Object.fromEntries(Object.entries(this.model.config.label2id).map(([nn,rn])=>[nn.toLowerCase(),rn])),this.entailment_id=this.label2id.entailment,this.entailment_id===void 0&&(console.warn("Could not find 'entailment' in label2id mapping. Using 2 as entailment_id."),this.entailment_id=2),this.contradiction_id=this.label2id.contradiction??this.label2id.not_entailment,this.contradiction_id===void 0&&(console.warn("Could not find 'contradiction' in label2id mapping. Using 0 as contradiction_id."),this.contradiction_id=0)}async _call(st,nn,{hypothesis_template:rn="This example is {}.",multi_label:on=!1}={}){const an=Array.isArray(st);an||(st=[st]),Array.isArray(nn)||(nn=[nn]);const sn=nn.map(to=>rn.replace("{}",to)),un=on||nn.length===1,Xr=[];for(const to of st){const uo=[];for(const co of sn){const lo=this.tokenizer(to,{text_pair:co,padding:!0,truncation:!0}),fo=await this.model(lo);un?uo.push([fo.logits.data[this.contradiction_id],fo.logits.data[this.entailment_id]]):uo.push(fo.logits.data[this.entailment_id])}const fn=(un?uo.map(co=>softmax(co)[1]):softmax(uo)).map((co,lo)=>[co,lo]).sort((co,lo)=>lo[0]-co[0]);Xr.push({sequence:to,labels:fn.map(co=>nn[co[1]]),scores:fn.map(co=>co[0])})}return an?Xr:Xr[0]}}class FeatureExtractionPipeline extends Pipeline{constructor(st){super(st)}async _call(st,{pooling:nn="none",normalize:rn=!1,quantize:on=!1,precision:an="binary"}={}){const sn=this.tokenizer(st,{padding:!0,truncation:!0}),un=await this.model(sn);let Xr=un.last_hidden_state??un.logits??un.token_embeddings;if(nn!=="none")if(nn==="mean")Xr=mean_pooling(Xr,sn.attention_mask);else if(nn==="cls")Xr=Xr.slice(null,0);else throw Error(`Pooling method '${nn}' not supported.`);return rn&&(Xr=Xr.normalize(2,-1)),on&&(Xr=quantize_embeddings(Xr,an)),Xr}}class ImageFeatureExtractionPipeline extends Pipeline{constructor(st){super(st)}async _call(st,{pool:nn=null}={}){const rn=await prepareImages(st),{pixel_values:on}=await this.processor(rn),an=await this.model({pixel_values:on});let sn;if(nn){if(!("pooler_output"in an))throw Error("No pooled output was returned. Make sure the model has a 'pooler' layer when using the 'pool' option.");sn=an.pooler_output}else sn=an.last_hidden_state??an.logits??an.image_embeds;return sn}}class AudioClassificationPipeline extends Pipeline{constructor(st){super(st)}async _call(st,{topk:nn=null}={}){const rn=!Array.isArray(st),on=this.processor.feature_extractor.config.sampling_rate,an=await prepareAudios(st,on),sn=this.model.config.id2label,un=[];for(const Xr of an){const to=await this.processor(Xr),hn=(await this.model(to)).logits[0],co=getTopItems(softmax(hn.data),nn).map(lo=>({label:sn[lo[0]],score:lo[1]}));nn===1?un.push(...co):un.push(co)}return!rn||nn===1?un:un[0]}}class ZeroShotAudioClassificationPipeline extends Pipeline{constructor(st){super(st)}async _call(st,nn,{hypothesis_template:rn="This is a sound of {}."}={}){const on=!Array.isArray(st);on&&(st=[st]);const an=nn.map(uo=>rn.replace("{}",uo)),sn=this.tokenizer(an,{padding:!0,truncation:!0}),un=this.processor.feature_extractor.config.sampling_rate,Xr=await prepareAudios(st,un),to=[];for(const uo of Xr){const hn=await this.processor(uo),fn=await this.model({...sn,...hn}),co=softmax(fn.logits_per_audio.data);to.push([...co].map((lo,fo)=>({score:lo,label:nn[fo]})))}return on?to[0]:to}}class AutomaticSpeechRecognitionPipeline extends Pipeline{constructor(st){super(st)}async _call(st,nn={}){switch(this.model.config.model_type){case"whisper":return this._call_whisper(st,nn);case"wav2vec2":case"wav2vec2-bert":case"unispeech":case"unispeech-sat":case"hubert":return this._call_wav2vec2(st,nn);default:throw new Error(`AutomaticSpeechRecognitionPipeline does not support model type '${this.model.config.model_type}'.`)}}async _call_wav2vec2(st,nn={}){nn.language&&console.warn('`language` parameter is not yet supported for `wav2vec2` models, defaulting to "English".'),nn.task&&console.warn('`task` parameter is not yet supported for `wav2vec2` models, defaulting to "transcribe".');const rn=!Array.isArray(st);rn&&(st=[st]);const on=this.processor.feature_extractor.config.sampling_rate,an=await prepareAudios(st,on),sn=[];for(const un of an){const Xr=await this.processor(un),uo=(await this.model(Xr)).logits[0],hn=[];for(const co of uo)hn.push(max$3(co.data)[1]);const fn=this.tokenizer.decode(hn);sn.push({text:fn})}return rn?sn[0]:sn}async _call_whisper(st,nn={}){const rn=nn.return_timestamps??!1,on=nn.chunk_length_s??0,an=nn.chunk_callback??null,sn=nn.force_full_sequences??!1;let un=nn.stride_length_s??null;rn==="word"&&(nn.return_token_timestamps=!0);const Xr=pop(nn,"language",null),to=pop(nn,"task",null);if(Xr||to||rn){if(nn.forced_decoder_ids)throw new Error("Cannot specify `language`/`task`/`return_timestamps` and `forced_decoder_ids` at the same time.");const ho=this.tokenizer.get_decoder_prompt_ids({language:Xr,task:to,no_timestamps:!rn});ho.length>0&&(nn.forced_decoder_ids=ho)}const uo=!Array.isArray(st);uo&&(st=[st]);const hn=this.processor.feature_extractor.config.chunk_length/this.model.config.max_source_positions,fn=this.processor.feature_extractor.config.hop_length,co=this.processor.feature_extractor.config.sampling_rate,lo=await prepareAudios(st,co),fo=[];for(const ho of lo){let mo=[];if(on>0){if(un===null)un=on/6;else if(on<=un)throw Error("`chunk_length_s` must be larger than `stride_length_s`.");const tp=co*on,ep=co*un,np=tp-2*ep;let rp=0;for(;rp<ho.length;){const ip=ho.subarray(rp,rp+tp),op=await this.processor(ip),ap=rp===0,sp=rp+np>=ho.length;mo.push({stride:[ip.length,ap?0:ep,sp?0:ep],input_features:op.input_features,is_last:sp}),rp+=np}}else mo=[{stride:[ho.length,0,0],input_features:(await this.processor(ho)).input_features,is_last:!0}];for(const tp of mo){nn.num_frames=Math.floor(tp.stride[0]/fn);const ep=await this.model.generate(tp.input_features,nn);rn==="word"?(tp.tokens=ep.sequences[0],tp.token_timestamps=ep.token_timestamps.tolist()[0].map(np=>round$1(np,2))):tp.tokens=ep[0],tp.stride=tp.stride.map(np=>np/co),an!==null&&an(tp)}const[Uo,_d]=this.tokenizer._decode_asr(mo,{time_precision:hn,return_timestamps:rn,force_full_sequences:sn});fo.push({text:Uo,..._d})}return uo?fo[0]:fo}}class ImageToTextPipeline extends Pipeline{constructor(st){super(st)}async _call(st,nn={}){const rn=Array.isArray(st),on=await prepareImages(st),{pixel_values:an}=await this.processor(on),sn=[];for(const un of an){un.dims=[1,...un.dims];const Xr=await this.model.generate(un,nn),to=this.tokenizer.batch_decode(Xr,{skip_special_tokens:!0}).map(uo=>({generated_text:uo.trim()}));sn.push(to)}return rn?sn:sn[0]}}class ImageClassificationPipeline extends Pipeline{constructor(st){super(st)}async _call(st,{topk:nn=1}={}){const rn=Array.isArray(st),on=await prepareImages(st),{pixel_values:an}=await this.processor(on),sn=await this.model({pixel_values:an}),un=this.model.config.id2label,Xr=[];for(const to of sn.logits){const hn=getTopItems(softmax(to.data),nn).map(fn=>({label:un[fn[0]],score:fn[1]}));nn===1?Xr.push(...hn):Xr.push(hn)}return rn||nn===1?Xr:Xr[0]}}class ImageSegmentationPipeline extends Pipeline{constructor(st){super(st),this.subtasks_mapping={panoptic:"post_process_panoptic_segmentation",instance:"post_process_instance_segmentation",semantic:"post_process_semantic_segmentation"}}async _call(st,{threshold:nn=.5,mask_threshold:rn=.5,overlap_mask_area_threshold:on=.8,label_ids_to_fuse:an=null,target_sizes:sn=null,subtask:un=null}={}){if(Array.isArray(st)&&st.length!==1)throw Error("Image segmentation pipeline currently only supports a batch size of 1.");const to=await prepareImages(st),uo=to.map(mo=>[mo.height,mo.width]),{pixel_values:hn,pixel_mask:fn}=await this.processor(to),co=await this.model({pixel_values:hn,pixel_mask:fn});let lo=null;if(un!==null)lo=this.subtasks_mapping[un];else for(let[mo,Uo]of Object.entries(this.subtasks_mapping))if(Uo in this.processor.feature_extractor){lo=this.processor.feature_extractor[Uo].bind(this.processor.feature_extractor),un=mo;break}const fo=this.model.config.id2label,ho=[];if(un==="panoptic"||un==="instance"){const mo=lo(co,nn,rn,on,an,sn??uo)[0],Uo=mo.segmentation;for(const _d of mo.segments_info){const tp=new Uint8ClampedArray(Uo.data.length);for(let np=0;np<Uo.data.length;++np)Uo.data[np]===_d.id&&(tp[np]=255);const ep=new RawImage(tp,Uo.dims[1],Uo.dims[0],1);ho.push({score:_d.score,label:fo[_d.label_id],mask:ep})}}else if(un==="semantic"){const{segmentation:mo,labels:Uo}=lo(co,sn??uo)[0];for(const _d of Uo){const tp=new Uint8ClampedArray(mo.data.length);for(let np=0;np<mo.data.length;++np)mo.data[np]===_d&&(tp[np]=255);const ep=new RawImage(tp,mo.dims[1],mo.dims[0],1);ho.push({score:null,label:fo[_d],mask:ep})}}else throw Error(`Subtask ${un} not supported.`);return ho}}class ZeroShotImageClassificationPipeline extends Pipeline{constructor(st){super(st)}async _call(st,nn,{hypothesis_template:rn="This is a photo of {}"}={}){const on=Array.isArray(st),an=await prepareImages(st),sn=nn.map(fn=>rn.replace("{}",fn)),un=this.tokenizer(sn,{padding:this.model.config.model_type==="siglip"?"max_length":!0,truncation:!0}),{pixel_values:Xr}=await this.processor(an),to=await this.model({...un,pixel_values:Xr}),uo=this.model.config.model_type==="siglip"?fn=>fn.sigmoid().data:fn=>softmax(fn.data),hn=[];for(const fn of to.logits_per_image){const lo=[...uo(fn)].map((fo,ho)=>({score:fo,label:nn[ho]}));lo.sort((fo,ho)=>ho.score-fo.score),hn.push(lo)}return on?hn:hn[0]}}class ObjectDetectionPipeline extends Pipeline{constructor(st){super(st)}async _call(st,{threshold:nn=.9,percentage:rn=!1}={}){const on=Array.isArray(st);if(on&&st.length!==1)throw Error("Object detection pipeline currently only supports a batch size of 1.");const an=await prepareImages(st),sn=rn?null:an.map(co=>[co.height,co.width]),{pixel_values:un,pixel_mask:Xr}=await this.processor(an),to=await this.model({pixel_values:un,pixel_mask:Xr}),uo=this.processor.feature_extractor.post_process_object_detection(to,nn,sn),hn=this.model.config.id2label,fn=uo.map(co=>co.boxes.map((lo,fo)=>({score:co.scores[fo],label:hn[co.classes[fo]],box:get_bounding_box(lo,!rn)})));return on?fn:fn[0]}}class ZeroShotObjectDetectionPipeline extends Pipeline{constructor(st){super(st)}async _call(st,nn,{threshold:rn=.1,topk:on=null,percentage:an=!1}={}){const sn=Array.isArray(st),un=await prepareImages(st),Xr=this.tokenizer(nn,{padding:!0,truncation:!0}),to=await this.processor(un),uo=[];for(let hn=0;hn<un.length;++hn){const fn=un[hn],co=an?null:[[fn.height,fn.width]],lo=to.pixel_values[hn].unsqueeze_(0),fo=await this.model({...Xr,pixel_values:lo}),ho=this.processor.feature_extractor.post_process_object_detection(fo,rn,co,!0)[0];let mo=ho.boxes.map((Uo,_d)=>({score:ho.scores[_d],label:nn[ho.classes[_d]],box:get_bounding_box(Uo,!an)})).sort((Uo,_d)=>_d.score-Uo.score);on!==null&&(mo=mo.slice(0,on)),uo.push(mo)}return sn?uo:uo[0]}}class DocumentQuestionAnsweringPipeline extends Pipeline{constructor(st){super(st)}async _call(st,nn,rn={}){const on=(await prepareImages(st))[0],{pixel_values:an}=await this.processor(on),sn=`<s_docvqa><s_question>${nn}</s_question><s_answer>`,un=this.tokenizer(sn,{add_special_tokens:!1,padding:!0,truncation:!0}).input_ids,Xr=await this.model.generate(an,{...rn,decoder_input_ids:un,max_length:this.model.config.decoder.max_position_embeddings}),uo=this.tokenizer.batch_decode(Xr)[0].match(/<s_answer>(.*?)<\/s_answer>/);let hn=null;return uo&&uo.length>=2&&(hn=uo[1].trim()),[{answer:hn}]}}class TextToAudioPipeline extends Pipeline{constructor(nn){super(nn);Fp(this,"DEFAULT_VOCODER_ID","Xenova/speecht5_hifigan");this.vocoder=nn.vocoder??null}async _call(nn,{speaker_embeddings:rn=null}={}){return this.processor?this._call_text_to_spectrogram(nn,{speaker_embeddings:rn}):this._call_text_to_waveform(nn)}async _call_text_to_waveform(nn){const rn=this.tokenizer(nn,{padding:!0,truncation:!0}),{waveform:on}=await this.model(rn),an=this.model.config.sampling_rate;return{audio:on.data,sampling_rate:an}}async _call_text_to_spectrogram(nn,{speaker_embeddings:rn}){if(this.vocoder||(console.log("No vocoder specified, using default HifiGan vocoder."),this.vocoder=await AutoModel.from_pretrained(this.DEFAULT_VOCODER_ID,{quantized:!1})),(typeof rn=="string"||rn instanceof URL)&&(rn=new Float32Array(await(await fetch(rn)).arrayBuffer())),rn instanceof Float32Array)rn=new Tensor("float32",rn,[1,rn.length]);else if(!(rn instanceof Tensor))throw new Error("Speaker embeddings must be a `Tensor`, `Float32Array`, `string`, or `URL`.");const{input_ids:on}=this.tokenizer(nn,{padding:!0,truncation:!0}),{waveform:an}=await this.model.generate_speech(on,rn,{vocoder:this.vocoder}),sn=this.processor.feature_extractor.config.sampling_rate;return{audio:an.data,sampling_rate:sn}}}class ImageToImagePipeline extends Pipeline{constructor(st){super(st)}async _call(st){const nn=await prepareImages(st),rn=await this.processor(nn),on=await this.model(rn),an=[];for(const sn of on.reconstruction){const un=sn.squeeze().clamp_(0,1).mul_(255).round_().to("uint8");an.push(RawImage.fromTensor(un))}return an.length>1?an:an[0]}}class DepthEstimationPipeline extends Pipeline{constructor(st){super(st)}async _call(st){const nn=await prepareImages(st),rn=await this.processor(nn),{predicted_depth:on}=await this.model(rn),an=[];for(let sn=0;sn<nn.length;++sn){const un=interpolate$1(on[sn],nn[sn].size.reverse(),"bilinear",!1),Xr=un.mul_(255/max$3(un.data)[0]).to("uint8");an.push({predicted_depth:on[sn],depth:RawImage.fromTensor(Xr)})}return an.length>1?an:an[0]}}const SUPPORTED_TASKS=Object.freeze({"text-classification":{tokenizer:AutoTokenizer,pipeline:TextClassificationPipeline,model:AutoModelForSequenceClassification,default:{model:"Xenova/distilbert-base-uncased-finetuned-sst-2-english"},type:"text"},"token-classification":{tokenizer:AutoTokenizer,pipeline:TokenClassificationPipeline,model:AutoModelForTokenClassification,default:{model:"Xenova/bert-base-multilingual-cased-ner-hrl"},type:"text"},"question-answering":{tokenizer:AutoTokenizer,pipeline:QuestionAnsweringPipeline,model:AutoModelForQuestionAnswering,default:{model:"Xenova/distilbert-base-cased-distilled-squad"},type:"text"},"fill-mask":{tokenizer:AutoTokenizer,pipeline:FillMaskPipeline,model:AutoModelForMaskedLM,default:{model:"Xenova/bert-base-uncased"},type:"text"},summarization:{tokenizer:AutoTokenizer,pipeline:SummarizationPipeline,model:AutoModelForSeq2SeqLM,default:{model:"Xenova/distilbart-cnn-6-6"},type:"text"},translation:{tokenizer:AutoTokenizer,pipeline:TranslationPipeline,model:AutoModelForSeq2SeqLM,default:{model:"Xenova/t5-small"},type:"text"},"text2text-generation":{tokenizer:AutoTokenizer,pipeline:Text2TextGenerationPipeline,model:AutoModelForSeq2SeqLM,default:{model:"Xenova/flan-t5-small"},type:"text"},"text-generation":{tokenizer:AutoTokenizer,pipeline:TextGenerationPipeline,model:AutoModelForCausalLM,default:{model:"Xenova/gpt2"},type:"text"},"zero-shot-classification":{tokenizer:AutoTokenizer,pipeline:ZeroShotClassificationPipeline,model:AutoModelForSequenceClassification,default:{model:"Xenova/distilbert-base-uncased-mnli"},type:"text"},"audio-classification":{pipeline:AudioClassificationPipeline,model:AutoModelForAudioClassification,processor:AutoProcessor,default:{model:"Xenova/wav2vec2-base-superb-ks"},type:"audio"},"zero-shot-audio-classification":{tokenizer:AutoTokenizer,pipeline:ZeroShotAudioClassificationPipeline,model:AutoModel,processor:AutoProcessor,default:{model:"Xenova/clap-htsat-unfused"},type:"multimodal"},"automatic-speech-recognition":{tokenizer:AutoTokenizer,pipeline:AutomaticSpeechRecognitionPipeline,model:[AutoModelForSpeechSeq2Seq,AutoModelForCTC],processor:AutoProcessor,default:{model:"Xenova/whisper-tiny.en"},type:"multimodal"},"text-to-audio":{tokenizer:AutoTokenizer,pipeline:TextToAudioPipeline,model:[AutoModelForTextToWaveform,AutoModelForTextToSpectrogram],processor:[AutoProcessor,null],default:{model:"Xenova/speecht5_tts"},type:"text"},"image-to-text":{tokenizer:AutoTokenizer,pipeline:ImageToTextPipeline,model:AutoModelForVision2Seq,processor:AutoProcessor,default:{model:"Xenova/vit-gpt2-image-captioning"},type:"multimodal"},"image-classification":{pipeline:ImageClassificationPipeline,model:AutoModelForImageClassification,processor:AutoProcessor,default:{model:"Xenova/vit-base-patch16-224"},type:"multimodal"},"image-segmentation":{pipeline:ImageSegmentationPipeline,model:[AutoModelForImageSegmentation,AutoModelForSemanticSegmentation],processor:AutoProcessor,default:{model:"Xenova/detr-resnet-50-panoptic"},type:"multimodal"},"zero-shot-image-classification":{tokenizer:AutoTokenizer,pipeline:ZeroShotImageClassificationPipeline,model:AutoModel,processor:AutoProcessor,default:{model:"Xenova/clip-vit-base-patch32"},type:"multimodal"},"object-detection":{pipeline:ObjectDetectionPipeline,model:AutoModelForObjectDetection,processor:AutoProcessor,default:{model:"Xenova/detr-resnet-50"},type:"multimodal"},"zero-shot-object-detection":{tokenizer:AutoTokenizer,pipeline:ZeroShotObjectDetectionPipeline,model:AutoModelForZeroShotObjectDetection,processor:AutoProcessor,default:{model:"Xenova/owlvit-base-patch32"},type:"multimodal"},"document-question-answering":{tokenizer:AutoTokenizer,pipeline:DocumentQuestionAnsweringPipeline,model:AutoModelForDocumentQuestionAnswering,processor:AutoProcessor,default:{model:"Xenova/donut-base-finetuned-docvqa"},type:"multimodal"},"image-to-image":{pipeline:ImageToImagePipeline,model:AutoModelForImageToImage,processor:AutoProcessor,default:{model:"Xenova/swin2SR-classical-sr-x2-64"},type:"image"},"depth-estimation":{pipeline:DepthEstimationPipeline,model:AutoModelForDepthEstimation,processor:AutoProcessor,default:{model:"Xenova/dpt-large"},type:"image"},"feature-extraction":{tokenizer:AutoTokenizer,pipeline:FeatureExtractionPipeline,model:AutoModel,default:{model:"Xenova/all-MiniLM-L6-v2"},type:"text"},"image-feature-extraction":{processor:AutoProcessor,pipeline:ImageFeatureExtractionPipeline,model:[AutoModelForImageFeatureExtraction,AutoModel],default:{model:"Xenova/vit-base-patch16-224-in21k"},type:"image"}}),TASK_ALIASES=Object.freeze({"sentiment-analysis":"text-classification",ner:"token-classification",asr:"automatic-speech-recognition","text-to-speech":"text-to-audio",embeddings:"feature-extraction"});async function pipeline(Mt,st=null,{quantized:nn=!0,progress_callback:rn=null,config:on=null,cache_dir:an=null,local_files_only:sn=!1,revision:un="main",model_file_name:Xr=null}={}){Mt=TASK_ALIASES[Mt]??Mt;const to=SUPPORTED_TASKS[Mt.split("_",1)[0]];if(!to)throw Error(`Unsupported pipeline: ${Mt}. Must be one of [${Object.keys(SUPPORTED_TASKS)}]`);st||(st=to.default.model,console.log(`No model specified. Using default model: "${st}".`));const uo={quantized:nn,progress_callback:rn,config:on,cache_dir:an,local_files_only:sn,revision:un,model_file_name:Xr},hn=new Map([["tokenizer",to.tokenizer],["model",to.model],["processor",to.processor]]),fn=await loadItems(hn,st,uo);fn.task=Mt,dispatchCallback(rn,{status:"ready",task:Mt,model:st});const co=to.pipeline;return new co(fn)}async function loadItems(Mt,st,nn){const rn=Object.create(null),on=[];for(let[an,sn]of Mt.entries()){if(!sn)continue;let un;Array.isArray(sn)?un=new Promise(async(Xr,to)=>{let uo;for(let hn of sn){if(hn===null){Xr(null);return}try{Xr(await hn.from_pretrained(st,nn));return}catch(fn){uo=fn}}to(uo)}):un=sn.from_pretrained(st,nn),rn[an]=un,on.push(un)}await Promise.all(on);for(let[an,sn]of Object.entries(rn))rn[an]=await sn;return rn}let vocalToneHistory=[],isModelInitialized=!1,isModelLoading=!1,emotionClassifier=null;const loadSpeechEmotionModel=async()=>{if(isModelInitialized||isModelLoading){console.log(isModelInitialized?"Speech emotion model already loaded":"Speech emotion model is currently loading");return}try{isModelLoading=!0,console.log("Loading speech emotion recognition model..."),emotionClassifier=await pipeline("audio-classification","Xenova/wav2vec2-large-xlsr-53-english"),isModelInitialized=!0,isModelLoading=!1,console.log("Speech emotion recognition model loaded successfully")}catch(Mt){console.error("Error loading speech emotion model:",Mt),isModelLoading=!1,emotionClassifier=null}},getVocalToneHistory=()=>vocalToneHistory,isSpeechEmotionModelReady=()=>isModelInitialized&&emotionClassifier!==null;let isInitializing=!1;const puterStatus={initialized:!1,fallbackActive:!1};function isPuterAIAvailable(){return!!window.puter&&!!window.puter.ai&&!!window.puter.ai.chat}async function loadPuterJs(){if(isPuterAIAvailable()){console.log("Puter.js already loaded"),puterStatus.initialized=!0;return}if(isInitializing){console.log("Puter.js initialization already in progress");return}return isInitializing=!0,new Promise(Mt=>{try{console.log("Loading Puter.js..."),window.puter||(setupFallbackAI(),puterStatus.fallbackActive=!0),console.log("Puter.js loaded with fallback capabilities"),puterStatus.initialized=!0,isInitializing=!1,Mt()}catch(st){console.error("Error loading Puter.js:",st),setupFallbackAI(),puterStatus.fallbackActive=!0,puterStatus.initialized=!0,isInitializing=!1,Mt()}})}function setupFallbackAI(){window.puter||(window.puter={ai:{chat:async Mt=>{console.log("Using local fallback AI response");const st=["I understand how you feel. Would you like to tell me more?","Thanks for sharing that. What's been the hardest part?","I'm here to listen. What would help you the most right now?","That's really brave of you to share. How do you feel about it?","I hear you. What would make you feel better today?"],nn=Math.floor(Math.random()*st.length);return await new Promise(rn=>setTimeout(rn,500)),{message:{content:st[nn],role:"assistant"}}}}})}async function initializePuterJs(){setupFallbackAI(),puterStatus.fallbackActive=!0;try{await loadPuterJs(),console.log("Puter.js integration initialized")}catch(Mt){console.error("Failed to initialize Puter.js integration:",Mt)}}const puterService=Object.freeze(Object.defineProperty({__proto__:null,initializePuterJs,isPuterAIAvailable,loadPuterJs},Symbol.toStringTag,{value:"Module"}));function VoiceTherapy(){const[Mt,st]=reactExports.useState("neutral"),[nn,rn]=reactExports.useState(void 0),[on,an]=reactExports.useState(.5),[sn,un]=reactExports.useState(.5),[Xr,to]=reactExports.useState({faceModel:!1,speechModel:!1,puterAI:!1}),[uo,hn]=reactExports.useState(!1),[fn,co]=reactExports.useState(!0),[lo,fo]=reactExports.useState(!1),[ho,mo]=reactExports.useState(""),{transcript:Uo,isListening:_d,startListening:tp,stopListening:ep,error:np}=useSpeechRecognition({onFinalTranscript:(gp,mp,xp)=>{up(gp,mp,xp)},autoRestart:!0,pauseThreshold:1500});reactExports.useEffect(()=>{async function gp(){try{await loadFaceModel(),to(mp=>({...mp,faceModel:isModelLoaded()})),await loadSpeechEmotionModel(),to(mp=>({...mp,speechModel:isSpeechEmotionModelReady()})),await initializePuterJs(),to(mp=>({...mp,puterAI:isPuterAIAvailable()}))}catch(mp){console.error("Error loading models:",mp)}}gp()},[]);const{messages:rp,sendMessage:ip,isProcessing:op,ageGroup:ap,setAgeGroup:sp}=usePuterAI({initialMessage:INITIAL_MESSAGES.voice,defaultAgeGroup:"teenagers"}),up=(gp,mp,xp=.5)=>{gp.text.trim()&&(mp&&(rn(mp),un(xp)),ip(gp,Mt,mp),rp.length>0&&(Mt==="happy"||Mt==="surprised"||nn==="excited")&&(mo("Great job expressing yourself!"),fo(!0),setTimeout(()=>{fo(!1)},3e3)))},pp=(gp,mp=.5)=>{st(gp),an(mp)},lp=gp=>{sp(gp)},dp=reactExports.useCallback(()=>{const gp=!uo;hn(gp),gp?tp():ep()},[uo,tp,ep]),cp={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1,delayChildren:.2}}},fp={hidden:{y:20,opacity:0},visible:{y:0,opacity:1,transition:{type:"spring",stiffness:300,damping:24}}};return jsxRuntimeExports.jsxs(motion.div,{className:"max-w-4xl mx-auto py-4",initial:"hidden",animate:"visible",variants:cp,children:[jsxRuntimeExports.jsx(SuccessNotification,{show:lo,message:ho,duration:3e3,withConfetti:!0}),jsxRuntimeExports.jsxs(motion.div,{className:"flex justify-center mb-4 gap-2",variants:fp,children:[jsxRuntimeExports.jsxs(Badge,{variant:Xr.faceModel?"default":"outline",className:`animate-pulse transition-all ${Xr.faceModel?"bg-green-500":"text-blue-500"}`,children:["Face Detection ",Xr.faceModel?"Active":"Loading..."]}),jsxRuntimeExports.jsxs(Badge,{variant:Xr.speechModel?"default":"outline",className:`animate-pulse transition-all ${Xr.speechModel?"bg-green-500":"text-blue-500"}`,children:["Speech AI ",Xr.speechModel?"Active":"Loading..."]}),jsxRuntimeExports.jsxs(Badge,{variant:Xr.puterAI?"default":"outline",className:`animate-pulse transition-all ${Xr.puterAI?"bg-green-500":"text-blue-500"}`,children:["Puter AI ",Xr.puterAI?"Active":"Loading..."]})]}),jsxRuntimeExports.jsx(motion.div,{variants:fp,children:jsxRuntimeExports.jsxs(Card,{className:"bg-white border-gray-200 shadow-sm mb-6 overflow-hidden",children:[jsxRuntimeExports.jsxs(CardHeader,{className:"flex flex-row items-center justify-between pb-2",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center gap-2",children:jsxRuntimeExports.jsx(CardTitle,{className:"text-gray-800",children:"Voice Chat"})}),jsxRuntimeExports.jsx(AgeGroupSelector,{currentAgeGroup:ap,onAgeGroupChange:lp,className:"w-40"})]}),jsxRuntimeExports.jsxs(CardContent,{children:[jsxRuntimeExports.jsx("div",{className:"mb-4",children:jsxRuntimeExports.jsx("p",{className:"text-gray-600 text-sm",children:"This chat uses your camera and microphone for communication."})}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mb-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx(Button,{onClick:dp,variant:uo?"default":"outline",className:"flex items-center gap-2",size:"sm",children:uo?" Voice Active":" Enable Voice"}),jsxRuntimeExports.jsx(Button,{onClick:()=>co(!fn),variant:fn?"default":"outline",size:"sm",children:fn?"Camera On":"Camera Off"})]}),jsxRuntimeExports.jsx(AmbientSoundPlayer,{})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"w-full md:w-1/2 flex flex-col gap-3",children:[jsxRuntimeExports.jsx(CameraView,{isEnabled:fn,onEmotionDetected:gp=>{pp(gp.emotion,gp.confidence)},className:"w-full h-[250px] md:h-[300px]"}),jsxRuntimeExports.jsx(EmotionPanel,{currentEmotion:Mt,confidenceLevel:on,compact:!0})]}),jsxRuntimeExports.jsx("div",{className:"w-full md:w-1/2",children:jsxRuntimeExports.jsx(VoiceTranscription,{messages:rp})})]}),jsxRuntimeExports.jsx(AnimatePresence,{children:op&&jsxRuntimeExports.jsxs(motion.div,{className:"mt-3 text-sm text-gray-500 italic bg-gray-50 p-2 rounded-md border border-gray-200",initial:{opacity:0,y:5},animate:{opacity:1,y:0},exit:{opacity:0,y:-5},transition:{duration:.3},children:[jsxRuntimeExports.jsx("span",{className:"inline-block mr-2 animate-spin",children:""}),"Processing your message..."]})})]})]})}),jsxRuntimeExports.jsx(motion.div,{variants:fp,transition:{delay:.8},children:jsxRuntimeExports.jsx(InstructionsCard$1,{})})]})}const Input=reactExports.forwardRef(({className:Mt,type:st,...nn},rn)=>jsxRuntimeExports.jsx("input",{type:st,className:cn("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",Mt),ref:rn,...nn}));Input.displayName="Input";function toDate(Mt){const st=Object.prototype.toString.call(Mt);return Mt instanceof Date||typeof Mt=="object"&&st==="[object Date]"?new Mt.constructor(+Mt):typeof Mt=="number"||st==="[object Number]"||typeof Mt=="string"||st==="[object String]"?new Date(Mt):new Date(NaN)}function constructFrom(Mt,st){return Mt instanceof Date?new Mt.constructor(st):new Date(st)}const minutesInMonth=43200,minutesInDay=1440;let defaultOptions={};function getDefaultOptions(){return defaultOptions}function getTimezoneOffsetInMilliseconds(Mt){const st=toDate(Mt),nn=new Date(Date.UTC(st.getFullYear(),st.getMonth(),st.getDate(),st.getHours(),st.getMinutes(),st.getSeconds(),st.getMilliseconds()));return nn.setUTCFullYear(st.getFullYear()),+Mt-+nn}function compareAsc(Mt,st){const nn=toDate(Mt),rn=toDate(st),on=nn.getTime()-rn.getTime();return on<0?-1:on>0?1:on}function constructNow(Mt){return constructFrom(Mt,Date.now())}function differenceInCalendarMonths(Mt,st){const nn=toDate(Mt),rn=toDate(st),on=nn.getFullYear()-rn.getFullYear(),an=nn.getMonth()-rn.getMonth();return on*12+an}function getRoundingMethod(Mt){return st=>{const rn=(Mt?Math[Mt]:Math.trunc)(st);return rn===0?0:rn}}function differenceInMilliseconds(Mt,st){return+toDate(Mt)-+toDate(st)}function endOfDay(Mt){const st=toDate(Mt);return st.setHours(23,59,59,999),st}function endOfMonth(Mt){const st=toDate(Mt),nn=st.getMonth();return st.setFullYear(st.getFullYear(),nn+1,0),st.setHours(23,59,59,999),st}function isLastDayOfMonth(Mt){const st=toDate(Mt);return+endOfDay(st)==+endOfMonth(st)}function differenceInMonths(Mt,st){const nn=toDate(Mt),rn=toDate(st),on=compareAsc(nn,rn),an=Math.abs(differenceInCalendarMonths(nn,rn));let sn;if(an<1)sn=0;else{nn.getMonth()===1&&nn.getDate()>27&&nn.setDate(30),nn.setMonth(nn.getMonth()-on*an);let un=compareAsc(nn,rn)===-on;isLastDayOfMonth(toDate(Mt))&&an===1&&compareAsc(Mt,rn)===1&&(un=!1),sn=on*(an-Number(un))}return sn===0?0:sn}function differenceInSeconds(Mt,st,nn){const rn=differenceInMilliseconds(Mt,st)/1e3;return getRoundingMethod(nn==null?void 0:nn.roundingMethod)(rn)}const formatDistanceLocale={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},formatDistance$1=(Mt,st,nn)=>{let rn;const on=formatDistanceLocale[Mt];return typeof on=="string"?rn=on:st===1?rn=on.one:rn=on.other.replace("{{count}}",st.toString()),nn!=null&&nn.addSuffix?nn.comparison&&nn.comparison>0?"in "+rn:rn+" ago":rn};function buildFormatLongFn(Mt){return(st={})=>{const nn=st.width?String(st.width):Mt.defaultWidth;return Mt.formats[nn]||Mt.formats[Mt.defaultWidth]}}const dateFormats={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},timeFormats={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},dateTimeFormats={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},formatLong={date:buildFormatLongFn({formats:dateFormats,defaultWidth:"full"}),time:buildFormatLongFn({formats:timeFormats,defaultWidth:"full"}),dateTime:buildFormatLongFn({formats:dateTimeFormats,defaultWidth:"full"})},formatRelativeLocale={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},formatRelative=(Mt,st,nn,rn)=>formatRelativeLocale[Mt];function buildLocalizeFn(Mt){return(st,nn)=>{const rn=nn!=null&&nn.context?String(nn.context):"standalone";let on;if(rn==="formatting"&&Mt.formattingValues){const sn=Mt.defaultFormattingWidth||Mt.defaultWidth,un=nn!=null&&nn.width?String(nn.width):sn;on=Mt.formattingValues[un]||Mt.formattingValues[sn]}else{const sn=Mt.defaultWidth,un=nn!=null&&nn.width?String(nn.width):Mt.defaultWidth;on=Mt.values[un]||Mt.values[sn]}const an=Mt.argumentCallback?Mt.argumentCallback(st):st;return on[an]}}const eraValues={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},quarterValues={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},monthValues={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},dayValues={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},dayPeriodValues={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},formattingDayPeriodValues={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},ordinalNumber=(Mt,st)=>{const nn=Number(Mt),rn=nn%100;if(rn>20||rn<10)switch(rn%10){case 1:return nn+"st";case 2:return nn+"nd";case 3:return nn+"rd"}return nn+"th"},localize={ordinalNumber,era:buildLocalizeFn({values:eraValues,defaultWidth:"wide"}),quarter:buildLocalizeFn({values:quarterValues,defaultWidth:"wide",argumentCallback:Mt=>Mt-1}),month:buildLocalizeFn({values:monthValues,defaultWidth:"wide"}),day:buildLocalizeFn({values:dayValues,defaultWidth:"wide"}),dayPeriod:buildLocalizeFn({values:dayPeriodValues,defaultWidth:"wide",formattingValues:formattingDayPeriodValues,defaultFormattingWidth:"wide"})};function buildMatchFn(Mt){return(st,nn={})=>{const rn=nn.width,on=rn&&Mt.matchPatterns[rn]||Mt.matchPatterns[Mt.defaultMatchWidth],an=st.match(on);if(!an)return null;const sn=an[0],un=rn&&Mt.parsePatterns[rn]||Mt.parsePatterns[Mt.defaultParseWidth],Xr=Array.isArray(un)?findIndex$2(un,hn=>hn.test(sn)):findKey(un,hn=>hn.test(sn));let to;to=Mt.valueCallback?Mt.valueCallback(Xr):Xr,to=nn.valueCallback?nn.valueCallback(to):to;const uo=st.slice(sn.length);return{value:to,rest:uo}}}function findKey(Mt,st){for(const nn in Mt)if(Object.prototype.hasOwnProperty.call(Mt,nn)&&st(Mt[nn]))return nn}function findIndex$2(Mt,st){for(let nn=0;nn<Mt.length;nn++)if(st(Mt[nn]))return nn}function buildMatchPatternFn(Mt){return(st,nn={})=>{const rn=st.match(Mt.matchPattern);if(!rn)return null;const on=rn[0],an=st.match(Mt.parsePattern);if(!an)return null;let sn=Mt.valueCallback?Mt.valueCallback(an[0]):an[0];sn=nn.valueCallback?nn.valueCallback(sn):sn;const un=st.slice(on.length);return{value:sn,rest:un}}}const matchOrdinalNumberPattern=/^(\d+)(th|st|nd|rd)?/i,parseOrdinalNumberPattern=/\d+/i,matchEraPatterns={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},parseEraPatterns={any:[/^b/i,/^(a|c)/i]},matchQuarterPatterns={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},parseQuarterPatterns={any:[/1/i,/2/i,/3/i,/4/i]},matchMonthPatterns={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},parseMonthPatterns={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},matchDayPatterns={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},parseDayPatterns={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},matchDayPeriodPatterns={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},parseDayPeriodPatterns={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},match={ordinalNumber:buildMatchPatternFn({matchPattern:matchOrdinalNumberPattern,parsePattern:parseOrdinalNumberPattern,valueCallback:Mt=>parseInt(Mt,10)}),era:buildMatchFn({matchPatterns:matchEraPatterns,defaultMatchWidth:"wide",parsePatterns:parseEraPatterns,defaultParseWidth:"any"}),quarter:buildMatchFn({matchPatterns:matchQuarterPatterns,defaultMatchWidth:"wide",parsePatterns:parseQuarterPatterns,defaultParseWidth:"any",valueCallback:Mt=>Mt+1}),month:buildMatchFn({matchPatterns:matchMonthPatterns,defaultMatchWidth:"wide",parsePatterns:parseMonthPatterns,defaultParseWidth:"any"}),day:buildMatchFn({matchPatterns:matchDayPatterns,defaultMatchWidth:"wide",parsePatterns:parseDayPatterns,defaultParseWidth:"any"}),dayPeriod:buildMatchFn({matchPatterns:matchDayPeriodPatterns,defaultMatchWidth:"any",parsePatterns:parseDayPeriodPatterns,defaultParseWidth:"any"})},enUS={code:"en-US",formatDistance:formatDistance$1,formatLong,formatRelative,localize,match,options:{weekStartsOn:0,firstWeekContainsDate:1}};function formatDistance(Mt,st,nn){const rn=getDefaultOptions(),on=(nn==null?void 0:nn.locale)??rn.locale??enUS,an=2520,sn=compareAsc(Mt,st);if(isNaN(sn))throw new RangeError("Invalid time value");const un=Object.assign({},nn,{addSuffix:nn==null?void 0:nn.addSuffix,comparison:sn});let Xr,to;sn>0?(Xr=toDate(st),to=toDate(Mt)):(Xr=toDate(Mt),to=toDate(st));const uo=differenceInSeconds(to,Xr),hn=(getTimezoneOffsetInMilliseconds(to)-getTimezoneOffsetInMilliseconds(Xr))/1e3,fn=Math.round((uo-hn)/60);let co;if(fn<2)return nn!=null&&nn.includeSeconds?uo<5?on.formatDistance("lessThanXSeconds",5,un):uo<10?on.formatDistance("lessThanXSeconds",10,un):uo<20?on.formatDistance("lessThanXSeconds",20,un):uo<40?on.formatDistance("halfAMinute",0,un):uo<60?on.formatDistance("lessThanXMinutes",1,un):on.formatDistance("xMinutes",1,un):fn===0?on.formatDistance("lessThanXMinutes",1,un):on.formatDistance("xMinutes",fn,un);if(fn<45)return on.formatDistance("xMinutes",fn,un);if(fn<90)return on.formatDistance("aboutXHours",1,un);if(fn<minutesInDay){const lo=Math.round(fn/60);return on.formatDistance("aboutXHours",lo,un)}else{if(fn<an)return on.formatDistance("xDays",1,un);if(fn<minutesInMonth){const lo=Math.round(fn/minutesInDay);return on.formatDistance("xDays",lo,un)}else if(fn<minutesInMonth*2)return co=Math.round(fn/minutesInMonth),on.formatDistance("aboutXMonths",co,un)}if(co=differenceInMonths(to,Xr),co<12){const lo=Math.round(fn/minutesInMonth);return on.formatDistance("xMonths",lo,un)}else{const lo=co%12,fo=Math.trunc(co/12);return lo<3?on.formatDistance("aboutXYears",fo,un):lo<9?on.formatDistance("overXYears",fo,un):on.formatDistance("almostXYears",fo+1,un)}}function formatDistanceToNow(Mt,st){return formatDistance(Mt,constructNow(Mt),st)}function TherapyMessage({message:Mt,isMobile:st=!1}){const nn=Mt.role==="user",rn=formatDistanceToNow(new Date(Mt.timestamp),{addSuffix:!0}),on=Mt.content.split(`
`).map((an,sn)=>jsxRuntimeExports.jsxs("span",{children:[an,sn<Mt.content.split(`
`).length-1&&jsxRuntimeExports.jsx("br",{})]},sn));return jsxRuntimeExports.jsx("div",{className:cn("flex items-start mb-1 md:mb-2 group",nn?"justify-end":"justify-start"),children:jsxRuntimeExports.jsxs("div",{className:cn("rounded-lg py-1.5 px-2.5 md:py-2 md:px-3 max-w-[85%] md:max-w-[75%] shadow-sm",nn?"bg-primary/20 text-primary-foreground border border-primary/10":"bg-secondary/20 border border-secondary/10"),children:[jsxRuntimeExports.jsx("p",{className:cn("break-words",st?"text-sm":"text-base"),children:on}),jsxRuntimeExports.jsx("div",{className:"mt-1 text-[10px] opacity-50 md:opacity-0 md:group-hover:opacity-50 transition-opacity",children:rn})]})})}function ChatInterface({messages:Mt,onSendMessage:st,isProcessing:nn}){const[rn,on]=reactExports.useState(""),an=reactExports.useRef(null),sn=reactExports.useRef(null),un=useIsMobile(),[Xr,to]=reactExports.useState(!0),[uo,hn]=reactExports.useState(!1),fn=lo=>{lo.preventDefault(),rn.trim()&&!nn&&(st(rn),on(""),to(!0))};reactExports.useEffect(()=>{an.current&&Xr&&co()},[Mt,Xr]),reactExports.useEffect(()=>{const lo=an.current;if(!lo)return;const fo=()=>{const{scrollTop:ho,scrollHeight:mo,clientHeight:Uo}=lo,_d=mo-ho-Uo<100;to(_d),hn(!_d&&Mt.length>0)};return lo.addEventListener("scroll",fo),()=>{lo.removeEventListener("scroll",fo)}},[Mt.length]);const co=()=>{an.current&&(an.current.scrollTop=an.current.scrollHeight)};return reactExports.useEffect(()=>{sn.current&&!un&&sn.current.focus()},[un]),jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-secondary/20 h-[calc(100vh-16rem)] md:h-96 flex flex-col relative animate-fadeIn",children:[jsxRuntimeExports.jsxs("div",{ref:an,className:"flex-grow overflow-y-auto p-2 md:p-4 space-y-2 md:space-y-3",children:[Mt.map(lo=>jsxRuntimeExports.jsx(TherapyMessage,{message:lo,isMobile:un},lo.id)),nn&&jsxRuntimeExports.jsx("div",{className:"flex justify-start",children:jsxRuntimeExports.jsx("div",{className:"bg-secondary/20 rounded-lg py-2 px-3 max-w-[80%] animate-pulse",children:jsxRuntimeExports.jsxs("div",{className:"flex space-x-1",children:[jsxRuntimeExports.jsx("div",{className:"h-2 w-2 rounded-full bg-primary"}),jsxRuntimeExports.jsx("div",{className:"h-2 w-2 rounded-full bg-primary"}),jsxRuntimeExports.jsx("div",{className:"h-2 w-2 rounded-full bg-primary"})]})})})]}),uo&&jsxRuntimeExports.jsx("button",{onClick:()=>{co(),to(!0)},className:"absolute bottom-16 right-4 bg-primary text-white p-2 rounded-full shadow-md opacity-80 hover:opacity-100 transition-opacity","aria-label":"Scroll to latest messages",children:jsxRuntimeExports.jsx(ChevronDown,{className:"h-4 w-4"})}),jsxRuntimeExports.jsx("div",{className:"border-t border-secondary/20 p-2 md:p-3",children:jsxRuntimeExports.jsxs("form",{onSubmit:fn,className:"flex gap-2",children:[jsxRuntimeExports.jsx(Input,{ref:sn,type:"text",value:rn,onChange:lo=>on(lo.target.value),placeholder:un?"Message...":"Type your message here...",disabled:nn,className:"border-secondary/30 text-sm md:text-base"}),jsxRuntimeExports.jsx(Button,{type:"submit",className:"bg-primary hover:bg-primary/90 text-white",disabled:!rn.trim()||nn,size:un?"sm":"default",children:jsxRuntimeExports.jsx(Send,{className:"h-4 w-4"})})]})})]})}function InstructionsCard(){return jsxRuntimeExports.jsxs(Card,{className:"bg-beige-100 max-w-4xl mx-auto mt-6",children:[jsxRuntimeExports.jsx(CardHeader,{children:jsxRuntimeExports.jsx(CardTitle,{className:"text-beige-700",children:"How to use Text Therapy"})}),jsxRuntimeExports.jsxs(CardContent,{children:[jsxRuntimeExports.jsx("ul",{className:"list-disc list-inside space-y-2 text-beige-600",children:THERAPY_INSTRUCTIONS.text.map((Mt,st)=>jsxRuntimeExports.jsx("li",{children:Mt},st))}),jsxRuntimeExports.jsx("div",{className:"mt-4 p-3 bg-beige-200/50 rounded-lg text-beige-600 text-sm",children:jsxRuntimeExports.jsxs("p",{className:"flex items-center",children:[jsxRuntimeExports.jsx(Lock,{className:"h-3 w-3 mr-1"}),jsxRuntimeExports.jsx("strong",{className:"mr-1",children:"Privacy Note:"}),PRIVACY_NOTE]})})]})]})}const themeColors={blue:{primary:"blue",secondary:"sky",neutral:"gray",success:"emerald",warning:"amber",danger:"rose",info:"cyan"},indigo:{primary:"indigo",secondary:"violet",neutral:"slate",success:"emerald",warning:"amber",danger:"rose",info:"blue"},teal:{primary:"teal",secondary:"emerald",neutral:"gray",success:"green",warning:"amber",danger:"red",info:"sky"},purple:{primary:"purple",secondary:"violet",neutral:"zinc",success:"emerald",warning:"amber",danger:"rose",info:"indigo"},amber:{primary:"amber",secondary:"orange",neutral:"stone",success:"emerald",warning:"yellow",danger:"red",info:"sky"}},defaultTheme="teal",getThemeClasses=(Mt=defaultTheme)=>{const st=themeColors[Mt];return{pageBg:`bg-${st.neutral}-50`,cardBg:`bg-${st.primary}-50/50`,cardBorder:`border-${st.primary}-200`,textPrimary:`text-${st.primary}-700`,textSecondary:`text-${st.secondary}-600`,textMuted:`text-${st.neutral}-500`,buttonPrimary:`bg-${st.primary}-500 hover:bg-${st.primary}-600 text-white`,buttonSecondary:`bg-${st.secondary}-100 text-${st.secondary}-700 hover:bg-${st.secondary}-200`,buttonOutline:`border-${st.primary}-300 text-${st.primary}-700 hover:bg-${st.primary}-50`,badgePrimary:`bg-${st.primary}-100 text-${st.primary}-800`,badgeSecondary:`bg-${st.secondary}-100 text-${st.secondary}-800`,focusRing:`focus:ring-${st.primary}-500`,gradient:`from-${st.primary}-50 to-${st.secondary}-50`,accentGradient:`from-${st.primary}-500 to-${st.secondary}-500`}},textTherapyTheme="teal";function TextTherapy(){const[Mt,st]=reactExports.useState("neutral"),[nn,rn]=reactExports.useState(.5),{messages:on,sendMessage:an,isProcessing:sn,ageGroup:un,setAgeGroup:Xr}=usePuterAI({initialMessage:INITIAL_MESSAGES.text,defaultAgeGroup:"teenagers"}),to=fo=>{Xr(fo)},uo=fo=>{if(fo.trim()){let ho="neutral",mo=.5;const Uo=fo.toLowerCase();Uo.includes("happy")||Uo.includes("glad")||Uo.includes("good")||Uo.includes("excited")?(ho="happy",mo=.85):Uo.includes("sad")||Uo.includes("upset")||Uo.includes("depressed")||Uo.includes("unhappy")?(ho="sad",mo=.85):Uo.includes("wow")||Uo.includes("whoa")||Uo.includes("amazing")||Uo.includes("shocked")?(ho="surprised",mo=.8):Uo.includes("angry")||Uo.includes("mad")||Uo.includes("furious")||Uo.includes("annoyed")?(ho="angry",mo=.85):Uo.includes("fear")||Uo.includes("scared")||Uo.includes("afraid")||Uo.includes("worry")?(ho="fearful",mo=.82):(Uo.includes("disgust")||Uo.includes("gross")||Uo.includes("revolting"))&&(ho="disgusted",mo=.8),st(ho),rn(mo),an({text:fo,confidence:1},ho)}},hn={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1,delayChildren:.2}}},fn={hidden:{y:20,opacity:0},visible:{y:0,opacity:1,transition:{type:"spring",stiffness:300,damping:24}}},co=()=>EMOTION_ICONS[Mt]||"",lo=getThemeClasses(textTherapyTheme);return jsxRuntimeExports.jsxs(motion.div,{className:"max-w-4xl mx-auto py-4",initial:"hidden",animate:"visible",variants:hn,children:[jsxRuntimeExports.jsx(motion.div,{variants:fn,children:jsxRuntimeExports.jsxs(Card,{className:`shadow-md mb-6 overflow-hidden relative ${lo.cardBg} ${lo.cardBorder}`,children:[jsxRuntimeExports.jsx("div",{className:`absolute inset-0 bg-gradient-to-r ${lo.gradient} animate-shimmer`}),jsxRuntimeExports.jsxs(CardHeader,{className:"flex flex-row items-center justify-between pb-2 relative z-10",children:[jsxRuntimeExports.jsxs(motion.div,{className:"flex items-center gap-2",initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.3,type:"spring"},children:[jsxRuntimeExports.jsx(motion.div,{className:`text-2xl animate-float ${lo.textPrimary}`,animate:{scale:[1,1.05,1]},transition:{duration:2,repeat:1/0,repeatType:"reverse"},children:""}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col",children:[jsxRuntimeExports.jsx(CardTitle,{className:lo.textPrimary,children:"AI Text Therapist"}),jsxRuntimeExports.jsxs(Badge,{variant:"secondary",className:`mt-1 ${lo.badgePrimary}`,children:[jsxRuntimeExports.jsx("span",{className:"mr-1",children:co()}),Mt.charAt(0).toUpperCase()+Mt.slice(1)]})]})]}),jsxRuntimeExports.jsxs(motion.div,{initial:{x:20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.4,type:"spring"},className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center",children:jsxRuntimeExports.jsx(AmbientPlayer,{isCompact:!0})}),jsxRuntimeExports.jsx(AgeGroupSelector,{currentAgeGroup:un,onAgeGroupChange:to,className:"w-40"})]})]}),jsxRuntimeExports.jsxs(CardContent,{className:"relative z-10",children:[jsxRuntimeExports.jsx(motion.div,{className:"mb-4",initial:{y:10,opacity:0},animate:{y:0,opacity:1},transition:{delay:.5},children:jsxRuntimeExports.jsx("p",{className:lo.textPrimary,children:"Chat with the AI therapist by typing your thoughts and feelings below. The conversation adapts to your chosen age group and detects emotional tones from your messages."})}),jsxRuntimeExports.jsx(motion.div,{className:"flex flex-wrap gap-3 mb-4",initial:{y:10,opacity:0},animate:{y:0,opacity:1},transition:{delay:.6},children:jsxRuntimeExports.jsxs(motion.div,{className:`flex items-center gap-1.5 ${lo.badgePrimary} rounded-full px-3 py-1.5`,whileHover:{scale:1.05},children:[jsxRuntimeExports.jsx("span",{className:`${lo.textPrimary} font-medium`,children:"Detected Emotion:"}),jsxRuntimeExports.jsxs("span",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx(motion.span,{className:"text-lg animate-pulse",animate:{scale:[1,1.1,1],opacity:[.8,1,.8]},transition:{duration:2,repeat:1/0},children:co()}),jsxRuntimeExports.jsx("span",{className:`capitalize ${lo.textPrimary}`,children:Mt}),jsxRuntimeExports.jsxs("span",{className:`text-xs ${lo.textSecondary}`,children:["(",Math.round(nn*100),"%)"]})]})]})}),jsxRuntimeExports.jsx(motion.div,{variants:fn,className:"w-full",children:jsxRuntimeExports.jsx(ChatInterface,{messages:on,onSendMessage:uo,isProcessing:sn})}),jsxRuntimeExports.jsx(AnimatePresence,{children:sn&&jsxRuntimeExports.jsxs(motion.div,{className:`mt-3 text-sm ${lo.textSecondary} italic ${lo.cardBg} p-2 rounded-md ${lo.cardBorder}`,initial:{opacity:0,y:5},animate:{opacity:1,y:0},exit:{opacity:0,y:-5},transition:{duration:.3},children:[jsxRuntimeExports.jsx("span",{className:"inline-block mr-2 animate-spin",children:""}),"The AI is analyzing your ",jsxRuntimeExports.jsx("span",{className:`font-medium ${lo.textPrimary} capitalize`,children:Mt})," emotional tone to provide a more personalized response..."]})})]})]})}),jsxRuntimeExports.jsx(motion.div,{variants:fn,transition:{delay:.8},children:jsxRuntimeExports.jsx(InstructionsCard,{})})]})}var TABS_NAME="Tabs",[createTabsContext,createTabsScope]=createContextScope$3(TABS_NAME,[createRovingFocusGroupScope]),useRovingFocusGroupScope=createRovingFocusGroupScope(),[TabsProvider,useTabsContext]=createTabsContext(TABS_NAME),Tabs$1=reactExports.forwardRef((Mt,st)=>{const{__scopeTabs:nn,value:rn,onValueChange:on,defaultValue:an,orientation:sn="horizontal",dir:un,activationMode:Xr="automatic",...to}=Mt,uo=useDirection(un),[hn,fn]=useControllableState({prop:rn,onChange:on,defaultProp:an});return jsxRuntimeExports.jsx(TabsProvider,{scope:nn,baseId:useId(),value:hn,onValueChange:fn,orientation:sn,dir:uo,activationMode:Xr,children:jsxRuntimeExports.jsx(Primitive.div,{dir:uo,"data-orientation":sn,...to,ref:st})})});Tabs$1.displayName=TABS_NAME;var TAB_LIST_NAME="TabsList",TabsList$1=reactExports.forwardRef((Mt,st)=>{const{__scopeTabs:nn,loop:rn=!0,...on}=Mt,an=useTabsContext(TAB_LIST_NAME,nn),sn=useRovingFocusGroupScope(nn);return jsxRuntimeExports.jsx(Root$2,{asChild:!0,...sn,orientation:an.orientation,dir:an.dir,loop:rn,children:jsxRuntimeExports.jsx(Primitive.div,{role:"tablist","aria-orientation":an.orientation,...on,ref:st})})});TabsList$1.displayName=TAB_LIST_NAME;var TRIGGER_NAME$1="TabsTrigger",TabsTrigger$1=reactExports.forwardRef((Mt,st)=>{const{__scopeTabs:nn,value:rn,disabled:on=!1,...an}=Mt,sn=useTabsContext(TRIGGER_NAME$1,nn),un=useRovingFocusGroupScope(nn),Xr=makeTriggerId(sn.baseId,rn),to=makeContentId(sn.baseId,rn),uo=rn===sn.value;return jsxRuntimeExports.jsx(Item,{asChild:!0,...un,focusable:!on,active:uo,children:jsxRuntimeExports.jsx(Primitive.button,{type:"button",role:"tab","aria-selected":uo,"aria-controls":to,"data-state":uo?"active":"inactive","data-disabled":on?"":void 0,disabled:on,id:Xr,...an,ref:st,onMouseDown:composeEventHandlers(Mt.onMouseDown,hn=>{!on&&hn.button===0&&hn.ctrlKey===!1?sn.onValueChange(rn):hn.preventDefault()}),onKeyDown:composeEventHandlers(Mt.onKeyDown,hn=>{[" ","Enter"].includes(hn.key)&&sn.onValueChange(rn)}),onFocus:composeEventHandlers(Mt.onFocus,()=>{const hn=sn.activationMode!=="manual";!uo&&!on&&hn&&sn.onValueChange(rn)})})})});TabsTrigger$1.displayName=TRIGGER_NAME$1;var CONTENT_NAME$1="TabsContent",TabsContent$1=reactExports.forwardRef((Mt,st)=>{const{__scopeTabs:nn,value:rn,forceMount:on,children:an,...sn}=Mt,un=useTabsContext(CONTENT_NAME$1,nn),Xr=makeTriggerId(un.baseId,rn),to=makeContentId(un.baseId,rn),uo=rn===un.value,hn=reactExports.useRef(uo);return reactExports.useEffect(()=>{const fn=requestAnimationFrame(()=>hn.current=!1);return()=>cancelAnimationFrame(fn)},[]),jsxRuntimeExports.jsx(Presence,{present:on||uo,children:({present:fn})=>jsxRuntimeExports.jsx(Primitive.div,{"data-state":uo?"active":"inactive","data-orientation":un.orientation,role:"tabpanel","aria-labelledby":Xr,hidden:!fn,id:to,tabIndex:0,...sn,ref:st,style:{...Mt.style,animationDuration:hn.current?"0s":void 0},children:fn&&an})})});TabsContent$1.displayName=CONTENT_NAME$1;function makeTriggerId(Mt,st){return`${Mt}-trigger-${st}`}function makeContentId(Mt,st){return`${Mt}-content-${st}`}var Root2=Tabs$1,List=TabsList$1,Trigger$1=TabsTrigger$1,Content$1=TabsContent$1;const Tabs=Root2,TabsList=reactExports.forwardRef(({className:Mt,...st},nn)=>jsxRuntimeExports.jsx(List,{ref:nn,className:cn("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",Mt),...st}));TabsList.displayName=List.displayName;const TabsTrigger=reactExports.forwardRef(({className:Mt,...st},nn)=>jsxRuntimeExports.jsx(Trigger$1,{ref:nn,className:cn("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",Mt),...st}));TabsTrigger.displayName=Trigger$1.displayName;const TabsContent=reactExports.forwardRef(({className:Mt,...st},nn)=>jsxRuntimeExports.jsx(Content$1,{ref:nn,className:cn("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",Mt),...st}));TabsContent.displayName=Content$1.displayName;var isArray$f=Array.isArray,isArray_1=isArray$f,freeGlobal$1=typeof commonjsGlobal=="object"&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal,_freeGlobal=freeGlobal$1,freeGlobal=_freeGlobal,freeSelf=typeof self=="object"&&self&&self.Object===Object&&self,root$9=freeGlobal||freeSelf||Function("return this")(),_root=root$9,root$8=_root,Symbol$7=root$8.Symbol,_Symbol=Symbol$7,Symbol$6=_Symbol,objectProto$c=Object.prototype,hasOwnProperty$a=objectProto$c.hasOwnProperty,nativeObjectToString$1=objectProto$c.toString,symToStringTag$1=Symbol$6?Symbol$6.toStringTag:void 0;function getRawTag$1(Mt){var st=hasOwnProperty$a.call(Mt,symToStringTag$1),nn=Mt[symToStringTag$1];try{Mt[symToStringTag$1]=void 0;var rn=!0}catch{}var on=nativeObjectToString$1.call(Mt);return rn&&(st?Mt[symToStringTag$1]=nn:delete Mt[symToStringTag$1]),on}var _getRawTag=getRawTag$1,objectProto$b=Object.prototype,nativeObjectToString=objectProto$b.toString;function objectToString$1(Mt){return nativeObjectToString.call(Mt)}var _objectToString=objectToString$1,Symbol$5=_Symbol,getRawTag=_getRawTag,objectToString=_objectToString,nullTag="[object Null]",undefinedTag="[object Undefined]",symToStringTag=Symbol$5?Symbol$5.toStringTag:void 0;function baseGetTag$9(Mt){return Mt==null?Mt===void 0?undefinedTag:nullTag:symToStringTag&&symToStringTag in Object(Mt)?getRawTag(Mt):objectToString(Mt)}var _baseGetTag=baseGetTag$9;function isObjectLike$9(Mt){return Mt!=null&&typeof Mt=="object"}var isObjectLike_1=isObjectLike$9,baseGetTag$8=_baseGetTag,isObjectLike$8=isObjectLike_1,symbolTag$1="[object Symbol]";function isSymbol$6(Mt){return typeof Mt=="symbol"||isObjectLike$8(Mt)&&baseGetTag$8(Mt)==symbolTag$1}var isSymbol_1=isSymbol$6,isArray$e=isArray_1,isSymbol$5=isSymbol_1,reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/;function isKey$3(Mt,st){if(isArray$e(Mt))return!1;var nn=typeof Mt;return nn=="number"||nn=="symbol"||nn=="boolean"||Mt==null||isSymbol$5(Mt)?!0:reIsPlainProp.test(Mt)||!reIsDeepProp.test(Mt)||st!=null&&Mt in Object(st)}var _isKey=isKey$3;function isObject$7(Mt){var st=typeof Mt;return Mt!=null&&(st=="object"||st=="function")}var isObject_1=isObject$7;const isObject$8=getDefaultExportFromCjs(isObject_1);var baseGetTag$7=_baseGetTag,isObject$6=isObject_1,asyncTag="[object AsyncFunction]",funcTag$1="[object Function]",genTag="[object GeneratorFunction]",proxyTag="[object Proxy]";function isFunction$2(Mt){if(!isObject$6(Mt))return!1;var st=baseGetTag$7(Mt);return st==funcTag$1||st==genTag||st==asyncTag||st==proxyTag}var isFunction_1=isFunction$2;const isFunction$3=getDefaultExportFromCjs(isFunction_1);var root$7=_root,coreJsData$1=root$7["__core-js_shared__"],_coreJsData=coreJsData$1,coreJsData=_coreJsData,maskSrcKey=function(){var Mt=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||"");return Mt?"Symbol(src)_1."+Mt:""}();function isMasked$1(Mt){return!!maskSrcKey&&maskSrcKey in Mt}var _isMasked=isMasked$1,funcProto$2=Function.prototype,funcToString$2=funcProto$2.toString;function toSource$2(Mt){if(Mt!=null){try{return funcToString$2.call(Mt)}catch{}try{return Mt+""}catch{}}return""}var _toSource=toSource$2,isFunction$1=isFunction_1,isMasked=_isMasked,isObject$5=isObject_1,toSource$1=_toSource,reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reIsHostCtor=/^\[object .+?Constructor\]$/,funcProto$1=Function.prototype,objectProto$a=Object.prototype,funcToString$1=funcProto$1.toString,hasOwnProperty$9=objectProto$a.hasOwnProperty,reIsNative=RegExp("^"+funcToString$1.call(hasOwnProperty$9).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function baseIsNative$1(Mt){if(!isObject$5(Mt)||isMasked(Mt))return!1;var st=isFunction$1(Mt)?reIsNative:reIsHostCtor;return st.test(toSource$1(Mt))}var _baseIsNative=baseIsNative$1;function getValue$1(Mt,st){return Mt==null?void 0:Mt[st]}var _getValue=getValue$1,baseIsNative=_baseIsNative,getValue=_getValue;function getNative$7(Mt,st){var nn=getValue(Mt,st);return baseIsNative(nn)?nn:void 0}var _getNative=getNative$7,getNative$6=_getNative,nativeCreate$4=getNative$6(Object,"create"),_nativeCreate=nativeCreate$4,nativeCreate$3=_nativeCreate;function hashClear$1(){this.__data__=nativeCreate$3?nativeCreate$3(null):{},this.size=0}var _hashClear=hashClear$1;function hashDelete$1(Mt){var st=this.has(Mt)&&delete this.__data__[Mt];return this.size-=st?1:0,st}var _hashDelete=hashDelete$1,nativeCreate$2=_nativeCreate,HASH_UNDEFINED$2="__lodash_hash_undefined__",objectProto$9=Object.prototype,hasOwnProperty$8=objectProto$9.hasOwnProperty;function hashGet$1(Mt){var st=this.__data__;if(nativeCreate$2){var nn=st[Mt];return nn===HASH_UNDEFINED$2?void 0:nn}return hasOwnProperty$8.call(st,Mt)?st[Mt]:void 0}var _hashGet=hashGet$1,nativeCreate$1=_nativeCreate,objectProto$8=Object.prototype,hasOwnProperty$7=objectProto$8.hasOwnProperty;function hashHas$1(Mt){var st=this.__data__;return nativeCreate$1?st[Mt]!==void 0:hasOwnProperty$7.call(st,Mt)}var _hashHas=hashHas$1,nativeCreate=_nativeCreate,HASH_UNDEFINED$1="__lodash_hash_undefined__";function hashSet$1(Mt,st){var nn=this.__data__;return this.size+=this.has(Mt)?0:1,nn[Mt]=nativeCreate&&st===void 0?HASH_UNDEFINED$1:st,this}var _hashSet=hashSet$1,hashClear=_hashClear,hashDelete=_hashDelete,hashGet=_hashGet,hashHas=_hashHas,hashSet=_hashSet;function Hash$1(Mt){var st=-1,nn=Mt==null?0:Mt.length;for(this.clear();++st<nn;){var rn=Mt[st];this.set(rn[0],rn[1])}}Hash$1.prototype.clear=hashClear;Hash$1.prototype.delete=hashDelete;Hash$1.prototype.get=hashGet;Hash$1.prototype.has=hashHas;Hash$1.prototype.set=hashSet;var _Hash=Hash$1;function listCacheClear$1(){this.__data__=[],this.size=0}var _listCacheClear=listCacheClear$1;function eq$3(Mt,st){return Mt===st||Mt!==Mt&&st!==st}var eq_1=eq$3,eq$2=eq_1;function assocIndexOf$4(Mt,st){for(var nn=Mt.length;nn--;)if(eq$2(Mt[nn][0],st))return nn;return-1}var _assocIndexOf=assocIndexOf$4,assocIndexOf$3=_assocIndexOf,arrayProto=Array.prototype,splice=arrayProto.splice;function listCacheDelete$1(Mt){var st=this.__data__,nn=assocIndexOf$3(st,Mt);if(nn<0)return!1;var rn=st.length-1;return nn==rn?st.pop():splice.call(st,nn,1),--this.size,!0}var _listCacheDelete=listCacheDelete$1,assocIndexOf$2=_assocIndexOf;function listCacheGet$1(Mt){var st=this.__data__,nn=assocIndexOf$2(st,Mt);return nn<0?void 0:st[nn][1]}var _listCacheGet=listCacheGet$1,assocIndexOf$1=_assocIndexOf;function listCacheHas$1(Mt){return assocIndexOf$1(this.__data__,Mt)>-1}var _listCacheHas=listCacheHas$1,assocIndexOf=_assocIndexOf;function listCacheSet$1(Mt,st){var nn=this.__data__,rn=assocIndexOf(nn,Mt);return rn<0?(++this.size,nn.push([Mt,st])):nn[rn][1]=st,this}var _listCacheSet=listCacheSet$1,listCacheClear=_listCacheClear,listCacheDelete=_listCacheDelete,listCacheGet=_listCacheGet,listCacheHas=_listCacheHas,listCacheSet=_listCacheSet;function ListCache$4(Mt){var st=-1,nn=Mt==null?0:Mt.length;for(this.clear();++st<nn;){var rn=Mt[st];this.set(rn[0],rn[1])}}ListCache$4.prototype.clear=listCacheClear;ListCache$4.prototype.delete=listCacheDelete;ListCache$4.prototype.get=listCacheGet;ListCache$4.prototype.has=listCacheHas;ListCache$4.prototype.set=listCacheSet;var _ListCache=ListCache$4,getNative$5=_getNative,root$6=_root,Map$4=getNative$5(root$6,"Map"),_Map=Map$4,Hash=_Hash,ListCache$3=_ListCache,Map$3=_Map;function mapCacheClear$1(){this.size=0,this.__data__={hash:new Hash,map:new(Map$3||ListCache$3),string:new Hash}}var _mapCacheClear=mapCacheClear$1;function isKeyable$1(Mt){var st=typeof Mt;return st=="string"||st=="number"||st=="symbol"||st=="boolean"?Mt!=="__proto__":Mt===null}var _isKeyable=isKeyable$1,isKeyable=_isKeyable;function getMapData$4(Mt,st){var nn=Mt.__data__;return isKeyable(st)?nn[typeof st=="string"?"string":"hash"]:nn.map}var _getMapData=getMapData$4,getMapData$3=_getMapData;function mapCacheDelete$1(Mt){var st=getMapData$3(this,Mt).delete(Mt);return this.size-=st?1:0,st}var _mapCacheDelete=mapCacheDelete$1,getMapData$2=_getMapData;function mapCacheGet$1(Mt){return getMapData$2(this,Mt).get(Mt)}var _mapCacheGet=mapCacheGet$1,getMapData$1=_getMapData;function mapCacheHas$1(Mt){return getMapData$1(this,Mt).has(Mt)}var _mapCacheHas=mapCacheHas$1,getMapData=_getMapData;function mapCacheSet$1(Mt,st){var nn=getMapData(this,Mt),rn=nn.size;return nn.set(Mt,st),this.size+=nn.size==rn?0:1,this}var _mapCacheSet=mapCacheSet$1,mapCacheClear=_mapCacheClear,mapCacheDelete=_mapCacheDelete,mapCacheGet=_mapCacheGet,mapCacheHas=_mapCacheHas,mapCacheSet=_mapCacheSet;function MapCache$3(Mt){var st=-1,nn=Mt==null?0:Mt.length;for(this.clear();++st<nn;){var rn=Mt[st];this.set(rn[0],rn[1])}}MapCache$3.prototype.clear=mapCacheClear;MapCache$3.prototype.delete=mapCacheDelete;MapCache$3.prototype.get=mapCacheGet;MapCache$3.prototype.has=mapCacheHas;MapCache$3.prototype.set=mapCacheSet;var _MapCache=MapCache$3,MapCache$2=_MapCache,FUNC_ERROR_TEXT$2="Expected a function";function memoize$2(Mt,st){if(typeof Mt!="function"||st!=null&&typeof st!="function")throw new TypeError(FUNC_ERROR_TEXT$2);var nn=function(){var rn=arguments,on=st?st.apply(this,rn):rn[0],an=nn.cache;if(an.has(on))return an.get(on);var sn=Mt.apply(this,rn);return nn.cache=an.set(on,sn)||an,sn};return nn.cache=new(memoize$2.Cache||MapCache$2),nn}memoize$2.Cache=MapCache$2;var memoize_1=memoize$2;const memoize$3=getDefaultExportFromCjs(memoize_1);var memoize$1=memoize_1,MAX_MEMOIZE_SIZE=500;function memoizeCapped$1(Mt){var st=memoize$1(Mt,function(rn){return nn.size===MAX_MEMOIZE_SIZE&&nn.clear(),rn}),nn=st.cache;return st}var _memoizeCapped=memoizeCapped$1,memoizeCapped=_memoizeCapped,rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,reEscapeChar=/\\(\\)?/g,stringToPath$1=memoizeCapped(function(Mt){var st=[];return Mt.charCodeAt(0)===46&&st.push(""),Mt.replace(rePropName,function(nn,rn,on,an){st.push(on?an.replace(reEscapeChar,"$1"):rn||nn)}),st}),_stringToPath=stringToPath$1;function arrayMap$3(Mt,st){for(var nn=-1,rn=Mt==null?0:Mt.length,on=Array(rn);++nn<rn;)on[nn]=st(Mt[nn],nn,Mt);return on}var _arrayMap=arrayMap$3,Symbol$4=_Symbol,arrayMap$2=_arrayMap,isArray$d=isArray_1,isSymbol$4=isSymbol_1,INFINITY$3=1/0,symbolProto$1=Symbol$4?Symbol$4.prototype:void 0,symbolToString=symbolProto$1?symbolProto$1.toString:void 0;function baseToString$1(Mt){if(typeof Mt=="string")return Mt;if(isArray$d(Mt))return arrayMap$2(Mt,baseToString$1)+"";if(isSymbol$4(Mt))return symbolToString?symbolToString.call(Mt):"";var st=Mt+"";return st=="0"&&1/Mt==-INFINITY$3?"-0":st}var _baseToString=baseToString$1,baseToString=_baseToString;function toString$3(Mt){return Mt==null?"":baseToString(Mt)}var toString_1=toString$3,isArray$c=isArray_1,isKey$2=_isKey,stringToPath=_stringToPath,toString$2=toString_1;function castPath$2(Mt,st){return isArray$c(Mt)?Mt:isKey$2(Mt,st)?[Mt]:stringToPath(toString$2(Mt))}var _castPath=castPath$2,isSymbol$3=isSymbol_1,INFINITY$2=1/0;function toKey$4(Mt){if(typeof Mt=="string"||isSymbol$3(Mt))return Mt;var st=Mt+"";return st=="0"&&1/Mt==-INFINITY$2?"-0":st}var _toKey=toKey$4,castPath$1=_castPath,toKey$3=_toKey;function baseGet$3(Mt,st){st=castPath$1(st,Mt);for(var nn=0,rn=st.length;Mt!=null&&nn<rn;)Mt=Mt[toKey$3(st[nn++])];return nn&&nn==rn?Mt:void 0}var _baseGet=baseGet$3,baseGet$2=_baseGet;function get$1(Mt,st,nn){var rn=Mt==null?void 0:baseGet$2(Mt,st);return rn===void 0?nn:rn}var get_1=get$1;const get$2=getDefaultExportFromCjs(get_1);function isNil(Mt){return Mt==null}var isNil_1=isNil;const isNil$1=getDefaultExportFromCjs(isNil_1);var baseGetTag$6=_baseGetTag,isArray$b=isArray_1,isObjectLike$7=isObjectLike_1,stringTag$2="[object String]";function isString(Mt){return typeof Mt=="string"||!isArray$b(Mt)&&isObjectLike$7(Mt)&&baseGetTag$6(Mt)==stringTag$2}var isString_1=isString;const isString$1=getDefaultExportFromCjs(isString_1);var reactIs={exports:{}},reactIs_production_min={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b=Symbol.for("react.element"),c$1=Symbol.for("react.portal"),d=Symbol.for("react.fragment"),e=Symbol.for("react.strict_mode"),f=Symbol.for("react.profiler"),g=Symbol.for("react.provider"),h=Symbol.for("react.context"),k$1=Symbol.for("react.server_context"),l=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),n=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),q=Symbol.for("react.lazy"),t=Symbol.for("react.offscreen"),u;u=Symbol.for("react.module.reference");function v(Mt){if(typeof Mt=="object"&&Mt!==null){var st=Mt.$$typeof;switch(st){case b:switch(Mt=Mt.type,Mt){case d:case f:case e:case m:case n:return Mt;default:switch(Mt=Mt&&Mt.$$typeof,Mt){case k$1:case h:case l:case q:case p:case g:return Mt;default:return st}}case c$1:return st}}}reactIs_production_min.ContextConsumer=h;reactIs_production_min.ContextProvider=g;reactIs_production_min.Element=b;reactIs_production_min.ForwardRef=l;reactIs_production_min.Fragment=d;reactIs_production_min.Lazy=q;reactIs_production_min.Memo=p;reactIs_production_min.Portal=c$1;reactIs_production_min.Profiler=f;reactIs_production_min.StrictMode=e;reactIs_production_min.Suspense=m;reactIs_production_min.SuspenseList=n;reactIs_production_min.isAsyncMode=function(){return!1};reactIs_production_min.isConcurrentMode=function(){return!1};reactIs_production_min.isContextConsumer=function(Mt){return v(Mt)===h};reactIs_production_min.isContextProvider=function(Mt){return v(Mt)===g};reactIs_production_min.isElement=function(Mt){return typeof Mt=="object"&&Mt!==null&&Mt.$$typeof===b};reactIs_production_min.isForwardRef=function(Mt){return v(Mt)===l};reactIs_production_min.isFragment=function(Mt){return v(Mt)===d};reactIs_production_min.isLazy=function(Mt){return v(Mt)===q};reactIs_production_min.isMemo=function(Mt){return v(Mt)===p};reactIs_production_min.isPortal=function(Mt){return v(Mt)===c$1};reactIs_production_min.isProfiler=function(Mt){return v(Mt)===f};reactIs_production_min.isStrictMode=function(Mt){return v(Mt)===e};reactIs_production_min.isSuspense=function(Mt){return v(Mt)===m};reactIs_production_min.isSuspenseList=function(Mt){return v(Mt)===n};reactIs_production_min.isValidElementType=function(Mt){return typeof Mt=="string"||typeof Mt=="function"||Mt===d||Mt===f||Mt===e||Mt===m||Mt===n||Mt===t||typeof Mt=="object"&&Mt!==null&&(Mt.$$typeof===q||Mt.$$typeof===p||Mt.$$typeof===g||Mt.$$typeof===h||Mt.$$typeof===l||Mt.$$typeof===u||Mt.getModuleId!==void 0)};reactIs_production_min.typeOf=v;reactIs.exports=reactIs_production_min;var reactIsExports=reactIs.exports,baseGetTag$5=_baseGetTag,isObjectLike$6=isObjectLike_1,numberTag$2="[object Number]";function isNumber$2(Mt){return typeof Mt=="number"||isObjectLike$6(Mt)&&baseGetTag$5(Mt)==numberTag$2}var isNumber_1=isNumber$2;const isNumber$3=getDefaultExportFromCjs(isNumber_1);var isNumber$1=isNumber_1;function isNaN$1(Mt){return isNumber$1(Mt)&&Mt!=+Mt}var _isNaN=isNaN$1;const isNan=getDefaultExportFromCjs(_isNaN);var mathSign=function Mt(st){return st===0?0:st>0?1:-1},isPercent=function Mt(st){return isString$1(st)&&st.indexOf("%")===st.length-1},isNumber=function Mt(st){return isNumber$3(st)&&!isNan(st)},isNumOrStr=function Mt(st){return isNumber(st)||isString$1(st)},idCounter=0,uniqueId=function Mt(st){var nn=++idCounter;return"".concat(st||"").concat(nn)},getPercentValue=function Mt(st,nn){var rn=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,on=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!isNumber(st)&&!isString$1(st))return rn;var an;if(isPercent(st)){var sn=st.indexOf("%");an=nn*parseFloat(st.slice(0,sn))/100}else an=+st;return isNan(an)&&(an=rn),on&&an>nn&&(an=nn),an},getAnyElementOfObject=function Mt(st){if(!st)return null;var nn=Object.keys(st);return nn&&nn.length?st[nn[0]]:null},hasDuplicate=function Mt(st){if(!Array.isArray(st))return!1;for(var nn=st.length,rn={},on=0;on<nn;on++)if(!rn[st[on]])rn[st[on]]=!0;else return!0;return!1},interpolateNumber$2=function Mt(st,nn){return isNumber(st)&&isNumber(nn)?function(rn){return st+rn*(nn-st)}:function(){return nn}};function findEntryInArray(Mt,st,nn){return!Mt||!Mt.length?null:Mt.find(function(rn){return rn&&(typeof st=="function"?st(rn):get$2(rn,st))===nn})}function shallowEqual(Mt,st){for(var nn in Mt)if({}.hasOwnProperty.call(Mt,nn)&&(!{}.hasOwnProperty.call(st,nn)||Mt[nn]!==st[nn]))return!1;for(var rn in st)if({}.hasOwnProperty.call(st,rn)&&!{}.hasOwnProperty.call(Mt,rn))return!1;return!0}function _typeof$L(Mt){"@babel/helpers - typeof";return _typeof$L=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(st){return typeof st}:function(st){return st&&typeof Symbol=="function"&&st.constructor===Symbol&&st!==Symbol.prototype?"symbol":typeof st},_typeof$L(Mt)}var SVGContainerPropKeys=["viewBox","children"],SVGElementPropKeys=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],PolyElementKeys=["points","pathLength"],FilteredElementKeyMap={svg:SVGContainerPropKeys,polygon:PolyElementKeys,polyline:PolyElementKeys},EventKeys=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],adaptEventHandlers=function Mt(st,nn){if(!st||typeof st=="function"||typeof st=="boolean")return null;var rn=st;if(reactExports.isValidElement(st)&&(rn=st.props),!isObject$8(rn))return null;var on={};return Object.keys(rn).forEach(function(an){EventKeys.includes(an)&&(on[an]=nn||function(sn){return rn[an](rn,sn)})}),on},getEventHandlerOfChild=function Mt(st,nn,rn){return function(on){return st(nn,rn,on),null}},adaptEventsOfChild=function Mt(st,nn,rn){if(!isObject$8(st)||_typeof$L(st)!=="object")return null;var on=null;return Object.keys(st).forEach(function(an){var sn=st[an];EventKeys.includes(an)&&typeof sn=="function"&&(on||(on={}),on[an]=getEventHandlerOfChild(sn,nn,rn))}),on},_excluded$j=["children"],_excluded2$7=["children"];function _objectWithoutProperties$j(Mt,st){if(Mt==null)return{};var nn=_objectWithoutPropertiesLoose$j(Mt,st),rn,on;if(Object.getOwnPropertySymbols){var an=Object.getOwnPropertySymbols(Mt);for(on=0;on<an.length;on++)rn=an[on],!(st.indexOf(rn)>=0)&&Object.prototype.propertyIsEnumerable.call(Mt,rn)&&(nn[rn]=Mt[rn])}return nn}function _objectWithoutPropertiesLoose$j(Mt,st){if(Mt==null)return{};var nn={};for(var rn in Mt)if(Object.prototype.hasOwnProperty.call(Mt,rn)){if(st.indexOf(rn)>=0)continue;nn[rn]=Mt[rn]}return nn}function _typeof$K(Mt){"@babel/helpers - typeof";return _typeof$K=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(st){return typeof st}:function(st){return st&&typeof Symbol=="function"&&st.constructor===Symbol&&st!==Symbol.prototype?"symbol":typeof st},_typeof$K(Mt)}var REACT_BROWSER_EVENT_MAP={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart"},getDisplayName=function Mt(st){return typeof st=="string"?st:st?st.displayName||st.name||"Component":""},lastChildren=null,lastResult=null,toArray=function Mt(st){if(st===lastChildren&&Array.isArray(lastResult))return lastResult;var nn=[];return reactExports.Children.forEach(st,function(rn){isNil$1(rn)||(reactIsExports.isFragment(rn)?nn=nn.concat(Mt(rn.props.children)):nn.push(rn))}),lastResult=nn,lastChildren=st,nn};function findAllByType(Mt,st){var nn=[],rn=[];return Array.isArray(st)?rn=st.map(function(on){return getDisplayName(on)}):rn=[getDisplayName(st)],toArray(Mt).forEach(function(on){var an=get$2(on,"type.displayName")||get$2(on,"type.name");rn.indexOf(an)!==-1&&nn.push(on)}),nn}function findChildByType(Mt,st){var nn=findAllByType(Mt,st);return nn&&nn[0]}var validateWidthHeight=function Mt(st){if(!st||!st.props)return!1;var nn=st.props,rn=nn.width,on=nn.height;return!(!isNumber(rn)||rn<=0||!isNumber(on)||on<=0)},SVG_TAGS=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],isSvgElement=function Mt(st){return st&&st.type&&isString$1(st.type)&&SVG_TAGS.indexOf(st.type)>=0},hasClipDot=function Mt(st){return st&&_typeof$K(st)==="object"&&"clipDot"in st},isValidSpreadableProp=function Mt(st,nn,rn,on){var an,sn=(an=FilteredElementKeyMap==null?void 0:FilteredElementKeyMap[on])!==null&&an!==void 0?an:[];return!isFunction$3(st)&&(on&&sn.includes(nn)||SVGElementPropKeys.includes(nn))||rn&&EventKeys.includes(nn)},filterProps=function Mt(st,nn,rn){if(!st||typeof st=="function"||typeof st=="boolean")return null;var on=st;if(reactExports.isValidElement(st)&&(on=st.props),!isObject$8(on))return null;var an={};return Object.keys(on).forEach(function(sn){var un;isValidSpreadableProp((un=on)===null||un===void 0?void 0:un[sn],sn,nn,rn)&&(an[sn]=on[sn])}),an},isChildrenEqual=function Mt(st,nn){if(st===nn)return!0;var rn=reactExports.Children.count(st);if(rn!==reactExports.Children.count(nn))return!1;if(rn===0)return!0;if(rn===1)return isSingleChildEqual(Array.isArray(st)?st[0]:st,Array.isArray(nn)?nn[0]:nn);for(var on=0;on<rn;on++){var an=st[on],sn=nn[on];if(Array.isArray(an)||Array.isArray(sn)){if(!Mt(an,sn))return!1}else if(!isSingleChildEqual(an,sn))return!1}return!0},isSingleChildEqual=function Mt(st,nn){if(isNil$1(st)&&isNil$1(nn))return!0;if(!isNil$1(st)&&!isNil$1(nn)){var rn=st.props||{},on=rn.children,an=_objectWithoutProperties$j(rn,_excluded$j),sn=nn.props||{},un=sn.children,Xr=_objectWithoutProperties$j(sn,_excluded2$7);return on&&un?shallowEqual(an,Xr)&&isChildrenEqual(on,un):!on&&!un?shallowEqual(an,Xr):!1}return!1},renderByOrder=function Mt(st,nn){var rn=[],on={};return toArray(st).forEach(function(an,sn){if(isSvgElement(an))rn.push(an);else if(an){var un=getDisplayName(an.type),Xr=nn[un]||{},to=Xr.handler,uo=Xr.once;if(to&&(!uo||!on[un])){var hn=to(an,un,sn);rn.push(hn),on[un]=!0}}}),rn},getReactEventByType=function Mt(st){var nn=st&&st.type;return nn&&REACT_BROWSER_EVENT_MAP[nn]?REACT_BROWSER_EVENT_MAP[nn]:null},parseChildIndex=function Mt(st,nn){return toArray(nn).indexOf(st)},_excluded$i=["children","width","height","viewBox","className","style","title","desc"];function _extends$u(){return _extends$u=Object.assign?Object.assign.bind():function(Mt){for(var st=1;st<arguments.length;st++){var nn=arguments[st];for(var rn in nn)Object.prototype.hasOwnProperty.call(nn,rn)&&(Mt[rn]=nn[rn])}return Mt},_extends$u.apply(this,arguments)}function _objectWithoutProperties$i(Mt,st){if(Mt==null)return{};var nn=_objectWithoutPropertiesLoose$i(Mt,st),rn,on;if(Object.getOwnPropertySymbols){var an=Object.getOwnPropertySymbols(Mt);for(on=0;on<an.length;on++)rn=an[on],!(st.indexOf(rn)>=0)&&Object.prototype.propertyIsEnumerable.call(Mt,rn)&&(nn[rn]=Mt[rn])}return nn}function _objectWithoutPropertiesLoose$i(Mt,st){if(Mt==null)return{};var nn={};for(var rn in Mt)if(Object.prototype.hasOwnProperty.call(Mt,rn)){if(st.indexOf(rn)>=0)continue;nn[rn]=Mt[rn]}return nn}function Surface(Mt){var st=Mt.children,nn=Mt.width,rn=Mt.height,on=Mt.viewBox,an=Mt.className,sn=Mt.style,un=Mt.title,Xr=Mt.desc,to=_objectWithoutProperties$i(Mt,_excluded$i),uo=on||{width:nn,height:rn,x:0,y:0},hn=clsx("recharts-surface",an);return React.createElement("svg",_extends$u({},filterProps(to,!0,"svg"),{className:hn,width:nn,height:rn,style:sn,viewBox:"".concat(uo.x," ").concat(uo.y," ").concat(uo.width," ").concat(uo.height)}),React.createElement("title",null,un),React.createElement("desc",null,Xr),st)}var _excluded$h=["children","className"];function _extends$t(){return _extends$t=Object.assign?Object.assign.bind():function(Mt){for(var st=1;st<arguments.length;st++){var nn=arguments[st];for(var rn in nn)Object.prototype.hasOwnProperty.call(nn,rn)&&(Mt[rn]=nn[rn])}return Mt},_extends$t.apply(this,arguments)}function _objectWithoutProperties$h(Mt,st){if(Mt==null)return{};var nn=_objectWithoutPropertiesLoose$h(Mt,st),rn,on;if(Object.getOwnPropertySymbols){var an=Object.getOwnPropertySymbols(Mt);for(on=0;on<an.length;on++)rn=an[on],!(st.indexOf(rn)>=0)&&Object.prototype.propertyIsEnumerable.call(Mt,rn)&&(nn[rn]=Mt[rn])}return nn}function _objectWithoutPropertiesLoose$h(Mt,st){if(Mt==null)return{};var nn={};for(var rn in Mt)if(Object.prototype.hasOwnProperty.call(Mt,rn)){if(st.indexOf(rn)>=0)continue;nn[rn]=Mt[rn]}return nn}var Layer=React.forwardRef(function(Mt,st){var nn=Mt.children,rn=Mt.className,on=_objectWithoutProperties$h(Mt,_excluded$h),an=clsx("recharts-layer",rn);return React.createElement("g",_extends$t({className:an},filterProps(on,!0),{ref:st}),nn)}),warn=function Mt(st,nn){for(var rn=arguments.length,on=new Array(rn>2?rn-2:0),an=2;an<rn;an++)on[an-2]=arguments[an]};function baseSlice$1(Mt,st,nn){var rn=-1,on=Mt.length;st<0&&(st=-st>on?0:on+st),nn=nn>on?on:nn,nn<0&&(nn+=on),on=st>nn?0:nn-st>>>0,st>>>=0;for(var an=Array(on);++rn<on;)an[rn]=Mt[rn+st];return an}var _baseSlice=baseSlice$1,baseSlice=_baseSlice;function castSlice$1(Mt,st,nn){var rn=Mt.length;return nn=nn===void 0?rn:nn,!st&&nn>=rn?Mt:baseSlice(Mt,st,nn)}var _castSlice=castSlice$1,rsAstralRange$1="\\ud800-\\udfff",rsComboMarksRange$1="\\u0300-\\u036f",reComboHalfMarksRange$1="\\ufe20-\\ufe2f",rsComboSymbolsRange$1="\\u20d0-\\u20ff",rsComboRange$1=rsComboMarksRange$1+reComboHalfMarksRange$1+rsComboSymbolsRange$1,rsVarRange$1="\\ufe0e\\ufe0f",rsZWJ$1="\\u200d",reHasUnicode=RegExp("["+rsZWJ$1+rsAstralRange$1+rsComboRange$1+rsVarRange$1+"]");function hasUnicode$2(Mt){return reHasUnicode.test(Mt)}var _hasUnicode=hasUnicode$2;function asciiToArray$1(Mt){return Mt.split("")}var _asciiToArray=asciiToArray$1,rsAstralRange="\\ud800-\\udfff",rsComboMarksRange="\\u0300-\\u036f",reComboHalfMarksRange="\\ufe20-\\ufe2f",rsComboSymbolsRange="\\u20d0-\\u20ff",rsComboRange=rsComboMarksRange+reComboHalfMarksRange+rsComboSymbolsRange,rsVarRange="\\ufe0e\\ufe0f",rsAstral="["+rsAstralRange+"]",rsCombo="["+rsComboRange+"]",rsFitz="\\ud83c[\\udffb-\\udfff]",rsModifier="(?:"+rsCombo+"|"+rsFitz+")",rsNonAstral="[^"+rsAstralRange+"]",rsRegional="(?:\\ud83c[\\udde6-\\uddff]){2}",rsSurrPair="[\\ud800-\\udbff][\\udc00-\\udfff]",rsZWJ="\\u200d",reOptMod=rsModifier+"?",rsOptVar="["+rsVarRange+"]?",rsOptJoin="(?:"+rsZWJ+"(?:"+[rsNonAstral,rsRegional,rsSurrPair].join("|")+")"+rsOptVar+reOptMod+")*",rsSeq=rsOptVar+reOptMod+rsOptJoin,rsSymbol="(?:"+[rsNonAstral+rsCombo+"?",rsCombo,rsRegional,rsSurrPair,rsAstral].join("|")+")",reUnicode=RegExp(rsFitz+"(?="+rsFitz+")|"+rsSymbol+rsSeq,"g");function unicodeToArray$1(Mt){return Mt.match(reUnicode)||[]}var _unicodeToArray=unicodeToArray$1,asciiToArray=_asciiToArray,hasUnicode$1=_hasUnicode,unicodeToArray=_unicodeToArray;function stringToArray$1(Mt){return hasUnicode$1(Mt)?unicodeToArray(Mt):asciiToArray(Mt)}var _stringToArray=stringToArray$1,castSlice=_castSlice,hasUnicode=_hasUnicode,stringToArray=_stringToArray,toString$1=toString_1;function createCaseFirst$1(Mt){return function(st){st=toString$1(st);var nn=hasUnicode(st)?stringToArray(st):void 0,rn=nn?nn[0]:st.charAt(0),on=nn?castSlice(nn,1).join(""):st.slice(1);return rn[Mt]()+on}}var _createCaseFirst=createCaseFirst$1,createCaseFirst=_createCaseFirst,upperFirst=createCaseFirst("toUpperCase"),upperFirst_1=upperFirst;const upperFirst$1=getDefaultExportFromCjs(upperFirst_1);function constant$3(Mt){return function(){return Mt}}const cos=Math.cos,sin=Math.sin,sqrt$1=Math.sqrt,pi$1=Math.PI,tau$1=2*pi$1,pi=Math.PI,tau=2*pi,epsilon=1e-6,tauEpsilon=tau-epsilon;function append(Mt){this._+=Mt[0];for(let st=1,nn=Mt.length;st<nn;++st)this._+=arguments[st]+Mt[st]}function appendRound(Mt){let st=Math.floor(Mt);if(!(st>=0))throw new Error(`invalid digits: ${Mt}`);if(st>15)return append;const nn=10**st;return function(rn){this._+=rn[0];for(let on=1,an=rn.length;on<an;++on)this._+=Math.round(arguments[on]*nn)/nn+rn[on]}}class Path{constructor(st){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=st==null?append:appendRound(st)}moveTo(st,nn){this._append`M${this._x0=this._x1=+st},${this._y0=this._y1=+nn}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(st,nn){this._append`L${this._x1=+st},${this._y1=+nn}`}quadraticCurveTo(st,nn,rn,on){this._append`Q${+st},${+nn},${this._x1=+rn},${this._y1=+on}`}bezierCurveTo(st,nn,rn,on,an,sn){this._append`C${+st},${+nn},${+rn},${+on},${this._x1=+an},${this._y1=+sn}`}arcTo(st,nn,rn,on,an){if(st=+st,nn=+nn,rn=+rn,on=+on,an=+an,an<0)throw new Error(`negative radius: ${an}`);let sn=this._x1,un=this._y1,Xr=rn-st,to=on-nn,uo=sn-st,hn=un-nn,fn=uo*uo+hn*hn;if(this._x1===null)this._append`M${this._x1=st},${this._y1=nn}`;else if(fn>epsilon)if(!(Math.abs(hn*Xr-to*uo)>epsilon)||!an)this._append`L${this._x1=st},${this._y1=nn}`;else{let co=rn-sn,lo=on-un,fo=Xr*Xr+to*to,ho=co*co+lo*lo,mo=Math.sqrt(fo),Uo=Math.sqrt(fn),_d=an*Math.tan((pi-Math.acos((fo+fn-ho)/(2*mo*Uo)))/2),tp=_d/Uo,ep=_d/mo;Math.abs(tp-1)>epsilon&&this._append`L${st+tp*uo},${nn+tp*hn}`,this._append`A${an},${an},0,0,${+(hn*co>uo*lo)},${this._x1=st+ep*Xr},${this._y1=nn+ep*to}`}}arc(st,nn,rn,on,an,sn){if(st=+st,nn=+nn,rn=+rn,sn=!!sn,rn<0)throw new Error(`negative radius: ${rn}`);let un=rn*Math.cos(on),Xr=rn*Math.sin(on),to=st+un,uo=nn+Xr,hn=1^sn,fn=sn?on-an:an-on;this._x1===null?this._append`M${to},${uo}`:(Math.abs(this._x1-to)>epsilon||Math.abs(this._y1-uo)>epsilon)&&this._append`L${to},${uo}`,rn&&(fn<0&&(fn=fn%tau+tau),fn>tauEpsilon?this._append`A${rn},${rn},0,1,${hn},${st-un},${nn-Xr}A${rn},${rn},0,1,${hn},${this._x1=to},${this._y1=uo}`:fn>epsilon&&this._append`A${rn},${rn},0,${+(fn>=pi)},${hn},${this._x1=st+rn*Math.cos(an)},${this._y1=nn+rn*Math.sin(an)}`)}rect(st,nn,rn,on){this._append`M${this._x0=this._x1=+st},${this._y0=this._y1=+nn}h${rn=+rn}v${+on}h${-rn}Z`}toString(){return this._}}function withPath(Mt){let st=3;return Mt.digits=function(nn){if(!arguments.length)return st;if(nn==null)st=null;else{const rn=Math.floor(nn);if(!(rn>=0))throw new RangeError(`invalid digits: ${nn}`);st=rn}return Mt},()=>new Path(st)}function array(Mt){return typeof Mt=="object"&&"length"in Mt?Mt:Array.from(Mt)}function Linear(Mt){this._context=Mt}Linear.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(Mt,st){switch(Mt=+Mt,st=+st,this._point){case 0:this._point=1,this._line?this._context.lineTo(Mt,st):this._context.moveTo(Mt,st);break;case 1:this._point=2;default:this._context.lineTo(Mt,st);break}}};function curveLinear(Mt){return new Linear(Mt)}function x(Mt){return Mt[0]}function y(Mt){return Mt[1]}function shapeLine(Mt,st){var nn=constant$3(!0),rn=null,on=curveLinear,an=null,sn=withPath(un);Mt=typeof Mt=="function"?Mt:Mt===void 0?x:constant$3(Mt),st=typeof st=="function"?st:st===void 0?y:constant$3(st);function un(Xr){var to,uo=(Xr=array(Xr)).length,hn,fn=!1,co;for(rn==null&&(an=on(co=sn())),to=0;to<=uo;++to)!(to<uo&&nn(hn=Xr[to],to,Xr))===fn&&((fn=!fn)?an.lineStart():an.lineEnd()),fn&&an.point(+Mt(hn,to,Xr),+st(hn,to,Xr));if(co)return an=null,co+""||null}return un.x=function(Xr){return arguments.length?(Mt=typeof Xr=="function"?Xr:constant$3(+Xr),un):Mt},un.y=function(Xr){return arguments.length?(st=typeof Xr=="function"?Xr:constant$3(+Xr),un):st},un.defined=function(Xr){return arguments.length?(nn=typeof Xr=="function"?Xr:constant$3(!!Xr),un):nn},un.curve=function(Xr){return arguments.length?(on=Xr,rn!=null&&(an=on(rn)),un):on},un.context=function(Xr){return arguments.length?(Xr==null?rn=an=null:an=on(rn=Xr),un):rn},un}function shapeArea(Mt,st,nn){var rn=null,on=constant$3(!0),an=null,sn=curveLinear,un=null,Xr=withPath(to);Mt=typeof Mt=="function"?Mt:Mt===void 0?x:constant$3(+Mt),st=typeof st=="function"?st:constant$3(st===void 0?0:+st),nn=typeof nn=="function"?nn:nn===void 0?y:constant$3(+nn);function to(hn){var fn,co,lo,fo=(hn=array(hn)).length,ho,mo=!1,Uo,_d=new Array(fo),tp=new Array(fo);for(an==null&&(un=sn(Uo=Xr())),fn=0;fn<=fo;++fn){if(!(fn<fo&&on(ho=hn[fn],fn,hn))===mo)if(mo=!mo)co=fn,un.areaStart(),un.lineStart();else{for(un.lineEnd(),un.lineStart(),lo=fn-1;lo>=co;--lo)un.point(_d[lo],tp[lo]);un.lineEnd(),un.areaEnd()}mo&&(_d[fn]=+Mt(ho,fn,hn),tp[fn]=+st(ho,fn,hn),un.point(rn?+rn(ho,fn,hn):_d[fn],nn?+nn(ho,fn,hn):tp[fn]))}if(Uo)return un=null,Uo+""||null}function uo(){return shapeLine().defined(on).curve(sn).context(an)}return to.x=function(hn){return arguments.length?(Mt=typeof hn=="function"?hn:constant$3(+hn),rn=null,to):Mt},to.x0=function(hn){return arguments.length?(Mt=typeof hn=="function"?hn:constant$3(+hn),to):Mt},to.x1=function(hn){return arguments.length?(rn=hn==null?null:typeof hn=="function"?hn:constant$3(+hn),to):rn},to.y=function(hn){return arguments.length?(st=typeof hn=="function"?hn:constant$3(+hn),nn=null,to):st},to.y0=function(hn){return arguments.length?(st=typeof hn=="function"?hn:constant$3(+hn),to):st},to.y1=function(hn){return arguments.length?(nn=hn==null?null:typeof hn=="function"?hn:constant$3(+hn),to):nn},to.lineX0=to.lineY0=function(){return uo().x(Mt).y(st)},to.lineY1=function(){return uo().x(Mt).y(nn)},to.lineX1=function(){return uo().x(rn).y(st)},to.defined=function(hn){return arguments.length?(on=typeof hn=="function"?hn:constant$3(!!hn),to):on},to.curve=function(hn){return arguments.length?(sn=hn,an!=null&&(un=sn(an)),to):sn},to.context=function(hn){return arguments.length?(hn==null?an=un=null:un=sn(an=hn),to):an},to}class Bump{constructor(st,nn){this._context=st,this._x=nn}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(st,nn){switch(st=+st,nn=+nn,this._point){case 0:{this._point=1,this._line?this._context.lineTo(st,nn):this._context.moveTo(st,nn);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+st)/2,this._y0,this._x0,nn,st,nn):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+nn)/2,st,this._y0,st,nn);break}}this._x0=st,this._y0=nn}}function bumpX(Mt){return new Bump(Mt,!0)}function bumpY(Mt){return new Bump(Mt,!1)}const symbolCircle={draw(Mt,st){const nn=sqrt$1(st/pi$1);Mt.moveTo(nn,0),Mt.arc(0,0,nn,0,tau$1)}},symbolCross={draw(Mt,st){const nn=sqrt$1(st/5)/2;Mt.moveTo(-3*nn,-nn),Mt.lineTo(-nn,-nn),Mt.lineTo(-nn,-3*nn),Mt.lineTo(nn,-3*nn),Mt.lineTo(nn,-nn),Mt.lineTo(3*nn,-nn),Mt.lineTo(3*nn,nn),Mt.lineTo(nn,nn),Mt.lineTo(nn,3*nn),Mt.lineTo(-nn,3*nn),Mt.lineTo(-nn,nn),Mt.lineTo(-3*nn,nn),Mt.closePath()}},tan30=sqrt$1(1/3),tan30_2=tan30*2,symbolDiamond={draw(Mt,st){const nn=sqrt$1(st/tan30_2),rn=nn*tan30;Mt.moveTo(0,-nn),Mt.lineTo(rn,0),Mt.lineTo(0,nn),Mt.lineTo(-rn,0),Mt.closePath()}},symbolSquare={draw(Mt,st){const nn=sqrt$1(st),rn=-nn/2;Mt.rect(rn,rn,nn,nn)}},ka=.8908130915292852,kr=sin(pi$1/10)/sin(7*pi$1/10),kx=sin(tau$1/10)*kr,ky=-cos(tau$1/10)*kr,symbolStar={draw(Mt,st){const nn=sqrt$1(st*ka),rn=kx*nn,on=ky*nn;Mt.moveTo(0,-nn),Mt.lineTo(rn,on);for(let an=1;an<5;++an){const sn=tau$1*an/5,un=cos(sn),Xr=sin(sn);Mt.lineTo(Xr*nn,-un*nn),Mt.lineTo(un*rn-Xr*on,Xr*rn+un*on)}Mt.closePath()}},sqrt3=sqrt$1(3),symbolTriangle={draw(Mt,st){const nn=-sqrt$1(st/(sqrt3*3));Mt.moveTo(0,nn*2),Mt.lineTo(-sqrt3*nn,-nn),Mt.lineTo(sqrt3*nn,-nn),Mt.closePath()}},c=-.5,s=sqrt$1(3)/2,k=1/sqrt$1(12),a=(k/2+1)*3,symbolWye={draw(Mt,st){const nn=sqrt$1(st/a),rn=nn/2,on=nn*k,an=rn,sn=nn*k+nn,un=-an,Xr=sn;Mt.moveTo(rn,on),Mt.lineTo(an,sn),Mt.lineTo(un,Xr),Mt.lineTo(c*rn-s*on,s*rn+c*on),Mt.lineTo(c*an-s*sn,s*an+c*sn),Mt.lineTo(c*un-s*Xr,s*un+c*Xr),Mt.lineTo(c*rn+s*on,c*on-s*rn),Mt.lineTo(c*an+s*sn,c*sn-s*an),Mt.lineTo(c*un+s*Xr,c*Xr-s*un),Mt.closePath()}};function Symbol$3(Mt,st){let nn=null,rn=withPath(on);Mt=typeof Mt=="function"?Mt:constant$3(Mt||symbolCircle),st=typeof st=="function"?st:constant$3(st===void 0?64:+st);function on(){let an;if(nn||(nn=an=rn()),Mt.apply(this,arguments).draw(nn,+st.apply(this,arguments)),an)return nn=null,an+""||null}return on.type=function(an){return arguments.length?(Mt=typeof an=="function"?an:constant$3(an),on):Mt},on.size=function(an){return arguments.length?(st=typeof an=="function"?an:constant$3(+an),on):st},on.context=function(an){return arguments.length?(nn=an??null,on):nn},on}function noop$2(){}function point$2(Mt,st,nn){Mt._context.bezierCurveTo((2*Mt._x0+Mt._x1)/3,(2*Mt._y0+Mt._y1)/3,(Mt._x0+2*Mt._x1)/3,(Mt._y0+2*Mt._y1)/3,(Mt._x0+4*Mt._x1+st)/6,(Mt._y0+4*Mt._y1+nn)/6)}function Basis(Mt){this._context=Mt}Basis.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:point$2(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(Mt,st){switch(Mt=+Mt,st=+st,this._point){case 0:this._point=1,this._line?this._context.lineTo(Mt,st):this._context.moveTo(Mt,st);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:point$2(this,Mt,st);break}this._x0=this._x1,this._x1=Mt,this._y0=this._y1,this._y1=st}};function curveBasis(Mt){return new Basis(Mt)}function BasisClosed(Mt){this._context=Mt}BasisClosed.prototype={areaStart:noop$2,areaEnd:noop$2,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(Mt,st){switch(Mt=+Mt,st=+st,this._point){case 0:this._point=1,this._x2=Mt,this._y2=st;break;case 1:this._point=2,this._x3=Mt,this._y3=st;break;case 2:this._point=3,this._x4=Mt,this._y4=st,this._context.moveTo((this._x0+4*this._x1+Mt)/6,(this._y0+4*this._y1+st)/6);break;default:point$2(this,Mt,st);break}this._x0=this._x1,this._x1=Mt,this._y0=this._y1,this._y1=st}};function curveBasisClosed(Mt){return new BasisClosed(Mt)}function BasisOpen(Mt){this._context=Mt}BasisOpen.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(Mt,st){switch(Mt=+Mt,st=+st,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var nn=(this._x0+4*this._x1+Mt)/6,rn=(this._y0+4*this._y1+st)/6;this._line?this._context.lineTo(nn,rn):this._context.moveTo(nn,rn);break;case 3:this._point=4;default:point$2(this,Mt,st);break}this._x0=this._x1,this._x1=Mt,this._y0=this._y1,this._y1=st}};function curveBasisOpen(Mt){return new BasisOpen(Mt)}function LinearClosed(Mt){this._context=Mt}LinearClosed.prototype={areaStart:noop$2,areaEnd:noop$2,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(Mt,st){Mt=+Mt,st=+st,this._point?this._context.lineTo(Mt,st):(this._point=1,this._context.moveTo(Mt,st))}};function curveLinearClosed(Mt){return new LinearClosed(Mt)}function sign(Mt){return Mt<0?-1:1}function slope3(Mt,st,nn){var rn=Mt._x1-Mt._x0,on=st-Mt._x1,an=(Mt._y1-Mt._y0)/(rn||on<0&&-0),sn=(nn-Mt._y1)/(on||rn<0&&-0),un=(an*on+sn*rn)/(rn+on);return(sign(an)+sign(sn))*Math.min(Math.abs(an),Math.abs(sn),.5*Math.abs(un))||0}function slope2(Mt,st){var nn=Mt._x1-Mt._x0;return nn?(3*(Mt._y1-Mt._y0)/nn-st)/2:st}function point$1(Mt,st,nn){var rn=Mt._x0,on=Mt._y0,an=Mt._x1,sn=Mt._y1,un=(an-rn)/3;Mt._context.bezierCurveTo(rn+un,on+un*st,an-un,sn-un*nn,an,sn)}function MonotoneX(Mt){this._context=Mt}MonotoneX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:point$1(this,this._t0,slope2(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(Mt,st){var nn=NaN;if(Mt=+Mt,st=+st,!(Mt===this._x1&&st===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(Mt,st):this._context.moveTo(Mt,st);break;case 1:this._point=2;break;case 2:this._point=3,point$1(this,slope2(this,nn=slope3(this,Mt,st)),nn);break;default:point$1(this,this._t0,nn=slope3(this,Mt,st));break}this._x0=this._x1,this._x1=Mt,this._y0=this._y1,this._y1=st,this._t0=nn}}};function MonotoneY(Mt){this._context=new ReflectContext(Mt)}(MonotoneY.prototype=Object.create(MonotoneX.prototype)).point=function(Mt,st){MonotoneX.prototype.point.call(this,st,Mt)};function ReflectContext(Mt){this._context=Mt}ReflectContext.prototype={moveTo:function(Mt,st){this._context.moveTo(st,Mt)},closePath:function(){this._context.closePath()},lineTo:function(Mt,st){this._context.lineTo(st,Mt)},bezierCurveTo:function(Mt,st,nn,rn,on,an){this._context.bezierCurveTo(st,Mt,rn,nn,an,on)}};function monotoneX(Mt){return new MonotoneX(Mt)}function monotoneY(Mt){return new MonotoneY(Mt)}function Natural(Mt){this._context=Mt}Natural.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var Mt=this._x,st=this._y,nn=Mt.length;if(nn)if(this._line?this._context.lineTo(Mt[0],st[0]):this._context.moveTo(Mt[0],st[0]),nn===2)this._context.lineTo(Mt[1],st[1]);else for(var rn=controlPoints(Mt),on=controlPoints(st),an=0,sn=1;sn<nn;++an,++sn)this._context.bezierCurveTo(rn[0][an],on[0][an],rn[1][an],on[1][an],Mt[sn],st[sn]);(this._line||this._line!==0&&nn===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(Mt,st){this._x.push(+Mt),this._y.push(+st)}};function controlPoints(Mt){var st,nn=Mt.length-1,rn,on=new Array(nn),an=new Array(nn),sn=new Array(nn);for(on[0]=0,an[0]=2,sn[0]=Mt[0]+2*Mt[1],st=1;st<nn-1;++st)on[st]=1,an[st]=4,sn[st]=4*Mt[st]+2*Mt[st+1];for(on[nn-1]=2,an[nn-1]=7,sn[nn-1]=8*Mt[nn-1]+Mt[nn],st=1;st<nn;++st)rn=on[st]/an[st-1],an[st]-=rn,sn[st]-=rn*sn[st-1];for(on[nn-1]=sn[nn-1]/an[nn-1],st=nn-2;st>=0;--st)on[st]=(sn[st]-on[st+1])/an[st];for(an[nn-1]=(Mt[nn]+on[nn-1])/2,st=0;st<nn-1;++st)an[st]=2*Mt[st+1]-on[st+1];return[on,an]}function curveNatural(Mt){return new Natural(Mt)}function Step(Mt,st){this._context=Mt,this._t=st}Step.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(Mt,st){switch(Mt=+Mt,st=+st,this._point){case 0:this._point=1,this._line?this._context.lineTo(Mt,st):this._context.moveTo(Mt,st);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,st),this._context.lineTo(Mt,st);else{var nn=this._x*(1-this._t)+Mt*this._t;this._context.lineTo(nn,this._y),this._context.lineTo(nn,st)}break}}this._x=Mt,this._y=st}};function curveStep(Mt){return new Step(Mt,.5)}function stepBefore(Mt){return new Step(Mt,0)}function stepAfter(Mt){return new Step(Mt,1)}function stackOffsetNone(Mt,st){if((sn=Mt.length)>1)for(var nn=1,rn,on,an=Mt[st[0]],sn,un=an.length;nn<sn;++nn)for(on=an,an=Mt[st[nn]],rn=0;rn<un;++rn)an[rn][1]+=an[rn][0]=isNaN(on[rn][1])?on[rn][0]:on[rn][1]}function stackOrderNone(Mt){for(var st=Mt.length,nn=new Array(st);--st>=0;)nn[st]=st;return nn}function stackValue(Mt,st){return Mt[st]}function stackSeries(Mt){const st=[];return st.key=Mt,st}function shapeStack(){var Mt=constant$3([]),st=stackOrderNone,nn=stackOffsetNone,rn=stackValue;function on(an){var sn=Array.from(Mt.apply(this,arguments),stackSeries),un,Xr=sn.length,to=-1,uo;for(const hn of an)for(un=0,++to;un<Xr;++un)(sn[un][to]=[0,+rn(hn,sn[un].key,to,an)]).data=hn;for(un=0,uo=array(st(sn));un<Xr;++un)sn[uo[un]].index=un;return nn(sn,uo),sn}return on.keys=function(an){return arguments.length?(Mt=typeof an=="function"?an:constant$3(Array.from(an)),on):Mt},on.value=function(an){return arguments.length?(rn=typeof an=="function"?an:constant$3(+an),on):rn},on.order=function(an){return arguments.length?(st=an==null?stackOrderNone:typeof an=="function"?an:constant$3(Array.from(an)),on):st},on.offset=function(an){return arguments.length?(nn=an??stackOffsetNone,on):nn},on}function stackOffsetExpand(Mt,st){if((rn=Mt.length)>0){for(var nn,rn,on=0,an=Mt[0].length,sn;on<an;++on){for(sn=nn=0;nn<rn;++nn)sn+=Mt[nn][on][1]||0;if(sn)for(nn=0;nn<rn;++nn)Mt[nn][on][1]/=sn}stackOffsetNone(Mt,st)}}function stackOffsetSilhouette(Mt,st){if((on=Mt.length)>0){for(var nn=0,rn=Mt[st[0]],on,an=rn.length;nn<an;++nn){for(var sn=0,un=0;sn<on;++sn)un+=Mt[sn][nn][1]||0;rn[nn][1]+=rn[nn][0]=-un/2}stackOffsetNone(Mt,st)}}function stackOffsetWiggle(Mt,st){if(!(!((sn=Mt.length)>0)||!((an=(on=Mt[st[0]]).length)>0))){for(var nn=0,rn=1,on,an,sn;rn<an;++rn){for(var un=0,Xr=0,to=0;un<sn;++un){for(var uo=Mt[st[un]],hn=uo[rn][1]||0,fn=uo[rn-1][1]||0,co=(hn-fn)/2,lo=0;lo<un;++lo){var fo=Mt[st[lo]],ho=fo[rn][1]||0,mo=fo[rn-1][1]||0;co+=ho-mo}Xr+=hn,to+=co*hn}on[rn-1][1]+=on[rn-1][0]=nn,Xr&&(nn-=to/Xr)}on[rn-1][1]+=on[rn-1][0]=nn,stackOffsetNone(Mt,st)}}function _typeof$J(Mt){"@babel/helpers - typeof";return _typeof$J=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(st){return typeof st}:function(st){return st&&typeof Symbol=="function"&&st.constructor===Symbol&&st!==Symbol.prototype?"symbol":typeof st},_typeof$J(Mt)}var _excluded$g=["type","size","sizeType"];function _extends$s(){return _extends$s=Object.assign?Object.assign.bind():function(Mt){for(var st=1;st<arguments.length;st++){var nn=arguments[st];for(var rn in nn)Object.prototype.hasOwnProperty.call(nn,rn)&&(Mt[rn]=nn[rn])}return Mt},_extends$s.apply(this,arguments)}function ownKeys$C(Mt,st){var nn=Object.keys(Mt);if(Object.getOwnPropertySymbols){var rn=Object.getOwnPropertySymbols(Mt);st&&(rn=rn.filter(function(on){return Object.getOwnPropertyDescriptor(Mt,on).enumerable})),nn.push.apply(nn,rn)}return nn}function _objectSpread$C(Mt){for(var st=1;st<arguments.length;st++){var nn=arguments[st]!=null?arguments[st]:{};st%2?ownKeys$C(Object(nn),!0).forEach(function(rn){_defineProperty$I(Mt,rn,nn[rn])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Mt,Object.getOwnPropertyDescriptors(nn)):ownKeys$C(Object(nn)).forEach(function(rn){Object.defineProperty(Mt,rn,Object.getOwnPropertyDescriptor(nn,rn))})}return Mt}function _defineProperty$I(Mt,st,nn){return st=_toPropertyKey$I(st),st in Mt?Object.defineProperty(Mt,st,{value:nn,enumerable:!0,configurable:!0,writable:!0}):Mt[st]=nn,Mt}function _toPropertyKey$I(Mt){var st=_toPrimitive$I(Mt,"string");return _typeof$J(st)=="symbol"?st:st+""}function _toPrimitive$I(Mt,st){if(_typeof$J(Mt)!="object"||!Mt)return Mt;var nn=Mt[Symbol.toPrimitive];if(nn!==void 0){var rn=nn.call(Mt,st||"default");if(_typeof$J(rn)!="object")return rn;throw new TypeError("@@toPrimitive must return a primitive value.")}return(st==="string"?String:Number)(Mt)}function _objectWithoutProperties$g(Mt,st){if(Mt==null)return{};var nn=_objectWithoutPropertiesLoose$g(Mt,st),rn,on;if(Object.getOwnPropertySymbols){var an=Object.getOwnPropertySymbols(Mt);for(on=0;on<an.length;on++)rn=an[on],!(st.indexOf(rn)>=0)&&Object.prototype.propertyIsEnumerable.call(Mt,rn)&&(nn[rn]=Mt[rn])}return nn}function _objectWithoutPropertiesLoose$g(Mt,st){if(Mt==null)return{};var nn={};for(var rn in Mt)if(Object.prototype.hasOwnProperty.call(Mt,rn)){if(st.indexOf(rn)>=0)continue;nn[rn]=Mt[rn]}return nn}var symbolFactories={symbolCircle,symbolCross,symbolDiamond,symbolSquare,symbolStar,symbolTriangle,symbolWye},RADIAN$2=Math.PI/180,getSymbolFactory=function Mt(st){var nn="symbol".concat(upperFirst$1(st));return symbolFactories[nn]||symbolCircle},calculateAreaSize=function Mt(st,nn,rn){if(nn==="area")return st;switch(rn){case"cross":return 5*st*st/9;case"diamond":return .5*st*st/Math.sqrt(3);case"square":return st*st;case"star":{var on=18*RADIAN$2;return 1.25*st*st*(Math.tan(on)-Math.tan(on*2)*Math.pow(Math.tan(on),2))}case"triangle":return Math.sqrt(3)*st*st/4;case"wye":return(21-10*Math.sqrt(3))*st*st/8;default:return Math.PI*st*st/4}},registerSymbol=function Mt(st,nn){symbolFactories["symbol".concat(upperFirst$1(st))]=nn},Symbols=function Mt(st){var nn=st.type,rn=nn===void 0?"circle":nn,on=st.size,an=on===void 0?64:on,sn=st.sizeType,un=sn===void 0?"area":sn,Xr=_objectWithoutProperties$g(st,_excluded$g),to=_objectSpread$C(_objectSpread$C({},Xr),{},{type:rn,size:an,sizeType:un}),uo=function(){var ho=getSymbolFactory(rn),mo=Symbol$3().type(ho).size(calculateAreaSize(an,un,rn));return mo()},hn=to.className,fn=to.cx,co=to.cy,lo=filterProps(to,!0);return fn===+fn&&co===+co&&an===+an?React.createElement("path",_extends$s({},lo,{className:clsx("recharts-symbols",hn),transform:"translate(".concat(fn,", ").concat(co,")"),d:uo()})):null};Symbols.registerSymbol=registerSymbol;function _typeof$I(Mt){"@babel/helpers - typeof";return _typeof$I=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(st){return typeof st}:function(st){return st&&typeof Symbol=="function"&&st.constructor===Symbol&&st!==Symbol.prototype?"symbol":typeof st},_typeof$I(Mt)}function _extends$r(){return _extends$r=Object.assign?Object.assign.bind():function(Mt){for(var st=1;st<arguments.length;st++){var nn=arguments[st];for(var rn in nn)Object.prototype.hasOwnProperty.call(nn,rn)&&(Mt[rn]=nn[rn])}return Mt},_extends$r.apply(this,arguments)}function ownKeys$B(Mt,st){var nn=Object.keys(Mt);if(Object.getOwnPropertySymbols){var rn=Object.getOwnPropertySymbols(Mt);st&&(rn=rn.filter(function(on){return Object.getOwnPropertyDescriptor(Mt,on).enumerable})),nn.push.apply(nn,rn)}return nn}function _objectSpread$B(Mt){for(var st=1;st<arguments.length;st++){var nn=arguments[st]!=null?arguments[st]:{};st%2?ownKeys$B(Object(nn),!0).forEach(function(rn){_defineProperty$H(Mt,rn,nn[rn])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Mt,Object.getOwnPropertyDescriptors(nn)):ownKeys$B(Object(nn)).forEach(function(rn){Object.defineProperty(Mt,rn,Object.getOwnPropertyDescriptor(nn,rn))})}return Mt}function _classCallCheck$l(Mt,st){if(!(Mt instanceof st))throw new TypeError("Cannot call a class as a function")}function _defineProperties$l(Mt,st){for(var nn=0;nn<st.length;nn++){var rn=st[nn];rn.enumerable=rn.enumerable||!1,rn.configurable=!0,"value"in rn&&(rn.writable=!0),Object.defineProperty(Mt,_toPropertyKey$H(rn.key),rn)}}function _createClass$l(Mt,st,nn){return st&&_defineProperties$l(Mt.prototype,st),Object.defineProperty(Mt,"prototype",{writable:!1}),Mt}function _callSuper$h(Mt,st,nn){return st=_getPrototypeOf$i(st),_possibleConstructorReturn$i(Mt,_isNativeReflectConstruct$i()?Reflect.construct(st,nn||[],_getPrototypeOf$i(Mt).constructor):st.apply(Mt,nn))}function _possibleConstructorReturn$i(Mt,st){if(st&&(_typeof$I(st)==="object"||typeof st=="function"))return st;if(st!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$i(Mt)}function _assertThisInitialized$i(Mt){if(Mt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Mt}function _isNativeReflectConstruct$i(){try{var Mt=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_isNativeReflectConstruct$i=function(){return!!Mt})()}function _getPrototypeOf$i(Mt){return _getPrototypeOf$i=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(nn){return nn.__proto__||Object.getPrototypeOf(nn)},_getPrototypeOf$i(Mt)}function _inherits$i(Mt,st){if(typeof st!="function"&&st!==null)throw new TypeError("Super expression must either be null or a function");Mt.prototype=Object.create(st&&st.prototype,{constructor:{value:Mt,writable:!0,configurable:!0}}),Object.defineProperty(Mt,"prototype",{writable:!1}),st&&_setPrototypeOf$i(Mt,st)}function _setPrototypeOf$i(Mt,st){return _setPrototypeOf$i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(rn,on){return rn.__proto__=on,rn},_setPrototypeOf$i(Mt,st)}function _defineProperty$H(Mt,st,nn){return st=_toPropertyKey$H(st),st in Mt?Object.defineProperty(Mt,st,{value:nn,enumerable:!0,configurable:!0,writable:!0}):Mt[st]=nn,Mt}function _toPropertyKey$H(Mt){var st=_toPrimitive$H(Mt,"string");return _typeof$I(st)=="symbol"?st:st+""}function _toPrimitive$H(Mt,st){if(_typeof$I(Mt)!="object"||!Mt)return Mt;var nn=Mt[Symbol.toPrimitive];if(nn!==void 0){var rn=nn.call(Mt,st||"default");if(_typeof$I(rn)!="object")return rn;throw new TypeError("@@toPrimitive must return a primitive value.")}return(st==="string"?String:Number)(Mt)}var SIZE=32,DefaultLegendContent=function(Mt){function st(){return _classCallCheck$l(this,st),_callSuper$h(this,st,arguments)}return _inherits$i(st,Mt),_createClass$l(st,[{key:"renderIcon",value:function(rn){var on=this.props.inactiveColor,an=SIZE/2,sn=SIZE/6,un=SIZE/3,Xr=rn.inactive?on:rn.color;if(rn.type==="plainline")return React.createElement("line",{strokeWidth:4,fill:"none",stroke:Xr,strokeDasharray:rn.payload.strokeDasharray,x1:0,y1:an,x2:SIZE,y2:an,className:"recharts-legend-icon"});if(rn.type==="line")return React.createElement("path",{strokeWidth:4,fill:"none",stroke:Xr,d:"M0,".concat(an,"h").concat(un,`
            A`).concat(sn,",").concat(sn,",0,1,1,").concat(2*un,",").concat(an,`
            H`).concat(SIZE,"M").concat(2*un,",").concat(an,`
            A`).concat(sn,",").concat(sn,",0,1,1,").concat(un,",").concat(an),className:"recharts-legend-icon"});if(rn.type==="rect")return React.createElement("path",{stroke:"none",fill:Xr,d:"M0,".concat(SIZE/8,"h").concat(SIZE,"v").concat(SIZE*3/4,"h").concat(-SIZE,"z"),className:"recharts-legend-icon"});if(React.isValidElement(rn.legendIcon)){var to=_objectSpread$B({},rn);return delete to.legendIcon,React.cloneElement(rn.legendIcon,to)}return React.createElement(Symbols,{fill:Xr,cx:an,cy:an,size:SIZE,sizeType:"diameter",type:rn.type})}},{key:"renderItems",value:function(){var rn=this,on=this.props,an=on.payload,sn=on.iconSize,un=on.layout,Xr=on.formatter,to=on.inactiveColor,uo={x:0,y:0,width:SIZE,height:SIZE},hn={display:un==="horizontal"?"inline-block":"block",marginRight:10},fn={display:"inline-block",verticalAlign:"middle",marginRight:4};return an.map(function(co,lo){var fo=co.formatter||Xr,ho=clsx(_defineProperty$H(_defineProperty$H({"recharts-legend-item":!0},"legend-item-".concat(lo),!0),"inactive",co.inactive));if(co.type==="none")return null;var mo=isFunction$3(co.value)?null:co.value;warn(!isFunction$3(co.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var Uo=co.inactive?to:co.color;return React.createElement("li",_extends$r({className:ho,style:hn,key:"legend-item-".concat(lo)},adaptEventsOfChild(rn.props,co,lo)),React.createElement(Surface,{width:sn,height:sn,viewBox:uo,style:fn},rn.renderIcon(co)),React.createElement("span",{className:"recharts-legend-item-text",style:{color:Uo}},fo?fo(mo,co,lo):mo))})}},{key:"render",value:function(){var rn=this.props,on=rn.payload,an=rn.layout,sn=rn.align;if(!on||!on.length)return null;var un={padding:0,margin:0,textAlign:an==="horizontal"?sn:"left"};return React.createElement("ul",{className:"recharts-default-legend",style:un},this.renderItems())}}])}(reactExports.PureComponent);_defineProperty$H(DefaultLegendContent,"displayName","Legend");_defineProperty$H(DefaultLegendContent,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var ListCache$2=_ListCache;function stackClear$1(){this.__data__=new ListCache$2,this.size=0}var _stackClear=stackClear$1;function stackDelete$1(Mt){var st=this.__data__,nn=st.delete(Mt);return this.size=st.size,nn}var _stackDelete=stackDelete$1;function stackGet$1(Mt){return this.__data__.get(Mt)}var _stackGet=stackGet$1;function stackHas$1(Mt){return this.__data__.has(Mt)}var _stackHas=stackHas$1,ListCache$1=_ListCache,Map$2=_Map,MapCache$1=_MapCache,LARGE_ARRAY_SIZE$1=200;function stackSet$1(Mt,st){var nn=this.__data__;if(nn instanceof ListCache$1){var rn=nn.__data__;if(!Map$2||rn.length<LARGE_ARRAY_SIZE$1-1)return rn.push([Mt,st]),this.size=++nn.size,this;nn=this.__data__=new MapCache$1(rn)}return nn.set(Mt,st),this.size=nn.size,this}var _stackSet=stackSet$1,ListCache=_ListCache,stackClear=_stackClear,stackDelete=_stackDelete,stackGet=_stackGet,stackHas=_stackHas,stackSet=_stackSet;function Stack$2(Mt){var st=this.__data__=new ListCache(Mt);this.size=st.size}Stack$2.prototype.clear=stackClear;Stack$2.prototype.delete=stackDelete;Stack$2.prototype.get=stackGet;Stack$2.prototype.has=stackHas;Stack$2.prototype.set=stackSet;var _Stack=Stack$2,HASH_UNDEFINED="__lodash_hash_undefined__";function setCacheAdd$1(Mt){return this.__data__.set(Mt,HASH_UNDEFINED),this}var _setCacheAdd=setCacheAdd$1;function setCacheHas$1(Mt){return this.__data__.has(Mt)}var _setCacheHas=setCacheHas$1,MapCache=_MapCache,setCacheAdd=_setCacheAdd,setCacheHas=_setCacheHas;function SetCache$2(Mt){var st=-1,nn=Mt==null?0:Mt.length;for(this.__data__=new MapCache;++st<nn;)this.add(Mt[st])}SetCache$2.prototype.add=SetCache$2.prototype.push=setCacheAdd;SetCache$2.prototype.has=setCacheHas;var _SetCache=SetCache$2;function arraySome$2(Mt,st){for(var nn=-1,rn=Mt==null?0:Mt.length;++nn<rn;)if(st(Mt[nn],nn,Mt))return!0;return!1}var _arraySome=arraySome$2;function cacheHas$2(Mt,st){return Mt.has(st)}var _cacheHas=cacheHas$2,SetCache$1=_SetCache,arraySome$1=_arraySome,cacheHas$1=_cacheHas,COMPARE_PARTIAL_FLAG$5=1,COMPARE_UNORDERED_FLAG$3=2;function equalArrays$2(Mt,st,nn,rn,on,an){var sn=nn&COMPARE_PARTIAL_FLAG$5,un=Mt.length,Xr=st.length;if(un!=Xr&&!(sn&&Xr>un))return!1;var to=an.get(Mt),uo=an.get(st);if(to&&uo)return to==st&&uo==Mt;var hn=-1,fn=!0,co=nn&COMPARE_UNORDERED_FLAG$3?new SetCache$1:void 0;for(an.set(Mt,st),an.set(st,Mt);++hn<un;){var lo=Mt[hn],fo=st[hn];if(rn)var ho=sn?rn(fo,lo,hn,st,Mt,an):rn(lo,fo,hn,Mt,st,an);if(ho!==void 0){if(ho)continue;fn=!1;break}if(co){if(!arraySome$1(st,function(mo,Uo){if(!cacheHas$1(co,Uo)&&(lo===mo||on(lo,mo,nn,rn,an)))return co.push(Uo)})){fn=!1;break}}else if(!(lo===fo||on(lo,fo,nn,rn,an))){fn=!1;break}}return an.delete(Mt),an.delete(st),fn}var _equalArrays=equalArrays$2,root$5=_root,Uint8Array$2=root$5.Uint8Array,_Uint8Array=Uint8Array$2;function mapToArray$1(Mt){var st=-1,nn=Array(Mt.size);return Mt.forEach(function(rn,on){nn[++st]=[on,rn]}),nn}var _mapToArray=mapToArray$1;function setToArray$3(Mt){var st=-1,nn=Array(Mt.size);return Mt.forEach(function(rn){nn[++st]=rn}),nn}var _setToArray=setToArray$3,Symbol$2=_Symbol,Uint8Array$1=_Uint8Array,eq$1=eq_1,equalArrays$1=_equalArrays,mapToArray=_mapToArray,setToArray$2=_setToArray,COMPARE_PARTIAL_FLAG$4=1,COMPARE_UNORDERED_FLAG$2=2,boolTag$2="[object Boolean]",dateTag$1="[object Date]",errorTag$1="[object Error]",mapTag$2="[object Map]",numberTag$1="[object Number]",regexpTag$1="[object RegExp]",setTag$2="[object Set]",stringTag$1="[object String]",symbolTag="[object Symbol]",arrayBufferTag$1="[object ArrayBuffer]",dataViewTag$2="[object DataView]",symbolProto=Symbol$2?Symbol$2.prototype:void 0,symbolValueOf=symbolProto?symbolProto.valueOf:void 0;function equalByTag$1(Mt,st,nn,rn,on,an,sn){switch(nn){case dataViewTag$2:if(Mt.byteLength!=st.byteLength||Mt.byteOffset!=st.byteOffset)return!1;Mt=Mt.buffer,st=st.buffer;case arrayBufferTag$1:return!(Mt.byteLength!=st.byteLength||!an(new Uint8Array$1(Mt),new Uint8Array$1(st)));case boolTag$2:case dateTag$1:case numberTag$1:return eq$1(+Mt,+st);case errorTag$1:return Mt.name==st.name&&Mt.message==st.message;case regexpTag$1:case stringTag$1:return Mt==st+"";case mapTag$2:var un=mapToArray;case setTag$2:var Xr=rn&COMPARE_PARTIAL_FLAG$4;if(un||(un=setToArray$2),Mt.size!=st.size&&!Xr)return!1;var to=sn.get(Mt);if(to)return to==st;rn|=COMPARE_UNORDERED_FLAG$2,sn.set(Mt,st);var uo=equalArrays$1(un(Mt),un(st),rn,on,an,sn);return sn.delete(Mt),uo;case symbolTag:if(symbolValueOf)return symbolValueOf.call(Mt)==symbolValueOf.call(st)}return!1}var _equalByTag=equalByTag$1;function arrayPush$2(Mt,st){for(var nn=-1,rn=st.length,on=Mt.length;++nn<rn;)Mt[on+nn]=st[nn];return Mt}var _arrayPush=arrayPush$2,arrayPush$1=_arrayPush,isArray$a=isArray_1;function baseGetAllKeys$1(Mt,st,nn){var rn=st(Mt);return isArray$a(Mt)?rn:arrayPush$1(rn,nn(Mt))}var _baseGetAllKeys=baseGetAllKeys$1;function arrayFilter$1(Mt,st){for(var nn=-1,rn=Mt==null?0:Mt.length,on=0,an=[];++nn<rn;){var sn=Mt[nn];st(sn,nn,Mt)&&(an[on++]=sn)}return an}var _arrayFilter=arrayFilter$1;function stubArray$1(){return[]}var stubArray_1=stubArray$1,arrayFilter=_arrayFilter,stubArray=stubArray_1,objectProto$7=Object.prototype,propertyIsEnumerable$1=objectProto$7.propertyIsEnumerable,nativeGetSymbols=Object.getOwnPropertySymbols,getSymbols$1=nativeGetSymbols?function(Mt){return Mt==null?[]:(Mt=Object(Mt),arrayFilter(nativeGetSymbols(Mt),function(st){return propertyIsEnumerable$1.call(Mt,st)}))}:stubArray,_getSymbols=getSymbols$1;function baseTimes$1(Mt,st){for(var nn=-1,rn=Array(Mt);++nn<Mt;)rn[nn]=st(nn);return rn}var _baseTimes=baseTimes$1,baseGetTag$4=_baseGetTag,isObjectLike$5=isObjectLike_1,argsTag$2="[object Arguments]";function baseIsArguments$1(Mt){return isObjectLike$5(Mt)&&baseGetTag$4(Mt)==argsTag$2}var _baseIsArguments=baseIsArguments$1,baseIsArguments=_baseIsArguments,isObjectLike$4=isObjectLike_1,objectProto$6=Object.prototype,hasOwnProperty$6=objectProto$6.hasOwnProperty,propertyIsEnumerable=objectProto$6.propertyIsEnumerable,isArguments$3=baseIsArguments(function(){return arguments}())?baseIsArguments:function(Mt){return isObjectLike$4(Mt)&&hasOwnProperty$6.call(Mt,"callee")&&!propertyIsEnumerable.call(Mt,"callee")},isArguments_1=isArguments$3,isBuffer$2={exports:{}};function stubFalse(){return!1}var stubFalse_1=stubFalse;isBuffer$2.exports;(function(Mt,st){var nn=_root,rn=stubFalse_1,on=st&&!st.nodeType&&st,an=on&&!0&&Mt&&!Mt.nodeType&&Mt,sn=an&&an.exports===on,un=sn?nn.Buffer:void 0,Xr=un?un.isBuffer:void 0,to=Xr||rn;Mt.exports=to})(isBuffer$2,isBuffer$2.exports);var isBufferExports=isBuffer$2.exports,MAX_SAFE_INTEGER$2=9007199254740991,reIsUint=/^(?:0|[1-9]\d*)$/;function isIndex$3(Mt,st){var nn=typeof Mt;return st=st??MAX_SAFE_INTEGER$2,!!st&&(nn=="number"||nn!="symbol"&&reIsUint.test(Mt))&&Mt>-1&&Mt%1==0&&Mt<st}var _isIndex=isIndex$3,MAX_SAFE_INTEGER$1=9007199254740991;function isLength$3(Mt){return typeof Mt=="number"&&Mt>-1&&Mt%1==0&&Mt<=MAX_SAFE_INTEGER$1}var isLength_1=isLength$3,baseGetTag$3=_baseGetTag,isLength$2=isLength_1,isObjectLike$3=isObjectLike_1,argsTag$1="[object Arguments]",arrayTag$1="[object Array]",boolTag$1="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",funcTag="[object Function]",mapTag$1="[object Map]",numberTag="[object Number]",objectTag$3="[object Object]",regexpTag="[object RegExp]",setTag$1="[object Set]",stringTag="[object String]",weakMapTag$1="[object WeakMap]",arrayBufferTag="[object ArrayBuffer]",dataViewTag$1="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",typedArrayTags={};typedArrayTags[float32Tag]=typedArrayTags[float64Tag]=typedArrayTags[int8Tag]=typedArrayTags[int16Tag]=typedArrayTags[int32Tag]=typedArrayTags[uint8Tag]=typedArrayTags[uint8ClampedTag]=typedArrayTags[uint16Tag]=typedArrayTags[uint32Tag]=!0;typedArrayTags[argsTag$1]=typedArrayTags[arrayTag$1]=typedArrayTags[arrayBufferTag]=typedArrayTags[boolTag$1]=typedArrayTags[dataViewTag$1]=typedArrayTags[dateTag]=typedArrayTags[errorTag]=typedArrayTags[funcTag]=typedArrayTags[mapTag$1]=typedArrayTags[numberTag]=typedArrayTags[objectTag$3]=typedArrayTags[regexpTag]=typedArrayTags[setTag$1]=typedArrayTags[stringTag]=typedArrayTags[weakMapTag$1]=!1;function baseIsTypedArray$1(Mt){return isObjectLike$3(Mt)&&isLength$2(Mt.length)&&!!typedArrayTags[baseGetTag$3(Mt)]}var _baseIsTypedArray=baseIsTypedArray$1;function baseUnary$2(Mt){return function(st){return Mt(st)}}var _baseUnary=baseUnary$2,_nodeUtil={exports:{}};_nodeUtil.exports;(function(Mt,st){var nn=_freeGlobal,rn=st&&!st.nodeType&&st,on=rn&&!0&&Mt&&!Mt.nodeType&&Mt,an=on&&on.exports===rn,sn=an&&nn.process,un=function(){try{var Xr=on&&on.require&&on.require("util").types;return Xr||sn&&sn.binding&&sn.binding("util")}catch{}}();Mt.exports=un})(_nodeUtil,_nodeUtil.exports);var _nodeUtilExports=_nodeUtil.exports,baseIsTypedArray=_baseIsTypedArray,baseUnary$1=_baseUnary,nodeUtil=_nodeUtilExports,nodeIsTypedArray=nodeUtil&&nodeUtil.isTypedArray,isTypedArray$3=nodeIsTypedArray?baseUnary$1(nodeIsTypedArray):baseIsTypedArray,isTypedArray_1=isTypedArray$3,baseTimes=_baseTimes,isArguments$2=isArguments_1,isArray$9=isArray_1,isBuffer$1=isBufferExports,isIndex$2=_isIndex,isTypedArray$2=isTypedArray_1,objectProto$5=Object.prototype,hasOwnProperty$5=objectProto$5.hasOwnProperty;function arrayLikeKeys$1(Mt,st){var nn=isArray$9(Mt),rn=!nn&&isArguments$2(Mt),on=!nn&&!rn&&isBuffer$1(Mt),an=!nn&&!rn&&!on&&isTypedArray$2(Mt),sn=nn||rn||on||an,un=sn?baseTimes(Mt.length,String):[],Xr=un.length;for(var to in Mt)(st||hasOwnProperty$5.call(Mt,to))&&!(sn&&(to=="length"||on&&(to=="offset"||to=="parent")||an&&(to=="buffer"||to=="byteLength"||to=="byteOffset")||isIndex$2(to,Xr)))&&un.push(to);return un}var _arrayLikeKeys=arrayLikeKeys$1,objectProto$4=Object.prototype;function isPrototype$1(Mt){var st=Mt&&Mt.constructor,nn=typeof st=="function"&&st.prototype||objectProto$4;return Mt===nn}var _isPrototype=isPrototype$1;function overArg$2(Mt,st){return function(nn){return Mt(st(nn))}}var _overArg=overArg$2,overArg$1=_overArg,nativeKeys$1=overArg$1(Object.keys,Object),_nativeKeys=nativeKeys$1,isPrototype=_isPrototype,nativeKeys=_nativeKeys,objectProto$3=Object.prototype,hasOwnProperty$4=objectProto$3.hasOwnProperty;function baseKeys$1(Mt){if(!isPrototype(Mt))return nativeKeys(Mt);var st=[];for(var nn in Object(Mt))hasOwnProperty$4.call(Mt,nn)&&nn!="constructor"&&st.push(nn);return st}var _baseKeys=baseKeys$1,isFunction=isFunction_1,isLength$1=isLength_1;function isArrayLike$5(Mt){return Mt!=null&&isLength$1(Mt.length)&&!isFunction(Mt)}var isArrayLike_1=isArrayLike$5,arrayLikeKeys=_arrayLikeKeys,baseKeys=_baseKeys,isArrayLike$4=isArrayLike_1;function keys$5(Mt){return isArrayLike$4(Mt)?arrayLikeKeys(Mt):baseKeys(Mt)}var keys_1=keys$5,baseGetAllKeys=_baseGetAllKeys,getSymbols=_getSymbols,keys$4=keys_1;function getAllKeys$1(Mt){return baseGetAllKeys(Mt,keys$4,getSymbols)}var _getAllKeys=getAllKeys$1,getAllKeys=_getAllKeys,COMPARE_PARTIAL_FLAG$3=1,objectProto$2=Object.prototype,hasOwnProperty$3=objectProto$2.hasOwnProperty;function equalObjects$1(Mt,st,nn,rn,on,an){var sn=nn&COMPARE_PARTIAL_FLAG$3,un=getAllKeys(Mt),Xr=un.length,to=getAllKeys(st),uo=to.length;if(Xr!=uo&&!sn)return!1;for(var hn=Xr;hn--;){var fn=un[hn];if(!(sn?fn in st:hasOwnProperty$3.call(st,fn)))return!1}var co=an.get(Mt),lo=an.get(st);if(co&&lo)return co==st&&lo==Mt;var fo=!0;an.set(Mt,st),an.set(st,Mt);for(var ho=sn;++hn<Xr;){fn=un[hn];var mo=Mt[fn],Uo=st[fn];if(rn)var _d=sn?rn(Uo,mo,fn,st,Mt,an):rn(mo,Uo,fn,Mt,st,an);if(!(_d===void 0?mo===Uo||on(mo,Uo,nn,rn,an):_d)){fo=!1;break}ho||(ho=fn=="constructor")}if(fo&&!ho){var tp=Mt.constructor,ep=st.constructor;tp!=ep&&"constructor"in Mt&&"constructor"in st&&!(typeof tp=="function"&&tp instanceof tp&&typeof ep=="function"&&ep instanceof ep)&&(fo=!1)}return an.delete(Mt),an.delete(st),fo}var _equalObjects=equalObjects$1,getNative$4=_getNative,root$4=_root,DataView$2=getNative$4(root$4,"DataView"),_DataView=DataView$2,getNative$3=_getNative,root$3=_root,Promise$2=getNative$3(root$3,"Promise"),_Promise=Promise$2,getNative$2=_getNative,root$2=_root,Set$3=getNative$2(root$2,"Set"),_Set=Set$3,getNative$1=_getNative,root$1=_root,WeakMap$2=getNative$1(root$1,"WeakMap"),_WeakMap=WeakMap$2,DataView$1=_DataView,Map$1=_Map,Promise$1=_Promise,Set$2=_Set,WeakMap$1=_WeakMap,baseGetTag$2=_baseGetTag,toSource=_toSource,mapTag="[object Map]",objectTag$2="[object Object]",promiseTag="[object Promise]",setTag="[object Set]",weakMapTag="[object WeakMap]",dataViewTag="[object DataView]",dataViewCtorString=toSource(DataView$1),mapCtorString=toSource(Map$1),promiseCtorString=toSource(Promise$1),setCtorString=toSource(Set$2),weakMapCtorString=toSource(WeakMap$1),getTag$2=baseGetTag$2;(DataView$1&&getTag$2(new DataView$1(new ArrayBuffer(1)))!=dataViewTag||Map$1&&getTag$2(new Map$1)!=mapTag||Promise$1&&getTag$2(Promise$1.resolve())!=promiseTag||Set$2&&getTag$2(new Set$2)!=setTag||WeakMap$1&&getTag$2(new WeakMap$1)!=weakMapTag)&&(getTag$2=function(Mt){var st=baseGetTag$2(Mt),nn=st==objectTag$2?Mt.constructor:void 0,rn=nn?toSource(nn):"";if(rn)switch(rn){case dataViewCtorString:return dataViewTag;case mapCtorString:return mapTag;case promiseCtorString:return promiseTag;case setCtorString:return setTag;case weakMapCtorString:return weakMapTag}return st});var _getTag=getTag$2,Stack$1=_Stack,equalArrays=_equalArrays,equalByTag=_equalByTag,equalObjects=_equalObjects,getTag$1=_getTag,isArray$8=isArray_1,isBuffer=isBufferExports,isTypedArray$1=isTypedArray_1,COMPARE_PARTIAL_FLAG$2=1,argsTag="[object Arguments]",arrayTag="[object Array]",objectTag$1="[object Object]",objectProto$1=Object.prototype,hasOwnProperty$2=objectProto$1.hasOwnProperty;function baseIsEqualDeep$1(Mt,st,nn,rn,on,an){var sn=isArray$8(Mt),un=isArray$8(st),Xr=sn?arrayTag:getTag$1(Mt),to=un?arrayTag:getTag$1(st);Xr=Xr==argsTag?objectTag$1:Xr,to=to==argsTag?objectTag$1:to;var uo=Xr==objectTag$1,hn=to==objectTag$1,fn=Xr==to;if(fn&&isBuffer(Mt)){if(!isBuffer(st))return!1;sn=!0,uo=!1}if(fn&&!uo)return an||(an=new Stack$1),sn||isTypedArray$1(Mt)?equalArrays(Mt,st,nn,rn,on,an):equalByTag(Mt,st,Xr,nn,rn,on,an);if(!(nn&COMPARE_PARTIAL_FLAG$2)){var co=uo&&hasOwnProperty$2.call(Mt,"__wrapped__"),lo=hn&&hasOwnProperty$2.call(st,"__wrapped__");if(co||lo){var fo=co?Mt.value():Mt,ho=lo?st.value():st;return an||(an=new Stack$1),on(fo,ho,nn,rn,an)}}return fn?(an||(an=new Stack$1),equalObjects(Mt,st,nn,rn,on,an)):!1}var _baseIsEqualDeep=baseIsEqualDeep$1,baseIsEqualDeep=_baseIsEqualDeep,isObjectLike$2=isObjectLike_1;function baseIsEqual$3(Mt,st,nn,rn,on){return Mt===st?!0:Mt==null||st==null||!isObjectLike$2(Mt)&&!isObjectLike$2(st)?Mt!==Mt&&st!==st:baseIsEqualDeep(Mt,st,nn,rn,baseIsEqual$3,on)}var _baseIsEqual=baseIsEqual$3,Stack=_Stack,baseIsEqual$2=_baseIsEqual,COMPARE_PARTIAL_FLAG$1=1,COMPARE_UNORDERED_FLAG$1=2;function baseIsMatch$1(Mt,st,nn,rn){var on=nn.length,an=on,sn=!rn;if(Mt==null)return!an;for(Mt=Object(Mt);on--;){var un=nn[on];if(sn&&un[2]?un[1]!==Mt[un[0]]:!(un[0]in Mt))return!1}for(;++on<an;){un=nn[on];var Xr=un[0],to=Mt[Xr],uo=un[1];if(sn&&un[2]){if(to===void 0&&!(Xr in Mt))return!1}else{var hn=new Stack;if(rn)var fn=rn(to,uo,Xr,Mt,st,hn);if(!(fn===void 0?baseIsEqual$2(uo,to,COMPARE_PARTIAL_FLAG$1|COMPARE_UNORDERED_FLAG$1,rn,hn):fn))return!1}}return!0}var _baseIsMatch=baseIsMatch$1,isObject$4=isObject_1;function isStrictComparable$2(Mt){return Mt===Mt&&!isObject$4(Mt)}var _isStrictComparable=isStrictComparable$2,isStrictComparable$1=_isStrictComparable,keys$3=keys_1;function getMatchData$1(Mt){for(var st=keys$3(Mt),nn=st.length;nn--;){var rn=st[nn],on=Mt[rn];st[nn]=[rn,on,isStrictComparable$1(on)]}return st}var _getMatchData=getMatchData$1;function matchesStrictComparable$2(Mt,st){return function(nn){return nn==null?!1:nn[Mt]===st&&(st!==void 0||Mt in Object(nn))}}var _matchesStrictComparable=matchesStrictComparable$2,baseIsMatch=_baseIsMatch,getMatchData=_getMatchData,matchesStrictComparable$1=_matchesStrictComparable;function baseMatches$1(Mt){var st=getMatchData(Mt);return st.length==1&&st[0][2]?matchesStrictComparable$1(st[0][0],st[0][1]):function(nn){return nn===Mt||baseIsMatch(nn,Mt,st)}}var _baseMatches=baseMatches$1;function baseHasIn$1(Mt,st){return Mt!=null&&st in Object(Mt)}var _baseHasIn=baseHasIn$1,castPath=_castPath,isArguments$1=isArguments_1,isArray$7=isArray_1,isIndex$1=_isIndex,isLength=isLength_1,toKey$2=_toKey;function hasPath$1(Mt,st,nn){st=castPath(st,Mt);for(var rn=-1,on=st.length,an=!1;++rn<on;){var sn=toKey$2(st[rn]);if(!(an=Mt!=null&&nn(Mt,sn)))break;Mt=Mt[sn]}return an||++rn!=on?an:(on=Mt==null?0:Mt.length,!!on&&isLength(on)&&isIndex$1(sn,on)&&(isArray$7(Mt)||isArguments$1(Mt)))}var _hasPath=hasPath$1,baseHasIn=_baseHasIn,hasPath=_hasPath;function hasIn$1(Mt,st){return Mt!=null&&hasPath(Mt,st,baseHasIn)}var hasIn_1=hasIn$1,baseIsEqual$1=_baseIsEqual,get=get_1,hasIn=hasIn_1,isKey$1=_isKey,isStrictComparable=_isStrictComparable,matchesStrictComparable=_matchesStrictComparable,toKey$1=_toKey,COMPARE_PARTIAL_FLAG=1,COMPARE_UNORDERED_FLAG=2;function baseMatchesProperty$1(Mt,st){return isKey$1(Mt)&&isStrictComparable(st)?matchesStrictComparable(toKey$1(Mt),st):function(nn){var rn=get(nn,Mt);return rn===void 0&&rn===st?hasIn(nn,Mt):baseIsEqual$1(st,rn,COMPARE_PARTIAL_FLAG|COMPARE_UNORDERED_FLAG)}}var _baseMatchesProperty=baseMatchesProperty$1;function identity$b(Mt){return Mt}var identity_1=identity$b;function baseProperty$1(Mt){return function(st){return st==null?void 0:st[Mt]}}var _baseProperty=baseProperty$1,baseGet$1=_baseGet;function basePropertyDeep$1(Mt){return function(st){return baseGet$1(st,Mt)}}var _basePropertyDeep=basePropertyDeep$1,baseProperty=_baseProperty,basePropertyDeep=_basePropertyDeep,isKey=_isKey,toKey=_toKey;function property$1(Mt){return isKey(Mt)?baseProperty(toKey(Mt)):basePropertyDeep(Mt)}var property_1=property$1,baseMatches=_baseMatches,baseMatchesProperty=_baseMatchesProperty,identity$a=identity_1,isArray$6=isArray_1,property=property_1;function baseIteratee$a(Mt){return typeof Mt=="function"?Mt:Mt==null?identity$a:typeof Mt=="object"?isArray$6(Mt)?baseMatchesProperty(Mt[0],Mt[1]):baseMatches(Mt):property(Mt)}var _baseIteratee=baseIteratee$a;function baseFindIndex$2(Mt,st,nn,rn){for(var on=Mt.length,an=nn+(rn?1:-1);rn?an--:++an<on;)if(st(Mt[an],an,Mt))return an;return-1}var _baseFindIndex=baseFindIndex$2;function baseIsNaN$1(Mt){return Mt!==Mt}var _baseIsNaN=baseIsNaN$1;function strictIndexOf$1(Mt,st,nn){for(var rn=nn-1,on=Mt.length;++rn<on;)if(Mt[rn]===st)return rn;return-1}var _strictIndexOf=strictIndexOf$1,baseFindIndex$1=_baseFindIndex,baseIsNaN=_baseIsNaN,strictIndexOf=_strictIndexOf;function baseIndexOf$1(Mt,st,nn){return st===st?strictIndexOf(Mt,st,nn):baseFindIndex$1(Mt,baseIsNaN,nn)}var _baseIndexOf=baseIndexOf$1,baseIndexOf=_baseIndexOf;function arrayIncludes$1(Mt,st){var nn=Mt==null?0:Mt.length;return!!nn&&baseIndexOf(Mt,st,0)>-1}var _arrayIncludes=arrayIncludes$1;function arrayIncludesWith$1(Mt,st,nn){for(var rn=-1,on=Mt==null?0:Mt.length;++rn<on;)if(nn(st,Mt[rn]))return!0;return!1}var _arrayIncludesWith=arrayIncludesWith$1;function noop$1(){}var noop_1=noop$1,Set$1=_Set,noop=noop_1,setToArray$1=_setToArray,INFINITY$1=1/0,createSet$1=Set$1&&1/setToArray$1(new Set$1([,-0]))[1]==INFINITY$1?function(Mt){return new Set$1(Mt)}:noop,_createSet=createSet$1,SetCache=_SetCache,arrayIncludes=_arrayIncludes,arrayIncludesWith=_arrayIncludesWith,cacheHas=_cacheHas,createSet=_createSet,setToArray=_setToArray,LARGE_ARRAY_SIZE=200;function baseUniq$1(Mt,st,nn){var rn=-1,on=arrayIncludes,an=Mt.length,sn=!0,un=[],Xr=un;if(nn)sn=!1,on=arrayIncludesWith;else if(an>=LARGE_ARRAY_SIZE){var to=st?null:createSet(Mt);if(to)return setToArray(to);sn=!1,on=cacheHas,Xr=new SetCache}else Xr=st?[]:un;e:for(;++rn<an;){var uo=Mt[rn],hn=st?st(uo):uo;if(uo=nn||uo!==0?uo:0,sn&&hn===hn){for(var fn=Xr.length;fn--;)if(Xr[fn]===hn)continue e;st&&Xr.push(hn),un.push(uo)}else on(Xr,hn,nn)||(Xr!==un&&Xr.push(hn),un.push(uo))}return un}var _baseUniq=baseUniq$1,baseIteratee$9=_baseIteratee,baseUniq=_baseUniq;function uniqBy(Mt,st){return Mt&&Mt.length?baseUniq(Mt,baseIteratee$9(st)):[]}var uniqBy_1=uniqBy;const uniqBy$1=getDefaultExportFromCjs(uniqBy_1);function getUniqPayload(Mt,st,nn){return st===!0?uniqBy$1(Mt,nn):isFunction$3(st)?uniqBy$1(Mt,st):Mt}function _typeof$H(Mt){"@babel/helpers - typeof";return _typeof$H=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(st){return typeof st}:function(st){return st&&typeof Symbol=="function"&&st.constructor===Symbol&&st!==Symbol.prototype?"symbol":typeof st},_typeof$H(Mt)}var _excluded$f=["ref"];function ownKeys$A(Mt,st){var nn=Object.keys(Mt);if(Object.getOwnPropertySymbols){var rn=Object.getOwnPropertySymbols(Mt);st&&(rn=rn.filter(function(on){return Object.getOwnPropertyDescriptor(Mt,on).enumerable})),nn.push.apply(nn,rn)}return nn}function _objectSpread$A(Mt){for(var st=1;st<arguments.length;st++){var nn=arguments[st]!=null?arguments[st]:{};st%2?ownKeys$A(Object(nn),!0).forEach(function(rn){_defineProperty$G(Mt,rn,nn[rn])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Mt,Object.getOwnPropertyDescriptors(nn)):ownKeys$A(Object(nn)).forEach(function(rn){Object.defineProperty(Mt,rn,Object.getOwnPropertyDescriptor(nn,rn))})}return Mt}function _classCallCheck$k(Mt,st){if(!(Mt instanceof st))throw new TypeError("Cannot call a class as a function")}function _defineProperties$k(Mt,st){for(var nn=0;nn<st.length;nn++){var rn=st[nn];rn.enumerable=rn.enumerable||!1,rn.configurable=!0,"value"in rn&&(rn.writable=!0),Object.defineProperty(Mt,_toPropertyKey$G(rn.key),rn)}}function _createClass$k(Mt,st,nn){return st&&_defineProperties$k(Mt.prototype,st),nn&&_defineProperties$k(Mt,nn),Object.defineProperty(Mt,"prototype",{writable:!1}),Mt}function _callSuper$g(Mt,st,nn){return st=_getPrototypeOf$h(st),_possibleConstructorReturn$h(Mt,_isNativeReflectConstruct$h()?Reflect.construct(st,nn||[],_getPrototypeOf$h(Mt).constructor):st.apply(Mt,nn))}function _possibleConstructorReturn$h(Mt,st){if(st&&(_typeof$H(st)==="object"||typeof st=="function"))return st;if(st!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$h(Mt)}function _assertThisInitialized$h(Mt){if(Mt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Mt}function _isNativeReflectConstruct$h(){try{var Mt=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_isNativeReflectConstruct$h=function(){return!!Mt})()}function _getPrototypeOf$h(Mt){return _getPrototypeOf$h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(nn){return nn.__proto__||Object.getPrototypeOf(nn)},_getPrototypeOf$h(Mt)}function _inherits$h(Mt,st){if(typeof st!="function"&&st!==null)throw new TypeError("Super expression must either be null or a function");Mt.prototype=Object.create(st&&st.prototype,{constructor:{value:Mt,writable:!0,configurable:!0}}),Object.defineProperty(Mt,"prototype",{writable:!1}),st&&_setPrototypeOf$h(Mt,st)}function _setPrototypeOf$h(Mt,st){return _setPrototypeOf$h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(rn,on){return rn.__proto__=on,rn},_setPrototypeOf$h(Mt,st)}function _defineProperty$G(Mt,st,nn){return st=_toPropertyKey$G(st),st in Mt?Object.defineProperty(Mt,st,{value:nn,enumerable:!0,configurable:!0,writable:!0}):Mt[st]=nn,Mt}function _toPropertyKey$G(Mt){var st=_toPrimitive$G(Mt,"string");return _typeof$H(st)=="symbol"?st:st+""}function _toPrimitive$G(Mt,st){if(_typeof$H(Mt)!="object"||!Mt)return Mt;var nn=Mt[Symbol.toPrimitive];if(nn!==void 0){var rn=nn.call(Mt,st||"default");if(_typeof$H(rn)!="object")return rn;throw new TypeError("@@toPrimitive must return a primitive value.")}return(st==="string"?String:Number)(Mt)}function _objectWithoutProperties$f(Mt,st){if(Mt==null)return{};var nn=_objectWithoutPropertiesLoose$f(Mt,st),rn,on;if(Object.getOwnPropertySymbols){var an=Object.getOwnPropertySymbols(Mt);for(on=0;on<an.length;on++)rn=an[on],!(st.indexOf(rn)>=0)&&Object.prototype.propertyIsEnumerable.call(Mt,rn)&&(nn[rn]=Mt[rn])}return nn}function _objectWithoutPropertiesLoose$f(Mt,st){if(Mt==null)return{};var nn={};for(var rn in Mt)if(Object.prototype.hasOwnProperty.call(Mt,rn)){if(st.indexOf(rn)>=0)continue;nn[rn]=Mt[rn]}return nn}function defaultUniqBy$1(Mt){return Mt.value}function renderContent$1(Mt,st){if(React.isValidElement(Mt))return React.cloneElement(Mt,st);if(typeof Mt=="function")return React.createElement(Mt,st);st.ref;var nn=_objectWithoutProperties$f(st,_excluded$f);return React.createElement(DefaultLegendContent,nn)}var EPS$1=1,Legend=function(Mt){function st(){var nn;_classCallCheck$k(this,st);for(var rn=arguments.length,on=new Array(rn),an=0;an<rn;an++)on[an]=arguments[an];return nn=_callSuper$g(this,st,[].concat(on)),_defineProperty$G(nn,"lastBoundingBox",{width:-1,height:-1}),nn}return _inherits$h(st,Mt),_createClass$k(st,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var rn=this.wrapperNode.getBoundingClientRect();return rn.height=this.wrapperNode.offsetHeight,rn.width=this.wrapperNode.offsetWidth,rn}return null}},{key:"updateBBox",value:function(){var rn=this.props.onBBoxUpdate,on=this.getBBox();on?(Math.abs(on.width-this.lastBoundingBox.width)>EPS$1||Math.abs(on.height-this.lastBoundingBox.height)>EPS$1)&&(this.lastBoundingBox.width=on.width,this.lastBoundingBox.height=on.height,rn&&rn(on)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,rn&&rn(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?_objectSpread$A({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(rn){var on=this.props,an=on.layout,sn=on.align,un=on.verticalAlign,Xr=on.margin,to=on.chartWidth,uo=on.chartHeight,hn,fn;if(!rn||(rn.left===void 0||rn.left===null)&&(rn.right===void 0||rn.right===null))if(sn==="center"&&an==="vertical"){var co=this.getBBoxSnapshot();hn={left:((to||0)-co.width)/2}}else hn=sn==="right"?{right:Xr&&Xr.right||0}:{left:Xr&&Xr.left||0};if(!rn||(rn.top===void 0||rn.top===null)&&(rn.bottom===void 0||rn.bottom===null))if(un==="middle"){var lo=this.getBBoxSnapshot();fn={top:((uo||0)-lo.height)/2}}else fn=un==="bottom"?{bottom:Xr&&Xr.bottom||0}:{top:Xr&&Xr.top||0};return _objectSpread$A(_objectSpread$A({},hn),fn)}},{key:"render",value:function(){var rn=this,on=this.props,an=on.content,sn=on.width,un=on.height,Xr=on.wrapperStyle,to=on.payloadUniqBy,uo=on.payload,hn=_objectSpread$A(_objectSpread$A({position:"absolute",width:sn||"auto",height:un||"auto"},this.getDefaultPosition(Xr)),Xr);return React.createElement("div",{className:"recharts-legend-wrapper",style:hn,ref:function(co){rn.wrapperNode=co}},renderContent$1(an,_objectSpread$A(_objectSpread$A({},this.props),{},{payload:getUniqPayload(uo,to,defaultUniqBy$1)})))}}],[{key:"getWithHeight",value:function(rn,on){var an=_objectSpread$A(_objectSpread$A({},this.defaultProps),rn.props),sn=an.layout;return sn==="vertical"&&isNumber(rn.props.height)?{height:rn.props.height}:sn==="horizontal"?{width:rn.props.width||on}:null}}])}(reactExports.PureComponent);_defineProperty$G(Legend,"displayName","Legend");_defineProperty$G(Legend,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var Symbol$1=_Symbol,isArguments=isArguments_1,isArray$5=isArray_1,spreadableSymbol=Symbol$1?Symbol$1.isConcatSpreadable:void 0;function isFlattenable$1(Mt){return isArray$5(Mt)||isArguments(Mt)||!!(spreadableSymbol&&Mt&&Mt[spreadableSymbol])}var _isFlattenable=isFlattenable$1,arrayPush=_arrayPush,isFlattenable=_isFlattenable;function baseFlatten$2(Mt,st,nn,rn,on){var an=-1,sn=Mt.length;for(nn||(nn=isFlattenable),on||(on=[]);++an<sn;){var un=Mt[an];st>0&&nn(un)?st>1?baseFlatten$2(un,st-1,nn,rn,on):arrayPush(on,un):rn||(on[on.length]=un)}return on}var _baseFlatten=baseFlatten$2;function createBaseFor$1(Mt){return function(st,nn,rn){for(var on=-1,an=Object(st),sn=rn(st),un=sn.length;un--;){var Xr=sn[Mt?un:++on];if(nn(an[Xr],Xr,an)===!1)break}return st}}var _createBaseFor=createBaseFor$1,createBaseFor=_createBaseFor,baseFor$1=createBaseFor(),_baseFor=baseFor$1,baseFor=_baseFor,keys$2=keys_1;function baseForOwn$2(Mt,st){return Mt&&baseFor(Mt,st,keys$2)}var _baseForOwn=baseForOwn$2,isArrayLike$3=isArrayLike_1;function createBaseEach$1(Mt,st){return function(nn,rn){if(nn==null)return nn;if(!isArrayLike$3(nn))return Mt(nn,rn);for(var on=nn.length,an=st?on:-1,sn=Object(nn);(st?an--:++an<on)&&rn(sn[an],an,sn)!==!1;);return nn}}var _createBaseEach=createBaseEach$1,baseForOwn$1=_baseForOwn,createBaseEach=_createBaseEach,baseEach$3=createBaseEach(baseForOwn$1),_baseEach=baseEach$3,baseEach$2=_baseEach,isArrayLike$2=isArrayLike_1;function baseMap$2(Mt,st){var nn=-1,rn=isArrayLike$2(Mt)?Array(Mt.length):[];return baseEach$2(Mt,function(on,an,sn){rn[++nn]=st(on,an,sn)}),rn}var _baseMap=baseMap$2;function baseSortBy$1(Mt,st){var nn=Mt.length;for(Mt.sort(st);nn--;)Mt[nn]=Mt[nn].value;return Mt}var _baseSortBy=baseSortBy$1,isSymbol$2=isSymbol_1;function compareAscending$1(Mt,st){if(Mt!==st){var nn=Mt!==void 0,rn=Mt===null,on=Mt===Mt,an=isSymbol$2(Mt),sn=st!==void 0,un=st===null,Xr=st===st,to=isSymbol$2(st);if(!un&&!to&&!an&&Mt>st||an&&sn&&Xr&&!un&&!to||rn&&sn&&Xr||!nn&&Xr||!on)return 1;if(!rn&&!an&&!to&&Mt<st||to&&nn&&on&&!rn&&!an||un&&nn&&on||!sn&&on||!Xr)return-1}return 0}var _compareAscending=compareAscending$1,compareAscending=_compareAscending;function compareMultiple$1(Mt,st,nn){for(var rn=-1,on=Mt.criteria,an=st.criteria,sn=on.length,un=nn.length;++rn<sn;){var Xr=compareAscending(on[rn],an[rn]);if(Xr){if(rn>=un)return Xr;var to=nn[rn];return Xr*(to=="desc"?-1:1)}}return Mt.index-st.index}var _compareMultiple=compareMultiple$1,arrayMap$1=_arrayMap,baseGet=_baseGet,baseIteratee$8=_baseIteratee,baseMap$1=_baseMap,baseSortBy=_baseSortBy,baseUnary=_baseUnary,compareMultiple=_compareMultiple,identity$9=identity_1,isArray$4=isArray_1;function baseOrderBy$1(Mt,st,nn){st.length?st=arrayMap$1(st,function(an){return isArray$4(an)?function(sn){return baseGet(sn,an.length===1?an[0]:an)}:an}):st=[identity$9];var rn=-1;st=arrayMap$1(st,baseUnary(baseIteratee$8));var on=baseMap$1(Mt,function(an,sn,un){var Xr=arrayMap$1(st,function(to){return to(an)});return{criteria:Xr,index:++rn,value:an}});return baseSortBy(on,function(an,sn){return compareMultiple(an,sn,nn)})}var _baseOrderBy=baseOrderBy$1;function apply$1(Mt,st,nn){switch(nn.length){case 0:return Mt.call(st);case 1:return Mt.call(st,nn[0]);case 2:return Mt.call(st,nn[0],nn[1]);case 3:return Mt.call(st,nn[0],nn[1],nn[2])}return Mt.apply(st,nn)}var _apply=apply$1,apply=_apply,nativeMax$3=Math.max;function overRest$1(Mt,st,nn){return st=nativeMax$3(st===void 0?Mt.length-1:st,0),function(){for(var rn=arguments,on=-1,an=nativeMax$3(rn.length-st,0),sn=Array(an);++on<an;)sn[on]=rn[st+on];on=-1;for(var un=Array(st+1);++on<st;)un[on]=rn[on];return un[st]=nn(sn),apply(Mt,this,un)}}var _overRest=overRest$1;function constant$2(Mt){return function(){return Mt}}var constant_1=constant$2,getNative=_getNative,defineProperty$2=function(){try{var Mt=getNative(Object,"defineProperty");return Mt({},"",{}),Mt}catch{}}(),_defineProperty$F=defineProperty$2,constant$1=constant_1,defineProperty$1=_defineProperty$F,identity$8=identity_1,baseSetToString$1=defineProperty$1?function(Mt,st){return defineProperty$1(Mt,"toString",{configurable:!0,enumerable:!1,value:constant$1(st),writable:!0})}:identity$8,_baseSetToString=baseSetToString$1,HOT_COUNT=800,HOT_SPAN=16,nativeNow=Date.now;function shortOut$1(Mt){var st=0,nn=0;return function(){var rn=nativeNow(),on=HOT_SPAN-(rn-nn);if(nn=rn,on>0){if(++st>=HOT_COUNT)return arguments[0]}else st=0;return Mt.apply(void 0,arguments)}}var _shortOut=shortOut$1,baseSetToString=_baseSetToString,shortOut=_shortOut,setToString$1=shortOut(baseSetToString),_setToString=setToString$1,identity$7=identity_1,overRest=_overRest,setToString=_setToString;function baseRest$1(Mt,st){return setToString(overRest(Mt,st,identity$7),Mt+"")}var _baseRest=baseRest$1,eq=eq_1,isArrayLike$1=isArrayLike_1,isIndex=_isIndex,isObject$3=isObject_1;function isIterateeCall$4(Mt,st,nn){if(!isObject$3(nn))return!1;var rn=typeof st;return(rn=="number"?isArrayLike$1(nn)&&isIndex(st,nn.length):rn=="string"&&st in nn)?eq(nn[st],Mt):!1}var _isIterateeCall=isIterateeCall$4,baseFlatten$1=_baseFlatten,baseOrderBy=_baseOrderBy,baseRest=_baseRest,isIterateeCall$3=_isIterateeCall,sortBy=baseRest(function(Mt,st){if(Mt==null)return[];var nn=st.length;return nn>1&&isIterateeCall$3(Mt,st[0],st[1])?st=[]:nn>2&&isIterateeCall$3(st[0],st[1],st[2])&&(st=[st[0]]),baseOrderBy(Mt,baseFlatten$1(st,1),[])}),sortBy_1=sortBy;const sortBy$1=getDefaultExportFromCjs(sortBy_1);function _typeof$G(Mt){"@babel/helpers - typeof";return _typeof$G=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(st){return typeof st}:function(st){return st&&typeof Symbol=="function"&&st.constructor===Symbol&&st!==Symbol.prototype?"symbol":typeof st},_typeof$G(Mt)}function _extends$q(){return _extends$q=Object.assign?Object.assign.bind():function(Mt){for(var st=1;st<arguments.length;st++){var nn=arguments[st];for(var rn in nn)Object.prototype.hasOwnProperty.call(nn,rn)&&(Mt[rn]=nn[rn])}return Mt},_extends$q.apply(this,arguments)}function _slicedToArray$c(Mt,st){return _arrayWithHoles$d(Mt)||_iterableToArrayLimit$c(Mt,st)||_unsupportedIterableToArray$k(Mt,st)||_nonIterableRest$d()}function _nonIterableRest$d(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$k(Mt,st){if(Mt){if(typeof Mt=="string")return _arrayLikeToArray$k(Mt,st);var nn=Object.prototype.toString.call(Mt).slice(8,-1);if(nn==="Object"&&Mt.constructor&&(nn=Mt.constructor.name),nn==="Map"||nn==="Set")return Array.from(Mt);if(nn==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(nn))return _arrayLikeToArray$k(Mt,st)}}function _arrayLikeToArray$k(Mt,st){(st==null||st>Mt.length)&&(st=Mt.length);for(var nn=0,rn=new Array(st);nn<st;nn++)rn[nn]=Mt[nn];return rn}function _iterableToArrayLimit$c(Mt,st){var nn=Mt==null?null:typeof Symbol<"u"&&Mt[Symbol.iterator]||Mt["@@iterator"];if(nn!=null){var rn,on,an,sn,un=[],Xr=!0,to=!1;try{if(an=(nn=nn.call(Mt)).next,st!==0)for(;!(Xr=(rn=an.call(nn)).done)&&(un.push(rn.value),un.length!==st);Xr=!0);}catch(uo){to=!0,on=uo}finally{try{if(!Xr&&nn.return!=null&&(sn=nn.return(),Object(sn)!==sn))return}finally{if(to)throw on}}return un}}function _arrayWithHoles$d(Mt){if(Array.isArray(Mt))return Mt}function ownKeys$z(Mt,st){var nn=Object.keys(Mt);if(Object.getOwnPropertySymbols){var rn=Object.getOwnPropertySymbols(Mt);st&&(rn=rn.filter(function(on){return Object.getOwnPropertyDescriptor(Mt,on).enumerable})),nn.push.apply(nn,rn)}return nn}function _objectSpread$z(Mt){for(var st=1;st<arguments.length;st++){var nn=arguments[st]!=null?arguments[st]:{};st%2?ownKeys$z(Object(nn),!0).forEach(function(rn){_defineProperty$E(Mt,rn,nn[rn])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Mt,Object.getOwnPropertyDescriptors(nn)):ownKeys$z(Object(nn)).forEach(function(rn){Object.defineProperty(Mt,rn,Object.getOwnPropertyDescriptor(nn,rn))})}return Mt}function _defineProperty$E(Mt,st,nn){return st=_toPropertyKey$F(st),st in Mt?Object.defineProperty(Mt,st,{value:nn,enumerable:!0,configurable:!0,writable:!0}):Mt[st]=nn,Mt}function _toPropertyKey$F(Mt){var st=_toPrimitive$F(Mt,"string");return _typeof$G(st)=="symbol"?st:st+""}function _toPrimitive$F(Mt,st){if(_typeof$G(Mt)!="object"||!Mt)return Mt;var nn=Mt[Symbol.toPrimitive];if(nn!==void 0){var rn=nn.call(Mt,st||"default");if(_typeof$G(rn)!="object")return rn;throw new TypeError("@@toPrimitive must return a primitive value.")}return(st==="string"?String:Number)(Mt)}function defaultFormatter(Mt){return Array.isArray(Mt)&&isNumOrStr(Mt[0])&&isNumOrStr(Mt[1])?Mt.join(" ~ "):Mt}var DefaultTooltipContent=function Mt(st){var nn=st.separator,rn=nn===void 0?" : ":nn,on=st.contentStyle,an=on===void 0?{}:on,sn=st.itemStyle,un=sn===void 0?{}:sn,Xr=st.labelStyle,to=Xr===void 0?{}:Xr,uo=st.payload,hn=st.formatter,fn=st.itemSorter,co=st.wrapperClassName,lo=st.labelClassName,fo=st.label,ho=st.labelFormatter,mo=st.accessibilityLayer,Uo=mo===void 0?!1:mo,_d=function(){if(uo&&uo.length){var up={padding:0,margin:0},pp=(fn?sortBy$1(uo,fn):uo).map(function(lp,dp){if(lp.type==="none")return null;var cp=_objectSpread$z({display:"block",paddingTop:4,paddingBottom:4,color:lp.color||"#000"},un),fp=lp.formatter||hn||defaultFormatter,gp=lp.value,mp=lp.name,xp=gp,_p=mp;if(fp&&xp!=null&&_p!=null){var Sp=fp(gp,mp,lp,dp,uo);if(Array.isArray(Sp)){var Cp=_slicedToArray$c(Sp,2);xp=Cp[0],_p=Cp[1]}else xp=Sp}return React.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(dp),style:cp},isNumOrStr(_p)?React.createElement("span",{className:"recharts-tooltip-item-name"},_p):null,isNumOrStr(_p)?React.createElement("span",{className:"recharts-tooltip-item-separator"},rn):null,React.createElement("span",{className:"recharts-tooltip-item-value"},xp),React.createElement("span",{className:"recharts-tooltip-item-unit"},lp.unit||""))});return React.createElement("ul",{className:"recharts-tooltip-item-list",style:up},pp)}return null},tp=_objectSpread$z({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},an),ep=_objectSpread$z({margin:0},to),np=!isNil$1(fo),rp=np?fo:"",ip=clsx("recharts-default-tooltip",co),op=clsx("recharts-tooltip-label",lo);np&&ho&&uo!==void 0&&uo!==null&&(rp=ho(fo,uo));var ap=Uo?{role:"status","aria-live":"assertive"}:{};return React.createElement("div",_extends$q({className:ip,style:tp},ap),React.createElement("p",{className:op,style:ep},React.isValidElement(rp)?rp:"".concat(rp)),_d())};function _typeof$F(Mt){"@babel/helpers - typeof";return _typeof$F=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(st){return typeof st}:function(st){return st&&typeof Symbol=="function"&&st.constructor===Symbol&&st!==Symbol.prototype?"symbol":typeof st},_typeof$F(Mt)}function _defineProperty$D(Mt,st,nn){return st=_toPropertyKey$E(st),st in Mt?Object.defineProperty(Mt,st,{value:nn,enumerable:!0,configurable:!0,writable:!0}):Mt[st]=nn,Mt}function _toPropertyKey$E(Mt){var st=_toPrimitive$E(Mt,"string");return _typeof$F(st)=="symbol"?st:st+""}function _toPrimitive$E(Mt,st){if(_typeof$F(Mt)!="object"||!Mt)return Mt;var nn=Mt[Symbol.toPrimitive];if(nn!==void 0){var rn=nn.call(Mt,st||"default");if(_typeof$F(rn)!="object")return rn;throw new TypeError("@@toPrimitive must return a primitive value.")}return(st==="string"?String:Number)(Mt)}var CSS_CLASS_PREFIX="recharts-tooltip-wrapper",TOOLTIP_HIDDEN={visibility:"hidden"};function getTooltipCSSClassName(Mt){var st=Mt.coordinate,nn=Mt.translateX,rn=Mt.translateY;return clsx(CSS_CLASS_PREFIX,_defineProperty$D(_defineProperty$D(_defineProperty$D(_defineProperty$D({},"".concat(CSS_CLASS_PREFIX,"-right"),isNumber(nn)&&st&&isNumber(st.x)&&nn>=st.x),"".concat(CSS_CLASS_PREFIX,"-left"),isNumber(nn)&&st&&isNumber(st.x)&&nn<st.x),"".concat(CSS_CLASS_PREFIX,"-bottom"),isNumber(rn)&&st&&isNumber(st.y)&&rn>=st.y),"".concat(CSS_CLASS_PREFIX,"-top"),isNumber(rn)&&st&&isNumber(st.y)&&rn<st.y))}function getTooltipTranslateXY(Mt){var st=Mt.allowEscapeViewBox,nn=Mt.coordinate,rn=Mt.key,on=Mt.offsetTopLeft,an=Mt.position,sn=Mt.reverseDirection,un=Mt.tooltipDimension,Xr=Mt.viewBox,to=Mt.viewBoxDimension;if(an&&isNumber(an[rn]))return an[rn];var uo=nn[rn]-un-on,hn=nn[rn]+on;if(st[rn])return sn[rn]?uo:hn;if(sn[rn]){var fn=uo,co=Xr[rn];return fn<co?Math.max(hn,Xr[rn]):Math.max(uo,Xr[rn])}var lo=hn+un,fo=Xr[rn]+to;return lo>fo?Math.max(uo,Xr[rn]):Math.max(hn,Xr[rn])}function getTransformStyle(Mt){var st=Mt.translateX,nn=Mt.translateY,rn=Mt.useTranslate3d;return{transform:rn?"translate3d(".concat(st,"px, ").concat(nn,"px, 0)"):"translate(".concat(st,"px, ").concat(nn,"px)")}}function getTooltipTranslate(Mt){var st=Mt.allowEscapeViewBox,nn=Mt.coordinate,rn=Mt.offsetTopLeft,on=Mt.position,an=Mt.reverseDirection,sn=Mt.tooltipBox,un=Mt.useTranslate3d,Xr=Mt.viewBox,to,uo,hn;return sn.height>0&&sn.width>0&&nn?(uo=getTooltipTranslateXY({allowEscapeViewBox:st,coordinate:nn,key:"x",offsetTopLeft:rn,position:on,reverseDirection:an,tooltipDimension:sn.width,viewBox:Xr,viewBoxDimension:Xr.width}),hn=getTooltipTranslateXY({allowEscapeViewBox:st,coordinate:nn,key:"y",offsetTopLeft:rn,position:on,reverseDirection:an,tooltipDimension:sn.height,viewBox:Xr,viewBoxDimension:Xr.height}),to=getTransformStyle({translateX:uo,translateY:hn,useTranslate3d:un})):to=TOOLTIP_HIDDEN,{cssProperties:to,cssClasses:getTooltipCSSClassName({translateX:uo,translateY:hn,coordinate:nn})}}function _typeof$E(Mt){"@babel/helpers - typeof";return _typeof$E=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(st){return typeof st}:function(st){return st&&typeof Symbol=="function"&&st.constructor===Symbol&&st!==Symbol.prototype?"symbol":typeof st},_typeof$E(Mt)}function ownKeys$y(Mt,st){var nn=Object.keys(Mt);if(Object.getOwnPropertySymbols){var rn=Object.getOwnPropertySymbols(Mt);st&&(rn=rn.filter(function(on){return Object.getOwnPropertyDescriptor(Mt,on).enumerable})),nn.push.apply(nn,rn)}return nn}function _objectSpread$y(Mt){for(var st=1;st<arguments.length;st++){var nn=arguments[st]!=null?arguments[st]:{};st%2?ownKeys$y(Object(nn),!0).forEach(function(rn){_defineProperty$C(Mt,rn,nn[rn])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Mt,Object.getOwnPropertyDescriptors(nn)):ownKeys$y(Object(nn)).forEach(function(rn){Object.defineProperty(Mt,rn,Object.getOwnPropertyDescriptor(nn,rn))})}return Mt}function _classCallCheck$j(Mt,st){if(!(Mt instanceof st))throw new TypeError("Cannot call a class as a function")}function _defineProperties$j(Mt,st){for(var nn=0;nn<st.length;nn++){var rn=st[nn];rn.enumerable=rn.enumerable||!1,rn.configurable=!0,"value"in rn&&(rn.writable=!0),Object.defineProperty(Mt,_toPropertyKey$D(rn.key),rn)}}function _createClass$j(Mt,st,nn){return st&&_defineProperties$j(Mt.prototype,st),Object.defineProperty(Mt,"prototype",{writable:!1}),Mt}function _callSuper$f(Mt,st,nn){return st=_getPrototypeOf$g(st),_possibleConstructorReturn$g(Mt,_isNativeReflectConstruct$g()?Reflect.construct(st,nn||[],_getPrototypeOf$g(Mt).constructor):st.apply(Mt,nn))}function _possibleConstructorReturn$g(Mt,st){if(st&&(_typeof$E(st)==="object"||typeof st=="function"))return st;if(st!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$g(Mt)}function _assertThisInitialized$g(Mt){if(Mt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Mt}function _isNativeReflectConstruct$g(){try{var Mt=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_isNativeReflectConstruct$g=function(){return!!Mt})()}function _getPrototypeOf$g(Mt){return _getPrototypeOf$g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(nn){return nn.__proto__||Object.getPrototypeOf(nn)},_getPrototypeOf$g(Mt)}function _inherits$g(Mt,st){if(typeof st!="function"&&st!==null)throw new TypeError("Super expression must either be null or a function");Mt.prototype=Object.create(st&&st.prototype,{constructor:{value:Mt,writable:!0,configurable:!0}}),Object.defineProperty(Mt,"prototype",{writable:!1}),st&&_setPrototypeOf$g(Mt,st)}function _setPrototypeOf$g(Mt,st){return _setPrototypeOf$g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(rn,on){return rn.__proto__=on,rn},_setPrototypeOf$g(Mt,st)}function _defineProperty$C(Mt,st,nn){return st=_toPropertyKey$D(st),st in Mt?Object.defineProperty(Mt,st,{value:nn,enumerable:!0,configurable:!0,writable:!0}):Mt[st]=nn,Mt}function _toPropertyKey$D(Mt){var st=_toPrimitive$D(Mt,"string");return _typeof$E(st)=="symbol"?st:st+""}function _toPrimitive$D(Mt,st){if(_typeof$E(Mt)!="object"||!Mt)return Mt;var nn=Mt[Symbol.toPrimitive];if(nn!==void 0){var rn=nn.call(Mt,st||"default");if(_typeof$E(rn)!="object")return rn;throw new TypeError("@@toPrimitive must return a primitive value.")}return(st==="string"?String:Number)(Mt)}var EPSILON=1,TooltipBoundingBox=function(Mt){function st(){var nn;_classCallCheck$j(this,st);for(var rn=arguments.length,on=new Array(rn),an=0;an<rn;an++)on[an]=arguments[an];return nn=_callSuper$f(this,st,[].concat(on)),_defineProperty$C(nn,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),_defineProperty$C(nn,"handleKeyDown",function(sn){if(sn.key==="Escape"){var un,Xr,to,uo;nn.setState({dismissed:!0,dismissedAtCoordinate:{x:(un=(Xr=nn.props.coordinate)===null||Xr===void 0?void 0:Xr.x)!==null&&un!==void 0?un:0,y:(to=(uo=nn.props.coordinate)===null||uo===void 0?void 0:uo.y)!==null&&to!==void 0?to:0}})}}),nn}return _inherits$g(st,Mt),_createClass$j(st,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var rn=this.wrapperNode.getBoundingClientRect();(Math.abs(rn.width-this.state.lastBoundingBox.width)>EPSILON||Math.abs(rn.height-this.state.lastBoundingBox.height)>EPSILON)&&this.setState({lastBoundingBox:{width:rn.width,height:rn.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var rn,on;this.props.active&&this.updateBBox(),this.state.dismissed&&(((rn=this.props.coordinate)===null||rn===void 0?void 0:rn.x)!==this.state.dismissedAtCoordinate.x||((on=this.props.coordinate)===null||on===void 0?void 0:on.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var rn=this,on=this.props,an=on.active,sn=on.allowEscapeViewBox,un=on.animationDuration,Xr=on.animationEasing,to=on.children,uo=on.coordinate,hn=on.hasPayload,fn=on.isAnimationActive,co=on.offset,lo=on.position,fo=on.reverseDirection,ho=on.useTranslate3d,mo=on.viewBox,Uo=on.wrapperStyle,_d=getTooltipTranslate({allowEscapeViewBox:sn,coordinate:uo,offsetTopLeft:co,position:lo,reverseDirection:fo,tooltipBox:this.state.lastBoundingBox,useTranslate3d:ho,viewBox:mo}),tp=_d.cssClasses,ep=_d.cssProperties,np=_objectSpread$y(_objectSpread$y({transition:fn&&an?"transform ".concat(un,"ms ").concat(Xr):void 0},ep),{},{pointerEvents:"none",visibility:!this.state.dismissed&&an&&hn?"visible":"hidden",position:"absolute",top:0,left:0},Uo);return React.createElement("div",{tabIndex:-1,className:tp,style:np,ref:function(ip){rn.wrapperNode=ip}},to)}}])}(reactExports.PureComponent),parseIsSsrByDefault=function Mt(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},Global={isSsr:parseIsSsrByDefault(),get:function Mt(st){return Global[st]},set:function Mt(st,nn){if(typeof st=="string")Global[st]=nn;else{var rn=Object.keys(st);rn&&rn.length&&rn.forEach(function(on){Global[on]=st[on]})}}};function _typeof$D(Mt){"@babel/helpers - typeof";return _typeof$D=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(st){return typeof st}:function(st){return st&&typeof Symbol=="function"&&st.constructor===Symbol&&st!==Symbol.prototype?"symbol":typeof st},_typeof$D(Mt)}function ownKeys$x(Mt,st){var nn=Object.keys(Mt);if(Object.getOwnPropertySymbols){var rn=Object.getOwnPropertySymbols(Mt);st&&(rn=rn.filter(function(on){return Object.getOwnPropertyDescriptor(Mt,on).enumerable})),nn.push.apply(nn,rn)}return nn}function _objectSpread$x(Mt){for(var st=1;st<arguments.length;st++){var nn=arguments[st]!=null?arguments[st]:{};st%2?ownKeys$x(Object(nn),!0).forEach(function(rn){_defineProperty$B(Mt,rn,nn[rn])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Mt,Object.getOwnPropertyDescriptors(nn)):ownKeys$x(Object(nn)).forEach(function(rn){Object.defineProperty(Mt,rn,Object.getOwnPropertyDescriptor(nn,rn))})}return Mt}function _classCallCheck$i(Mt,st){if(!(Mt instanceof st))throw new TypeError("Cannot call a class as a function")}function _defineProperties$i(Mt,st){for(var nn=0;nn<st.length;nn++){var rn=st[nn];rn.enumerable=rn.enumerable||!1,rn.configurable=!0,"value"in rn&&(rn.writable=!0),Object.defineProperty(Mt,_toPropertyKey$C(rn.key),rn)}}function _createClass$i(Mt,st,nn){return st&&_defineProperties$i(Mt.prototype,st),Object.defineProperty(Mt,"prototype",{writable:!1}),Mt}function _callSuper$e(Mt,st,nn){return st=_getPrototypeOf$f(st),_possibleConstructorReturn$f(Mt,_isNativeReflectConstruct$f()?Reflect.construct(st,nn||[],_getPrototypeOf$f(Mt).constructor):st.apply(Mt,nn))}function _possibleConstructorReturn$f(Mt,st){if(st&&(_typeof$D(st)==="object"||typeof st=="function"))return st;if(st!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$f(Mt)}function _assertThisInitialized$f(Mt){if(Mt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Mt}function _isNativeReflectConstruct$f(){try{var Mt=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_isNativeReflectConstruct$f=function(){return!!Mt})()}function _getPrototypeOf$f(Mt){return _getPrototypeOf$f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(nn){return nn.__proto__||Object.getPrototypeOf(nn)},_getPrototypeOf$f(Mt)}function _inherits$f(Mt,st){if(typeof st!="function"&&st!==null)throw new TypeError("Super expression must either be null or a function");Mt.prototype=Object.create(st&&st.prototype,{constructor:{value:Mt,writable:!0,configurable:!0}}),Object.defineProperty(Mt,"prototype",{writable:!1}),st&&_setPrototypeOf$f(Mt,st)}function _setPrototypeOf$f(Mt,st){return _setPrototypeOf$f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(rn,on){return rn.__proto__=on,rn},_setPrototypeOf$f(Mt,st)}function _defineProperty$B(Mt,st,nn){return st=_toPropertyKey$C(st),st in Mt?Object.defineProperty(Mt,st,{value:nn,enumerable:!0,configurable:!0,writable:!0}):Mt[st]=nn,Mt}function _toPropertyKey$C(Mt){var st=_toPrimitive$C(Mt,"string");return _typeof$D(st)=="symbol"?st:st+""}function _toPrimitive$C(Mt,st){if(_typeof$D(Mt)!="object"||!Mt)return Mt;var nn=Mt[Symbol.toPrimitive];if(nn!==void 0){var rn=nn.call(Mt,st||"default");if(_typeof$D(rn)!="object")return rn;throw new TypeError("@@toPrimitive must return a primitive value.")}return(st==="string"?String:Number)(Mt)}function defaultUniqBy(Mt){return Mt.dataKey}function renderContent(Mt,st){return React.isValidElement(Mt)?React.cloneElement(Mt,st):typeof Mt=="function"?React.createElement(Mt,st):React.createElement(DefaultTooltipContent,st)}var Tooltip=function(Mt){function st(){return _classCallCheck$i(this,st),_callSuper$e(this,st,arguments)}return _inherits$f(st,Mt),_createClass$i(st,[{key:"render",value:function(){var rn=this,on=this.props,an=on.active,sn=on.allowEscapeViewBox,un=on.animationDuration,Xr=on.animationEasing,to=on.content,uo=on.coordinate,hn=on.filterNull,fn=on.isAnimationActive,co=on.offset,lo=on.payload,fo=on.payloadUniqBy,ho=on.position,mo=on.reverseDirection,Uo=on.useTranslate3d,_d=on.viewBox,tp=on.wrapperStyle,ep=lo??[];hn&&ep.length&&(ep=getUniqPayload(lo.filter(function(rp){return rp.value!=null&&(rp.hide!==!0||rn.props.includeHidden)}),fo,defaultUniqBy));var np=ep.length>0;return React.createElement(TooltipBoundingBox,{allowEscapeViewBox:sn,animationDuration:un,animationEasing:Xr,isAnimationActive:fn,active:an,coordinate:uo,hasPayload:np,offset:co,position:ho,reverseDirection:mo,useTranslate3d:Uo,viewBox:_d,wrapperStyle:tp},renderContent(to,_objectSpread$x(_objectSpread$x({},this.props),{},{payload:ep})))}}])}(reactExports.PureComponent);_defineProperty$B(Tooltip,"displayName","Tooltip");_defineProperty$B(Tooltip,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!Global.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var root=_root,now$1=function(){return root.Date.now()},now_1=now$1,reWhitespace=/\s/;function trimmedEndIndex$1(Mt){for(var st=Mt.length;st--&&reWhitespace.test(Mt.charAt(st)););return st}var _trimmedEndIndex=trimmedEndIndex$1,trimmedEndIndex=_trimmedEndIndex,reTrimStart=/^\s+/;function baseTrim$1(Mt){return Mt&&Mt.slice(0,trimmedEndIndex(Mt)+1).replace(reTrimStart,"")}var _baseTrim=baseTrim$1,baseTrim=_baseTrim,isObject$2=isObject_1,isSymbol$1=isSymbol_1,NAN=NaN,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsOctal=/^0o[0-7]+$/i,freeParseInt=parseInt;function toNumber$2(Mt){if(typeof Mt=="number")return Mt;if(isSymbol$1(Mt))return NAN;if(isObject$2(Mt)){var st=typeof Mt.valueOf=="function"?Mt.valueOf():Mt;Mt=isObject$2(st)?st+"":st}if(typeof Mt!="string")return Mt===0?Mt:+Mt;Mt=baseTrim(Mt);var nn=reIsBinary.test(Mt);return nn||reIsOctal.test(Mt)?freeParseInt(Mt.slice(2),nn?2:8):reIsBadHex.test(Mt)?NAN:+Mt}var toNumber_1=toNumber$2,isObject$1=isObject_1,now=now_1,toNumber$1=toNumber_1,FUNC_ERROR_TEXT$1="Expected a function",nativeMax$2=Math.max,nativeMin=Math.min;function debounce$1(Mt,st,nn){var rn,on,an,sn,un,Xr,to=0,uo=!1,hn=!1,fn=!0;if(typeof Mt!="function")throw new TypeError(FUNC_ERROR_TEXT$1);st=toNumber$1(st)||0,isObject$1(nn)&&(uo=!!nn.leading,hn="maxWait"in nn,an=hn?nativeMax$2(toNumber$1(nn.maxWait)||0,st):an,fn="trailing"in nn?!!nn.trailing:fn);function co(np){var rp=rn,ip=on;return rn=on=void 0,to=np,sn=Mt.apply(ip,rp),sn}function lo(np){return to=np,un=setTimeout(mo,st),uo?co(np):sn}function fo(np){var rp=np-Xr,ip=np-to,op=st-rp;return hn?nativeMin(op,an-ip):op}function ho(np){var rp=np-Xr,ip=np-to;return Xr===void 0||rp>=st||rp<0||hn&&ip>=an}function mo(){var np=now();if(ho(np))return Uo(np);un=setTimeout(mo,fo(np))}function Uo(np){return un=void 0,fn&&rn?co(np):(rn=on=void 0,sn)}function _d(){un!==void 0&&clearTimeout(un),to=0,rn=Xr=on=un=void 0}function tp(){return un===void 0?sn:Uo(now())}function ep(){var np=now(),rp=ho(np);if(rn=arguments,on=this,Xr=np,rp){if(un===void 0)return lo(Xr);if(hn)return clearTimeout(un),un=setTimeout(mo,st),co(Xr)}return un===void 0&&(un=setTimeout(mo,st)),sn}return ep.cancel=_d,ep.flush=tp,ep}var debounce_1=debounce$1,debounce=debounce_1,isObject=isObject_1,FUNC_ERROR_TEXT="Expected a function";function throttle(Mt,st,nn){var rn=!0,on=!0;if(typeof Mt!="function")throw new TypeError(FUNC_ERROR_TEXT);return isObject(nn)&&(rn="leading"in nn?!!nn.leading:rn,on="trailing"in nn?!!nn.trailing:on),debounce(Mt,st,{leading:rn,maxWait:st,trailing:on})}var throttle_1=throttle;const throttle$1=getDefaultExportFromCjs(throttle_1);function _typeof$C(Mt){"@babel/helpers - typeof";return _typeof$C=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(st){return typeof st}:function(st){return st&&typeof Symbol=="function"&&st.constructor===Symbol&&st!==Symbol.prototype?"symbol":typeof st},_typeof$C(Mt)}function ownKeys$w(Mt,st){var nn=Object.keys(Mt);if(Object.getOwnPropertySymbols){var rn=Object.getOwnPropertySymbols(Mt);st&&(rn=rn.filter(function(on){return Object.getOwnPropertyDescriptor(Mt,on).enumerable})),nn.push.apply(nn,rn)}return nn}function _objectSpread$w(Mt){for(var st=1;st<arguments.length;st++){var nn=arguments[st]!=null?arguments[st]:{};st%2?ownKeys$w(Object(nn),!0).forEach(function(rn){_defineProperty$A(Mt,rn,nn[rn])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Mt,Object.getOwnPropertyDescriptors(nn)):ownKeys$w(Object(nn)).forEach(function(rn){Object.defineProperty(Mt,rn,Object.getOwnPropertyDescriptor(nn,rn))})}return Mt}function _defineProperty$A(Mt,st,nn){return st=_toPropertyKey$B(st),st in Mt?Object.defineProperty(Mt,st,{value:nn,enumerable:!0,configurable:!0,writable:!0}):Mt[st]=nn,Mt}function _toPropertyKey$B(Mt){var st=_toPrimitive$B(Mt,"string");return _typeof$C(st)=="symbol"?st:st+""}function _toPrimitive$B(Mt,st){if(_typeof$C(Mt)!="object"||!Mt)return Mt;var nn=Mt[Symbol.toPrimitive];if(nn!==void 0){var rn=nn.call(Mt,st||"default");if(_typeof$C(rn)!="object")return rn;throw new TypeError("@@toPrimitive must return a primitive value.")}return(st==="string"?String:Number)(Mt)}function _slicedToArray$b(Mt,st){return _arrayWithHoles$c(Mt)||_iterableToArrayLimit$b(Mt,st)||_unsupportedIterableToArray$j(Mt,st)||_nonIterableRest$c()}function _nonIterableRest$c(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$j(Mt,st){if(Mt){if(typeof Mt=="string")return _arrayLikeToArray$j(Mt,st);var nn=Object.prototype.toString.call(Mt).slice(8,-1);if(nn==="Object"&&Mt.constructor&&(nn=Mt.constructor.name),nn==="Map"||nn==="Set")return Array.from(Mt);if(nn==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(nn))return _arrayLikeToArray$j(Mt,st)}}function _arrayLikeToArray$j(Mt,st){(st==null||st>Mt.length)&&(st=Mt.length);for(var nn=0,rn=new Array(st);nn<st;nn++)rn[nn]=Mt[nn];return rn}function _iterableToArrayLimit$b(Mt,st){var nn=Mt==null?null:typeof Symbol<"u"&&Mt[Symbol.iterator]||Mt["@@iterator"];if(nn!=null){var rn,on,an,sn,un=[],Xr=!0,to=!1;try{if(an=(nn=nn.call(Mt)).next,st!==0)for(;!(Xr=(rn=an.call(nn)).done)&&(un.push(rn.value),un.length!==st);Xr=!0);}catch(uo){to=!0,on=uo}finally{try{if(!Xr&&nn.return!=null&&(sn=nn.return(),Object(sn)!==sn))return}finally{if(to)throw on}}return un}}function _arrayWithHoles$c(Mt){if(Array.isArray(Mt))return Mt}var ResponsiveContainer=reactExports.forwardRef(function(Mt,st){var nn=Mt.aspect,rn=Mt.initialDimension,on=rn===void 0?{width:-1,height:-1}:rn,an=Mt.width,sn=an===void 0?"100%":an,un=Mt.height,Xr=un===void 0?"100%":un,to=Mt.minWidth,uo=to===void 0?0:to,hn=Mt.minHeight,fn=Mt.maxHeight,co=Mt.children,lo=Mt.debounce,fo=lo===void 0?0:lo,ho=Mt.id,mo=Mt.className,Uo=Mt.onResize,_d=Mt.style,tp=_d===void 0?{}:_d,ep=reactExports.useRef(null),np=reactExports.useRef();np.current=Uo,reactExports.useImperativeHandle(st,function(){return Object.defineProperty(ep.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),ep.current},configurable:!0})});var rp=reactExports.useState({containerWidth:on.width,containerHeight:on.height}),ip=_slicedToArray$b(rp,2),op=ip[0],ap=ip[1],sp=reactExports.useCallback(function(pp,lp){ap(function(dp){var cp=Math.round(pp),fp=Math.round(lp);return dp.containerWidth===cp&&dp.containerHeight===fp?dp:{containerWidth:cp,containerHeight:fp}})},[]);reactExports.useEffect(function(){var pp=function(mp){var xp,_p=mp[0].contentRect,Sp=_p.width,Cp=_p.height;sp(Sp,Cp),(xp=np.current)===null||xp===void 0||xp.call(np,Sp,Cp)};fo>0&&(pp=throttle$1(pp,fo,{trailing:!0,leading:!1}));var lp=new ResizeObserver(pp),dp=ep.current.getBoundingClientRect(),cp=dp.width,fp=dp.height;return sp(cp,fp),lp.observe(ep.current),function(){lp.disconnect()}},[sp,fo]);var up=reactExports.useMemo(function(){var pp=op.containerWidth,lp=op.containerHeight;if(pp<0||lp<0)return null;warn(isPercent(sn)||isPercent(Xr),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,sn,Xr),warn(!nn||nn>0,"The aspect(%s) must be greater than zero.",nn);var dp=isPercent(sn)?pp:sn,cp=isPercent(Xr)?lp:Xr;nn&&nn>0&&(dp?cp=dp/nn:cp&&(dp=cp*nn),fn&&cp>fn&&(cp=fn)),warn(dp>0||cp>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,dp,cp,sn,Xr,uo,hn,nn);var fp=!Array.isArray(co)&&getDisplayName(co.type).endsWith("Chart");return React.Children.map(co,function(gp){return React.isValidElement(gp)?reactExports.cloneElement(gp,_objectSpread$w({width:dp,height:cp},fp?{style:_objectSpread$w({height:"100%",width:"100%",maxHeight:cp,maxWidth:dp},gp.props.style)}:{})):gp})},[nn,co,Xr,fn,hn,uo,op,sn]);return React.createElement("div",{id:ho?"".concat(ho):void 0,className:clsx("recharts-responsive-container",mo),style:_objectSpread$w(_objectSpread$w({},tp),{},{width:sn,height:Xr,minWidth:uo,minHeight:hn,maxHeight:fn}),ref:ep},up)}),Cell=function Mt(st){return null};Cell.displayName="Cell";function _typeof$B(Mt){"@babel/helpers - typeof";return _typeof$B=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(st){return typeof st}:function(st){return st&&typeof Symbol=="function"&&st.constructor===Symbol&&st!==Symbol.prototype?"symbol":typeof st},_typeof$B(Mt)}function ownKeys$v(Mt,st){var nn=Object.keys(Mt);if(Object.getOwnPropertySymbols){var rn=Object.getOwnPropertySymbols(Mt);st&&(rn=rn.filter(function(on){return Object.getOwnPropertyDescriptor(Mt,on).enumerable})),nn.push.apply(nn,rn)}return nn}function _objectSpread$v(Mt){for(var st=1;st<arguments.length;st++){var nn=arguments[st]!=null?arguments[st]:{};st%2?ownKeys$v(Object(nn),!0).forEach(function(rn){_defineProperty$z(Mt,rn,nn[rn])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Mt,Object.getOwnPropertyDescriptors(nn)):ownKeys$v(Object(nn)).forEach(function(rn){Object.defineProperty(Mt,rn,Object.getOwnPropertyDescriptor(nn,rn))})}return Mt}function _defineProperty$z(Mt,st,nn){return st=_toPropertyKey$A(st),st in Mt?Object.defineProperty(Mt,st,{value:nn,enumerable:!0,configurable:!0,writable:!0}):Mt[st]=nn,Mt}function _toPropertyKey$A(Mt){var st=_toPrimitive$A(Mt,"string");return _typeof$B(st)=="symbol"?st:st+""}function _toPrimitive$A(Mt,st){if(_typeof$B(Mt)!="object"||!Mt)return Mt;var nn=Mt[Symbol.toPrimitive];if(nn!==void 0){var rn=nn.call(Mt,st||"default");if(_typeof$B(rn)!="object")return rn;throw new TypeError("@@toPrimitive must return a primitive value.")}return(st==="string"?String:Number)(Mt)}var stringCache={widthCache:{},cacheCount:0},MAX_CACHE_NUM=2e3,SPAN_STYLE={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},MEASUREMENT_SPAN_ID="recharts_measurement_span";function removeInvalidKeys(Mt){var st=_objectSpread$v({},Mt);return Object.keys(st).forEach(function(nn){st[nn]||delete st[nn]}),st}var getStringSize=function Mt(st){var nn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(st==null||Global.isSsr)return{width:0,height:0};var rn=removeInvalidKeys(nn),on=JSON.stringify({text:st,copyStyle:rn});if(stringCache.widthCache[on])return stringCache.widthCache[on];try{var an=document.getElementById(MEASUREMENT_SPAN_ID);an||(an=document.createElement("span"),an.setAttribute("id",MEASUREMENT_SPAN_ID),an.setAttribute("aria-hidden","true"),document.body.appendChild(an));var sn=_objectSpread$v(_objectSpread$v({},SPAN_STYLE),rn);Object.assign(an.style,sn),an.textContent="".concat(st);var un=an.getBoundingClientRect(),Xr={width:un.width,height:un.height};return stringCache.widthCache[on]=Xr,++stringCache.cacheCount>MAX_CACHE_NUM&&(stringCache.cacheCount=0,stringCache.widthCache={}),Xr}catch{return{width:0,height:0}}},getOffset=function Mt(st){return{top:st.top+window.scrollY-document.documentElement.clientTop,left:st.left+window.scrollX-document.documentElement.clientLeft}};function _typeof$A(Mt){"@babel/helpers - typeof";return _typeof$A=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(st){return typeof st}:function(st){return st&&typeof Symbol=="function"&&st.constructor===Symbol&&st!==Symbol.prototype?"symbol":typeof st},_typeof$A(Mt)}function _slicedToArray$a(Mt,st){return _arrayWithHoles$b(Mt)||_iterableToArrayLimit$a(Mt,st)||_unsupportedIterableToArray$i(Mt,st)||_nonIterableRest$b()}function _nonIterableRest$b(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$i(Mt,st){if(Mt){if(typeof Mt=="string")return _arrayLikeToArray$i(Mt,st);var nn=Object.prototype.toString.call(Mt).slice(8,-1);if(nn==="Object"&&Mt.constructor&&(nn=Mt.constructor.name),nn==="Map"||nn==="Set")return Array.from(Mt);if(nn==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(nn))return _arrayLikeToArray$i(Mt,st)}}function _arrayLikeToArray$i(Mt,st){(st==null||st>Mt.length)&&(st=Mt.length);for(var nn=0,rn=new Array(st);nn<st;nn++)rn[nn]=Mt[nn];return rn}function _iterableToArrayLimit$a(Mt,st){var nn=Mt==null?null:typeof Symbol<"u"&&Mt[Symbol.iterator]||Mt["@@iterator"];if(nn!=null){var rn,on,an,sn,un=[],Xr=!0,to=!1;try{if(an=(nn=nn.call(Mt)).next,st===0){if(Object(nn)!==nn)return;Xr=!1}else for(;!(Xr=(rn=an.call(nn)).done)&&(un.push(rn.value),un.length!==st);Xr=!0);}catch(uo){to=!0,on=uo}finally{try{if(!Xr&&nn.return!=null&&(sn=nn.return(),Object(sn)!==sn))return}finally{if(to)throw on}}return un}}function _arrayWithHoles$b(Mt){if(Array.isArray(Mt))return Mt}function _classCallCheck$h(Mt,st){if(!(Mt instanceof st))throw new TypeError("Cannot call a class as a function")}function _defineProperties$h(Mt,st){for(var nn=0;nn<st.length;nn++){var rn=st[nn];rn.enumerable=rn.enumerable||!1,rn.configurable=!0,"value"in rn&&(rn.writable=!0),Object.defineProperty(Mt,_toPropertyKey$z(rn.key),rn)}}function _createClass$h(Mt,st,nn){return st&&_defineProperties$h(Mt.prototype,st),nn&&_defineProperties$h(Mt,nn),Object.defineProperty(Mt,"prototype",{writable:!1}),Mt}function _toPropertyKey$z(Mt){var st=_toPrimitive$z(Mt,"string");return _typeof$A(st)=="symbol"?st:st+""}function _toPrimitive$z(Mt,st){if(_typeof$A(Mt)!="object"||!Mt)return Mt;var nn=Mt[Symbol.toPrimitive];if(nn!==void 0){var rn=nn.call(Mt,st);if(_typeof$A(rn)!="object")return rn;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(Mt)}var MULTIPLY_OR_DIVIDE_REGEX=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,ADD_OR_SUBTRACT_REGEX=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,CSS_LENGTH_UNIT_REGEX=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,NUM_SPLIT_REGEX=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,CONVERSION_RATES={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},FIXED_CSS_LENGTH_UNITS=Object.keys(CONVERSION_RATES),STR_NAN="NaN";function convertToPx(Mt,st){return Mt*CONVERSION_RATES[st]}var DecimalCSS=function(){function Mt(st,nn){_classCallCheck$h(this,Mt),this.num=st,this.unit=nn,this.num=st,this.unit=nn,Number.isNaN(st)&&(this.unit=""),nn!==""&&!CSS_LENGTH_UNIT_REGEX.test(nn)&&(this.num=NaN,this.unit=""),FIXED_CSS_LENGTH_UNITS.includes(nn)&&(this.num=convertToPx(st,nn),this.unit="px")}return _createClass$h(Mt,[{key:"add",value:function(nn){return this.unit!==nn.unit?new Mt(NaN,""):new Mt(this.num+nn.num,this.unit)}},{key:"subtract",value:function(nn){return this.unit!==nn.unit?new Mt(NaN,""):new Mt(this.num-nn.num,this.unit)}},{key:"multiply",value:function(nn){return this.unit!==""&&nn.unit!==""&&this.unit!==nn.unit?new Mt(NaN,""):new Mt(this.num*nn.num,this.unit||nn.unit)}},{key:"divide",value:function(nn){return this.unit!==""&&nn.unit!==""&&this.unit!==nn.unit?new Mt(NaN,""):new Mt(this.num/nn.num,this.unit||nn.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(nn){var rn,on=(rn=NUM_SPLIT_REGEX.exec(nn))!==null&&rn!==void 0?rn:[],an=_slicedToArray$a(on,3),sn=an[1],un=an[2];return new Mt(parseFloat(sn),un??"")}}])}();function calculateArithmetic(Mt){if(Mt.includes(STR_NAN))return STR_NAN;for(var st=Mt;st.includes("*")||st.includes("/");){var nn,rn=(nn=MULTIPLY_OR_DIVIDE_REGEX.exec(st))!==null&&nn!==void 0?nn:[],on=_slicedToArray$a(rn,4),an=on[1],sn=on[2],un=on[3],Xr=DecimalCSS.parse(an??""),to=DecimalCSS.parse(un??""),uo=sn==="*"?Xr.multiply(to):Xr.divide(to);if(uo.isNaN())return STR_NAN;st=st.replace(MULTIPLY_OR_DIVIDE_REGEX,uo.toString())}for(;st.includes("+")||/.-\d+(?:\.\d+)?/.test(st);){var hn,fn=(hn=ADD_OR_SUBTRACT_REGEX.exec(st))!==null&&hn!==void 0?hn:[],co=_slicedToArray$a(fn,4),lo=co[1],fo=co[2],ho=co[3],mo=DecimalCSS.parse(lo??""),Uo=DecimalCSS.parse(ho??""),_d=fo==="+"?mo.add(Uo):mo.subtract(Uo);if(_d.isNaN())return STR_NAN;st=st.replace(ADD_OR_SUBTRACT_REGEX,_d.toString())}return st}var PARENTHESES_REGEX=/\(([^()]*)\)/;function calculateParentheses(Mt){for(var st=Mt;st.includes("(");){var nn=PARENTHESES_REGEX.exec(st),rn=_slicedToArray$a(nn,2),on=rn[1];st=st.replace(PARENTHESES_REGEX,calculateArithmetic(on))}return st}function evaluateExpression(Mt){var st=Mt.replace(/\s+/g,"");return st=calculateParentheses(st),st=calculateArithmetic(st),st}function safeEvaluateExpression(Mt){try{return evaluateExpression(Mt)}catch{return STR_NAN}}function reduceCSSCalc(Mt){var st=safeEvaluateExpression(Mt.slice(5,-1));return st===STR_NAN?"":st}var _excluded$e=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],_excluded2$6=["dx","dy","angle","className","breakAll"];function _extends$p(){return _extends$p=Object.assign?Object.assign.bind():function(Mt){for(var st=1;st<arguments.length;st++){var nn=arguments[st];for(var rn in nn)Object.prototype.hasOwnProperty.call(nn,rn)&&(Mt[rn]=nn[rn])}return Mt},_extends$p.apply(this,arguments)}function _objectWithoutProperties$e(Mt,st){if(Mt==null)return{};var nn=_objectWithoutPropertiesLoose$e(Mt,st),rn,on;if(Object.getOwnPropertySymbols){var an=Object.getOwnPropertySymbols(Mt);for(on=0;on<an.length;on++)rn=an[on],!(st.indexOf(rn)>=0)&&Object.prototype.propertyIsEnumerable.call(Mt,rn)&&(nn[rn]=Mt[rn])}return nn}function _objectWithoutPropertiesLoose$e(Mt,st){if(Mt==null)return{};var nn={};for(var rn in Mt)if(Object.prototype.hasOwnProperty.call(Mt,rn)){if(st.indexOf(rn)>=0)continue;nn[rn]=Mt[rn]}return nn}function _slicedToArray$9(Mt,st){return _arrayWithHoles$a(Mt)||_iterableToArrayLimit$9(Mt,st)||_unsupportedIterableToArray$h(Mt,st)||_nonIterableRest$a()}function _nonIterableRest$a(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$h(Mt,st){if(Mt){if(typeof Mt=="string")return _arrayLikeToArray$h(Mt,st);var nn=Object.prototype.toString.call(Mt).slice(8,-1);if(nn==="Object"&&Mt.constructor&&(nn=Mt.constructor.name),nn==="Map"||nn==="Set")return Array.from(Mt);if(nn==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(nn))return _arrayLikeToArray$h(Mt,st)}}function _arrayLikeToArray$h(Mt,st){(st==null||st>Mt.length)&&(st=Mt.length);for(var nn=0,rn=new Array(st);nn<st;nn++)rn[nn]=Mt[nn];return rn}function _iterableToArrayLimit$9(Mt,st){var nn=Mt==null?null:typeof Symbol<"u"&&Mt[Symbol.iterator]||Mt["@@iterator"];if(nn!=null){var rn,on,an,sn,un=[],Xr=!0,to=!1;try{if(an=(nn=nn.call(Mt)).next,st===0){if(Object(nn)!==nn)return;Xr=!1}else for(;!(Xr=(rn=an.call(nn)).done)&&(un.push(rn.value),un.length!==st);Xr=!0);}catch(uo){to=!0,on=uo}finally{try{if(!Xr&&nn.return!=null&&(sn=nn.return(),Object(sn)!==sn))return}finally{if(to)throw on}}return un}}function _arrayWithHoles$a(Mt){if(Array.isArray(Mt))return Mt}var BREAKING_SPACES=/[ \f\n\r\t\v\u2028\u2029]+/,calculateWordWidths=function Mt(st){var nn=st.children,rn=st.breakAll,on=st.style;try{var an=[];isNil$1(nn)||(rn?an=nn.toString().split(""):an=nn.toString().split(BREAKING_SPACES));var sn=an.map(function(Xr){return{word:Xr,width:getStringSize(Xr,on).width}}),un=rn?0:getStringSize("",on).width;return{wordsWithComputedWidth:sn,spaceWidth:un}}catch{return null}},calculateWordsByLines=function Mt(st,nn,rn,on,an){var sn=st.maxLines,un=st.children,Xr=st.style,to=st.breakAll,uo=isNumber(sn),hn=un,fn=function(){var dp=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return dp.reduce(function(cp,fp){var gp=fp.word,mp=fp.width,xp=cp[cp.length-1];if(xp&&(on==null||an||xp.width+mp+rn<Number(on)))xp.words.push(gp),xp.width+=mp+rn;else{var _p={words:[gp],width:mp};cp.push(_p)}return cp},[])},co=fn(nn),lo=function(dp){return dp.reduce(function(cp,fp){return cp.width>fp.width?cp:fp})};if(!uo)return co;for(var fo="",ho=function(dp){var cp=hn.slice(0,dp),fp=calculateWordWidths({breakAll:to,style:Xr,children:cp+fo}).wordsWithComputedWidth,gp=fn(fp),mp=gp.length>sn||lo(gp).width>Number(on);return[mp,gp]},mo=0,Uo=hn.length-1,_d=0,tp;mo<=Uo&&_d<=hn.length-1;){var ep=Math.floor((mo+Uo)/2),np=ep-1,rp=ho(np),ip=_slicedToArray$9(rp,2),op=ip[0],ap=ip[1],sp=ho(ep),up=_slicedToArray$9(sp,1),pp=up[0];if(!op&&!pp&&(mo=ep+1),op&&pp&&(Uo=ep-1),!op&&pp){tp=ap;break}_d++}return tp||co},getWordsWithoutCalculate=function Mt(st){var nn=isNil$1(st)?[]:st.toString().split(BREAKING_SPACES);return[{words:nn}]},getWordsByLines=function Mt(st){var nn=st.width,rn=st.scaleToFit,on=st.children,an=st.style,sn=st.breakAll,un=st.maxLines;if((nn||rn)&&!Global.isSsr){var Xr,to,uo=calculateWordWidths({breakAll:sn,children:on,style:an});if(uo){var hn=uo.wordsWithComputedWidth,fn=uo.spaceWidth;Xr=hn,to=fn}else return getWordsWithoutCalculate(on);return calculateWordsByLines({breakAll:sn,children:on,maxLines:un,style:an},Xr,to,nn,rn)}return getWordsWithoutCalculate(on)},DEFAULT_FILL="#808080",Text=function Mt(st){var nn=st.x,rn=nn===void 0?0:nn,on=st.y,an=on===void 0?0:on,sn=st.lineHeight,un=sn===void 0?"1em":sn,Xr=st.capHeight,to=Xr===void 0?"0.71em":Xr,uo=st.scaleToFit,hn=uo===void 0?!1:uo,fn=st.textAnchor,co=fn===void 0?"start":fn,lo=st.verticalAnchor,fo=lo===void 0?"end":lo,ho=st.fill,mo=ho===void 0?DEFAULT_FILL:ho,Uo=_objectWithoutProperties$e(st,_excluded$e),_d=reactExports.useMemo(function(){return getWordsByLines({breakAll:Uo.breakAll,children:Uo.children,maxLines:Uo.maxLines,scaleToFit:hn,style:Uo.style,width:Uo.width})},[Uo.breakAll,Uo.children,Uo.maxLines,hn,Uo.style,Uo.width]),tp=Uo.dx,ep=Uo.dy,np=Uo.angle,rp=Uo.className,ip=Uo.breakAll,op=_objectWithoutProperties$e(Uo,_excluded2$6);if(!isNumOrStr(rn)||!isNumOrStr(an))return null;var ap=rn+(isNumber(tp)?tp:0),sp=an+(isNumber(ep)?ep:0),up;switch(fo){case"start":up=reduceCSSCalc("calc(".concat(to,")"));break;case"middle":up=reduceCSSCalc("calc(".concat((_d.length-1)/2," * -").concat(un," + (").concat(to," / 2))"));break;default:up=reduceCSSCalc("calc(".concat(_d.length-1," * -").concat(un,")"));break}var pp=[];if(hn){var lp=_d[0].width,dp=Uo.width;pp.push("scale(".concat((isNumber(dp)?dp/lp:1)/lp,")"))}return np&&pp.push("rotate(".concat(np,", ").concat(ap,", ").concat(sp,")")),pp.length&&(op.transform=pp.join(" ")),React.createElement("text",_extends$p({},filterProps(op,!0),{x:ap,y:sp,className:clsx("recharts-text",rp),textAnchor:co,fill:mo.includes("url")?DEFAULT_FILL:mo}),_d.map(function(cp,fp){var gp=cp.words.join(ip?"":" ");return React.createElement("tspan",{x:ap,dy:fp===0?up:un,key:"".concat(gp,"-").concat(fp)},gp)}))};function ascending(Mt,st){return Mt==null||st==null?NaN:Mt<st?-1:Mt>st?1:Mt>=st?0:NaN}function descending(Mt,st){return Mt==null||st==null?NaN:st<Mt?-1:st>Mt?1:st>=Mt?0:NaN}function bisector(Mt){let st,nn,rn;Mt.length!==2?(st=ascending,nn=(un,Xr)=>ascending(Mt(un),Xr),rn=(un,Xr)=>Mt(un)-Xr):(st=Mt===ascending||Mt===descending?Mt:zero$1,nn=Mt,rn=Mt);function on(un,Xr,to=0,uo=un.length){if(to<uo){if(st(Xr,Xr)!==0)return uo;do{const hn=to+uo>>>1;nn(un[hn],Xr)<0?to=hn+1:uo=hn}while(to<uo)}return to}function an(un,Xr,to=0,uo=un.length){if(to<uo){if(st(Xr,Xr)!==0)return uo;do{const hn=to+uo>>>1;nn(un[hn],Xr)<=0?to=hn+1:uo=hn}while(to<uo)}return to}function sn(un,Xr,to=0,uo=un.length){const hn=on(un,Xr,to,uo-1);return hn>to&&rn(un[hn-1],Xr)>-rn(un[hn],Xr)?hn-1:hn}return{left:on,center:sn,right:an}}function zero$1(){return 0}function number$2(Mt){return Mt===null?NaN:+Mt}function*numbers(Mt,st){for(let nn of Mt)nn!=null&&(nn=+nn)>=nn&&(yield nn)}const ascendingBisect=bisector(ascending),bisectRight=ascendingBisect.right;bisector(number$2).center;class InternMap extends Map{constructor(st,nn=keyof){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:nn}}),st!=null)for(const[rn,on]of st)this.set(rn,on)}get(st){return super.get(intern_get(this,st))}has(st){return super.has(intern_get(this,st))}set(st,nn){return super.set(intern_set(this,st),nn)}delete(st){return super.delete(intern_delete(this,st))}}function intern_get({_intern:Mt,_key:st},nn){const rn=st(nn);return Mt.has(rn)?Mt.get(rn):nn}function intern_set({_intern:Mt,_key:st},nn){const rn=st(nn);return Mt.has(rn)?Mt.get(rn):(Mt.set(rn,nn),nn)}function intern_delete({_intern:Mt,_key:st},nn){const rn=st(nn);return Mt.has(rn)&&(nn=Mt.get(rn),Mt.delete(rn)),nn}function keyof(Mt){return Mt!==null&&typeof Mt=="object"?Mt.valueOf():Mt}function compareDefined(Mt=ascending){if(Mt===ascending)return ascendingDefined;if(typeof Mt!="function")throw new TypeError("compare is not a function");return(st,nn)=>{const rn=Mt(st,nn);return rn||rn===0?rn:(Mt(nn,nn)===0)-(Mt(st,st)===0)}}function ascendingDefined(Mt,st){return(Mt==null||!(Mt>=Mt))-(st==null||!(st>=st))||(Mt<st?-1:Mt>st?1:0)}const e10=Math.sqrt(50),e5=Math.sqrt(10),e2=Math.sqrt(2);function tickSpec(Mt,st,nn){const rn=(st-Mt)/Math.max(0,nn),on=Math.floor(Math.log10(rn)),an=rn/Math.pow(10,on),sn=an>=e10?10:an>=e5?5:an>=e2?2:1;let un,Xr,to;return on<0?(to=Math.pow(10,-on)/sn,un=Math.round(Mt*to),Xr=Math.round(st*to),un/to<Mt&&++un,Xr/to>st&&--Xr,to=-to):(to=Math.pow(10,on)*sn,un=Math.round(Mt/to),Xr=Math.round(st/to),un*to<Mt&&++un,Xr*to>st&&--Xr),Xr<un&&.5<=nn&&nn<2?tickSpec(Mt,st,nn*2):[un,Xr,to]}function ticks(Mt,st,nn){if(st=+st,Mt=+Mt,nn=+nn,!(nn>0))return[];if(Mt===st)return[Mt];const rn=st<Mt,[on,an,sn]=rn?tickSpec(st,Mt,nn):tickSpec(Mt,st,nn);if(!(an>=on))return[];const un=an-on+1,Xr=new Array(un);if(rn)if(sn<0)for(let to=0;to<un;++to)Xr[to]=(an-to)/-sn;else for(let to=0;to<un;++to)Xr[to]=(an-to)*sn;else if(sn<0)for(let to=0;to<un;++to)Xr[to]=(on+to)/-sn;else for(let to=0;to<un;++to)Xr[to]=(on+to)*sn;return Xr}function tickIncrement(Mt,st,nn){return st=+st,Mt=+Mt,nn=+nn,tickSpec(Mt,st,nn)[2]}function tickStep(Mt,st,nn){st=+st,Mt=+Mt,nn=+nn;const rn=st<Mt,on=rn?tickIncrement(st,Mt,nn):tickIncrement(Mt,st,nn);return(rn?-1:1)*(on<0?1/-on:on)}function max$2(Mt,st){let nn;for(const rn of Mt)rn!=null&&(nn<rn||nn===void 0&&rn>=rn)&&(nn=rn);return nn}function min$2(Mt,st){let nn;for(const rn of Mt)rn!=null&&(nn>rn||nn===void 0&&rn>=rn)&&(nn=rn);return nn}function quickselect(Mt,st,nn=0,rn=1/0,on){if(st=Math.floor(st),nn=Math.floor(Math.max(0,nn)),rn=Math.floor(Math.min(Mt.length-1,rn)),!(nn<=st&&st<=rn))return Mt;for(on=on===void 0?ascendingDefined:compareDefined(on);rn>nn;){if(rn-nn>600){const Xr=rn-nn+1,to=st-nn+1,uo=Math.log(Xr),hn=.5*Math.exp(2*uo/3),fn=.5*Math.sqrt(uo*hn*(Xr-hn)/Xr)*(to-Xr/2<0?-1:1),co=Math.max(nn,Math.floor(st-to*hn/Xr+fn)),lo=Math.min(rn,Math.floor(st+(Xr-to)*hn/Xr+fn));quickselect(Mt,st,co,lo,on)}const an=Mt[st];let sn=nn,un=rn;for(swap(Mt,nn,st),on(Mt[rn],an)>0&&swap(Mt,nn,rn);sn<un;){for(swap(Mt,sn,un),++sn,--un;on(Mt[sn],an)<0;)++sn;for(;on(Mt[un],an)>0;)--un}on(Mt[nn],an)===0?swap(Mt,nn,un):(++un,swap(Mt,un,rn)),un<=st&&(nn=un+1),st<=un&&(rn=un-1)}return Mt}function swap(Mt,st,nn){const rn=Mt[st];Mt[st]=Mt[nn],Mt[nn]=rn}function quantile$1(Mt,st,nn){if(Mt=Float64Array.from(numbers(Mt)),!(!(rn=Mt.length)||isNaN(st=+st))){if(st<=0||rn<2)return min$2(Mt);if(st>=1)return max$2(Mt);var rn,on=(rn-1)*st,an=Math.floor(on),sn=max$2(quickselect(Mt,an).subarray(0,an+1)),un=min$2(Mt.subarray(an+1));return sn+(un-sn)*(on-an)}}function quantileSorted(Mt,st,nn=number$2){if(!(!(rn=Mt.length)||isNaN(st=+st))){if(st<=0||rn<2)return+nn(Mt[0],0,Mt);if(st>=1)return+nn(Mt[rn-1],rn-1,Mt);var rn,on=(rn-1)*st,an=Math.floor(on),sn=+nn(Mt[an],an,Mt),un=+nn(Mt[an+1],an+1,Mt);return sn+(un-sn)*(on-an)}}function range$3(Mt,st,nn){Mt=+Mt,st=+st,nn=(on=arguments.length)<2?(st=Mt,Mt=0,1):on<3?1:+nn;for(var rn=-1,on=Math.max(0,Math.ceil((st-Mt)/nn))|0,an=new Array(on);++rn<on;)an[rn]=Mt+rn*nn;return an}function initRange(Mt,st){switch(arguments.length){case 0:break;case 1:this.range(Mt);break;default:this.range(st).domain(Mt);break}return this}function initInterpolator(Mt,st){switch(arguments.length){case 0:break;case 1:{typeof Mt=="function"?this.interpolator(Mt):this.range(Mt);break}default:{this.domain(Mt),typeof st=="function"?this.interpolator(st):this.range(st);break}}return this}const implicit=Symbol("implicit");function ordinal(){var Mt=new InternMap,st=[],nn=[],rn=implicit;function on(an){let sn=Mt.get(an);if(sn===void 0){if(rn!==implicit)return rn;Mt.set(an,sn=st.push(an)-1)}return nn[sn%nn.length]}return on.domain=function(an){if(!arguments.length)return st.slice();st=[],Mt=new InternMap;for(const sn of an)Mt.has(sn)||Mt.set(sn,st.push(sn)-1);return on},on.range=function(an){return arguments.length?(nn=Array.from(an),on):nn.slice()},on.unknown=function(an){return arguments.length?(rn=an,on):rn},on.copy=function(){return ordinal(st,nn).unknown(rn)},initRange.apply(on,arguments),on}function band(){var Mt=ordinal().unknown(void 0),st=Mt.domain,nn=Mt.range,rn=0,on=1,an,sn,un=!1,Xr=0,to=0,uo=.5;delete Mt.unknown;function hn(){var fn=st().length,co=on<rn,lo=co?on:rn,fo=co?rn:on;an=(fo-lo)/Math.max(1,fn-Xr+to*2),un&&(an=Math.floor(an)),lo+=(fo-lo-an*(fn-Xr))*uo,sn=an*(1-Xr),un&&(lo=Math.round(lo),sn=Math.round(sn));var ho=range$3(fn).map(function(mo){return lo+an*mo});return nn(co?ho.reverse():ho)}return Mt.domain=function(fn){return arguments.length?(st(fn),hn()):st()},Mt.range=function(fn){return arguments.length?([rn,on]=fn,rn=+rn,on=+on,hn()):[rn,on]},Mt.rangeRound=function(fn){return[rn,on]=fn,rn=+rn,on=+on,un=!0,hn()},Mt.bandwidth=function(){return sn},Mt.step=function(){return an},Mt.round=function(fn){return arguments.length?(un=!!fn,hn()):un},Mt.padding=function(fn){return arguments.length?(Xr=Math.min(1,to=+fn),hn()):Xr},Mt.paddingInner=function(fn){return arguments.length?(Xr=Math.min(1,fn),hn()):Xr},Mt.paddingOuter=function(fn){return arguments.length?(to=+fn,hn()):to},Mt.align=function(fn){return arguments.length?(uo=Math.max(0,Math.min(1,fn)),hn()):uo},Mt.copy=function(){return band(st(),[rn,on]).round(un).paddingInner(Xr).paddingOuter(to).align(uo)},initRange.apply(hn(),arguments)}function pointish(Mt){var st=Mt.copy;return Mt.padding=Mt.paddingOuter,delete Mt.paddingInner,delete Mt.paddingOuter,Mt.copy=function(){return pointish(st())},Mt}function point(){return pointish(band.apply(null,arguments).paddingInner(1))}function define(Mt,st,nn){Mt.prototype=st.prototype=nn,nn.constructor=Mt}function extend(Mt,st){var nn=Object.create(Mt.prototype);for(var rn in st)nn[rn]=st[rn];return nn}function Color(){}var darker=.7,brighter=1/darker,reI="\\s*([+-]?\\d+)\\s*",reN="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",reP="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",reHex=/^#([0-9a-f]{3,8})$/,reRgbInteger=new RegExp(`^rgb\\(${reI},${reI},${reI}\\)$`),reRgbPercent=new RegExp(`^rgb\\(${reP},${reP},${reP}\\)$`),reRgbaInteger=new RegExp(`^rgba\\(${reI},${reI},${reI},${reN}\\)$`),reRgbaPercent=new RegExp(`^rgba\\(${reP},${reP},${reP},${reN}\\)$`),reHslPercent=new RegExp(`^hsl\\(${reN},${reP},${reP}\\)$`),reHslaPercent=new RegExp(`^hsla\\(${reN},${reP},${reP},${reN}\\)$`),named={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};define(Color,color,{copy(Mt){return Object.assign(new this.constructor,this,Mt)},displayable(){return this.rgb().displayable()},hex:color_formatHex,formatHex:color_formatHex,formatHex8:color_formatHex8,formatHsl:color_formatHsl,formatRgb:color_formatRgb,toString:color_formatRgb});function color_formatHex(){return this.rgb().formatHex()}function color_formatHex8(){return this.rgb().formatHex8()}function color_formatHsl(){return hslConvert(this).formatHsl()}function color_formatRgb(){return this.rgb().formatRgb()}function color(Mt){var st,nn;return Mt=(Mt+"").trim().toLowerCase(),(st=reHex.exec(Mt))?(nn=st[1].length,st=parseInt(st[1],16),nn===6?rgbn(st):nn===3?new Rgb(st>>8&15|st>>4&240,st>>4&15|st&240,(st&15)<<4|st&15,1):nn===8?rgba(st>>24&255,st>>16&255,st>>8&255,(st&255)/255):nn===4?rgba(st>>12&15|st>>8&240,st>>8&15|st>>4&240,st>>4&15|st&240,((st&15)<<4|st&15)/255):null):(st=reRgbInteger.exec(Mt))?new Rgb(st[1],st[2],st[3],1):(st=reRgbPercent.exec(Mt))?new Rgb(st[1]*255/100,st[2]*255/100,st[3]*255/100,1):(st=reRgbaInteger.exec(Mt))?rgba(st[1],st[2],st[3],st[4]):(st=reRgbaPercent.exec(Mt))?rgba(st[1]*255/100,st[2]*255/100,st[3]*255/100,st[4]):(st=reHslPercent.exec(Mt))?hsla(st[1],st[2]/100,st[3]/100,1):(st=reHslaPercent.exec(Mt))?hsla(st[1],st[2]/100,st[3]/100,st[4]):named.hasOwnProperty(Mt)?rgbn(named[Mt]):Mt==="transparent"?new Rgb(NaN,NaN,NaN,0):null}function rgbn(Mt){return new Rgb(Mt>>16&255,Mt>>8&255,Mt&255,1)}function rgba(Mt,st,nn,rn){return rn<=0&&(Mt=st=nn=NaN),new Rgb(Mt,st,nn,rn)}function rgbConvert(Mt){return Mt instanceof Color||(Mt=color(Mt)),Mt?(Mt=Mt.rgb(),new Rgb(Mt.r,Mt.g,Mt.b,Mt.opacity)):new Rgb}function rgb$1(Mt,st,nn,rn){return arguments.length===1?rgbConvert(Mt):new Rgb(Mt,st,nn,rn??1)}function Rgb(Mt,st,nn,rn){this.r=+Mt,this.g=+st,this.b=+nn,this.opacity=+rn}define(Rgb,rgb$1,extend(Color,{brighter(Mt){return Mt=Mt==null?brighter:Math.pow(brighter,Mt),new Rgb(this.r*Mt,this.g*Mt,this.b*Mt,this.opacity)},darker(Mt){return Mt=Mt==null?darker:Math.pow(darker,Mt),new Rgb(this.r*Mt,this.g*Mt,this.b*Mt,this.opacity)},rgb(){return this},clamp(){return new Rgb(clampi(this.r),clampi(this.g),clampi(this.b),clampa(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:rgb_formatHex,formatHex:rgb_formatHex,formatHex8:rgb_formatHex8,formatRgb:rgb_formatRgb,toString:rgb_formatRgb}));function rgb_formatHex(){return`#${hex(this.r)}${hex(this.g)}${hex(this.b)}`}function rgb_formatHex8(){return`#${hex(this.r)}${hex(this.g)}${hex(this.b)}${hex((isNaN(this.opacity)?1:this.opacity)*255)}`}function rgb_formatRgb(){const Mt=clampa(this.opacity);return`${Mt===1?"rgb(":"rgba("}${clampi(this.r)}, ${clampi(this.g)}, ${clampi(this.b)}${Mt===1?")":`, ${Mt})`}`}function clampa(Mt){return isNaN(Mt)?1:Math.max(0,Math.min(1,Mt))}function clampi(Mt){return Math.max(0,Math.min(255,Math.round(Mt)||0))}function hex(Mt){return Mt=clampi(Mt),(Mt<16?"0":"")+Mt.toString(16)}function hsla(Mt,st,nn,rn){return rn<=0?Mt=st=nn=NaN:nn<=0||nn>=1?Mt=st=NaN:st<=0&&(Mt=NaN),new Hsl(Mt,st,nn,rn)}function hslConvert(Mt){if(Mt instanceof Hsl)return new Hsl(Mt.h,Mt.s,Mt.l,Mt.opacity);if(Mt instanceof Color||(Mt=color(Mt)),!Mt)return new Hsl;if(Mt instanceof Hsl)return Mt;Mt=Mt.rgb();var st=Mt.r/255,nn=Mt.g/255,rn=Mt.b/255,on=Math.min(st,nn,rn),an=Math.max(st,nn,rn),sn=NaN,un=an-on,Xr=(an+on)/2;return un?(st===an?sn=(nn-rn)/un+(nn<rn)*6:nn===an?sn=(rn-st)/un+2:sn=(st-nn)/un+4,un/=Xr<.5?an+on:2-an-on,sn*=60):un=Xr>0&&Xr<1?0:sn,new Hsl(sn,un,Xr,Mt.opacity)}function hsl(Mt,st,nn,rn){return arguments.length===1?hslConvert(Mt):new Hsl(Mt,st,nn,rn??1)}function Hsl(Mt,st,nn,rn){this.h=+Mt,this.s=+st,this.l=+nn,this.opacity=+rn}define(Hsl,hsl,extend(Color,{brighter(Mt){return Mt=Mt==null?brighter:Math.pow(brighter,Mt),new Hsl(this.h,this.s,this.l*Mt,this.opacity)},darker(Mt){return Mt=Mt==null?darker:Math.pow(darker,Mt),new Hsl(this.h,this.s,this.l*Mt,this.opacity)},rgb(){var Mt=this.h%360+(this.h<0)*360,st=isNaN(Mt)||isNaN(this.s)?0:this.s,nn=this.l,rn=nn+(nn<.5?nn:1-nn)*st,on=2*nn-rn;return new Rgb(hsl2rgb(Mt>=240?Mt-240:Mt+120,on,rn),hsl2rgb(Mt,on,rn),hsl2rgb(Mt<120?Mt+240:Mt-120,on,rn),this.opacity)},clamp(){return new Hsl(clamph(this.h),clampt(this.s),clampt(this.l),clampa(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const Mt=clampa(this.opacity);return`${Mt===1?"hsl(":"hsla("}${clamph(this.h)}, ${clampt(this.s)*100}%, ${clampt(this.l)*100}%${Mt===1?")":`, ${Mt})`}`}}));function clamph(Mt){return Mt=(Mt||0)%360,Mt<0?Mt+360:Mt}function clampt(Mt){return Math.max(0,Math.min(1,Mt||0))}function hsl2rgb(Mt,st,nn){return(Mt<60?st+(nn-st)*Mt/60:Mt<180?nn:Mt<240?st+(nn-st)*(240-Mt)/60:st)*255}const constant=Mt=>()=>Mt;function linear$1(Mt,st){return function(nn){return Mt+nn*st}}function exponential(Mt,st,nn){return Mt=Math.pow(Mt,nn),st=Math.pow(st,nn)-Mt,nn=1/nn,function(rn){return Math.pow(Mt+rn*st,nn)}}function gamma(Mt){return(Mt=+Mt)==1?nogamma:function(st,nn){return nn-st?exponential(st,nn,Mt):constant(isNaN(st)?nn:st)}}function nogamma(Mt,st){var nn=st-Mt;return nn?linear$1(Mt,nn):constant(isNaN(Mt)?st:Mt)}const rgb=function Mt(st){var nn=gamma(st);function rn(on,an){var sn=nn((on=rgb$1(on)).r,(an=rgb$1(an)).r),un=nn(on.g,an.g),Xr=nn(on.b,an.b),to=nogamma(on.opacity,an.opacity);return function(uo){return on.r=sn(uo),on.g=un(uo),on.b=Xr(uo),on.opacity=to(uo),on+""}}return rn.gamma=Mt,rn}(1);function numberArray(Mt,st){st||(st=[]);var nn=Mt?Math.min(st.length,Mt.length):0,rn=st.slice(),on;return function(an){for(on=0;on<nn;++on)rn[on]=Mt[on]*(1-an)+st[on]*an;return rn}}function isNumberArray(Mt){return ArrayBuffer.isView(Mt)&&!(Mt instanceof DataView)}function genericArray(Mt,st){var nn=st?st.length:0,rn=Mt?Math.min(nn,Mt.length):0,on=new Array(rn),an=new Array(nn),sn;for(sn=0;sn<rn;++sn)on[sn]=interpolate(Mt[sn],st[sn]);for(;sn<nn;++sn)an[sn]=st[sn];return function(un){for(sn=0;sn<rn;++sn)an[sn]=on[sn](un);return an}}function date$1(Mt,st){var nn=new Date;return Mt=+Mt,st=+st,function(rn){return nn.setTime(Mt*(1-rn)+st*rn),nn}}function interpolateNumber$1(Mt,st){return Mt=+Mt,st=+st,function(nn){return Mt*(1-nn)+st*nn}}function object(Mt,st){var nn={},rn={},on;(Mt===null||typeof Mt!="object")&&(Mt={}),(st===null||typeof st!="object")&&(st={});for(on in st)on in Mt?nn[on]=interpolate(Mt[on],st[on]):rn[on]=st[on];return function(an){for(on in nn)rn[on]=nn[on](an);return rn}}var reA=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,reB=new RegExp(reA.source,"g");function zero(Mt){return function(){return Mt}}function one(Mt){return function(st){return Mt(st)+""}}function string(Mt,st){var nn=reA.lastIndex=reB.lastIndex=0,rn,on,an,sn=-1,un=[],Xr=[];for(Mt=Mt+"",st=st+"";(rn=reA.exec(Mt))&&(on=reB.exec(st));)(an=on.index)>nn&&(an=st.slice(nn,an),un[sn]?un[sn]+=an:un[++sn]=an),(rn=rn[0])===(on=on[0])?un[sn]?un[sn]+=on:un[++sn]=on:(un[++sn]=null,Xr.push({i:sn,x:interpolateNumber$1(rn,on)})),nn=reB.lastIndex;return nn<st.length&&(an=st.slice(nn),un[sn]?un[sn]+=an:un[++sn]=an),un.length<2?Xr[0]?one(Xr[0].x):zero(st):(st=Xr.length,function(to){for(var uo=0,hn;uo<st;++uo)un[(hn=Xr[uo]).i]=hn.x(to);return un.join("")})}function interpolate(Mt,st){var nn=typeof st,rn;return st==null||nn==="boolean"?constant(st):(nn==="number"?interpolateNumber$1:nn==="string"?(rn=color(st))?(st=rn,rgb):string:st instanceof color?rgb:st instanceof Date?date$1:isNumberArray(st)?numberArray:Array.isArray(st)?genericArray:typeof st.valueOf!="function"&&typeof st.toString!="function"||isNaN(st)?object:interpolateNumber$1)(Mt,st)}function interpolateRound(Mt,st){return Mt=+Mt,st=+st,function(nn){return Math.round(Mt*(1-nn)+st*nn)}}function piecewise(Mt,st){st===void 0&&(st=Mt,Mt=interpolate);for(var nn=0,rn=st.length-1,on=st[0],an=new Array(rn<0?0:rn);nn<rn;)an[nn]=Mt(on,on=st[++nn]);return function(sn){var un=Math.max(0,Math.min(rn-1,Math.floor(sn*=rn)));return an[un](sn-un)}}function constants(Mt){return function(){return Mt}}function number$1(Mt){return+Mt}var unit=[0,1];function identity$6(Mt){return Mt}function normalize(Mt,st){return(st-=Mt=+Mt)?function(nn){return(nn-Mt)/st}:constants(isNaN(st)?NaN:.5)}function clamper(Mt,st){var nn;return Mt>st&&(nn=Mt,Mt=st,st=nn),function(rn){return Math.max(Mt,Math.min(st,rn))}}function bimap(Mt,st,nn){var rn=Mt[0],on=Mt[1],an=st[0],sn=st[1];return on<rn?(rn=normalize(on,rn),an=nn(sn,an)):(rn=normalize(rn,on),an=nn(an,sn)),function(un){return an(rn(un))}}function polymap(Mt,st,nn){var rn=Math.min(Mt.length,st.length)-1,on=new Array(rn),an=new Array(rn),sn=-1;for(Mt[rn]<Mt[0]&&(Mt=Mt.slice().reverse(),st=st.slice().reverse());++sn<rn;)on[sn]=normalize(Mt[sn],Mt[sn+1]),an[sn]=nn(st[sn],st[sn+1]);return function(un){var Xr=bisectRight(Mt,un,1,rn)-1;return an[Xr](on[Xr](un))}}function copy$1(Mt,st){return st.domain(Mt.domain()).range(Mt.range()).interpolate(Mt.interpolate()).clamp(Mt.clamp()).unknown(Mt.unknown())}function transformer$2(){var Mt=unit,st=unit,nn=interpolate,rn,on,an,sn=identity$6,un,Xr,to;function uo(){var fn=Math.min(Mt.length,st.length);return sn!==identity$6&&(sn=clamper(Mt[0],Mt[fn-1])),un=fn>2?polymap:bimap,Xr=to=null,hn}function hn(fn){return fn==null||isNaN(fn=+fn)?an:(Xr||(Xr=un(Mt.map(rn),st,nn)))(rn(sn(fn)))}return hn.invert=function(fn){return sn(on((to||(to=un(st,Mt.map(rn),interpolateNumber$1)))(fn)))},hn.domain=function(fn){return arguments.length?(Mt=Array.from(fn,number$1),uo()):Mt.slice()},hn.range=function(fn){return arguments.length?(st=Array.from(fn),uo()):st.slice()},hn.rangeRound=function(fn){return st=Array.from(fn),nn=interpolateRound,uo()},hn.clamp=function(fn){return arguments.length?(sn=fn?!0:identity$6,uo()):sn!==identity$6},hn.interpolate=function(fn){return arguments.length?(nn=fn,uo()):nn},hn.unknown=function(fn){return arguments.length?(an=fn,hn):an},function(fn,co){return rn=fn,on=co,uo()}}function continuous(){return transformer$2()(identity$6,identity$6)}function formatDecimal(Mt){return Math.abs(Mt=Math.round(Mt))>=1e21?Mt.toLocaleString("en").replace(/,/g,""):Mt.toString(10)}function formatDecimalParts(Mt,st){if((nn=(Mt=st?Mt.toExponential(st-1):Mt.toExponential()).indexOf("e"))<0)return null;var nn,rn=Mt.slice(0,nn);return[rn.length>1?rn[0]+rn.slice(2):rn,+Mt.slice(nn+1)]}function exponent(Mt){return Mt=formatDecimalParts(Math.abs(Mt)),Mt?Mt[1]:NaN}function formatGroup(Mt,st){return function(nn,rn){for(var on=nn.length,an=[],sn=0,un=Mt[0],Xr=0;on>0&&un>0&&(Xr+un+1>rn&&(un=Math.max(1,rn-Xr)),an.push(nn.substring(on-=un,on+un)),!((Xr+=un+1)>rn));)un=Mt[sn=(sn+1)%Mt.length];return an.reverse().join(st)}}function formatNumerals(Mt){return function(st){return st.replace(/[0-9]/g,function(nn){return Mt[+nn]})}}var re=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function formatSpecifier(Mt){if(!(st=re.exec(Mt)))throw new Error("invalid format: "+Mt);var st;return new FormatSpecifier({fill:st[1],align:st[2],sign:st[3],symbol:st[4],zero:st[5],width:st[6],comma:st[7],precision:st[8]&&st[8].slice(1),trim:st[9],type:st[10]})}formatSpecifier.prototype=FormatSpecifier.prototype;function FormatSpecifier(Mt){this.fill=Mt.fill===void 0?" ":Mt.fill+"",this.align=Mt.align===void 0?">":Mt.align+"",this.sign=Mt.sign===void 0?"-":Mt.sign+"",this.symbol=Mt.symbol===void 0?"":Mt.symbol+"",this.zero=!!Mt.zero,this.width=Mt.width===void 0?void 0:+Mt.width,this.comma=!!Mt.comma,this.precision=Mt.precision===void 0?void 0:+Mt.precision,this.trim=!!Mt.trim,this.type=Mt.type===void 0?"":Mt.type+""}FormatSpecifier.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function formatTrim(Mt){e:for(var st=Mt.length,nn=1,rn=-1,on;nn<st;++nn)switch(Mt[nn]){case".":rn=on=nn;break;case"0":rn===0&&(rn=nn),on=nn;break;default:if(!+Mt[nn])break e;rn>0&&(rn=0);break}return rn>0?Mt.slice(0,rn)+Mt.slice(on+1):Mt}var prefixExponent;function formatPrefixAuto(Mt,st){var nn=formatDecimalParts(Mt,st);if(!nn)return Mt+"";var rn=nn[0],on=nn[1],an=on-(prefixExponent=Math.max(-8,Math.min(8,Math.floor(on/3)))*3)+1,sn=rn.length;return an===sn?rn:an>sn?rn+new Array(an-sn+1).join("0"):an>0?rn.slice(0,an)+"."+rn.slice(an):"0."+new Array(1-an).join("0")+formatDecimalParts(Mt,Math.max(0,st+an-1))[0]}function formatRounded(Mt,st){var nn=formatDecimalParts(Mt,st);if(!nn)return Mt+"";var rn=nn[0],on=nn[1];return on<0?"0."+new Array(-on).join("0")+rn:rn.length>on+1?rn.slice(0,on+1)+"."+rn.slice(on+1):rn+new Array(on-rn.length+2).join("0")}const formatTypes={"%":(Mt,st)=>(Mt*100).toFixed(st),b:Mt=>Math.round(Mt).toString(2),c:Mt=>Mt+"",d:formatDecimal,e:(Mt,st)=>Mt.toExponential(st),f:(Mt,st)=>Mt.toFixed(st),g:(Mt,st)=>Mt.toPrecision(st),o:Mt=>Math.round(Mt).toString(8),p:(Mt,st)=>formatRounded(Mt*100,st),r:formatRounded,s:formatPrefixAuto,X:Mt=>Math.round(Mt).toString(16).toUpperCase(),x:Mt=>Math.round(Mt).toString(16)};function identity$5(Mt){return Mt}var map$3=Array.prototype.map,prefixes=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function formatLocale$1(Mt){var st=Mt.grouping===void 0||Mt.thousands===void 0?identity$5:formatGroup(map$3.call(Mt.grouping,Number),Mt.thousands+""),nn=Mt.currency===void 0?"":Mt.currency[0]+"",rn=Mt.currency===void 0?"":Mt.currency[1]+"",on=Mt.decimal===void 0?".":Mt.decimal+"",an=Mt.numerals===void 0?identity$5:formatNumerals(map$3.call(Mt.numerals,String)),sn=Mt.percent===void 0?"%":Mt.percent+"",un=Mt.minus===void 0?"":Mt.minus+"",Xr=Mt.nan===void 0?"NaN":Mt.nan+"";function to(hn){hn=formatSpecifier(hn);var fn=hn.fill,co=hn.align,lo=hn.sign,fo=hn.symbol,ho=hn.zero,mo=hn.width,Uo=hn.comma,_d=hn.precision,tp=hn.trim,ep=hn.type;ep==="n"?(Uo=!0,ep="g"):formatTypes[ep]||(_d===void 0&&(_d=12),tp=!0,ep="g"),(ho||fn==="0"&&co==="=")&&(ho=!0,fn="0",co="=");var np=fo==="$"?nn:fo==="#"&&/[boxX]/.test(ep)?"0"+ep.toLowerCase():"",rp=fo==="$"?rn:/[%p]/.test(ep)?sn:"",ip=formatTypes[ep],op=/[defgprs%]/.test(ep);_d=_d===void 0?6:/[gprs]/.test(ep)?Math.max(1,Math.min(21,_d)):Math.max(0,Math.min(20,_d));function ap(sp){var up=np,pp=rp,lp,dp,cp;if(ep==="c")pp=ip(sp)+pp,sp="";else{sp=+sp;var fp=sp<0||1/sp<0;if(sp=isNaN(sp)?Xr:ip(Math.abs(sp),_d),tp&&(sp=formatTrim(sp)),fp&&+sp==0&&lo!=="+"&&(fp=!1),up=(fp?lo==="("?lo:un:lo==="-"||lo==="("?"":lo)+up,pp=(ep==="s"?prefixes[8+prefixExponent/3]:"")+pp+(fp&&lo==="("?")":""),op){for(lp=-1,dp=sp.length;++lp<dp;)if(cp=sp.charCodeAt(lp),48>cp||cp>57){pp=(cp===46?on+sp.slice(lp+1):sp.slice(lp))+pp,sp=sp.slice(0,lp);break}}}Uo&&!ho&&(sp=st(sp,1/0));var gp=up.length+sp.length+pp.length,mp=gp<mo?new Array(mo-gp+1).join(fn):"";switch(Uo&&ho&&(sp=st(mp+sp,mp.length?mo-pp.length:1/0),mp=""),co){case"<":sp=up+sp+pp+mp;break;case"=":sp=up+mp+sp+pp;break;case"^":sp=mp.slice(0,gp=mp.length>>1)+up+sp+pp+mp.slice(gp);break;default:sp=mp+up+sp+pp;break}return an(sp)}return ap.toString=function(){return hn+""},ap}function uo(hn,fn){var co=to((hn=formatSpecifier(hn),hn.type="f",hn)),lo=Math.max(-8,Math.min(8,Math.floor(exponent(fn)/3)))*3,fo=Math.pow(10,-lo),ho=prefixes[8+lo/3];return function(mo){return co(fo*mo)+ho}}return{format:to,formatPrefix:uo}}var locale$1,format,formatPrefix;defaultLocale$1({thousands:",",grouping:[3],currency:["$",""]});function defaultLocale$1(Mt){return locale$1=formatLocale$1(Mt),format=locale$1.format,formatPrefix=locale$1.formatPrefix,locale$1}function precisionFixed(Mt){return Math.max(0,-exponent(Math.abs(Mt)))}function precisionPrefix(Mt,st){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(exponent(st)/3)))*3-exponent(Math.abs(Mt)))}function precisionRound(Mt,st){return Mt=Math.abs(Mt),st=Math.abs(st)-Mt,Math.max(0,exponent(st)-exponent(Mt))+1}function tickFormat(Mt,st,nn,rn){var on=tickStep(Mt,st,nn),an;switch(rn=formatSpecifier(rn??",f"),rn.type){case"s":{var sn=Math.max(Math.abs(Mt),Math.abs(st));return rn.precision==null&&!isNaN(an=precisionPrefix(on,sn))&&(rn.precision=an),formatPrefix(rn,sn)}case"":case"e":case"g":case"p":case"r":{rn.precision==null&&!isNaN(an=precisionRound(on,Math.max(Math.abs(Mt),Math.abs(st))))&&(rn.precision=an-(rn.type==="e"));break}case"f":case"%":{rn.precision==null&&!isNaN(an=precisionFixed(on))&&(rn.precision=an-(rn.type==="%")*2);break}}return format(rn)}function linearish(Mt){var st=Mt.domain;return Mt.ticks=function(nn){var rn=st();return ticks(rn[0],rn[rn.length-1],nn??10)},Mt.tickFormat=function(nn,rn){var on=st();return tickFormat(on[0],on[on.length-1],nn??10,rn)},Mt.nice=function(nn){nn==null&&(nn=10);var rn=st(),on=0,an=rn.length-1,sn=rn[on],un=rn[an],Xr,to,uo=10;for(un<sn&&(to=sn,sn=un,un=to,to=on,on=an,an=to);uo-- >0;){if(to=tickIncrement(sn,un,nn),to===Xr)return rn[on]=sn,rn[an]=un,st(rn);if(to>0)sn=Math.floor(sn/to)*to,un=Math.ceil(un/to)*to;else if(to<0)sn=Math.ceil(sn*to)/to,un=Math.floor(un*to)/to;else break;Xr=to}return Mt},Mt}function linear(){var Mt=continuous();return Mt.copy=function(){return copy$1(Mt,linear())},initRange.apply(Mt,arguments),linearish(Mt)}function identity$4(Mt){var st;function nn(rn){return rn==null||isNaN(rn=+rn)?st:rn}return nn.invert=nn,nn.domain=nn.range=function(rn){return arguments.length?(Mt=Array.from(rn,number$1),nn):Mt.slice()},nn.unknown=function(rn){return arguments.length?(st=rn,nn):st},nn.copy=function(){return identity$4(Mt).unknown(st)},Mt=arguments.length?Array.from(Mt,number$1):[0,1],linearish(nn)}function nice(Mt,st){Mt=Mt.slice();var nn=0,rn=Mt.length-1,on=Mt[nn],an=Mt[rn],sn;return an<on&&(sn=nn,nn=rn,rn=sn,sn=on,on=an,an=sn),Mt[nn]=st.floor(on),Mt[rn]=st.ceil(an),Mt}function transformLog(Mt){return Math.log(Mt)}function transformExp(Mt){return Math.exp(Mt)}function transformLogn(Mt){return-Math.log(-Mt)}function transformExpn(Mt){return-Math.exp(-Mt)}function pow10(Mt){return isFinite(Mt)?+("1e"+Mt):Mt<0?0:Mt}function powp(Mt){return Mt===10?pow10:Mt===Math.E?Math.exp:st=>Math.pow(Mt,st)}function logp(Mt){return Mt===Math.E?Math.log:Mt===10&&Math.log10||Mt===2&&Math.log2||(Mt=Math.log(Mt),st=>Math.log(st)/Mt)}function reflect(Mt){return(st,nn)=>-Mt(-st,nn)}function loggish(Mt){const st=Mt(transformLog,transformExp),nn=st.domain;let rn=10,on,an;function sn(){return on=logp(rn),an=powp(rn),nn()[0]<0?(on=reflect(on),an=reflect(an),Mt(transformLogn,transformExpn)):Mt(transformLog,transformExp),st}return st.base=function(un){return arguments.length?(rn=+un,sn()):rn},st.domain=function(un){return arguments.length?(nn(un),sn()):nn()},st.ticks=un=>{const Xr=nn();let to=Xr[0],uo=Xr[Xr.length-1];const hn=uo<to;hn&&([to,uo]=[uo,to]);let fn=on(to),co=on(uo),lo,fo;const ho=un==null?10:+un;let mo=[];if(!(rn%1)&&co-fn<ho){if(fn=Math.floor(fn),co=Math.ceil(co),to>0){for(;fn<=co;++fn)for(lo=1;lo<rn;++lo)if(fo=fn<0?lo/an(-fn):lo*an(fn),!(fo<to)){if(fo>uo)break;mo.push(fo)}}else for(;fn<=co;++fn)for(lo=rn-1;lo>=1;--lo)if(fo=fn>0?lo/an(-fn):lo*an(fn),!(fo<to)){if(fo>uo)break;mo.push(fo)}mo.length*2<ho&&(mo=ticks(to,uo,ho))}else mo=ticks(fn,co,Math.min(co-fn,ho)).map(an);return hn?mo.reverse():mo},st.tickFormat=(un,Xr)=>{if(un==null&&(un=10),Xr==null&&(Xr=rn===10?"s":","),typeof Xr!="function"&&(!(rn%1)&&(Xr=formatSpecifier(Xr)).precision==null&&(Xr.trim=!0),Xr=format(Xr)),un===1/0)return Xr;const to=Math.max(1,rn*un/st.ticks().length);return uo=>{let hn=uo/an(Math.round(on(uo)));return hn*rn<rn-.5&&(hn*=rn),hn<=to?Xr(uo):""}},st.nice=()=>nn(nice(nn(),{floor:un=>an(Math.floor(on(un))),ceil:un=>an(Math.ceil(on(un)))})),st}function log(){const Mt=loggish(transformer$2()).domain([1,10]);return Mt.copy=()=>copy$1(Mt,log()).base(Mt.base()),initRange.apply(Mt,arguments),Mt}function transformSymlog(Mt){return function(st){return Math.sign(st)*Math.log1p(Math.abs(st/Mt))}}function transformSymexp(Mt){return function(st){return Math.sign(st)*Math.expm1(Math.abs(st))*Mt}}function symlogish(Mt){var st=1,nn=Mt(transformSymlog(st),transformSymexp(st));return nn.constant=function(rn){return arguments.length?Mt(transformSymlog(st=+rn),transformSymexp(st)):st},linearish(nn)}function symlog(){var Mt=symlogish(transformer$2());return Mt.copy=function(){return copy$1(Mt,symlog()).constant(Mt.constant())},initRange.apply(Mt,arguments)}function transformPow(Mt){return function(st){return st<0?-Math.pow(-st,Mt):Math.pow(st,Mt)}}function transformSqrt(Mt){return Mt<0?-Math.sqrt(-Mt):Math.sqrt(Mt)}function transformSquare(Mt){return Mt<0?-Mt*Mt:Mt*Mt}function powish(Mt){var st=Mt(identity$6,identity$6),nn=1;function rn(){return nn===1?Mt(identity$6,identity$6):nn===.5?Mt(transformSqrt,transformSquare):Mt(transformPow(nn),transformPow(1/nn))}return st.exponent=function(on){return arguments.length?(nn=+on,rn()):nn},linearish(st)}function pow(){var Mt=powish(transformer$2());return Mt.copy=function(){return copy$1(Mt,pow()).exponent(Mt.exponent())},initRange.apply(Mt,arguments),Mt}function sqrt(){return pow.apply(null,arguments).exponent(.5)}function square(Mt){return Math.sign(Mt)*Mt*Mt}function unsquare(Mt){return Math.sign(Mt)*Math.sqrt(Math.abs(Mt))}function radial(){var Mt=continuous(),st=[0,1],nn=!1,rn;function on(an){var sn=unsquare(Mt(an));return isNaN(sn)?rn:nn?Math.round(sn):sn}return on.invert=function(an){return Mt.invert(square(an))},on.domain=function(an){return arguments.length?(Mt.domain(an),on):Mt.domain()},on.range=function(an){return arguments.length?(Mt.range((st=Array.from(an,number$1)).map(square)),on):st.slice()},on.rangeRound=function(an){return on.range(an).round(!0)},on.round=function(an){return arguments.length?(nn=!!an,on):nn},on.clamp=function(an){return arguments.length?(Mt.clamp(an),on):Mt.clamp()},on.unknown=function(an){return arguments.length?(rn=an,on):rn},on.copy=function(){return radial(Mt.domain(),st).round(nn).clamp(Mt.clamp()).unknown(rn)},initRange.apply(on,arguments),linearish(on)}function quantile(){var Mt=[],st=[],nn=[],rn;function on(){var sn=0,un=Math.max(1,st.length);for(nn=new Array(un-1);++sn<un;)nn[sn-1]=quantileSorted(Mt,sn/un);return an}function an(sn){return sn==null||isNaN(sn=+sn)?rn:st[bisectRight(nn,sn)]}return an.invertExtent=function(sn){var un=st.indexOf(sn);return un<0?[NaN,NaN]:[un>0?nn[un-1]:Mt[0],un<nn.length?nn[un]:Mt[Mt.length-1]]},an.domain=function(sn){if(!arguments.length)return Mt.slice();Mt=[];for(let un of sn)un!=null&&!isNaN(un=+un)&&Mt.push(un);return Mt.sort(ascending),on()},an.range=function(sn){return arguments.length?(st=Array.from(sn),on()):st.slice()},an.unknown=function(sn){return arguments.length?(rn=sn,an):rn},an.quantiles=function(){return nn.slice()},an.copy=function(){return quantile().domain(Mt).range(st).unknown(rn)},initRange.apply(an,arguments)}function quantize(){var Mt=0,st=1,nn=1,rn=[.5],on=[0,1],an;function sn(Xr){return Xr!=null&&Xr<=Xr?on[bisectRight(rn,Xr,0,nn)]:an}function un(){var Xr=-1;for(rn=new Array(nn);++Xr<nn;)rn[Xr]=((Xr+1)*st-(Xr-nn)*Mt)/(nn+1);return sn}return sn.domain=function(Xr){return arguments.length?([Mt,st]=Xr,Mt=+Mt,st=+st,un()):[Mt,st]},sn.range=function(Xr){return arguments.length?(nn=(on=Array.from(Xr)).length-1,un()):on.slice()},sn.invertExtent=function(Xr){var to=on.indexOf(Xr);return to<0?[NaN,NaN]:to<1?[Mt,rn[0]]:to>=nn?[rn[nn-1],st]:[rn[to-1],rn[to]]},sn.unknown=function(Xr){return arguments.length&&(an=Xr),sn},sn.thresholds=function(){return rn.slice()},sn.copy=function(){return quantize().domain([Mt,st]).range(on).unknown(an)},initRange.apply(linearish(sn),arguments)}function threshold(){var Mt=[.5],st=[0,1],nn,rn=1;function on(an){return an!=null&&an<=an?st[bisectRight(Mt,an,0,rn)]:nn}return on.domain=function(an){return arguments.length?(Mt=Array.from(an),rn=Math.min(Mt.length,st.length-1),on):Mt.slice()},on.range=function(an){return arguments.length?(st=Array.from(an),rn=Math.min(Mt.length,st.length-1),on):st.slice()},on.invertExtent=function(an){var sn=st.indexOf(an);return[Mt[sn-1],Mt[sn]]},on.unknown=function(an){return arguments.length?(nn=an,on):nn},on.copy=function(){return threshold().domain(Mt).range(st).unknown(nn)},initRange.apply(on,arguments)}const t0=new Date,t1=new Date;function timeInterval(Mt,st,nn,rn){function on(an){return Mt(an=arguments.length===0?new Date:new Date(+an)),an}return on.floor=an=>(Mt(an=new Date(+an)),an),on.ceil=an=>(Mt(an=new Date(an-1)),st(an,1),Mt(an),an),on.round=an=>{const sn=on(an),un=on.ceil(an);return an-sn<un-an?sn:un},on.offset=(an,sn)=>(st(an=new Date(+an),sn==null?1:Math.floor(sn)),an),on.range=(an,sn,un)=>{const Xr=[];if(an=on.ceil(an),un=un==null?1:Math.floor(un),!(an<sn)||!(un>0))return Xr;let to;do Xr.push(to=new Date(+an)),st(an,un),Mt(an);while(to<an&&an<sn);return Xr},on.filter=an=>timeInterval(sn=>{if(sn>=sn)for(;Mt(sn),!an(sn);)sn.setTime(sn-1)},(sn,un)=>{if(sn>=sn)if(un<0)for(;++un<=0;)for(;st(sn,-1),!an(sn););else for(;--un>=0;)for(;st(sn,1),!an(sn););}),nn&&(on.count=(an,sn)=>(t0.setTime(+an),t1.setTime(+sn),Mt(t0),Mt(t1),Math.floor(nn(t0,t1))),on.every=an=>(an=Math.floor(an),!isFinite(an)||!(an>0)?null:an>1?on.filter(rn?sn=>rn(sn)%an===0:sn=>on.count(0,sn)%an===0):on)),on}const millisecond=timeInterval(()=>{},(Mt,st)=>{Mt.setTime(+Mt+st)},(Mt,st)=>st-Mt);millisecond.every=Mt=>(Mt=Math.floor(Mt),!isFinite(Mt)||!(Mt>0)?null:Mt>1?timeInterval(st=>{st.setTime(Math.floor(st/Mt)*Mt)},(st,nn)=>{st.setTime(+st+nn*Mt)},(st,nn)=>(nn-st)/Mt):millisecond);millisecond.range;const durationSecond=1e3,durationMinute=durationSecond*60,durationHour=durationMinute*60,durationDay=durationHour*24,durationWeek=durationDay*7,durationMonth=durationDay*30,durationYear=durationDay*365,second=timeInterval(Mt=>{Mt.setTime(Mt-Mt.getMilliseconds())},(Mt,st)=>{Mt.setTime(+Mt+st*durationSecond)},(Mt,st)=>(st-Mt)/durationSecond,Mt=>Mt.getUTCSeconds());second.range;const timeMinute=timeInterval(Mt=>{Mt.setTime(Mt-Mt.getMilliseconds()-Mt.getSeconds()*durationSecond)},(Mt,st)=>{Mt.setTime(+Mt+st*durationMinute)},(Mt,st)=>(st-Mt)/durationMinute,Mt=>Mt.getMinutes());timeMinute.range;const utcMinute=timeInterval(Mt=>{Mt.setUTCSeconds(0,0)},(Mt,st)=>{Mt.setTime(+Mt+st*durationMinute)},(Mt,st)=>(st-Mt)/durationMinute,Mt=>Mt.getUTCMinutes());utcMinute.range;const timeHour=timeInterval(Mt=>{Mt.setTime(Mt-Mt.getMilliseconds()-Mt.getSeconds()*durationSecond-Mt.getMinutes()*durationMinute)},(Mt,st)=>{Mt.setTime(+Mt+st*durationHour)},(Mt,st)=>(st-Mt)/durationHour,Mt=>Mt.getHours());timeHour.range;const utcHour=timeInterval(Mt=>{Mt.setUTCMinutes(0,0,0)},(Mt,st)=>{Mt.setTime(+Mt+st*durationHour)},(Mt,st)=>(st-Mt)/durationHour,Mt=>Mt.getUTCHours());utcHour.range;const timeDay=timeInterval(Mt=>Mt.setHours(0,0,0,0),(Mt,st)=>Mt.setDate(Mt.getDate()+st),(Mt,st)=>(st-Mt-(st.getTimezoneOffset()-Mt.getTimezoneOffset())*durationMinute)/durationDay,Mt=>Mt.getDate()-1);timeDay.range;const utcDay=timeInterval(Mt=>{Mt.setUTCHours(0,0,0,0)},(Mt,st)=>{Mt.setUTCDate(Mt.getUTCDate()+st)},(Mt,st)=>(st-Mt)/durationDay,Mt=>Mt.getUTCDate()-1);utcDay.range;const unixDay=timeInterval(Mt=>{Mt.setUTCHours(0,0,0,0)},(Mt,st)=>{Mt.setUTCDate(Mt.getUTCDate()+st)},(Mt,st)=>(st-Mt)/durationDay,Mt=>Math.floor(Mt/durationDay));unixDay.range;function timeWeekday(Mt){return timeInterval(st=>{st.setDate(st.getDate()-(st.getDay()+7-Mt)%7),st.setHours(0,0,0,0)},(st,nn)=>{st.setDate(st.getDate()+nn*7)},(st,nn)=>(nn-st-(nn.getTimezoneOffset()-st.getTimezoneOffset())*durationMinute)/durationWeek)}const timeSunday=timeWeekday(0),timeMonday=timeWeekday(1),timeTuesday=timeWeekday(2),timeWednesday=timeWeekday(3),timeThursday=timeWeekday(4),timeFriday=timeWeekday(5),timeSaturday=timeWeekday(6);timeSunday.range;timeMonday.range;timeTuesday.range;timeWednesday.range;timeThursday.range;timeFriday.range;timeSaturday.range;function utcWeekday(Mt){return timeInterval(st=>{st.setUTCDate(st.getUTCDate()-(st.getUTCDay()+7-Mt)%7),st.setUTCHours(0,0,0,0)},(st,nn)=>{st.setUTCDate(st.getUTCDate()+nn*7)},(st,nn)=>(nn-st)/durationWeek)}const utcSunday=utcWeekday(0),utcMonday=utcWeekday(1),utcTuesday=utcWeekday(2),utcWednesday=utcWeekday(3),utcThursday=utcWeekday(4),utcFriday=utcWeekday(5),utcSaturday=utcWeekday(6);utcSunday.range;utcMonday.range;utcTuesday.range;utcWednesday.range;utcThursday.range;utcFriday.range;utcSaturday.range;const timeMonth=timeInterval(Mt=>{Mt.setDate(1),Mt.setHours(0,0,0,0)},(Mt,st)=>{Mt.setMonth(Mt.getMonth()+st)},(Mt,st)=>st.getMonth()-Mt.getMonth()+(st.getFullYear()-Mt.getFullYear())*12,Mt=>Mt.getMonth());timeMonth.range;const utcMonth=timeInterval(Mt=>{Mt.setUTCDate(1),Mt.setUTCHours(0,0,0,0)},(Mt,st)=>{Mt.setUTCMonth(Mt.getUTCMonth()+st)},(Mt,st)=>st.getUTCMonth()-Mt.getUTCMonth()+(st.getUTCFullYear()-Mt.getUTCFullYear())*12,Mt=>Mt.getUTCMonth());utcMonth.range;const timeYear=timeInterval(Mt=>{Mt.setMonth(0,1),Mt.setHours(0,0,0,0)},(Mt,st)=>{Mt.setFullYear(Mt.getFullYear()+st)},(Mt,st)=>st.getFullYear()-Mt.getFullYear(),Mt=>Mt.getFullYear());timeYear.every=Mt=>!isFinite(Mt=Math.floor(Mt))||!(Mt>0)?null:timeInterval(st=>{st.setFullYear(Math.floor(st.getFullYear()/Mt)*Mt),st.setMonth(0,1),st.setHours(0,0,0,0)},(st,nn)=>{st.setFullYear(st.getFullYear()+nn*Mt)});timeYear.range;const utcYear=timeInterval(Mt=>{Mt.setUTCMonth(0,1),Mt.setUTCHours(0,0,0,0)},(Mt,st)=>{Mt.setUTCFullYear(Mt.getUTCFullYear()+st)},(Mt,st)=>st.getUTCFullYear()-Mt.getUTCFullYear(),Mt=>Mt.getUTCFullYear());utcYear.every=Mt=>!isFinite(Mt=Math.floor(Mt))||!(Mt>0)?null:timeInterval(st=>{st.setUTCFullYear(Math.floor(st.getUTCFullYear()/Mt)*Mt),st.setUTCMonth(0,1),st.setUTCHours(0,0,0,0)},(st,nn)=>{st.setUTCFullYear(st.getUTCFullYear()+nn*Mt)});utcYear.range;function ticker(Mt,st,nn,rn,on,an){const sn=[[second,1,durationSecond],[second,5,5*durationSecond],[second,15,15*durationSecond],[second,30,30*durationSecond],[an,1,durationMinute],[an,5,5*durationMinute],[an,15,15*durationMinute],[an,30,30*durationMinute],[on,1,durationHour],[on,3,3*durationHour],[on,6,6*durationHour],[on,12,12*durationHour],[rn,1,durationDay],[rn,2,2*durationDay],[nn,1,durationWeek],[st,1,durationMonth],[st,3,3*durationMonth],[Mt,1,durationYear]];function un(to,uo,hn){const fn=uo<to;fn&&([to,uo]=[uo,to]);const co=hn&&typeof hn.range=="function"?hn:Xr(to,uo,hn),lo=co?co.range(to,+uo+1):[];return fn?lo.reverse():lo}function Xr(to,uo,hn){const fn=Math.abs(uo-to)/hn,co=bisector(([,,ho])=>ho).right(sn,fn);if(co===sn.length)return Mt.every(tickStep(to/durationYear,uo/durationYear,hn));if(co===0)return millisecond.every(Math.max(tickStep(to,uo,hn),1));const[lo,fo]=sn[fn/sn[co-1][2]<sn[co][2]/fn?co-1:co];return lo.every(fo)}return[un,Xr]}const[utcTicks,utcTickInterval]=ticker(utcYear,utcMonth,utcSunday,unixDay,utcHour,utcMinute),[timeTicks,timeTickInterval]=ticker(timeYear,timeMonth,timeSunday,timeDay,timeHour,timeMinute);function localDate(Mt){if(0<=Mt.y&&Mt.y<100){var st=new Date(-1,Mt.m,Mt.d,Mt.H,Mt.M,Mt.S,Mt.L);return st.setFullYear(Mt.y),st}return new Date(Mt.y,Mt.m,Mt.d,Mt.H,Mt.M,Mt.S,Mt.L)}function utcDate(Mt){if(0<=Mt.y&&Mt.y<100){var st=new Date(Date.UTC(-1,Mt.m,Mt.d,Mt.H,Mt.M,Mt.S,Mt.L));return st.setUTCFullYear(Mt.y),st}return new Date(Date.UTC(Mt.y,Mt.m,Mt.d,Mt.H,Mt.M,Mt.S,Mt.L))}function newDate(Mt,st,nn){return{y:Mt,m:st,d:nn,H:0,M:0,S:0,L:0}}function formatLocale(Mt){var st=Mt.dateTime,nn=Mt.date,rn=Mt.time,on=Mt.periods,an=Mt.days,sn=Mt.shortDays,un=Mt.months,Xr=Mt.shortMonths,to=formatRe(on),uo=formatLookup(on),hn=formatRe(an),fn=formatLookup(an),co=formatRe(sn),lo=formatLookup(sn),fo=formatRe(un),ho=formatLookup(un),mo=formatRe(Xr),Uo=formatLookup(Xr),_d={a:fp,A:gp,b:mp,B:xp,c:null,d:formatDayOfMonth,e:formatDayOfMonth,f:formatMicroseconds,g:formatYearISO,G:formatFullYearISO,H:formatHour24,I:formatHour12,j:formatDayOfYear,L:formatMilliseconds,m:formatMonthNumber,M:formatMinutes,p:_p,q:Sp,Q:formatUnixTimestamp,s:formatUnixTimestampSeconds,S:formatSeconds,u:formatWeekdayNumberMonday,U:formatWeekNumberSunday,V:formatWeekNumberISO,w:formatWeekdayNumberSunday,W:formatWeekNumberMonday,x:null,X:null,y:formatYear,Y:formatFullYear,Z:formatZone,"%":formatLiteralPercent},tp={a:Cp,A:jp,b:Dp,B:Vp,c:null,d:formatUTCDayOfMonth,e:formatUTCDayOfMonth,f:formatUTCMicroseconds,g:formatUTCYearISO,G:formatUTCFullYearISO,H:formatUTCHour24,I:formatUTCHour12,j:formatUTCDayOfYear,L:formatUTCMilliseconds,m:formatUTCMonthNumber,M:formatUTCMinutes,p:Up,q:Kp,Q:formatUnixTimestamp,s:formatUnixTimestampSeconds,S:formatUTCSeconds,u:formatUTCWeekdayNumberMonday,U:formatUTCWeekNumberSunday,V:formatUTCWeekNumberISO,w:formatUTCWeekdayNumberSunday,W:formatUTCWeekNumberMonday,x:null,X:null,y:formatUTCYear,Y:formatUTCFullYear,Z:formatUTCZone,"%":formatLiteralPercent},ep={a:ap,A:sp,b:up,B:pp,c:lp,d:parseDayOfMonth,e:parseDayOfMonth,f:parseMicroseconds,g:parseYear,G:parseFullYear,H:parseHour24,I:parseHour24,j:parseDayOfYear,L:parseMilliseconds,m:parseMonthNumber,M:parseMinutes,p:op,q:parseQuarter,Q:parseUnixTimestamp,s:parseUnixTimestampSeconds,S:parseSeconds,u:parseWeekdayNumberMonday,U:parseWeekNumberSunday,V:parseWeekNumberISO,w:parseWeekdayNumberSunday,W:parseWeekNumberMonday,x:dp,X:cp,y:parseYear,Y:parseFullYear,Z:parseZone,"%":parseLiteralPercent};_d.x=np(nn,_d),_d.X=np(rn,_d),_d.c=np(st,_d),tp.x=np(nn,tp),tp.X=np(rn,tp),tp.c=np(st,tp);function np(Mp,zp){return function(Bp){var Pp=[],Gp=-1,Wp=0,Xp=Mp.length,Qp,om,ym;for(Bp instanceof Date||(Bp=new Date(+Bp));++Gp<Xp;)Mp.charCodeAt(Gp)===37&&(Pp.push(Mp.slice(Wp,Gp)),(om=pads[Qp=Mp.charAt(++Gp)])!=null?Qp=Mp.charAt(++Gp):om=Qp==="e"?" ":"0",(ym=zp[Qp])&&(Qp=ym(Bp,om)),Pp.push(Qp),Wp=Gp+1);return Pp.push(Mp.slice(Wp,Gp)),Pp.join("")}}function rp(Mp,zp){return function(Bp){var Pp=newDate(1900,void 0,1),Gp=ip(Pp,Mp,Bp+="",0),Wp,Xp;if(Gp!=Bp.length)return null;if("Q"in Pp)return new Date(Pp.Q);if("s"in Pp)return new Date(Pp.s*1e3+("L"in Pp?Pp.L:0));if(zp&&!("Z"in Pp)&&(Pp.Z=0),"p"in Pp&&(Pp.H=Pp.H%12+Pp.p*12),Pp.m===void 0&&(Pp.m="q"in Pp?Pp.q:0),"V"in Pp){if(Pp.V<1||Pp.V>53)return null;"w"in Pp||(Pp.w=1),"Z"in Pp?(Wp=utcDate(newDate(Pp.y,0,1)),Xp=Wp.getUTCDay(),Wp=Xp>4||Xp===0?utcMonday.ceil(Wp):utcMonday(Wp),Wp=utcDay.offset(Wp,(Pp.V-1)*7),Pp.y=Wp.getUTCFullYear(),Pp.m=Wp.getUTCMonth(),Pp.d=Wp.getUTCDate()+(Pp.w+6)%7):(Wp=localDate(newDate(Pp.y,0,1)),Xp=Wp.getDay(),Wp=Xp>4||Xp===0?timeMonday.ceil(Wp):timeMonday(Wp),Wp=timeDay.offset(Wp,(Pp.V-1)*7),Pp.y=Wp.getFullYear(),Pp.m=Wp.getMonth(),Pp.d=Wp.getDate()+(Pp.w+6)%7)}else("W"in Pp||"U"in Pp)&&("w"in Pp||(Pp.w="u"in Pp?Pp.u%7:"W"in Pp?1:0),Xp="Z"in Pp?utcDate(newDate(Pp.y,0,1)).getUTCDay():localDate(newDate(Pp.y,0,1)).getDay(),Pp.m=0,Pp.d="W"in Pp?(Pp.w+6)%7+Pp.W*7-(Xp+5)%7:Pp.w+Pp.U*7-(Xp+6)%7);return"Z"in Pp?(Pp.H+=Pp.Z/100|0,Pp.M+=Pp.Z%100,utcDate(Pp)):localDate(Pp)}}function ip(Mp,zp,Bp,Pp){for(var Gp=0,Wp=zp.length,Xp=Bp.length,Qp,om;Gp<Wp;){if(Pp>=Xp)return-1;if(Qp=zp.charCodeAt(Gp++),Qp===37){if(Qp=zp.charAt(Gp++),om=ep[Qp in pads?zp.charAt(Gp++):Qp],!om||(Pp=om(Mp,Bp,Pp))<0)return-1}else if(Qp!=Bp.charCodeAt(Pp++))return-1}return Pp}function op(Mp,zp,Bp){var Pp=to.exec(zp.slice(Bp));return Pp?(Mp.p=uo.get(Pp[0].toLowerCase()),Bp+Pp[0].length):-1}function ap(Mp,zp,Bp){var Pp=co.exec(zp.slice(Bp));return Pp?(Mp.w=lo.get(Pp[0].toLowerCase()),Bp+Pp[0].length):-1}function sp(Mp,zp,Bp){var Pp=hn.exec(zp.slice(Bp));return Pp?(Mp.w=fn.get(Pp[0].toLowerCase()),Bp+Pp[0].length):-1}function up(Mp,zp,Bp){var Pp=mo.exec(zp.slice(Bp));return Pp?(Mp.m=Uo.get(Pp[0].toLowerCase()),Bp+Pp[0].length):-1}function pp(Mp,zp,Bp){var Pp=fo.exec(zp.slice(Bp));return Pp?(Mp.m=ho.get(Pp[0].toLowerCase()),Bp+Pp[0].length):-1}function lp(Mp,zp,Bp){return ip(Mp,st,zp,Bp)}function dp(Mp,zp,Bp){return ip(Mp,nn,zp,Bp)}function cp(Mp,zp,Bp){return ip(Mp,rn,zp,Bp)}function fp(Mp){return sn[Mp.getDay()]}function gp(Mp){return an[Mp.getDay()]}function mp(Mp){return Xr[Mp.getMonth()]}function xp(Mp){return un[Mp.getMonth()]}function _p(Mp){return on[+(Mp.getHours()>=12)]}function Sp(Mp){return 1+~~(Mp.getMonth()/3)}function Cp(Mp){return sn[Mp.getUTCDay()]}function jp(Mp){return an[Mp.getUTCDay()]}function Dp(Mp){return Xr[Mp.getUTCMonth()]}function Vp(Mp){return un[Mp.getUTCMonth()]}function Up(Mp){return on[+(Mp.getUTCHours()>=12)]}function Kp(Mp){return 1+~~(Mp.getUTCMonth()/3)}return{format:function(Mp){var zp=np(Mp+="",_d);return zp.toString=function(){return Mp},zp},parse:function(Mp){var zp=rp(Mp+="",!1);return zp.toString=function(){return Mp},zp},utcFormat:function(Mp){var zp=np(Mp+="",tp);return zp.toString=function(){return Mp},zp},utcParse:function(Mp){var zp=rp(Mp+="",!0);return zp.toString=function(){return Mp},zp}}}var pads={"-":"",_:" ",0:"0"},numberRe=/^\s*\d+/,percentRe=/^%/,requoteRe=/[\\^$*+?|[\]().{}]/g;function pad(Mt,st,nn){var rn=Mt<0?"-":"",on=(rn?-Mt:Mt)+"",an=on.length;return rn+(an<nn?new Array(nn-an+1).join(st)+on:on)}function requote(Mt){return Mt.replace(requoteRe,"\\$&")}function formatRe(Mt){return new RegExp("^(?:"+Mt.map(requote).join("|")+")","i")}function formatLookup(Mt){return new Map(Mt.map((st,nn)=>[st.toLowerCase(),nn]))}function parseWeekdayNumberSunday(Mt,st,nn){var rn=numberRe.exec(st.slice(nn,nn+1));return rn?(Mt.w=+rn[0],nn+rn[0].length):-1}function parseWeekdayNumberMonday(Mt,st,nn){var rn=numberRe.exec(st.slice(nn,nn+1));return rn?(Mt.u=+rn[0],nn+rn[0].length):-1}function parseWeekNumberSunday(Mt,st,nn){var rn=numberRe.exec(st.slice(nn,nn+2));return rn?(Mt.U=+rn[0],nn+rn[0].length):-1}function parseWeekNumberISO(Mt,st,nn){var rn=numberRe.exec(st.slice(nn,nn+2));return rn?(Mt.V=+rn[0],nn+rn[0].length):-1}function parseWeekNumberMonday(Mt,st,nn){var rn=numberRe.exec(st.slice(nn,nn+2));return rn?(Mt.W=+rn[0],nn+rn[0].length):-1}function parseFullYear(Mt,st,nn){var rn=numberRe.exec(st.slice(nn,nn+4));return rn?(Mt.y=+rn[0],nn+rn[0].length):-1}function parseYear(Mt,st,nn){var rn=numberRe.exec(st.slice(nn,nn+2));return rn?(Mt.y=+rn[0]+(+rn[0]>68?1900:2e3),nn+rn[0].length):-1}function parseZone(Mt,st,nn){var rn=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(st.slice(nn,nn+6));return rn?(Mt.Z=rn[1]?0:-(rn[2]+(rn[3]||"00")),nn+rn[0].length):-1}function parseQuarter(Mt,st,nn){var rn=numberRe.exec(st.slice(nn,nn+1));return rn?(Mt.q=rn[0]*3-3,nn+rn[0].length):-1}function parseMonthNumber(Mt,st,nn){var rn=numberRe.exec(st.slice(nn,nn+2));return rn?(Mt.m=rn[0]-1,nn+rn[0].length):-1}function parseDayOfMonth(Mt,st,nn){var rn=numberRe.exec(st.slice(nn,nn+2));return rn?(Mt.d=+rn[0],nn+rn[0].length):-1}function parseDayOfYear(Mt,st,nn){var rn=numberRe.exec(st.slice(nn,nn+3));return rn?(Mt.m=0,Mt.d=+rn[0],nn+rn[0].length):-1}function parseHour24(Mt,st,nn){var rn=numberRe.exec(st.slice(nn,nn+2));return rn?(Mt.H=+rn[0],nn+rn[0].length):-1}function parseMinutes(Mt,st,nn){var rn=numberRe.exec(st.slice(nn,nn+2));return rn?(Mt.M=+rn[0],nn+rn[0].length):-1}function parseSeconds(Mt,st,nn){var rn=numberRe.exec(st.slice(nn,nn+2));return rn?(Mt.S=+rn[0],nn+rn[0].length):-1}function parseMilliseconds(Mt,st,nn){var rn=numberRe.exec(st.slice(nn,nn+3));return rn?(Mt.L=+rn[0],nn+rn[0].length):-1}function parseMicroseconds(Mt,st,nn){var rn=numberRe.exec(st.slice(nn,nn+6));return rn?(Mt.L=Math.floor(rn[0]/1e3),nn+rn[0].length):-1}function parseLiteralPercent(Mt,st,nn){var rn=percentRe.exec(st.slice(nn,nn+1));return rn?nn+rn[0].length:-1}function parseUnixTimestamp(Mt,st,nn){var rn=numberRe.exec(st.slice(nn));return rn?(Mt.Q=+rn[0],nn+rn[0].length):-1}function parseUnixTimestampSeconds(Mt,st,nn){var rn=numberRe.exec(st.slice(nn));return rn?(Mt.s=+rn[0],nn+rn[0].length):-1}function formatDayOfMonth(Mt,st){return pad(Mt.getDate(),st,2)}function formatHour24(Mt,st){return pad(Mt.getHours(),st,2)}function formatHour12(Mt,st){return pad(Mt.getHours()%12||12,st,2)}function formatDayOfYear(Mt,st){return pad(1+timeDay.count(timeYear(Mt),Mt),st,3)}function formatMilliseconds(Mt,st){return pad(Mt.getMilliseconds(),st,3)}function formatMicroseconds(Mt,st){return formatMilliseconds(Mt,st)+"000"}function formatMonthNumber(Mt,st){return pad(Mt.getMonth()+1,st,2)}function formatMinutes(Mt,st){return pad(Mt.getMinutes(),st,2)}function formatSeconds(Mt,st){return pad(Mt.getSeconds(),st,2)}function formatWeekdayNumberMonday(Mt){var st=Mt.getDay();return st===0?7:st}function formatWeekNumberSunday(Mt,st){return pad(timeSunday.count(timeYear(Mt)-1,Mt),st,2)}function dISO(Mt){var st=Mt.getDay();return st>=4||st===0?timeThursday(Mt):timeThursday.ceil(Mt)}function formatWeekNumberISO(Mt,st){return Mt=dISO(Mt),pad(timeThursday.count(timeYear(Mt),Mt)+(timeYear(Mt).getDay()===4),st,2)}function formatWeekdayNumberSunday(Mt){return Mt.getDay()}function formatWeekNumberMonday(Mt,st){return pad(timeMonday.count(timeYear(Mt)-1,Mt),st,2)}function formatYear(Mt,st){return pad(Mt.getFullYear()%100,st,2)}function formatYearISO(Mt,st){return Mt=dISO(Mt),pad(Mt.getFullYear()%100,st,2)}function formatFullYear(Mt,st){return pad(Mt.getFullYear()%1e4,st,4)}function formatFullYearISO(Mt,st){var nn=Mt.getDay();return Mt=nn>=4||nn===0?timeThursday(Mt):timeThursday.ceil(Mt),pad(Mt.getFullYear()%1e4,st,4)}function formatZone(Mt){var st=Mt.getTimezoneOffset();return(st>0?"-":(st*=-1,"+"))+pad(st/60|0,"0",2)+pad(st%60,"0",2)}function formatUTCDayOfMonth(Mt,st){return pad(Mt.getUTCDate(),st,2)}function formatUTCHour24(Mt,st){return pad(Mt.getUTCHours(),st,2)}function formatUTCHour12(Mt,st){return pad(Mt.getUTCHours()%12||12,st,2)}function formatUTCDayOfYear(Mt,st){return pad(1+utcDay.count(utcYear(Mt),Mt),st,3)}function formatUTCMilliseconds(Mt,st){return pad(Mt.getUTCMilliseconds(),st,3)}function formatUTCMicroseconds(Mt,st){return formatUTCMilliseconds(Mt,st)+"000"}function formatUTCMonthNumber(Mt,st){return pad(Mt.getUTCMonth()+1,st,2)}function formatUTCMinutes(Mt,st){return pad(Mt.getUTCMinutes(),st,2)}function formatUTCSeconds(Mt,st){return pad(Mt.getUTCSeconds(),st,2)}function formatUTCWeekdayNumberMonday(Mt){var st=Mt.getUTCDay();return st===0?7:st}function formatUTCWeekNumberSunday(Mt,st){return pad(utcSunday.count(utcYear(Mt)-1,Mt),st,2)}function UTCdISO(Mt){var st=Mt.getUTCDay();return st>=4||st===0?utcThursday(Mt):utcThursday.ceil(Mt)}function formatUTCWeekNumberISO(Mt,st){return Mt=UTCdISO(Mt),pad(utcThursday.count(utcYear(Mt),Mt)+(utcYear(Mt).getUTCDay()===4),st,2)}function formatUTCWeekdayNumberSunday(Mt){return Mt.getUTCDay()}function formatUTCWeekNumberMonday(Mt,st){return pad(utcMonday.count(utcYear(Mt)-1,Mt),st,2)}function formatUTCYear(Mt,st){return pad(Mt.getUTCFullYear()%100,st,2)}function formatUTCYearISO(Mt,st){return Mt=UTCdISO(Mt),pad(Mt.getUTCFullYear()%100,st,2)}function formatUTCFullYear(Mt,st){return pad(Mt.getUTCFullYear()%1e4,st,4)}function formatUTCFullYearISO(Mt,st){var nn=Mt.getUTCDay();return Mt=nn>=4||nn===0?utcThursday(Mt):utcThursday.ceil(Mt),pad(Mt.getUTCFullYear()%1e4,st,4)}function formatUTCZone(){return"+0000"}function formatLiteralPercent(){return"%"}function formatUnixTimestamp(Mt){return+Mt}function formatUnixTimestampSeconds(Mt){return Math.floor(+Mt/1e3)}var locale,timeFormat,utcFormat;defaultLocale({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function defaultLocale(Mt){return locale=formatLocale(Mt),timeFormat=locale.format,locale.parse,utcFormat=locale.utcFormat,locale.utcParse,locale}function date(Mt){return new Date(Mt)}function number(Mt){return Mt instanceof Date?+Mt:+new Date(+Mt)}function calendar(Mt,st,nn,rn,on,an,sn,un,Xr,to){var uo=continuous(),hn=uo.invert,fn=uo.domain,co=to(".%L"),lo=to(":%S"),fo=to("%I:%M"),ho=to("%I %p"),mo=to("%a %d"),Uo=to("%b %d"),_d=to("%B"),tp=to("%Y");function ep(np){return(Xr(np)<np?co:un(np)<np?lo:sn(np)<np?fo:an(np)<np?ho:rn(np)<np?on(np)<np?mo:Uo:nn(np)<np?_d:tp)(np)}return uo.invert=function(np){return new Date(hn(np))},uo.domain=function(np){return arguments.length?fn(Array.from(np,number)):fn().map(date)},uo.ticks=function(np){var rp=fn();return Mt(rp[0],rp[rp.length-1],np??10)},uo.tickFormat=function(np,rp){return rp==null?ep:to(rp)},uo.nice=function(np){var rp=fn();return(!np||typeof np.range!="function")&&(np=st(rp[0],rp[rp.length-1],np??10)),np?fn(nice(rp,np)):uo},uo.copy=function(){return copy$1(uo,calendar(Mt,st,nn,rn,on,an,sn,un,Xr,to))},uo}function time(){return initRange.apply(calendar(timeTicks,timeTickInterval,timeYear,timeMonth,timeSunday,timeDay,timeHour,timeMinute,second,timeFormat).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function utcTime(){return initRange.apply(calendar(utcTicks,utcTickInterval,utcYear,utcMonth,utcSunday,utcDay,utcHour,utcMinute,second,utcFormat).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function transformer$1(){var Mt=0,st=1,nn,rn,on,an,sn=identity$6,un=!1,Xr;function to(hn){return hn==null||isNaN(hn=+hn)?Xr:sn(on===0?.5:(hn=(an(hn)-nn)*on,un?Math.max(0,Math.min(1,hn)):hn))}to.domain=function(hn){return arguments.length?([Mt,st]=hn,nn=an(Mt=+Mt),rn=an(st=+st),on=nn===rn?0:1/(rn-nn),to):[Mt,st]},to.clamp=function(hn){return arguments.length?(un=!!hn,to):un},to.interpolator=function(hn){return arguments.length?(sn=hn,to):sn};function uo(hn){return function(fn){var co,lo;return arguments.length?([co,lo]=fn,sn=hn(co,lo),to):[sn(0),sn(1)]}}return to.range=uo(interpolate),to.rangeRound=uo(interpolateRound),to.unknown=function(hn){return arguments.length?(Xr=hn,to):Xr},function(hn){return an=hn,nn=hn(Mt),rn=hn(st),on=nn===rn?0:1/(rn-nn),to}}function copy(Mt,st){return st.domain(Mt.domain()).interpolator(Mt.interpolator()).clamp(Mt.clamp()).unknown(Mt.unknown())}function sequential(){var Mt=linearish(transformer$1()(identity$6));return Mt.copy=function(){return copy(Mt,sequential())},initInterpolator.apply(Mt,arguments)}function sequentialLog(){var Mt=loggish(transformer$1()).domain([1,10]);return Mt.copy=function(){return copy(Mt,sequentialLog()).base(Mt.base())},initInterpolator.apply(Mt,arguments)}function sequentialSymlog(){var Mt=symlogish(transformer$1());return Mt.copy=function(){return copy(Mt,sequentialSymlog()).constant(Mt.constant())},initInterpolator.apply(Mt,arguments)}function sequentialPow(){var Mt=powish(transformer$1());return Mt.copy=function(){return copy(Mt,sequentialPow()).exponent(Mt.exponent())},initInterpolator.apply(Mt,arguments)}function sequentialSqrt(){return sequentialPow.apply(null,arguments).exponent(.5)}function sequentialQuantile(){var Mt=[],st=identity$6;function nn(rn){if(rn!=null&&!isNaN(rn=+rn))return st((bisectRight(Mt,rn,1)-1)/(Mt.length-1))}return nn.domain=function(rn){if(!arguments.length)return Mt.slice();Mt=[];for(let on of rn)on!=null&&!isNaN(on=+on)&&Mt.push(on);return Mt.sort(ascending),nn},nn.interpolator=function(rn){return arguments.length?(st=rn,nn):st},nn.range=function(){return Mt.map((rn,on)=>st(on/(Mt.length-1)))},nn.quantiles=function(rn){return Array.from({length:rn+1},(on,an)=>quantile$1(Mt,an/rn))},nn.copy=function(){return sequentialQuantile(st).domain(Mt)},initInterpolator.apply(nn,arguments)}function transformer(){var Mt=0,st=.5,nn=1,rn=1,on,an,sn,un,Xr,to=identity$6,uo,hn=!1,fn;function co(fo){return isNaN(fo=+fo)?fn:(fo=.5+((fo=+uo(fo))-an)*(rn*fo<rn*an?un:Xr),to(hn?Math.max(0,Math.min(1,fo)):fo))}co.domain=function(fo){return arguments.length?([Mt,st,nn]=fo,on=uo(Mt=+Mt),an=uo(st=+st),sn=uo(nn=+nn),un=on===an?0:.5/(an-on),Xr=an===sn?0:.5/(sn-an),rn=an<on?-1:1,co):[Mt,st,nn]},co.clamp=function(fo){return arguments.length?(hn=!!fo,co):hn},co.interpolator=function(fo){return arguments.length?(to=fo,co):to};function lo(fo){return function(ho){var mo,Uo,_d;return arguments.length?([mo,Uo,_d]=ho,to=piecewise(fo,[mo,Uo,_d]),co):[to(0),to(.5),to(1)]}}return co.range=lo(interpolate),co.rangeRound=lo(interpolateRound),co.unknown=function(fo){return arguments.length?(fn=fo,co):fn},function(fo){return uo=fo,on=fo(Mt),an=fo(st),sn=fo(nn),un=on===an?0:.5/(an-on),Xr=an===sn?0:.5/(sn-an),rn=an<on?-1:1,co}}function diverging(){var Mt=linearish(transformer()(identity$6));return Mt.copy=function(){return copy(Mt,diverging())},initInterpolator.apply(Mt,arguments)}function divergingLog(){var Mt=loggish(transformer()).domain([.1,1,10]);return Mt.copy=function(){return copy(Mt,divergingLog()).base(Mt.base())},initInterpolator.apply(Mt,arguments)}function divergingSymlog(){var Mt=symlogish(transformer());return Mt.copy=function(){return copy(Mt,divergingSymlog()).constant(Mt.constant())},initInterpolator.apply(Mt,arguments)}function divergingPow(){var Mt=powish(transformer());return Mt.copy=function(){return copy(Mt,divergingPow()).exponent(Mt.exponent())},initInterpolator.apply(Mt,arguments)}function divergingSqrt(){return divergingPow.apply(null,arguments).exponent(.5)}const d3Scales=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:band,scaleDiverging:diverging,scaleDivergingLog:divergingLog,scaleDivergingPow:divergingPow,scaleDivergingSqrt:divergingSqrt,scaleDivergingSymlog:divergingSymlog,scaleIdentity:identity$4,scaleImplicit:implicit,scaleLinear:linear,scaleLog:log,scaleOrdinal:ordinal,scalePoint:point,scalePow:pow,scaleQuantile:quantile,scaleQuantize:quantize,scaleRadial:radial,scaleSequential:sequential,scaleSequentialLog:sequentialLog,scaleSequentialPow:sequentialPow,scaleSequentialQuantile:sequentialQuantile,scaleSequentialSqrt:sequentialSqrt,scaleSequentialSymlog:sequentialSymlog,scaleSqrt:sqrt,scaleSymlog:symlog,scaleThreshold:threshold,scaleTime:time,scaleUtc:utcTime,tickFormat},Symbol.toStringTag,{value:"Module"}));var isSymbol=isSymbol_1;function baseExtremum$4(Mt,st,nn){for(var rn=-1,on=Mt.length;++rn<on;){var an=Mt[rn],sn=st(an);if(sn!=null&&(un===void 0?sn===sn&&!isSymbol(sn):nn(sn,un)))var un=sn,Xr=an}return Xr}var _baseExtremum=baseExtremum$4;function baseGt$2(Mt,st){return Mt>st}var _baseGt=baseGt$2,baseExtremum$3=_baseExtremum,baseGt$1=_baseGt,identity$3=identity_1;function max(Mt){return Mt&&Mt.length?baseExtremum$3(Mt,identity$3,baseGt$1):void 0}var max_1=max;const max$1=getDefaultExportFromCjs(max_1);function baseLt$2(Mt,st){return Mt<st}var _baseLt=baseLt$2,baseExtremum$2=_baseExtremum,baseLt$1=_baseLt,identity$2=identity_1;function min(Mt){return Mt&&Mt.length?baseExtremum$2(Mt,identity$2,baseLt$1):void 0}var min_1=min;const min$1=getDefaultExportFromCjs(min_1);var arrayMap=_arrayMap,baseIteratee$7=_baseIteratee,baseMap=_baseMap,isArray$3=isArray_1;function map$2(Mt,st){var nn=isArray$3(Mt)?arrayMap:baseMap;return nn(Mt,baseIteratee$7(st))}var map_1=map$2,baseFlatten=_baseFlatten,map$1=map_1;function flatMap(Mt,st){return baseFlatten(map$1(Mt,st),1)}var flatMap_1=flatMap;const flatMap$1=getDefaultExportFromCjs(flatMap_1);var baseIsEqual=_baseIsEqual;function isEqual(Mt,st){return baseIsEqual(Mt,st)}var isEqual_1=isEqual;const isEqual$1=getDefaultExportFromCjs(isEqual_1);var MAX_DIGITS=1e9,defaults={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},Decimal,external=!0,decimalError="[DecimalError] ",invalidArgument=decimalError+"Invalid argument: ",exponentOutOfRange=decimalError+"Exponent out of range: ",mathfloor=Math.floor,mathpow=Math.pow,isDecimal=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,ONE,BASE=1e7,LOG_BASE=7,MAX_SAFE_INTEGER=9007199254740991,MAX_E=mathfloor(MAX_SAFE_INTEGER/LOG_BASE),P={};P.absoluteValue=P.abs=function(){var Mt=new this.constructor(this);return Mt.s&&(Mt.s=1),Mt};P.comparedTo=P.cmp=function(Mt){var st,nn,rn,on,an=this;if(Mt=new an.constructor(Mt),an.s!==Mt.s)return an.s||-Mt.s;if(an.e!==Mt.e)return an.e>Mt.e^an.s<0?1:-1;for(rn=an.d.length,on=Mt.d.length,st=0,nn=rn<on?rn:on;st<nn;++st)if(an.d[st]!==Mt.d[st])return an.d[st]>Mt.d[st]^an.s<0?1:-1;return rn===on?0:rn>on^an.s<0?1:-1};P.decimalPlaces=P.dp=function(){var Mt=this,st=Mt.d.length-1,nn=(st-Mt.e)*LOG_BASE;if(st=Mt.d[st],st)for(;st%10==0;st/=10)nn--;return nn<0?0:nn};P.dividedBy=P.div=function(Mt){return divide(this,new this.constructor(Mt))};P.dividedToIntegerBy=P.idiv=function(Mt){var st=this,nn=st.constructor;return round(divide(st,new nn(Mt),0,1),nn.precision)};P.equals=P.eq=function(Mt){return!this.cmp(Mt)};P.exponent=function(){return getBase10Exponent(this)};P.greaterThan=P.gt=function(Mt){return this.cmp(Mt)>0};P.greaterThanOrEqualTo=P.gte=function(Mt){return this.cmp(Mt)>=0};P.isInteger=P.isint=function(){return this.e>this.d.length-2};P.isNegative=P.isneg=function(){return this.s<0};P.isPositive=P.ispos=function(){return this.s>0};P.isZero=function(){return this.s===0};P.lessThan=P.lt=function(Mt){return this.cmp(Mt)<0};P.lessThanOrEqualTo=P.lte=function(Mt){return this.cmp(Mt)<1};P.logarithm=P.log=function(Mt){var st,nn=this,rn=nn.constructor,on=rn.precision,an=on+5;if(Mt===void 0)Mt=new rn(10);else if(Mt=new rn(Mt),Mt.s<1||Mt.eq(ONE))throw Error(decimalError+"NaN");if(nn.s<1)throw Error(decimalError+(nn.s?"NaN":"-Infinity"));return nn.eq(ONE)?new rn(0):(external=!1,st=divide(ln(nn,an),ln(Mt,an),an),external=!0,round(st,on))};P.minus=P.sub=function(Mt){var st=this;return Mt=new st.constructor(Mt),st.s==Mt.s?subtract(st,Mt):add(st,(Mt.s=-Mt.s,Mt))};P.modulo=P.mod=function(Mt){var st,nn=this,rn=nn.constructor,on=rn.precision;if(Mt=new rn(Mt),!Mt.s)throw Error(decimalError+"NaN");return nn.s?(external=!1,st=divide(nn,Mt,0,1).times(Mt),external=!0,nn.minus(st)):round(new rn(nn),on)};P.naturalExponential=P.exp=function(){return exp(this)};P.naturalLogarithm=P.ln=function(){return ln(this)};P.negated=P.neg=function(){var Mt=new this.constructor(this);return Mt.s=-Mt.s||0,Mt};P.plus=P.add=function(Mt){var st=this;return Mt=new st.constructor(Mt),st.s==Mt.s?add(st,Mt):subtract(st,(Mt.s=-Mt.s,Mt))};P.precision=P.sd=function(Mt){var st,nn,rn,on=this;if(Mt!==void 0&&Mt!==!!Mt&&Mt!==1&&Mt!==0)throw Error(invalidArgument+Mt);if(st=getBase10Exponent(on)+1,rn=on.d.length-1,nn=rn*LOG_BASE+1,rn=on.d[rn],rn){for(;rn%10==0;rn/=10)nn--;for(rn=on.d[0];rn>=10;rn/=10)nn++}return Mt&&st>nn?st:nn};P.squareRoot=P.sqrt=function(){var Mt,st,nn,rn,on,an,sn,un=this,Xr=un.constructor;if(un.s<1){if(!un.s)return new Xr(0);throw Error(decimalError+"NaN")}for(Mt=getBase10Exponent(un),external=!1,on=Math.sqrt(+un),on==0||on==1/0?(st=digitsToString(un.d),(st.length+Mt)%2==0&&(st+="0"),on=Math.sqrt(st),Mt=mathfloor((Mt+1)/2)-(Mt<0||Mt%2),on==1/0?st="5e"+Mt:(st=on.toExponential(),st=st.slice(0,st.indexOf("e")+1)+Mt),rn=new Xr(st)):rn=new Xr(on.toString()),nn=Xr.precision,on=sn=nn+3;;)if(an=rn,rn=an.plus(divide(un,an,sn+2)).times(.5),digitsToString(an.d).slice(0,sn)===(st=digitsToString(rn.d)).slice(0,sn)){if(st=st.slice(sn-3,sn+1),on==sn&&st=="4999"){if(round(an,nn+1,0),an.times(an).eq(un)){rn=an;break}}else if(st!="9999")break;sn+=4}return external=!0,round(rn,nn)};P.times=P.mul=function(Mt){var st,nn,rn,on,an,sn,un,Xr,to,uo=this,hn=uo.constructor,fn=uo.d,co=(Mt=new hn(Mt)).d;if(!uo.s||!Mt.s)return new hn(0);for(Mt.s*=uo.s,nn=uo.e+Mt.e,Xr=fn.length,to=co.length,Xr<to&&(an=fn,fn=co,co=an,sn=Xr,Xr=to,to=sn),an=[],sn=Xr+to,rn=sn;rn--;)an.push(0);for(rn=to;--rn>=0;){for(st=0,on=Xr+rn;on>rn;)un=an[on]+co[rn]*fn[on-rn-1]+st,an[on--]=un%BASE|0,st=un/BASE|0;an[on]=(an[on]+st)%BASE|0}for(;!an[--sn];)an.pop();return st?++nn:an.shift(),Mt.d=an,Mt.e=nn,external?round(Mt,hn.precision):Mt};P.toDecimalPlaces=P.todp=function(Mt,st){var nn=this,rn=nn.constructor;return nn=new rn(nn),Mt===void 0?nn:(checkInt32(Mt,0,MAX_DIGITS),st===void 0?st=rn.rounding:checkInt32(st,0,8),round(nn,Mt+getBase10Exponent(nn)+1,st))};P.toExponential=function(Mt,st){var nn,rn=this,on=rn.constructor;return Mt===void 0?nn=toString(rn,!0):(checkInt32(Mt,0,MAX_DIGITS),st===void 0?st=on.rounding:checkInt32(st,0,8),rn=round(new on(rn),Mt+1,st),nn=toString(rn,!0,Mt+1)),nn};P.toFixed=function(Mt,st){var nn,rn,on=this,an=on.constructor;return Mt===void 0?toString(on):(checkInt32(Mt,0,MAX_DIGITS),st===void 0?st=an.rounding:checkInt32(st,0,8),rn=round(new an(on),Mt+getBase10Exponent(on)+1,st),nn=toString(rn.abs(),!1,Mt+getBase10Exponent(rn)+1),on.isneg()&&!on.isZero()?"-"+nn:nn)};P.toInteger=P.toint=function(){var Mt=this,st=Mt.constructor;return round(new st(Mt),getBase10Exponent(Mt)+1,st.rounding)};P.toNumber=function(){return+this};P.toPower=P.pow=function(Mt){var st,nn,rn,on,an,sn,un=this,Xr=un.constructor,to=12,uo=+(Mt=new Xr(Mt));if(!Mt.s)return new Xr(ONE);if(un=new Xr(un),!un.s){if(Mt.s<1)throw Error(decimalError+"Infinity");return un}if(un.eq(ONE))return un;if(rn=Xr.precision,Mt.eq(ONE))return round(un,rn);if(st=Mt.e,nn=Mt.d.length-1,sn=st>=nn,an=un.s,sn){if((nn=uo<0?-uo:uo)<=MAX_SAFE_INTEGER){for(on=new Xr(ONE),st=Math.ceil(rn/LOG_BASE+4),external=!1;nn%2&&(on=on.times(un),truncate(on.d,st)),nn=mathfloor(nn/2),nn!==0;)un=un.times(un),truncate(un.d,st);return external=!0,Mt.s<0?new Xr(ONE).div(on):round(on,rn)}}else if(an<0)throw Error(decimalError+"NaN");return an=an<0&&Mt.d[Math.max(st,nn)]&1?-1:1,un.s=1,external=!1,on=Mt.times(ln(un,rn+to)),external=!0,on=exp(on),on.s=an,on};P.toPrecision=function(Mt,st){var nn,rn,on=this,an=on.constructor;return Mt===void 0?(nn=getBase10Exponent(on),rn=toString(on,nn<=an.toExpNeg||nn>=an.toExpPos)):(checkInt32(Mt,1,MAX_DIGITS),st===void 0?st=an.rounding:checkInt32(st,0,8),on=round(new an(on),Mt,st),nn=getBase10Exponent(on),rn=toString(on,Mt<=nn||nn<=an.toExpNeg,Mt)),rn};P.toSignificantDigits=P.tosd=function(Mt,st){var nn=this,rn=nn.constructor;return Mt===void 0?(Mt=rn.precision,st=rn.rounding):(checkInt32(Mt,1,MAX_DIGITS),st===void 0?st=rn.rounding:checkInt32(st,0,8)),round(new rn(nn),Mt,st)};P.toString=P.valueOf=P.val=P.toJSON=P[Symbol.for("nodejs.util.inspect.custom")]=function(){var Mt=this,st=getBase10Exponent(Mt),nn=Mt.constructor;return toString(Mt,st<=nn.toExpNeg||st>=nn.toExpPos)};function add(Mt,st){var nn,rn,on,an,sn,un,Xr,to,uo=Mt.constructor,hn=uo.precision;if(!Mt.s||!st.s)return st.s||(st=new uo(Mt)),external?round(st,hn):st;if(Xr=Mt.d,to=st.d,sn=Mt.e,on=st.e,Xr=Xr.slice(),an=sn-on,an){for(an<0?(rn=Xr,an=-an,un=to.length):(rn=to,on=sn,un=Xr.length),sn=Math.ceil(hn/LOG_BASE),un=sn>un?sn+1:un+1,an>un&&(an=un,rn.length=1),rn.reverse();an--;)rn.push(0);rn.reverse()}for(un=Xr.length,an=to.length,un-an<0&&(an=un,rn=to,to=Xr,Xr=rn),nn=0;an;)nn=(Xr[--an]=Xr[an]+to[an]+nn)/BASE|0,Xr[an]%=BASE;for(nn&&(Xr.unshift(nn),++on),un=Xr.length;Xr[--un]==0;)Xr.pop();return st.d=Xr,st.e=on,external?round(st,hn):st}function checkInt32(Mt,st,nn){if(Mt!==~~Mt||Mt<st||Mt>nn)throw Error(invalidArgument+Mt)}function digitsToString(Mt){var st,nn,rn,on=Mt.length-1,an="",sn=Mt[0];if(on>0){for(an+=sn,st=1;st<on;st++)rn=Mt[st]+"",nn=LOG_BASE-rn.length,nn&&(an+=getZeroString(nn)),an+=rn;sn=Mt[st],rn=sn+"",nn=LOG_BASE-rn.length,nn&&(an+=getZeroString(nn))}else if(sn===0)return"0";for(;sn%10===0;)sn/=10;return an+sn}var divide=function(){function Mt(rn,on){var an,sn=0,un=rn.length;for(rn=rn.slice();un--;)an=rn[un]*on+sn,rn[un]=an%BASE|0,sn=an/BASE|0;return sn&&rn.unshift(sn),rn}function st(rn,on,an,sn){var un,Xr;if(an!=sn)Xr=an>sn?1:-1;else for(un=Xr=0;un<an;un++)if(rn[un]!=on[un]){Xr=rn[un]>on[un]?1:-1;break}return Xr}function nn(rn,on,an){for(var sn=0;an--;)rn[an]-=sn,sn=rn[an]<on[an]?1:0,rn[an]=sn*BASE+rn[an]-on[an];for(;!rn[0]&&rn.length>1;)rn.shift()}return function(rn,on,an,sn){var un,Xr,to,uo,hn,fn,co,lo,fo,ho,mo,Uo,_d,tp,ep,np,rp,ip,op=rn.constructor,ap=rn.s==on.s?1:-1,sp=rn.d,up=on.d;if(!rn.s)return new op(rn);if(!on.s)throw Error(decimalError+"Division by zero");for(Xr=rn.e-on.e,rp=up.length,ep=sp.length,co=new op(ap),lo=co.d=[],to=0;up[to]==(sp[to]||0);)++to;if(up[to]>(sp[to]||0)&&--Xr,an==null?Uo=an=op.precision:sn?Uo=an+(getBase10Exponent(rn)-getBase10Exponent(on))+1:Uo=an,Uo<0)return new op(0);if(Uo=Uo/LOG_BASE+2|0,to=0,rp==1)for(uo=0,up=up[0],Uo++;(to<ep||uo)&&Uo--;to++)_d=uo*BASE+(sp[to]||0),lo[to]=_d/up|0,uo=_d%up|0;else{for(uo=BASE/(up[0]+1)|0,uo>1&&(up=Mt(up,uo),sp=Mt(sp,uo),rp=up.length,ep=sp.length),tp=rp,fo=sp.slice(0,rp),ho=fo.length;ho<rp;)fo[ho++]=0;ip=up.slice(),ip.unshift(0),np=up[0],up[1]>=BASE/2&&++np;do uo=0,un=st(up,fo,rp,ho),un<0?(mo=fo[0],rp!=ho&&(mo=mo*BASE+(fo[1]||0)),uo=mo/np|0,uo>1?(uo>=BASE&&(uo=BASE-1),hn=Mt(up,uo),fn=hn.length,ho=fo.length,un=st(hn,fo,fn,ho),un==1&&(uo--,nn(hn,rp<fn?ip:up,fn))):(uo==0&&(un=uo=1),hn=up.slice()),fn=hn.length,fn<ho&&hn.unshift(0),nn(fo,hn,ho),un==-1&&(ho=fo.length,un=st(up,fo,rp,ho),un<1&&(uo++,nn(fo,rp<ho?ip:up,ho))),ho=fo.length):un===0&&(uo++,fo=[0]),lo[to++]=uo,un&&fo[0]?fo[ho++]=sp[tp]||0:(fo=[sp[tp]],ho=1);while((tp++<ep||fo[0]!==void 0)&&Uo--)}return lo[0]||lo.shift(),co.e=Xr,round(co,sn?an+getBase10Exponent(co)+1:an)}}();function exp(Mt,st){var nn,rn,on,an,sn,un,Xr=0,to=0,uo=Mt.constructor,hn=uo.precision;if(getBase10Exponent(Mt)>16)throw Error(exponentOutOfRange+getBase10Exponent(Mt));if(!Mt.s)return new uo(ONE);for(st==null?(external=!1,un=hn):un=st,sn=new uo(.03125);Mt.abs().gte(.1);)Mt=Mt.times(sn),to+=5;for(rn=Math.log(mathpow(2,to))/Math.LN10*2+5|0,un+=rn,nn=on=an=new uo(ONE),uo.precision=un;;){if(on=round(on.times(Mt),un),nn=nn.times(++Xr),sn=an.plus(divide(on,nn,un)),digitsToString(sn.d).slice(0,un)===digitsToString(an.d).slice(0,un)){for(;to--;)an=round(an.times(an),un);return uo.precision=hn,st==null?(external=!0,round(an,hn)):an}an=sn}}function getBase10Exponent(Mt){for(var st=Mt.e*LOG_BASE,nn=Mt.d[0];nn>=10;nn/=10)st++;return st}function getLn10(Mt,st,nn){if(st>Mt.LN10.sd())throw external=!0,nn&&(Mt.precision=nn),Error(decimalError+"LN10 precision limit exceeded");return round(new Mt(Mt.LN10),st)}function getZeroString(Mt){for(var st="";Mt--;)st+="0";return st}function ln(Mt,st){var nn,rn,on,an,sn,un,Xr,to,uo,hn=1,fn=10,co=Mt,lo=co.d,fo=co.constructor,ho=fo.precision;if(co.s<1)throw Error(decimalError+(co.s?"NaN":"-Infinity"));if(co.eq(ONE))return new fo(0);if(st==null?(external=!1,to=ho):to=st,co.eq(10))return st==null&&(external=!0),getLn10(fo,to);if(to+=fn,fo.precision=to,nn=digitsToString(lo),rn=nn.charAt(0),an=getBase10Exponent(co),Math.abs(an)<15e14){for(;rn<7&&rn!=1||rn==1&&nn.charAt(1)>3;)co=co.times(Mt),nn=digitsToString(co.d),rn=nn.charAt(0),hn++;an=getBase10Exponent(co),rn>1?(co=new fo("0."+nn),an++):co=new fo(rn+"."+nn.slice(1))}else return Xr=getLn10(fo,to+2,ho).times(an+""),co=ln(new fo(rn+"."+nn.slice(1)),to-fn).plus(Xr),fo.precision=ho,st==null?(external=!0,round(co,ho)):co;for(un=sn=co=divide(co.minus(ONE),co.plus(ONE),to),uo=round(co.times(co),to),on=3;;){if(sn=round(sn.times(uo),to),Xr=un.plus(divide(sn,new fo(on),to)),digitsToString(Xr.d).slice(0,to)===digitsToString(un.d).slice(0,to))return un=un.times(2),an!==0&&(un=un.plus(getLn10(fo,to+2,ho).times(an+""))),un=divide(un,new fo(hn),to),fo.precision=ho,st==null?(external=!0,round(un,ho)):un;un=Xr,on+=2}}function parseDecimal(Mt,st){var nn,rn,on;for((nn=st.indexOf("."))>-1&&(st=st.replace(".","")),(rn=st.search(/e/i))>0?(nn<0&&(nn=rn),nn+=+st.slice(rn+1),st=st.substring(0,rn)):nn<0&&(nn=st.length),rn=0;st.charCodeAt(rn)===48;)++rn;for(on=st.length;st.charCodeAt(on-1)===48;)--on;if(st=st.slice(rn,on),st){if(on-=rn,nn=nn-rn-1,Mt.e=mathfloor(nn/LOG_BASE),Mt.d=[],rn=(nn+1)%LOG_BASE,nn<0&&(rn+=LOG_BASE),rn<on){for(rn&&Mt.d.push(+st.slice(0,rn)),on-=LOG_BASE;rn<on;)Mt.d.push(+st.slice(rn,rn+=LOG_BASE));st=st.slice(rn),rn=LOG_BASE-st.length}else rn-=on;for(;rn--;)st+="0";if(Mt.d.push(+st),external&&(Mt.e>MAX_E||Mt.e<-MAX_E))throw Error(exponentOutOfRange+nn)}else Mt.s=0,Mt.e=0,Mt.d=[0];return Mt}function round(Mt,st,nn){var rn,on,an,sn,un,Xr,to,uo,hn=Mt.d;for(sn=1,an=hn[0];an>=10;an/=10)sn++;if(rn=st-sn,rn<0)rn+=LOG_BASE,on=st,to=hn[uo=0];else{if(uo=Math.ceil((rn+1)/LOG_BASE),an=hn.length,uo>=an)return Mt;for(to=an=hn[uo],sn=1;an>=10;an/=10)sn++;rn%=LOG_BASE,on=rn-LOG_BASE+sn}if(nn!==void 0&&(an=mathpow(10,sn-on-1),un=to/an%10|0,Xr=st<0||hn[uo+1]!==void 0||to%an,Xr=nn<4?(un||Xr)&&(nn==0||nn==(Mt.s<0?3:2)):un>5||un==5&&(nn==4||Xr||nn==6&&(rn>0?on>0?to/mathpow(10,sn-on):0:hn[uo-1])%10&1||nn==(Mt.s<0?8:7))),st<1||!hn[0])return Xr?(an=getBase10Exponent(Mt),hn.length=1,st=st-an-1,hn[0]=mathpow(10,(LOG_BASE-st%LOG_BASE)%LOG_BASE),Mt.e=mathfloor(-st/LOG_BASE)||0):(hn.length=1,hn[0]=Mt.e=Mt.s=0),Mt;if(rn==0?(hn.length=uo,an=1,uo--):(hn.length=uo+1,an=mathpow(10,LOG_BASE-rn),hn[uo]=on>0?(to/mathpow(10,sn-on)%mathpow(10,on)|0)*an:0),Xr)for(;;)if(uo==0){(hn[0]+=an)==BASE&&(hn[0]=1,++Mt.e);break}else{if(hn[uo]+=an,hn[uo]!=BASE)break;hn[uo--]=0,an=1}for(rn=hn.length;hn[--rn]===0;)hn.pop();if(external&&(Mt.e>MAX_E||Mt.e<-MAX_E))throw Error(exponentOutOfRange+getBase10Exponent(Mt));return Mt}function subtract(Mt,st){var nn,rn,on,an,sn,un,Xr,to,uo,hn,fn=Mt.constructor,co=fn.precision;if(!Mt.s||!st.s)return st.s?st.s=-st.s:st=new fn(Mt),external?round(st,co):st;if(Xr=Mt.d,hn=st.d,rn=st.e,to=Mt.e,Xr=Xr.slice(),sn=to-rn,sn){for(uo=sn<0,uo?(nn=Xr,sn=-sn,un=hn.length):(nn=hn,rn=to,un=Xr.length),on=Math.max(Math.ceil(co/LOG_BASE),un)+2,sn>on&&(sn=on,nn.length=1),nn.reverse(),on=sn;on--;)nn.push(0);nn.reverse()}else{for(on=Xr.length,un=hn.length,uo=on<un,uo&&(un=on),on=0;on<un;on++)if(Xr[on]!=hn[on]){uo=Xr[on]<hn[on];break}sn=0}for(uo&&(nn=Xr,Xr=hn,hn=nn,st.s=-st.s),un=Xr.length,on=hn.length-un;on>0;--on)Xr[un++]=0;for(on=hn.length;on>sn;){if(Xr[--on]<hn[on]){for(an=on;an&&Xr[--an]===0;)Xr[an]=BASE-1;--Xr[an],Xr[on]+=BASE}Xr[on]-=hn[on]}for(;Xr[--un]===0;)Xr.pop();for(;Xr[0]===0;Xr.shift())--rn;return Xr[0]?(st.d=Xr,st.e=rn,external?round(st,co):st):new fn(0)}function toString(Mt,st,nn){var rn,on=getBase10Exponent(Mt),an=digitsToString(Mt.d),sn=an.length;return st?(nn&&(rn=nn-sn)>0?an=an.charAt(0)+"."+an.slice(1)+getZeroString(rn):sn>1&&(an=an.charAt(0)+"."+an.slice(1)),an=an+(on<0?"e":"e+")+on):on<0?(an="0."+getZeroString(-on-1)+an,nn&&(rn=nn-sn)>0&&(an+=getZeroString(rn))):on>=sn?(an+=getZeroString(on+1-sn),nn&&(rn=nn-on-1)>0&&(an=an+"."+getZeroString(rn))):((rn=on+1)<sn&&(an=an.slice(0,rn)+"."+an.slice(rn)),nn&&(rn=nn-sn)>0&&(on+1===sn&&(an+="."),an+=getZeroString(rn))),Mt.s<0?"-"+an:an}function truncate(Mt,st){if(Mt.length>st)return Mt.length=st,!0}function clone(Mt){var st,nn,rn;function on(an){var sn=this;if(!(sn instanceof on))return new on(an);if(sn.constructor=on,an instanceof on){sn.s=an.s,sn.e=an.e,sn.d=(an=an.d)?an.slice():an;return}if(typeof an=="number"){if(an*0!==0)throw Error(invalidArgument+an);if(an>0)sn.s=1;else if(an<0)an=-an,sn.s=-1;else{sn.s=0,sn.e=0,sn.d=[0];return}if(an===~~an&&an<1e7){sn.e=0,sn.d=[an];return}return parseDecimal(sn,an.toString())}else if(typeof an!="string")throw Error(invalidArgument+an);if(an.charCodeAt(0)===45?(an=an.slice(1),sn.s=-1):sn.s=1,isDecimal.test(an))parseDecimal(sn,an);else throw Error(invalidArgument+an)}if(on.prototype=P,on.ROUND_UP=0,on.ROUND_DOWN=1,on.ROUND_CEIL=2,on.ROUND_FLOOR=3,on.ROUND_HALF_UP=4,on.ROUND_HALF_DOWN=5,on.ROUND_HALF_EVEN=6,on.ROUND_HALF_CEIL=7,on.ROUND_HALF_FLOOR=8,on.clone=clone,on.config=on.set=config,Mt===void 0&&(Mt={}),Mt)for(rn=["precision","rounding","toExpNeg","toExpPos","LN10"],st=0;st<rn.length;)Mt.hasOwnProperty(nn=rn[st++])||(Mt[nn]=this[nn]);return on.config(Mt),on}function config(Mt){if(!Mt||typeof Mt!="object")throw Error(decimalError+"Object expected");var st,nn,rn,on=["precision",1,MAX_DIGITS,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(st=0;st<on.length;st+=3)if((rn=Mt[nn=on[st]])!==void 0)if(mathfloor(rn)===rn&&rn>=on[st+1]&&rn<=on[st+2])this[nn]=rn;else throw Error(invalidArgument+nn+": "+rn);if((rn=Mt[nn="LN10"])!==void 0)if(rn==Math.LN10)this[nn]=new this(rn);else throw Error(invalidArgument+nn+": "+rn);return this}var Decimal=clone(defaults);ONE=new Decimal(1);const Decimal$1=Decimal;function _toConsumableArray$a(Mt){return _arrayWithoutHoles$a(Mt)||_iterableToArray$b(Mt)||_unsupportedIterableToArray$g(Mt)||_nonIterableSpread$a()}function _nonIterableSpread$a(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$g(Mt,st){if(Mt){if(typeof Mt=="string")return _arrayLikeToArray$g(Mt,st);var nn=Object.prototype.toString.call(Mt).slice(8,-1);if(nn==="Object"&&Mt.constructor&&(nn=Mt.constructor.name),nn==="Map"||nn==="Set")return Array.from(Mt);if(nn==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(nn))return _arrayLikeToArray$g(Mt,st)}}function _iterableToArray$b(Mt){if(typeof Symbol<"u"&&Symbol.iterator in Object(Mt))return Array.from(Mt)}function _arrayWithoutHoles$a(Mt){if(Array.isArray(Mt))return _arrayLikeToArray$g(Mt)}function _arrayLikeToArray$g(Mt,st){(st==null||st>Mt.length)&&(st=Mt.length);for(var nn=0,rn=new Array(st);nn<st;nn++)rn[nn]=Mt[nn];return rn}var identity$1=function Mt(st){return st},PLACE_HOLDER={"@@functional/placeholder":!0},isPlaceHolder=function Mt(st){return st===PLACE_HOLDER},curry0=function Mt(st){return function nn(){return arguments.length===0||arguments.length===1&&isPlaceHolder(arguments.length<=0?void 0:arguments[0])?nn:st.apply(void 0,arguments)}},curryN=function Mt(st,nn){return st===1?nn:curry0(function(){for(var rn=arguments.length,on=new Array(rn),an=0;an<rn;an++)on[an]=arguments[an];var sn=on.filter(function(un){return un!==PLACE_HOLDER}).length;return sn>=st?nn.apply(void 0,on):Mt(st-sn,curry0(function(){for(var un=arguments.length,Xr=new Array(un),to=0;to<un;to++)Xr[to]=arguments[to];var uo=on.map(function(hn){return isPlaceHolder(hn)?Xr.shift():hn});return nn.apply(void 0,_toConsumableArray$a(uo).concat(Xr))}))})},curry=function Mt(st){return curryN(st.length,st)},range$2=function Mt(st,nn){for(var rn=[],on=st;on<nn;++on)rn[on-st]=on;return rn},map=curry(function(Mt,st){return Array.isArray(st)?st.map(Mt):Object.keys(st).map(function(nn){return st[nn]}).map(Mt)}),compose=function Mt(){for(var st=arguments.length,nn=new Array(st),rn=0;rn<st;rn++)nn[rn]=arguments[rn];if(!nn.length)return identity$1;var on=nn.reverse(),an=on[0],sn=on.slice(1);return function(){return sn.reduce(function(un,Xr){return Xr(un)},an.apply(void 0,arguments))}},reverse=function Mt(st){return Array.isArray(st)?st.reverse():st.split("").reverse.join("")},memoize=function Mt(st){var nn=null,rn=null;return function(){for(var on=arguments.length,an=new Array(on),sn=0;sn<on;sn++)an[sn]=arguments[sn];return nn&&an.every(function(un,Xr){return un===nn[Xr]})||(nn=an,rn=st.apply(void 0,an)),rn}};function getDigitCount(Mt){var st;return Mt===0?st=1:st=Math.floor(new Decimal$1(Mt).abs().log(10).toNumber())+1,st}function rangeStep(Mt,st,nn){for(var rn=new Decimal$1(Mt),on=0,an=[];rn.lt(st)&&on<1e5;)an.push(rn.toNumber()),rn=rn.add(nn),on++;return an}var interpolateNumber=curry(function(Mt,st,nn){var rn=+Mt,on=+st;return rn+nn*(on-rn)}),uninterpolateNumber=curry(function(Mt,st,nn){var rn=st-+Mt;return rn=rn||1/0,(nn-Mt)/rn}),uninterpolateTruncation=curry(function(Mt,st,nn){var rn=st-+Mt;return rn=rn||1/0,Math.max(0,Math.min(1,(nn-Mt)/rn))});const Arithmetic={rangeStep,getDigitCount,interpolateNumber,uninterpolateNumber,uninterpolateTruncation};function _toConsumableArray$9(Mt){return _arrayWithoutHoles$9(Mt)||_iterableToArray$a(Mt)||_unsupportedIterableToArray$f(Mt)||_nonIterableSpread$9()}function _nonIterableSpread$9(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _iterableToArray$a(Mt){if(typeof Symbol<"u"&&Symbol.iterator in Object(Mt))return Array.from(Mt)}function _arrayWithoutHoles$9(Mt){if(Array.isArray(Mt))return _arrayLikeToArray$f(Mt)}function _slicedToArray$8(Mt,st){return _arrayWithHoles$9(Mt)||_iterableToArrayLimit$8(Mt,st)||_unsupportedIterableToArray$f(Mt,st)||_nonIterableRest$9()}function _nonIterableRest$9(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$f(Mt,st){if(Mt){if(typeof Mt=="string")return _arrayLikeToArray$f(Mt,st);var nn=Object.prototype.toString.call(Mt).slice(8,-1);if(nn==="Object"&&Mt.constructor&&(nn=Mt.constructor.name),nn==="Map"||nn==="Set")return Array.from(Mt);if(nn==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(nn))return _arrayLikeToArray$f(Mt,st)}}function _arrayLikeToArray$f(Mt,st){(st==null||st>Mt.length)&&(st=Mt.length);for(var nn=0,rn=new Array(st);nn<st;nn++)rn[nn]=Mt[nn];return rn}function _iterableToArrayLimit$8(Mt,st){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(Mt)))){var nn=[],rn=!0,on=!1,an=void 0;try{for(var sn=Mt[Symbol.iterator](),un;!(rn=(un=sn.next()).done)&&(nn.push(un.value),!(st&&nn.length===st));rn=!0);}catch(Xr){on=!0,an=Xr}finally{try{!rn&&sn.return!=null&&sn.return()}finally{if(on)throw an}}return nn}}function _arrayWithHoles$9(Mt){if(Array.isArray(Mt))return Mt}function getValidInterval(Mt){var st=_slicedToArray$8(Mt,2),nn=st[0],rn=st[1],on=nn,an=rn;return nn>rn&&(on=rn,an=nn),[on,an]}function getFormatStep(Mt,st,nn){if(Mt.lte(0))return new Decimal$1(0);var rn=Arithmetic.getDigitCount(Mt.toNumber()),on=new Decimal$1(10).pow(rn),an=Mt.div(on),sn=rn!==1?.05:.1,un=new Decimal$1(Math.ceil(an.div(sn).toNumber())).add(nn).mul(sn),Xr=un.mul(on);return st?Xr:new Decimal$1(Math.ceil(Xr))}function getTickOfSingleValue(Mt,st,nn){var rn=1,on=new Decimal$1(Mt);if(!on.isint()&&nn){var an=Math.abs(Mt);an<1?(rn=new Decimal$1(10).pow(Arithmetic.getDigitCount(Mt)-1),on=new Decimal$1(Math.floor(on.div(rn).toNumber())).mul(rn)):an>1&&(on=new Decimal$1(Math.floor(Mt)))}else Mt===0?on=new Decimal$1(Math.floor((st-1)/2)):nn||(on=new Decimal$1(Math.floor(Mt)));var sn=Math.floor((st-1)/2),un=compose(map(function(Xr){return on.add(new Decimal$1(Xr-sn).mul(rn)).toNumber()}),range$2);return un(0,st)}function calculateStep(Mt,st,nn,rn){var on=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((st-Mt)/(nn-1)))return{step:new Decimal$1(0),tickMin:new Decimal$1(0),tickMax:new Decimal$1(0)};var an=getFormatStep(new Decimal$1(st).sub(Mt).div(nn-1),rn,on),sn;Mt<=0&&st>=0?sn=new Decimal$1(0):(sn=new Decimal$1(Mt).add(st).div(2),sn=sn.sub(new Decimal$1(sn).mod(an)));var un=Math.ceil(sn.sub(Mt).div(an).toNumber()),Xr=Math.ceil(new Decimal$1(st).sub(sn).div(an).toNumber()),to=un+Xr+1;return to>nn?calculateStep(Mt,st,nn,rn,on+1):(to<nn&&(Xr=st>0?Xr+(nn-to):Xr,un=st>0?un:un+(nn-to)),{step:an,tickMin:sn.sub(new Decimal$1(un).mul(an)),tickMax:sn.add(new Decimal$1(Xr).mul(an))})}function getNiceTickValuesFn(Mt){var st=_slicedToArray$8(Mt,2),nn=st[0],rn=st[1],on=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,an=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,sn=Math.max(on,2),un=getValidInterval([nn,rn]),Xr=_slicedToArray$8(un,2),to=Xr[0],uo=Xr[1];if(to===-1/0||uo===1/0){var hn=uo===1/0?[to].concat(_toConsumableArray$9(range$2(0,on-1).map(function(){return 1/0}))):[].concat(_toConsumableArray$9(range$2(0,on-1).map(function(){return-1/0})),[uo]);return nn>rn?reverse(hn):hn}if(to===uo)return getTickOfSingleValue(to,on,an);var fn=calculateStep(to,uo,sn,an),co=fn.step,lo=fn.tickMin,fo=fn.tickMax,ho=Arithmetic.rangeStep(lo,fo.add(new Decimal$1(.1).mul(co)),co);return nn>rn?reverse(ho):ho}function getTickValuesFixedDomainFn(Mt,st){var nn=_slicedToArray$8(Mt,2),rn=nn[0],on=nn[1],an=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,sn=getValidInterval([rn,on]),un=_slicedToArray$8(sn,2),Xr=un[0],to=un[1];if(Xr===-1/0||to===1/0)return[rn,on];if(Xr===to)return[Xr];var uo=Math.max(st,2),hn=getFormatStep(new Decimal$1(to).sub(Xr).div(uo-1),an,0),fn=[].concat(_toConsumableArray$9(Arithmetic.rangeStep(new Decimal$1(Xr),new Decimal$1(to).sub(new Decimal$1(.99).mul(hn)),hn)),[to]);return rn>on?reverse(fn):fn}var getNiceTickValues=memoize(getNiceTickValuesFn),getTickValuesFixedDomain=memoize(getTickValuesFixedDomainFn),prefix="Invariant failed";function invariant(Mt,st){throw new Error(prefix)}var _excluded$d=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function _typeof$z(Mt){"@babel/helpers - typeof";return _typeof$z=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(st){return typeof st}:function(st){return st&&typeof Symbol=="function"&&st.constructor===Symbol&&st!==Symbol.prototype?"symbol":typeof st},_typeof$z(Mt)}function _extends$o(){return _extends$o=Object.assign?Object.assign.bind():function(Mt){for(var st=1;st<arguments.length;st++){var nn=arguments[st];for(var rn in nn)Object.prototype.hasOwnProperty.call(nn,rn)&&(Mt[rn]=nn[rn])}return Mt},_extends$o.apply(this,arguments)}function _slicedToArray$7(Mt,st){return _arrayWithHoles$8(Mt)||_iterableToArrayLimit$7(Mt,st)||_unsupportedIterableToArray$e(Mt,st)||_nonIterableRest$8()}function _nonIterableRest$8(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$e(Mt,st){if(Mt){if(typeof Mt=="string")return _arrayLikeToArray$e(Mt,st);var nn=Object.prototype.toString.call(Mt).slice(8,-1);if(nn==="Object"&&Mt.constructor&&(nn=Mt.constructor.name),nn==="Map"||nn==="Set")return Array.from(Mt);if(nn==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(nn))return _arrayLikeToArray$e(Mt,st)}}function _arrayLikeToArray$e(Mt,st){(st==null||st>Mt.length)&&(st=Mt.length);for(var nn=0,rn=new Array(st);nn<st;nn++)rn[nn]=Mt[nn];return rn}function _iterableToArrayLimit$7(Mt,st){var nn=Mt==null?null:typeof Symbol<"u"&&Mt[Symbol.iterator]||Mt["@@iterator"];if(nn!=null){var rn,on,an,sn,un=[],Xr=!0,to=!1;try{if(an=(nn=nn.call(Mt)).next,st!==0)for(;!(Xr=(rn=an.call(nn)).done)&&(un.push(rn.value),un.length!==st);Xr=!0);}catch(uo){to=!0,on=uo}finally{try{if(!Xr&&nn.return!=null&&(sn=nn.return(),Object(sn)!==sn))return}finally{if(to)throw on}}return un}}function _arrayWithHoles$8(Mt){if(Array.isArray(Mt))return Mt}function _objectWithoutProperties$d(Mt,st){if(Mt==null)return{};var nn=_objectWithoutPropertiesLoose$d(Mt,st),rn,on;if(Object.getOwnPropertySymbols){var an=Object.getOwnPropertySymbols(Mt);for(on=0;on<an.length;on++)rn=an[on],!(st.indexOf(rn)>=0)&&Object.prototype.propertyIsEnumerable.call(Mt,rn)&&(nn[rn]=Mt[rn])}return nn}function _objectWithoutPropertiesLoose$d(Mt,st){if(Mt==null)return{};var nn={};for(var rn in Mt)if(Object.prototype.hasOwnProperty.call(Mt,rn)){if(st.indexOf(rn)>=0)continue;nn[rn]=Mt[rn]}return nn}function _classCallCheck$g(Mt,st){if(!(Mt instanceof st))throw new TypeError("Cannot call a class as a function")}function _defineProperties$g(Mt,st){for(var nn=0;nn<st.length;nn++){var rn=st[nn];rn.enumerable=rn.enumerable||!1,rn.configurable=!0,"value"in rn&&(rn.writable=!0),Object.defineProperty(Mt,_toPropertyKey$y(rn.key),rn)}}function _createClass$g(Mt,st,nn){return st&&_defineProperties$g(Mt.prototype,st),Object.defineProperty(Mt,"prototype",{writable:!1}),Mt}function _callSuper$d(Mt,st,nn){return st=_getPrototypeOf$e(st),_possibleConstructorReturn$e(Mt,_isNativeReflectConstruct$e()?Reflect.construct(st,nn||[],_getPrototypeOf$e(Mt).constructor):st.apply(Mt,nn))}function _possibleConstructorReturn$e(Mt,st){if(st&&(_typeof$z(st)==="object"||typeof st=="function"))return st;if(st!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$e(Mt)}function _assertThisInitialized$e(Mt){if(Mt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Mt}function _isNativeReflectConstruct$e(){try{var Mt=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_isNativeReflectConstruct$e=function(){return!!Mt})()}function _getPrototypeOf$e(Mt){return _getPrototypeOf$e=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(nn){return nn.__proto__||Object.getPrototypeOf(nn)},_getPrototypeOf$e(Mt)}function _inherits$e(Mt,st){if(typeof st!="function"&&st!==null)throw new TypeError("Super expression must either be null or a function");Mt.prototype=Object.create(st&&st.prototype,{constructor:{value:Mt,writable:!0,configurable:!0}}),Object.defineProperty(Mt,"prototype",{writable:!1}),st&&_setPrototypeOf$e(Mt,st)}function _setPrototypeOf$e(Mt,st){return _setPrototypeOf$e=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(rn,on){return rn.__proto__=on,rn},_setPrototypeOf$e(Mt,st)}function _defineProperty$y(Mt,st,nn){return st=_toPropertyKey$y(st),st in Mt?Object.defineProperty(Mt,st,{value:nn,enumerable:!0,configurable:!0,writable:!0}):Mt[st]=nn,Mt}function _toPropertyKey$y(Mt){var st=_toPrimitive$y(Mt,"string");return _typeof$z(st)=="symbol"?st:st+""}function _toPrimitive$y(Mt,st){if(_typeof$z(Mt)!="object"||!Mt)return Mt;var nn=Mt[Symbol.toPrimitive];if(nn!==void 0){var rn=nn.call(Mt,st||"default");if(_typeof$z(rn)!="object")return rn;throw new TypeError("@@toPrimitive must return a primitive value.")}return(st==="string"?String:Number)(Mt)}var ErrorBar=function(Mt){function st(){return _classCallCheck$g(this,st),_callSuper$d(this,st,arguments)}return _inherits$e(st,Mt),_createClass$g(st,[{key:"render",value:function(){var rn=this.props,on=rn.offset,an=rn.layout,sn=rn.width,un=rn.dataKey,Xr=rn.data,to=rn.dataPointFormatter,uo=rn.xAxis,hn=rn.yAxis,fn=_objectWithoutProperties$d(rn,_excluded$d),co=filterProps(fn,!1);this.props.direction==="x"&&uo.type!=="number"&&invariant();var lo=Xr.map(function(fo){var ho=to(fo,un),mo=ho.x,Uo=ho.y,_d=ho.value,tp=ho.errorVal;if(!tp)return null;var ep=[],np,rp;if(Array.isArray(tp)){var ip=_slicedToArray$7(tp,2);np=ip[0],rp=ip[1]}else np=rp=tp;if(an==="vertical"){var op=uo.scale,ap=Uo+on,sp=ap+sn,up=ap-sn,pp=op(_d-np),lp=op(_d+rp);ep.push({x1:lp,y1:sp,x2:lp,y2:up}),ep.push({x1:pp,y1:ap,x2:lp,y2:ap}),ep.push({x1:pp,y1:sp,x2:pp,y2:up})}else if(an==="horizontal"){var dp=hn.scale,cp=mo+on,fp=cp-sn,gp=cp+sn,mp=dp(_d-np),xp=dp(_d+rp);ep.push({x1:fp,y1:xp,x2:gp,y2:xp}),ep.push({x1:cp,y1:mp,x2:cp,y2:xp}),ep.push({x1:fp,y1:mp,x2:gp,y2:mp})}return React.createElement(Layer,_extends$o({className:"recharts-errorBar",key:"bar-".concat(ep.map(function(_p){return"".concat(_p.x1,"-").concat(_p.x2,"-").concat(_p.y1,"-").concat(_p.y2)}))},co),ep.map(function(_p){return React.createElement("line",_extends$o({},_p,{key:"line-".concat(_p.x1,"-").concat(_p.x2,"-").concat(_p.y1,"-").concat(_p.y2)}))}))});return React.createElement(Layer,{className:"recharts-errorBars"},lo)}}])}(React.Component);_defineProperty$y(ErrorBar,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});_defineProperty$y(ErrorBar,"displayName","ErrorBar");function _typeof$y(Mt){"@babel/helpers - typeof";return _typeof$y=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(st){return typeof st}:function(st){return st&&typeof Symbol=="function"&&st.constructor===Symbol&&st!==Symbol.prototype?"symbol":typeof st},_typeof$y(Mt)}function ownKeys$u(Mt,st){var nn=Object.keys(Mt);if(Object.getOwnPropertySymbols){var rn=Object.getOwnPropertySymbols(Mt);st&&(rn=rn.filter(function(on){return Object.getOwnPropertyDescriptor(Mt,on).enumerable})),nn.push.apply(nn,rn)}return nn}function _objectSpread$u(Mt){for(var st=1;st<arguments.length;st++){var nn=arguments[st]!=null?arguments[st]:{};st%2?ownKeys$u(Object(nn),!0).forEach(function(rn){_defineProperty$x(Mt,rn,nn[rn])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Mt,Object.getOwnPropertyDescriptors(nn)):ownKeys$u(Object(nn)).forEach(function(rn){Object.defineProperty(Mt,rn,Object.getOwnPropertyDescriptor(nn,rn))})}return Mt}function _defineProperty$x(Mt,st,nn){return st=_toPropertyKey$x(st),st in Mt?Object.defineProperty(Mt,st,{value:nn,enumerable:!0,configurable:!0,writable:!0}):Mt[st]=nn,Mt}function _toPropertyKey$x(Mt){var st=_toPrimitive$x(Mt,"string");return _typeof$y(st)=="symbol"?st:st+""}function _toPrimitive$x(Mt,st){if(_typeof$y(Mt)!="object"||!Mt)return Mt;var nn=Mt[Symbol.toPrimitive];if(nn!==void 0){var rn=nn.call(Mt,st||"default");if(_typeof$y(rn)!="object")return rn;throw new TypeError("@@toPrimitive must return a primitive value.")}return(st==="string"?String:Number)(Mt)}var getLegendProps=function Mt(st){var nn=st.children,rn=st.formattedGraphicalItems,on=st.legendWidth,an=st.legendContent,sn=findChildByType(nn,Legend);if(!sn)return null;var un=Legend.defaultProps,Xr=un!==void 0?_objectSpread$u(_objectSpread$u({},un),sn.props):{},to;return sn.props&&sn.props.payload?to=sn.props&&sn.props.payload:an==="children"?to=(rn||[]).reduce(function(uo,hn){var fn=hn.item,co=hn.props,lo=co.sectors||co.data||[];return uo.concat(lo.map(function(fo){return{type:sn.props.iconType||fn.props.legendType,value:fo.name,color:fo.fill,payload:fo}}))},[]):to=(rn||[]).map(function(uo){var hn=uo.item,fn=hn.type.defaultProps,co=fn!==void 0?_objectSpread$u(_objectSpread$u({},fn),hn.props):{},lo=co.dataKey,fo=co.name,ho=co.legendType,mo=co.hide;return{inactive:mo,dataKey:lo,type:Xr.iconType||ho||"square",color:getMainColorOfGraphicItem(hn),value:fo||lo,payload:co}}),_objectSpread$u(_objectSpread$u(_objectSpread$u({},Xr),Legend.getWithHeight(sn,on)),{},{payload:to,item:sn})};function _typeof$x(Mt){"@babel/helpers - typeof";return _typeof$x=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(st){return typeof st}:function(st){return st&&typeof Symbol=="function"&&st.constructor===Symbol&&st!==Symbol.prototype?"symbol":typeof st},_typeof$x(Mt)}function _toConsumableArray$8(Mt){return _arrayWithoutHoles$8(Mt)||_iterableToArray$9(Mt)||_unsupportedIterableToArray$d(Mt)||_nonIterableSpread$8()}function _nonIterableSpread$8(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$d(Mt,st){if(Mt){if(typeof Mt=="string")return _arrayLikeToArray$d(Mt,st);var nn=Object.prototype.toString.call(Mt).slice(8,-1);if(nn==="Object"&&Mt.constructor&&(nn=Mt.constructor.name),nn==="Map"||nn==="Set")return Array.from(Mt);if(nn==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(nn))return _arrayLikeToArray$d(Mt,st)}}function _iterableToArray$9(Mt){if(typeof Symbol<"u"&&Mt[Symbol.iterator]!=null||Mt["@@iterator"]!=null)return Array.from(Mt)}function _arrayWithoutHoles$8(Mt){if(Array.isArray(Mt))return _arrayLikeToArray$d(Mt)}function _arrayLikeToArray$d(Mt,st){(st==null||st>Mt.length)&&(st=Mt.length);for(var nn=0,rn=new Array(st);nn<st;nn++)rn[nn]=Mt[nn];return rn}function ownKeys$t(Mt,st){var nn=Object.keys(Mt);if(Object.getOwnPropertySymbols){var rn=Object.getOwnPropertySymbols(Mt);st&&(rn=rn.filter(function(on){return Object.getOwnPropertyDescriptor(Mt,on).enumerable})),nn.push.apply(nn,rn)}return nn}function _objectSpread$t(Mt){for(var st=1;st<arguments.length;st++){var nn=arguments[st]!=null?arguments[st]:{};st%2?ownKeys$t(Object(nn),!0).forEach(function(rn){_defineProperty$w(Mt,rn,nn[rn])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Mt,Object.getOwnPropertyDescriptors(nn)):ownKeys$t(Object(nn)).forEach(function(rn){Object.defineProperty(Mt,rn,Object.getOwnPropertyDescriptor(nn,rn))})}return Mt}function _defineProperty$w(Mt,st,nn){return st=_toPropertyKey$w(st),st in Mt?Object.defineProperty(Mt,st,{value:nn,enumerable:!0,configurable:!0,writable:!0}):Mt[st]=nn,Mt}function _toPropertyKey$w(Mt){var st=_toPrimitive$w(Mt,"string");return _typeof$x(st)=="symbol"?st:st+""}function _toPrimitive$w(Mt,st){if(_typeof$x(Mt)!="object"||!Mt)return Mt;var nn=Mt[Symbol.toPrimitive];if(nn!==void 0){var rn=nn.call(Mt,st||"default");if(_typeof$x(rn)!="object")return rn;throw new TypeError("@@toPrimitive must return a primitive value.")}return(st==="string"?String:Number)(Mt)}function getValueByDataKey(Mt,st,nn){return isNil$1(Mt)||isNil$1(st)?nn:isNumOrStr(st)?get$2(Mt,st,nn):isFunction$3(st)?st(Mt):nn}function getDomainOfDataByKey(Mt,st,nn,rn){var on=flatMap$1(Mt,function(un){return getValueByDataKey(un,st)});if(nn==="number"){var an=on.filter(function(un){return isNumber(un)||parseFloat(un)});return an.length?[min$1(an),max$1(an)]:[1/0,-1/0]}var sn=rn?on.filter(function(un){return!isNil$1(un)}):on;return sn.map(function(un){return isNumOrStr(un)||un instanceof Date?un:""})}var calculateActiveTickIndex=function Mt(st){var nn,rn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],on=arguments.length>2?arguments[2]:void 0,an=arguments.length>3?arguments[3]:void 0,sn=-1,un=(nn=rn==null?void 0:rn.length)!==null&&nn!==void 0?nn:0;if(un<=1)return 0;if(an&&an.axisType==="angleAxis"&&Math.abs(Math.abs(an.range[1]-an.range[0])-360)<=1e-6)for(var Xr=an.range,to=0;to<un;to++){var uo=to>0?on[to-1].coordinate:on[un-1].coordinate,hn=on[to].coordinate,fn=to>=un-1?on[0].coordinate:on[to+1].coordinate,co=void 0;if(mathSign(hn-uo)!==mathSign(fn-hn)){var lo=[];if(mathSign(fn-hn)===mathSign(Xr[1]-Xr[0])){co=fn;var fo=hn+Xr[1]-Xr[0];lo[0]=Math.min(fo,(fo+uo)/2),lo[1]=Math.max(fo,(fo+uo)/2)}else{co=uo;var ho=fn+Xr[1]-Xr[0];lo[0]=Math.min(hn,(ho+hn)/2),lo[1]=Math.max(hn,(ho+hn)/2)}var mo=[Math.min(hn,(co+hn)/2),Math.max(hn,(co+hn)/2)];if(st>mo[0]&&st<=mo[1]||st>=lo[0]&&st<=lo[1]){sn=on[to].index;break}}else{var Uo=Math.min(uo,fn),_d=Math.max(uo,fn);if(st>(Uo+hn)/2&&st<=(_d+hn)/2){sn=on[to].index;break}}}else for(var tp=0;tp<un;tp++)if(tp===0&&st<=(rn[tp].coordinate+rn[tp+1].coordinate)/2||tp>0&&tp<un-1&&st>(rn[tp].coordinate+rn[tp-1].coordinate)/2&&st<=(rn[tp].coordinate+rn[tp+1].coordinate)/2||tp===un-1&&st>(rn[tp].coordinate+rn[tp-1].coordinate)/2){sn=rn[tp].index;break}return sn},getMainColorOfGraphicItem=function Mt(st){var nn,rn=st,on=rn.type.displayName,an=(nn=st.type)!==null&&nn!==void 0&&nn.defaultProps?_objectSpread$t(_objectSpread$t({},st.type.defaultProps),st.props):st.props,sn=an.stroke,un=an.fill,Xr;switch(on){case"Line":Xr=sn;break;case"Area":case"Radar":Xr=sn&&sn!=="none"?sn:un;break;default:Xr=un;break}return Xr},getBarSizeList=function Mt(st){var nn=st.barSize,rn=st.totalSize,on=st.stackGroups,an=on===void 0?{}:on;if(!an)return{};for(var sn={},un=Object.keys(an),Xr=0,to=un.length;Xr<to;Xr++)for(var uo=an[un[Xr]].stackGroups,hn=Object.keys(uo),fn=0,co=hn.length;fn<co;fn++){var lo=uo[hn[fn]],fo=lo.items,ho=lo.cateAxisId,mo=fo.filter(function(rp){return getDisplayName(rp.type).indexOf("Bar")>=0});if(mo&&mo.length){var Uo=mo[0].type.defaultProps,_d=Uo!==void 0?_objectSpread$t(_objectSpread$t({},Uo),mo[0].props):mo[0].props,tp=_d.barSize,ep=_d[ho];sn[ep]||(sn[ep]=[]);var np=isNil$1(tp)?nn:tp;sn[ep].push({item:mo[0],stackList:mo.slice(1),barSize:isNil$1(np)?void 0:getPercentValue(np,rn,0)})}}return sn},getBarPosition=function Mt(st){var nn=st.barGap,rn=st.barCategoryGap,on=st.bandSize,an=st.sizeList,sn=an===void 0?[]:an,un=st.maxBarSize,Xr=sn.length;if(Xr<1)return null;var to=getPercentValue(nn,on,0,!0),uo,hn=[];if(sn[0].barSize===+sn[0].barSize){var fn=!1,co=on/Xr,lo=sn.reduce(function(tp,ep){return tp+ep.barSize||0},0);lo+=(Xr-1)*to,lo>=on&&(lo-=(Xr-1)*to,to=0),lo>=on&&co>0&&(fn=!0,co*=.9,lo=Xr*co);var fo=(on-lo)/2>>0,ho={offset:fo-to,size:0};uo=sn.reduce(function(tp,ep){var np={item:ep.item,position:{offset:ho.offset+ho.size+to,size:fn?co:ep.barSize}},rp=[].concat(_toConsumableArray$8(tp),[np]);return ho=rp[rp.length-1].position,ep.stackList&&ep.stackList.length&&ep.stackList.forEach(function(ip){rp.push({item:ip,position:ho})}),rp},hn)}else{var mo=getPercentValue(rn,on,0,!0);on-2*mo-(Xr-1)*to<=0&&(to=0);var Uo=(on-2*mo-(Xr-1)*to)/Xr;Uo>1&&(Uo>>=0);var _d=un===+un?Math.min(Uo,un):Uo;uo=sn.reduce(function(tp,ep,np){var rp=[].concat(_toConsumableArray$8(tp),[{item:ep.item,position:{offset:mo+(Uo+to)*np+(Uo-_d)/2,size:_d}}]);return ep.stackList&&ep.stackList.length&&ep.stackList.forEach(function(ip){rp.push({item:ip,position:rp[rp.length-1].position})}),rp},hn)}return uo},appendOffsetOfLegend=function Mt(st,nn,rn,on){var an=rn.children,sn=rn.width,un=rn.margin,Xr=sn-(un.left||0)-(un.right||0),to=getLegendProps({children:an,legendWidth:Xr});if(to){var uo=on||{},hn=uo.width,fn=uo.height,co=to.align,lo=to.verticalAlign,fo=to.layout;if((fo==="vertical"||fo==="horizontal"&&lo==="middle")&&co!=="center"&&isNumber(st[co]))return _objectSpread$t(_objectSpread$t({},st),{},_defineProperty$w({},co,st[co]+(hn||0)));if((fo==="horizontal"||fo==="vertical"&&co==="center")&&lo!=="middle"&&isNumber(st[lo]))return _objectSpread$t(_objectSpread$t({},st),{},_defineProperty$w({},lo,st[lo]+(fn||0)))}return st},isErrorBarRelevantForAxis=function Mt(st,nn,rn){return isNil$1(nn)?!0:st==="horizontal"?nn==="yAxis":st==="vertical"||rn==="x"?nn==="xAxis":rn==="y"?nn==="yAxis":!0},getDomainOfErrorBars=function Mt(st,nn,rn,on,an){var sn=nn.props.children,un=findAllByType(sn,ErrorBar).filter(function(to){return isErrorBarRelevantForAxis(on,an,to.props.direction)});if(un&&un.length){var Xr=un.map(function(to){return to.props.dataKey});return st.reduce(function(to,uo){var hn=getValueByDataKey(uo,rn);if(isNil$1(hn))return to;var fn=Array.isArray(hn)?[min$1(hn),max$1(hn)]:[hn,hn],co=Xr.reduce(function(lo,fo){var ho=getValueByDataKey(uo,fo,0),mo=fn[0]-Math.abs(Array.isArray(ho)?ho[0]:ho),Uo=fn[1]+Math.abs(Array.isArray(ho)?ho[1]:ho);return[Math.min(mo,lo[0]),Math.max(Uo,lo[1])]},[1/0,-1/0]);return[Math.min(co[0],to[0]),Math.max(co[1],to[1])]},[1/0,-1/0])}return null},parseErrorBarsOfAxis=function Mt(st,nn,rn,on,an){var sn=nn.map(function(un){return getDomainOfErrorBars(st,un,rn,an,on)}).filter(function(un){return!isNil$1(un)});return sn&&sn.length?sn.reduce(function(un,Xr){return[Math.min(un[0],Xr[0]),Math.max(un[1],Xr[1])]},[1/0,-1/0]):null},getDomainOfItemsWithSameAxis=function Mt(st,nn,rn,on,an){var sn=nn.map(function(Xr){var to=Xr.props.dataKey;return rn==="number"&&to&&getDomainOfErrorBars(st,Xr,to,on)||getDomainOfDataByKey(st,to,rn,an)});if(rn==="number")return sn.reduce(function(Xr,to){return[Math.min(Xr[0],to[0]),Math.max(Xr[1],to[1])]},[1/0,-1/0]);var un={};return sn.reduce(function(Xr,to){for(var uo=0,hn=to.length;uo<hn;uo++)un[to[uo]]||(un[to[uo]]=!0,Xr.push(to[uo]));return Xr},[])},isCategoricalAxis=function Mt(st,nn){return st==="horizontal"&&nn==="xAxis"||st==="vertical"&&nn==="yAxis"||st==="centric"&&nn==="angleAxis"||st==="radial"&&nn==="radiusAxis"},getCoordinatesOfGrid=function Mt(st,nn,rn,on){if(on)return st.map(function(Xr){return Xr.coordinate});var an,sn,un=st.map(function(Xr){return Xr.coordinate===nn&&(an=!0),Xr.coordinate===rn&&(sn=!0),Xr.coordinate});return an||un.push(nn),sn||un.push(rn),un},getTicksOfAxis=function Mt(st,nn,rn){if(!st)return null;var on=st.scale,an=st.duplicateDomain,sn=st.type,un=st.range,Xr=st.realScaleType==="scaleBand"?on.bandwidth()/2:2,to=(nn||rn)&&sn==="category"&&on.bandwidth?on.bandwidth()/Xr:0;if(to=st.axisType==="angleAxis"&&(un==null?void 0:un.length)>=2?mathSign(un[0]-un[1])*2*to:to,nn&&(st.ticks||st.niceTicks)){var uo=(st.ticks||st.niceTicks).map(function(hn){var fn=an?an.indexOf(hn):hn;return{coordinate:on(fn)+to,value:hn,offset:to}});return uo.filter(function(hn){return!isNan(hn.coordinate)})}return st.isCategorical&&st.categoricalDomain?st.categoricalDomain.map(function(hn,fn){return{coordinate:on(hn)+to,value:hn,index:fn,offset:to}}):on.ticks&&!rn?on.ticks(st.tickCount).map(function(hn){return{coordinate:on(hn)+to,value:hn,offset:to}}):on.domain().map(function(hn,fn){return{coordinate:on(hn)+to,value:an?an[hn]:hn,index:fn,offset:to}})},handlerWeakMap=new WeakMap,combineEventHandlers=function Mt(st,nn){if(typeof nn!="function")return st;handlerWeakMap.has(st)||handlerWeakMap.set(st,new WeakMap);var rn=handlerWeakMap.get(st);if(rn.has(nn))return rn.get(nn);var on=function(){st.apply(void 0,arguments),nn.apply(void 0,arguments)};return rn.set(nn,on),on},parseScale=function Mt(st,nn,rn){var on=st.scale,an=st.type,sn=st.layout,un=st.axisType;if(on==="auto")return sn==="radial"&&un==="radiusAxis"?{scale:band(),realScaleType:"band"}:sn==="radial"&&un==="angleAxis"?{scale:linear(),realScaleType:"linear"}:an==="category"&&nn&&(nn.indexOf("LineChart")>=0||nn.indexOf("AreaChart")>=0||nn.indexOf("ComposedChart")>=0&&!rn)?{scale:point(),realScaleType:"point"}:an==="category"?{scale:band(),realScaleType:"band"}:{scale:linear(),realScaleType:"linear"};if(isString$1(on)){var Xr="scale".concat(upperFirst$1(on));return{scale:(d3Scales[Xr]||point)(),realScaleType:d3Scales[Xr]?Xr:"point"}}return isFunction$3(on)?{scale:on}:{scale:point(),realScaleType:"point"}},EPS=1e-4,checkDomainOfScale=function Mt(st){var nn=st.domain();if(!(!nn||nn.length<=2)){var rn=nn.length,on=st.range(),an=Math.min(on[0],on[1])-EPS,sn=Math.max(on[0],on[1])+EPS,un=st(nn[0]),Xr=st(nn[rn-1]);(un<an||un>sn||Xr<an||Xr>sn)&&st.domain([nn[0],nn[rn-1]])}},findPositionOfBar=function Mt(st,nn){if(!st)return null;for(var rn=0,on=st.length;rn<on;rn++)if(st[rn].item===nn)return st[rn].position;return null},truncateByDomain=function Mt(st,nn){if(!nn||nn.length!==2||!isNumber(nn[0])||!isNumber(nn[1]))return st;var rn=Math.min(nn[0],nn[1]),on=Math.max(nn[0],nn[1]),an=[st[0],st[1]];return(!isNumber(st[0])||st[0]<rn)&&(an[0]=rn),(!isNumber(st[1])||st[1]>on)&&(an[1]=on),an[0]>on&&(an[0]=on),an[1]<rn&&(an[1]=rn),an},offsetSign=function Mt(st){var nn=st.length;if(!(nn<=0))for(var rn=0,on=st[0].length;rn<on;++rn)for(var an=0,sn=0,un=0;un<nn;++un){var Xr=isNan(st[un][rn][1])?st[un][rn][0]:st[un][rn][1];Xr>=0?(st[un][rn][0]=an,st[un][rn][1]=an+Xr,an=st[un][rn][1]):(st[un][rn][0]=sn,st[un][rn][1]=sn+Xr,sn=st[un][rn][1])}},offsetPositive=function Mt(st){var nn=st.length;if(!(nn<=0))for(var rn=0,on=st[0].length;rn<on;++rn)for(var an=0,sn=0;sn<nn;++sn){var un=isNan(st[sn][rn][1])?st[sn][rn][0]:st[sn][rn][1];un>=0?(st[sn][rn][0]=an,st[sn][rn][1]=an+un,an=st[sn][rn][1]):(st[sn][rn][0]=0,st[sn][rn][1]=0)}},STACK_OFFSET_MAP={sign:offsetSign,expand:stackOffsetExpand,none:stackOffsetNone,silhouette:stackOffsetSilhouette,wiggle:stackOffsetWiggle,positive:offsetPositive},getStackedData=function Mt(st,nn,rn){var on=nn.map(function(un){return un.props.dataKey}),an=STACK_OFFSET_MAP[rn],sn=shapeStack().keys(on).value(function(un,Xr){return+getValueByDataKey(un,Xr,0)}).order(stackOrderNone).offset(an);return sn(st)},getStackGroupsByAxisId=function Mt(st,nn,rn,on,an,sn){if(!st)return null;var un=sn?nn.reverse():nn,Xr={},to=un.reduce(function(hn,fn){var co,lo=(co=fn.type)!==null&&co!==void 0&&co.defaultProps?_objectSpread$t(_objectSpread$t({},fn.type.defaultProps),fn.props):fn.props,fo=lo.stackId,ho=lo.hide;if(ho)return hn;var mo=lo[rn],Uo=hn[mo]||{hasStack:!1,stackGroups:{}};if(isNumOrStr(fo)){var _d=Uo.stackGroups[fo]||{numericAxisId:rn,cateAxisId:on,items:[]};_d.items.push(fn),Uo.hasStack=!0,Uo.stackGroups[fo]=_d}else Uo.stackGroups[uniqueId("_stackId_")]={numericAxisId:rn,cateAxisId:on,items:[fn]};return _objectSpread$t(_objectSpread$t({},hn),{},_defineProperty$w({},mo,Uo))},Xr),uo={};return Object.keys(to).reduce(function(hn,fn){var co=to[fn];if(co.hasStack){var lo={};co.stackGroups=Object.keys(co.stackGroups).reduce(function(fo,ho){var mo=co.stackGroups[ho];return _objectSpread$t(_objectSpread$t({},fo),{},_defineProperty$w({},ho,{numericAxisId:rn,cateAxisId:on,items:mo.items,stackedData:getStackedData(st,mo.items,an)}))},lo)}return _objectSpread$t(_objectSpread$t({},hn),{},_defineProperty$w({},fn,co))},uo)},getTicksOfScale=function Mt(st,nn){var rn=nn.realScaleType,on=nn.type,an=nn.tickCount,sn=nn.originalDomain,un=nn.allowDecimals,Xr=rn||nn.scale;if(Xr!=="auto"&&Xr!=="linear")return null;if(an&&on==="number"&&sn&&(sn[0]==="auto"||sn[1]==="auto")){var to=st.domain();if(!to.length)return null;var uo=getNiceTickValues(to,an,un);return st.domain([min$1(uo),max$1(uo)]),{niceTicks:uo}}if(an&&on==="number"){var hn=st.domain(),fn=getTickValuesFixedDomain(hn,an,un);return{niceTicks:fn}}return null};function getCateCoordinateOfLine(Mt){var st=Mt.axis,nn=Mt.ticks,rn=Mt.bandSize,on=Mt.entry,an=Mt.index,sn=Mt.dataKey;if(st.type==="category"){if(!st.allowDuplicatedCategory&&st.dataKey&&!isNil$1(on[st.dataKey])){var un=findEntryInArray(nn,"value",on[st.dataKey]);if(un)return un.coordinate+rn/2}return nn[an]?nn[an].coordinate+rn/2:null}var Xr=getValueByDataKey(on,isNil$1(sn)?st.dataKey:sn);return isNil$1(Xr)?null:st.scale(Xr)}var getCateCoordinateOfBar=function Mt(st){var nn=st.axis,rn=st.ticks,on=st.offset,an=st.bandSize,sn=st.entry,un=st.index;if(nn.type==="category")return rn[un]?rn[un].coordinate+on:null;var Xr=getValueByDataKey(sn,nn.dataKey,nn.domain[un]);return isNil$1(Xr)?null:nn.scale(Xr)-an/2+on},getBaseValueOfBar=function Mt(st){var nn=st.numericAxis,rn=nn.scale.domain();if(nn.type==="number"){var on=Math.min(rn[0],rn[1]),an=Math.max(rn[0],rn[1]);return on<=0&&an>=0?0:an<0?an:on}return rn[0]},getStackedDataOfItem=function Mt(st,nn){var rn,on=(rn=st.type)!==null&&rn!==void 0&&rn.defaultProps?_objectSpread$t(_objectSpread$t({},st.type.defaultProps),st.props):st.props,an=on.stackId;if(isNumOrStr(an)){var sn=nn[an];if(sn){var un=sn.items.indexOf(st);return un>=0?sn.stackedData[un]:null}}return null},getDomainOfSingle=function Mt(st){return st.reduce(function(nn,rn){return[min$1(rn.concat([nn[0]]).filter(isNumber)),max$1(rn.concat([nn[1]]).filter(isNumber))]},[1/0,-1/0])},getDomainOfStackGroups=function Mt(st,nn,rn){return Object.keys(st).reduce(function(on,an){var sn=st[an],un=sn.stackedData,Xr=un.reduce(function(to,uo){var hn=getDomainOfSingle(uo.slice(nn,rn+1));return[Math.min(to[0],hn[0]),Math.max(to[1],hn[1])]},[1/0,-1/0]);return[Math.min(Xr[0],on[0]),Math.max(Xr[1],on[1])]},[1/0,-1/0]).map(function(on){return on===1/0||on===-1/0?0:on})},MIN_VALUE_REG=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,MAX_VALUE_REG=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,parseSpecifiedDomain=function Mt(st,nn,rn){if(isFunction$3(st))return st(nn,rn);if(!Array.isArray(st))return nn;var on=[];if(isNumber(st[0]))on[0]=rn?st[0]:Math.min(st[0],nn[0]);else if(MIN_VALUE_REG.test(st[0])){var an=+MIN_VALUE_REG.exec(st[0])[1];on[0]=nn[0]-an}else isFunction$3(st[0])?on[0]=st[0](nn[0]):on[0]=nn[0];if(isNumber(st[1]))on[1]=rn?st[1]:Math.max(st[1],nn[1]);else if(MAX_VALUE_REG.test(st[1])){var sn=+MAX_VALUE_REG.exec(st[1])[1];on[1]=nn[1]+sn}else isFunction$3(st[1])?on[1]=st[1](nn[1]):on[1]=nn[1];return on},getBandSizeOfAxis=function Mt(st,nn,rn){if(st&&st.scale&&st.scale.bandwidth){var on=st.scale.bandwidth();if(!rn||on>0)return on}if(st&&nn&&nn.length>=2){for(var an=sortBy$1(nn,function(hn){return hn.coordinate}),sn=1/0,un=1,Xr=an.length;un<Xr;un++){var to=an[un],uo=an[un-1];sn=Math.min((to.coordinate||0)-(uo.coordinate||0),sn)}return sn===1/0?0:sn}return rn?void 0:0},parseDomainOfCategoryAxis=function Mt(st,nn,rn){return!st||!st.length||isEqual$1(st,get$2(rn,"type.defaultProps.domain"))?nn:st},getTooltipItem=function Mt(st,nn){var rn=st.type.defaultProps?_objectSpread$t(_objectSpread$t({},st.type.defaultProps),st.props):st.props,on=rn.dataKey,an=rn.name,sn=rn.unit,un=rn.formatter,Xr=rn.tooltipType,to=rn.chartType,uo=rn.hide;return _objectSpread$t(_objectSpread$t({},filterProps(st,!1)),{},{dataKey:on,unit:sn,formatter:un,name:an||on,color:getMainColorOfGraphicItem(st),value:getValueByDataKey(nn,on),type:Xr,payload:nn,chartType:to,hide:uo})};function _typeof$w(Mt){"@babel/helpers - typeof";return _typeof$w=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(st){return typeof st}:function(st){return st&&typeof Symbol=="function"&&st.constructor===Symbol&&st!==Symbol.prototype?"symbol":typeof st},_typeof$w(Mt)}function ownKeys$s(Mt,st){var nn=Object.keys(Mt);if(Object.getOwnPropertySymbols){var rn=Object.getOwnPropertySymbols(Mt);st&&(rn=rn.filter(function(on){return Object.getOwnPropertyDescriptor(Mt,on).enumerable})),nn.push.apply(nn,rn)}return nn}function _objectSpread$s(Mt){for(var st=1;st<arguments.length;st++){var nn=arguments[st]!=null?arguments[st]:{};st%2?ownKeys$s(Object(nn),!0).forEach(function(rn){_defineProperty$v(Mt,rn,nn[rn])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Mt,Object.getOwnPropertyDescriptors(nn)):ownKeys$s(Object(nn)).forEach(function(rn){Object.defineProperty(Mt,rn,Object.getOwnPropertyDescriptor(nn,rn))})}return Mt}function _defineProperty$v(Mt,st,nn){return st=_toPropertyKey$v(st),st in Mt?Object.defineProperty(Mt,st,{value:nn,enumerable:!0,configurable:!0,writable:!0}):Mt[st]=nn,Mt}function _toPropertyKey$v(Mt){var st=_toPrimitive$v(Mt,"string");return _typeof$w(st)=="symbol"?st:st+""}function _toPrimitive$v(Mt,st){if(_typeof$w(Mt)!="object"||!Mt)return Mt;var nn=Mt[Symbol.toPrimitive];if(nn!==void 0){var rn=nn.call(Mt,st||"default");if(_typeof$w(rn)!="object")return rn;throw new TypeError("@@toPrimitive must return a primitive value.")}return(st==="string"?String:Number)(Mt)}function _slicedToArray$6(Mt,st){return _arrayWithHoles$7(Mt)||_iterableToArrayLimit$6(Mt,st)||_unsupportedIterableToArray$c(Mt,st)||_nonIterableRest$7()}function _nonIterableRest$7(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$c(Mt,st){if(Mt){if(typeof Mt=="string")return _arrayLikeToArray$c(Mt,st);var nn=Object.prototype.toString.call(Mt).slice(8,-1);if(nn==="Object"&&Mt.constructor&&(nn=Mt.constructor.name),nn==="Map"||nn==="Set")return Array.from(Mt);if(nn==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(nn))return _arrayLikeToArray$c(Mt,st)}}function _arrayLikeToArray$c(Mt,st){(st==null||st>Mt.length)&&(st=Mt.length);for(var nn=0,rn=new Array(st);nn<st;nn++)rn[nn]=Mt[nn];return rn}function _iterableToArrayLimit$6(Mt,st){var nn=Mt==null?null:typeof Symbol<"u"&&Mt[Symbol.iterator]||Mt["@@iterator"];if(nn!=null){var rn,on,an,sn,un=[],Xr=!0,to=!1;try{if(an=(nn=nn.call(Mt)).next,st!==0)for(;!(Xr=(rn=an.call(nn)).done)&&(un.push(rn.value),un.length!==st);Xr=!0);}catch(uo){to=!0,on=uo}finally{try{if(!Xr&&nn.return!=null&&(sn=nn.return(),Object(sn)!==sn))return}finally{if(to)throw on}}return un}}function _arrayWithHoles$7(Mt){if(Array.isArray(Mt))return Mt}var RADIAN$1=Math.PI/180,radianToDegree=function Mt(st){return st*180/Math.PI},polarToCartesian=function Mt(st,nn,rn,on){return{x:st+Math.cos(-RADIAN$1*on)*rn,y:nn+Math.sin(-RADIAN$1*on)*rn}},getMaxRadius=function Mt(st,nn){var rn=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(st-(rn.left||0)-(rn.right||0)),Math.abs(nn-(rn.top||0)-(rn.bottom||0)))/2},formatAxisMap$1=function Mt(st,nn,rn,on,an){var sn=st.width,un=st.height,Xr=st.startAngle,to=st.endAngle,uo=getPercentValue(st.cx,sn,sn/2),hn=getPercentValue(st.cy,un,un/2),fn=getMaxRadius(sn,un,rn),co=getPercentValue(st.innerRadius,fn,0),lo=getPercentValue(st.outerRadius,fn,fn*.8),fo=Object.keys(nn);return fo.reduce(function(ho,mo){var Uo=nn[mo],_d=Uo.domain,tp=Uo.reversed,ep;if(isNil$1(Uo.range))on==="angleAxis"?ep=[Xr,to]:on==="radiusAxis"&&(ep=[co,lo]),tp&&(ep=[ep[1],ep[0]]);else{ep=Uo.range;var np=ep,rp=_slicedToArray$6(np,2);Xr=rp[0],to=rp[1]}var ip=parseScale(Uo,an),op=ip.realScaleType,ap=ip.scale;ap.domain(_d).range(ep),checkDomainOfScale(ap);var sp=getTicksOfScale(ap,_objectSpread$s(_objectSpread$s({},Uo),{},{realScaleType:op})),up=_objectSpread$s(_objectSpread$s(_objectSpread$s({},Uo),sp),{},{range:ep,radius:lo,realScaleType:op,scale:ap,cx:uo,cy:hn,innerRadius:co,outerRadius:lo,startAngle:Xr,endAngle:to});return _objectSpread$s(_objectSpread$s({},ho),{},_defineProperty$v({},mo,up))},{})},distanceBetweenPoints=function Mt(st,nn){var rn=st.x,on=st.y,an=nn.x,sn=nn.y;return Math.sqrt(Math.pow(rn-an,2)+Math.pow(on-sn,2))},getAngleOfPoint=function Mt(st,nn){var rn=st.x,on=st.y,an=nn.cx,sn=nn.cy,un=distanceBetweenPoints({x:rn,y:on},{x:an,y:sn});if(un<=0)return{radius:un};var Xr=(rn-an)/un,to=Math.acos(Xr);return on>sn&&(to=2*Math.PI-to),{radius:un,angle:radianToDegree(to),angleInRadian:to}},formatAngleOfSector=function Mt(st){var nn=st.startAngle,rn=st.endAngle,on=Math.floor(nn/360),an=Math.floor(rn/360),sn=Math.min(on,an);return{startAngle:nn-sn*360,endAngle:rn-sn*360}},reverseFormatAngleOfSetor=function Mt(st,nn){var rn=nn.startAngle,on=nn.endAngle,an=Math.floor(rn/360),sn=Math.floor(on/360),un=Math.min(an,sn);return st+un*360},inRangeOfSector=function Mt(st,nn){var rn=st.x,on=st.y,an=getAngleOfPoint({x:rn,y:on},nn),sn=an.radius,un=an.angle,Xr=nn.innerRadius,to=nn.outerRadius;if(sn<Xr||sn>to)return!1;if(sn===0)return!0;var uo=formatAngleOfSector(nn),hn=uo.startAngle,fn=uo.endAngle,co=un,lo;if(hn<=fn){for(;co>fn;)co-=360;for(;co<hn;)co+=360;lo=co>=hn&&co<=fn}else{for(;co>hn;)co-=360;for(;co<fn;)co+=360;lo=co>=fn&&co<=hn}return lo?_objectSpread$s(_objectSpread$s({},nn),{},{radius:sn,angle:reverseFormatAngleOfSetor(co,nn)}):null},getTickClassName=function Mt(st){return!reactExports.isValidElement(st)&&!isFunction$3(st)&&typeof st!="boolean"?st.className:""};function _typeof$v(Mt){"@babel/helpers - typeof";return _typeof$v=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(st){return typeof st}:function(st){return st&&typeof Symbol=="function"&&st.constructor===Symbol&&st!==Symbol.prototype?"symbol":typeof st},_typeof$v(Mt)}var _excluded$c=["offset"];function _toConsumableArray$7(Mt){return _arrayWithoutHoles$7(Mt)||_iterableToArray$8(Mt)||_unsupportedIterableToArray$b(Mt)||_nonIterableSpread$7()}function _nonIterableSpread$7(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$b(Mt,st){if(Mt){if(typeof Mt=="string")return _arrayLikeToArray$b(Mt,st);var nn=Object.prototype.toString.call(Mt).slice(8,-1);if(nn==="Object"&&Mt.constructor&&(nn=Mt.constructor.name),nn==="Map"||nn==="Set")return Array.from(Mt);if(nn==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(nn))return _arrayLikeToArray$b(Mt,st)}}function _iterableToArray$8(Mt){if(typeof Symbol<"u"&&Mt[Symbol.iterator]!=null||Mt["@@iterator"]!=null)return Array.from(Mt)}function _arrayWithoutHoles$7(Mt){if(Array.isArray(Mt))return _arrayLikeToArray$b(Mt)}function _arrayLikeToArray$b(Mt,st){(st==null||st>Mt.length)&&(st=Mt.length);for(var nn=0,rn=new Array(st);nn<st;nn++)rn[nn]=Mt[nn];return rn}function _objectWithoutProperties$c(Mt,st){if(Mt==null)return{};var nn=_objectWithoutPropertiesLoose$c(Mt,st),rn,on;if(Object.getOwnPropertySymbols){var an=Object.getOwnPropertySymbols(Mt);for(on=0;on<an.length;on++)rn=an[on],!(st.indexOf(rn)>=0)&&Object.prototype.propertyIsEnumerable.call(Mt,rn)&&(nn[rn]=Mt[rn])}return nn}function _objectWithoutPropertiesLoose$c(Mt,st){if(Mt==null)return{};var nn={};for(var rn in Mt)if(Object.prototype.hasOwnProperty.call(Mt,rn)){if(st.indexOf(rn)>=0)continue;nn[rn]=Mt[rn]}return nn}function ownKeys$r(Mt,st){var nn=Object.keys(Mt);if(Object.getOwnPropertySymbols){var rn=Object.getOwnPropertySymbols(Mt);st&&(rn=rn.filter(function(on){return Object.getOwnPropertyDescriptor(Mt,on).enumerable})),nn.push.apply(nn,rn)}return nn}function _objectSpread$r(Mt){for(var st=1;st<arguments.length;st++){var nn=arguments[st]!=null?arguments[st]:{};st%2?ownKeys$r(Object(nn),!0).forEach(function(rn){_defineProperty$u(Mt,rn,nn[rn])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Mt,Object.getOwnPropertyDescriptors(nn)):ownKeys$r(Object(nn)).forEach(function(rn){Object.defineProperty(Mt,rn,Object.getOwnPropertyDescriptor(nn,rn))})}return Mt}function _defineProperty$u(Mt,st,nn){return st=_toPropertyKey$u(st),st in Mt?Object.defineProperty(Mt,st,{value:nn,enumerable:!0,configurable:!0,writable:!0}):Mt[st]=nn,Mt}function _toPropertyKey$u(Mt){var st=_toPrimitive$u(Mt,"string");return _typeof$v(st)=="symbol"?st:st+""}function _toPrimitive$u(Mt,st){if(_typeof$v(Mt)!="object"||!Mt)return Mt;var nn=Mt[Symbol.toPrimitive];if(nn!==void 0){var rn=nn.call(Mt,st||"default");if(_typeof$v(rn)!="object")return rn;throw new TypeError("@@toPrimitive must return a primitive value.")}return(st==="string"?String:Number)(Mt)}function _extends$n(){return _extends$n=Object.assign?Object.assign.bind():function(Mt){for(var st=1;st<arguments.length;st++){var nn=arguments[st];for(var rn in nn)Object.prototype.hasOwnProperty.call(nn,rn)&&(Mt[rn]=nn[rn])}return Mt},_extends$n.apply(this,arguments)}var getLabel=function Mt(st){var nn=st.value,rn=st.formatter,on=isNil$1(st.children)?nn:st.children;return isFunction$3(rn)?rn(on):on},getDeltaAngle$1=function Mt(st,nn){var rn=mathSign(nn-st),on=Math.min(Math.abs(nn-st),360);return rn*on},renderRadialLabel=function Mt(st,nn,rn){var on=st.position,an=st.viewBox,sn=st.offset,un=st.className,Xr=an,to=Xr.cx,uo=Xr.cy,hn=Xr.innerRadius,fn=Xr.outerRadius,co=Xr.startAngle,lo=Xr.endAngle,fo=Xr.clockWise,ho=(hn+fn)/2,mo=getDeltaAngle$1(co,lo),Uo=mo>=0?1:-1,_d,tp;on==="insideStart"?(_d=co+Uo*sn,tp=fo):on==="insideEnd"?(_d=lo-Uo*sn,tp=!fo):on==="end"&&(_d=lo+Uo*sn,tp=fo),tp=mo<=0?tp:!tp;var ep=polarToCartesian(to,uo,ho,_d),np=polarToCartesian(to,uo,ho,_d+(tp?1:-1)*359),rp="M".concat(ep.x,",").concat(ep.y,`
    A`).concat(ho,",").concat(ho,",0,1,").concat(tp?0:1,`,
    `).concat(np.x,",").concat(np.y),ip=isNil$1(st.id)?uniqueId("recharts-radial-line-"):st.id;return React.createElement("text",_extends$n({},rn,{dominantBaseline:"central",className:clsx("recharts-radial-bar-label",un)}),React.createElement("defs",null,React.createElement("path",{id:ip,d:rp})),React.createElement("textPath",{xlinkHref:"#".concat(ip)},nn))},getAttrsOfPolarLabel=function Mt(st){var nn=st.viewBox,rn=st.offset,on=st.position,an=nn,sn=an.cx,un=an.cy,Xr=an.innerRadius,to=an.outerRadius,uo=an.startAngle,hn=an.endAngle,fn=(uo+hn)/2;if(on==="outside"){var co=polarToCartesian(sn,un,to+rn,fn),lo=co.x,fo=co.y;return{x:lo,y:fo,textAnchor:lo>=sn?"start":"end",verticalAnchor:"middle"}}if(on==="center")return{x:sn,y:un,textAnchor:"middle",verticalAnchor:"middle"};if(on==="centerTop")return{x:sn,y:un,textAnchor:"middle",verticalAnchor:"start"};if(on==="centerBottom")return{x:sn,y:un,textAnchor:"middle",verticalAnchor:"end"};var ho=(Xr+to)/2,mo=polarToCartesian(sn,un,ho,fn),Uo=mo.x,_d=mo.y;return{x:Uo,y:_d,textAnchor:"middle",verticalAnchor:"middle"}},getAttrsOfCartesianLabel=function Mt(st){var nn=st.viewBox,rn=st.parentViewBox,on=st.offset,an=st.position,sn=nn,un=sn.x,Xr=sn.y,to=sn.width,uo=sn.height,hn=uo>=0?1:-1,fn=hn*on,co=hn>0?"end":"start",lo=hn>0?"start":"end",fo=to>=0?1:-1,ho=fo*on,mo=fo>0?"end":"start",Uo=fo>0?"start":"end";if(an==="top"){var _d={x:un+to/2,y:Xr-hn*on,textAnchor:"middle",verticalAnchor:co};return _objectSpread$r(_objectSpread$r({},_d),rn?{height:Math.max(Xr-rn.y,0),width:to}:{})}if(an==="bottom"){var tp={x:un+to/2,y:Xr+uo+fn,textAnchor:"middle",verticalAnchor:lo};return _objectSpread$r(_objectSpread$r({},tp),rn?{height:Math.max(rn.y+rn.height-(Xr+uo),0),width:to}:{})}if(an==="left"){var ep={x:un-ho,y:Xr+uo/2,textAnchor:mo,verticalAnchor:"middle"};return _objectSpread$r(_objectSpread$r({},ep),rn?{width:Math.max(ep.x-rn.x,0),height:uo}:{})}if(an==="right"){var np={x:un+to+ho,y:Xr+uo/2,textAnchor:Uo,verticalAnchor:"middle"};return _objectSpread$r(_objectSpread$r({},np),rn?{width:Math.max(rn.x+rn.width-np.x,0),height:uo}:{})}var rp=rn?{width:to,height:uo}:{};return an==="insideLeft"?_objectSpread$r({x:un+ho,y:Xr+uo/2,textAnchor:Uo,verticalAnchor:"middle"},rp):an==="insideRight"?_objectSpread$r({x:un+to-ho,y:Xr+uo/2,textAnchor:mo,verticalAnchor:"middle"},rp):an==="insideTop"?_objectSpread$r({x:un+to/2,y:Xr+fn,textAnchor:"middle",verticalAnchor:lo},rp):an==="insideBottom"?_objectSpread$r({x:un+to/2,y:Xr+uo-fn,textAnchor:"middle",verticalAnchor:co},rp):an==="insideTopLeft"?_objectSpread$r({x:un+ho,y:Xr+fn,textAnchor:Uo,verticalAnchor:lo},rp):an==="insideTopRight"?_objectSpread$r({x:un+to-ho,y:Xr+fn,textAnchor:mo,verticalAnchor:lo},rp):an==="insideBottomLeft"?_objectSpread$r({x:un+ho,y:Xr+uo-fn,textAnchor:Uo,verticalAnchor:co},rp):an==="insideBottomRight"?_objectSpread$r({x:un+to-ho,y:Xr+uo-fn,textAnchor:mo,verticalAnchor:co},rp):isObject$8(an)&&(isNumber(an.x)||isPercent(an.x))&&(isNumber(an.y)||isPercent(an.y))?_objectSpread$r({x:un+getPercentValue(an.x,to),y:Xr+getPercentValue(an.y,uo),textAnchor:"end",verticalAnchor:"end"},rp):_objectSpread$r({x:un+to/2,y:Xr+uo/2,textAnchor:"middle",verticalAnchor:"middle"},rp)},isPolar=function Mt(st){return"cx"in st&&isNumber(st.cx)};function Label(Mt){var st=Mt.offset,nn=st===void 0?5:st,rn=_objectWithoutProperties$c(Mt,_excluded$c),on=_objectSpread$r({offset:nn},rn),an=on.viewBox,sn=on.position,un=on.value,Xr=on.children,to=on.content,uo=on.className,hn=uo===void 0?"":uo,fn=on.textBreakAll;if(!an||isNil$1(un)&&isNil$1(Xr)&&!reactExports.isValidElement(to)&&!isFunction$3(to))return null;if(reactExports.isValidElement(to))return reactExports.cloneElement(to,on);var co;if(isFunction$3(to)){if(co=reactExports.createElement(to,on),reactExports.isValidElement(co))return co}else co=getLabel(on);var lo=isPolar(an),fo=filterProps(on,!0);if(lo&&(sn==="insideStart"||sn==="insideEnd"||sn==="end"))return renderRadialLabel(on,co,fo);var ho=lo?getAttrsOfPolarLabel(on):getAttrsOfCartesianLabel(on);return React.createElement(Text,_extends$n({className:clsx("recharts-label",hn)},fo,ho,{breakAll:fn}),co)}Label.displayName="Label";var parseViewBox=function Mt(st){var nn=st.cx,rn=st.cy,on=st.angle,an=st.startAngle,sn=st.endAngle,un=st.r,Xr=st.radius,to=st.innerRadius,uo=st.outerRadius,hn=st.x,fn=st.y,co=st.top,lo=st.left,fo=st.width,ho=st.height,mo=st.clockWise,Uo=st.labelViewBox;if(Uo)return Uo;if(isNumber(fo)&&isNumber(ho)){if(isNumber(hn)&&isNumber(fn))return{x:hn,y:fn,width:fo,height:ho};if(isNumber(co)&&isNumber(lo))return{x:co,y:lo,width:fo,height:ho}}return isNumber(hn)&&isNumber(fn)?{x:hn,y:fn,width:0,height:0}:isNumber(nn)&&isNumber(rn)?{cx:nn,cy:rn,startAngle:an||on||0,endAngle:sn||on||0,innerRadius:to||0,outerRadius:uo||Xr||un||0,clockWise:mo}:st.viewBox?st.viewBox:{}},parseLabel=function Mt(st,nn){return st?st===!0?React.createElement(Label,{key:"label-implicit",viewBox:nn}):isNumOrStr(st)?React.createElement(Label,{key:"label-implicit",viewBox:nn,value:st}):reactExports.isValidElement(st)?st.type===Label?reactExports.cloneElement(st,{key:"label-implicit",viewBox:nn}):React.createElement(Label,{key:"label-implicit",content:st,viewBox:nn}):isFunction$3(st)?React.createElement(Label,{key:"label-implicit",content:st,viewBox:nn}):isObject$8(st)?React.createElement(Label,_extends$n({viewBox:nn},st,{key:"label-implicit"})):null:null},renderCallByParent$1=function Mt(st,nn){var rn=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!st||!st.children&&rn&&!st.label)return null;var on=st.children,an=parseViewBox(st),sn=findAllByType(on,Label).map(function(Xr,to){return reactExports.cloneElement(Xr,{viewBox:nn||an,key:"label-".concat(to)})});if(!rn)return sn;var un=parseLabel(st.label,nn||an);return[un].concat(_toConsumableArray$7(sn))};Label.parseViewBox=parseViewBox;Label.renderCallByParent=renderCallByParent$1;function last(Mt){var st=Mt==null?0:Mt.length;return st?Mt[st-1]:void 0}var last_1=last;const last$1=getDefaultExportFromCjs(last_1);function _typeof$u(Mt){"@babel/helpers - typeof";return _typeof$u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(st){return typeof st}:function(st){return st&&typeof Symbol=="function"&&st.constructor===Symbol&&st!==Symbol.prototype?"symbol":typeof st},_typeof$u(Mt)}var _excluded$b=["valueAccessor"],_excluded2$5=["data","dataKey","clockWise","id","textBreakAll"];function _toConsumableArray$6(Mt){return _arrayWithoutHoles$6(Mt)||_iterableToArray$7(Mt)||_unsupportedIterableToArray$a(Mt)||_nonIterableSpread$6()}function _nonIterableSpread$6(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$a(Mt,st){if(Mt){if(typeof Mt=="string")return _arrayLikeToArray$a(Mt,st);var nn=Object.prototype.toString.call(Mt).slice(8,-1);if(nn==="Object"&&Mt.constructor&&(nn=Mt.constructor.name),nn==="Map"||nn==="Set")return Array.from(Mt);if(nn==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(nn))return _arrayLikeToArray$a(Mt,st)}}function _iterableToArray$7(Mt){if(typeof Symbol<"u"&&Mt[Symbol.iterator]!=null||Mt["@@iterator"]!=null)return Array.from(Mt)}function _arrayWithoutHoles$6(Mt){if(Array.isArray(Mt))return _arrayLikeToArray$a(Mt)}function _arrayLikeToArray$a(Mt,st){(st==null||st>Mt.length)&&(st=Mt.length);for(var nn=0,rn=new Array(st);nn<st;nn++)rn[nn]=Mt[nn];return rn}function _extends$m(){return _extends$m=Object.assign?Object.assign.bind():function(Mt){for(var st=1;st<arguments.length;st++){var nn=arguments[st];for(var rn in nn)Object.prototype.hasOwnProperty.call(nn,rn)&&(Mt[rn]=nn[rn])}return Mt},_extends$m.apply(this,arguments)}function ownKeys$q(Mt,st){var nn=Object.keys(Mt);if(Object.getOwnPropertySymbols){var rn=Object.getOwnPropertySymbols(Mt);st&&(rn=rn.filter(function(on){return Object.getOwnPropertyDescriptor(Mt,on).enumerable})),nn.push.apply(nn,rn)}return nn}function _objectSpread$q(Mt){for(var st=1;st<arguments.length;st++){var nn=arguments[st]!=null?arguments[st]:{};st%2?ownKeys$q(Object(nn),!0).forEach(function(rn){_defineProperty$t(Mt,rn,nn[rn])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Mt,Object.getOwnPropertyDescriptors(nn)):ownKeys$q(Object(nn)).forEach(function(rn){Object.defineProperty(Mt,rn,Object.getOwnPropertyDescriptor(nn,rn))})}return Mt}function _defineProperty$t(Mt,st,nn){return st=_toPropertyKey$t(st),st in Mt?Object.defineProperty(Mt,st,{value:nn,enumerable:!0,configurable:!0,writable:!0}):Mt[st]=nn,Mt}function _toPropertyKey$t(Mt){var st=_toPrimitive$t(Mt,"string");return _typeof$u(st)=="symbol"?st:st+""}function _toPrimitive$t(Mt,st){if(_typeof$u(Mt)!="object"||!Mt)return Mt;var nn=Mt[Symbol.toPrimitive];if(nn!==void 0){var rn=nn.call(Mt,st||"default");if(_typeof$u(rn)!="object")return rn;throw new TypeError("@@toPrimitive must return a primitive value.")}return(st==="string"?String:Number)(Mt)}function _objectWithoutProperties$b(Mt,st){if(Mt==null)return{};var nn=_objectWithoutPropertiesLoose$b(Mt,st),rn,on;if(Object.getOwnPropertySymbols){var an=Object.getOwnPropertySymbols(Mt);for(on=0;on<an.length;on++)rn=an[on],!(st.indexOf(rn)>=0)&&Object.prototype.propertyIsEnumerable.call(Mt,rn)&&(nn[rn]=Mt[rn])}return nn}function _objectWithoutPropertiesLoose$b(Mt,st){if(Mt==null)return{};var nn={};for(var rn in Mt)if(Object.prototype.hasOwnProperty.call(Mt,rn)){if(st.indexOf(rn)>=0)continue;nn[rn]=Mt[rn]}return nn}var defaultAccessor=function Mt(st){return Array.isArray(st.value)?last$1(st.value):st.value};function LabelList(Mt){var st=Mt.valueAccessor,nn=st===void 0?defaultAccessor:st,rn=_objectWithoutProperties$b(Mt,_excluded$b),on=rn.data,an=rn.dataKey,sn=rn.clockWise,un=rn.id,Xr=rn.textBreakAll,to=_objectWithoutProperties$b(rn,_excluded2$5);return!on||!on.length?null:React.createElement(Layer,{className:"recharts-label-list"},on.map(function(uo,hn){var fn=isNil$1(an)?nn(uo,hn):getValueByDataKey(uo&&uo.payload,an),co=isNil$1(un)?{}:{id:"".concat(un,"-").concat(hn)};return React.createElement(Label,_extends$m({},filterProps(uo,!0),to,co,{parentViewBox:uo.parentViewBox,value:fn,textBreakAll:Xr,viewBox:Label.parseViewBox(isNil$1(sn)?uo:_objectSpread$q(_objectSpread$q({},uo),{},{clockWise:sn})),key:"label-".concat(hn),index:hn}))}))}LabelList.displayName="LabelList";function parseLabelList(Mt,st){return Mt?Mt===!0?React.createElement(LabelList,{key:"labelList-implicit",data:st}):React.isValidElement(Mt)||isFunction$3(Mt)?React.createElement(LabelList,{key:"labelList-implicit",data:st,content:Mt}):isObject$8(Mt)?React.createElement(LabelList,_extends$m({data:st},Mt,{key:"labelList-implicit"})):null:null}function renderCallByParent(Mt,st){var nn=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!Mt||!Mt.children&&nn&&!Mt.label)return null;var rn=Mt.children,on=findAllByType(rn,LabelList).map(function(sn,un){return reactExports.cloneElement(sn,{data:st,key:"labelList-".concat(un)})});if(!nn)return on;var an=parseLabelList(Mt.label,st);return[an].concat(_toConsumableArray$6(on))}LabelList.renderCallByParent=renderCallByParent;function _typeof$t(Mt){"@babel/helpers - typeof";return _typeof$t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(st){return typeof st}:function(st){return st&&typeof Symbol=="function"&&st.constructor===Symbol&&st!==Symbol.prototype?"symbol":typeof st},_typeof$t(Mt)}function _extends$l(){return _extends$l=Object.assign?Object.assign.bind():function(Mt){for(var st=1;st<arguments.length;st++){var nn=arguments[st];for(var rn in nn)Object.prototype.hasOwnProperty.call(nn,rn)&&(Mt[rn]=nn[rn])}return Mt},_extends$l.apply(this,arguments)}function ownKeys$p(Mt,st){var nn=Object.keys(Mt);if(Object.getOwnPropertySymbols){var rn=Object.getOwnPropertySymbols(Mt);st&&(rn=rn.filter(function(on){return Object.getOwnPropertyDescriptor(Mt,on).enumerable})),nn.push.apply(nn,rn)}return nn}function _objectSpread$p(Mt){for(var st=1;st<arguments.length;st++){var nn=arguments[st]!=null?arguments[st]:{};st%2?ownKeys$p(Object(nn),!0).forEach(function(rn){_defineProperty$s(Mt,rn,nn[rn])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Mt,Object.getOwnPropertyDescriptors(nn)):ownKeys$p(Object(nn)).forEach(function(rn){Object.defineProperty(Mt,rn,Object.getOwnPropertyDescriptor(nn,rn))})}return Mt}function _defineProperty$s(Mt,st,nn){return st=_toPropertyKey$s(st),st in Mt?Object.defineProperty(Mt,st,{value:nn,enumerable:!0,configurable:!0,writable:!0}):Mt[st]=nn,Mt}function _toPropertyKey$s(Mt){var st=_toPrimitive$s(Mt,"string");return _typeof$t(st)=="symbol"?st:st+""}function _toPrimitive$s(Mt,st){if(_typeof$t(Mt)!="object"||!Mt)return Mt;var nn=Mt[Symbol.toPrimitive];if(nn!==void 0){var rn=nn.call(Mt,st||"default");if(_typeof$t(rn)!="object")return rn;throw new TypeError("@@toPrimitive must return a primitive value.")}return(st==="string"?String:Number)(Mt)}var getDeltaAngle=function Mt(st,nn){var rn=mathSign(nn-st),on=Math.min(Math.abs(nn-st),359.999);return rn*on},getTangentCircle=function Mt(st){var nn=st.cx,rn=st.cy,on=st.radius,an=st.angle,sn=st.sign,un=st.isExternal,Xr=st.cornerRadius,to=st.cornerIsExternal,uo=Xr*(un?1:-1)+on,hn=Math.asin(Xr/uo)/RADIAN$1,fn=to?an:an+sn*hn,co=polarToCartesian(nn,rn,uo,fn),lo=polarToCartesian(nn,rn,on,fn),fo=to?an-sn*hn:an,ho=polarToCartesian(nn,rn,uo*Math.cos(hn*RADIAN$1),fo);return{center:co,circleTangency:lo,lineTangency:ho,theta:hn}},getSectorPath=function Mt(st){var nn=st.cx,rn=st.cy,on=st.innerRadius,an=st.outerRadius,sn=st.startAngle,un=st.endAngle,Xr=getDeltaAngle(sn,un),to=sn+Xr,uo=polarToCartesian(nn,rn,an,sn),hn=polarToCartesian(nn,rn,an,to),fn="M ".concat(uo.x,",").concat(uo.y,`
    A `).concat(an,",").concat(an,`,0,
    `).concat(+(Math.abs(Xr)>180),",").concat(+(sn>to),`,
    `).concat(hn.x,",").concat(hn.y,`
  `);if(on>0){var co=polarToCartesian(nn,rn,on,sn),lo=polarToCartesian(nn,rn,on,to);fn+="L ".concat(lo.x,",").concat(lo.y,`
            A `).concat(on,",").concat(on,`,0,
            `).concat(+(Math.abs(Xr)>180),",").concat(+(sn<=to),`,
            `).concat(co.x,",").concat(co.y," Z")}else fn+="L ".concat(nn,",").concat(rn," Z");return fn},getSectorWithCorner=function Mt(st){var nn=st.cx,rn=st.cy,on=st.innerRadius,an=st.outerRadius,sn=st.cornerRadius,un=st.forceCornerRadius,Xr=st.cornerIsExternal,to=st.startAngle,uo=st.endAngle,hn=mathSign(uo-to),fn=getTangentCircle({cx:nn,cy:rn,radius:an,angle:to,sign:hn,cornerRadius:sn,cornerIsExternal:Xr}),co=fn.circleTangency,lo=fn.lineTangency,fo=fn.theta,ho=getTangentCircle({cx:nn,cy:rn,radius:an,angle:uo,sign:-hn,cornerRadius:sn,cornerIsExternal:Xr}),mo=ho.circleTangency,Uo=ho.lineTangency,_d=ho.theta,tp=Xr?Math.abs(to-uo):Math.abs(to-uo)-fo-_d;if(tp<0)return un?"M ".concat(lo.x,",").concat(lo.y,`
        a`).concat(sn,",").concat(sn,",0,0,1,").concat(sn*2,`,0
        a`).concat(sn,",").concat(sn,",0,0,1,").concat(-sn*2,`,0
      `):getSectorPath({cx:nn,cy:rn,innerRadius:on,outerRadius:an,startAngle:to,endAngle:uo});var ep="M ".concat(lo.x,",").concat(lo.y,`
    A`).concat(sn,",").concat(sn,",0,0,").concat(+(hn<0),",").concat(co.x,",").concat(co.y,`
    A`).concat(an,",").concat(an,",0,").concat(+(tp>180),",").concat(+(hn<0),",").concat(mo.x,",").concat(mo.y,`
    A`).concat(sn,",").concat(sn,",0,0,").concat(+(hn<0),",").concat(Uo.x,",").concat(Uo.y,`
  `);if(on>0){var np=getTangentCircle({cx:nn,cy:rn,radius:on,angle:to,sign:hn,isExternal:!0,cornerRadius:sn,cornerIsExternal:Xr}),rp=np.circleTangency,ip=np.lineTangency,op=np.theta,ap=getTangentCircle({cx:nn,cy:rn,radius:on,angle:uo,sign:-hn,isExternal:!0,cornerRadius:sn,cornerIsExternal:Xr}),sp=ap.circleTangency,up=ap.lineTangency,pp=ap.theta,lp=Xr?Math.abs(to-uo):Math.abs(to-uo)-op-pp;if(lp<0&&sn===0)return"".concat(ep,"L").concat(nn,",").concat(rn,"Z");ep+="L".concat(up.x,",").concat(up.y,`
      A`).concat(sn,",").concat(sn,",0,0,").concat(+(hn<0),",").concat(sp.x,",").concat(sp.y,`
      A`).concat(on,",").concat(on,",0,").concat(+(lp>180),",").concat(+(hn>0),",").concat(rp.x,",").concat(rp.y,`
      A`).concat(sn,",").concat(sn,",0,0,").concat(+(hn<0),",").concat(ip.x,",").concat(ip.y,"Z")}else ep+="L".concat(nn,",").concat(rn,"Z");return ep},defaultProps$3={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},Sector=function Mt(st){var nn=_objectSpread$p(_objectSpread$p({},defaultProps$3),st),rn=nn.cx,on=nn.cy,an=nn.innerRadius,sn=nn.outerRadius,un=nn.cornerRadius,Xr=nn.forceCornerRadius,to=nn.cornerIsExternal,uo=nn.startAngle,hn=nn.endAngle,fn=nn.className;if(sn<an||uo===hn)return null;var co=clsx("recharts-sector",fn),lo=sn-an,fo=getPercentValue(un,lo,0,!0),ho;return fo>0&&Math.abs(uo-hn)<360?ho=getSectorWithCorner({cx:rn,cy:on,innerRadius:an,outerRadius:sn,cornerRadius:Math.min(fo,lo/2),forceCornerRadius:Xr,cornerIsExternal:to,startAngle:uo,endAngle:hn}):ho=getSectorPath({cx:rn,cy:on,innerRadius:an,outerRadius:sn,startAngle:uo,endAngle:hn}),React.createElement("path",_extends$l({},filterProps(nn,!0),{className:co,d:ho,role:"img"}))};function _typeof$s(Mt){"@babel/helpers - typeof";return _typeof$s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(st){return typeof st}:function(st){return st&&typeof Symbol=="function"&&st.constructor===Symbol&&st!==Symbol.prototype?"symbol":typeof st},_typeof$s(Mt)}function _extends$k(){return _extends$k=Object.assign?Object.assign.bind():function(Mt){for(var st=1;st<arguments.length;st++){var nn=arguments[st];for(var rn in nn)Object.prototype.hasOwnProperty.call(nn,rn)&&(Mt[rn]=nn[rn])}return Mt},_extends$k.apply(this,arguments)}function ownKeys$o(Mt,st){var nn=Object.keys(Mt);if(Object.getOwnPropertySymbols){var rn=Object.getOwnPropertySymbols(Mt);st&&(rn=rn.filter(function(on){return Object.getOwnPropertyDescriptor(Mt,on).enumerable})),nn.push.apply(nn,rn)}return nn}function _objectSpread$o(Mt){for(var st=1;st<arguments.length;st++){var nn=arguments[st]!=null?arguments[st]:{};st%2?ownKeys$o(Object(nn),!0).forEach(function(rn){_defineProperty$r(Mt,rn,nn[rn])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Mt,Object.getOwnPropertyDescriptors(nn)):ownKeys$o(Object(nn)).forEach(function(rn){Object.defineProperty(Mt,rn,Object.getOwnPropertyDescriptor(nn,rn))})}return Mt}function _defineProperty$r(Mt,st,nn){return st=_toPropertyKey$r(st),st in Mt?Object.defineProperty(Mt,st,{value:nn,enumerable:!0,configurable:!0,writable:!0}):Mt[st]=nn,Mt}function _toPropertyKey$r(Mt){var st=_toPrimitive$r(Mt,"string");return _typeof$s(st)=="symbol"?st:st+""}function _toPrimitive$r(Mt,st){if(_typeof$s(Mt)!="object"||!Mt)return Mt;var nn=Mt[Symbol.toPrimitive];if(nn!==void 0){var rn=nn.call(Mt,st||"default");if(_typeof$s(rn)!="object")return rn;throw new TypeError("@@toPrimitive must return a primitive value.")}return(st==="string"?String:Number)(Mt)}var CURVE_FACTORIES={curveBasisClosed,curveBasisOpen,curveBasis,curveBumpX:bumpX,curveBumpY:bumpY,curveLinearClosed,curveLinear,curveMonotoneX:monotoneX,curveMonotoneY:monotoneY,curveNatural,curveStep,curveStepAfter:stepAfter,curveStepBefore:stepBefore},defined=function Mt(st){return st.x===+st.x&&st.y===+st.y},getX=function Mt(st){return st.x},getY=function Mt(st){return st.y},getCurveFactory=function Mt(st,nn){if(isFunction$3(st))return st;var rn="curve".concat(upperFirst$1(st));return(rn==="curveMonotone"||rn==="curveBump")&&nn?CURVE_FACTORIES["".concat(rn).concat(nn==="vertical"?"Y":"X")]:CURVE_FACTORIES[rn]||curveLinear},getPath$1=function Mt(st){var nn=st.type,rn=nn===void 0?"linear":nn,on=st.points,an=on===void 0?[]:on,sn=st.baseLine,un=st.layout,Xr=st.connectNulls,to=Xr===void 0?!1:Xr,uo=getCurveFactory(rn,un),hn=to?an.filter(function(fo){return defined(fo)}):an,fn;if(Array.isArray(sn)){var co=to?sn.filter(function(fo){return defined(fo)}):sn,lo=hn.map(function(fo,ho){return _objectSpread$o(_objectSpread$o({},fo),{},{base:co[ho]})});return un==="vertical"?fn=shapeArea().y(getY).x1(getX).x0(function(fo){return fo.base.x}):fn=shapeArea().x(getX).y1(getY).y0(function(fo){return fo.base.y}),fn.defined(defined).curve(uo),fn(lo)}return un==="vertical"&&isNumber(sn)?fn=shapeArea().y(getY).x1(getX).x0(sn):isNumber(sn)?fn=shapeArea().x(getX).y1(getY).y0(sn):fn=shapeLine().x(getX).y(getY),fn.defined(defined).curve(uo),fn(hn)},Curve=function Mt(st){var nn=st.className,rn=st.points,on=st.path,an=st.pathRef;if((!rn||!rn.length)&&!on)return null;var sn=rn&&rn.length?getPath$1(st):on;return React.createElement("path",_extends$k({},filterProps(st,!1),adaptEventHandlers(st),{className:clsx("recharts-curve",nn),d:sn,ref:an}))},propTypes={exports:{}},ReactPropTypesSecret$1="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",ReactPropTypesSecret_1=ReactPropTypesSecret$1,ReactPropTypesSecret=ReactPropTypesSecret_1;function emptyFunction(){}function emptyFunctionWithReset(){}emptyFunctionWithReset.resetWarningCache=emptyFunction;var factoryWithThrowingShims=function(){function Mt(rn,on,an,sn,un,Xr){if(Xr!==ReactPropTypesSecret){var to=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw to.name="Invariant Violation",to}}Mt.isRequired=Mt;function st(){return Mt}var nn={array:Mt,bigint:Mt,bool:Mt,func:Mt,number:Mt,object:Mt,string:Mt,symbol:Mt,any:Mt,arrayOf:st,element:Mt,elementType:Mt,instanceOf:st,node:Mt,objectOf:st,oneOf:st,oneOfType:st,shape:st,exact:st,checkPropTypes:emptyFunctionWithReset,resetWarningCache:emptyFunction};return nn.PropTypes=nn,nn};propTypes.exports=factoryWithThrowingShims();var propTypesExports=propTypes.exports;const PropTypes=getDefaultExportFromCjs(propTypesExports);var getOwnPropertyNames=Object.getOwnPropertyNames,getOwnPropertySymbols=Object.getOwnPropertySymbols,hasOwnProperty$1=Object.prototype.hasOwnProperty;function combineComparators(Mt,st){return function(rn,on,an){return Mt(rn,on,an)&&st(rn,on,an)}}function createIsCircular(Mt){return function(nn,rn,on){if(!nn||!rn||typeof nn!="object"||typeof rn!="object")return Mt(nn,rn,on);var an=on.cache,sn=an.get(nn),un=an.get(rn);if(sn&&un)return sn===rn&&un===nn;an.set(nn,rn),an.set(rn,nn);var Xr=Mt(nn,rn,on);return an.delete(nn),an.delete(rn),Xr}}function getStrictProperties(Mt){return getOwnPropertyNames(Mt).concat(getOwnPropertySymbols(Mt))}var hasOwn=Object.hasOwn||function(Mt,st){return hasOwnProperty$1.call(Mt,st)};function sameValueZeroEqual(Mt,st){return Mt||st?Mt===st:Mt===st||Mt!==Mt&&st!==st}var OWNER="_owner",getOwnPropertyDescriptor=Object.getOwnPropertyDescriptor,keys$1=Object.keys;function areArraysEqual(Mt,st,nn){var rn=Mt.length;if(st.length!==rn)return!1;for(;rn-- >0;)if(!nn.equals(Mt[rn],st[rn],rn,rn,Mt,st,nn))return!1;return!0}function areDatesEqual(Mt,st){return sameValueZeroEqual(Mt.getTime(),st.getTime())}function areMapsEqual(Mt,st,nn){if(Mt.size!==st.size)return!1;for(var rn={},on=Mt.entries(),an=0,sn,un;(sn=on.next())&&!sn.done;){for(var Xr=st.entries(),to=!1,uo=0;(un=Xr.next())&&!un.done;){var hn=sn.value,fn=hn[0],co=hn[1],lo=un.value,fo=lo[0],ho=lo[1];!to&&!rn[uo]&&(to=nn.equals(fn,fo,an,uo,Mt,st,nn)&&nn.equals(co,ho,fn,fo,Mt,st,nn))&&(rn[uo]=!0),uo++}if(!to)return!1;an++}return!0}function areObjectsEqual(Mt,st,nn){var rn=keys$1(Mt),on=rn.length;if(keys$1(st).length!==on)return!1;for(var an;on-- >0;)if(an=rn[on],an===OWNER&&(Mt.$$typeof||st.$$typeof)&&Mt.$$typeof!==st.$$typeof||!hasOwn(st,an)||!nn.equals(Mt[an],st[an],an,an,Mt,st,nn))return!1;return!0}function areObjectsEqualStrict(Mt,st,nn){var rn=getStrictProperties(Mt),on=rn.length;if(getStrictProperties(st).length!==on)return!1;for(var an,sn,un;on-- >0;)if(an=rn[on],an===OWNER&&(Mt.$$typeof||st.$$typeof)&&Mt.$$typeof!==st.$$typeof||!hasOwn(st,an)||!nn.equals(Mt[an],st[an],an,an,Mt,st,nn)||(sn=getOwnPropertyDescriptor(Mt,an),un=getOwnPropertyDescriptor(st,an),(sn||un)&&(!sn||!un||sn.configurable!==un.configurable||sn.enumerable!==un.enumerable||sn.writable!==un.writable)))return!1;return!0}function arePrimitiveWrappersEqual(Mt,st){return sameValueZeroEqual(Mt.valueOf(),st.valueOf())}function areRegExpsEqual(Mt,st){return Mt.source===st.source&&Mt.flags===st.flags}function areSetsEqual(Mt,st,nn){if(Mt.size!==st.size)return!1;for(var rn={},on=Mt.values(),an,sn;(an=on.next())&&!an.done;){for(var un=st.values(),Xr=!1,to=0;(sn=un.next())&&!sn.done;)!Xr&&!rn[to]&&(Xr=nn.equals(an.value,sn.value,an.value,sn.value,Mt,st,nn))&&(rn[to]=!0),to++;if(!Xr)return!1}return!0}function areTypedArraysEqual(Mt,st){var nn=Mt.length;if(st.length!==nn)return!1;for(;nn-- >0;)if(Mt[nn]!==st[nn])return!1;return!0}var ARGUMENTS_TAG="[object Arguments]",BOOLEAN_TAG="[object Boolean]",DATE_TAG="[object Date]",MAP_TAG="[object Map]",NUMBER_TAG="[object Number]",OBJECT_TAG="[object Object]",REG_EXP_TAG="[object RegExp]",SET_TAG="[object Set]",STRING_TAG="[object String]",isArray$2=Array.isArray,isTypedArray=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,assign=Object.assign,getTag=Object.prototype.toString.call.bind(Object.prototype.toString);function createEqualityComparator(Mt){var st=Mt.areArraysEqual,nn=Mt.areDatesEqual,rn=Mt.areMapsEqual,on=Mt.areObjectsEqual,an=Mt.arePrimitiveWrappersEqual,sn=Mt.areRegExpsEqual,un=Mt.areSetsEqual,Xr=Mt.areTypedArraysEqual;return function(uo,hn,fn){if(uo===hn)return!0;if(uo==null||hn==null||typeof uo!="object"||typeof hn!="object")return uo!==uo&&hn!==hn;var co=uo.constructor;if(co!==hn.constructor)return!1;if(co===Object)return on(uo,hn,fn);if(isArray$2(uo))return st(uo,hn,fn);if(isTypedArray!=null&&isTypedArray(uo))return Xr(uo,hn,fn);if(co===Date)return nn(uo,hn,fn);if(co===RegExp)return sn(uo,hn,fn);if(co===Map)return rn(uo,hn,fn);if(co===Set)return un(uo,hn,fn);var lo=getTag(uo);return lo===DATE_TAG?nn(uo,hn,fn):lo===REG_EXP_TAG?sn(uo,hn,fn):lo===MAP_TAG?rn(uo,hn,fn):lo===SET_TAG?un(uo,hn,fn):lo===OBJECT_TAG?typeof uo.then!="function"&&typeof hn.then!="function"&&on(uo,hn,fn):lo===ARGUMENTS_TAG?on(uo,hn,fn):lo===BOOLEAN_TAG||lo===NUMBER_TAG||lo===STRING_TAG?an(uo,hn,fn):!1}}function createEqualityComparatorConfig(Mt){var st=Mt.circular,nn=Mt.createCustomConfig,rn=Mt.strict,on={areArraysEqual:rn?areObjectsEqualStrict:areArraysEqual,areDatesEqual,areMapsEqual:rn?combineComparators(areMapsEqual,areObjectsEqualStrict):areMapsEqual,areObjectsEqual:rn?areObjectsEqualStrict:areObjectsEqual,arePrimitiveWrappersEqual,areRegExpsEqual,areSetsEqual:rn?combineComparators(areSetsEqual,areObjectsEqualStrict):areSetsEqual,areTypedArraysEqual:rn?areObjectsEqualStrict:areTypedArraysEqual};if(nn&&(on=assign({},on,nn(on))),st){var an=createIsCircular(on.areArraysEqual),sn=createIsCircular(on.areMapsEqual),un=createIsCircular(on.areObjectsEqual),Xr=createIsCircular(on.areSetsEqual);on=assign({},on,{areArraysEqual:an,areMapsEqual:sn,areObjectsEqual:un,areSetsEqual:Xr})}return on}function createInternalEqualityComparator(Mt){return function(st,nn,rn,on,an,sn,un){return Mt(st,nn,un)}}function createIsEqual(Mt){var st=Mt.circular,nn=Mt.comparator,rn=Mt.createState,on=Mt.equals,an=Mt.strict;if(rn)return function(Xr,to){var uo=rn(),hn=uo.cache,fn=hn===void 0?st?new WeakMap:void 0:hn,co=uo.meta;return nn(Xr,to,{cache:fn,equals:on,meta:co,strict:an})};if(st)return function(Xr,to){return nn(Xr,to,{cache:new WeakMap,equals:on,meta:void 0,strict:an})};var sn={cache:void 0,equals:on,meta:void 0,strict:an};return function(Xr,to){return nn(Xr,to,sn)}}var deepEqual=createCustomEqual();createCustomEqual({strict:!0});createCustomEqual({circular:!0});createCustomEqual({circular:!0,strict:!0});createCustomEqual({createInternalComparator:function(){return sameValueZeroEqual}});createCustomEqual({strict:!0,createInternalComparator:function(){return sameValueZeroEqual}});createCustomEqual({circular:!0,createInternalComparator:function(){return sameValueZeroEqual}});createCustomEqual({circular:!0,createInternalComparator:function(){return sameValueZeroEqual},strict:!0});function createCustomEqual(Mt){Mt===void 0&&(Mt={});var st=Mt.circular,nn=st===void 0?!1:st,rn=Mt.createInternalComparator,on=Mt.createState,an=Mt.strict,sn=an===void 0?!1:an,un=createEqualityComparatorConfig(Mt),Xr=createEqualityComparator(un),to=rn?rn(Xr):createInternalEqualityComparator(Xr);return createIsEqual({circular:nn,comparator:Xr,createState:on,equals:to,strict:sn})}function safeRequestAnimationFrame(Mt){typeof requestAnimationFrame<"u"&&requestAnimationFrame(Mt)}function setRafTimeout(Mt){var st=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,nn=-1,rn=function on(an){nn<0&&(nn=an),an-nn>st?(Mt(an),nn=-1):safeRequestAnimationFrame(on)};requestAnimationFrame(rn)}function _typeof$r(Mt){"@babel/helpers - typeof";return _typeof$r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(st){return typeof st}:function(st){return st&&typeof Symbol=="function"&&st.constructor===Symbol&&st!==Symbol.prototype?"symbol":typeof st},_typeof$r(Mt)}function _toArray(Mt){return _arrayWithHoles$6(Mt)||_iterableToArray$6(Mt)||_unsupportedIterableToArray$9(Mt)||_nonIterableRest$6()}function _nonIterableRest$6(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$9(Mt,st){if(Mt){if(typeof Mt=="string")return _arrayLikeToArray$9(Mt,st);var nn=Object.prototype.toString.call(Mt).slice(8,-1);if(nn==="Object"&&Mt.constructor&&(nn=Mt.constructor.name),nn==="Map"||nn==="Set")return Array.from(Mt);if(nn==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(nn))return _arrayLikeToArray$9(Mt,st)}}function _arrayLikeToArray$9(Mt,st){(st==null||st>Mt.length)&&(st=Mt.length);for(var nn=0,rn=new Array(st);nn<st;nn++)rn[nn]=Mt[nn];return rn}function _iterableToArray$6(Mt){if(typeof Symbol<"u"&&Mt[Symbol.iterator]!=null||Mt["@@iterator"]!=null)return Array.from(Mt)}function _arrayWithHoles$6(Mt){if(Array.isArray(Mt))return Mt}function createAnimateManager(){var Mt={},st=function(){return null},nn=!1,rn=function on(an){if(!nn){if(Array.isArray(an)){if(!an.length)return;var sn=an,un=_toArray(sn),Xr=un[0],to=un.slice(1);if(typeof Xr=="number"){setRafTimeout(on.bind(null,to),Xr);return}on(Xr),setRafTimeout(on.bind(null,to));return}_typeof$r(an)==="object"&&(Mt=an,st(Mt)),typeof an=="function"&&an()}};return{stop:function(){nn=!0},start:function(an){nn=!1,rn(an)},subscribe:function(an){return st=an,function(){st=function(){return null}}}}}function _typeof$q(Mt){"@babel/helpers - typeof";return _typeof$q=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(st){return typeof st}:function(st){return st&&typeof Symbol=="function"&&st.constructor===Symbol&&st!==Symbol.prototype?"symbol":typeof st},_typeof$q(Mt)}function ownKeys$n(Mt,st){var nn=Object.keys(Mt);if(Object.getOwnPropertySymbols){var rn=Object.getOwnPropertySymbols(Mt);st&&(rn=rn.filter(function(on){return Object.getOwnPropertyDescriptor(Mt,on).enumerable})),nn.push.apply(nn,rn)}return nn}function _objectSpread$n(Mt){for(var st=1;st<arguments.length;st++){var nn=arguments[st]!=null?arguments[st]:{};st%2?ownKeys$n(Object(nn),!0).forEach(function(rn){_defineProperty$q(Mt,rn,nn[rn])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Mt,Object.getOwnPropertyDescriptors(nn)):ownKeys$n(Object(nn)).forEach(function(rn){Object.defineProperty(Mt,rn,Object.getOwnPropertyDescriptor(nn,rn))})}return Mt}function _defineProperty$q(Mt,st,nn){return st=_toPropertyKey$q(st),st in Mt?Object.defineProperty(Mt,st,{value:nn,enumerable:!0,configurable:!0,writable:!0}):Mt[st]=nn,Mt}function _toPropertyKey$q(Mt){var st=_toPrimitive$q(Mt,"string");return _typeof$q(st)==="symbol"?st:String(st)}function _toPrimitive$q(Mt,st){if(_typeof$q(Mt)!=="object"||Mt===null)return Mt;var nn=Mt[Symbol.toPrimitive];if(nn!==void 0){var rn=nn.call(Mt,st||"default");if(_typeof$q(rn)!=="object")return rn;throw new TypeError("@@toPrimitive must return a primitive value.")}return(st==="string"?String:Number)(Mt)}var getIntersectionKeys=function Mt(st,nn){return[Object.keys(st),Object.keys(nn)].reduce(function(rn,on){return rn.filter(function(an){return on.includes(an)})})},identity=function Mt(st){return st},getDashCase=function Mt(st){return st.replace(/([A-Z])/g,function(nn){return"-".concat(nn.toLowerCase())})},mapObject=function Mt(st,nn){return Object.keys(nn).reduce(function(rn,on){return _objectSpread$n(_objectSpread$n({},rn),{},_defineProperty$q({},on,st(on,nn[on])))},{})},getTransitionVal=function Mt(st,nn,rn){return st.map(function(on){return"".concat(getDashCase(on)," ").concat(nn,"ms ").concat(rn)}).join(",")};function _slicedToArray$5(Mt,st){return _arrayWithHoles$5(Mt)||_iterableToArrayLimit$5(Mt,st)||_unsupportedIterableToArray$8(Mt,st)||_nonIterableRest$5()}function _nonIterableRest$5(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _iterableToArrayLimit$5(Mt,st){var nn=Mt==null?null:typeof Symbol<"u"&&Mt[Symbol.iterator]||Mt["@@iterator"];if(nn!=null){var rn,on,an,sn,un=[],Xr=!0,to=!1;try{if(an=(nn=nn.call(Mt)).next,st!==0)for(;!(Xr=(rn=an.call(nn)).done)&&(un.push(rn.value),un.length!==st);Xr=!0);}catch(uo){to=!0,on=uo}finally{try{if(!Xr&&nn.return!=null&&(sn=nn.return(),Object(sn)!==sn))return}finally{if(to)throw on}}return un}}function _arrayWithHoles$5(Mt){if(Array.isArray(Mt))return Mt}function _toConsumableArray$5(Mt){return _arrayWithoutHoles$5(Mt)||_iterableToArray$5(Mt)||_unsupportedIterableToArray$8(Mt)||_nonIterableSpread$5()}function _nonIterableSpread$5(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$8(Mt,st){if(Mt){if(typeof Mt=="string")return _arrayLikeToArray$8(Mt,st);var nn=Object.prototype.toString.call(Mt).slice(8,-1);if(nn==="Object"&&Mt.constructor&&(nn=Mt.constructor.name),nn==="Map"||nn==="Set")return Array.from(Mt);if(nn==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(nn))return _arrayLikeToArray$8(Mt,st)}}function _iterableToArray$5(Mt){if(typeof Symbol<"u"&&Mt[Symbol.iterator]!=null||Mt["@@iterator"]!=null)return Array.from(Mt)}function _arrayWithoutHoles$5(Mt){if(Array.isArray(Mt))return _arrayLikeToArray$8(Mt)}function _arrayLikeToArray$8(Mt,st){(st==null||st>Mt.length)&&(st=Mt.length);for(var nn=0,rn=new Array(st);nn<st;nn++)rn[nn]=Mt[nn];return rn}var ACCURACY=1e-4,cubicBezierFactor=function Mt(st,nn){return[0,3*st,3*nn-6*st,3*st-3*nn+1]},multyTime=function Mt(st,nn){return st.map(function(rn,on){return rn*Math.pow(nn,on)}).reduce(function(rn,on){return rn+on})},cubicBezier=function Mt(st,nn){return function(rn){var on=cubicBezierFactor(st,nn);return multyTime(on,rn)}},derivativeCubicBezier=function Mt(st,nn){return function(rn){var on=cubicBezierFactor(st,nn),an=[].concat(_toConsumableArray$5(on.map(function(sn,un){return sn*un}).slice(1)),[0]);return multyTime(an,rn)}},configBezier=function Mt(){for(var st=arguments.length,nn=new Array(st),rn=0;rn<st;rn++)nn[rn]=arguments[rn];var on=nn[0],an=nn[1],sn=nn[2],un=nn[3];if(nn.length===1)switch(nn[0]){case"linear":on=0,an=0,sn=1,un=1;break;case"ease":on=.25,an=.1,sn=.25,un=1;break;case"ease-in":on=.42,an=0,sn=1,un=1;break;case"ease-out":on=.42,an=0,sn=.58,un=1;break;case"ease-in-out":on=0,an=0,sn=.58,un=1;break;default:{var Xr=nn[0].split("(");if(Xr[0]==="cubic-bezier"&&Xr[1].split(")")[0].split(",").length===4){var to=Xr[1].split(")")[0].split(",").map(function(ho){return parseFloat(ho)}),uo=_slicedToArray$5(to,4);on=uo[0],an=uo[1],sn=uo[2],un=uo[3]}}}var hn=cubicBezier(on,sn),fn=cubicBezier(an,un),co=derivativeCubicBezier(on,sn),lo=function(mo){return mo>1?1:mo<0?0:mo},fo=function(mo){for(var Uo=mo>1?1:mo,_d=Uo,tp=0;tp<8;++tp){var ep=hn(_d)-Uo,np=co(_d);if(Math.abs(ep-Uo)<ACCURACY||np<ACCURACY)return fn(_d);_d=lo(_d-ep/np)}return fn(_d)};return fo.isStepper=!1,fo},configSpring=function Mt(){var st=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},nn=st.stiff,rn=nn===void 0?100:nn,on=st.damping,an=on===void 0?8:on,sn=st.dt,un=sn===void 0?17:sn,Xr=function(uo,hn,fn){var co=-(uo-hn)*rn,lo=fn*an,fo=fn+(co-lo)*un/1e3,ho=fn*un/1e3+uo;return Math.abs(ho-hn)<ACCURACY&&Math.abs(fo)<ACCURACY?[hn,0]:[ho,fo]};return Xr.isStepper=!0,Xr.dt=un,Xr},configEasing=function Mt(){for(var st=arguments.length,nn=new Array(st),rn=0;rn<st;rn++)nn[rn]=arguments[rn];var on=nn[0];if(typeof on=="string")switch(on){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return configBezier(on);case"spring":return configSpring();default:if(on.split("(")[0]==="cubic-bezier")return configBezier(on)}return typeof on=="function"?on:null};function _typeof$p(Mt){"@babel/helpers - typeof";return _typeof$p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(st){return typeof st}:function(st){return st&&typeof Symbol=="function"&&st.constructor===Symbol&&st!==Symbol.prototype?"symbol":typeof st},_typeof$p(Mt)}function _toConsumableArray$4(Mt){return _arrayWithoutHoles$4(Mt)||_iterableToArray$4(Mt)||_unsupportedIterableToArray$7(Mt)||_nonIterableSpread$4()}function _nonIterableSpread$4(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _iterableToArray$4(Mt){if(typeof Symbol<"u"&&Mt[Symbol.iterator]!=null||Mt["@@iterator"]!=null)return Array.from(Mt)}function _arrayWithoutHoles$4(Mt){if(Array.isArray(Mt))return _arrayLikeToArray$7(Mt)}function ownKeys$m(Mt,st){var nn=Object.keys(Mt);if(Object.getOwnPropertySymbols){var rn=Object.getOwnPropertySymbols(Mt);st&&(rn=rn.filter(function(on){return Object.getOwnPropertyDescriptor(Mt,on).enumerable})),nn.push.apply(nn,rn)}return nn}function _objectSpread$m(Mt){for(var st=1;st<arguments.length;st++){var nn=arguments[st]!=null?arguments[st]:{};st%2?ownKeys$m(Object(nn),!0).forEach(function(rn){_defineProperty$p(Mt,rn,nn[rn])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Mt,Object.getOwnPropertyDescriptors(nn)):ownKeys$m(Object(nn)).forEach(function(rn){Object.defineProperty(Mt,rn,Object.getOwnPropertyDescriptor(nn,rn))})}return Mt}function _defineProperty$p(Mt,st,nn){return st=_toPropertyKey$p(st),st in Mt?Object.defineProperty(Mt,st,{value:nn,enumerable:!0,configurable:!0,writable:!0}):Mt[st]=nn,Mt}function _toPropertyKey$p(Mt){var st=_toPrimitive$p(Mt,"string");return _typeof$p(st)==="symbol"?st:String(st)}function _toPrimitive$p(Mt,st){if(_typeof$p(Mt)!=="object"||Mt===null)return Mt;var nn=Mt[Symbol.toPrimitive];if(nn!==void 0){var rn=nn.call(Mt,st||"default");if(_typeof$p(rn)!=="object")return rn;throw new TypeError("@@toPrimitive must return a primitive value.")}return(st==="string"?String:Number)(Mt)}function _slicedToArray$4(Mt,st){return _arrayWithHoles$4(Mt)||_iterableToArrayLimit$4(Mt,st)||_unsupportedIterableToArray$7(Mt,st)||_nonIterableRest$4()}function _nonIterableRest$4(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$7(Mt,st){if(Mt){if(typeof Mt=="string")return _arrayLikeToArray$7(Mt,st);var nn=Object.prototype.toString.call(Mt).slice(8,-1);if(nn==="Object"&&Mt.constructor&&(nn=Mt.constructor.name),nn==="Map"||nn==="Set")return Array.from(Mt);if(nn==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(nn))return _arrayLikeToArray$7(Mt,st)}}function _arrayLikeToArray$7(Mt,st){(st==null||st>Mt.length)&&(st=Mt.length);for(var nn=0,rn=new Array(st);nn<st;nn++)rn[nn]=Mt[nn];return rn}function _iterableToArrayLimit$4(Mt,st){var nn=Mt==null?null:typeof Symbol<"u"&&Mt[Symbol.iterator]||Mt["@@iterator"];if(nn!=null){var rn,on,an,sn,un=[],Xr=!0,to=!1;try{if(an=(nn=nn.call(Mt)).next,st!==0)for(;!(Xr=(rn=an.call(nn)).done)&&(un.push(rn.value),un.length!==st);Xr=!0);}catch(uo){to=!0,on=uo}finally{try{if(!Xr&&nn.return!=null&&(sn=nn.return(),Object(sn)!==sn))return}finally{if(to)throw on}}return un}}function _arrayWithHoles$4(Mt){if(Array.isArray(Mt))return Mt}var alpha=function Mt(st,nn,rn){return st+(nn-st)*rn},needContinue=function Mt(st){var nn=st.from,rn=st.to;return nn!==rn},calStepperVals=function Mt(st,nn,rn){var on=mapObject(function(an,sn){if(needContinue(sn)){var un=st(sn.from,sn.to,sn.velocity),Xr=_slicedToArray$4(un,2),to=Xr[0],uo=Xr[1];return _objectSpread$m(_objectSpread$m({},sn),{},{from:to,velocity:uo})}return sn},nn);return rn<1?mapObject(function(an,sn){return needContinue(sn)?_objectSpread$m(_objectSpread$m({},sn),{},{velocity:alpha(sn.velocity,on[an].velocity,rn),from:alpha(sn.from,on[an].from,rn)}):sn},nn):Mt(st,on,rn-1)};const configUpdate=function(Mt,st,nn,rn,on){var an=getIntersectionKeys(Mt,st),sn=an.reduce(function(ho,mo){return _objectSpread$m(_objectSpread$m({},ho),{},_defineProperty$p({},mo,[Mt[mo],st[mo]]))},{}),un=an.reduce(function(ho,mo){return _objectSpread$m(_objectSpread$m({},ho),{},_defineProperty$p({},mo,{from:Mt[mo],velocity:0,to:st[mo]}))},{}),Xr=-1,to,uo,hn=function(){return null},fn=function(){return mapObject(function(mo,Uo){return Uo.from},un)},co=function(){return!Object.values(un).filter(needContinue).length},lo=function(mo){to||(to=mo);var Uo=mo-to,_d=Uo/nn.dt;un=calStepperVals(nn,un,_d),on(_objectSpread$m(_objectSpread$m(_objectSpread$m({},Mt),st),fn())),to=mo,co()||(Xr=requestAnimationFrame(hn))},fo=function(mo){uo||(uo=mo);var Uo=(mo-uo)/rn,_d=mapObject(function(ep,np){return alpha.apply(void 0,_toConsumableArray$4(np).concat([nn(Uo)]))},sn);if(on(_objectSpread$m(_objectSpread$m(_objectSpread$m({},Mt),st),_d)),Uo<1)Xr=requestAnimationFrame(hn);else{var tp=mapObject(function(ep,np){return alpha.apply(void 0,_toConsumableArray$4(np).concat([nn(1)]))},sn);on(_objectSpread$m(_objectSpread$m(_objectSpread$m({},Mt),st),tp))}};return hn=nn.isStepper?lo:fo,function(){return requestAnimationFrame(hn),function(){cancelAnimationFrame(Xr)}}};function _typeof$o(Mt){"@babel/helpers - typeof";return _typeof$o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(st){return typeof st}:function(st){return st&&typeof Symbol=="function"&&st.constructor===Symbol&&st!==Symbol.prototype?"symbol":typeof st},_typeof$o(Mt)}var _excluded$a=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function _objectWithoutProperties$a(Mt,st){if(Mt==null)return{};var nn=_objectWithoutPropertiesLoose$a(Mt,st),rn,on;if(Object.getOwnPropertySymbols){var an=Object.getOwnPropertySymbols(Mt);for(on=0;on<an.length;on++)rn=an[on],!(st.indexOf(rn)>=0)&&Object.prototype.propertyIsEnumerable.call(Mt,rn)&&(nn[rn]=Mt[rn])}return nn}function _objectWithoutPropertiesLoose$a(Mt,st){if(Mt==null)return{};var nn={},rn=Object.keys(Mt),on,an;for(an=0;an<rn.length;an++)on=rn[an],!(st.indexOf(on)>=0)&&(nn[on]=Mt[on]);return nn}function _toConsumableArray$3(Mt){return _arrayWithoutHoles$3(Mt)||_iterableToArray$3(Mt)||_unsupportedIterableToArray$6(Mt)||_nonIterableSpread$3()}function _nonIterableSpread$3(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$6(Mt,st){if(Mt){if(typeof Mt=="string")return _arrayLikeToArray$6(Mt,st);var nn=Object.prototype.toString.call(Mt).slice(8,-1);if(nn==="Object"&&Mt.constructor&&(nn=Mt.constructor.name),nn==="Map"||nn==="Set")return Array.from(Mt);if(nn==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(nn))return _arrayLikeToArray$6(Mt,st)}}function _iterableToArray$3(Mt){if(typeof Symbol<"u"&&Mt[Symbol.iterator]!=null||Mt["@@iterator"]!=null)return Array.from(Mt)}function _arrayWithoutHoles$3(Mt){if(Array.isArray(Mt))return _arrayLikeToArray$6(Mt)}function _arrayLikeToArray$6(Mt,st){(st==null||st>Mt.length)&&(st=Mt.length);for(var nn=0,rn=new Array(st);nn<st;nn++)rn[nn]=Mt[nn];return rn}function ownKeys$l(Mt,st){var nn=Object.keys(Mt);if(Object.getOwnPropertySymbols){var rn=Object.getOwnPropertySymbols(Mt);st&&(rn=rn.filter(function(on){return Object.getOwnPropertyDescriptor(Mt,on).enumerable})),nn.push.apply(nn,rn)}return nn}function _objectSpread$l(Mt){for(var st=1;st<arguments.length;st++){var nn=arguments[st]!=null?arguments[st]:{};st%2?ownKeys$l(Object(nn),!0).forEach(function(rn){_defineProperty$o(Mt,rn,nn[rn])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Mt,Object.getOwnPropertyDescriptors(nn)):ownKeys$l(Object(nn)).forEach(function(rn){Object.defineProperty(Mt,rn,Object.getOwnPropertyDescriptor(nn,rn))})}return Mt}function _defineProperty$o(Mt,st,nn){return st=_toPropertyKey$o(st),st in Mt?Object.defineProperty(Mt,st,{value:nn,enumerable:!0,configurable:!0,writable:!0}):Mt[st]=nn,Mt}function _classCallCheck$f(Mt,st){if(!(Mt instanceof st))throw new TypeError("Cannot call a class as a function")}function _defineProperties$f(Mt,st){for(var nn=0;nn<st.length;nn++){var rn=st[nn];rn.enumerable=rn.enumerable||!1,rn.configurable=!0,"value"in rn&&(rn.writable=!0),Object.defineProperty(Mt,_toPropertyKey$o(rn.key),rn)}}function _createClass$f(Mt,st,nn){return st&&_defineProperties$f(Mt.prototype,st),Object.defineProperty(Mt,"prototype",{writable:!1}),Mt}function _toPropertyKey$o(Mt){var st=_toPrimitive$o(Mt,"string");return _typeof$o(st)==="symbol"?st:String(st)}function _toPrimitive$o(Mt,st){if(_typeof$o(Mt)!=="object"||Mt===null)return Mt;var nn=Mt[Symbol.toPrimitive];if(nn!==void 0){var rn=nn.call(Mt,st||"default");if(_typeof$o(rn)!=="object")return rn;throw new TypeError("@@toPrimitive must return a primitive value.")}return(st==="string"?String:Number)(Mt)}function _inherits$d(Mt,st){if(typeof st!="function"&&st!==null)throw new TypeError("Super expression must either be null or a function");Mt.prototype=Object.create(st&&st.prototype,{constructor:{value:Mt,writable:!0,configurable:!0}}),Object.defineProperty(Mt,"prototype",{writable:!1}),st&&_setPrototypeOf$d(Mt,st)}function _setPrototypeOf$d(Mt,st){return _setPrototypeOf$d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(rn,on){return rn.__proto__=on,rn},_setPrototypeOf$d(Mt,st)}function _createSuper(Mt){var st=_isNativeReflectConstruct$d();return function(){var rn=_getPrototypeOf$d(Mt),on;if(st){var an=_getPrototypeOf$d(this).constructor;on=Reflect.construct(rn,arguments,an)}else on=rn.apply(this,arguments);return _possibleConstructorReturn$d(this,on)}}function _possibleConstructorReturn$d(Mt,st){if(st&&(_typeof$o(st)==="object"||typeof st=="function"))return st;if(st!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$d(Mt)}function _assertThisInitialized$d(Mt){if(Mt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Mt}function _isNativeReflectConstruct$d(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf$d(Mt){return _getPrototypeOf$d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(nn){return nn.__proto__||Object.getPrototypeOf(nn)},_getPrototypeOf$d(Mt)}var Animate=function(Mt){_inherits$d(nn,Mt);var st=_createSuper(nn);function nn(rn,on){var an;_classCallCheck$f(this,nn),an=st.call(this,rn,on);var sn=an.props,un=sn.isActive,Xr=sn.attributeName,to=sn.from,uo=sn.to,hn=sn.steps,fn=sn.children,co=sn.duration;if(an.handleStyleChange=an.handleStyleChange.bind(_assertThisInitialized$d(an)),an.changeStyle=an.changeStyle.bind(_assertThisInitialized$d(an)),!un||co<=0)return an.state={style:{}},typeof fn=="function"&&(an.state={style:uo}),_possibleConstructorReturn$d(an);if(hn&&hn.length)an.state={style:hn[0].style};else if(to){if(typeof fn=="function")return an.state={style:to},_possibleConstructorReturn$d(an);an.state={style:Xr?_defineProperty$o({},Xr,to):to}}else an.state={style:{}};return an}return _createClass$f(nn,[{key:"componentDidMount",value:function(){var on=this.props,an=on.isActive,sn=on.canBegin;this.mounted=!0,!(!an||!sn)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(on){var an=this.props,sn=an.isActive,un=an.canBegin,Xr=an.attributeName,to=an.shouldReAnimate,uo=an.to,hn=an.from,fn=this.state.style;if(un){if(!sn){var co={style:Xr?_defineProperty$o({},Xr,uo):uo};this.state&&fn&&(Xr&&fn[Xr]!==uo||!Xr&&fn!==uo)&&this.setState(co);return}if(!(deepEqual(on.to,uo)&&on.canBegin&&on.isActive)){var lo=!on.canBegin||!on.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var fo=lo||to?hn:on.to;if(this.state&&fn){var ho={style:Xr?_defineProperty$o({},Xr,fo):fo};(Xr&&fn[Xr]!==fo||!Xr&&fn!==fo)&&this.setState(ho)}this.runAnimation(_objectSpread$l(_objectSpread$l({},this.props),{},{from:fo,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var on=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),on&&on()}},{key:"handleStyleChange",value:function(on){this.changeStyle(on)}},{key:"changeStyle",value:function(on){this.mounted&&this.setState({style:on})}},{key:"runJSAnimation",value:function(on){var an=this,sn=on.from,un=on.to,Xr=on.duration,to=on.easing,uo=on.begin,hn=on.onAnimationEnd,fn=on.onAnimationStart,co=configUpdate(sn,un,configEasing(to),Xr,this.changeStyle),lo=function(){an.stopJSAnimation=co()};this.manager.start([fn,uo,lo,Xr,hn])}},{key:"runStepAnimation",value:function(on){var an=this,sn=on.steps,un=on.begin,Xr=on.onAnimationStart,to=sn[0],uo=to.style,hn=to.duration,fn=hn===void 0?0:hn,co=function(fo,ho,mo){if(mo===0)return fo;var Uo=ho.duration,_d=ho.easing,tp=_d===void 0?"ease":_d,ep=ho.style,np=ho.properties,rp=ho.onAnimationEnd,ip=mo>0?sn[mo-1]:ho,op=np||Object.keys(ep);if(typeof tp=="function"||tp==="spring")return[].concat(_toConsumableArray$3(fo),[an.runJSAnimation.bind(an,{from:ip.style,to:ep,duration:Uo,easing:tp}),Uo]);var ap=getTransitionVal(op,Uo,tp),sp=_objectSpread$l(_objectSpread$l(_objectSpread$l({},ip.style),ep),{},{transition:ap});return[].concat(_toConsumableArray$3(fo),[sp,Uo,rp]).filter(identity)};return this.manager.start([Xr].concat(_toConsumableArray$3(sn.reduce(co,[uo,Math.max(fn,un)])),[on.onAnimationEnd]))}},{key:"runAnimation",value:function(on){this.manager||(this.manager=createAnimateManager());var an=on.begin,sn=on.duration,un=on.attributeName,Xr=on.to,to=on.easing,uo=on.onAnimationStart,hn=on.onAnimationEnd,fn=on.steps,co=on.children,lo=this.manager;if(this.unSubscribe=lo.subscribe(this.handleStyleChange),typeof to=="function"||typeof co=="function"||to==="spring"){this.runJSAnimation(on);return}if(fn.length>1){this.runStepAnimation(on);return}var fo=un?_defineProperty$o({},un,Xr):Xr,ho=getTransitionVal(Object.keys(fo),sn,to);lo.start([uo,an,_objectSpread$l(_objectSpread$l({},fo),{},{transition:ho}),sn,hn])}},{key:"render",value:function(){var on=this.props,an=on.children;on.begin;var sn=on.duration;on.attributeName,on.easing;var un=on.isActive;on.steps,on.from,on.to,on.canBegin,on.onAnimationEnd,on.shouldReAnimate,on.onAnimationReStart;var Xr=_objectWithoutProperties$a(on,_excluded$a),to=reactExports.Children.count(an),uo=this.state.style;if(typeof an=="function")return an(uo);if(!un||to===0||sn<=0)return an;var hn=function(co){var lo=co.props,fo=lo.style,ho=fo===void 0?{}:fo,mo=lo.className,Uo=reactExports.cloneElement(co,_objectSpread$l(_objectSpread$l({},Xr),{},{style:_objectSpread$l(_objectSpread$l({},ho),uo),className:mo}));return Uo};return to===1?hn(reactExports.Children.only(an)):React.createElement("div",null,reactExports.Children.map(an,function(fn){return hn(fn)}))}}]),nn}(reactExports.PureComponent);Animate.displayName="Animate";Animate.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function Mt(){},onAnimationStart:function Mt(){}};Animate.propTypes={from:PropTypes.oneOfType([PropTypes.object,PropTypes.string]),to:PropTypes.oneOfType([PropTypes.object,PropTypes.string]),attributeName:PropTypes.string,duration:PropTypes.number,begin:PropTypes.number,easing:PropTypes.oneOfType([PropTypes.string,PropTypes.func]),steps:PropTypes.arrayOf(PropTypes.shape({duration:PropTypes.number.isRequired,style:PropTypes.object.isRequired,easing:PropTypes.oneOfType([PropTypes.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),PropTypes.func]),properties:PropTypes.arrayOf("string"),onAnimationEnd:PropTypes.func})),children:PropTypes.oneOfType([PropTypes.node,PropTypes.func]),isActive:PropTypes.bool,canBegin:PropTypes.bool,onAnimationEnd:PropTypes.func,shouldReAnimate:PropTypes.bool,onAnimationStart:PropTypes.func,onAnimationReStart:PropTypes.func};PropTypes.object,PropTypes.object,PropTypes.object,PropTypes.element;PropTypes.object,PropTypes.object,PropTypes.object,PropTypes.oneOfType([PropTypes.array,PropTypes.element]),PropTypes.any;function _typeof$n(Mt){"@babel/helpers - typeof";return _typeof$n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(st){return typeof st}:function(st){return st&&typeof Symbol=="function"&&st.constructor===Symbol&&st!==Symbol.prototype?"symbol":typeof st},_typeof$n(Mt)}function _extends$j(){return _extends$j=Object.assign?Object.assign.bind():function(Mt){for(var st=1;st<arguments.length;st++){var nn=arguments[st];for(var rn in nn)Object.prototype.hasOwnProperty.call(nn,rn)&&(Mt[rn]=nn[rn])}return Mt},_extends$j.apply(this,arguments)}function _slicedToArray$3(Mt,st){return _arrayWithHoles$3(Mt)||_iterableToArrayLimit$3(Mt,st)||_unsupportedIterableToArray$5(Mt,st)||_nonIterableRest$3()}function _nonIterableRest$3(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$5(Mt,st){if(Mt){if(typeof Mt=="string")return _arrayLikeToArray$5(Mt,st);var nn=Object.prototype.toString.call(Mt).slice(8,-1);if(nn==="Object"&&Mt.constructor&&(nn=Mt.constructor.name),nn==="Map"||nn==="Set")return Array.from(Mt);if(nn==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(nn))return _arrayLikeToArray$5(Mt,st)}}function _arrayLikeToArray$5(Mt,st){(st==null||st>Mt.length)&&(st=Mt.length);for(var nn=0,rn=new Array(st);nn<st;nn++)rn[nn]=Mt[nn];return rn}function _iterableToArrayLimit$3(Mt,st){var nn=Mt==null?null:typeof Symbol<"u"&&Mt[Symbol.iterator]||Mt["@@iterator"];if(nn!=null){var rn,on,an,sn,un=[],Xr=!0,to=!1;try{if(an=(nn=nn.call(Mt)).next,st!==0)for(;!(Xr=(rn=an.call(nn)).done)&&(un.push(rn.value),un.length!==st);Xr=!0);}catch(uo){to=!0,on=uo}finally{try{if(!Xr&&nn.return!=null&&(sn=nn.return(),Object(sn)!==sn))return}finally{if(to)throw on}}return un}}function _arrayWithHoles$3(Mt){if(Array.isArray(Mt))return Mt}function ownKeys$k(Mt,st){var nn=Object.keys(Mt);if(Object.getOwnPropertySymbols){var rn=Object.getOwnPropertySymbols(Mt);st&&(rn=rn.filter(function(on){return Object.getOwnPropertyDescriptor(Mt,on).enumerable})),nn.push.apply(nn,rn)}return nn}function _objectSpread$k(Mt){for(var st=1;st<arguments.length;st++){var nn=arguments[st]!=null?arguments[st]:{};st%2?ownKeys$k(Object(nn),!0).forEach(function(rn){_defineProperty$n(Mt,rn,nn[rn])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Mt,Object.getOwnPropertyDescriptors(nn)):ownKeys$k(Object(nn)).forEach(function(rn){Object.defineProperty(Mt,rn,Object.getOwnPropertyDescriptor(nn,rn))})}return Mt}function _defineProperty$n(Mt,st,nn){return st=_toPropertyKey$n(st),st in Mt?Object.defineProperty(Mt,st,{value:nn,enumerable:!0,configurable:!0,writable:!0}):Mt[st]=nn,Mt}function _toPropertyKey$n(Mt){var st=_toPrimitive$n(Mt,"string");return _typeof$n(st)=="symbol"?st:st+""}function _toPrimitive$n(Mt,st){if(_typeof$n(Mt)!="object"||!Mt)return Mt;var nn=Mt[Symbol.toPrimitive];if(nn!==void 0){var rn=nn.call(Mt,st||"default");if(_typeof$n(rn)!="object")return rn;throw new TypeError("@@toPrimitive must return a primitive value.")}return(st==="string"?String:Number)(Mt)}var getRectanglePath=function Mt(st,nn,rn,on,an){var sn=Math.min(Math.abs(rn)/2,Math.abs(on)/2),un=on>=0?1:-1,Xr=rn>=0?1:-1,to=on>=0&&rn>=0||on<0&&rn<0?1:0,uo;if(sn>0&&an instanceof Array){for(var hn=[0,0,0,0],fn=0,co=4;fn<co;fn++)hn[fn]=an[fn]>sn?sn:an[fn];uo="M".concat(st,",").concat(nn+un*hn[0]),hn[0]>0&&(uo+="A ".concat(hn[0],",").concat(hn[0],",0,0,").concat(to,",").concat(st+Xr*hn[0],",").concat(nn)),uo+="L ".concat(st+rn-Xr*hn[1],",").concat(nn),hn[1]>0&&(uo+="A ".concat(hn[1],",").concat(hn[1],",0,0,").concat(to,`,
        `).concat(st+rn,",").concat(nn+un*hn[1])),uo+="L ".concat(st+rn,",").concat(nn+on-un*hn[2]),hn[2]>0&&(uo+="A ".concat(hn[2],",").concat(hn[2],",0,0,").concat(to,`,
        `).concat(st+rn-Xr*hn[2],",").concat(nn+on)),uo+="L ".concat(st+Xr*hn[3],",").concat(nn+on),hn[3]>0&&(uo+="A ".concat(hn[3],",").concat(hn[3],",0,0,").concat(to,`,
        `).concat(st,",").concat(nn+on-un*hn[3])),uo+="Z"}else if(sn>0&&an===+an&&an>0){var lo=Math.min(sn,an);uo="M ".concat(st,",").concat(nn+un*lo,`
            A `).concat(lo,",").concat(lo,",0,0,").concat(to,",").concat(st+Xr*lo,",").concat(nn,`
            L `).concat(st+rn-Xr*lo,",").concat(nn,`
            A `).concat(lo,",").concat(lo,",0,0,").concat(to,",").concat(st+rn,",").concat(nn+un*lo,`
            L `).concat(st+rn,",").concat(nn+on-un*lo,`
            A `).concat(lo,",").concat(lo,",0,0,").concat(to,",").concat(st+rn-Xr*lo,",").concat(nn+on,`
            L `).concat(st+Xr*lo,",").concat(nn+on,`
            A `).concat(lo,",").concat(lo,",0,0,").concat(to,",").concat(st,",").concat(nn+on-un*lo," Z")}else uo="M ".concat(st,",").concat(nn," h ").concat(rn," v ").concat(on," h ").concat(-rn," Z");return uo},isInRectangle=function Mt(st,nn){if(!st||!nn)return!1;var rn=st.x,on=st.y,an=nn.x,sn=nn.y,un=nn.width,Xr=nn.height;if(Math.abs(un)>0&&Math.abs(Xr)>0){var to=Math.min(an,an+un),uo=Math.max(an,an+un),hn=Math.min(sn,sn+Xr),fn=Math.max(sn,sn+Xr);return rn>=to&&rn<=uo&&on>=hn&&on<=fn}return!1},defaultProps$2={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Rectangle=function Mt(st){var nn=_objectSpread$k(_objectSpread$k({},defaultProps$2),st),rn=reactExports.useRef(),on=reactExports.useState(-1),an=_slicedToArray$3(on,2),sn=an[0],un=an[1];reactExports.useEffect(function(){if(rn.current&&rn.current.getTotalLength)try{var tp=rn.current.getTotalLength();tp&&un(tp)}catch{}},[]);var Xr=nn.x,to=nn.y,uo=nn.width,hn=nn.height,fn=nn.radius,co=nn.className,lo=nn.animationEasing,fo=nn.animationDuration,ho=nn.animationBegin,mo=nn.isAnimationActive,Uo=nn.isUpdateAnimationActive;if(Xr!==+Xr||to!==+to||uo!==+uo||hn!==+hn||uo===0||hn===0)return null;var _d=clsx("recharts-rectangle",co);return Uo?React.createElement(Animate,{canBegin:sn>0,from:{width:uo,height:hn,x:Xr,y:to},to:{width:uo,height:hn,x:Xr,y:to},duration:fo,animationEasing:lo,isActive:Uo},function(tp){var ep=tp.width,np=tp.height,rp=tp.x,ip=tp.y;return React.createElement(Animate,{canBegin:sn>0,from:"0px ".concat(sn===-1?1:sn,"px"),to:"".concat(sn,"px 0px"),attributeName:"strokeDasharray",begin:ho,duration:fo,isActive:mo,easing:lo},React.createElement("path",_extends$j({},filterProps(nn,!0),{className:_d,d:getRectanglePath(rp,ip,ep,np,fn),ref:rn})))}):React.createElement("path",_extends$j({},filterProps(nn,!0),{className:_d,d:getRectanglePath(Xr,to,uo,hn,fn)}))},_excluded$9=["points","className","baseLinePoints","connectNulls"];function _extends$i(){return _extends$i=Object.assign?Object.assign.bind():function(Mt){for(var st=1;st<arguments.length;st++){var nn=arguments[st];for(var rn in nn)Object.prototype.hasOwnProperty.call(nn,rn)&&(Mt[rn]=nn[rn])}return Mt},_extends$i.apply(this,arguments)}function _objectWithoutProperties$9(Mt,st){if(Mt==null)return{};var nn=_objectWithoutPropertiesLoose$9(Mt,st),rn,on;if(Object.getOwnPropertySymbols){var an=Object.getOwnPropertySymbols(Mt);for(on=0;on<an.length;on++)rn=an[on],!(st.indexOf(rn)>=0)&&Object.prototype.propertyIsEnumerable.call(Mt,rn)&&(nn[rn]=Mt[rn])}return nn}function _objectWithoutPropertiesLoose$9(Mt,st){if(Mt==null)return{};var nn={};for(var rn in Mt)if(Object.prototype.hasOwnProperty.call(Mt,rn)){if(st.indexOf(rn)>=0)continue;nn[rn]=Mt[rn]}return nn}function _toConsumableArray$2(Mt){return _arrayWithoutHoles$2(Mt)||_iterableToArray$2(Mt)||_unsupportedIterableToArray$4(Mt)||_nonIterableSpread$2()}function _nonIterableSpread$2(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$4(Mt,st){if(Mt){if(typeof Mt=="string")return _arrayLikeToArray$4(Mt,st);var nn=Object.prototype.toString.call(Mt).slice(8,-1);if(nn==="Object"&&Mt.constructor&&(nn=Mt.constructor.name),nn==="Map"||nn==="Set")return Array.from(Mt);if(nn==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(nn))return _arrayLikeToArray$4(Mt,st)}}function _iterableToArray$2(Mt){if(typeof Symbol<"u"&&Mt[Symbol.iterator]!=null||Mt["@@iterator"]!=null)return Array.from(Mt)}function _arrayWithoutHoles$2(Mt){if(Array.isArray(Mt))return _arrayLikeToArray$4(Mt)}function _arrayLikeToArray$4(Mt,st){(st==null||st>Mt.length)&&(st=Mt.length);for(var nn=0,rn=new Array(st);nn<st;nn++)rn[nn]=Mt[nn];return rn}var isValidatePoint=function Mt(st){return st&&st.x===+st.x&&st.y===+st.y},getParsedPoints=function Mt(){var st=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],nn=[[]];return st.forEach(function(rn){isValidatePoint(rn)?nn[nn.length-1].push(rn):nn[nn.length-1].length>0&&nn.push([])}),isValidatePoint(st[0])&&nn[nn.length-1].push(st[0]),nn[nn.length-1].length<=0&&(nn=nn.slice(0,-1)),nn},getSinglePolygonPath=function Mt(st,nn){var rn=getParsedPoints(st);nn&&(rn=[rn.reduce(function(an,sn){return[].concat(_toConsumableArray$2(an),_toConsumableArray$2(sn))},[])]);var on=rn.map(function(an){return an.reduce(function(sn,un,Xr){return"".concat(sn).concat(Xr===0?"M":"L").concat(un.x,",").concat(un.y)},"")}).join("");return rn.length===1?"".concat(on,"Z"):on},getRanglePath=function Mt(st,nn,rn){var on=getSinglePolygonPath(st,rn);return"".concat(on.slice(-1)==="Z"?on.slice(0,-1):on,"L").concat(getSinglePolygonPath(nn.reverse(),rn).slice(1))},Polygon=function Mt(st){var nn=st.points,rn=st.className,on=st.baseLinePoints,an=st.connectNulls,sn=_objectWithoutProperties$9(st,_excluded$9);if(!nn||!nn.length)return null;var un=clsx("recharts-polygon",rn);if(on&&on.length){var Xr=sn.stroke&&sn.stroke!=="none",to=getRanglePath(nn,on,an);return React.createElement("g",{className:un},React.createElement("path",_extends$i({},filterProps(sn,!0),{fill:to.slice(-1)==="Z"?sn.fill:"none",stroke:"none",d:to})),Xr?React.createElement("path",_extends$i({},filterProps(sn,!0),{fill:"none",d:getSinglePolygonPath(nn,an)})):null,Xr?React.createElement("path",_extends$i({},filterProps(sn,!0),{fill:"none",d:getSinglePolygonPath(on,an)})):null)}var uo=getSinglePolygonPath(nn,an);return React.createElement("path",_extends$i({},filterProps(sn,!0),{fill:uo.slice(-1)==="Z"?sn.fill:"none",className:un,d:uo}))};function _extends$h(){return _extends$h=Object.assign?Object.assign.bind():function(Mt){for(var st=1;st<arguments.length;st++){var nn=arguments[st];for(var rn in nn)Object.prototype.hasOwnProperty.call(nn,rn)&&(Mt[rn]=nn[rn])}return Mt},_extends$h.apply(this,arguments)}var Dot=function Mt(st){var nn=st.cx,rn=st.cy,on=st.r,an=st.className,sn=clsx("recharts-dot",an);return nn===+nn&&rn===+rn&&on===+on?React.createElement("circle",_extends$h({},filterProps(st,!1),adaptEventHandlers(st),{className:sn,cx:nn,cy:rn,r:on})):null};function _typeof$m(Mt){"@babel/helpers - typeof";return _typeof$m=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(st){return typeof st}:function(st){return st&&typeof Symbol=="function"&&st.constructor===Symbol&&st!==Symbol.prototype?"symbol":typeof st},_typeof$m(Mt)}var _excluded$8=["x","y","top","left","width","height","className"];function _extends$g(){return _extends$g=Object.assign?Object.assign.bind():function(Mt){for(var st=1;st<arguments.length;st++){var nn=arguments[st];for(var rn in nn)Object.prototype.hasOwnProperty.call(nn,rn)&&(Mt[rn]=nn[rn])}return Mt},_extends$g.apply(this,arguments)}function ownKeys$j(Mt,st){var nn=Object.keys(Mt);if(Object.getOwnPropertySymbols){var rn=Object.getOwnPropertySymbols(Mt);st&&(rn=rn.filter(function(on){return Object.getOwnPropertyDescriptor(Mt,on).enumerable})),nn.push.apply(nn,rn)}return nn}function _objectSpread$j(Mt){for(var st=1;st<arguments.length;st++){var nn=arguments[st]!=null?arguments[st]:{};st%2?ownKeys$j(Object(nn),!0).forEach(function(rn){_defineProperty$m(Mt,rn,nn[rn])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Mt,Object.getOwnPropertyDescriptors(nn)):ownKeys$j(Object(nn)).forEach(function(rn){Object.defineProperty(Mt,rn,Object.getOwnPropertyDescriptor(nn,rn))})}return Mt}function _defineProperty$m(Mt,st,nn){return st=_toPropertyKey$m(st),st in Mt?Object.defineProperty(Mt,st,{value:nn,enumerable:!0,configurable:!0,writable:!0}):Mt[st]=nn,Mt}function _toPropertyKey$m(Mt){var st=_toPrimitive$m(Mt,"string");return _typeof$m(st)=="symbol"?st:st+""}function _toPrimitive$m(Mt,st){if(_typeof$m(Mt)!="object"||!Mt)return Mt;var nn=Mt[Symbol.toPrimitive];if(nn!==void 0){var rn=nn.call(Mt,st||"default");if(_typeof$m(rn)!="object")return rn;throw new TypeError("@@toPrimitive must return a primitive value.")}return(st==="string"?String:Number)(Mt)}function _objectWithoutProperties$8(Mt,st){if(Mt==null)return{};var nn=_objectWithoutPropertiesLoose$8(Mt,st),rn,on;if(Object.getOwnPropertySymbols){var an=Object.getOwnPropertySymbols(Mt);for(on=0;on<an.length;on++)rn=an[on],!(st.indexOf(rn)>=0)&&Object.prototype.propertyIsEnumerable.call(Mt,rn)&&(nn[rn]=Mt[rn])}return nn}function _objectWithoutPropertiesLoose$8(Mt,st){if(Mt==null)return{};var nn={};for(var rn in Mt)if(Object.prototype.hasOwnProperty.call(Mt,rn)){if(st.indexOf(rn)>=0)continue;nn[rn]=Mt[rn]}return nn}var getPath=function Mt(st,nn,rn,on,an,sn){return"M".concat(st,",").concat(an,"v").concat(on,"M").concat(sn,",").concat(nn,"h").concat(rn)},Cross=function Mt(st){var nn=st.x,rn=nn===void 0?0:nn,on=st.y,an=on===void 0?0:on,sn=st.top,un=sn===void 0?0:sn,Xr=st.left,to=Xr===void 0?0:Xr,uo=st.width,hn=uo===void 0?0:uo,fn=st.height,co=fn===void 0?0:fn,lo=st.className,fo=_objectWithoutProperties$8(st,_excluded$8),ho=_objectSpread$j({x:rn,y:an,top:un,left:to,width:hn,height:co},fo);return!isNumber(rn)||!isNumber(an)||!isNumber(hn)||!isNumber(co)||!isNumber(un)||!isNumber(to)?null:React.createElement("path",_extends$g({},filterProps(ho,!0),{className:clsx("recharts-cross",lo),d:getPath(rn,an,hn,co,un,to)}))},baseExtremum$1=_baseExtremum,baseGt=_baseGt,baseIteratee$6=_baseIteratee;function maxBy(Mt,st){return Mt&&Mt.length?baseExtremum$1(Mt,baseIteratee$6(st),baseGt):void 0}var maxBy_1=maxBy;const maxBy$1=getDefaultExportFromCjs(maxBy_1);var baseExtremum=_baseExtremum,baseIteratee$5=_baseIteratee,baseLt=_baseLt;function minBy(Mt,st){return Mt&&Mt.length?baseExtremum(Mt,baseIteratee$5(st),baseLt):void 0}var minBy_1=minBy;const minBy$1=getDefaultExportFromCjs(minBy_1);var _excluded$7=["cx","cy","angle","ticks","axisLine"],_excluded2$4=["ticks","tick","angle","tickFormatter","stroke"];function _typeof$l(Mt){"@babel/helpers - typeof";return _typeof$l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(st){return typeof st}:function(st){return st&&typeof Symbol=="function"&&st.constructor===Symbol&&st!==Symbol.prototype?"symbol":typeof st},_typeof$l(Mt)}function _extends$f(){return _extends$f=Object.assign?Object.assign.bind():function(Mt){for(var st=1;st<arguments.length;st++){var nn=arguments[st];for(var rn in nn)Object.prototype.hasOwnProperty.call(nn,rn)&&(Mt[rn]=nn[rn])}return Mt},_extends$f.apply(this,arguments)}function ownKeys$i(Mt,st){var nn=Object.keys(Mt);if(Object.getOwnPropertySymbols){var rn=Object.getOwnPropertySymbols(Mt);st&&(rn=rn.filter(function(on){return Object.getOwnPropertyDescriptor(Mt,on).enumerable})),nn.push.apply(nn,rn)}return nn}function _objectSpread$i(Mt){for(var st=1;st<arguments.length;st++){var nn=arguments[st]!=null?arguments[st]:{};st%2?ownKeys$i(Object(nn),!0).forEach(function(rn){_defineProperty$l(Mt,rn,nn[rn])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Mt,Object.getOwnPropertyDescriptors(nn)):ownKeys$i(Object(nn)).forEach(function(rn){Object.defineProperty(Mt,rn,Object.getOwnPropertyDescriptor(nn,rn))})}return Mt}function _objectWithoutProperties$7(Mt,st){if(Mt==null)return{};var nn=_objectWithoutPropertiesLoose$7(Mt,st),rn,on;if(Object.getOwnPropertySymbols){var an=Object.getOwnPropertySymbols(Mt);for(on=0;on<an.length;on++)rn=an[on],!(st.indexOf(rn)>=0)&&Object.prototype.propertyIsEnumerable.call(Mt,rn)&&(nn[rn]=Mt[rn])}return nn}function _objectWithoutPropertiesLoose$7(Mt,st){if(Mt==null)return{};var nn={};for(var rn in Mt)if(Object.prototype.hasOwnProperty.call(Mt,rn)){if(st.indexOf(rn)>=0)continue;nn[rn]=Mt[rn]}return nn}function _classCallCheck$e(Mt,st){if(!(Mt instanceof st))throw new TypeError("Cannot call a class as a function")}function _defineProperties$e(Mt,st){for(var nn=0;nn<st.length;nn++){var rn=st[nn];rn.enumerable=rn.enumerable||!1,rn.configurable=!0,"value"in rn&&(rn.writable=!0),Object.defineProperty(Mt,_toPropertyKey$l(rn.key),rn)}}function _createClass$e(Mt,st,nn){return st&&_defineProperties$e(Mt.prototype,st),nn&&_defineProperties$e(Mt,nn),Object.defineProperty(Mt,"prototype",{writable:!1}),Mt}function _callSuper$c(Mt,st,nn){return st=_getPrototypeOf$c(st),_possibleConstructorReturn$c(Mt,_isNativeReflectConstruct$c()?Reflect.construct(st,nn||[],_getPrototypeOf$c(Mt).constructor):st.apply(Mt,nn))}function _possibleConstructorReturn$c(Mt,st){if(st&&(_typeof$l(st)==="object"||typeof st=="function"))return st;if(st!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$c(Mt)}function _assertThisInitialized$c(Mt){if(Mt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Mt}function _isNativeReflectConstruct$c(){try{var Mt=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_isNativeReflectConstruct$c=function(){return!!Mt})()}function _getPrototypeOf$c(Mt){return _getPrototypeOf$c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(nn){return nn.__proto__||Object.getPrototypeOf(nn)},_getPrototypeOf$c(Mt)}function _inherits$c(Mt,st){if(typeof st!="function"&&st!==null)throw new TypeError("Super expression must either be null or a function");Mt.prototype=Object.create(st&&st.prototype,{constructor:{value:Mt,writable:!0,configurable:!0}}),Object.defineProperty(Mt,"prototype",{writable:!1}),st&&_setPrototypeOf$c(Mt,st)}function _setPrototypeOf$c(Mt,st){return _setPrototypeOf$c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(rn,on){return rn.__proto__=on,rn},_setPrototypeOf$c(Mt,st)}function _defineProperty$l(Mt,st,nn){return st=_toPropertyKey$l(st),st in Mt?Object.defineProperty(Mt,st,{value:nn,enumerable:!0,configurable:!0,writable:!0}):Mt[st]=nn,Mt}function _toPropertyKey$l(Mt){var st=_toPrimitive$l(Mt,"string");return _typeof$l(st)=="symbol"?st:st+""}function _toPrimitive$l(Mt,st){if(_typeof$l(Mt)!="object"||!Mt)return Mt;var nn=Mt[Symbol.toPrimitive];if(nn!==void 0){var rn=nn.call(Mt,st||"default");if(_typeof$l(rn)!="object")return rn;throw new TypeError("@@toPrimitive must return a primitive value.")}return(st==="string"?String:Number)(Mt)}var PolarRadiusAxis=function(Mt){function st(){return _classCallCheck$e(this,st),_callSuper$c(this,st,arguments)}return _inherits$c(st,Mt),_createClass$e(st,[{key:"getTickValueCoord",value:function(rn){var on=rn.coordinate,an=this.props,sn=an.angle,un=an.cx,Xr=an.cy;return polarToCartesian(un,Xr,on,sn)}},{key:"getTickTextAnchor",value:function(){var rn=this.props.orientation,on;switch(rn){case"left":on="end";break;case"right":on="start";break;default:on="middle";break}return on}},{key:"getViewBox",value:function(){var rn=this.props,on=rn.cx,an=rn.cy,sn=rn.angle,un=rn.ticks,Xr=maxBy$1(un,function(uo){return uo.coordinate||0}),to=minBy$1(un,function(uo){return uo.coordinate||0});return{cx:on,cy:an,startAngle:sn,endAngle:sn,innerRadius:to.coordinate||0,outerRadius:Xr.coordinate||0}}},{key:"renderAxisLine",value:function(){var rn=this.props,on=rn.cx,an=rn.cy,sn=rn.angle,un=rn.ticks,Xr=rn.axisLine,to=_objectWithoutProperties$7(rn,_excluded$7),uo=un.reduce(function(lo,fo){return[Math.min(lo[0],fo.coordinate),Math.max(lo[1],fo.coordinate)]},[1/0,-1/0]),hn=polarToCartesian(on,an,uo[0],sn),fn=polarToCartesian(on,an,uo[1],sn),co=_objectSpread$i(_objectSpread$i(_objectSpread$i({},filterProps(to,!1)),{},{fill:"none"},filterProps(Xr,!1)),{},{x1:hn.x,y1:hn.y,x2:fn.x,y2:fn.y});return React.createElement("line",_extends$f({className:"recharts-polar-radius-axis-line"},co))}},{key:"renderTicks",value:function(){var rn=this,on=this.props,an=on.ticks,sn=on.tick,un=on.angle,Xr=on.tickFormatter,to=on.stroke,uo=_objectWithoutProperties$7(on,_excluded2$4),hn=this.getTickTextAnchor(),fn=filterProps(uo,!1),co=filterProps(sn,!1),lo=an.map(function(fo,ho){var mo=rn.getTickValueCoord(fo),Uo=_objectSpread$i(_objectSpread$i(_objectSpread$i(_objectSpread$i({textAnchor:hn,transform:"rotate(".concat(90-un,", ").concat(mo.x,", ").concat(mo.y,")")},fn),{},{stroke:"none",fill:to},co),{},{index:ho},mo),{},{payload:fo});return React.createElement(Layer,_extends$f({className:clsx("recharts-polar-radius-axis-tick",getTickClassName(sn)),key:"tick-".concat(fo.coordinate)},adaptEventsOfChild(rn.props,fo,ho)),st.renderTickItem(sn,Uo,Xr?Xr(fo.value,ho):fo.value))});return React.createElement(Layer,{className:"recharts-polar-radius-axis-ticks"},lo)}},{key:"render",value:function(){var rn=this.props,on=rn.ticks,an=rn.axisLine,sn=rn.tick;return!on||!on.length?null:React.createElement(Layer,{className:clsx("recharts-polar-radius-axis",this.props.className)},an&&this.renderAxisLine(),sn&&this.renderTicks(),Label.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(rn,on,an){var sn;return React.isValidElement(rn)?sn=React.cloneElement(rn,on):isFunction$3(rn)?sn=rn(on):sn=React.createElement(Text,_extends$f({},on,{className:"recharts-polar-radius-axis-tick-value"}),an),sn}}])}(reactExports.PureComponent);_defineProperty$l(PolarRadiusAxis,"displayName","PolarRadiusAxis");_defineProperty$l(PolarRadiusAxis,"axisType","radiusAxis");_defineProperty$l(PolarRadiusAxis,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function _typeof$k(Mt){"@babel/helpers - typeof";return _typeof$k=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(st){return typeof st}:function(st){return st&&typeof Symbol=="function"&&st.constructor===Symbol&&st!==Symbol.prototype?"symbol":typeof st},_typeof$k(Mt)}function _extends$e(){return _extends$e=Object.assign?Object.assign.bind():function(Mt){for(var st=1;st<arguments.length;st++){var nn=arguments[st];for(var rn in nn)Object.prototype.hasOwnProperty.call(nn,rn)&&(Mt[rn]=nn[rn])}return Mt},_extends$e.apply(this,arguments)}function ownKeys$h(Mt,st){var nn=Object.keys(Mt);if(Object.getOwnPropertySymbols){var rn=Object.getOwnPropertySymbols(Mt);st&&(rn=rn.filter(function(on){return Object.getOwnPropertyDescriptor(Mt,on).enumerable})),nn.push.apply(nn,rn)}return nn}function _objectSpread$h(Mt){for(var st=1;st<arguments.length;st++){var nn=arguments[st]!=null?arguments[st]:{};st%2?ownKeys$h(Object(nn),!0).forEach(function(rn){_defineProperty$k(Mt,rn,nn[rn])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Mt,Object.getOwnPropertyDescriptors(nn)):ownKeys$h(Object(nn)).forEach(function(rn){Object.defineProperty(Mt,rn,Object.getOwnPropertyDescriptor(nn,rn))})}return Mt}function _classCallCheck$d(Mt,st){if(!(Mt instanceof st))throw new TypeError("Cannot call a class as a function")}function _defineProperties$d(Mt,st){for(var nn=0;nn<st.length;nn++){var rn=st[nn];rn.enumerable=rn.enumerable||!1,rn.configurable=!0,"value"in rn&&(rn.writable=!0),Object.defineProperty(Mt,_toPropertyKey$k(rn.key),rn)}}function _createClass$d(Mt,st,nn){return st&&_defineProperties$d(Mt.prototype,st),nn&&_defineProperties$d(Mt,nn),Object.defineProperty(Mt,"prototype",{writable:!1}),Mt}function _callSuper$b(Mt,st,nn){return st=_getPrototypeOf$b(st),_possibleConstructorReturn$b(Mt,_isNativeReflectConstruct$b()?Reflect.construct(st,nn||[],_getPrototypeOf$b(Mt).constructor):st.apply(Mt,nn))}function _possibleConstructorReturn$b(Mt,st){if(st&&(_typeof$k(st)==="object"||typeof st=="function"))return st;if(st!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$b(Mt)}function _assertThisInitialized$b(Mt){if(Mt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Mt}function _isNativeReflectConstruct$b(){try{var Mt=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_isNativeReflectConstruct$b=function(){return!!Mt})()}function _getPrototypeOf$b(Mt){return _getPrototypeOf$b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(nn){return nn.__proto__||Object.getPrototypeOf(nn)},_getPrototypeOf$b(Mt)}function _inherits$b(Mt,st){if(typeof st!="function"&&st!==null)throw new TypeError("Super expression must either be null or a function");Mt.prototype=Object.create(st&&st.prototype,{constructor:{value:Mt,writable:!0,configurable:!0}}),Object.defineProperty(Mt,"prototype",{writable:!1}),st&&_setPrototypeOf$b(Mt,st)}function _setPrototypeOf$b(Mt,st){return _setPrototypeOf$b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(rn,on){return rn.__proto__=on,rn},_setPrototypeOf$b(Mt,st)}function _defineProperty$k(Mt,st,nn){return st=_toPropertyKey$k(st),st in Mt?Object.defineProperty(Mt,st,{value:nn,enumerable:!0,configurable:!0,writable:!0}):Mt[st]=nn,Mt}function _toPropertyKey$k(Mt){var st=_toPrimitive$k(Mt,"string");return _typeof$k(st)=="symbol"?st:st+""}function _toPrimitive$k(Mt,st){if(_typeof$k(Mt)!="object"||!Mt)return Mt;var nn=Mt[Symbol.toPrimitive];if(nn!==void 0){var rn=nn.call(Mt,st||"default");if(_typeof$k(rn)!="object")return rn;throw new TypeError("@@toPrimitive must return a primitive value.")}return(st==="string"?String:Number)(Mt)}var RADIAN=Math.PI/180,eps=1e-5,PolarAngleAxis=function(Mt){function st(){return _classCallCheck$d(this,st),_callSuper$b(this,st,arguments)}return _inherits$b(st,Mt),_createClass$d(st,[{key:"getTickLineCoord",value:function(rn){var on=this.props,an=on.cx,sn=on.cy,un=on.radius,Xr=on.orientation,to=on.tickSize,uo=to||8,hn=polarToCartesian(an,sn,un,rn.coordinate),fn=polarToCartesian(an,sn,un+(Xr==="inner"?-1:1)*uo,rn.coordinate);return{x1:hn.x,y1:hn.y,x2:fn.x,y2:fn.y}}},{key:"getTickTextAnchor",value:function(rn){var on=this.props.orientation,an=Math.cos(-rn.coordinate*RADIAN),sn;return an>eps?sn=on==="outer"?"start":"end":an<-eps?sn=on==="outer"?"end":"start":sn="middle",sn}},{key:"renderAxisLine",value:function(){var rn=this.props,on=rn.cx,an=rn.cy,sn=rn.radius,un=rn.axisLine,Xr=rn.axisLineType,to=_objectSpread$h(_objectSpread$h({},filterProps(this.props,!1)),{},{fill:"none"},filterProps(un,!1));if(Xr==="circle")return React.createElement(Dot,_extends$e({className:"recharts-polar-angle-axis-line"},to,{cx:on,cy:an,r:sn}));var uo=this.props.ticks,hn=uo.map(function(fn){return polarToCartesian(on,an,sn,fn.coordinate)});return React.createElement(Polygon,_extends$e({className:"recharts-polar-angle-axis-line"},to,{points:hn}))}},{key:"renderTicks",value:function(){var rn=this,on=this.props,an=on.ticks,sn=on.tick,un=on.tickLine,Xr=on.tickFormatter,to=on.stroke,uo=filterProps(this.props,!1),hn=filterProps(sn,!1),fn=_objectSpread$h(_objectSpread$h({},uo),{},{fill:"none"},filterProps(un,!1)),co=an.map(function(lo,fo){var ho=rn.getTickLineCoord(lo),mo=rn.getTickTextAnchor(lo),Uo=_objectSpread$h(_objectSpread$h(_objectSpread$h({textAnchor:mo},uo),{},{stroke:"none",fill:to},hn),{},{index:fo,payload:lo,x:ho.x2,y:ho.y2});return React.createElement(Layer,_extends$e({className:clsx("recharts-polar-angle-axis-tick",getTickClassName(sn)),key:"tick-".concat(lo.coordinate)},adaptEventsOfChild(rn.props,lo,fo)),un&&React.createElement("line",_extends$e({className:"recharts-polar-angle-axis-tick-line"},fn,ho)),sn&&st.renderTickItem(sn,Uo,Xr?Xr(lo.value,fo):lo.value))});return React.createElement(Layer,{className:"recharts-polar-angle-axis-ticks"},co)}},{key:"render",value:function(){var rn=this.props,on=rn.ticks,an=rn.radius,sn=rn.axisLine;return an<=0||!on||!on.length?null:React.createElement(Layer,{className:clsx("recharts-polar-angle-axis",this.props.className)},sn&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(rn,on,an){var sn;return React.isValidElement(rn)?sn=React.cloneElement(rn,on):isFunction$3(rn)?sn=rn(on):sn=React.createElement(Text,_extends$e({},on,{className:"recharts-polar-angle-axis-tick-value"}),an),sn}}])}(reactExports.PureComponent);_defineProperty$k(PolarAngleAxis,"displayName","PolarAngleAxis");_defineProperty$k(PolarAngleAxis,"axisType","angleAxis");_defineProperty$k(PolarAngleAxis,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var overArg=_overArg,getPrototype$1=overArg(Object.getPrototypeOf,Object),_getPrototype=getPrototype$1,baseGetTag$1=_baseGetTag,getPrototype=_getPrototype,isObjectLike$1=isObjectLike_1,objectTag="[object Object]",funcProto=Function.prototype,objectProto=Object.prototype,funcToString=funcProto.toString,hasOwnProperty=objectProto.hasOwnProperty,objectCtorString=funcToString.call(Object);function isPlainObject(Mt){if(!isObjectLike$1(Mt)||baseGetTag$1(Mt)!=objectTag)return!1;var st=getPrototype(Mt);if(st===null)return!0;var nn=hasOwnProperty.call(st,"constructor")&&st.constructor;return typeof nn=="function"&&nn instanceof nn&&funcToString.call(nn)==objectCtorString}var isPlainObject_1=isPlainObject;const isPlainObject$1=getDefaultExportFromCjs(isPlainObject_1);var baseGetTag=_baseGetTag,isObjectLike=isObjectLike_1,boolTag="[object Boolean]";function isBoolean(Mt){return Mt===!0||Mt===!1||isObjectLike(Mt)&&baseGetTag(Mt)==boolTag}var isBoolean_1=isBoolean;const isBoolean$1=getDefaultExportFromCjs(isBoolean_1);function _typeof$j(Mt){"@babel/helpers - typeof";return _typeof$j=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(st){return typeof st}:function(st){return st&&typeof Symbol=="function"&&st.constructor===Symbol&&st!==Symbol.prototype?"symbol":typeof st},_typeof$j(Mt)}function _extends$d(){return _extends$d=Object.assign?Object.assign.bind():function(Mt){for(var st=1;st<arguments.length;st++){var nn=arguments[st];for(var rn in nn)Object.prototype.hasOwnProperty.call(nn,rn)&&(Mt[rn]=nn[rn])}return Mt},_extends$d.apply(this,arguments)}function _slicedToArray$2(Mt,st){return _arrayWithHoles$2(Mt)||_iterableToArrayLimit$2(Mt,st)||_unsupportedIterableToArray$3(Mt,st)||_nonIterableRest$2()}function _nonIterableRest$2(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$3(Mt,st){if(Mt){if(typeof Mt=="string")return _arrayLikeToArray$3(Mt,st);var nn=Object.prototype.toString.call(Mt).slice(8,-1);if(nn==="Object"&&Mt.constructor&&(nn=Mt.constructor.name),nn==="Map"||nn==="Set")return Array.from(Mt);if(nn==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(nn))return _arrayLikeToArray$3(Mt,st)}}function _arrayLikeToArray$3(Mt,st){(st==null||st>Mt.length)&&(st=Mt.length);for(var nn=0,rn=new Array(st);nn<st;nn++)rn[nn]=Mt[nn];return rn}function _iterableToArrayLimit$2(Mt,st){var nn=Mt==null?null:typeof Symbol<"u"&&Mt[Symbol.iterator]||Mt["@@iterator"];if(nn!=null){var rn,on,an,sn,un=[],Xr=!0,to=!1;try{if(an=(nn=nn.call(Mt)).next,st!==0)for(;!(Xr=(rn=an.call(nn)).done)&&(un.push(rn.value),un.length!==st);Xr=!0);}catch(uo){to=!0,on=uo}finally{try{if(!Xr&&nn.return!=null&&(sn=nn.return(),Object(sn)!==sn))return}finally{if(to)throw on}}return un}}function _arrayWithHoles$2(Mt){if(Array.isArray(Mt))return Mt}function ownKeys$g(Mt,st){var nn=Object.keys(Mt);if(Object.getOwnPropertySymbols){var rn=Object.getOwnPropertySymbols(Mt);st&&(rn=rn.filter(function(on){return Object.getOwnPropertyDescriptor(Mt,on).enumerable})),nn.push.apply(nn,rn)}return nn}function _objectSpread$g(Mt){for(var st=1;st<arguments.length;st++){var nn=arguments[st]!=null?arguments[st]:{};st%2?ownKeys$g(Object(nn),!0).forEach(function(rn){_defineProperty$j(Mt,rn,nn[rn])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Mt,Object.getOwnPropertyDescriptors(nn)):ownKeys$g(Object(nn)).forEach(function(rn){Object.defineProperty(Mt,rn,Object.getOwnPropertyDescriptor(nn,rn))})}return Mt}function _defineProperty$j(Mt,st,nn){return st=_toPropertyKey$j(st),st in Mt?Object.defineProperty(Mt,st,{value:nn,enumerable:!0,configurable:!0,writable:!0}):Mt[st]=nn,Mt}function _toPropertyKey$j(Mt){var st=_toPrimitive$j(Mt,"string");return _typeof$j(st)=="symbol"?st:st+""}function _toPrimitive$j(Mt,st){if(_typeof$j(Mt)!="object"||!Mt)return Mt;var nn=Mt[Symbol.toPrimitive];if(nn!==void 0){var rn=nn.call(Mt,st||"default");if(_typeof$j(rn)!="object")return rn;throw new TypeError("@@toPrimitive must return a primitive value.")}return(st==="string"?String:Number)(Mt)}var getTrapezoidPath=function Mt(st,nn,rn,on,an){var sn=rn-on,un;return un="M ".concat(st,",").concat(nn),un+="L ".concat(st+rn,",").concat(nn),un+="L ".concat(st+rn-sn/2,",").concat(nn+an),un+="L ".concat(st+rn-sn/2-on,",").concat(nn+an),un+="L ".concat(st,",").concat(nn," Z"),un},defaultProps$1={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Trapezoid=function Mt(st){var nn=_objectSpread$g(_objectSpread$g({},defaultProps$1),st),rn=reactExports.useRef(),on=reactExports.useState(-1),an=_slicedToArray$2(on,2),sn=an[0],un=an[1];reactExports.useEffect(function(){if(rn.current&&rn.current.getTotalLength)try{var _d=rn.current.getTotalLength();_d&&un(_d)}catch{}},[]);var Xr=nn.x,to=nn.y,uo=nn.upperWidth,hn=nn.lowerWidth,fn=nn.height,co=nn.className,lo=nn.animationEasing,fo=nn.animationDuration,ho=nn.animationBegin,mo=nn.isUpdateAnimationActive;if(Xr!==+Xr||to!==+to||uo!==+uo||hn!==+hn||fn!==+fn||uo===0&&hn===0||fn===0)return null;var Uo=clsx("recharts-trapezoid",co);return mo?React.createElement(Animate,{canBegin:sn>0,from:{upperWidth:0,lowerWidth:0,height:fn,x:Xr,y:to},to:{upperWidth:uo,lowerWidth:hn,height:fn,x:Xr,y:to},duration:fo,animationEasing:lo,isActive:mo},function(_d){var tp=_d.upperWidth,ep=_d.lowerWidth,np=_d.height,rp=_d.x,ip=_d.y;return React.createElement(Animate,{canBegin:sn>0,from:"0px ".concat(sn===-1?1:sn,"px"),to:"".concat(sn,"px 0px"),attributeName:"strokeDasharray",begin:ho,duration:fo,easing:lo},React.createElement("path",_extends$d({},filterProps(nn,!0),{className:Uo,d:getTrapezoidPath(rp,ip,tp,ep,np),ref:rn})))}):React.createElement("g",null,React.createElement("path",_extends$d({},filterProps(nn,!0),{className:Uo,d:getTrapezoidPath(Xr,to,uo,hn,fn)})))},_excluded$6=["option","shapeType","propTransformer","activeClassName","isActive"];function _typeof$i(Mt){"@babel/helpers - typeof";return _typeof$i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(st){return typeof st}:function(st){return st&&typeof Symbol=="function"&&st.constructor===Symbol&&st!==Symbol.prototype?"symbol":typeof st},_typeof$i(Mt)}function _objectWithoutProperties$6(Mt,st){if(Mt==null)return{};var nn=_objectWithoutPropertiesLoose$6(Mt,st),rn,on;if(Object.getOwnPropertySymbols){var an=Object.getOwnPropertySymbols(Mt);for(on=0;on<an.length;on++)rn=an[on],!(st.indexOf(rn)>=0)&&Object.prototype.propertyIsEnumerable.call(Mt,rn)&&(nn[rn]=Mt[rn])}return nn}function _objectWithoutPropertiesLoose$6(Mt,st){if(Mt==null)return{};var nn={};for(var rn in Mt)if(Object.prototype.hasOwnProperty.call(Mt,rn)){if(st.indexOf(rn)>=0)continue;nn[rn]=Mt[rn]}return nn}function ownKeys$f(Mt,st){var nn=Object.keys(Mt);if(Object.getOwnPropertySymbols){var rn=Object.getOwnPropertySymbols(Mt);st&&(rn=rn.filter(function(on){return Object.getOwnPropertyDescriptor(Mt,on).enumerable})),nn.push.apply(nn,rn)}return nn}function _objectSpread$f(Mt){for(var st=1;st<arguments.length;st++){var nn=arguments[st]!=null?arguments[st]:{};st%2?ownKeys$f(Object(nn),!0).forEach(function(rn){_defineProperty$i(Mt,rn,nn[rn])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Mt,Object.getOwnPropertyDescriptors(nn)):ownKeys$f(Object(nn)).forEach(function(rn){Object.defineProperty(Mt,rn,Object.getOwnPropertyDescriptor(nn,rn))})}return Mt}function _defineProperty$i(Mt,st,nn){return st=_toPropertyKey$i(st),st in Mt?Object.defineProperty(Mt,st,{value:nn,enumerable:!0,configurable:!0,writable:!0}):Mt[st]=nn,Mt}function _toPropertyKey$i(Mt){var st=_toPrimitive$i(Mt,"string");return _typeof$i(st)=="symbol"?st:st+""}function _toPrimitive$i(Mt,st){if(_typeof$i(Mt)!="object"||!Mt)return Mt;var nn=Mt[Symbol.toPrimitive];if(nn!==void 0){var rn=nn.call(Mt,st||"default");if(_typeof$i(rn)!="object")return rn;throw new TypeError("@@toPrimitive must return a primitive value.")}return(st==="string"?String:Number)(Mt)}function defaultPropTransformer(Mt,st){return _objectSpread$f(_objectSpread$f({},st),Mt)}function isSymbolsProps(Mt,st){return Mt==="symbols"}function ShapeSelector(Mt){var st=Mt.shapeType,nn=Mt.elementProps;switch(st){case"rectangle":return React.createElement(Rectangle,nn);case"trapezoid":return React.createElement(Trapezoid,nn);case"sector":return React.createElement(Sector,nn);case"symbols":if(isSymbolsProps(st))return React.createElement(Symbols,nn);break;default:return null}}function getPropsFromShapeOption(Mt){return reactExports.isValidElement(Mt)?Mt.props:Mt}function Shape(Mt){var st=Mt.option,nn=Mt.shapeType,rn=Mt.propTransformer,on=rn===void 0?defaultPropTransformer:rn,an=Mt.activeClassName,sn=an===void 0?"recharts-active-shape":an,un=Mt.isActive,Xr=_objectWithoutProperties$6(Mt,_excluded$6),to;if(reactExports.isValidElement(st))to=reactExports.cloneElement(st,_objectSpread$f(_objectSpread$f({},Xr),getPropsFromShapeOption(st)));else if(isFunction$3(st))to=st(Xr);else if(isPlainObject$1(st)&&!isBoolean$1(st)){var uo=on(st,Xr);to=React.createElement(ShapeSelector,{shapeType:nn,elementProps:uo})}else{var hn=Xr;to=React.createElement(ShapeSelector,{shapeType:nn,elementProps:hn})}return un?React.createElement(Layer,{className:sn},to):to}function isFunnel(Mt,st){return st!=null&&"trapezoids"in Mt.props}function isPie(Mt,st){return st!=null&&"sectors"in Mt.props}function isScatter(Mt,st){return st!=null&&"points"in Mt.props}function compareFunnel(Mt,st){var nn,rn,on=Mt.x===(st==null||(nn=st.labelViewBox)===null||nn===void 0?void 0:nn.x)||Mt.x===st.x,an=Mt.y===(st==null||(rn=st.labelViewBox)===null||rn===void 0?void 0:rn.y)||Mt.y===st.y;return on&&an}function comparePie(Mt,st){var nn=Mt.endAngle===st.endAngle,rn=Mt.startAngle===st.startAngle;return nn&&rn}function compareScatter(Mt,st){var nn=Mt.x===st.x,rn=Mt.y===st.y,on=Mt.z===st.z;return nn&&rn&&on}function getComparisonFn(Mt,st){var nn;return isFunnel(Mt,st)?nn=compareFunnel:isPie(Mt,st)?nn=comparePie:isScatter(Mt,st)&&(nn=compareScatter),nn}function getShapeDataKey(Mt,st){var nn;return isFunnel(Mt,st)?nn="trapezoids":isPie(Mt,st)?nn="sectors":isScatter(Mt,st)&&(nn="points"),nn}function getActiveShapeTooltipPayload(Mt,st){if(isFunnel(Mt,st)){var nn;return(nn=st.tooltipPayload)===null||nn===void 0||(nn=nn[0])===null||nn===void 0||(nn=nn.payload)===null||nn===void 0?void 0:nn.payload}if(isPie(Mt,st)){var rn;return(rn=st.tooltipPayload)===null||rn===void 0||(rn=rn[0])===null||rn===void 0||(rn=rn.payload)===null||rn===void 0?void 0:rn.payload}return isScatter(Mt,st)?st.payload:{}}function getActiveShapeIndexForTooltip(Mt){var st=Mt.activeTooltipItem,nn=Mt.graphicalItem,rn=Mt.itemData,on=getShapeDataKey(nn,st),an=getActiveShapeTooltipPayload(nn,st),sn=rn.filter(function(Xr,to){var uo=isEqual$1(an,Xr),hn=nn.props[on].filter(function(lo){var fo=getComparisonFn(nn,st);return fo(lo,st)}),fn=nn.props[on].indexOf(hn[hn.length-1]),co=to===fn;return uo&&co}),un=rn.indexOf(sn[sn.length-1]);return un}var _Pie;function _typeof$h(Mt){"@babel/helpers - typeof";return _typeof$h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(st){return typeof st}:function(st){return st&&typeof Symbol=="function"&&st.constructor===Symbol&&st!==Symbol.prototype?"symbol":typeof st},_typeof$h(Mt)}function _extends$c(){return _extends$c=Object.assign?Object.assign.bind():function(Mt){for(var st=1;st<arguments.length;st++){var nn=arguments[st];for(var rn in nn)Object.prototype.hasOwnProperty.call(nn,rn)&&(Mt[rn]=nn[rn])}return Mt},_extends$c.apply(this,arguments)}function ownKeys$e(Mt,st){var nn=Object.keys(Mt);if(Object.getOwnPropertySymbols){var rn=Object.getOwnPropertySymbols(Mt);st&&(rn=rn.filter(function(on){return Object.getOwnPropertyDescriptor(Mt,on).enumerable})),nn.push.apply(nn,rn)}return nn}function _objectSpread$e(Mt){for(var st=1;st<arguments.length;st++){var nn=arguments[st]!=null?arguments[st]:{};st%2?ownKeys$e(Object(nn),!0).forEach(function(rn){_defineProperty$h(Mt,rn,nn[rn])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Mt,Object.getOwnPropertyDescriptors(nn)):ownKeys$e(Object(nn)).forEach(function(rn){Object.defineProperty(Mt,rn,Object.getOwnPropertyDescriptor(nn,rn))})}return Mt}function _classCallCheck$c(Mt,st){if(!(Mt instanceof st))throw new TypeError("Cannot call a class as a function")}function _defineProperties$c(Mt,st){for(var nn=0;nn<st.length;nn++){var rn=st[nn];rn.enumerable=rn.enumerable||!1,rn.configurable=!0,"value"in rn&&(rn.writable=!0),Object.defineProperty(Mt,_toPropertyKey$h(rn.key),rn)}}function _createClass$c(Mt,st,nn){return st&&_defineProperties$c(Mt.prototype,st),nn&&_defineProperties$c(Mt,nn),Object.defineProperty(Mt,"prototype",{writable:!1}),Mt}function _callSuper$a(Mt,st,nn){return st=_getPrototypeOf$a(st),_possibleConstructorReturn$a(Mt,_isNativeReflectConstruct$a()?Reflect.construct(st,nn||[],_getPrototypeOf$a(Mt).constructor):st.apply(Mt,nn))}function _possibleConstructorReturn$a(Mt,st){if(st&&(_typeof$h(st)==="object"||typeof st=="function"))return st;if(st!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$a(Mt)}function _assertThisInitialized$a(Mt){if(Mt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Mt}function _isNativeReflectConstruct$a(){try{var Mt=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_isNativeReflectConstruct$a=function(){return!!Mt})()}function _getPrototypeOf$a(Mt){return _getPrototypeOf$a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(nn){return nn.__proto__||Object.getPrototypeOf(nn)},_getPrototypeOf$a(Mt)}function _inherits$a(Mt,st){if(typeof st!="function"&&st!==null)throw new TypeError("Super expression must either be null or a function");Mt.prototype=Object.create(st&&st.prototype,{constructor:{value:Mt,writable:!0,configurable:!0}}),Object.defineProperty(Mt,"prototype",{writable:!1}),st&&_setPrototypeOf$a(Mt,st)}function _setPrototypeOf$a(Mt,st){return _setPrototypeOf$a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(rn,on){return rn.__proto__=on,rn},_setPrototypeOf$a(Mt,st)}function _defineProperty$h(Mt,st,nn){return st=_toPropertyKey$h(st),st in Mt?Object.defineProperty(Mt,st,{value:nn,enumerable:!0,configurable:!0,writable:!0}):Mt[st]=nn,Mt}function _toPropertyKey$h(Mt){var st=_toPrimitive$h(Mt,"string");return _typeof$h(st)=="symbol"?st:st+""}function _toPrimitive$h(Mt,st){if(_typeof$h(Mt)!="object"||!Mt)return Mt;var nn=Mt[Symbol.toPrimitive];if(nn!==void 0){var rn=nn.call(Mt,st||"default");if(_typeof$h(rn)!="object")return rn;throw new TypeError("@@toPrimitive must return a primitive value.")}return(st==="string"?String:Number)(Mt)}var Pie=function(Mt){function st(nn){var rn;return _classCallCheck$c(this,st),rn=_callSuper$a(this,st,[nn]),_defineProperty$h(rn,"pieRef",null),_defineProperty$h(rn,"sectorRefs",[]),_defineProperty$h(rn,"id",uniqueId("recharts-pie-")),_defineProperty$h(rn,"handleAnimationEnd",function(){var on=rn.props.onAnimationEnd;rn.setState({isAnimationFinished:!0}),isFunction$3(on)&&on()}),_defineProperty$h(rn,"handleAnimationStart",function(){var on=rn.props.onAnimationStart;rn.setState({isAnimationFinished:!1}),isFunction$3(on)&&on()}),rn.state={isAnimationFinished:!nn.isAnimationActive,prevIsAnimationActive:nn.isAnimationActive,prevAnimationId:nn.animationId,sectorToFocus:0},rn}return _inherits$a(st,Mt),_createClass$c(st,[{key:"isActiveIndex",value:function(rn){var on=this.props.activeIndex;return Array.isArray(on)?on.indexOf(rn)!==-1:rn===on}},{key:"hasActiveIndex",value:function(){var rn=this.props.activeIndex;return Array.isArray(rn)?rn.length!==0:rn||rn===0}},{key:"renderLabels",value:function(rn){var on=this.props.isAnimationActive;if(on&&!this.state.isAnimationFinished)return null;var an=this.props,sn=an.label,un=an.labelLine,Xr=an.dataKey,to=an.valueKey,uo=filterProps(this.props,!1),hn=filterProps(sn,!1),fn=filterProps(un,!1),co=sn&&sn.offsetRadius||20,lo=rn.map(function(fo,ho){var mo=(fo.startAngle+fo.endAngle)/2,Uo=polarToCartesian(fo.cx,fo.cy,fo.outerRadius+co,mo),_d=_objectSpread$e(_objectSpread$e(_objectSpread$e(_objectSpread$e({},uo),fo),{},{stroke:"none"},hn),{},{index:ho,textAnchor:st.getTextAnchor(Uo.x,fo.cx)},Uo),tp=_objectSpread$e(_objectSpread$e(_objectSpread$e(_objectSpread$e({},uo),fo),{},{fill:"none",stroke:fo.fill},fn),{},{index:ho,points:[polarToCartesian(fo.cx,fo.cy,fo.outerRadius,mo),Uo]}),ep=Xr;return isNil$1(Xr)&&isNil$1(to)?ep="value":isNil$1(Xr)&&(ep=to),React.createElement(Layer,{key:"label-".concat(fo.startAngle,"-").concat(fo.endAngle,"-").concat(fo.midAngle,"-").concat(ho)},un&&st.renderLabelLineItem(un,tp,"line"),st.renderLabelItem(sn,_d,getValueByDataKey(fo,ep)))});return React.createElement(Layer,{className:"recharts-pie-labels"},lo)}},{key:"renderSectorsStatically",value:function(rn){var on=this,an=this.props,sn=an.activeShape,un=an.blendStroke,Xr=an.inactiveShape;return rn.map(function(to,uo){if((to==null?void 0:to.startAngle)===0&&(to==null?void 0:to.endAngle)===0&&rn.length!==1)return null;var hn=on.isActiveIndex(uo),fn=Xr&&on.hasActiveIndex()?Xr:null,co=hn?sn:fn,lo=_objectSpread$e(_objectSpread$e({},to),{},{stroke:un?to.fill:to.stroke,tabIndex:-1});return React.createElement(Layer,_extends$c({ref:function(ho){ho&&!on.sectorRefs.includes(ho)&&on.sectorRefs.push(ho)},tabIndex:-1,className:"recharts-pie-sector"},adaptEventsOfChild(on.props,to,uo),{key:"sector-".concat(to==null?void 0:to.startAngle,"-").concat(to==null?void 0:to.endAngle,"-").concat(to.midAngle,"-").concat(uo)}),React.createElement(Shape,_extends$c({option:co,isActive:hn,shapeType:"sector"},lo)))})}},{key:"renderSectorsWithAnimation",value:function(){var rn=this,on=this.props,an=on.sectors,sn=on.isAnimationActive,un=on.animationBegin,Xr=on.animationDuration,to=on.animationEasing,uo=on.animationId,hn=this.state,fn=hn.prevSectors,co=hn.prevIsAnimationActive;return React.createElement(Animate,{begin:un,duration:Xr,isActive:sn,easing:to,from:{t:0},to:{t:1},key:"pie-".concat(uo,"-").concat(co),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(lo){var fo=lo.t,ho=[],mo=an&&an[0],Uo=mo.startAngle;return an.forEach(function(_d,tp){var ep=fn&&fn[tp],np=tp>0?get$2(_d,"paddingAngle",0):0;if(ep){var rp=interpolateNumber$2(ep.endAngle-ep.startAngle,_d.endAngle-_d.startAngle),ip=_objectSpread$e(_objectSpread$e({},_d),{},{startAngle:Uo+np,endAngle:Uo+rp(fo)+np});ho.push(ip),Uo=ip.endAngle}else{var op=_d.endAngle,ap=_d.startAngle,sp=interpolateNumber$2(0,op-ap),up=sp(fo),pp=_objectSpread$e(_objectSpread$e({},_d),{},{startAngle:Uo+np,endAngle:Uo+up+np});ho.push(pp),Uo=pp.endAngle}}),React.createElement(Layer,null,rn.renderSectorsStatically(ho))})}},{key:"attachKeyboardHandlers",value:function(rn){var on=this;rn.onkeydown=function(an){if(!an.altKey)switch(an.key){case"ArrowLeft":{var sn=++on.state.sectorToFocus%on.sectorRefs.length;on.sectorRefs[sn].focus(),on.setState({sectorToFocus:sn});break}case"ArrowRight":{var un=--on.state.sectorToFocus<0?on.sectorRefs.length-1:on.state.sectorToFocus%on.sectorRefs.length;on.sectorRefs[un].focus(),on.setState({sectorToFocus:un});break}case"Escape":{on.sectorRefs[on.state.sectorToFocus].blur(),on.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var rn=this.props,on=rn.sectors,an=rn.isAnimationActive,sn=this.state.prevSectors;return an&&on&&on.length&&(!sn||!isEqual$1(sn,on))?this.renderSectorsWithAnimation():this.renderSectorsStatically(on)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var rn=this,on=this.props,an=on.hide,sn=on.sectors,un=on.className,Xr=on.label,to=on.cx,uo=on.cy,hn=on.innerRadius,fn=on.outerRadius,co=on.isAnimationActive,lo=this.state.isAnimationFinished;if(an||!sn||!sn.length||!isNumber(to)||!isNumber(uo)||!isNumber(hn)||!isNumber(fn))return null;var fo=clsx("recharts-pie",un);return React.createElement(Layer,{tabIndex:this.props.rootTabIndex,className:fo,ref:function(mo){rn.pieRef=mo}},this.renderSectors(),Xr&&this.renderLabels(sn),Label.renderCallByParent(this.props,null,!1),(!co||lo)&&LabelList.renderCallByParent(this.props,sn,!1))}}],[{key:"getDerivedStateFromProps",value:function(rn,on){return on.prevIsAnimationActive!==rn.isAnimationActive?{prevIsAnimationActive:rn.isAnimationActive,prevAnimationId:rn.animationId,curSectors:rn.sectors,prevSectors:[],isAnimationFinished:!0}:rn.isAnimationActive&&rn.animationId!==on.prevAnimationId?{prevAnimationId:rn.animationId,curSectors:rn.sectors,prevSectors:on.curSectors,isAnimationFinished:!0}:rn.sectors!==on.curSectors?{curSectors:rn.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(rn,on){return rn>on?"start":rn<on?"end":"middle"}},{key:"renderLabelLineItem",value:function(rn,on,an){if(React.isValidElement(rn))return React.cloneElement(rn,on);if(isFunction$3(rn))return rn(on);var sn=clsx("recharts-pie-label-line",typeof rn!="boolean"?rn.className:"");return React.createElement(Curve,_extends$c({},on,{key:an,type:"linear",className:sn}))}},{key:"renderLabelItem",value:function(rn,on,an){if(React.isValidElement(rn))return React.cloneElement(rn,on);var sn=an;if(isFunction$3(rn)&&(sn=rn(on),React.isValidElement(sn)))return sn;var un=clsx("recharts-pie-label-text",typeof rn!="boolean"&&!isFunction$3(rn)?rn.className:"");return React.createElement(Text,_extends$c({},on,{alignmentBaseline:"middle",className:un}),sn)}}])}(reactExports.PureComponent);_Pie=Pie;_defineProperty$h(Pie,"displayName","Pie");_defineProperty$h(Pie,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!Global.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});_defineProperty$h(Pie,"parseDeltaAngle",function(Mt,st){var nn=mathSign(st-Mt),rn=Math.min(Math.abs(st-Mt),360);return nn*rn});_defineProperty$h(Pie,"getRealPieData",function(Mt){var st=Mt.data,nn=Mt.children,rn=filterProps(Mt,!1),on=findAllByType(nn,Cell);return st&&st.length?st.map(function(an,sn){return _objectSpread$e(_objectSpread$e(_objectSpread$e({payload:an},rn),an),on&&on[sn]&&on[sn].props)}):on&&on.length?on.map(function(an){return _objectSpread$e(_objectSpread$e({},rn),an.props)}):[]});_defineProperty$h(Pie,"parseCoordinateOfPie",function(Mt,st){var nn=st.top,rn=st.left,on=st.width,an=st.height,sn=getMaxRadius(on,an),un=rn+getPercentValue(Mt.cx,on,on/2),Xr=nn+getPercentValue(Mt.cy,an,an/2),to=getPercentValue(Mt.innerRadius,sn,0),uo=getPercentValue(Mt.outerRadius,sn,sn*.8),hn=Mt.maxRadius||Math.sqrt(on*on+an*an)/2;return{cx:un,cy:Xr,innerRadius:to,outerRadius:uo,maxRadius:hn}});_defineProperty$h(Pie,"getComposedData",function(Mt){var st=Mt.item,nn=Mt.offset,rn=st.type.defaultProps!==void 0?_objectSpread$e(_objectSpread$e({},st.type.defaultProps),st.props):st.props,on=_Pie.getRealPieData(rn);if(!on||!on.length)return null;var an=rn.cornerRadius,sn=rn.startAngle,un=rn.endAngle,Xr=rn.paddingAngle,to=rn.dataKey,uo=rn.nameKey,hn=rn.valueKey,fn=rn.tooltipType,co=Math.abs(rn.minAngle),lo=_Pie.parseCoordinateOfPie(rn,nn),fo=_Pie.parseDeltaAngle(sn,un),ho=Math.abs(fo),mo=to;isNil$1(to)&&isNil$1(hn)?(warn(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),mo="value"):isNil$1(to)&&(warn(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),mo=hn);var Uo=on.filter(function(ip){return getValueByDataKey(ip,mo,0)!==0}).length,_d=(ho>=360?Uo:Uo-1)*Xr,tp=ho-Uo*co-_d,ep=on.reduce(function(ip,op){var ap=getValueByDataKey(op,mo,0);return ip+(isNumber(ap)?ap:0)},0),np;if(ep>0){var rp;np=on.map(function(ip,op){var ap=getValueByDataKey(ip,mo,0),sp=getValueByDataKey(ip,uo,op),up=(isNumber(ap)?ap:0)/ep,pp;op?pp=rp.endAngle+mathSign(fo)*Xr*(ap!==0?1:0):pp=sn;var lp=pp+mathSign(fo)*((ap!==0?co:0)+up*tp),dp=(pp+lp)/2,cp=(lo.innerRadius+lo.outerRadius)/2,fp=[{name:sp,value:ap,payload:ip,dataKey:mo,type:fn}],gp=polarToCartesian(lo.cx,lo.cy,cp,dp);return rp=_objectSpread$e(_objectSpread$e(_objectSpread$e({percent:up,cornerRadius:an,name:sp,tooltipPayload:fp,midAngle:dp,middleRadius:cp,tooltipPosition:gp},ip),lo),{},{value:getValueByDataKey(ip,mo),startAngle:pp,endAngle:lp,payload:ip,paddingAngle:mathSign(fo)*Xr}),rp})}return _objectSpread$e(_objectSpread$e({},lo),{},{sectors:np,data:on})});var nativeCeil=Math.ceil,nativeMax$1=Math.max;function baseRange$1(Mt,st,nn,rn){for(var on=-1,an=nativeMax$1(nativeCeil((st-Mt)/(nn||1)),0),sn=Array(an);an--;)sn[rn?an:++on]=Mt,Mt+=nn;return sn}var _baseRange=baseRange$1,toNumber=toNumber_1,INFINITY=1/0,MAX_INTEGER=17976931348623157e292;function toFinite$2(Mt){if(!Mt)return Mt===0?Mt:0;if(Mt=toNumber(Mt),Mt===INFINITY||Mt===-INFINITY){var st=Mt<0?-1:1;return st*MAX_INTEGER}return Mt===Mt?Mt:0}var toFinite_1=toFinite$2,baseRange=_baseRange,isIterateeCall$2=_isIterateeCall,toFinite$1=toFinite_1;function createRange$1(Mt){return function(st,nn,rn){return rn&&typeof rn!="number"&&isIterateeCall$2(st,nn,rn)&&(nn=rn=void 0),st=toFinite$1(st),nn===void 0?(nn=st,st=0):nn=toFinite$1(nn),rn=rn===void 0?st<nn?1:-1:toFinite$1(rn),baseRange(st,nn,rn,Mt)}}var _createRange=createRange$1,createRange=_createRange,range=createRange(),range_1=range;const range$1=getDefaultExportFromCjs(range_1);function _typeof$g(Mt){"@babel/helpers - typeof";return _typeof$g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(st){return typeof st}:function(st){return st&&typeof Symbol=="function"&&st.constructor===Symbol&&st!==Symbol.prototype?"symbol":typeof st},_typeof$g(Mt)}function ownKeys$d(Mt,st){var nn=Object.keys(Mt);if(Object.getOwnPropertySymbols){var rn=Object.getOwnPropertySymbols(Mt);st&&(rn=rn.filter(function(on){return Object.getOwnPropertyDescriptor(Mt,on).enumerable})),nn.push.apply(nn,rn)}return nn}function _objectSpread$d(Mt){for(var st=1;st<arguments.length;st++){var nn=arguments[st]!=null?arguments[st]:{};st%2?ownKeys$d(Object(nn),!0).forEach(function(rn){_defineProperty$g(Mt,rn,nn[rn])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Mt,Object.getOwnPropertyDescriptors(nn)):ownKeys$d(Object(nn)).forEach(function(rn){Object.defineProperty(Mt,rn,Object.getOwnPropertyDescriptor(nn,rn))})}return Mt}function _defineProperty$g(Mt,st,nn){return st=_toPropertyKey$g(st),st in Mt?Object.defineProperty(Mt,st,{value:nn,enumerable:!0,configurable:!0,writable:!0}):Mt[st]=nn,Mt}function _toPropertyKey$g(Mt){var st=_toPrimitive$g(Mt,"string");return _typeof$g(st)=="symbol"?st:st+""}function _toPrimitive$g(Mt,st){if(_typeof$g(Mt)!="object"||!Mt)return Mt;var nn=Mt[Symbol.toPrimitive];if(nn!==void 0){var rn=nn.call(Mt,st||"default");if(_typeof$g(rn)!="object")return rn;throw new TypeError("@@toPrimitive must return a primitive value.")}return(st==="string"?String:Number)(Mt)}var PREFIX_LIST=["Webkit","Moz","O","ms"],generatePrefixStyle=function Mt(st,nn){var rn=st.replace(/(\w)/,function(an){return an.toUpperCase()}),on=PREFIX_LIST.reduce(function(an,sn){return _objectSpread$d(_objectSpread$d({},an),{},_defineProperty$g({},sn+rn,nn))},{});return on[st]=nn,on};function _typeof$f(Mt){"@babel/helpers - typeof";return _typeof$f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(st){return typeof st}:function(st){return st&&typeof Symbol=="function"&&st.constructor===Symbol&&st!==Symbol.prototype?"symbol":typeof st},_typeof$f(Mt)}function _extends$b(){return _extends$b=Object.assign?Object.assign.bind():function(Mt){for(var st=1;st<arguments.length;st++){var nn=arguments[st];for(var rn in nn)Object.prototype.hasOwnProperty.call(nn,rn)&&(Mt[rn]=nn[rn])}return Mt},_extends$b.apply(this,arguments)}function ownKeys$c(Mt,st){var nn=Object.keys(Mt);if(Object.getOwnPropertySymbols){var rn=Object.getOwnPropertySymbols(Mt);st&&(rn=rn.filter(function(on){return Object.getOwnPropertyDescriptor(Mt,on).enumerable})),nn.push.apply(nn,rn)}return nn}function _objectSpread$c(Mt){for(var st=1;st<arguments.length;st++){var nn=arguments[st]!=null?arguments[st]:{};st%2?ownKeys$c(Object(nn),!0).forEach(function(rn){_defineProperty$f(Mt,rn,nn[rn])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Mt,Object.getOwnPropertyDescriptors(nn)):ownKeys$c(Object(nn)).forEach(function(rn){Object.defineProperty(Mt,rn,Object.getOwnPropertyDescriptor(nn,rn))})}return Mt}function _classCallCheck$b(Mt,st){if(!(Mt instanceof st))throw new TypeError("Cannot call a class as a function")}function _defineProperties$b(Mt,st){for(var nn=0;nn<st.length;nn++){var rn=st[nn];rn.enumerable=rn.enumerable||!1,rn.configurable=!0,"value"in rn&&(rn.writable=!0),Object.defineProperty(Mt,_toPropertyKey$f(rn.key),rn)}}function _createClass$b(Mt,st,nn){return st&&_defineProperties$b(Mt.prototype,st),nn&&_defineProperties$b(Mt,nn),Object.defineProperty(Mt,"prototype",{writable:!1}),Mt}function _callSuper$9(Mt,st,nn){return st=_getPrototypeOf$9(st),_possibleConstructorReturn$9(Mt,_isNativeReflectConstruct$9()?Reflect.construct(st,nn||[],_getPrototypeOf$9(Mt).constructor):st.apply(Mt,nn))}function _possibleConstructorReturn$9(Mt,st){if(st&&(_typeof$f(st)==="object"||typeof st=="function"))return st;if(st!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$9(Mt)}function _assertThisInitialized$9(Mt){if(Mt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Mt}function _isNativeReflectConstruct$9(){try{var Mt=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_isNativeReflectConstruct$9=function(){return!!Mt})()}function _getPrototypeOf$9(Mt){return _getPrototypeOf$9=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(nn){return nn.__proto__||Object.getPrototypeOf(nn)},_getPrototypeOf$9(Mt)}function _inherits$9(Mt,st){if(typeof st!="function"&&st!==null)throw new TypeError("Super expression must either be null or a function");Mt.prototype=Object.create(st&&st.prototype,{constructor:{value:Mt,writable:!0,configurable:!0}}),Object.defineProperty(Mt,"prototype",{writable:!1}),st&&_setPrototypeOf$9(Mt,st)}function _setPrototypeOf$9(Mt,st){return _setPrototypeOf$9=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(rn,on){return rn.__proto__=on,rn},_setPrototypeOf$9(Mt,st)}function _defineProperty$f(Mt,st,nn){return st=_toPropertyKey$f(st),st in Mt?Object.defineProperty(Mt,st,{value:nn,enumerable:!0,configurable:!0,writable:!0}):Mt[st]=nn,Mt}function _toPropertyKey$f(Mt){var st=_toPrimitive$f(Mt,"string");return _typeof$f(st)=="symbol"?st:st+""}function _toPrimitive$f(Mt,st){if(_typeof$f(Mt)!="object"||!Mt)return Mt;var nn=Mt[Symbol.toPrimitive];if(nn!==void 0){var rn=nn.call(Mt,st||"default");if(_typeof$f(rn)!="object")return rn;throw new TypeError("@@toPrimitive must return a primitive value.")}return(st==="string"?String:Number)(Mt)}var createScale=function Mt(st){var nn=st.data,rn=st.startIndex,on=st.endIndex,an=st.x,sn=st.width,un=st.travellerWidth;if(!nn||!nn.length)return{};var Xr=nn.length,to=point().domain(range$1(0,Xr)).range([an,an+sn-un]),uo=to.domain().map(function(hn){return to(hn)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:to(rn),endX:to(on),scale:to,scaleValues:uo}},isTouch=function Mt(st){return st.changedTouches&&!!st.changedTouches.length},Brush=function(Mt){function st(nn){var rn;return _classCallCheck$b(this,st),rn=_callSuper$9(this,st,[nn]),_defineProperty$f(rn,"handleDrag",function(on){rn.leaveTimer&&(clearTimeout(rn.leaveTimer),rn.leaveTimer=null),rn.state.isTravellerMoving?rn.handleTravellerMove(on):rn.state.isSlideMoving&&rn.handleSlideDrag(on)}),_defineProperty$f(rn,"handleTouchMove",function(on){on.changedTouches!=null&&on.changedTouches.length>0&&rn.handleDrag(on.changedTouches[0])}),_defineProperty$f(rn,"handleDragEnd",function(){rn.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var on=rn.props,an=on.endIndex,sn=on.onDragEnd,un=on.startIndex;sn==null||sn({endIndex:an,startIndex:un})}),rn.detachDragEndListener()}),_defineProperty$f(rn,"handleLeaveWrapper",function(){(rn.state.isTravellerMoving||rn.state.isSlideMoving)&&(rn.leaveTimer=window.setTimeout(rn.handleDragEnd,rn.props.leaveTimeOut))}),_defineProperty$f(rn,"handleEnterSlideOrTraveller",function(){rn.setState({isTextActive:!0})}),_defineProperty$f(rn,"handleLeaveSlideOrTraveller",function(){rn.setState({isTextActive:!1})}),_defineProperty$f(rn,"handleSlideDragStart",function(on){var an=isTouch(on)?on.changedTouches[0]:on;rn.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:an.pageX}),rn.attachDragEndListener()}),rn.travellerDragStartHandlers={startX:rn.handleTravellerDragStart.bind(rn,"startX"),endX:rn.handleTravellerDragStart.bind(rn,"endX")},rn.state={},rn}return _inherits$9(st,Mt),_createClass$b(st,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(rn){var on=rn.startX,an=rn.endX,sn=this.state.scaleValues,un=this.props,Xr=un.gap,to=un.data,uo=to.length-1,hn=Math.min(on,an),fn=Math.max(on,an),co=st.getIndexInRange(sn,hn),lo=st.getIndexInRange(sn,fn);return{startIndex:co-co%Xr,endIndex:lo===uo?uo:lo-lo%Xr}}},{key:"getTextOfTick",value:function(rn){var on=this.props,an=on.data,sn=on.tickFormatter,un=on.dataKey,Xr=getValueByDataKey(an[rn],un,rn);return isFunction$3(sn)?sn(Xr,rn):Xr}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(rn){var on=this.state,an=on.slideMoveStartX,sn=on.startX,un=on.endX,Xr=this.props,to=Xr.x,uo=Xr.width,hn=Xr.travellerWidth,fn=Xr.startIndex,co=Xr.endIndex,lo=Xr.onChange,fo=rn.pageX-an;fo>0?fo=Math.min(fo,to+uo-hn-un,to+uo-hn-sn):fo<0&&(fo=Math.max(fo,to-sn,to-un));var ho=this.getIndex({startX:sn+fo,endX:un+fo});(ho.startIndex!==fn||ho.endIndex!==co)&&lo&&lo(ho),this.setState({startX:sn+fo,endX:un+fo,slideMoveStartX:rn.pageX})}},{key:"handleTravellerDragStart",value:function(rn,on){var an=isTouch(on)?on.changedTouches[0]:on;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:rn,brushMoveStartX:an.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(rn){var on=this.state,an=on.brushMoveStartX,sn=on.movingTravellerId,un=on.endX,Xr=on.startX,to=this.state[sn],uo=this.props,hn=uo.x,fn=uo.width,co=uo.travellerWidth,lo=uo.onChange,fo=uo.gap,ho=uo.data,mo={startX:this.state.startX,endX:this.state.endX},Uo=rn.pageX-an;Uo>0?Uo=Math.min(Uo,hn+fn-co-to):Uo<0&&(Uo=Math.max(Uo,hn-to)),mo[sn]=to+Uo;var _d=this.getIndex(mo),tp=_d.startIndex,ep=_d.endIndex,np=function(){var ip=ho.length-1;return sn==="startX"&&(un>Xr?tp%fo===0:ep%fo===0)||un<Xr&&ep===ip||sn==="endX"&&(un>Xr?ep%fo===0:tp%fo===0)||un>Xr&&ep===ip};this.setState(_defineProperty$f(_defineProperty$f({},sn,to+Uo),"brushMoveStartX",rn.pageX),function(){lo&&np()&&lo(_d)})}},{key:"handleTravellerMoveKeyboard",value:function(rn,on){var an=this,sn=this.state,un=sn.scaleValues,Xr=sn.startX,to=sn.endX,uo=this.state[on],hn=un.indexOf(uo);if(hn!==-1){var fn=hn+rn;if(!(fn===-1||fn>=un.length)){var co=un[fn];on==="startX"&&co>=to||on==="endX"&&co<=Xr||this.setState(_defineProperty$f({},on,co),function(){an.props.onChange(an.getIndex({startX:an.state.startX,endX:an.state.endX}))})}}}},{key:"renderBackground",value:function(){var rn=this.props,on=rn.x,an=rn.y,sn=rn.width,un=rn.height,Xr=rn.fill,to=rn.stroke;return React.createElement("rect",{stroke:to,fill:Xr,x:on,y:an,width:sn,height:un})}},{key:"renderPanorama",value:function(){var rn=this.props,on=rn.x,an=rn.y,sn=rn.width,un=rn.height,Xr=rn.data,to=rn.children,uo=rn.padding,hn=reactExports.Children.only(to);return hn?React.cloneElement(hn,{x:on,y:an,width:sn,height:un,margin:uo,compact:!0,data:Xr}):null}},{key:"renderTravellerLayer",value:function(rn,on){var an,sn,un=this,Xr=this.props,to=Xr.y,uo=Xr.travellerWidth,hn=Xr.height,fn=Xr.traveller,co=Xr.ariaLabel,lo=Xr.data,fo=Xr.startIndex,ho=Xr.endIndex,mo=Math.max(rn,this.props.x),Uo=_objectSpread$c(_objectSpread$c({},filterProps(this.props,!1)),{},{x:mo,y:to,width:uo,height:hn}),_d=co||"Min value: ".concat((an=lo[fo])===null||an===void 0?void 0:an.name,", Max value: ").concat((sn=lo[ho])===null||sn===void 0?void 0:sn.name);return React.createElement(Layer,{tabIndex:0,role:"slider","aria-label":_d,"aria-valuenow":rn,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[on],onTouchStart:this.travellerDragStartHandlers[on],onKeyDown:function(ep){["ArrowLeft","ArrowRight"].includes(ep.key)&&(ep.preventDefault(),ep.stopPropagation(),un.handleTravellerMoveKeyboard(ep.key==="ArrowRight"?1:-1,on))},onFocus:function(){un.setState({isTravellerFocused:!0})},onBlur:function(){un.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},st.renderTraveller(fn,Uo))}},{key:"renderSlide",value:function(rn,on){var an=this.props,sn=an.y,un=an.height,Xr=an.stroke,to=an.travellerWidth,uo=Math.min(rn,on)+to,hn=Math.max(Math.abs(on-rn)-to,0);return React.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:Xr,fillOpacity:.2,x:uo,y:sn,width:hn,height:un})}},{key:"renderText",value:function(){var rn=this.props,on=rn.startIndex,an=rn.endIndex,sn=rn.y,un=rn.height,Xr=rn.travellerWidth,to=rn.stroke,uo=this.state,hn=uo.startX,fn=uo.endX,co=5,lo={pointerEvents:"none",fill:to};return React.createElement(Layer,{className:"recharts-brush-texts"},React.createElement(Text,_extends$b({textAnchor:"end",verticalAnchor:"middle",x:Math.min(hn,fn)-co,y:sn+un/2},lo),this.getTextOfTick(on)),React.createElement(Text,_extends$b({textAnchor:"start",verticalAnchor:"middle",x:Math.max(hn,fn)+Xr+co,y:sn+un/2},lo),this.getTextOfTick(an)))}},{key:"render",value:function(){var rn=this.props,on=rn.data,an=rn.className,sn=rn.children,un=rn.x,Xr=rn.y,to=rn.width,uo=rn.height,hn=rn.alwaysShowText,fn=this.state,co=fn.startX,lo=fn.endX,fo=fn.isTextActive,ho=fn.isSlideMoving,mo=fn.isTravellerMoving,Uo=fn.isTravellerFocused;if(!on||!on.length||!isNumber(un)||!isNumber(Xr)||!isNumber(to)||!isNumber(uo)||to<=0||uo<=0)return null;var _d=clsx("recharts-brush",an),tp=React.Children.count(sn)===1,ep=generatePrefixStyle("userSelect","none");return React.createElement(Layer,{className:_d,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:ep},this.renderBackground(),tp&&this.renderPanorama(),this.renderSlide(co,lo),this.renderTravellerLayer(co,"startX"),this.renderTravellerLayer(lo,"endX"),(fo||ho||mo||Uo||hn)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(rn){var on=rn.x,an=rn.y,sn=rn.width,un=rn.height,Xr=rn.stroke,to=Math.floor(an+un/2)-1;return React.createElement(React.Fragment,null,React.createElement("rect",{x:on,y:an,width:sn,height:un,fill:Xr,stroke:"none"}),React.createElement("line",{x1:on+1,y1:to,x2:on+sn-1,y2:to,fill:"none",stroke:"#fff"}),React.createElement("line",{x1:on+1,y1:to+2,x2:on+sn-1,y2:to+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(rn,on){var an;return React.isValidElement(rn)?an=React.cloneElement(rn,on):isFunction$3(rn)?an=rn(on):an=st.renderDefaultTraveller(on),an}},{key:"getDerivedStateFromProps",value:function(rn,on){var an=rn.data,sn=rn.width,un=rn.x,Xr=rn.travellerWidth,to=rn.updateId,uo=rn.startIndex,hn=rn.endIndex;if(an!==on.prevData||to!==on.prevUpdateId)return _objectSpread$c({prevData:an,prevTravellerWidth:Xr,prevUpdateId:to,prevX:un,prevWidth:sn},an&&an.length?createScale({data:an,width:sn,x:un,travellerWidth:Xr,startIndex:uo,endIndex:hn}):{scale:null,scaleValues:null});if(on.scale&&(sn!==on.prevWidth||un!==on.prevX||Xr!==on.prevTravellerWidth)){on.scale.range([un,un+sn-Xr]);var fn=on.scale.domain().map(function(co){return on.scale(co)});return{prevData:an,prevTravellerWidth:Xr,prevUpdateId:to,prevX:un,prevWidth:sn,startX:on.scale(rn.startIndex),endX:on.scale(rn.endIndex),scaleValues:fn}}return null}},{key:"getIndexInRange",value:function(rn,on){for(var an=rn.length,sn=0,un=an-1;un-sn>1;){var Xr=Math.floor((sn+un)/2);rn[Xr]>on?un=Xr:sn=Xr}return on>=rn[un]?un:sn}}])}(reactExports.PureComponent);_defineProperty$f(Brush,"displayName","Brush");_defineProperty$f(Brush,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var baseEach$1=_baseEach;function baseSome$1(Mt,st){var nn;return baseEach$1(Mt,function(rn,on,an){return nn=st(rn,on,an),!nn}),!!nn}var _baseSome=baseSome$1,arraySome=_arraySome,baseIteratee$4=_baseIteratee,baseSome=_baseSome,isArray$1=isArray_1,isIterateeCall$1=_isIterateeCall;function some(Mt,st,nn){var rn=isArray$1(Mt)?arraySome:baseSome;return nn&&isIterateeCall$1(Mt,st,nn)&&(st=void 0),rn(Mt,baseIteratee$4(st))}var some_1=some;const some$1=getDefaultExportFromCjs(some_1);var ifOverflowMatches=function Mt(st,nn){var rn=st.alwaysShow,on=st.ifOverflow;return rn&&(on="extendDomain"),on===nn},defineProperty=_defineProperty$F;function baseAssignValue$1(Mt,st,nn){st=="__proto__"&&defineProperty?defineProperty(Mt,st,{configurable:!0,enumerable:!0,value:nn,writable:!0}):Mt[st]=nn}var _baseAssignValue=baseAssignValue$1,baseAssignValue=_baseAssignValue,baseForOwn=_baseForOwn,baseIteratee$3=_baseIteratee;function mapValues(Mt,st){var nn={};return st=baseIteratee$3(st),baseForOwn(Mt,function(rn,on,an){baseAssignValue(nn,on,st(rn,on,an))}),nn}var mapValues_1=mapValues;const mapValues$1=getDefaultExportFromCjs(mapValues_1);function arrayEvery$1(Mt,st){for(var nn=-1,rn=Mt==null?0:Mt.length;++nn<rn;)if(!st(Mt[nn],nn,Mt))return!1;return!0}var _arrayEvery=arrayEvery$1,baseEach=_baseEach;function baseEvery$1(Mt,st){var nn=!0;return baseEach(Mt,function(rn,on,an){return nn=!!st(rn,on,an),nn}),nn}var _baseEvery=baseEvery$1,arrayEvery=_arrayEvery,baseEvery=_baseEvery,baseIteratee$2=_baseIteratee,isArray=isArray_1,isIterateeCall=_isIterateeCall;function every(Mt,st,nn){var rn=isArray(Mt)?arrayEvery:baseEvery;return nn&&isIterateeCall(Mt,st,nn)&&(st=void 0),rn(Mt,baseIteratee$2(st))}var every_1=every;const every$1=getDefaultExportFromCjs(every_1);var _excluded$5=["x","y"];function _typeof$e(Mt){"@babel/helpers - typeof";return _typeof$e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(st){return typeof st}:function(st){return st&&typeof Symbol=="function"&&st.constructor===Symbol&&st!==Symbol.prototype?"symbol":typeof st},_typeof$e(Mt)}function _extends$a(){return _extends$a=Object.assign?Object.assign.bind():function(Mt){for(var st=1;st<arguments.length;st++){var nn=arguments[st];for(var rn in nn)Object.prototype.hasOwnProperty.call(nn,rn)&&(Mt[rn]=nn[rn])}return Mt},_extends$a.apply(this,arguments)}function ownKeys$b(Mt,st){var nn=Object.keys(Mt);if(Object.getOwnPropertySymbols){var rn=Object.getOwnPropertySymbols(Mt);st&&(rn=rn.filter(function(on){return Object.getOwnPropertyDescriptor(Mt,on).enumerable})),nn.push.apply(nn,rn)}return nn}function _objectSpread$b(Mt){for(var st=1;st<arguments.length;st++){var nn=arguments[st]!=null?arguments[st]:{};st%2?ownKeys$b(Object(nn),!0).forEach(function(rn){_defineProperty$e(Mt,rn,nn[rn])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Mt,Object.getOwnPropertyDescriptors(nn)):ownKeys$b(Object(nn)).forEach(function(rn){Object.defineProperty(Mt,rn,Object.getOwnPropertyDescriptor(nn,rn))})}return Mt}function _defineProperty$e(Mt,st,nn){return st=_toPropertyKey$e(st),st in Mt?Object.defineProperty(Mt,st,{value:nn,enumerable:!0,configurable:!0,writable:!0}):Mt[st]=nn,Mt}function _toPropertyKey$e(Mt){var st=_toPrimitive$e(Mt,"string");return _typeof$e(st)=="symbol"?st:st+""}function _toPrimitive$e(Mt,st){if(_typeof$e(Mt)!="object"||!Mt)return Mt;var nn=Mt[Symbol.toPrimitive];if(nn!==void 0){var rn=nn.call(Mt,st||"default");if(_typeof$e(rn)!="object")return rn;throw new TypeError("@@toPrimitive must return a primitive value.")}return(st==="string"?String:Number)(Mt)}function _objectWithoutProperties$5(Mt,st){if(Mt==null)return{};var nn=_objectWithoutPropertiesLoose$5(Mt,st),rn,on;if(Object.getOwnPropertySymbols){var an=Object.getOwnPropertySymbols(Mt);for(on=0;on<an.length;on++)rn=an[on],!(st.indexOf(rn)>=0)&&Object.prototype.propertyIsEnumerable.call(Mt,rn)&&(nn[rn]=Mt[rn])}return nn}function _objectWithoutPropertiesLoose$5(Mt,st){if(Mt==null)return{};var nn={};for(var rn in Mt)if(Object.prototype.hasOwnProperty.call(Mt,rn)){if(st.indexOf(rn)>=0)continue;nn[rn]=Mt[rn]}return nn}function typeguardBarRectangleProps(Mt,st){var nn=Mt.x,rn=Mt.y,on=_objectWithoutProperties$5(Mt,_excluded$5),an="".concat(nn),sn=parseInt(an,10),un="".concat(rn),Xr=parseInt(un,10),to="".concat(st.height||on.height),uo=parseInt(to,10),hn="".concat(st.width||on.width),fn=parseInt(hn,10);return _objectSpread$b(_objectSpread$b(_objectSpread$b(_objectSpread$b(_objectSpread$b({},st),on),sn?{x:sn}:{}),Xr?{y:Xr}:{}),{},{height:uo,width:fn,name:st.name,radius:st.radius})}function BarRectangle(Mt){return React.createElement(Shape,_extends$a({shapeType:"rectangle",propTransformer:typeguardBarRectangleProps,activeClassName:"recharts-active-bar"},Mt))}var minPointSizeCallback=function Mt(st){var nn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(rn,on){if(typeof st=="number")return st;var an=typeof rn=="number";return an?st(rn,on):(an||invariant(),nn)}},_excluded$4=["value","background"],_Bar;function _typeof$d(Mt){"@babel/helpers - typeof";return _typeof$d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(st){return typeof st}:function(st){return st&&typeof Symbol=="function"&&st.constructor===Symbol&&st!==Symbol.prototype?"symbol":typeof st},_typeof$d(Mt)}function _objectWithoutProperties$4(Mt,st){if(Mt==null)return{};var nn=_objectWithoutPropertiesLoose$4(Mt,st),rn,on;if(Object.getOwnPropertySymbols){var an=Object.getOwnPropertySymbols(Mt);for(on=0;on<an.length;on++)rn=an[on],!(st.indexOf(rn)>=0)&&Object.prototype.propertyIsEnumerable.call(Mt,rn)&&(nn[rn]=Mt[rn])}return nn}function _objectWithoutPropertiesLoose$4(Mt,st){if(Mt==null)return{};var nn={};for(var rn in Mt)if(Object.prototype.hasOwnProperty.call(Mt,rn)){if(st.indexOf(rn)>=0)continue;nn[rn]=Mt[rn]}return nn}function _extends$9(){return _extends$9=Object.assign?Object.assign.bind():function(Mt){for(var st=1;st<arguments.length;st++){var nn=arguments[st];for(var rn in nn)Object.prototype.hasOwnProperty.call(nn,rn)&&(Mt[rn]=nn[rn])}return Mt},_extends$9.apply(this,arguments)}function ownKeys$a(Mt,st){var nn=Object.keys(Mt);if(Object.getOwnPropertySymbols){var rn=Object.getOwnPropertySymbols(Mt);st&&(rn=rn.filter(function(on){return Object.getOwnPropertyDescriptor(Mt,on).enumerable})),nn.push.apply(nn,rn)}return nn}function _objectSpread$a(Mt){for(var st=1;st<arguments.length;st++){var nn=arguments[st]!=null?arguments[st]:{};st%2?ownKeys$a(Object(nn),!0).forEach(function(rn){_defineProperty$d(Mt,rn,nn[rn])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Mt,Object.getOwnPropertyDescriptors(nn)):ownKeys$a(Object(nn)).forEach(function(rn){Object.defineProperty(Mt,rn,Object.getOwnPropertyDescriptor(nn,rn))})}return Mt}function _classCallCheck$a(Mt,st){if(!(Mt instanceof st))throw new TypeError("Cannot call a class as a function")}function _defineProperties$a(Mt,st){for(var nn=0;nn<st.length;nn++){var rn=st[nn];rn.enumerable=rn.enumerable||!1,rn.configurable=!0,"value"in rn&&(rn.writable=!0),Object.defineProperty(Mt,_toPropertyKey$d(rn.key),rn)}}function _createClass$a(Mt,st,nn){return st&&_defineProperties$a(Mt.prototype,st),nn&&_defineProperties$a(Mt,nn),Object.defineProperty(Mt,"prototype",{writable:!1}),Mt}function _callSuper$8(Mt,st,nn){return st=_getPrototypeOf$8(st),_possibleConstructorReturn$8(Mt,_isNativeReflectConstruct$8()?Reflect.construct(st,nn||[],_getPrototypeOf$8(Mt).constructor):st.apply(Mt,nn))}function _possibleConstructorReturn$8(Mt,st){if(st&&(_typeof$d(st)==="object"||typeof st=="function"))return st;if(st!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$8(Mt)}function _assertThisInitialized$8(Mt){if(Mt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Mt}function _isNativeReflectConstruct$8(){try{var Mt=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_isNativeReflectConstruct$8=function(){return!!Mt})()}function _getPrototypeOf$8(Mt){return _getPrototypeOf$8=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(nn){return nn.__proto__||Object.getPrototypeOf(nn)},_getPrototypeOf$8(Mt)}function _inherits$8(Mt,st){if(typeof st!="function"&&st!==null)throw new TypeError("Super expression must either be null or a function");Mt.prototype=Object.create(st&&st.prototype,{constructor:{value:Mt,writable:!0,configurable:!0}}),Object.defineProperty(Mt,"prototype",{writable:!1}),st&&_setPrototypeOf$8(Mt,st)}function _setPrototypeOf$8(Mt,st){return _setPrototypeOf$8=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(rn,on){return rn.__proto__=on,rn},_setPrototypeOf$8(Mt,st)}function _defineProperty$d(Mt,st,nn){return st=_toPropertyKey$d(st),st in Mt?Object.defineProperty(Mt,st,{value:nn,enumerable:!0,configurable:!0,writable:!0}):Mt[st]=nn,Mt}function _toPropertyKey$d(Mt){var st=_toPrimitive$d(Mt,"string");return _typeof$d(st)=="symbol"?st:st+""}function _toPrimitive$d(Mt,st){if(_typeof$d(Mt)!="object"||!Mt)return Mt;var nn=Mt[Symbol.toPrimitive];if(nn!==void 0){var rn=nn.call(Mt,st||"default");if(_typeof$d(rn)!="object")return rn;throw new TypeError("@@toPrimitive must return a primitive value.")}return(st==="string"?String:Number)(Mt)}var Bar=function(Mt){function st(){var nn;_classCallCheck$a(this,st);for(var rn=arguments.length,on=new Array(rn),an=0;an<rn;an++)on[an]=arguments[an];return nn=_callSuper$8(this,st,[].concat(on)),_defineProperty$d(nn,"state",{isAnimationFinished:!1}),_defineProperty$d(nn,"id",uniqueId("recharts-bar-")),_defineProperty$d(nn,"handleAnimationEnd",function(){var sn=nn.props.onAnimationEnd;nn.setState({isAnimationFinished:!0}),sn&&sn()}),_defineProperty$d(nn,"handleAnimationStart",function(){var sn=nn.props.onAnimationStart;nn.setState({isAnimationFinished:!1}),sn&&sn()}),nn}return _inherits$8(st,Mt),_createClass$a(st,[{key:"renderRectanglesStatically",value:function(rn){var on=this,an=this.props,sn=an.shape,un=an.dataKey,Xr=an.activeIndex,to=an.activeBar,uo=filterProps(this.props,!1);return rn&&rn.map(function(hn,fn){var co=fn===Xr,lo=co?to:sn,fo=_objectSpread$a(_objectSpread$a(_objectSpread$a({},uo),hn),{},{isActive:co,option:lo,index:fn,dataKey:un,onAnimationStart:on.handleAnimationStart,onAnimationEnd:on.handleAnimationEnd});return React.createElement(Layer,_extends$9({className:"recharts-bar-rectangle"},adaptEventsOfChild(on.props,hn,fn),{key:"rectangle-".concat(hn==null?void 0:hn.x,"-").concat(hn==null?void 0:hn.y,"-").concat(hn==null?void 0:hn.value)}),React.createElement(BarRectangle,fo))})}},{key:"renderRectanglesWithAnimation",value:function(){var rn=this,on=this.props,an=on.data,sn=on.layout,un=on.isAnimationActive,Xr=on.animationBegin,to=on.animationDuration,uo=on.animationEasing,hn=on.animationId,fn=this.state.prevData;return React.createElement(Animate,{begin:Xr,duration:to,isActive:un,easing:uo,from:{t:0},to:{t:1},key:"bar-".concat(hn),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(co){var lo=co.t,fo=an.map(function(ho,mo){var Uo=fn&&fn[mo];if(Uo){var _d=interpolateNumber$2(Uo.x,ho.x),tp=interpolateNumber$2(Uo.y,ho.y),ep=interpolateNumber$2(Uo.width,ho.width),np=interpolateNumber$2(Uo.height,ho.height);return _objectSpread$a(_objectSpread$a({},ho),{},{x:_d(lo),y:tp(lo),width:ep(lo),height:np(lo)})}if(sn==="horizontal"){var rp=interpolateNumber$2(0,ho.height),ip=rp(lo);return _objectSpread$a(_objectSpread$a({},ho),{},{y:ho.y+ho.height-ip,height:ip})}var op=interpolateNumber$2(0,ho.width),ap=op(lo);return _objectSpread$a(_objectSpread$a({},ho),{},{width:ap})});return React.createElement(Layer,null,rn.renderRectanglesStatically(fo))})}},{key:"renderRectangles",value:function(){var rn=this.props,on=rn.data,an=rn.isAnimationActive,sn=this.state.prevData;return an&&on&&on.length&&(!sn||!isEqual$1(sn,on))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(on)}},{key:"renderBackground",value:function(){var rn=this,on=this.props,an=on.data,sn=on.dataKey,un=on.activeIndex,Xr=filterProps(this.props.background,!1);return an.map(function(to,uo){to.value;var hn=to.background,fn=_objectWithoutProperties$4(to,_excluded$4);if(!hn)return null;var co=_objectSpread$a(_objectSpread$a(_objectSpread$a(_objectSpread$a(_objectSpread$a({},fn),{},{fill:"#eee"},hn),Xr),adaptEventsOfChild(rn.props,to,uo)),{},{onAnimationStart:rn.handleAnimationStart,onAnimationEnd:rn.handleAnimationEnd,dataKey:sn,index:uo,className:"recharts-bar-background-rectangle"});return React.createElement(BarRectangle,_extends$9({key:"background-bar-".concat(uo),option:rn.props.background,isActive:uo===un},co))})}},{key:"renderErrorBar",value:function(rn,on){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var an=this.props,sn=an.data,un=an.xAxis,Xr=an.yAxis,to=an.layout,uo=an.children,hn=findAllByType(uo,ErrorBar);if(!hn)return null;var fn=to==="vertical"?sn[0].height/2:sn[0].width/2,co=function(ho,mo){var Uo=Array.isArray(ho.value)?ho.value[1]:ho.value;return{x:ho.x,y:ho.y,value:Uo,errorVal:getValueByDataKey(ho,mo)}},lo={clipPath:rn?"url(#clipPath-".concat(on,")"):null};return React.createElement(Layer,lo,hn.map(function(fo){return React.cloneElement(fo,{key:"error-bar-".concat(on,"-").concat(fo.props.dataKey),data:sn,xAxis:un,yAxis:Xr,layout:to,offset:fn,dataPointFormatter:co})}))}},{key:"render",value:function(){var rn=this.props,on=rn.hide,an=rn.data,sn=rn.className,un=rn.xAxis,Xr=rn.yAxis,to=rn.left,uo=rn.top,hn=rn.width,fn=rn.height,co=rn.isAnimationActive,lo=rn.background,fo=rn.id;if(on||!an||!an.length)return null;var ho=this.state.isAnimationFinished,mo=clsx("recharts-bar",sn),Uo=un&&un.allowDataOverflow,_d=Xr&&Xr.allowDataOverflow,tp=Uo||_d,ep=isNil$1(fo)?this.id:fo;return React.createElement(Layer,{className:mo},Uo||_d?React.createElement("defs",null,React.createElement("clipPath",{id:"clipPath-".concat(ep)},React.createElement("rect",{x:Uo?to:to-hn/2,y:_d?uo:uo-fn/2,width:Uo?hn:hn*2,height:_d?fn:fn*2}))):null,React.createElement(Layer,{className:"recharts-bar-rectangles",clipPath:tp?"url(#clipPath-".concat(ep,")"):null},lo?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(tp,ep),(!co||ho)&&LabelList.renderCallByParent(this.props,an))}}],[{key:"getDerivedStateFromProps",value:function(rn,on){return rn.animationId!==on.prevAnimationId?{prevAnimationId:rn.animationId,curData:rn.data,prevData:on.curData}:rn.data!==on.curData?{curData:rn.data}:null}}])}(reactExports.PureComponent);_Bar=Bar;_defineProperty$d(Bar,"displayName","Bar");_defineProperty$d(Bar,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!Global.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});_defineProperty$d(Bar,"getComposedData",function(Mt){var st=Mt.props,nn=Mt.item,rn=Mt.barPosition,on=Mt.bandSize,an=Mt.xAxis,sn=Mt.yAxis,un=Mt.xAxisTicks,Xr=Mt.yAxisTicks,to=Mt.stackedData,uo=Mt.dataStartIndex,hn=Mt.displayedData,fn=Mt.offset,co=findPositionOfBar(rn,nn);if(!co)return null;var lo=st.layout,fo=nn.type.defaultProps,ho=fo!==void 0?_objectSpread$a(_objectSpread$a({},fo),nn.props):nn.props,mo=ho.dataKey,Uo=ho.children,_d=ho.minPointSize,tp=lo==="horizontal"?sn:an,ep=to?tp.scale.domain():null,np=getBaseValueOfBar({numericAxis:tp}),rp=findAllByType(Uo,Cell),ip=hn.map(function(op,ap){var sp,up,pp,lp,dp,cp;to?sp=truncateByDomain(to[uo+ap],ep):(sp=getValueByDataKey(op,mo),Array.isArray(sp)||(sp=[np,sp]));var fp=minPointSizeCallback(_d,_Bar.defaultProps.minPointSize)(sp[1],ap);if(lo==="horizontal"){var gp,mp=[sn.scale(sp[0]),sn.scale(sp[1])],xp=mp[0],_p=mp[1];up=getCateCoordinateOfBar({axis:an,ticks:un,bandSize:on,offset:co.offset,entry:op,index:ap}),pp=(gp=_p??xp)!==null&&gp!==void 0?gp:void 0,lp=co.size;var Sp=xp-_p;if(dp=Number.isNaN(Sp)?0:Sp,cp={x:up,y:sn.y,width:lp,height:sn.height},Math.abs(fp)>0&&Math.abs(dp)<Math.abs(fp)){var Cp=mathSign(dp||fp)*(Math.abs(fp)-Math.abs(dp));pp-=Cp,dp+=Cp}}else{var jp=[an.scale(sp[0]),an.scale(sp[1])],Dp=jp[0],Vp=jp[1];if(up=Dp,pp=getCateCoordinateOfBar({axis:sn,ticks:Xr,bandSize:on,offset:co.offset,entry:op,index:ap}),lp=Vp-Dp,dp=co.size,cp={x:an.x,y:pp,width:an.width,height:dp},Math.abs(fp)>0&&Math.abs(lp)<Math.abs(fp)){var Up=mathSign(lp||fp)*(Math.abs(fp)-Math.abs(lp));lp+=Up}}return _objectSpread$a(_objectSpread$a(_objectSpread$a({},op),{},{x:up,y:pp,width:lp,height:dp,value:to?sp:sp[1],payload:op,background:cp},rp&&rp[ap]&&rp[ap].props),{},{tooltipPayload:[getTooltipItem(nn,op)],tooltipPosition:{x:up+lp/2,y:pp+dp/2}})});return _objectSpread$a({data:ip,layout:lo},fn)});function _typeof$c(Mt){"@babel/helpers - typeof";return _typeof$c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(st){return typeof st}:function(st){return st&&typeof Symbol=="function"&&st.constructor===Symbol&&st!==Symbol.prototype?"symbol":typeof st},_typeof$c(Mt)}function _classCallCheck$9(Mt,st){if(!(Mt instanceof st))throw new TypeError("Cannot call a class as a function")}function _defineProperties$9(Mt,st){for(var nn=0;nn<st.length;nn++){var rn=st[nn];rn.enumerable=rn.enumerable||!1,rn.configurable=!0,"value"in rn&&(rn.writable=!0),Object.defineProperty(Mt,_toPropertyKey$c(rn.key),rn)}}function _createClass$9(Mt,st,nn){return st&&_defineProperties$9(Mt.prototype,st),nn&&_defineProperties$9(Mt,nn),Object.defineProperty(Mt,"prototype",{writable:!1}),Mt}function ownKeys$9(Mt,st){var nn=Object.keys(Mt);if(Object.getOwnPropertySymbols){var rn=Object.getOwnPropertySymbols(Mt);st&&(rn=rn.filter(function(on){return Object.getOwnPropertyDescriptor(Mt,on).enumerable})),nn.push.apply(nn,rn)}return nn}function _objectSpread$9(Mt){for(var st=1;st<arguments.length;st++){var nn=arguments[st]!=null?arguments[st]:{};st%2?ownKeys$9(Object(nn),!0).forEach(function(rn){_defineProperty$c(Mt,rn,nn[rn])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Mt,Object.getOwnPropertyDescriptors(nn)):ownKeys$9(Object(nn)).forEach(function(rn){Object.defineProperty(Mt,rn,Object.getOwnPropertyDescriptor(nn,rn))})}return Mt}function _defineProperty$c(Mt,st,nn){return st=_toPropertyKey$c(st),st in Mt?Object.defineProperty(Mt,st,{value:nn,enumerable:!0,configurable:!0,writable:!0}):Mt[st]=nn,Mt}function _toPropertyKey$c(Mt){var st=_toPrimitive$c(Mt,"string");return _typeof$c(st)=="symbol"?st:st+""}function _toPrimitive$c(Mt,st){if(_typeof$c(Mt)!="object"||!Mt)return Mt;var nn=Mt[Symbol.toPrimitive];if(nn!==void 0){var rn=nn.call(Mt,st||"default");if(_typeof$c(rn)!="object")return rn;throw new TypeError("@@toPrimitive must return a primitive value.")}return(st==="string"?String:Number)(Mt)}var formatAxisMap=function Mt(st,nn,rn,on,an){var sn=st.width,un=st.height,Xr=st.layout,to=st.children,uo=Object.keys(nn),hn={left:rn.left,leftMirror:rn.left,right:sn-rn.right,rightMirror:sn-rn.right,top:rn.top,topMirror:rn.top,bottom:un-rn.bottom,bottomMirror:un-rn.bottom},fn=!!findChildByType(to,Bar);return uo.reduce(function(co,lo){var fo=nn[lo],ho=fo.orientation,mo=fo.domain,Uo=fo.padding,_d=Uo===void 0?{}:Uo,tp=fo.mirror,ep=fo.reversed,np="".concat(ho).concat(tp?"Mirror":""),rp,ip,op,ap,sp;if(fo.type==="number"&&(fo.padding==="gap"||fo.padding==="no-gap")){var up=mo[1]-mo[0],pp=1/0,lp=fo.categoricalDomain.sort();if(lp.forEach(function(jp,Dp){Dp>0&&(pp=Math.min((jp||0)-(lp[Dp-1]||0),pp))}),Number.isFinite(pp)){var dp=pp/up,cp=fo.layout==="vertical"?rn.height:rn.width;if(fo.padding==="gap"&&(rp=dp*cp/2),fo.padding==="no-gap"){var fp=getPercentValue(st.barCategoryGap,dp*cp),gp=dp*cp/2;rp=gp-fp-(gp-fp)/cp*fp}}}on==="xAxis"?ip=[rn.left+(_d.left||0)+(rp||0),rn.left+rn.width-(_d.right||0)-(rp||0)]:on==="yAxis"?ip=Xr==="horizontal"?[rn.top+rn.height-(_d.bottom||0),rn.top+(_d.top||0)]:[rn.top+(_d.top||0)+(rp||0),rn.top+rn.height-(_d.bottom||0)-(rp||0)]:ip=fo.range,ep&&(ip=[ip[1],ip[0]]);var mp=parseScale(fo,an,fn),xp=mp.scale,_p=mp.realScaleType;xp.domain(mo).range(ip),checkDomainOfScale(xp);var Sp=getTicksOfScale(xp,_objectSpread$9(_objectSpread$9({},fo),{},{realScaleType:_p}));on==="xAxis"?(sp=ho==="top"&&!tp||ho==="bottom"&&tp,op=rn.left,ap=hn[np]-sp*fo.height):on==="yAxis"&&(sp=ho==="left"&&!tp||ho==="right"&&tp,op=hn[np]-sp*fo.width,ap=rn.top);var Cp=_objectSpread$9(_objectSpread$9(_objectSpread$9({},fo),Sp),{},{realScaleType:_p,x:op,y:ap,scale:xp,width:on==="xAxis"?rn.width:fo.width,height:on==="yAxis"?rn.height:fo.height});return Cp.bandSize=getBandSizeOfAxis(Cp,Sp),!fo.hide&&on==="xAxis"?hn[np]+=(sp?-1:1)*Cp.height:fo.hide||(hn[np]+=(sp?-1:1)*Cp.width),_objectSpread$9(_objectSpread$9({},co),{},_defineProperty$c({},lo,Cp))},{})},rectWithPoints=function Mt(st,nn){var rn=st.x,on=st.y,an=nn.x,sn=nn.y;return{x:Math.min(rn,an),y:Math.min(on,sn),width:Math.abs(an-rn),height:Math.abs(sn-on)}},rectWithCoords=function Mt(st){var nn=st.x1,rn=st.y1,on=st.x2,an=st.y2;return rectWithPoints({x:nn,y:rn},{x:on,y:an})},ScaleHelper=function(){function Mt(st){_classCallCheck$9(this,Mt),this.scale=st}return _createClass$9(Mt,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(nn){var rn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},on=rn.bandAware,an=rn.position;if(nn!==void 0){if(an)switch(an){case"start":return this.scale(nn);case"middle":{var sn=this.bandwidth?this.bandwidth()/2:0;return this.scale(nn)+sn}case"end":{var un=this.bandwidth?this.bandwidth():0;return this.scale(nn)+un}default:return this.scale(nn)}if(on){var Xr=this.bandwidth?this.bandwidth()/2:0;return this.scale(nn)+Xr}return this.scale(nn)}}},{key:"isInRange",value:function(nn){var rn=this.range(),on=rn[0],an=rn[rn.length-1];return on<=an?nn>=on&&nn<=an:nn>=an&&nn<=on}}],[{key:"create",value:function(nn){return new Mt(nn)}}])}();_defineProperty$c(ScaleHelper,"EPS",1e-4);var createLabeledScales=function Mt(st){var nn=Object.keys(st).reduce(function(rn,on){return _objectSpread$9(_objectSpread$9({},rn),{},_defineProperty$c({},on,ScaleHelper.create(st[on])))},{});return _objectSpread$9(_objectSpread$9({},nn),{},{apply:function(on){var an=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},sn=an.bandAware,un=an.position;return mapValues$1(on,function(Xr,to){return nn[to].apply(Xr,{bandAware:sn,position:un})})},isInRange:function(on){return every$1(on,function(an,sn){return nn[sn].isInRange(an)})}})};function normalizeAngle(Mt){return(Mt%180+180)%180}var getAngledRectangleWidth=function Mt(st){var nn=st.width,rn=st.height,on=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,an=normalizeAngle(on),sn=an*Math.PI/180,un=Math.atan(rn/nn),Xr=sn>un&&sn<Math.PI-un?rn/Math.sin(sn):nn/Math.cos(sn);return Math.abs(Xr)},baseIteratee$1=_baseIteratee,isArrayLike=isArrayLike_1,keys=keys_1;function createFind$1(Mt){return function(st,nn,rn){var on=Object(st);if(!isArrayLike(st)){var an=baseIteratee$1(nn);st=keys(st),nn=function(un){return an(on[un],un,on)}}var sn=Mt(st,nn,rn);return sn>-1?on[an?st[sn]:sn]:void 0}}var _createFind=createFind$1,toFinite=toFinite_1;function toInteger$1(Mt){var st=toFinite(Mt),nn=st%1;return st===st?nn?st-nn:st:0}var toInteger_1=toInteger$1,baseFindIndex=_baseFindIndex,baseIteratee=_baseIteratee,toInteger=toInteger_1,nativeMax=Math.max;function findIndex$1(Mt,st,nn){var rn=Mt==null?0:Mt.length;if(!rn)return-1;var on=nn==null?0:toInteger(nn);return on<0&&(on=nativeMax(rn+on,0)),baseFindIndex(Mt,baseIteratee(st),on)}var findIndex_1=findIndex$1,createFind=_createFind,findIndex=findIndex_1,find=createFind(findIndex),find_1=find;const find$1=getDefaultExportFromCjs(find_1);var calculateViewBox=memoize$3(function(Mt){return{x:Mt.left,y:Mt.top,width:Mt.width,height:Mt.height}},function(Mt){return["l",Mt.left,"t",Mt.top,"w",Mt.width,"h",Mt.height].join("")}),XAxisContext=reactExports.createContext(void 0),YAxisContext=reactExports.createContext(void 0),ViewBoxContext=reactExports.createContext(void 0),OffsetContext=reactExports.createContext({}),ClipPathIdContext=reactExports.createContext(void 0),ChartHeightContext=reactExports.createContext(0),ChartWidthContext=reactExports.createContext(0),ChartLayoutContextProvider=function Mt(st){var nn=st.state,rn=nn.xAxisMap,on=nn.yAxisMap,an=nn.offset,sn=st.clipPathId,un=st.children,Xr=st.width,to=st.height,uo=calculateViewBox(an);return React.createElement(XAxisContext.Provider,{value:rn},React.createElement(YAxisContext.Provider,{value:on},React.createElement(OffsetContext.Provider,{value:an},React.createElement(ViewBoxContext.Provider,{value:uo},React.createElement(ClipPathIdContext.Provider,{value:sn},React.createElement(ChartHeightContext.Provider,{value:to},React.createElement(ChartWidthContext.Provider,{value:Xr},un)))))))},useClipPathId=function Mt(){return reactExports.useContext(ClipPathIdContext)},useXAxisOrThrow=function Mt(st){var nn=reactExports.useContext(XAxisContext);nn==null&&invariant();var rn=nn[st];return rn==null&&invariant(),rn},useArbitraryXAxis=function Mt(){var st=reactExports.useContext(XAxisContext);return getAnyElementOfObject(st)},useYAxisWithFiniteDomainOrRandom=function Mt(){var st=reactExports.useContext(YAxisContext),nn=find$1(st,function(rn){return every$1(rn.domain,Number.isFinite)});return nn||getAnyElementOfObject(st)},useYAxisOrThrow=function Mt(st){var nn=reactExports.useContext(YAxisContext);nn==null&&invariant();var rn=nn[st];return rn==null&&invariant(),rn},useViewBox=function Mt(){var st=reactExports.useContext(ViewBoxContext);return st},useOffset=function Mt(){return reactExports.useContext(OffsetContext)},useChartWidth=function Mt(){return reactExports.useContext(ChartWidthContext)},useChartHeight=function Mt(){return reactExports.useContext(ChartHeightContext)};function _typeof$b(Mt){"@babel/helpers - typeof";return _typeof$b=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(st){return typeof st}:function(st){return st&&typeof Symbol=="function"&&st.constructor===Symbol&&st!==Symbol.prototype?"symbol":typeof st},_typeof$b(Mt)}function _classCallCheck$8(Mt,st){if(!(Mt instanceof st))throw new TypeError("Cannot call a class as a function")}function _defineProperties$8(Mt,st){for(var nn=0;nn<st.length;nn++){var rn=st[nn];rn.enumerable=rn.enumerable||!1,rn.configurable=!0,"value"in rn&&(rn.writable=!0),Object.defineProperty(Mt,_toPropertyKey$b(rn.key),rn)}}function _createClass$8(Mt,st,nn){return st&&_defineProperties$8(Mt.prototype,st),Object.defineProperty(Mt,"prototype",{writable:!1}),Mt}function _callSuper$7(Mt,st,nn){return st=_getPrototypeOf$7(st),_possibleConstructorReturn$7(Mt,_isNativeReflectConstruct$7()?Reflect.construct(st,nn||[],_getPrototypeOf$7(Mt).constructor):st.apply(Mt,nn))}function _possibleConstructorReturn$7(Mt,st){if(st&&(_typeof$b(st)==="object"||typeof st=="function"))return st;if(st!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$7(Mt)}function _assertThisInitialized$7(Mt){if(Mt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Mt}function _isNativeReflectConstruct$7(){try{var Mt=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_isNativeReflectConstruct$7=function(){return!!Mt})()}function _getPrototypeOf$7(Mt){return _getPrototypeOf$7=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(nn){return nn.__proto__||Object.getPrototypeOf(nn)},_getPrototypeOf$7(Mt)}function _inherits$7(Mt,st){if(typeof st!="function"&&st!==null)throw new TypeError("Super expression must either be null or a function");Mt.prototype=Object.create(st&&st.prototype,{constructor:{value:Mt,writable:!0,configurable:!0}}),Object.defineProperty(Mt,"prototype",{writable:!1}),st&&_setPrototypeOf$7(Mt,st)}function _setPrototypeOf$7(Mt,st){return _setPrototypeOf$7=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(rn,on){return rn.__proto__=on,rn},_setPrototypeOf$7(Mt,st)}function ownKeys$8(Mt,st){var nn=Object.keys(Mt);if(Object.getOwnPropertySymbols){var rn=Object.getOwnPropertySymbols(Mt);st&&(rn=rn.filter(function(on){return Object.getOwnPropertyDescriptor(Mt,on).enumerable})),nn.push.apply(nn,rn)}return nn}function _objectSpread$8(Mt){for(var st=1;st<arguments.length;st++){var nn=arguments[st]!=null?arguments[st]:{};st%2?ownKeys$8(Object(nn),!0).forEach(function(rn){_defineProperty$b(Mt,rn,nn[rn])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Mt,Object.getOwnPropertyDescriptors(nn)):ownKeys$8(Object(nn)).forEach(function(rn){Object.defineProperty(Mt,rn,Object.getOwnPropertyDescriptor(nn,rn))})}return Mt}function _defineProperty$b(Mt,st,nn){return st=_toPropertyKey$b(st),st in Mt?Object.defineProperty(Mt,st,{value:nn,enumerable:!0,configurable:!0,writable:!0}):Mt[st]=nn,Mt}function _toPropertyKey$b(Mt){var st=_toPrimitive$b(Mt,"string");return _typeof$b(st)=="symbol"?st:st+""}function _toPrimitive$b(Mt,st){if(_typeof$b(Mt)!="object"||!Mt)return Mt;var nn=Mt[Symbol.toPrimitive];if(nn!==void 0){var rn=nn.call(Mt,st||"default");if(_typeof$b(rn)!="object")return rn;throw new TypeError("@@toPrimitive must return a primitive value.")}return(st==="string"?String:Number)(Mt)}function _slicedToArray$1(Mt,st){return _arrayWithHoles$1(Mt)||_iterableToArrayLimit$1(Mt,st)||_unsupportedIterableToArray$2(Mt,st)||_nonIterableRest$1()}function _nonIterableRest$1(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$2(Mt,st){if(Mt){if(typeof Mt=="string")return _arrayLikeToArray$2(Mt,st);var nn=Object.prototype.toString.call(Mt).slice(8,-1);if(nn==="Object"&&Mt.constructor&&(nn=Mt.constructor.name),nn==="Map"||nn==="Set")return Array.from(Mt);if(nn==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(nn))return _arrayLikeToArray$2(Mt,st)}}function _arrayLikeToArray$2(Mt,st){(st==null||st>Mt.length)&&(st=Mt.length);for(var nn=0,rn=new Array(st);nn<st;nn++)rn[nn]=Mt[nn];return rn}function _iterableToArrayLimit$1(Mt,st){var nn=Mt==null?null:typeof Symbol<"u"&&Mt[Symbol.iterator]||Mt["@@iterator"];if(nn!=null){var rn,on,an,sn,un=[],Xr=!0,to=!1;try{if(an=(nn=nn.call(Mt)).next,st!==0)for(;!(Xr=(rn=an.call(nn)).done)&&(un.push(rn.value),un.length!==st);Xr=!0);}catch(uo){to=!0,on=uo}finally{try{if(!Xr&&nn.return!=null&&(sn=nn.return(),Object(sn)!==sn))return}finally{if(to)throw on}}return un}}function _arrayWithHoles$1(Mt){if(Array.isArray(Mt))return Mt}function _extends$8(){return _extends$8=Object.assign?Object.assign.bind():function(Mt){for(var st=1;st<arguments.length;st++){var nn=arguments[st];for(var rn in nn)Object.prototype.hasOwnProperty.call(nn,rn)&&(Mt[rn]=nn[rn])}return Mt},_extends$8.apply(this,arguments)}var renderLine=function Mt(st,nn){var rn;return React.isValidElement(st)?rn=React.cloneElement(st,nn):isFunction$3(st)?rn=st(nn):rn=React.createElement("line",_extends$8({},nn,{className:"recharts-reference-line-line"})),rn},getEndPoints=function Mt(st,nn,rn,on,an,sn,un,Xr,to){var uo=an.x,hn=an.y,fn=an.width,co=an.height;if(rn){var lo=to.y,fo=st.y.apply(lo,{position:sn});if(ifOverflowMatches(to,"discard")&&!st.y.isInRange(fo))return null;var ho=[{x:uo+fn,y:fo},{x:uo,y:fo}];return Xr==="left"?ho.reverse():ho}if(nn){var mo=to.x,Uo=st.x.apply(mo,{position:sn});if(ifOverflowMatches(to,"discard")&&!st.x.isInRange(Uo))return null;var _d=[{x:Uo,y:hn+co},{x:Uo,y:hn}];return un==="top"?_d.reverse():_d}if(on){var tp=to.segment,ep=tp.map(function(np){return st.apply(np,{position:sn})});return ifOverflowMatches(to,"discard")&&some$1(ep,function(np){return!st.isInRange(np)})?null:ep}return null};function ReferenceLineImpl(Mt){var st=Mt.x,nn=Mt.y,rn=Mt.segment,on=Mt.xAxisId,an=Mt.yAxisId,sn=Mt.shape,un=Mt.className,Xr=Mt.alwaysShow,to=useClipPathId(),uo=useXAxisOrThrow(on),hn=useYAxisOrThrow(an),fn=useViewBox();if(!to||!fn)return null;warn(Xr===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var co=createLabeledScales({x:uo.scale,y:hn.scale}),lo=isNumOrStr(st),fo=isNumOrStr(nn),ho=rn&&rn.length===2,mo=getEndPoints(co,lo,fo,ho,fn,Mt.position,uo.orientation,hn.orientation,Mt);if(!mo)return null;var Uo=_slicedToArray$1(mo,2),_d=Uo[0],tp=_d.x,ep=_d.y,np=Uo[1],rp=np.x,ip=np.y,op=ifOverflowMatches(Mt,"hidden")?"url(#".concat(to,")"):void 0,ap=_objectSpread$8(_objectSpread$8({clipPath:op},filterProps(Mt,!0)),{},{x1:tp,y1:ep,x2:rp,y2:ip});return React.createElement(Layer,{className:clsx("recharts-reference-line",un)},renderLine(sn,ap),Label.renderCallByParent(Mt,rectWithCoords({x1:tp,y1:ep,x2:rp,y2:ip})))}var ReferenceLine=function(Mt){function st(){return _classCallCheck$8(this,st),_callSuper$7(this,st,arguments)}return _inherits$7(st,Mt),_createClass$8(st,[{key:"render",value:function(){return React.createElement(ReferenceLineImpl,this.props)}}])}(React.Component);_defineProperty$b(ReferenceLine,"displayName","ReferenceLine");_defineProperty$b(ReferenceLine,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function _extends$7(){return _extends$7=Object.assign?Object.assign.bind():function(Mt){for(var st=1;st<arguments.length;st++){var nn=arguments[st];for(var rn in nn)Object.prototype.hasOwnProperty.call(nn,rn)&&(Mt[rn]=nn[rn])}return Mt},_extends$7.apply(this,arguments)}function _typeof$a(Mt){"@babel/helpers - typeof";return _typeof$a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(st){return typeof st}:function(st){return st&&typeof Symbol=="function"&&st.constructor===Symbol&&st!==Symbol.prototype?"symbol":typeof st},_typeof$a(Mt)}function ownKeys$7(Mt,st){var nn=Object.keys(Mt);if(Object.getOwnPropertySymbols){var rn=Object.getOwnPropertySymbols(Mt);st&&(rn=rn.filter(function(on){return Object.getOwnPropertyDescriptor(Mt,on).enumerable})),nn.push.apply(nn,rn)}return nn}function _objectSpread$7(Mt){for(var st=1;st<arguments.length;st++){var nn=arguments[st]!=null?arguments[st]:{};st%2?ownKeys$7(Object(nn),!0).forEach(function(rn){_defineProperty$a(Mt,rn,nn[rn])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Mt,Object.getOwnPropertyDescriptors(nn)):ownKeys$7(Object(nn)).forEach(function(rn){Object.defineProperty(Mt,rn,Object.getOwnPropertyDescriptor(nn,rn))})}return Mt}function _classCallCheck$7(Mt,st){if(!(Mt instanceof st))throw new TypeError("Cannot call a class as a function")}function _defineProperties$7(Mt,st){for(var nn=0;nn<st.length;nn++){var rn=st[nn];rn.enumerable=rn.enumerable||!1,rn.configurable=!0,"value"in rn&&(rn.writable=!0),Object.defineProperty(Mt,_toPropertyKey$a(rn.key),rn)}}function _createClass$7(Mt,st,nn){return st&&_defineProperties$7(Mt.prototype,st),Object.defineProperty(Mt,"prototype",{writable:!1}),Mt}function _callSuper$6(Mt,st,nn){return st=_getPrototypeOf$6(st),_possibleConstructorReturn$6(Mt,_isNativeReflectConstruct$6()?Reflect.construct(st,nn||[],_getPrototypeOf$6(Mt).constructor):st.apply(Mt,nn))}function _possibleConstructorReturn$6(Mt,st){if(st&&(_typeof$a(st)==="object"||typeof st=="function"))return st;if(st!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$6(Mt)}function _assertThisInitialized$6(Mt){if(Mt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Mt}function _isNativeReflectConstruct$6(){try{var Mt=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_isNativeReflectConstruct$6=function(){return!!Mt})()}function _getPrototypeOf$6(Mt){return _getPrototypeOf$6=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(nn){return nn.__proto__||Object.getPrototypeOf(nn)},_getPrototypeOf$6(Mt)}function _inherits$6(Mt,st){if(typeof st!="function"&&st!==null)throw new TypeError("Super expression must either be null or a function");Mt.prototype=Object.create(st&&st.prototype,{constructor:{value:Mt,writable:!0,configurable:!0}}),Object.defineProperty(Mt,"prototype",{writable:!1}),st&&_setPrototypeOf$6(Mt,st)}function _setPrototypeOf$6(Mt,st){return _setPrototypeOf$6=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(rn,on){return rn.__proto__=on,rn},_setPrototypeOf$6(Mt,st)}function _defineProperty$a(Mt,st,nn){return st=_toPropertyKey$a(st),st in Mt?Object.defineProperty(Mt,st,{value:nn,enumerable:!0,configurable:!0,writable:!0}):Mt[st]=nn,Mt}function _toPropertyKey$a(Mt){var st=_toPrimitive$a(Mt,"string");return _typeof$a(st)=="symbol"?st:st+""}function _toPrimitive$a(Mt,st){if(_typeof$a(Mt)!="object"||!Mt)return Mt;var nn=Mt[Symbol.toPrimitive];if(nn!==void 0){var rn=nn.call(Mt,st||"default");if(_typeof$a(rn)!="object")return rn;throw new TypeError("@@toPrimitive must return a primitive value.")}return(st==="string"?String:Number)(Mt)}var getCoordinate=function Mt(st){var nn=st.x,rn=st.y,on=st.xAxis,an=st.yAxis,sn=createLabeledScales({x:on.scale,y:an.scale}),un=sn.apply({x:nn,y:rn},{bandAware:!0});return ifOverflowMatches(st,"discard")&&!sn.isInRange(un)?null:un},ReferenceDot=function(Mt){function st(){return _classCallCheck$7(this,st),_callSuper$6(this,st,arguments)}return _inherits$6(st,Mt),_createClass$7(st,[{key:"render",value:function(){var rn=this.props,on=rn.x,an=rn.y,sn=rn.r,un=rn.alwaysShow,Xr=rn.clipPathId,to=isNumOrStr(on),uo=isNumOrStr(an);if(warn(un===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!to||!uo)return null;var hn=getCoordinate(this.props);if(!hn)return null;var fn=hn.x,co=hn.y,lo=this.props,fo=lo.shape,ho=lo.className,mo=ifOverflowMatches(this.props,"hidden")?"url(#".concat(Xr,")"):void 0,Uo=_objectSpread$7(_objectSpread$7({clipPath:mo},filterProps(this.props,!0)),{},{cx:fn,cy:co});return React.createElement(Layer,{className:clsx("recharts-reference-dot",ho)},st.renderDot(fo,Uo),Label.renderCallByParent(this.props,{x:fn-sn,y:co-sn,width:2*sn,height:2*sn}))}}])}(React.Component);_defineProperty$a(ReferenceDot,"displayName","ReferenceDot");_defineProperty$a(ReferenceDot,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});_defineProperty$a(ReferenceDot,"renderDot",function(Mt,st){var nn;return React.isValidElement(Mt)?nn=React.cloneElement(Mt,st):isFunction$3(Mt)?nn=Mt(st):nn=React.createElement(Dot,_extends$7({},st,{cx:st.cx,cy:st.cy,className:"recharts-reference-dot-dot"})),nn});function _extends$6(){return _extends$6=Object.assign?Object.assign.bind():function(Mt){for(var st=1;st<arguments.length;st++){var nn=arguments[st];for(var rn in nn)Object.prototype.hasOwnProperty.call(nn,rn)&&(Mt[rn]=nn[rn])}return Mt},_extends$6.apply(this,arguments)}function _typeof$9(Mt){"@babel/helpers - typeof";return _typeof$9=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(st){return typeof st}:function(st){return st&&typeof Symbol=="function"&&st.constructor===Symbol&&st!==Symbol.prototype?"symbol":typeof st},_typeof$9(Mt)}function ownKeys$6(Mt,st){var nn=Object.keys(Mt);if(Object.getOwnPropertySymbols){var rn=Object.getOwnPropertySymbols(Mt);st&&(rn=rn.filter(function(on){return Object.getOwnPropertyDescriptor(Mt,on).enumerable})),nn.push.apply(nn,rn)}return nn}function _objectSpread$6(Mt){for(var st=1;st<arguments.length;st++){var nn=arguments[st]!=null?arguments[st]:{};st%2?ownKeys$6(Object(nn),!0).forEach(function(rn){_defineProperty$9(Mt,rn,nn[rn])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Mt,Object.getOwnPropertyDescriptors(nn)):ownKeys$6(Object(nn)).forEach(function(rn){Object.defineProperty(Mt,rn,Object.getOwnPropertyDescriptor(nn,rn))})}return Mt}function _classCallCheck$6(Mt,st){if(!(Mt instanceof st))throw new TypeError("Cannot call a class as a function")}function _defineProperties$6(Mt,st){for(var nn=0;nn<st.length;nn++){var rn=st[nn];rn.enumerable=rn.enumerable||!1,rn.configurable=!0,"value"in rn&&(rn.writable=!0),Object.defineProperty(Mt,_toPropertyKey$9(rn.key),rn)}}function _createClass$6(Mt,st,nn){return st&&_defineProperties$6(Mt.prototype,st),Object.defineProperty(Mt,"prototype",{writable:!1}),Mt}function _callSuper$5(Mt,st,nn){return st=_getPrototypeOf$5(st),_possibleConstructorReturn$5(Mt,_isNativeReflectConstruct$5()?Reflect.construct(st,nn||[],_getPrototypeOf$5(Mt).constructor):st.apply(Mt,nn))}function _possibleConstructorReturn$5(Mt,st){if(st&&(_typeof$9(st)==="object"||typeof st=="function"))return st;if(st!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$5(Mt)}function _assertThisInitialized$5(Mt){if(Mt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Mt}function _isNativeReflectConstruct$5(){try{var Mt=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_isNativeReflectConstruct$5=function(){return!!Mt})()}function _getPrototypeOf$5(Mt){return _getPrototypeOf$5=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(nn){return nn.__proto__||Object.getPrototypeOf(nn)},_getPrototypeOf$5(Mt)}function _inherits$5(Mt,st){if(typeof st!="function"&&st!==null)throw new TypeError("Super expression must either be null or a function");Mt.prototype=Object.create(st&&st.prototype,{constructor:{value:Mt,writable:!0,configurable:!0}}),Object.defineProperty(Mt,"prototype",{writable:!1}),st&&_setPrototypeOf$5(Mt,st)}function _setPrototypeOf$5(Mt,st){return _setPrototypeOf$5=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(rn,on){return rn.__proto__=on,rn},_setPrototypeOf$5(Mt,st)}function _defineProperty$9(Mt,st,nn){return st=_toPropertyKey$9(st),st in Mt?Object.defineProperty(Mt,st,{value:nn,enumerable:!0,configurable:!0,writable:!0}):Mt[st]=nn,Mt}function _toPropertyKey$9(Mt){var st=_toPrimitive$9(Mt,"string");return _typeof$9(st)=="symbol"?st:st+""}function _toPrimitive$9(Mt,st){if(_typeof$9(Mt)!="object"||!Mt)return Mt;var nn=Mt[Symbol.toPrimitive];if(nn!==void 0){var rn=nn.call(Mt,st||"default");if(_typeof$9(rn)!="object")return rn;throw new TypeError("@@toPrimitive must return a primitive value.")}return(st==="string"?String:Number)(Mt)}var getRect=function Mt(st,nn,rn,on,an){var sn=an.x1,un=an.x2,Xr=an.y1,to=an.y2,uo=an.xAxis,hn=an.yAxis;if(!uo||!hn)return null;var fn=createLabeledScales({x:uo.scale,y:hn.scale}),co={x:st?fn.x.apply(sn,{position:"start"}):fn.x.rangeMin,y:rn?fn.y.apply(Xr,{position:"start"}):fn.y.rangeMin},lo={x:nn?fn.x.apply(un,{position:"end"}):fn.x.rangeMax,y:on?fn.y.apply(to,{position:"end"}):fn.y.rangeMax};return ifOverflowMatches(an,"discard")&&(!fn.isInRange(co)||!fn.isInRange(lo))?null:rectWithPoints(co,lo)},ReferenceArea=function(Mt){function st(){return _classCallCheck$6(this,st),_callSuper$5(this,st,arguments)}return _inherits$5(st,Mt),_createClass$6(st,[{key:"render",value:function(){var rn=this.props,on=rn.x1,an=rn.x2,sn=rn.y1,un=rn.y2,Xr=rn.className,to=rn.alwaysShow,uo=rn.clipPathId;warn(to===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var hn=isNumOrStr(on),fn=isNumOrStr(an),co=isNumOrStr(sn),lo=isNumOrStr(un),fo=this.props.shape;if(!hn&&!fn&&!co&&!lo&&!fo)return null;var ho=getRect(hn,fn,co,lo,this.props);if(!ho&&!fo)return null;var mo=ifOverflowMatches(this.props,"hidden")?"url(#".concat(uo,")"):void 0;return React.createElement(Layer,{className:clsx("recharts-reference-area",Xr)},st.renderRect(fo,_objectSpread$6(_objectSpread$6({clipPath:mo},filterProps(this.props,!0)),ho)),Label.renderCallByParent(this.props,ho))}}])}(React.Component);_defineProperty$9(ReferenceArea,"displayName","ReferenceArea");_defineProperty$9(ReferenceArea,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});_defineProperty$9(ReferenceArea,"renderRect",function(Mt,st){var nn;return React.isValidElement(Mt)?nn=React.cloneElement(Mt,st):isFunction$3(Mt)?nn=Mt(st):nn=React.createElement(Rectangle,_extends$6({},st,{className:"recharts-reference-area-rect"})),nn});function getEveryNthWithCondition(Mt,st,nn){if(st<1)return[];if(st===1&&nn===void 0)return Mt;for(var rn=[],on=0;on<Mt.length;on+=st)rn.push(Mt[on]);return rn}function getAngledTickWidth(Mt,st,nn){var rn={width:Mt.width+st.width,height:Mt.height+st.height};return getAngledRectangleWidth(rn,nn)}function getTickBoundaries(Mt,st,nn){var rn=nn==="width",on=Mt.x,an=Mt.y,sn=Mt.width,un=Mt.height;return st===1?{start:rn?on:an,end:rn?on+sn:an+un}:{start:rn?on+sn:an+un,end:rn?on:an}}function isVisible(Mt,st,nn,rn,on){if(Mt*st<Mt*rn||Mt*st>Mt*on)return!1;var an=nn();return Mt*(st-Mt*an/2-rn)>=0&&Mt*(st+Mt*an/2-on)<=0}function getNumberIntervalTicks(Mt,st){return getEveryNthWithCondition(Mt,st+1)}function getEquidistantTicks(Mt,st,nn,rn,on){for(var an=(rn||[]).slice(),sn=st.start,un=st.end,Xr=0,to=1,uo=sn,hn=function(){var lo=rn==null?void 0:rn[Xr];if(lo===void 0)return{v:getEveryNthWithCondition(rn,to)};var fo=Xr,ho,mo=function(){return ho===void 0&&(ho=nn(lo,fo)),ho},Uo=lo.coordinate,_d=Xr===0||isVisible(Mt,Uo,mo,uo,un);_d||(Xr=0,uo=sn,to+=1),_d&&(uo=Uo+Mt*(mo()/2+on),Xr+=to)},fn;to<=an.length;)if(fn=hn(),fn)return fn.v;return[]}function _typeof$8(Mt){"@babel/helpers - typeof";return _typeof$8=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(st){return typeof st}:function(st){return st&&typeof Symbol=="function"&&st.constructor===Symbol&&st!==Symbol.prototype?"symbol":typeof st},_typeof$8(Mt)}function ownKeys$5(Mt,st){var nn=Object.keys(Mt);if(Object.getOwnPropertySymbols){var rn=Object.getOwnPropertySymbols(Mt);st&&(rn=rn.filter(function(on){return Object.getOwnPropertyDescriptor(Mt,on).enumerable})),nn.push.apply(nn,rn)}return nn}function _objectSpread$5(Mt){for(var st=1;st<arguments.length;st++){var nn=arguments[st]!=null?arguments[st]:{};st%2?ownKeys$5(Object(nn),!0).forEach(function(rn){_defineProperty$8(Mt,rn,nn[rn])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Mt,Object.getOwnPropertyDescriptors(nn)):ownKeys$5(Object(nn)).forEach(function(rn){Object.defineProperty(Mt,rn,Object.getOwnPropertyDescriptor(nn,rn))})}return Mt}function _defineProperty$8(Mt,st,nn){return st=_toPropertyKey$8(st),st in Mt?Object.defineProperty(Mt,st,{value:nn,enumerable:!0,configurable:!0,writable:!0}):Mt[st]=nn,Mt}function _toPropertyKey$8(Mt){var st=_toPrimitive$8(Mt,"string");return _typeof$8(st)=="symbol"?st:st+""}function _toPrimitive$8(Mt,st){if(_typeof$8(Mt)!="object"||!Mt)return Mt;var nn=Mt[Symbol.toPrimitive];if(nn!==void 0){var rn=nn.call(Mt,st||"default");if(_typeof$8(rn)!="object")return rn;throw new TypeError("@@toPrimitive must return a primitive value.")}return(st==="string"?String:Number)(Mt)}function getTicksEnd(Mt,st,nn,rn,on){for(var an=(rn||[]).slice(),sn=an.length,un=st.start,Xr=st.end,to=function(fn){var co=an[fn],lo,fo=function(){return lo===void 0&&(lo=nn(co,fn)),lo};if(fn===sn-1){var ho=Mt*(co.coordinate+Mt*fo()/2-Xr);an[fn]=co=_objectSpread$5(_objectSpread$5({},co),{},{tickCoord:ho>0?co.coordinate-ho*Mt:co.coordinate})}else an[fn]=co=_objectSpread$5(_objectSpread$5({},co),{},{tickCoord:co.coordinate});var mo=isVisible(Mt,co.tickCoord,fo,un,Xr);mo&&(Xr=co.tickCoord-Mt*(fo()/2+on),an[fn]=_objectSpread$5(_objectSpread$5({},co),{},{isShow:!0}))},uo=sn-1;uo>=0;uo--)to(uo);return an}function getTicksStart(Mt,st,nn,rn,on,an){var sn=(rn||[]).slice(),un=sn.length,Xr=st.start,to=st.end;if(an){var uo=rn[un-1],hn=nn(uo,un-1),fn=Mt*(uo.coordinate+Mt*hn/2-to);sn[un-1]=uo=_objectSpread$5(_objectSpread$5({},uo),{},{tickCoord:fn>0?uo.coordinate-fn*Mt:uo.coordinate});var co=isVisible(Mt,uo.tickCoord,function(){return hn},Xr,to);co&&(to=uo.tickCoord-Mt*(hn/2+on),sn[un-1]=_objectSpread$5(_objectSpread$5({},uo),{},{isShow:!0}))}for(var lo=an?un-1:un,fo=function(Uo){var _d=sn[Uo],tp,ep=function(){return tp===void 0&&(tp=nn(_d,Uo)),tp};if(Uo===0){var np=Mt*(_d.coordinate-Mt*ep()/2-Xr);sn[Uo]=_d=_objectSpread$5(_objectSpread$5({},_d),{},{tickCoord:np<0?_d.coordinate-np*Mt:_d.coordinate})}else sn[Uo]=_d=_objectSpread$5(_objectSpread$5({},_d),{},{tickCoord:_d.coordinate});var rp=isVisible(Mt,_d.tickCoord,ep,Xr,to);rp&&(Xr=_d.tickCoord+Mt*(ep()/2+on),sn[Uo]=_objectSpread$5(_objectSpread$5({},_d),{},{isShow:!0}))},ho=0;ho<lo;ho++)fo(ho);return sn}function getTicks(Mt,st,nn){var rn=Mt.tick,on=Mt.ticks,an=Mt.viewBox,sn=Mt.minTickGap,un=Mt.orientation,Xr=Mt.interval,to=Mt.tickFormatter,uo=Mt.unit,hn=Mt.angle;if(!on||!on.length||!rn)return[];if(isNumber(Xr)||Global.isSsr)return getNumberIntervalTicks(on,typeof Xr=="number"&&isNumber(Xr)?Xr:0);var fn=[],co=un==="top"||un==="bottom"?"width":"height",lo=uo&&co==="width"?getStringSize(uo,{fontSize:st,letterSpacing:nn}):{width:0,height:0},fo=function(_d,tp){var ep=isFunction$3(to)?to(_d.value,tp):_d.value;return co==="width"?getAngledTickWidth(getStringSize(ep,{fontSize:st,letterSpacing:nn}),lo,hn):getStringSize(ep,{fontSize:st,letterSpacing:nn})[co]},ho=on.length>=2?mathSign(on[1].coordinate-on[0].coordinate):1,mo=getTickBoundaries(an,ho,co);return Xr==="equidistantPreserveStart"?getEquidistantTicks(ho,mo,fo,on,sn):(Xr==="preserveStart"||Xr==="preserveStartEnd"?fn=getTicksStart(ho,mo,fo,on,sn,Xr==="preserveStartEnd"):fn=getTicksEnd(ho,mo,fo,on,sn),fn.filter(function(Uo){return Uo.isShow}))}var _excluded$3=["viewBox"],_excluded2$3=["viewBox"],_excluded3=["ticks"];function _typeof$7(Mt){"@babel/helpers - typeof";return _typeof$7=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(st){return typeof st}:function(st){return st&&typeof Symbol=="function"&&st.constructor===Symbol&&st!==Symbol.prototype?"symbol":typeof st},_typeof$7(Mt)}function _extends$5(){return _extends$5=Object.assign?Object.assign.bind():function(Mt){for(var st=1;st<arguments.length;st++){var nn=arguments[st];for(var rn in nn)Object.prototype.hasOwnProperty.call(nn,rn)&&(Mt[rn]=nn[rn])}return Mt},_extends$5.apply(this,arguments)}function ownKeys$4(Mt,st){var nn=Object.keys(Mt);if(Object.getOwnPropertySymbols){var rn=Object.getOwnPropertySymbols(Mt);st&&(rn=rn.filter(function(on){return Object.getOwnPropertyDescriptor(Mt,on).enumerable})),nn.push.apply(nn,rn)}return nn}function _objectSpread$4(Mt){for(var st=1;st<arguments.length;st++){var nn=arguments[st]!=null?arguments[st]:{};st%2?ownKeys$4(Object(nn),!0).forEach(function(rn){_defineProperty$7(Mt,rn,nn[rn])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Mt,Object.getOwnPropertyDescriptors(nn)):ownKeys$4(Object(nn)).forEach(function(rn){Object.defineProperty(Mt,rn,Object.getOwnPropertyDescriptor(nn,rn))})}return Mt}function _objectWithoutProperties$3(Mt,st){if(Mt==null)return{};var nn=_objectWithoutPropertiesLoose$3(Mt,st),rn,on;if(Object.getOwnPropertySymbols){var an=Object.getOwnPropertySymbols(Mt);for(on=0;on<an.length;on++)rn=an[on],!(st.indexOf(rn)>=0)&&Object.prototype.propertyIsEnumerable.call(Mt,rn)&&(nn[rn]=Mt[rn])}return nn}function _objectWithoutPropertiesLoose$3(Mt,st){if(Mt==null)return{};var nn={};for(var rn in Mt)if(Object.prototype.hasOwnProperty.call(Mt,rn)){if(st.indexOf(rn)>=0)continue;nn[rn]=Mt[rn]}return nn}function _classCallCheck$5(Mt,st){if(!(Mt instanceof st))throw new TypeError("Cannot call a class as a function")}function _defineProperties$5(Mt,st){for(var nn=0;nn<st.length;nn++){var rn=st[nn];rn.enumerable=rn.enumerable||!1,rn.configurable=!0,"value"in rn&&(rn.writable=!0),Object.defineProperty(Mt,_toPropertyKey$7(rn.key),rn)}}function _createClass$5(Mt,st,nn){return st&&_defineProperties$5(Mt.prototype,st),nn&&_defineProperties$5(Mt,nn),Object.defineProperty(Mt,"prototype",{writable:!1}),Mt}function _callSuper$4(Mt,st,nn){return st=_getPrototypeOf$4(st),_possibleConstructorReturn$4(Mt,_isNativeReflectConstruct$4()?Reflect.construct(st,nn||[],_getPrototypeOf$4(Mt).constructor):st.apply(Mt,nn))}function _possibleConstructorReturn$4(Mt,st){if(st&&(_typeof$7(st)==="object"||typeof st=="function"))return st;if(st!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$4(Mt)}function _assertThisInitialized$4(Mt){if(Mt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Mt}function _isNativeReflectConstruct$4(){try{var Mt=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_isNativeReflectConstruct$4=function(){return!!Mt})()}function _getPrototypeOf$4(Mt){return _getPrototypeOf$4=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(nn){return nn.__proto__||Object.getPrototypeOf(nn)},_getPrototypeOf$4(Mt)}function _inherits$4(Mt,st){if(typeof st!="function"&&st!==null)throw new TypeError("Super expression must either be null or a function");Mt.prototype=Object.create(st&&st.prototype,{constructor:{value:Mt,writable:!0,configurable:!0}}),Object.defineProperty(Mt,"prototype",{writable:!1}),st&&_setPrototypeOf$4(Mt,st)}function _setPrototypeOf$4(Mt,st){return _setPrototypeOf$4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(rn,on){return rn.__proto__=on,rn},_setPrototypeOf$4(Mt,st)}function _defineProperty$7(Mt,st,nn){return st=_toPropertyKey$7(st),st in Mt?Object.defineProperty(Mt,st,{value:nn,enumerable:!0,configurable:!0,writable:!0}):Mt[st]=nn,Mt}function _toPropertyKey$7(Mt){var st=_toPrimitive$7(Mt,"string");return _typeof$7(st)=="symbol"?st:st+""}function _toPrimitive$7(Mt,st){if(_typeof$7(Mt)!="object"||!Mt)return Mt;var nn=Mt[Symbol.toPrimitive];if(nn!==void 0){var rn=nn.call(Mt,st||"default");if(_typeof$7(rn)!="object")return rn;throw new TypeError("@@toPrimitive must return a primitive value.")}return(st==="string"?String:Number)(Mt)}var CartesianAxis=function(Mt){function st(nn){var rn;return _classCallCheck$5(this,st),rn=_callSuper$4(this,st,[nn]),rn.state={fontSize:"",letterSpacing:""},rn}return _inherits$4(st,Mt),_createClass$5(st,[{key:"shouldComponentUpdate",value:function(rn,on){var an=rn.viewBox,sn=_objectWithoutProperties$3(rn,_excluded$3),un=this.props,Xr=un.viewBox,to=_objectWithoutProperties$3(un,_excluded2$3);return!shallowEqual(an,Xr)||!shallowEqual(sn,to)||!shallowEqual(on,this.state)}},{key:"componentDidMount",value:function(){var rn=this.layerReference;if(rn){var on=rn.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];on&&this.setState({fontSize:window.getComputedStyle(on).fontSize,letterSpacing:window.getComputedStyle(on).letterSpacing})}}},{key:"getTickLineCoord",value:function(rn){var on=this.props,an=on.x,sn=on.y,un=on.width,Xr=on.height,to=on.orientation,uo=on.tickSize,hn=on.mirror,fn=on.tickMargin,co,lo,fo,ho,mo,Uo,_d=hn?-1:1,tp=rn.tickSize||uo,ep=isNumber(rn.tickCoord)?rn.tickCoord:rn.coordinate;switch(to){case"top":co=lo=rn.coordinate,ho=sn+ +!hn*Xr,fo=ho-_d*tp,Uo=fo-_d*fn,mo=ep;break;case"left":fo=ho=rn.coordinate,lo=an+ +!hn*un,co=lo-_d*tp,mo=co-_d*fn,Uo=ep;break;case"right":fo=ho=rn.coordinate,lo=an+ +hn*un,co=lo+_d*tp,mo=co+_d*fn,Uo=ep;break;default:co=lo=rn.coordinate,ho=sn+ +hn*Xr,fo=ho+_d*tp,Uo=fo+_d*fn,mo=ep;break}return{line:{x1:co,y1:fo,x2:lo,y2:ho},tick:{x:mo,y:Uo}}}},{key:"getTickTextAnchor",value:function(){var rn=this.props,on=rn.orientation,an=rn.mirror,sn;switch(on){case"left":sn=an?"start":"end";break;case"right":sn=an?"end":"start";break;default:sn="middle";break}return sn}},{key:"getTickVerticalAnchor",value:function(){var rn=this.props,on=rn.orientation,an=rn.mirror,sn="end";switch(on){case"left":case"right":sn="middle";break;case"top":sn=an?"start":"end";break;default:sn=an?"end":"start";break}return sn}},{key:"renderAxisLine",value:function(){var rn=this.props,on=rn.x,an=rn.y,sn=rn.width,un=rn.height,Xr=rn.orientation,to=rn.mirror,uo=rn.axisLine,hn=_objectSpread$4(_objectSpread$4(_objectSpread$4({},filterProps(this.props,!1)),filterProps(uo,!1)),{},{fill:"none"});if(Xr==="top"||Xr==="bottom"){var fn=+(Xr==="top"&&!to||Xr==="bottom"&&to);hn=_objectSpread$4(_objectSpread$4({},hn),{},{x1:on,y1:an+fn*un,x2:on+sn,y2:an+fn*un})}else{var co=+(Xr==="left"&&!to||Xr==="right"&&to);hn=_objectSpread$4(_objectSpread$4({},hn),{},{x1:on+co*sn,y1:an,x2:on+co*sn,y2:an+un})}return React.createElement("line",_extends$5({},hn,{className:clsx("recharts-cartesian-axis-line",get$2(uo,"className"))}))}},{key:"renderTicks",value:function(rn,on,an){var sn=this,un=this.props,Xr=un.tickLine,to=un.stroke,uo=un.tick,hn=un.tickFormatter,fn=un.unit,co=getTicks(_objectSpread$4(_objectSpread$4({},this.props),{},{ticks:rn}),on,an),lo=this.getTickTextAnchor(),fo=this.getTickVerticalAnchor(),ho=filterProps(this.props,!1),mo=filterProps(uo,!1),Uo=_objectSpread$4(_objectSpread$4({},ho),{},{fill:"none"},filterProps(Xr,!1)),_d=co.map(function(tp,ep){var np=sn.getTickLineCoord(tp),rp=np.line,ip=np.tick,op=_objectSpread$4(_objectSpread$4(_objectSpread$4(_objectSpread$4({textAnchor:lo,verticalAnchor:fo},ho),{},{stroke:"none",fill:to},mo),ip),{},{index:ep,payload:tp,visibleTicksCount:co.length,tickFormatter:hn});return React.createElement(Layer,_extends$5({className:"recharts-cartesian-axis-tick",key:"tick-".concat(tp.value,"-").concat(tp.coordinate,"-").concat(tp.tickCoord)},adaptEventsOfChild(sn.props,tp,ep)),Xr&&React.createElement("line",_extends$5({},Uo,rp,{className:clsx("recharts-cartesian-axis-tick-line",get$2(Xr,"className"))})),uo&&st.renderTickItem(uo,op,"".concat(isFunction$3(hn)?hn(tp.value,ep):tp.value).concat(fn||"")))});return React.createElement("g",{className:"recharts-cartesian-axis-ticks"},_d)}},{key:"render",value:function(){var rn=this,on=this.props,an=on.axisLine,sn=on.width,un=on.height,Xr=on.ticksGenerator,to=on.className,uo=on.hide;if(uo)return null;var hn=this.props,fn=hn.ticks,co=_objectWithoutProperties$3(hn,_excluded3),lo=fn;return isFunction$3(Xr)&&(lo=fn&&fn.length>0?Xr(this.props):Xr(co)),sn<=0||un<=0||!lo||!lo.length?null:React.createElement(Layer,{className:clsx("recharts-cartesian-axis",to),ref:function(ho){rn.layerReference=ho}},an&&this.renderAxisLine(),this.renderTicks(lo,this.state.fontSize,this.state.letterSpacing),Label.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(rn,on,an){var sn;return React.isValidElement(rn)?sn=React.cloneElement(rn,on):isFunction$3(rn)?sn=rn(on):sn=React.createElement(Text,_extends$5({},on,{className:"recharts-cartesian-axis-tick-value"}),an),sn}}])}(reactExports.Component);_defineProperty$7(CartesianAxis,"displayName","CartesianAxis");_defineProperty$7(CartesianAxis,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var _excluded$2=["x1","y1","x2","y2","key"],_excluded2$2=["offset"];function _typeof$6(Mt){"@babel/helpers - typeof";return _typeof$6=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(st){return typeof st}:function(st){return st&&typeof Symbol=="function"&&st.constructor===Symbol&&st!==Symbol.prototype?"symbol":typeof st},_typeof$6(Mt)}function ownKeys$3(Mt,st){var nn=Object.keys(Mt);if(Object.getOwnPropertySymbols){var rn=Object.getOwnPropertySymbols(Mt);st&&(rn=rn.filter(function(on){return Object.getOwnPropertyDescriptor(Mt,on).enumerable})),nn.push.apply(nn,rn)}return nn}function _objectSpread$3(Mt){for(var st=1;st<arguments.length;st++){var nn=arguments[st]!=null?arguments[st]:{};st%2?ownKeys$3(Object(nn),!0).forEach(function(rn){_defineProperty$6(Mt,rn,nn[rn])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Mt,Object.getOwnPropertyDescriptors(nn)):ownKeys$3(Object(nn)).forEach(function(rn){Object.defineProperty(Mt,rn,Object.getOwnPropertyDescriptor(nn,rn))})}return Mt}function _defineProperty$6(Mt,st,nn){return st=_toPropertyKey$6(st),st in Mt?Object.defineProperty(Mt,st,{value:nn,enumerable:!0,configurable:!0,writable:!0}):Mt[st]=nn,Mt}function _toPropertyKey$6(Mt){var st=_toPrimitive$6(Mt,"string");return _typeof$6(st)=="symbol"?st:st+""}function _toPrimitive$6(Mt,st){if(_typeof$6(Mt)!="object"||!Mt)return Mt;var nn=Mt[Symbol.toPrimitive];if(nn!==void 0){var rn=nn.call(Mt,st||"default");if(_typeof$6(rn)!="object")return rn;throw new TypeError("@@toPrimitive must return a primitive value.")}return(st==="string"?String:Number)(Mt)}function _extends$4(){return _extends$4=Object.assign?Object.assign.bind():function(Mt){for(var st=1;st<arguments.length;st++){var nn=arguments[st];for(var rn in nn)Object.prototype.hasOwnProperty.call(nn,rn)&&(Mt[rn]=nn[rn])}return Mt},_extends$4.apply(this,arguments)}function _objectWithoutProperties$2(Mt,st){if(Mt==null)return{};var nn=_objectWithoutPropertiesLoose$2(Mt,st),rn,on;if(Object.getOwnPropertySymbols){var an=Object.getOwnPropertySymbols(Mt);for(on=0;on<an.length;on++)rn=an[on],!(st.indexOf(rn)>=0)&&Object.prototype.propertyIsEnumerable.call(Mt,rn)&&(nn[rn]=Mt[rn])}return nn}function _objectWithoutPropertiesLoose$2(Mt,st){if(Mt==null)return{};var nn={};for(var rn in Mt)if(Object.prototype.hasOwnProperty.call(Mt,rn)){if(st.indexOf(rn)>=0)continue;nn[rn]=Mt[rn]}return nn}var Background=function Mt(st){var nn=st.fill;if(!nn||nn==="none")return null;var rn=st.fillOpacity,on=st.x,an=st.y,sn=st.width,un=st.height,Xr=st.ry;return React.createElement("rect",{x:on,y:an,ry:Xr,width:sn,height:un,stroke:"none",fill:nn,fillOpacity:rn,className:"recharts-cartesian-grid-bg"})};function renderLineItem(Mt,st){var nn;if(React.isValidElement(Mt))nn=React.cloneElement(Mt,st);else if(isFunction$3(Mt))nn=Mt(st);else{var rn=st.x1,on=st.y1,an=st.x2,sn=st.y2,un=st.key,Xr=_objectWithoutProperties$2(st,_excluded$2),to=filterProps(Xr,!1);to.offset;var uo=_objectWithoutProperties$2(to,_excluded2$2);nn=React.createElement("line",_extends$4({},uo,{x1:rn,y1:on,x2:an,y2:sn,fill:"none",key:un}))}return nn}function HorizontalGridLines(Mt){var st=Mt.x,nn=Mt.width,rn=Mt.horizontal,on=rn===void 0?!0:rn,an=Mt.horizontalPoints;if(!on||!an||!an.length)return null;var sn=an.map(function(un,Xr){var to=_objectSpread$3(_objectSpread$3({},Mt),{},{x1:st,y1:un,x2:st+nn,y2:un,key:"line-".concat(Xr),index:Xr});return renderLineItem(on,to)});return React.createElement("g",{className:"recharts-cartesian-grid-horizontal"},sn)}function VerticalGridLines(Mt){var st=Mt.y,nn=Mt.height,rn=Mt.vertical,on=rn===void 0?!0:rn,an=Mt.verticalPoints;if(!on||!an||!an.length)return null;var sn=an.map(function(un,Xr){var to=_objectSpread$3(_objectSpread$3({},Mt),{},{x1:un,y1:st,x2:un,y2:st+nn,key:"line-".concat(Xr),index:Xr});return renderLineItem(on,to)});return React.createElement("g",{className:"recharts-cartesian-grid-vertical"},sn)}function HorizontalStripes(Mt){var st=Mt.horizontalFill,nn=Mt.fillOpacity,rn=Mt.x,on=Mt.y,an=Mt.width,sn=Mt.height,un=Mt.horizontalPoints,Xr=Mt.horizontal,to=Xr===void 0?!0:Xr;if(!to||!st||!st.length)return null;var uo=un.map(function(fn){return Math.round(fn+on-on)}).sort(function(fn,co){return fn-co});on!==uo[0]&&uo.unshift(0);var hn=uo.map(function(fn,co){var lo=!uo[co+1],fo=lo?on+sn-fn:uo[co+1]-fn;if(fo<=0)return null;var ho=co%st.length;return React.createElement("rect",{key:"react-".concat(co),y:fn,x:rn,height:fo,width:an,stroke:"none",fill:st[ho],fillOpacity:nn,className:"recharts-cartesian-grid-bg"})});return React.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},hn)}function VerticalStripes(Mt){var st=Mt.vertical,nn=st===void 0?!0:st,rn=Mt.verticalFill,on=Mt.fillOpacity,an=Mt.x,sn=Mt.y,un=Mt.width,Xr=Mt.height,to=Mt.verticalPoints;if(!nn||!rn||!rn.length)return null;var uo=to.map(function(fn){return Math.round(fn+an-an)}).sort(function(fn,co){return fn-co});an!==uo[0]&&uo.unshift(0);var hn=uo.map(function(fn,co){var lo=!uo[co+1],fo=lo?an+un-fn:uo[co+1]-fn;if(fo<=0)return null;var ho=co%rn.length;return React.createElement("rect",{key:"react-".concat(co),x:fn,y:sn,width:fo,height:Xr,stroke:"none",fill:rn[ho],fillOpacity:on,className:"recharts-cartesian-grid-bg"})});return React.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},hn)}var defaultVerticalCoordinatesGenerator=function Mt(st,nn){var rn=st.xAxis,on=st.width,an=st.height,sn=st.offset;return getCoordinatesOfGrid(getTicks(_objectSpread$3(_objectSpread$3(_objectSpread$3({},CartesianAxis.defaultProps),rn),{},{ticks:getTicksOfAxis(rn,!0),viewBox:{x:0,y:0,width:on,height:an}})),sn.left,sn.left+sn.width,nn)},defaultHorizontalCoordinatesGenerator=function Mt(st,nn){var rn=st.yAxis,on=st.width,an=st.height,sn=st.offset;return getCoordinatesOfGrid(getTicks(_objectSpread$3(_objectSpread$3(_objectSpread$3({},CartesianAxis.defaultProps),rn),{},{ticks:getTicksOfAxis(rn,!0),viewBox:{x:0,y:0,width:on,height:an}})),sn.top,sn.top+sn.height,nn)},defaultProps={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function CartesianGrid(Mt){var st,nn,rn,on,an,sn,un=useChartWidth(),Xr=useChartHeight(),to=useOffset(),uo=_objectSpread$3(_objectSpread$3({},Mt),{},{stroke:(st=Mt.stroke)!==null&&st!==void 0?st:defaultProps.stroke,fill:(nn=Mt.fill)!==null&&nn!==void 0?nn:defaultProps.fill,horizontal:(rn=Mt.horizontal)!==null&&rn!==void 0?rn:defaultProps.horizontal,horizontalFill:(on=Mt.horizontalFill)!==null&&on!==void 0?on:defaultProps.horizontalFill,vertical:(an=Mt.vertical)!==null&&an!==void 0?an:defaultProps.vertical,verticalFill:(sn=Mt.verticalFill)!==null&&sn!==void 0?sn:defaultProps.verticalFill,x:isNumber(Mt.x)?Mt.x:to.left,y:isNumber(Mt.y)?Mt.y:to.top,width:isNumber(Mt.width)?Mt.width:to.width,height:isNumber(Mt.height)?Mt.height:to.height}),hn=uo.x,fn=uo.y,co=uo.width,lo=uo.height,fo=uo.syncWithTicks,ho=uo.horizontalValues,mo=uo.verticalValues,Uo=useArbitraryXAxis(),_d=useYAxisWithFiniteDomainOrRandom();if(!isNumber(co)||co<=0||!isNumber(lo)||lo<=0||!isNumber(hn)||hn!==+hn||!isNumber(fn)||fn!==+fn)return null;var tp=uo.verticalCoordinatesGenerator||defaultVerticalCoordinatesGenerator,ep=uo.horizontalCoordinatesGenerator||defaultHorizontalCoordinatesGenerator,np=uo.horizontalPoints,rp=uo.verticalPoints;if((!np||!np.length)&&isFunction$3(ep)){var ip=ho&&ho.length,op=ep({yAxis:_d?_objectSpread$3(_objectSpread$3({},_d),{},{ticks:ip?ho:_d.ticks}):void 0,width:un,height:Xr,offset:to},ip?!0:fo);warn(Array.isArray(op),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(_typeof$6(op),"]")),Array.isArray(op)&&(np=op)}if((!rp||!rp.length)&&isFunction$3(tp)){var ap=mo&&mo.length,sp=tp({xAxis:Uo?_objectSpread$3(_objectSpread$3({},Uo),{},{ticks:ap?mo:Uo.ticks}):void 0,width:un,height:Xr,offset:to},ap?!0:fo);warn(Array.isArray(sp),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(_typeof$6(sp),"]")),Array.isArray(sp)&&(rp=sp)}return React.createElement("g",{className:"recharts-cartesian-grid"},React.createElement(Background,{fill:uo.fill,fillOpacity:uo.fillOpacity,x:uo.x,y:uo.y,width:uo.width,height:uo.height,ry:uo.ry}),React.createElement(HorizontalGridLines,_extends$4({},uo,{offset:to,horizontalPoints:np,xAxis:Uo,yAxis:_d})),React.createElement(VerticalGridLines,_extends$4({},uo,{offset:to,verticalPoints:rp,xAxis:Uo,yAxis:_d})),React.createElement(HorizontalStripes,_extends$4({},uo,{horizontalPoints:np})),React.createElement(VerticalStripes,_extends$4({},uo,{verticalPoints:rp})))}CartesianGrid.displayName="CartesianGrid";var _excluded$1=["layout","type","stroke","connectNulls","isRange","ref"],_excluded2$1=["key"],_Area;function _typeof$5(Mt){"@babel/helpers - typeof";return _typeof$5=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(st){return typeof st}:function(st){return st&&typeof Symbol=="function"&&st.constructor===Symbol&&st!==Symbol.prototype?"symbol":typeof st},_typeof$5(Mt)}function _objectWithoutProperties$1(Mt,st){if(Mt==null)return{};var nn=_objectWithoutPropertiesLoose$1(Mt,st),rn,on;if(Object.getOwnPropertySymbols){var an=Object.getOwnPropertySymbols(Mt);for(on=0;on<an.length;on++)rn=an[on],!(st.indexOf(rn)>=0)&&Object.prototype.propertyIsEnumerable.call(Mt,rn)&&(nn[rn]=Mt[rn])}return nn}function _objectWithoutPropertiesLoose$1(Mt,st){if(Mt==null)return{};var nn={};for(var rn in Mt)if(Object.prototype.hasOwnProperty.call(Mt,rn)){if(st.indexOf(rn)>=0)continue;nn[rn]=Mt[rn]}return nn}function _extends$3(){return _extends$3=Object.assign?Object.assign.bind():function(Mt){for(var st=1;st<arguments.length;st++){var nn=arguments[st];for(var rn in nn)Object.prototype.hasOwnProperty.call(nn,rn)&&(Mt[rn]=nn[rn])}return Mt},_extends$3.apply(this,arguments)}function ownKeys$2(Mt,st){var nn=Object.keys(Mt);if(Object.getOwnPropertySymbols){var rn=Object.getOwnPropertySymbols(Mt);st&&(rn=rn.filter(function(on){return Object.getOwnPropertyDescriptor(Mt,on).enumerable})),nn.push.apply(nn,rn)}return nn}function _objectSpread$2(Mt){for(var st=1;st<arguments.length;st++){var nn=arguments[st]!=null?arguments[st]:{};st%2?ownKeys$2(Object(nn),!0).forEach(function(rn){_defineProperty$5(Mt,rn,nn[rn])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Mt,Object.getOwnPropertyDescriptors(nn)):ownKeys$2(Object(nn)).forEach(function(rn){Object.defineProperty(Mt,rn,Object.getOwnPropertyDescriptor(nn,rn))})}return Mt}function _classCallCheck$4(Mt,st){if(!(Mt instanceof st))throw new TypeError("Cannot call a class as a function")}function _defineProperties$4(Mt,st){for(var nn=0;nn<st.length;nn++){var rn=st[nn];rn.enumerable=rn.enumerable||!1,rn.configurable=!0,"value"in rn&&(rn.writable=!0),Object.defineProperty(Mt,_toPropertyKey$5(rn.key),rn)}}function _createClass$4(Mt,st,nn){return st&&_defineProperties$4(Mt.prototype,st),nn&&_defineProperties$4(Mt,nn),Object.defineProperty(Mt,"prototype",{writable:!1}),Mt}function _callSuper$3(Mt,st,nn){return st=_getPrototypeOf$3(st),_possibleConstructorReturn$3(Mt,_isNativeReflectConstruct$3()?Reflect.construct(st,nn||[],_getPrototypeOf$3(Mt).constructor):st.apply(Mt,nn))}function _possibleConstructorReturn$3(Mt,st){if(st&&(_typeof$5(st)==="object"||typeof st=="function"))return st;if(st!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$3(Mt)}function _assertThisInitialized$3(Mt){if(Mt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Mt}function _isNativeReflectConstruct$3(){try{var Mt=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_isNativeReflectConstruct$3=function(){return!!Mt})()}function _getPrototypeOf$3(Mt){return _getPrototypeOf$3=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(nn){return nn.__proto__||Object.getPrototypeOf(nn)},_getPrototypeOf$3(Mt)}function _inherits$3(Mt,st){if(typeof st!="function"&&st!==null)throw new TypeError("Super expression must either be null or a function");Mt.prototype=Object.create(st&&st.prototype,{constructor:{value:Mt,writable:!0,configurable:!0}}),Object.defineProperty(Mt,"prototype",{writable:!1}),st&&_setPrototypeOf$3(Mt,st)}function _setPrototypeOf$3(Mt,st){return _setPrototypeOf$3=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(rn,on){return rn.__proto__=on,rn},_setPrototypeOf$3(Mt,st)}function _defineProperty$5(Mt,st,nn){return st=_toPropertyKey$5(st),st in Mt?Object.defineProperty(Mt,st,{value:nn,enumerable:!0,configurable:!0,writable:!0}):Mt[st]=nn,Mt}function _toPropertyKey$5(Mt){var st=_toPrimitive$5(Mt,"string");return _typeof$5(st)=="symbol"?st:st+""}function _toPrimitive$5(Mt,st){if(_typeof$5(Mt)!="object"||!Mt)return Mt;var nn=Mt[Symbol.toPrimitive];if(nn!==void 0){var rn=nn.call(Mt,st||"default");if(_typeof$5(rn)!="object")return rn;throw new TypeError("@@toPrimitive must return a primitive value.")}return(st==="string"?String:Number)(Mt)}var Area=function(Mt){function st(){var nn;_classCallCheck$4(this,st);for(var rn=arguments.length,on=new Array(rn),an=0;an<rn;an++)on[an]=arguments[an];return nn=_callSuper$3(this,st,[].concat(on)),_defineProperty$5(nn,"state",{isAnimationFinished:!0}),_defineProperty$5(nn,"id",uniqueId("recharts-area-")),_defineProperty$5(nn,"handleAnimationEnd",function(){var sn=nn.props.onAnimationEnd;nn.setState({isAnimationFinished:!0}),isFunction$3(sn)&&sn()}),_defineProperty$5(nn,"handleAnimationStart",function(){var sn=nn.props.onAnimationStart;nn.setState({isAnimationFinished:!1}),isFunction$3(sn)&&sn()}),nn}return _inherits$3(st,Mt),_createClass$4(st,[{key:"renderDots",value:function(rn,on,an){var sn=this.props.isAnimationActive,un=this.state.isAnimationFinished;if(sn&&!un)return null;var Xr=this.props,to=Xr.dot,uo=Xr.points,hn=Xr.dataKey,fn=filterProps(this.props,!1),co=filterProps(to,!0),lo=uo.map(function(ho,mo){var Uo=_objectSpread$2(_objectSpread$2(_objectSpread$2({key:"dot-".concat(mo),r:3},fn),co),{},{index:mo,cx:ho.x,cy:ho.y,dataKey:hn,value:ho.value,payload:ho.payload,points:uo});return st.renderDotItem(to,Uo)}),fo={clipPath:rn?"url(#clipPath-".concat(on?"":"dots-").concat(an,")"):null};return React.createElement(Layer,_extends$3({className:"recharts-area-dots"},fo),lo)}},{key:"renderHorizontalRect",value:function(rn){var on=this.props,an=on.baseLine,sn=on.points,un=on.strokeWidth,Xr=sn[0].x,to=sn[sn.length-1].x,uo=rn*Math.abs(Xr-to),hn=max$1(sn.map(function(fn){return fn.y||0}));return isNumber(an)&&typeof an=="number"?hn=Math.max(an,hn):an&&Array.isArray(an)&&an.length&&(hn=Math.max(max$1(an.map(function(fn){return fn.y||0})),hn)),isNumber(hn)?React.createElement("rect",{x:Xr<to?Xr:Xr-uo,y:0,width:uo,height:Math.floor(hn+(un?parseInt("".concat(un),10):1))}):null}},{key:"renderVerticalRect",value:function(rn){var on=this.props,an=on.baseLine,sn=on.points,un=on.strokeWidth,Xr=sn[0].y,to=sn[sn.length-1].y,uo=rn*Math.abs(Xr-to),hn=max$1(sn.map(function(fn){return fn.x||0}));return isNumber(an)&&typeof an=="number"?hn=Math.max(an,hn):an&&Array.isArray(an)&&an.length&&(hn=Math.max(max$1(an.map(function(fn){return fn.x||0})),hn)),isNumber(hn)?React.createElement("rect",{x:0,y:Xr<to?Xr:Xr-uo,width:hn+(un?parseInt("".concat(un),10):1),height:Math.floor(uo)}):null}},{key:"renderClipRect",value:function(rn){var on=this.props.layout;return on==="vertical"?this.renderVerticalRect(rn):this.renderHorizontalRect(rn)}},{key:"renderAreaStatically",value:function(rn,on,an,sn){var un=this.props,Xr=un.layout,to=un.type,uo=un.stroke,hn=un.connectNulls,fn=un.isRange;un.ref;var co=_objectWithoutProperties$1(un,_excluded$1);return React.createElement(Layer,{clipPath:an?"url(#clipPath-".concat(sn,")"):null},React.createElement(Curve,_extends$3({},filterProps(co,!0),{points:rn,connectNulls:hn,type:to,baseLine:on,layout:Xr,stroke:"none",className:"recharts-area-area"})),uo!=="none"&&React.createElement(Curve,_extends$3({},filterProps(this.props,!1),{className:"recharts-area-curve",layout:Xr,type:to,connectNulls:hn,fill:"none",points:rn})),uo!=="none"&&fn&&React.createElement(Curve,_extends$3({},filterProps(this.props,!1),{className:"recharts-area-curve",layout:Xr,type:to,connectNulls:hn,fill:"none",points:on})))}},{key:"renderAreaWithAnimation",value:function(rn,on){var an=this,sn=this.props,un=sn.points,Xr=sn.baseLine,to=sn.isAnimationActive,uo=sn.animationBegin,hn=sn.animationDuration,fn=sn.animationEasing,co=sn.animationId,lo=this.state,fo=lo.prevPoints,ho=lo.prevBaseLine;return React.createElement(Animate,{begin:uo,duration:hn,isActive:to,easing:fn,from:{t:0},to:{t:1},key:"area-".concat(co),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(mo){var Uo=mo.t;if(fo){var _d=fo.length/un.length,tp=un.map(function(ip,op){var ap=Math.floor(op*_d);if(fo[ap]){var sp=fo[ap],up=interpolateNumber$2(sp.x,ip.x),pp=interpolateNumber$2(sp.y,ip.y);return _objectSpread$2(_objectSpread$2({},ip),{},{x:up(Uo),y:pp(Uo)})}return ip}),ep;if(isNumber(Xr)&&typeof Xr=="number"){var np=interpolateNumber$2(ho,Xr);ep=np(Uo)}else if(isNil$1(Xr)||isNan(Xr)){var rp=interpolateNumber$2(ho,0);ep=rp(Uo)}else ep=Xr.map(function(ip,op){var ap=Math.floor(op*_d);if(ho[ap]){var sp=ho[ap],up=interpolateNumber$2(sp.x,ip.x),pp=interpolateNumber$2(sp.y,ip.y);return _objectSpread$2(_objectSpread$2({},ip),{},{x:up(Uo),y:pp(Uo)})}return ip});return an.renderAreaStatically(tp,ep,rn,on)}return React.createElement(Layer,null,React.createElement("defs",null,React.createElement("clipPath",{id:"animationClipPath-".concat(on)},an.renderClipRect(Uo))),React.createElement(Layer,{clipPath:"url(#animationClipPath-".concat(on,")")},an.renderAreaStatically(un,Xr,rn,on)))})}},{key:"renderArea",value:function(rn,on){var an=this.props,sn=an.points,un=an.baseLine,Xr=an.isAnimationActive,to=this.state,uo=to.prevPoints,hn=to.prevBaseLine,fn=to.totalLength;return Xr&&sn&&sn.length&&(!uo&&fn>0||!isEqual$1(uo,sn)||!isEqual$1(hn,un))?this.renderAreaWithAnimation(rn,on):this.renderAreaStatically(sn,un,rn,on)}},{key:"render",value:function(){var rn,on=this.props,an=on.hide,sn=on.dot,un=on.points,Xr=on.className,to=on.top,uo=on.left,hn=on.xAxis,fn=on.yAxis,co=on.width,lo=on.height,fo=on.isAnimationActive,ho=on.id;if(an||!un||!un.length)return null;var mo=this.state.isAnimationFinished,Uo=un.length===1,_d=clsx("recharts-area",Xr),tp=hn&&hn.allowDataOverflow,ep=fn&&fn.allowDataOverflow,np=tp||ep,rp=isNil$1(ho)?this.id:ho,ip=(rn=filterProps(sn,!1))!==null&&rn!==void 0?rn:{r:3,strokeWidth:2},op=ip.r,ap=op===void 0?3:op,sp=ip.strokeWidth,up=sp===void 0?2:sp,pp=hasClipDot(sn)?sn:{},lp=pp.clipDot,dp=lp===void 0?!0:lp,cp=ap*2+up;return React.createElement(Layer,{className:_d},tp||ep?React.createElement("defs",null,React.createElement("clipPath",{id:"clipPath-".concat(rp)},React.createElement("rect",{x:tp?uo:uo-co/2,y:ep?to:to-lo/2,width:tp?co:co*2,height:ep?lo:lo*2})),!dp&&React.createElement("clipPath",{id:"clipPath-dots-".concat(rp)},React.createElement("rect",{x:uo-cp/2,y:to-cp/2,width:co+cp,height:lo+cp}))):null,Uo?null:this.renderArea(np,rp),(sn||Uo)&&this.renderDots(np,dp,rp),(!fo||mo)&&LabelList.renderCallByParent(this.props,un))}}],[{key:"getDerivedStateFromProps",value:function(rn,on){return rn.animationId!==on.prevAnimationId?{prevAnimationId:rn.animationId,curPoints:rn.points,curBaseLine:rn.baseLine,prevPoints:on.curPoints,prevBaseLine:on.curBaseLine}:rn.points!==on.curPoints||rn.baseLine!==on.curBaseLine?{curPoints:rn.points,curBaseLine:rn.baseLine}:null}}])}(reactExports.PureComponent);_Area=Area;_defineProperty$5(Area,"displayName","Area");_defineProperty$5(Area,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!Global.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});_defineProperty$5(Area,"getBaseValue",function(Mt,st,nn,rn){var on=Mt.layout,an=Mt.baseValue,sn=st.props.baseValue,un=sn??an;if(isNumber(un)&&typeof un=="number")return un;var Xr=on==="horizontal"?rn:nn,to=Xr.scale.domain();if(Xr.type==="number"){var uo=Math.max(to[0],to[1]),hn=Math.min(to[0],to[1]);return un==="dataMin"?hn:un==="dataMax"||uo<0?uo:Math.max(Math.min(to[0],to[1]),0)}return un==="dataMin"?to[0]:un==="dataMax"?to[1]:to[0]});_defineProperty$5(Area,"getComposedData",function(Mt){var st=Mt.props,nn=Mt.item,rn=Mt.xAxis,on=Mt.yAxis,an=Mt.xAxisTicks,sn=Mt.yAxisTicks,un=Mt.bandSize,Xr=Mt.dataKey,to=Mt.stackedData,uo=Mt.dataStartIndex,hn=Mt.displayedData,fn=Mt.offset,co=st.layout,lo=to&&to.length,fo=_Area.getBaseValue(st,nn,rn,on),ho=co==="horizontal",mo=!1,Uo=hn.map(function(tp,ep){var np;lo?np=to[uo+ep]:(np=getValueByDataKey(tp,Xr),Array.isArray(np)?mo=!0:np=[fo,np]);var rp=np[1]==null||lo&&getValueByDataKey(tp,Xr)==null;return ho?{x:getCateCoordinateOfLine({axis:rn,ticks:an,bandSize:un,entry:tp,index:ep}),y:rp?null:on.scale(np[1]),value:np,payload:tp}:{x:rp?null:rn.scale(np[1]),y:getCateCoordinateOfLine({axis:on,ticks:sn,bandSize:un,entry:tp,index:ep}),value:np,payload:tp}}),_d;return lo||mo?_d=Uo.map(function(tp){var ep=Array.isArray(tp.value)?tp.value[0]:null;return ho?{x:tp.x,y:ep!=null&&tp.y!=null?on.scale(ep):null}:{x:ep!=null?rn.scale(ep):null,y:tp.y}}):_d=ho?on.scale(fo):rn.scale(fo),_objectSpread$2({points:Uo,baseLine:_d,layout:co,isRange:mo},fn)});_defineProperty$5(Area,"renderDotItem",function(Mt,st){var nn;if(React.isValidElement(Mt))nn=React.cloneElement(Mt,st);else if(isFunction$3(Mt))nn=Mt(st);else{var rn=clsx("recharts-area-dot",typeof Mt!="boolean"?Mt.className:""),on=st.key,an=_objectWithoutProperties$1(st,_excluded2$1);nn=React.createElement(Dot,_extends$3({},an,{key:on,className:rn}))}return nn});function _typeof$4(Mt){"@babel/helpers - typeof";return _typeof$4=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(st){return typeof st}:function(st){return st&&typeof Symbol=="function"&&st.constructor===Symbol&&st!==Symbol.prototype?"symbol":typeof st},_typeof$4(Mt)}function _classCallCheck$3(Mt,st){if(!(Mt instanceof st))throw new TypeError("Cannot call a class as a function")}function _defineProperties$3(Mt,st){for(var nn=0;nn<st.length;nn++){var rn=st[nn];rn.enumerable=rn.enumerable||!1,rn.configurable=!0,"value"in rn&&(rn.writable=!0),Object.defineProperty(Mt,_toPropertyKey$4(rn.key),rn)}}function _createClass$3(Mt,st,nn){return st&&_defineProperties$3(Mt.prototype,st),Object.defineProperty(Mt,"prototype",{writable:!1}),Mt}function _callSuper$2(Mt,st,nn){return st=_getPrototypeOf$2(st),_possibleConstructorReturn$2(Mt,_isNativeReflectConstruct$2()?Reflect.construct(st,nn||[],_getPrototypeOf$2(Mt).constructor):st.apply(Mt,nn))}function _possibleConstructorReturn$2(Mt,st){if(st&&(_typeof$4(st)==="object"||typeof st=="function"))return st;if(st!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$2(Mt)}function _assertThisInitialized$2(Mt){if(Mt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Mt}function _isNativeReflectConstruct$2(){try{var Mt=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_isNativeReflectConstruct$2=function(){return!!Mt})()}function _getPrototypeOf$2(Mt){return _getPrototypeOf$2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(nn){return nn.__proto__||Object.getPrototypeOf(nn)},_getPrototypeOf$2(Mt)}function _inherits$2(Mt,st){if(typeof st!="function"&&st!==null)throw new TypeError("Super expression must either be null or a function");Mt.prototype=Object.create(st&&st.prototype,{constructor:{value:Mt,writable:!0,configurable:!0}}),Object.defineProperty(Mt,"prototype",{writable:!1}),st&&_setPrototypeOf$2(Mt,st)}function _setPrototypeOf$2(Mt,st){return _setPrototypeOf$2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(rn,on){return rn.__proto__=on,rn},_setPrototypeOf$2(Mt,st)}function _defineProperty$4(Mt,st,nn){return st=_toPropertyKey$4(st),st in Mt?Object.defineProperty(Mt,st,{value:nn,enumerable:!0,configurable:!0,writable:!0}):Mt[st]=nn,Mt}function _toPropertyKey$4(Mt){var st=_toPrimitive$4(Mt,"string");return _typeof$4(st)=="symbol"?st:st+""}function _toPrimitive$4(Mt,st){if(_typeof$4(Mt)!="object"||!Mt)return Mt;var nn=Mt[Symbol.toPrimitive];if(nn!==void 0){var rn=nn.call(Mt,st||"default");if(_typeof$4(rn)!="object")return rn;throw new TypeError("@@toPrimitive must return a primitive value.")}return(st==="string"?String:Number)(Mt)}function _extends$2(){return _extends$2=Object.assign?Object.assign.bind():function(Mt){for(var st=1;st<arguments.length;st++){var nn=arguments[st];for(var rn in nn)Object.prototype.hasOwnProperty.call(nn,rn)&&(Mt[rn]=nn[rn])}return Mt},_extends$2.apply(this,arguments)}function XAxisImpl(Mt){var st=Mt.xAxisId,nn=useChartWidth(),rn=useChartHeight(),on=useXAxisOrThrow(st);return on==null?null:React.createElement(CartesianAxis,_extends$2({},on,{className:clsx("recharts-".concat(on.axisType," ").concat(on.axisType),on.className),viewBox:{x:0,y:0,width:nn,height:rn},ticksGenerator:function(sn){return getTicksOfAxis(sn,!0)}}))}var XAxis=function(Mt){function st(){return _classCallCheck$3(this,st),_callSuper$2(this,st,arguments)}return _inherits$2(st,Mt),_createClass$3(st,[{key:"render",value:function(){return React.createElement(XAxisImpl,this.props)}}])}(React.Component);_defineProperty$4(XAxis,"displayName","XAxis");_defineProperty$4(XAxis,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function _typeof$3(Mt){"@babel/helpers - typeof";return _typeof$3=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(st){return typeof st}:function(st){return st&&typeof Symbol=="function"&&st.constructor===Symbol&&st!==Symbol.prototype?"symbol":typeof st},_typeof$3(Mt)}function _classCallCheck$2(Mt,st){if(!(Mt instanceof st))throw new TypeError("Cannot call a class as a function")}function _defineProperties$2(Mt,st){for(var nn=0;nn<st.length;nn++){var rn=st[nn];rn.enumerable=rn.enumerable||!1,rn.configurable=!0,"value"in rn&&(rn.writable=!0),Object.defineProperty(Mt,_toPropertyKey$3(rn.key),rn)}}function _createClass$2(Mt,st,nn){return st&&_defineProperties$2(Mt.prototype,st),Object.defineProperty(Mt,"prototype",{writable:!1}),Mt}function _callSuper$1(Mt,st,nn){return st=_getPrototypeOf$1(st),_possibleConstructorReturn$1(Mt,_isNativeReflectConstruct$1()?Reflect.construct(st,nn||[],_getPrototypeOf$1(Mt).constructor):st.apply(Mt,nn))}function _possibleConstructorReturn$1(Mt,st){if(st&&(_typeof$3(st)==="object"||typeof st=="function"))return st;if(st!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$1(Mt)}function _assertThisInitialized$1(Mt){if(Mt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Mt}function _isNativeReflectConstruct$1(){try{var Mt=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_isNativeReflectConstruct$1=function(){return!!Mt})()}function _getPrototypeOf$1(Mt){return _getPrototypeOf$1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(nn){return nn.__proto__||Object.getPrototypeOf(nn)},_getPrototypeOf$1(Mt)}function _inherits$1(Mt,st){if(typeof st!="function"&&st!==null)throw new TypeError("Super expression must either be null or a function");Mt.prototype=Object.create(st&&st.prototype,{constructor:{value:Mt,writable:!0,configurable:!0}}),Object.defineProperty(Mt,"prototype",{writable:!1}),st&&_setPrototypeOf$1(Mt,st)}function _setPrototypeOf$1(Mt,st){return _setPrototypeOf$1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(rn,on){return rn.__proto__=on,rn},_setPrototypeOf$1(Mt,st)}function _defineProperty$3(Mt,st,nn){return st=_toPropertyKey$3(st),st in Mt?Object.defineProperty(Mt,st,{value:nn,enumerable:!0,configurable:!0,writable:!0}):Mt[st]=nn,Mt}function _toPropertyKey$3(Mt){var st=_toPrimitive$3(Mt,"string");return _typeof$3(st)=="symbol"?st:st+""}function _toPrimitive$3(Mt,st){if(_typeof$3(Mt)!="object"||!Mt)return Mt;var nn=Mt[Symbol.toPrimitive];if(nn!==void 0){var rn=nn.call(Mt,st||"default");if(_typeof$3(rn)!="object")return rn;throw new TypeError("@@toPrimitive must return a primitive value.")}return(st==="string"?String:Number)(Mt)}function _extends$1(){return _extends$1=Object.assign?Object.assign.bind():function(Mt){for(var st=1;st<arguments.length;st++){var nn=arguments[st];for(var rn in nn)Object.prototype.hasOwnProperty.call(nn,rn)&&(Mt[rn]=nn[rn])}return Mt},_extends$1.apply(this,arguments)}var YAxisImpl=function Mt(st){var nn=st.yAxisId,rn=useChartWidth(),on=useChartHeight(),an=useYAxisOrThrow(nn);return an==null?null:React.createElement(CartesianAxis,_extends$1({},an,{className:clsx("recharts-".concat(an.axisType," ").concat(an.axisType),an.className),viewBox:{x:0,y:0,width:rn,height:on},ticksGenerator:function(un){return getTicksOfAxis(un,!0)}}))},YAxis=function(Mt){function st(){return _classCallCheck$2(this,st),_callSuper$1(this,st,arguments)}return _inherits$1(st,Mt),_createClass$2(st,[{key:"render",value:function(){return React.createElement(YAxisImpl,this.props)}}])}(React.Component);_defineProperty$3(YAxis,"displayName","YAxis");_defineProperty$3(YAxis,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function _toConsumableArray$1(Mt){return _arrayWithoutHoles$1(Mt)||_iterableToArray$1(Mt)||_unsupportedIterableToArray$1(Mt)||_nonIterableSpread$1()}function _nonIterableSpread$1(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$1(Mt,st){if(Mt){if(typeof Mt=="string")return _arrayLikeToArray$1(Mt,st);var nn=Object.prototype.toString.call(Mt).slice(8,-1);if(nn==="Object"&&Mt.constructor&&(nn=Mt.constructor.name),nn==="Map"||nn==="Set")return Array.from(Mt);if(nn==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(nn))return _arrayLikeToArray$1(Mt,st)}}function _iterableToArray$1(Mt){if(typeof Symbol<"u"&&Mt[Symbol.iterator]!=null||Mt["@@iterator"]!=null)return Array.from(Mt)}function _arrayWithoutHoles$1(Mt){if(Array.isArray(Mt))return _arrayLikeToArray$1(Mt)}function _arrayLikeToArray$1(Mt,st){(st==null||st>Mt.length)&&(st=Mt.length);for(var nn=0,rn=new Array(st);nn<st;nn++)rn[nn]=Mt[nn];return rn}var detectReferenceElementsDomain=function Mt(st,nn,rn,on,an){var sn=findAllByType(st,ReferenceLine),un=findAllByType(st,ReferenceDot),Xr=[].concat(_toConsumableArray$1(sn),_toConsumableArray$1(un)),to=findAllByType(st,ReferenceArea),uo="".concat(on,"Id"),hn=on[0],fn=nn;if(Xr.length&&(fn=Xr.reduce(function(fo,ho){if(ho.props[uo]===rn&&ifOverflowMatches(ho.props,"extendDomain")&&isNumber(ho.props[hn])){var mo=ho.props[hn];return[Math.min(fo[0],mo),Math.max(fo[1],mo)]}return fo},fn)),to.length){var co="".concat(hn,"1"),lo="".concat(hn,"2");fn=to.reduce(function(fo,ho){if(ho.props[uo]===rn&&ifOverflowMatches(ho.props,"extendDomain")&&isNumber(ho.props[co])&&isNumber(ho.props[lo])){var mo=ho.props[co],Uo=ho.props[lo];return[Math.min(fo[0],mo,Uo),Math.max(fo[1],mo,Uo)]}return fo},fn)}return an&&an.length&&(fn=an.reduce(function(fo,ho){return isNumber(ho)?[Math.min(fo[0],ho),Math.max(fo[1],ho)]:fo},fn)),fn},eventemitter3={exports:{}};(function(Mt){var st=Object.prototype.hasOwnProperty,nn="~";function rn(){}Object.create&&(rn.prototype=Object.create(null),new rn().__proto__||(nn=!1));function on(Xr,to,uo){this.fn=Xr,this.context=to,this.once=uo||!1}function an(Xr,to,uo,hn,fn){if(typeof uo!="function")throw new TypeError("The listener must be a function");var co=new on(uo,hn||Xr,fn),lo=nn?nn+to:to;return Xr._events[lo]?Xr._events[lo].fn?Xr._events[lo]=[Xr._events[lo],co]:Xr._events[lo].push(co):(Xr._events[lo]=co,Xr._eventsCount++),Xr}function sn(Xr,to){--Xr._eventsCount===0?Xr._events=new rn:delete Xr._events[to]}function un(){this._events=new rn,this._eventsCount=0}un.prototype.eventNames=function(){var to=[],uo,hn;if(this._eventsCount===0)return to;for(hn in uo=this._events)st.call(uo,hn)&&to.push(nn?hn.slice(1):hn);return Object.getOwnPropertySymbols?to.concat(Object.getOwnPropertySymbols(uo)):to},un.prototype.listeners=function(to){var uo=nn?nn+to:to,hn=this._events[uo];if(!hn)return[];if(hn.fn)return[hn.fn];for(var fn=0,co=hn.length,lo=new Array(co);fn<co;fn++)lo[fn]=hn[fn].fn;return lo},un.prototype.listenerCount=function(to){var uo=nn?nn+to:to,hn=this._events[uo];return hn?hn.fn?1:hn.length:0},un.prototype.emit=function(to,uo,hn,fn,co,lo){var fo=nn?nn+to:to;if(!this._events[fo])return!1;var ho=this._events[fo],mo=arguments.length,Uo,_d;if(ho.fn){switch(ho.once&&this.removeListener(to,ho.fn,void 0,!0),mo){case 1:return ho.fn.call(ho.context),!0;case 2:return ho.fn.call(ho.context,uo),!0;case 3:return ho.fn.call(ho.context,uo,hn),!0;case 4:return ho.fn.call(ho.context,uo,hn,fn),!0;case 5:return ho.fn.call(ho.context,uo,hn,fn,co),!0;case 6:return ho.fn.call(ho.context,uo,hn,fn,co,lo),!0}for(_d=1,Uo=new Array(mo-1);_d<mo;_d++)Uo[_d-1]=arguments[_d];ho.fn.apply(ho.context,Uo)}else{var tp=ho.length,ep;for(_d=0;_d<tp;_d++)switch(ho[_d].once&&this.removeListener(to,ho[_d].fn,void 0,!0),mo){case 1:ho[_d].fn.call(ho[_d].context);break;case 2:ho[_d].fn.call(ho[_d].context,uo);break;case 3:ho[_d].fn.call(ho[_d].context,uo,hn);break;case 4:ho[_d].fn.call(ho[_d].context,uo,hn,fn);break;default:if(!Uo)for(ep=1,Uo=new Array(mo-1);ep<mo;ep++)Uo[ep-1]=arguments[ep];ho[_d].fn.apply(ho[_d].context,Uo)}}return!0},un.prototype.on=function(to,uo,hn){return an(this,to,uo,hn,!1)},un.prototype.once=function(to,uo,hn){return an(this,to,uo,hn,!0)},un.prototype.removeListener=function(to,uo,hn,fn){var co=nn?nn+to:to;if(!this._events[co])return this;if(!uo)return sn(this,co),this;var lo=this._events[co];if(lo.fn)lo.fn===uo&&(!fn||lo.once)&&(!hn||lo.context===hn)&&sn(this,co);else{for(var fo=0,ho=[],mo=lo.length;fo<mo;fo++)(lo[fo].fn!==uo||fn&&!lo[fo].once||hn&&lo[fo].context!==hn)&&ho.push(lo[fo]);ho.length?this._events[co]=ho.length===1?ho[0]:ho:sn(this,co)}return this},un.prototype.removeAllListeners=function(to){var uo;return to?(uo=nn?nn+to:to,this._events[uo]&&sn(this,uo)):(this._events=new rn,this._eventsCount=0),this},un.prototype.off=un.prototype.removeListener,un.prototype.addListener=un.prototype.on,un.prefixed=nn,un.EventEmitter=un,Mt.exports=un})(eventemitter3);var eventemitter3Exports=eventemitter3.exports;const EventEmitter=getDefaultExportFromCjs(eventemitter3Exports);var eventCenter=new EventEmitter,SYNC_EVENT="recharts.syncMouseEvents";function _typeof$2(Mt){"@babel/helpers - typeof";return _typeof$2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(st){return typeof st}:function(st){return st&&typeof Symbol=="function"&&st.constructor===Symbol&&st!==Symbol.prototype?"symbol":typeof st},_typeof$2(Mt)}function _classCallCheck$1(Mt,st){if(!(Mt instanceof st))throw new TypeError("Cannot call a class as a function")}function _defineProperties$1(Mt,st){for(var nn=0;nn<st.length;nn++){var rn=st[nn];rn.enumerable=rn.enumerable||!1,rn.configurable=!0,"value"in rn&&(rn.writable=!0),Object.defineProperty(Mt,_toPropertyKey$2(rn.key),rn)}}function _createClass$1(Mt,st,nn){return st&&_defineProperties$1(Mt.prototype,st),Object.defineProperty(Mt,"prototype",{writable:!1}),Mt}function _defineProperty$2(Mt,st,nn){return st=_toPropertyKey$2(st),st in Mt?Object.defineProperty(Mt,st,{value:nn,enumerable:!0,configurable:!0,writable:!0}):Mt[st]=nn,Mt}function _toPropertyKey$2(Mt){var st=_toPrimitive$2(Mt,"string");return _typeof$2(st)=="symbol"?st:st+""}function _toPrimitive$2(Mt,st){if(_typeof$2(Mt)!="object"||!Mt)return Mt;var nn=Mt[Symbol.toPrimitive];if(nn!==void 0){var rn=nn.call(Mt,st);if(_typeof$2(rn)!="object")return rn;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(Mt)}var AccessibilityManager=function(){function Mt(){_classCallCheck$1(this,Mt),_defineProperty$2(this,"activeIndex",0),_defineProperty$2(this,"coordinateList",[]),_defineProperty$2(this,"layout","horizontal")}return _createClass$1(Mt,[{key:"setDetails",value:function(nn){var rn,on=nn.coordinateList,an=on===void 0?null:on,sn=nn.container,un=sn===void 0?null:sn,Xr=nn.layout,to=Xr===void 0?null:Xr,uo=nn.offset,hn=uo===void 0?null:uo,fn=nn.mouseHandlerCallback,co=fn===void 0?null:fn;this.coordinateList=(rn=an??this.coordinateList)!==null&&rn!==void 0?rn:[],this.container=un??this.container,this.layout=to??this.layout,this.offset=hn??this.offset,this.mouseHandlerCallback=co??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(nn){if(this.coordinateList.length!==0)switch(nn.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(nn){this.activeIndex=nn}},{key:"spoofMouse",value:function(){var nn,rn;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var on=this.container.getBoundingClientRect(),an=on.x,sn=on.y,un=on.height,Xr=this.coordinateList[this.activeIndex].coordinate,to=((nn=window)===null||nn===void 0?void 0:nn.scrollX)||0,uo=((rn=window)===null||rn===void 0?void 0:rn.scrollY)||0,hn=an+Xr+to,fn=sn+this.offset.top+un/2+uo;this.mouseHandlerCallback({pageX:hn,pageY:fn})}}}])}();function isDomainSpecifiedByUser(Mt,st,nn){if(nn==="number"&&st===!0&&Array.isArray(Mt)){var rn=Mt==null?void 0:Mt[0],on=Mt==null?void 0:Mt[1];if(rn&&on&&isNumber(rn)&&isNumber(on))return!0}return!1}function getCursorRectangle(Mt,st,nn,rn){var on=rn/2;return{stroke:"none",fill:"#ccc",x:Mt==="horizontal"?st.x-on:nn.left+.5,y:Mt==="horizontal"?nn.top+.5:st.y-on,width:Mt==="horizontal"?rn:nn.width-1,height:Mt==="horizontal"?nn.height-1:rn}}function getRadialCursorPoints(Mt){var st=Mt.cx,nn=Mt.cy,rn=Mt.radius,on=Mt.startAngle,an=Mt.endAngle,sn=polarToCartesian(st,nn,rn,on),un=polarToCartesian(st,nn,rn,an);return{points:[sn,un],cx:st,cy:nn,radius:rn,startAngle:on,endAngle:an}}function getCursorPoints(Mt,st,nn){var rn,on,an,sn;if(Mt==="horizontal")rn=st.x,an=rn,on=nn.top,sn=nn.top+nn.height;else if(Mt==="vertical")on=st.y,sn=on,rn=nn.left,an=nn.left+nn.width;else if(st.cx!=null&&st.cy!=null)if(Mt==="centric"){var un=st.cx,Xr=st.cy,to=st.innerRadius,uo=st.outerRadius,hn=st.angle,fn=polarToCartesian(un,Xr,to,hn),co=polarToCartesian(un,Xr,uo,hn);rn=fn.x,on=fn.y,an=co.x,sn=co.y}else return getRadialCursorPoints(st);return[{x:rn,y:on},{x:an,y:sn}]}function _typeof$1(Mt){"@babel/helpers - typeof";return _typeof$1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(st){return typeof st}:function(st){return st&&typeof Symbol=="function"&&st.constructor===Symbol&&st!==Symbol.prototype?"symbol":typeof st},_typeof$1(Mt)}function ownKeys$1(Mt,st){var nn=Object.keys(Mt);if(Object.getOwnPropertySymbols){var rn=Object.getOwnPropertySymbols(Mt);st&&(rn=rn.filter(function(on){return Object.getOwnPropertyDescriptor(Mt,on).enumerable})),nn.push.apply(nn,rn)}return nn}function _objectSpread$1(Mt){for(var st=1;st<arguments.length;st++){var nn=arguments[st]!=null?arguments[st]:{};st%2?ownKeys$1(Object(nn),!0).forEach(function(rn){_defineProperty$1(Mt,rn,nn[rn])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Mt,Object.getOwnPropertyDescriptors(nn)):ownKeys$1(Object(nn)).forEach(function(rn){Object.defineProperty(Mt,rn,Object.getOwnPropertyDescriptor(nn,rn))})}return Mt}function _defineProperty$1(Mt,st,nn){return st=_toPropertyKey$1(st),st in Mt?Object.defineProperty(Mt,st,{value:nn,enumerable:!0,configurable:!0,writable:!0}):Mt[st]=nn,Mt}function _toPropertyKey$1(Mt){var st=_toPrimitive$1(Mt,"string");return _typeof$1(st)=="symbol"?st:st+""}function _toPrimitive$1(Mt,st){if(_typeof$1(Mt)!="object"||!Mt)return Mt;var nn=Mt[Symbol.toPrimitive];if(nn!==void 0){var rn=nn.call(Mt,st||"default");if(_typeof$1(rn)!="object")return rn;throw new TypeError("@@toPrimitive must return a primitive value.")}return(st==="string"?String:Number)(Mt)}function Cursor(Mt){var st,nn,rn=Mt.element,on=Mt.tooltipEventType,an=Mt.isActive,sn=Mt.activeCoordinate,un=Mt.activePayload,Xr=Mt.offset,to=Mt.activeTooltipIndex,uo=Mt.tooltipAxisBandSize,hn=Mt.layout,fn=Mt.chartName,co=(st=rn.props.cursor)!==null&&st!==void 0?st:(nn=rn.type.defaultProps)===null||nn===void 0?void 0:nn.cursor;if(!rn||!co||!an||!sn||fn!=="ScatterChart"&&on!=="axis")return null;var lo,fo=Curve;if(fn==="ScatterChart")lo=sn,fo=Cross;else if(fn==="BarChart")lo=getCursorRectangle(hn,sn,Xr,uo),fo=Rectangle;else if(hn==="radial"){var ho=getRadialCursorPoints(sn),mo=ho.cx,Uo=ho.cy,_d=ho.radius,tp=ho.startAngle,ep=ho.endAngle;lo={cx:mo,cy:Uo,startAngle:tp,endAngle:ep,innerRadius:_d,outerRadius:_d},fo=Sector}else lo={points:getCursorPoints(hn,sn,Xr)},fo=Curve;var np=_objectSpread$1(_objectSpread$1(_objectSpread$1(_objectSpread$1({stroke:"#ccc",pointerEvents:"none"},Xr),lo),filterProps(co,!1)),{},{payload:un,payloadIndex:to,className:clsx("recharts-tooltip-cursor",co.className)});return reactExports.isValidElement(co)?reactExports.cloneElement(co,np):reactExports.createElement(fo,np)}var _excluded=["item"],_excluded2=["children","className","width","height","style","compact","title","desc"];function _typeof(Mt){"@babel/helpers - typeof";return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(st){return typeof st}:function(st){return st&&typeof Symbol=="function"&&st.constructor===Symbol&&st!==Symbol.prototype?"symbol":typeof st},_typeof(Mt)}function _extends(){return _extends=Object.assign?Object.assign.bind():function(Mt){for(var st=1;st<arguments.length;st++){var nn=arguments[st];for(var rn in nn)Object.prototype.hasOwnProperty.call(nn,rn)&&(Mt[rn]=nn[rn])}return Mt},_extends.apply(this,arguments)}function _slicedToArray(Mt,st){return _arrayWithHoles(Mt)||_iterableToArrayLimit(Mt,st)||_unsupportedIterableToArray(Mt,st)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _iterableToArrayLimit(Mt,st){var nn=Mt==null?null:typeof Symbol<"u"&&Mt[Symbol.iterator]||Mt["@@iterator"];if(nn!=null){var rn,on,an,sn,un=[],Xr=!0,to=!1;try{if(an=(nn=nn.call(Mt)).next,st!==0)for(;!(Xr=(rn=an.call(nn)).done)&&(un.push(rn.value),un.length!==st);Xr=!0);}catch(uo){to=!0,on=uo}finally{try{if(!Xr&&nn.return!=null&&(sn=nn.return(),Object(sn)!==sn))return}finally{if(to)throw on}}return un}}function _arrayWithHoles(Mt){if(Array.isArray(Mt))return Mt}function _objectWithoutProperties(Mt,st){if(Mt==null)return{};var nn=_objectWithoutPropertiesLoose(Mt,st),rn,on;if(Object.getOwnPropertySymbols){var an=Object.getOwnPropertySymbols(Mt);for(on=0;on<an.length;on++)rn=an[on],!(st.indexOf(rn)>=0)&&Object.prototype.propertyIsEnumerable.call(Mt,rn)&&(nn[rn]=Mt[rn])}return nn}function _objectWithoutPropertiesLoose(Mt,st){if(Mt==null)return{};var nn={};for(var rn in Mt)if(Object.prototype.hasOwnProperty.call(Mt,rn)){if(st.indexOf(rn)>=0)continue;nn[rn]=Mt[rn]}return nn}function _classCallCheck(Mt,st){if(!(Mt instanceof st))throw new TypeError("Cannot call a class as a function")}function _defineProperties(Mt,st){for(var nn=0;nn<st.length;nn++){var rn=st[nn];rn.enumerable=rn.enumerable||!1,rn.configurable=!0,"value"in rn&&(rn.writable=!0),Object.defineProperty(Mt,_toPropertyKey(rn.key),rn)}}function _createClass(Mt,st,nn){return st&&_defineProperties(Mt.prototype,st),Object.defineProperty(Mt,"prototype",{writable:!1}),Mt}function _callSuper(Mt,st,nn){return st=_getPrototypeOf(st),_possibleConstructorReturn(Mt,_isNativeReflectConstruct()?Reflect.construct(st,nn||[],_getPrototypeOf(Mt).constructor):st.apply(Mt,nn))}function _possibleConstructorReturn(Mt,st){if(st&&(_typeof(st)==="object"||typeof st=="function"))return st;if(st!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(Mt)}function _assertThisInitialized(Mt){if(Mt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Mt}function _isNativeReflectConstruct(){try{var Mt=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_isNativeReflectConstruct=function(){return!!Mt})()}function _getPrototypeOf(Mt){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(nn){return nn.__proto__||Object.getPrototypeOf(nn)},_getPrototypeOf(Mt)}function _inherits(Mt,st){if(typeof st!="function"&&st!==null)throw new TypeError("Super expression must either be null or a function");Mt.prototype=Object.create(st&&st.prototype,{constructor:{value:Mt,writable:!0,configurable:!0}}),Object.defineProperty(Mt,"prototype",{writable:!1}),st&&_setPrototypeOf(Mt,st)}function _setPrototypeOf(Mt,st){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(rn,on){return rn.__proto__=on,rn},_setPrototypeOf(Mt,st)}function _toConsumableArray(Mt){return _arrayWithoutHoles(Mt)||_iterableToArray(Mt)||_unsupportedIterableToArray(Mt)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray(Mt,st){if(Mt){if(typeof Mt=="string")return _arrayLikeToArray(Mt,st);var nn=Object.prototype.toString.call(Mt).slice(8,-1);if(nn==="Object"&&Mt.constructor&&(nn=Mt.constructor.name),nn==="Map"||nn==="Set")return Array.from(Mt);if(nn==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(nn))return _arrayLikeToArray(Mt,st)}}function _iterableToArray(Mt){if(typeof Symbol<"u"&&Mt[Symbol.iterator]!=null||Mt["@@iterator"]!=null)return Array.from(Mt)}function _arrayWithoutHoles(Mt){if(Array.isArray(Mt))return _arrayLikeToArray(Mt)}function _arrayLikeToArray(Mt,st){(st==null||st>Mt.length)&&(st=Mt.length);for(var nn=0,rn=new Array(st);nn<st;nn++)rn[nn]=Mt[nn];return rn}function ownKeys(Mt,st){var nn=Object.keys(Mt);if(Object.getOwnPropertySymbols){var rn=Object.getOwnPropertySymbols(Mt);st&&(rn=rn.filter(function(on){return Object.getOwnPropertyDescriptor(Mt,on).enumerable})),nn.push.apply(nn,rn)}return nn}function _objectSpread(Mt){for(var st=1;st<arguments.length;st++){var nn=arguments[st]!=null?arguments[st]:{};st%2?ownKeys(Object(nn),!0).forEach(function(rn){_defineProperty(Mt,rn,nn[rn])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Mt,Object.getOwnPropertyDescriptors(nn)):ownKeys(Object(nn)).forEach(function(rn){Object.defineProperty(Mt,rn,Object.getOwnPropertyDescriptor(nn,rn))})}return Mt}function _defineProperty(Mt,st,nn){return st=_toPropertyKey(st),st in Mt?Object.defineProperty(Mt,st,{value:nn,enumerable:!0,configurable:!0,writable:!0}):Mt[st]=nn,Mt}function _toPropertyKey(Mt){var st=_toPrimitive(Mt,"string");return _typeof(st)=="symbol"?st:st+""}function _toPrimitive(Mt,st){if(_typeof(Mt)!="object"||!Mt)return Mt;var nn=Mt[Symbol.toPrimitive];if(nn!==void 0){var rn=nn.call(Mt,st||"default");if(_typeof(rn)!="object")return rn;throw new TypeError("@@toPrimitive must return a primitive value.")}return(st==="string"?String:Number)(Mt)}var ORIENT_MAP={xAxis:["bottom","top"],yAxis:["left","right"]},FULL_WIDTH_AND_HEIGHT={width:"100%",height:"100%"},originCoordinate={x:0,y:0};function renderAsIs(Mt){return Mt}var calculateTooltipPos=function Mt(st,nn){return nn==="horizontal"?st.x:nn==="vertical"?st.y:nn==="centric"?st.angle:st.radius},getActiveCoordinate=function Mt(st,nn,rn,on){var an=nn.find(function(uo){return uo&&uo.index===rn});if(an){if(st==="horizontal")return{x:an.coordinate,y:on.y};if(st==="vertical")return{x:on.x,y:an.coordinate};if(st==="centric"){var sn=an.coordinate,un=on.radius;return _objectSpread(_objectSpread(_objectSpread({},on),polarToCartesian(on.cx,on.cy,un,sn)),{},{angle:sn,radius:un})}var Xr=an.coordinate,to=on.angle;return _objectSpread(_objectSpread(_objectSpread({},on),polarToCartesian(on.cx,on.cy,Xr,to)),{},{angle:to,radius:Xr})}return originCoordinate},getDisplayedData=function Mt(st,nn){var rn=nn.graphicalItems,on=nn.dataStartIndex,an=nn.dataEndIndex,sn=(rn??[]).reduce(function(un,Xr){var to=Xr.props.data;return to&&to.length?[].concat(_toConsumableArray(un),_toConsumableArray(to)):un},[]);return sn.length>0?sn:st&&st.length&&isNumber(on)&&isNumber(an)?st.slice(on,an+1):[]};function getDefaultDomainByAxisType(Mt){return Mt==="number"?[0,"auto"]:void 0}var getTooltipContent=function Mt(st,nn,rn,on){var an=st.graphicalItems,sn=st.tooltipAxis,un=getDisplayedData(nn,st);return rn<0||!an||!an.length||rn>=un.length?null:an.reduce(function(Xr,to){var uo,hn=(uo=to.props.data)!==null&&uo!==void 0?uo:nn;hn&&st.dataStartIndex+st.dataEndIndex!==0&&st.dataEndIndex-st.dataStartIndex>=rn&&(hn=hn.slice(st.dataStartIndex,st.dataEndIndex+1));var fn;if(sn.dataKey&&!sn.allowDuplicatedCategory){var co=hn===void 0?un:hn;fn=findEntryInArray(co,sn.dataKey,on)}else fn=hn&&hn[rn]||un[rn];return fn?[].concat(_toConsumableArray(Xr),[getTooltipItem(to,fn)]):Xr},[])},getTooltipData=function Mt(st,nn,rn,on){var an=on||{x:st.chartX,y:st.chartY},sn=calculateTooltipPos(an,rn),un=st.orderedTooltipTicks,Xr=st.tooltipAxis,to=st.tooltipTicks,uo=calculateActiveTickIndex(sn,un,to,Xr);if(uo>=0&&to){var hn=to[uo]&&to[uo].value,fn=getTooltipContent(st,nn,uo,hn),co=getActiveCoordinate(rn,un,uo,an);return{activeTooltipIndex:uo,activeLabel:hn,activePayload:fn,activeCoordinate:co}}return null},getAxisMapByAxes=function Mt(st,nn){var rn=nn.axes,on=nn.graphicalItems,an=nn.axisType,sn=nn.axisIdKey,un=nn.stackGroups,Xr=nn.dataStartIndex,to=nn.dataEndIndex,uo=st.layout,hn=st.children,fn=st.stackOffset,co=isCategoricalAxis(uo,an);return rn.reduce(function(lo,fo){var ho,mo=fo.type.defaultProps!==void 0?_objectSpread(_objectSpread({},fo.type.defaultProps),fo.props):fo.props,Uo=mo.type,_d=mo.dataKey,tp=mo.allowDataOverflow,ep=mo.allowDuplicatedCategory,np=mo.scale,rp=mo.ticks,ip=mo.includeHidden,op=mo[sn];if(lo[op])return lo;var ap=getDisplayedData(st.data,{graphicalItems:on.filter(function(Sp){var Cp,jp=sn in Sp.props?Sp.props[sn]:(Cp=Sp.type.defaultProps)===null||Cp===void 0?void 0:Cp[sn];return jp===op}),dataStartIndex:Xr,dataEndIndex:to}),sp=ap.length,up,pp,lp;isDomainSpecifiedByUser(mo.domain,tp,Uo)&&(up=parseSpecifiedDomain(mo.domain,null,tp),co&&(Uo==="number"||np!=="auto")&&(lp=getDomainOfDataByKey(ap,_d,"category")));var dp=getDefaultDomainByAxisType(Uo);if(!up||up.length===0){var cp,fp=(cp=mo.domain)!==null&&cp!==void 0?cp:dp;if(_d){if(up=getDomainOfDataByKey(ap,_d,Uo),Uo==="category"&&co){var gp=hasDuplicate(up);ep&&gp?(pp=up,up=range$1(0,sp)):ep||(up=parseDomainOfCategoryAxis(fp,up,fo).reduce(function(Sp,Cp){return Sp.indexOf(Cp)>=0?Sp:[].concat(_toConsumableArray(Sp),[Cp])},[]))}else if(Uo==="category")ep?up=up.filter(function(Sp){return Sp!==""&&!isNil$1(Sp)}):up=parseDomainOfCategoryAxis(fp,up,fo).reduce(function(Sp,Cp){return Sp.indexOf(Cp)>=0||Cp===""||isNil$1(Cp)?Sp:[].concat(_toConsumableArray(Sp),[Cp])},[]);else if(Uo==="number"){var mp=parseErrorBarsOfAxis(ap,on.filter(function(Sp){var Cp,jp,Dp=sn in Sp.props?Sp.props[sn]:(Cp=Sp.type.defaultProps)===null||Cp===void 0?void 0:Cp[sn],Vp="hide"in Sp.props?Sp.props.hide:(jp=Sp.type.defaultProps)===null||jp===void 0?void 0:jp.hide;return Dp===op&&(ip||!Vp)}),_d,an,uo);mp&&(up=mp)}co&&(Uo==="number"||np!=="auto")&&(lp=getDomainOfDataByKey(ap,_d,"category"))}else co?up=range$1(0,sp):un&&un[op]&&un[op].hasStack&&Uo==="number"?up=fn==="expand"?[0,1]:getDomainOfStackGroups(un[op].stackGroups,Xr,to):up=getDomainOfItemsWithSameAxis(ap,on.filter(function(Sp){var Cp=sn in Sp.props?Sp.props[sn]:Sp.type.defaultProps[sn],jp="hide"in Sp.props?Sp.props.hide:Sp.type.defaultProps.hide;return Cp===op&&(ip||!jp)}),Uo,uo,!0);if(Uo==="number")up=detectReferenceElementsDomain(hn,up,op,an,rp),fp&&(up=parseSpecifiedDomain(fp,up,tp));else if(Uo==="category"&&fp){var xp=fp,_p=up.every(function(Sp){return xp.indexOf(Sp)>=0});_p&&(up=xp)}}return _objectSpread(_objectSpread({},lo),{},_defineProperty({},op,_objectSpread(_objectSpread({},mo),{},{axisType:an,domain:up,categoricalDomain:lp,duplicateDomain:pp,originalDomain:(ho=mo.domain)!==null&&ho!==void 0?ho:dp,isCategorical:co,layout:uo})))},{})},getAxisMapByItems=function Mt(st,nn){var rn=nn.graphicalItems,on=nn.Axis,an=nn.axisType,sn=nn.axisIdKey,un=nn.stackGroups,Xr=nn.dataStartIndex,to=nn.dataEndIndex,uo=st.layout,hn=st.children,fn=getDisplayedData(st.data,{graphicalItems:rn,dataStartIndex:Xr,dataEndIndex:to}),co=fn.length,lo=isCategoricalAxis(uo,an),fo=-1;return rn.reduce(function(ho,mo){var Uo=mo.type.defaultProps!==void 0?_objectSpread(_objectSpread({},mo.type.defaultProps),mo.props):mo.props,_d=Uo[sn],tp=getDefaultDomainByAxisType("number");if(!ho[_d]){fo++;var ep;return lo?ep=range$1(0,co):un&&un[_d]&&un[_d].hasStack?(ep=getDomainOfStackGroups(un[_d].stackGroups,Xr,to),ep=detectReferenceElementsDomain(hn,ep,_d,an)):(ep=parseSpecifiedDomain(tp,getDomainOfItemsWithSameAxis(fn,rn.filter(function(np){var rp,ip,op=sn in np.props?np.props[sn]:(rp=np.type.defaultProps)===null||rp===void 0?void 0:rp[sn],ap="hide"in np.props?np.props.hide:(ip=np.type.defaultProps)===null||ip===void 0?void 0:ip.hide;return op===_d&&!ap}),"number",uo),on.defaultProps.allowDataOverflow),ep=detectReferenceElementsDomain(hn,ep,_d,an)),_objectSpread(_objectSpread({},ho),{},_defineProperty({},_d,_objectSpread(_objectSpread({axisType:an},on.defaultProps),{},{hide:!0,orientation:get$2(ORIENT_MAP,"".concat(an,".").concat(fo%2),null),domain:ep,originalDomain:tp,isCategorical:lo,layout:uo})))}return ho},{})},getAxisMap=function Mt(st,nn){var rn=nn.axisType,on=rn===void 0?"xAxis":rn,an=nn.AxisComp,sn=nn.graphicalItems,un=nn.stackGroups,Xr=nn.dataStartIndex,to=nn.dataEndIndex,uo=st.children,hn="".concat(on,"Id"),fn=findAllByType(uo,an),co={};return fn&&fn.length?co=getAxisMapByAxes(st,{axes:fn,graphicalItems:sn,axisType:on,axisIdKey:hn,stackGroups:un,dataStartIndex:Xr,dataEndIndex:to}):sn&&sn.length&&(co=getAxisMapByItems(st,{Axis:an,graphicalItems:sn,axisType:on,axisIdKey:hn,stackGroups:un,dataStartIndex:Xr,dataEndIndex:to})),co},tooltipTicksGenerator=function Mt(st){var nn=getAnyElementOfObject(st),rn=getTicksOfAxis(nn,!1,!0);return{tooltipTicks:rn,orderedTooltipTicks:sortBy$1(rn,function(on){return on.coordinate}),tooltipAxis:nn,tooltipAxisBandSize:getBandSizeOfAxis(nn,rn)}},createDefaultState=function Mt(st){var nn=st.children,rn=st.defaultShowTooltip,on=findChildByType(nn,Brush),an=0,sn=0;return st.data&&st.data.length!==0&&(sn=st.data.length-1),on&&on.props&&(on.props.startIndex>=0&&(an=on.props.startIndex),on.props.endIndex>=0&&(sn=on.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:an,dataEndIndex:sn,activeTooltipIndex:-1,isTooltipActive:!!rn}},hasGraphicalBarItem=function Mt(st){return!st||!st.length?!1:st.some(function(nn){var rn=getDisplayName(nn&&nn.type);return rn&&rn.indexOf("Bar")>=0})},getAxisNameByLayout=function Mt(st){return st==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:st==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:st==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},calculateOffset=function Mt(st,nn){var rn=st.props,on=st.graphicalItems,an=st.xAxisMap,sn=an===void 0?{}:an,un=st.yAxisMap,Xr=un===void 0?{}:un,to=rn.width,uo=rn.height,hn=rn.children,fn=rn.margin||{},co=findChildByType(hn,Brush),lo=findChildByType(hn,Legend),fo=Object.keys(Xr).reduce(function(ep,np){var rp=Xr[np],ip=rp.orientation;return!rp.mirror&&!rp.hide?_objectSpread(_objectSpread({},ep),{},_defineProperty({},ip,ep[ip]+rp.width)):ep},{left:fn.left||0,right:fn.right||0}),ho=Object.keys(sn).reduce(function(ep,np){var rp=sn[np],ip=rp.orientation;return!rp.mirror&&!rp.hide?_objectSpread(_objectSpread({},ep),{},_defineProperty({},ip,get$2(ep,"".concat(ip))+rp.height)):ep},{top:fn.top||0,bottom:fn.bottom||0}),mo=_objectSpread(_objectSpread({},ho),fo),Uo=mo.bottom;co&&(mo.bottom+=co.props.height||Brush.defaultProps.height),lo&&nn&&(mo=appendOffsetOfLegend(mo,on,rn,nn));var _d=to-mo.left-mo.right,tp=uo-mo.top-mo.bottom;return _objectSpread(_objectSpread({brushBottom:Uo},mo),{},{width:Math.max(_d,0),height:Math.max(tp,0)})},getCartesianAxisSize=function Mt(st,nn){if(nn==="xAxis")return st[nn].width;if(nn==="yAxis")return st[nn].height},generateCategoricalChart=function Mt(st){var nn=st.chartName,rn=st.GraphicalChild,on=st.defaultTooltipEventType,an=on===void 0?"axis":on,sn=st.validateTooltipEventTypes,un=sn===void 0?["axis"]:sn,Xr=st.axisComponents,to=st.legendContent,uo=st.formatAxisMap,hn=st.defaultProps,fn=function(mo,Uo){var _d=Uo.graphicalItems,tp=Uo.stackGroups,ep=Uo.offset,np=Uo.updateId,rp=Uo.dataStartIndex,ip=Uo.dataEndIndex,op=mo.barSize,ap=mo.layout,sp=mo.barGap,up=mo.barCategoryGap,pp=mo.maxBarSize,lp=getAxisNameByLayout(ap),dp=lp.numericAxisName,cp=lp.cateAxisName,fp=hasGraphicalBarItem(_d),gp=[];return _d.forEach(function(mp,xp){var _p=getDisplayedData(mo.data,{graphicalItems:[mp],dataStartIndex:rp,dataEndIndex:ip}),Sp=mp.type.defaultProps!==void 0?_objectSpread(_objectSpread({},mp.type.defaultProps),mp.props):mp.props,Cp=Sp.dataKey,jp=Sp.maxBarSize,Dp=Sp["".concat(dp,"Id")],Vp=Sp["".concat(cp,"Id")],Up={},Kp=Xr.reduce(function(xm,am){var wm=Uo["".concat(am.axisType,"Map")],Pm=Sp["".concat(am.axisType,"Id")];wm&&wm[Pm]||am.axisType==="zAxis"||invariant();var tm=wm[Pm];return _objectSpread(_objectSpread({},xm),{},_defineProperty(_defineProperty({},am.axisType,tm),"".concat(am.axisType,"Ticks"),getTicksOfAxis(tm)))},Up),Mp=Kp[cp],zp=Kp["".concat(cp,"Ticks")],Bp=tp&&tp[Dp]&&tp[Dp].hasStack&&getStackedDataOfItem(mp,tp[Dp].stackGroups),Pp=getDisplayName(mp.type).indexOf("Bar")>=0,Gp=getBandSizeOfAxis(Mp,zp),Wp=[],Xp=fp&&getBarSizeList({barSize:op,stackGroups:tp,totalSize:getCartesianAxisSize(Kp,cp)});if(Pp){var Qp,om,ym=isNil$1(jp)?pp:jp,mm=(Qp=(om=getBandSizeOfAxis(Mp,zp,!0))!==null&&om!==void 0?om:ym)!==null&&Qp!==void 0?Qp:0;Wp=getBarPosition({barGap:sp,barCategoryGap:up,bandSize:mm!==Gp?mm:Gp,sizeList:Xp[Vp],maxBarSize:ym}),mm!==Gp&&(Wp=Wp.map(function(xm){return _objectSpread(_objectSpread({},xm),{},{position:_objectSpread(_objectSpread({},xm.position),{},{offset:xm.position.offset-mm/2})})}))}var Sm=mp&&mp.type&&mp.type.getComposedData;Sm&&gp.push({props:_objectSpread(_objectSpread({},Sm(_objectSpread(_objectSpread({},Kp),{},{displayedData:_p,props:mo,dataKey:Cp,item:mp,bandSize:Gp,barPosition:Wp,offset:ep,stackedData:Bp,layout:ap,dataStartIndex:rp,dataEndIndex:ip}))),{},_defineProperty(_defineProperty(_defineProperty({key:mp.key||"item-".concat(xp)},dp,Kp[dp]),cp,Kp[cp]),"animationId",np)),childIndex:parseChildIndex(mp,mo.children),item:mp})}),gp},co=function(mo,Uo){var _d=mo.props,tp=mo.dataStartIndex,ep=mo.dataEndIndex,np=mo.updateId;if(!validateWidthHeight({props:_d}))return null;var rp=_d.children,ip=_d.layout,op=_d.stackOffset,ap=_d.data,sp=_d.reverseStackOrder,up=getAxisNameByLayout(ip),pp=up.numericAxisName,lp=up.cateAxisName,dp=findAllByType(rp,rn),cp=getStackGroupsByAxisId(ap,dp,"".concat(pp,"Id"),"".concat(lp,"Id"),op,sp),fp=Xr.reduce(function(Sp,Cp){var jp="".concat(Cp.axisType,"Map");return _objectSpread(_objectSpread({},Sp),{},_defineProperty({},jp,getAxisMap(_d,_objectSpread(_objectSpread({},Cp),{},{graphicalItems:dp,stackGroups:Cp.axisType===pp&&cp,dataStartIndex:tp,dataEndIndex:ep}))))},{}),gp=calculateOffset(_objectSpread(_objectSpread({},fp),{},{props:_d,graphicalItems:dp}),Uo==null?void 0:Uo.legendBBox);Object.keys(fp).forEach(function(Sp){fp[Sp]=uo(_d,fp[Sp],gp,Sp.replace("Map",""),nn)});var mp=fp["".concat(lp,"Map")],xp=tooltipTicksGenerator(mp),_p=fn(_d,_objectSpread(_objectSpread({},fp),{},{dataStartIndex:tp,dataEndIndex:ep,updateId:np,graphicalItems:dp,stackGroups:cp,offset:gp}));return _objectSpread(_objectSpread({formattedGraphicalItems:_p,graphicalItems:dp,offset:gp,stackGroups:cp},xp),fp)},lo=function(ho){function mo(Uo){var _d,tp,ep;return _classCallCheck(this,mo),ep=_callSuper(this,mo,[Uo]),_defineProperty(ep,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),_defineProperty(ep,"accessibilityManager",new AccessibilityManager),_defineProperty(ep,"handleLegendBBoxUpdate",function(np){if(np){var rp=ep.state,ip=rp.dataStartIndex,op=rp.dataEndIndex,ap=rp.updateId;ep.setState(_objectSpread({legendBBox:np},co({props:ep.props,dataStartIndex:ip,dataEndIndex:op,updateId:ap},_objectSpread(_objectSpread({},ep.state),{},{legendBBox:np}))))}}),_defineProperty(ep,"handleReceiveSyncEvent",function(np,rp,ip){if(ep.props.syncId===np){if(ip===ep.eventEmitterSymbol&&typeof ep.props.syncMethod!="function")return;ep.applySyncEvent(rp)}}),_defineProperty(ep,"handleBrushChange",function(np){var rp=np.startIndex,ip=np.endIndex;if(rp!==ep.state.dataStartIndex||ip!==ep.state.dataEndIndex){var op=ep.state.updateId;ep.setState(function(){return _objectSpread({dataStartIndex:rp,dataEndIndex:ip},co({props:ep.props,dataStartIndex:rp,dataEndIndex:ip,updateId:op},ep.state))}),ep.triggerSyncEvent({dataStartIndex:rp,dataEndIndex:ip})}}),_defineProperty(ep,"handleMouseEnter",function(np){var rp=ep.getMouseInfo(np);if(rp){var ip=_objectSpread(_objectSpread({},rp),{},{isTooltipActive:!0});ep.setState(ip),ep.triggerSyncEvent(ip);var op=ep.props.onMouseEnter;isFunction$3(op)&&op(ip,np)}}),_defineProperty(ep,"triggeredAfterMouseMove",function(np){var rp=ep.getMouseInfo(np),ip=rp?_objectSpread(_objectSpread({},rp),{},{isTooltipActive:!0}):{isTooltipActive:!1};ep.setState(ip),ep.triggerSyncEvent(ip);var op=ep.props.onMouseMove;isFunction$3(op)&&op(ip,np)}),_defineProperty(ep,"handleItemMouseEnter",function(np){ep.setState(function(){return{isTooltipActive:!0,activeItem:np,activePayload:np.tooltipPayload,activeCoordinate:np.tooltipPosition||{x:np.cx,y:np.cy}}})}),_defineProperty(ep,"handleItemMouseLeave",function(){ep.setState(function(){return{isTooltipActive:!1}})}),_defineProperty(ep,"handleMouseMove",function(np){np.persist(),ep.throttleTriggeredAfterMouseMove(np)}),_defineProperty(ep,"handleMouseLeave",function(np){ep.throttleTriggeredAfterMouseMove.cancel();var rp={isTooltipActive:!1};ep.setState(rp),ep.triggerSyncEvent(rp);var ip=ep.props.onMouseLeave;isFunction$3(ip)&&ip(rp,np)}),_defineProperty(ep,"handleOuterEvent",function(np){var rp=getReactEventByType(np),ip=get$2(ep.props,"".concat(rp));if(rp&&isFunction$3(ip)){var op,ap;/.*touch.*/i.test(rp)?ap=ep.getMouseInfo(np.changedTouches[0]):ap=ep.getMouseInfo(np),ip((op=ap)!==null&&op!==void 0?op:{},np)}}),_defineProperty(ep,"handleClick",function(np){var rp=ep.getMouseInfo(np);if(rp){var ip=_objectSpread(_objectSpread({},rp),{},{isTooltipActive:!0});ep.setState(ip),ep.triggerSyncEvent(ip);var op=ep.props.onClick;isFunction$3(op)&&op(ip,np)}}),_defineProperty(ep,"handleMouseDown",function(np){var rp=ep.props.onMouseDown;if(isFunction$3(rp)){var ip=ep.getMouseInfo(np);rp(ip,np)}}),_defineProperty(ep,"handleMouseUp",function(np){var rp=ep.props.onMouseUp;if(isFunction$3(rp)){var ip=ep.getMouseInfo(np);rp(ip,np)}}),_defineProperty(ep,"handleTouchMove",function(np){np.changedTouches!=null&&np.changedTouches.length>0&&ep.throttleTriggeredAfterMouseMove(np.changedTouches[0])}),_defineProperty(ep,"handleTouchStart",function(np){np.changedTouches!=null&&np.changedTouches.length>0&&ep.handleMouseDown(np.changedTouches[0])}),_defineProperty(ep,"handleTouchEnd",function(np){np.changedTouches!=null&&np.changedTouches.length>0&&ep.handleMouseUp(np.changedTouches[0])}),_defineProperty(ep,"triggerSyncEvent",function(np){ep.props.syncId!==void 0&&eventCenter.emit(SYNC_EVENT,ep.props.syncId,np,ep.eventEmitterSymbol)}),_defineProperty(ep,"applySyncEvent",function(np){var rp=ep.props,ip=rp.layout,op=rp.syncMethod,ap=ep.state.updateId,sp=np.dataStartIndex,up=np.dataEndIndex;if(np.dataStartIndex!==void 0||np.dataEndIndex!==void 0)ep.setState(_objectSpread({dataStartIndex:sp,dataEndIndex:up},co({props:ep.props,dataStartIndex:sp,dataEndIndex:up,updateId:ap},ep.state)));else if(np.activeTooltipIndex!==void 0){var pp=np.chartX,lp=np.chartY,dp=np.activeTooltipIndex,cp=ep.state,fp=cp.offset,gp=cp.tooltipTicks;if(!fp)return;if(typeof op=="function")dp=op(gp,np);else if(op==="value"){dp=-1;for(var mp=0;mp<gp.length;mp++)if(gp[mp].value===np.activeLabel){dp=mp;break}}var xp=_objectSpread(_objectSpread({},fp),{},{x:fp.left,y:fp.top}),_p=Math.min(pp,xp.x+xp.width),Sp=Math.min(lp,xp.y+xp.height),Cp=gp[dp]&&gp[dp].value,jp=getTooltipContent(ep.state,ep.props.data,dp),Dp=gp[dp]?{x:ip==="horizontal"?gp[dp].coordinate:_p,y:ip==="horizontal"?Sp:gp[dp].coordinate}:originCoordinate;ep.setState(_objectSpread(_objectSpread({},np),{},{activeLabel:Cp,activeCoordinate:Dp,activePayload:jp,activeTooltipIndex:dp}))}else ep.setState(np)}),_defineProperty(ep,"renderCursor",function(np){var rp,ip=ep.state,op=ip.isTooltipActive,ap=ip.activeCoordinate,sp=ip.activePayload,up=ip.offset,pp=ip.activeTooltipIndex,lp=ip.tooltipAxisBandSize,dp=ep.getTooltipEventType(),cp=(rp=np.props.active)!==null&&rp!==void 0?rp:op,fp=ep.props.layout,gp=np.key||"_recharts-cursor";return React.createElement(Cursor,{key:gp,activeCoordinate:ap,activePayload:sp,activeTooltipIndex:pp,chartName:nn,element:np,isActive:cp,layout:fp,offset:up,tooltipAxisBandSize:lp,tooltipEventType:dp})}),_defineProperty(ep,"renderPolarAxis",function(np,rp,ip){var op=get$2(np,"type.axisType"),ap=get$2(ep.state,"".concat(op,"Map")),sp=np.type.defaultProps,up=sp!==void 0?_objectSpread(_objectSpread({},sp),np.props):np.props,pp=ap&&ap[up["".concat(op,"Id")]];return reactExports.cloneElement(np,_objectSpread(_objectSpread({},pp),{},{className:clsx(op,pp.className),key:np.key||"".concat(rp,"-").concat(ip),ticks:getTicksOfAxis(pp,!0)}))}),_defineProperty(ep,"renderPolarGrid",function(np){var rp=np.props,ip=rp.radialLines,op=rp.polarAngles,ap=rp.polarRadius,sp=ep.state,up=sp.radiusAxisMap,pp=sp.angleAxisMap,lp=getAnyElementOfObject(up),dp=getAnyElementOfObject(pp),cp=dp.cx,fp=dp.cy,gp=dp.innerRadius,mp=dp.outerRadius;return reactExports.cloneElement(np,{polarAngles:Array.isArray(op)?op:getTicksOfAxis(dp,!0).map(function(xp){return xp.coordinate}),polarRadius:Array.isArray(ap)?ap:getTicksOfAxis(lp,!0).map(function(xp){return xp.coordinate}),cx:cp,cy:fp,innerRadius:gp,outerRadius:mp,key:np.key||"polar-grid",radialLines:ip})}),_defineProperty(ep,"renderLegend",function(){var np=ep.state.formattedGraphicalItems,rp=ep.props,ip=rp.children,op=rp.width,ap=rp.height,sp=ep.props.margin||{},up=op-(sp.left||0)-(sp.right||0),pp=getLegendProps({children:ip,formattedGraphicalItems:np,legendWidth:up,legendContent:to});if(!pp)return null;var lp=pp.item,dp=_objectWithoutProperties(pp,_excluded);return reactExports.cloneElement(lp,_objectSpread(_objectSpread({},dp),{},{chartWidth:op,chartHeight:ap,margin:sp,onBBoxUpdate:ep.handleLegendBBoxUpdate}))}),_defineProperty(ep,"renderTooltip",function(){var np,rp=ep.props,ip=rp.children,op=rp.accessibilityLayer,ap=findChildByType(ip,Tooltip);if(!ap)return null;var sp=ep.state,up=sp.isTooltipActive,pp=sp.activeCoordinate,lp=sp.activePayload,dp=sp.activeLabel,cp=sp.offset,fp=(np=ap.props.active)!==null&&np!==void 0?np:up;return reactExports.cloneElement(ap,{viewBox:_objectSpread(_objectSpread({},cp),{},{x:cp.left,y:cp.top}),active:fp,label:dp,payload:fp?lp:[],coordinate:pp,accessibilityLayer:op})}),_defineProperty(ep,"renderBrush",function(np){var rp=ep.props,ip=rp.margin,op=rp.data,ap=ep.state,sp=ap.offset,up=ap.dataStartIndex,pp=ap.dataEndIndex,lp=ap.updateId;return reactExports.cloneElement(np,{key:np.key||"_recharts-brush",onChange:combineEventHandlers(ep.handleBrushChange,np.props.onChange),data:op,x:isNumber(np.props.x)?np.props.x:sp.left,y:isNumber(np.props.y)?np.props.y:sp.top+sp.height+sp.brushBottom-(ip.bottom||0),width:isNumber(np.props.width)?np.props.width:sp.width,startIndex:up,endIndex:pp,updateId:"brush-".concat(lp)})}),_defineProperty(ep,"renderReferenceElement",function(np,rp,ip){if(!np)return null;var op=ep,ap=op.clipPathId,sp=ep.state,up=sp.xAxisMap,pp=sp.yAxisMap,lp=sp.offset,dp=np.type.defaultProps||{},cp=np.props,fp=cp.xAxisId,gp=fp===void 0?dp.xAxisId:fp,mp=cp.yAxisId,xp=mp===void 0?dp.yAxisId:mp;return reactExports.cloneElement(np,{key:np.key||"".concat(rp,"-").concat(ip),xAxis:up[gp],yAxis:pp[xp],viewBox:{x:lp.left,y:lp.top,width:lp.width,height:lp.height},clipPathId:ap})}),_defineProperty(ep,"renderActivePoints",function(np){var rp=np.item,ip=np.activePoint,op=np.basePoint,ap=np.childIndex,sp=np.isRange,up=[],pp=rp.props.key,lp=rp.item.type.defaultProps!==void 0?_objectSpread(_objectSpread({},rp.item.type.defaultProps),rp.item.props):rp.item.props,dp=lp.activeDot,cp=lp.dataKey,fp=_objectSpread(_objectSpread({index:ap,dataKey:cp,cx:ip.x,cy:ip.y,r:4,fill:getMainColorOfGraphicItem(rp.item),strokeWidth:2,stroke:"#fff",payload:ip.payload,value:ip.value},filterProps(dp,!1)),adaptEventHandlers(dp));return up.push(mo.renderActiveDot(dp,fp,"".concat(pp,"-activePoint-").concat(ap))),op?up.push(mo.renderActiveDot(dp,_objectSpread(_objectSpread({},fp),{},{cx:op.x,cy:op.y}),"".concat(pp,"-basePoint-").concat(ap))):sp&&up.push(null),up}),_defineProperty(ep,"renderGraphicChild",function(np,rp,ip){var op=ep.filterFormatItem(np,rp,ip);if(!op)return null;var ap=ep.getTooltipEventType(),sp=ep.state,up=sp.isTooltipActive,pp=sp.tooltipAxis,lp=sp.activeTooltipIndex,dp=sp.activeLabel,cp=ep.props.children,fp=findChildByType(cp,Tooltip),gp=op.props,mp=gp.points,xp=gp.isRange,_p=gp.baseLine,Sp=op.item.type.defaultProps!==void 0?_objectSpread(_objectSpread({},op.item.type.defaultProps),op.item.props):op.item.props,Cp=Sp.activeDot,jp=Sp.hide,Dp=Sp.activeBar,Vp=Sp.activeShape,Up=!!(!jp&&up&&fp&&(Cp||Dp||Vp)),Kp={};ap!=="axis"&&fp&&fp.props.trigger==="click"?Kp={onClick:combineEventHandlers(ep.handleItemMouseEnter,np.props.onClick)}:ap!=="axis"&&(Kp={onMouseLeave:combineEventHandlers(ep.handleItemMouseLeave,np.props.onMouseLeave),onMouseEnter:combineEventHandlers(ep.handleItemMouseEnter,np.props.onMouseEnter)});var Mp=reactExports.cloneElement(np,_objectSpread(_objectSpread({},op.props),Kp));function zp(am){return typeof pp.dataKey=="function"?pp.dataKey(am.payload):null}if(Up)if(lp>=0){var Bp,Pp;if(pp.dataKey&&!pp.allowDuplicatedCategory){var Gp=typeof pp.dataKey=="function"?zp:"payload.".concat(pp.dataKey.toString());Bp=findEntryInArray(mp,Gp,dp),Pp=xp&&_p&&findEntryInArray(_p,Gp,dp)}else Bp=mp==null?void 0:mp[lp],Pp=xp&&_p&&_p[lp];if(Vp||Dp){var Wp=np.props.activeIndex!==void 0?np.props.activeIndex:lp;return[reactExports.cloneElement(np,_objectSpread(_objectSpread(_objectSpread({},op.props),Kp),{},{activeIndex:Wp})),null,null]}if(!isNil$1(Bp))return[Mp].concat(_toConsumableArray(ep.renderActivePoints({item:op,activePoint:Bp,basePoint:Pp,childIndex:lp,isRange:xp})))}else{var Xp,Qp=(Xp=ep.getItemByXY(ep.state.activeCoordinate))!==null&&Xp!==void 0?Xp:{graphicalItem:Mp},om=Qp.graphicalItem,ym=om.item,mm=ym===void 0?np:ym,Sm=om.childIndex,xm=_objectSpread(_objectSpread(_objectSpread({},op.props),Kp),{},{activeIndex:Sm});return[reactExports.cloneElement(mm,xm),null,null]}return xp?[Mp,null,null]:[Mp,null]}),_defineProperty(ep,"renderCustomized",function(np,rp,ip){return reactExports.cloneElement(np,_objectSpread(_objectSpread({key:"recharts-customized-".concat(ip)},ep.props),ep.state))}),_defineProperty(ep,"renderMap",{CartesianGrid:{handler:renderAsIs,once:!0},ReferenceArea:{handler:ep.renderReferenceElement},ReferenceLine:{handler:renderAsIs},ReferenceDot:{handler:ep.renderReferenceElement},XAxis:{handler:renderAsIs},YAxis:{handler:renderAsIs},Brush:{handler:ep.renderBrush,once:!0},Bar:{handler:ep.renderGraphicChild},Line:{handler:ep.renderGraphicChild},Area:{handler:ep.renderGraphicChild},Radar:{handler:ep.renderGraphicChild},RadialBar:{handler:ep.renderGraphicChild},Scatter:{handler:ep.renderGraphicChild},Pie:{handler:ep.renderGraphicChild},Funnel:{handler:ep.renderGraphicChild},Tooltip:{handler:ep.renderCursor,once:!0},PolarGrid:{handler:ep.renderPolarGrid,once:!0},PolarAngleAxis:{handler:ep.renderPolarAxis},PolarRadiusAxis:{handler:ep.renderPolarAxis},Customized:{handler:ep.renderCustomized}}),ep.clipPathId="".concat((_d=Uo.id)!==null&&_d!==void 0?_d:uniqueId("recharts"),"-clip"),ep.throttleTriggeredAfterMouseMove=throttle$1(ep.triggeredAfterMouseMove,(tp=Uo.throttleDelay)!==null&&tp!==void 0?tp:1e3/60),ep.state={},ep}return _inherits(mo,ho),_createClass(mo,[{key:"componentDidMount",value:function(){var _d,tp;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(_d=this.props.margin.left)!==null&&_d!==void 0?_d:0,top:(tp=this.props.margin.top)!==null&&tp!==void 0?tp:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var _d=this.props,tp=_d.children,ep=_d.data,np=_d.height,rp=_d.layout,ip=findChildByType(tp,Tooltip);if(ip){var op=ip.props.defaultIndex;if(!(typeof op!="number"||op<0||op>this.state.tooltipTicks.length-1)){var ap=this.state.tooltipTicks[op]&&this.state.tooltipTicks[op].value,sp=getTooltipContent(this.state,ep,op,ap),up=this.state.tooltipTicks[op].coordinate,pp=(this.state.offset.top+np)/2,lp=rp==="horizontal",dp=lp?{x:up,y:pp}:{y:up,x:pp},cp=this.state.formattedGraphicalItems.find(function(gp){var mp=gp.item;return mp.type.name==="Scatter"});cp&&(dp=_objectSpread(_objectSpread({},dp),cp.props.points[op].tooltipPosition),sp=cp.props.points[op].tooltipPayload);var fp={activeTooltipIndex:op,isTooltipActive:!0,activeLabel:ap,activePayload:sp,activeCoordinate:dp};this.setState(fp),this.renderCursor(ip),this.accessibilityManager.setIndex(op)}}}},{key:"getSnapshotBeforeUpdate",value:function(_d,tp){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==tp.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==_d.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==_d.margin){var ep,np;this.accessibilityManager.setDetails({offset:{left:(ep=this.props.margin.left)!==null&&ep!==void 0?ep:0,top:(np=this.props.margin.top)!==null&&np!==void 0?np:0}})}return null}},{key:"componentDidUpdate",value:function(_d){isChildrenEqual([findChildByType(_d.children,Tooltip)],[findChildByType(this.props.children,Tooltip)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var _d=findChildByType(this.props.children,Tooltip);if(_d&&typeof _d.props.shared=="boolean"){var tp=_d.props.shared?"axis":"item";return un.indexOf(tp)>=0?tp:an}return an}},{key:"getMouseInfo",value:function(_d){if(!this.container)return null;var tp=this.container,ep=tp.getBoundingClientRect(),np=getOffset(ep),rp={chartX:Math.round(_d.pageX-np.left),chartY:Math.round(_d.pageY-np.top)},ip=ep.width/tp.offsetWidth||1,op=this.inRange(rp.chartX,rp.chartY,ip);if(!op)return null;var ap=this.state,sp=ap.xAxisMap,up=ap.yAxisMap,pp=this.getTooltipEventType();if(pp!=="axis"&&sp&&up){var lp=getAnyElementOfObject(sp).scale,dp=getAnyElementOfObject(up).scale,cp=lp&&lp.invert?lp.invert(rp.chartX):null,fp=dp&&dp.invert?dp.invert(rp.chartY):null;return _objectSpread(_objectSpread({},rp),{},{xValue:cp,yValue:fp})}var gp=getTooltipData(this.state,this.props.data,this.props.layout,op);return gp?_objectSpread(_objectSpread({},rp),gp):null}},{key:"inRange",value:function(_d,tp){var ep=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,np=this.props.layout,rp=_d/ep,ip=tp/ep;if(np==="horizontal"||np==="vertical"){var op=this.state.offset,ap=rp>=op.left&&rp<=op.left+op.width&&ip>=op.top&&ip<=op.top+op.height;return ap?{x:rp,y:ip}:null}var sp=this.state,up=sp.angleAxisMap,pp=sp.radiusAxisMap;if(up&&pp){var lp=getAnyElementOfObject(up);return inRangeOfSector({x:rp,y:ip},lp)}return null}},{key:"parseEventsOfWrapper",value:function(){var _d=this.props.children,tp=this.getTooltipEventType(),ep=findChildByType(_d,Tooltip),np={};ep&&tp==="axis"&&(ep.props.trigger==="click"?np={onClick:this.handleClick}:np={onMouseEnter:this.handleMouseEnter,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd});var rp=adaptEventHandlers(this.props,this.handleOuterEvent);return _objectSpread(_objectSpread({},rp),np)}},{key:"addListener",value:function(){eventCenter.on(SYNC_EVENT,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){eventCenter.removeListener(SYNC_EVENT,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(_d,tp,ep){for(var np=this.state.formattedGraphicalItems,rp=0,ip=np.length;rp<ip;rp++){var op=np[rp];if(op.item===_d||op.props.key===_d.key||tp===getDisplayName(op.item.type)&&ep===op.childIndex)return op}return null}},{key:"renderClipPath",value:function(){var _d=this.clipPathId,tp=this.state.offset,ep=tp.left,np=tp.top,rp=tp.height,ip=tp.width;return React.createElement("defs",null,React.createElement("clipPath",{id:_d},React.createElement("rect",{x:ep,y:np,height:rp,width:ip})))}},{key:"getXScales",value:function(){var _d=this.state.xAxisMap;return _d?Object.entries(_d).reduce(function(tp,ep){var np=_slicedToArray(ep,2),rp=np[0],ip=np[1];return _objectSpread(_objectSpread({},tp),{},_defineProperty({},rp,ip.scale))},{}):null}},{key:"getYScales",value:function(){var _d=this.state.yAxisMap;return _d?Object.entries(_d).reduce(function(tp,ep){var np=_slicedToArray(ep,2),rp=np[0],ip=np[1];return _objectSpread(_objectSpread({},tp),{},_defineProperty({},rp,ip.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(_d){var tp;return(tp=this.state.xAxisMap)===null||tp===void 0||(tp=tp[_d])===null||tp===void 0?void 0:tp.scale}},{key:"getYScaleByAxisId",value:function(_d){var tp;return(tp=this.state.yAxisMap)===null||tp===void 0||(tp=tp[_d])===null||tp===void 0?void 0:tp.scale}},{key:"getItemByXY",value:function(_d){var tp=this.state,ep=tp.formattedGraphicalItems,np=tp.activeItem;if(ep&&ep.length)for(var rp=0,ip=ep.length;rp<ip;rp++){var op=ep[rp],ap=op.props,sp=op.item,up=sp.type.defaultProps!==void 0?_objectSpread(_objectSpread({},sp.type.defaultProps),sp.props):sp.props,pp=getDisplayName(sp.type);if(pp==="Bar"){var lp=(ap.data||[]).find(function(gp){return isInRectangle(_d,gp)});if(lp)return{graphicalItem:op,payload:lp}}else if(pp==="RadialBar"){var dp=(ap.data||[]).find(function(gp){return inRangeOfSector(_d,gp)});if(dp)return{graphicalItem:op,payload:dp}}else if(isFunnel(op,np)||isPie(op,np)||isScatter(op,np)){var cp=getActiveShapeIndexForTooltip({graphicalItem:op,activeTooltipItem:np,itemData:up.data}),fp=up.activeIndex===void 0?cp:up.activeIndex;return{graphicalItem:_objectSpread(_objectSpread({},op),{},{childIndex:fp}),payload:isScatter(op,np)?up.data[cp]:op.props.data[cp]}}}return null}},{key:"render",value:function(){var _d=this;if(!validateWidthHeight(this))return null;var tp=this.props,ep=tp.children,np=tp.className,rp=tp.width,ip=tp.height,op=tp.style,ap=tp.compact,sp=tp.title,up=tp.desc,pp=_objectWithoutProperties(tp,_excluded2),lp=filterProps(pp,!1);if(ap)return React.createElement(ChartLayoutContextProvider,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},React.createElement(Surface,_extends({},lp,{width:rp,height:ip,title:sp,desc:up}),this.renderClipPath(),renderByOrder(ep,this.renderMap)));if(this.props.accessibilityLayer){var dp,cp;lp.tabIndex=(dp=this.props.tabIndex)!==null&&dp!==void 0?dp:0,lp.role=(cp=this.props.role)!==null&&cp!==void 0?cp:"application",lp.onKeyDown=function(gp){_d.accessibilityManager.keyboardEvent(gp)},lp.onFocus=function(){_d.accessibilityManager.focus()}}var fp=this.parseEventsOfWrapper();return React.createElement(ChartLayoutContextProvider,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},React.createElement("div",_extends({className:clsx("recharts-wrapper",np),style:_objectSpread({position:"relative",cursor:"default",width:rp,height:ip},op)},fp,{ref:function(mp){_d.container=mp}}),React.createElement(Surface,_extends({},lp,{width:rp,height:ip,title:sp,desc:up,style:FULL_WIDTH_AND_HEIGHT}),this.renderClipPath(),renderByOrder(ep,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(reactExports.Component);_defineProperty(lo,"displayName",nn),_defineProperty(lo,"defaultProps",_objectSpread({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},hn)),_defineProperty(lo,"getDerivedStateFromProps",function(ho,mo){var Uo=ho.dataKey,_d=ho.data,tp=ho.children,ep=ho.width,np=ho.height,rp=ho.layout,ip=ho.stackOffset,op=ho.margin,ap=mo.dataStartIndex,sp=mo.dataEndIndex;if(mo.updateId===void 0){var up=createDefaultState(ho);return _objectSpread(_objectSpread(_objectSpread({},up),{},{updateId:0},co(_objectSpread(_objectSpread({props:ho},up),{},{updateId:0}),mo)),{},{prevDataKey:Uo,prevData:_d,prevWidth:ep,prevHeight:np,prevLayout:rp,prevStackOffset:ip,prevMargin:op,prevChildren:tp})}if(Uo!==mo.prevDataKey||_d!==mo.prevData||ep!==mo.prevWidth||np!==mo.prevHeight||rp!==mo.prevLayout||ip!==mo.prevStackOffset||!shallowEqual(op,mo.prevMargin)){var pp=createDefaultState(ho),lp={chartX:mo.chartX,chartY:mo.chartY,isTooltipActive:mo.isTooltipActive},dp=_objectSpread(_objectSpread({},getTooltipData(mo,_d,rp)),{},{updateId:mo.updateId+1}),cp=_objectSpread(_objectSpread(_objectSpread({},pp),lp),dp);return _objectSpread(_objectSpread(_objectSpread({},cp),co(_objectSpread({props:ho},cp),mo)),{},{prevDataKey:Uo,prevData:_d,prevWidth:ep,prevHeight:np,prevLayout:rp,prevStackOffset:ip,prevMargin:op,prevChildren:tp})}if(!isChildrenEqual(tp,mo.prevChildren)){var fp,gp,mp,xp,_p=findChildByType(tp,Brush),Sp=_p&&(fp=(gp=_p.props)===null||gp===void 0?void 0:gp.startIndex)!==null&&fp!==void 0?fp:ap,Cp=_p&&(mp=(xp=_p.props)===null||xp===void 0?void 0:xp.endIndex)!==null&&mp!==void 0?mp:sp,jp=Sp!==ap||Cp!==sp,Dp=!isNil$1(_d),Vp=Dp&&!jp?mo.updateId:mo.updateId+1;return _objectSpread(_objectSpread({updateId:Vp},co(_objectSpread(_objectSpread({props:ho},mo),{},{updateId:Vp,dataStartIndex:Sp,dataEndIndex:Cp}),mo)),{},{prevChildren:tp,dataStartIndex:Sp,dataEndIndex:Cp})}return null}),_defineProperty(lo,"renderActiveDot",function(ho,mo,Uo){var _d;return reactExports.isValidElement(ho)?_d=reactExports.cloneElement(ho,mo):isFunction$3(ho)?_d=ho(mo):_d=React.createElement(Dot,mo),React.createElement(Layer,{className:"recharts-active-dot",key:Uo},_d)});var fo=reactExports.forwardRef(function(mo,Uo){return React.createElement(lo,_extends({},mo,{ref:Uo}))});return fo.displayName=lo.displayName,fo},BarChart=generateCategoricalChart({chartName:"BarChart",GraphicalChild:Bar,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:XAxis},{axisType:"yAxis",AxisComp:YAxis}],formatAxisMap}),PieChart=generateCategoricalChart({chartName:"PieChart",GraphicalChild:Pie,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:PolarAngleAxis},{axisType:"radiusAxis",AxisComp:PolarRadiusAxis}],formatAxisMap:formatAxisMap$1,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}}),AreaChart=generateCategoricalChart({chartName:"AreaChart",GraphicalChild:Area,axisComponents:[{axisType:"xAxis",AxisComp:XAxis},{axisType:"yAxis",AxisComp:YAxis}],formatAxisMap});const EMOTION_COLORS={happy:"#4CAF50",sad:"#5C6BC0",angry:"#FF5252",surprised:"#FFD740",fearful:"#AB47BC",disgusted:"#8D6E63",neutral:"#90A4AE",calm:"#26C6DA"},containerVariants={hidden:{opacity:0},visible:{opacity:1,transition:{when:"beforeChildren",staggerChildren:.15,duration:.3}},exit:{opacity:0,transition:{when:"afterChildren",staggerChildren:.1,staggerDirection:-1,duration:.2}}},itemVariants={hidden:{y:30,opacity:0},visible:{y:0,opacity:1,transition:{type:"spring",damping:15,stiffness:200}},exit:{y:20,opacity:0,transition:{duration:.2}}},chartAnimVariants={hidden:{scale:.95,opacity:0},visible:{scale:1,opacity:1,transition:{type:"spring",damping:15,delay:.2}}};function StatsPage(){const[Mt,st]=reactExports.useState([]),[nn,rn]=reactExports.useState(!0),[on,an]=reactExports.useState("all"),[sn,un]=reactExports.useState("distribution"),[Xr,to]=reactExports.useState(0),{messages:uo}=usePuterAI({});reactExports.useEffect(()=>{(async()=>{rn(!0);try{const np=getEmotionHistory(),rp=getVocalToneHistory(),ip=localStorage.getItem("emotionStats");let op=[];ip&&(op=JSON.parse(ip).map(lp=>({...lp,timestamp:new Date(lp.timestamp)})));const ap=np.map(lp=>({timestamp:lp.timestamp,emotion:lp.emotion,intensity:Math.round(lp.confidence*100),session:"voice",source:"face"})),sp=rp.map(lp=>({timestamp:lp.timestamp,emotion:co(lp.tone),intensity:Math.round(lp.confidence*100),session:"voice",source:"vocal"})),up=hn(uo);let pp=[...ap,...sp,...up,...op];if(pp.length<5){const lp=fn();pp=[...pp,...lp]}pp.sort((lp,dp)=>lp.timestamp.getTime()-dp.timestamp.getTime()),pp.length>0?(st(pp),localStorage.setItem("emotionStats",JSON.stringify(pp))):st([])}catch(np){console.error("Error loading emotion data:",np);const rp=localStorage.getItem("emotionStats");if(rp)try{const ip=JSON.parse(rp).map(op=>({...op,timestamp:new Date(op.timestamp)}));st(ip)}catch{st([])}else st([])}finally{rn(!1)}})();const ep=setInterval(()=>{to(np=>np+1)},15e3);return()=>clearInterval(ep)},[uo,Xr]);const hn=tp=>tp.filter(ep=>{var np;return ep.role==="user"&&((np=ep.mood)==null?void 0:np.emotion)}).map(ep=>{var np;return{timestamp:new Date(ep.timestamp),emotion:((np=ep.mood)==null?void 0:np.emotion)||"neutral",intensity:75,session:"text",source:"text"}}),fn=()=>{const tp=new Date;return[{timestamp:new Date(tp.getTime()-30*60*1e3),emotion:"happy",intensity:85,session:"voice",source:"face"},{timestamp:new Date(tp.getTime()-25*60*1e3),emotion:"neutral",intensity:70,session:"voice",source:"vocal"},{timestamp:new Date(tp.getTime()-20*60*1e3),emotion:"sad",intensity:80,session:"text",source:"text"},{timestamp:new Date(tp.getTime()-15*60*1e3),emotion:"neutral",intensity:70,session:"text",source:"text"}]},co=tp=>({excited:"happy",sad:"sad",angry:"angry",anxious:"fearful",neutral:"neutral",calm:"calm",uncertain:"surprised"})[tp]||"neutral",lo=()=>{window.confirm("Are you sure you want to clear all emotion tracking data?")&&(localStorage.removeItem("emotionStats"),st([]))},fo=()=>on==="all"?Mt:Mt.filter(tp=>tp.session===on),ho=()=>{const tp=fo(),ep={};return tp.forEach(np=>{ep[np.emotion]=(ep[np.emotion]||0)+1}),Object.entries(ep).map(([np,rp])=>({name:np,value:rp})).sort((np,rp)=>rp.value-np.value)},mo=()=>{const tp=Object.keys(EMOTION_COLORS),ep={voice:Object.fromEntries(tp.map(np=>[np,0])),text:Object.fromEntries(tp.map(np=>[np,0]))};return Mt.forEach(np=>{ep[np.session]&&np.emotion in ep[np.session]&&ep[np.session][np.emotion]++}),tp.filter(np=>ep.voice[np]>0||ep.text[np]>0).map(np=>({emotion:np,voice:ep.voice[np],text:ep.text[np]}))},Uo=()=>{const tp=fo(),ep={};return tp.forEach(np=>{const rp=`${np.timestamp.getMonth()+1}/${np.timestamp.getDate()} ${np.timestamp.getHours()}:00`;ep[rp]||(ep[rp]={}),ep[rp][np.emotion]||(ep[rp][np.emotion]=[]),ep[rp][np.emotion].push(np.intensity)}),Object.entries(ep).map(([np,rp])=>{const ip={time:np};return Object.entries(rp).forEach(([op,ap])=>{const sp=ap.reduce((up,pp)=>up+pp,0)/ap.length;ip[op]=Math.round(sp)}),ip}).sort((np,rp)=>{const ip=new Date(np.time.replace(" ","/2025 ")).getTime(),op=new Date(rp.time.replace(" ","/2025 ")).getTime();return ip-op})},_d=(tp,ep)=>{const np=ep.charAt(0).toUpperCase()+ep.slice(1);return[tp,np]};return nn?jsxRuntimeExports.jsx("div",{className:"max-w-5xl mx-auto py-8 px-4",children:jsxRuntimeExports.jsxs(motion.div,{className:"flex flex-col items-center justify-center h-[50vh]",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[jsxRuntimeExports.jsx(RefreshCw,{className:"animate-spin h-12 w-12 text-blue-500 mb-4"}),jsxRuntimeExports.jsx("p",{className:"text-blue-700 text-lg animate-pulse",children:"Loading your emotion statistics..."})]})}):jsxRuntimeExports.jsxs("div",{className:"max-w-5xl mx-auto py-8 px-4",children:[jsxRuntimeExports.jsxs(motion.div,{className:"mb-8",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{type:"spring",stiffness:300,damping:30},children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4 mb-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx(Link,{href:"/",children:jsxRuntimeExports.jsxs(Button,{variant:"outline",className:"mr-4 border-blue-200 text-blue-600 hover:bg-blue-50",children:[jsxRuntimeExports.jsx(ArrowLeft,{className:"h-4 w-4 mr-2"}),"Back to Home"]})}),jsxRuntimeExports.jsx("h1",{className:"text-2xl md:text-3xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"Emotion Analytics"})]}),jsxRuntimeExports.jsx(Button,{variant:"outline",className:"text-red-500 border-red-200 hover:bg-red-50 shadow-sm",onClick:lo,children:"Clear All Data"})]}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 max-w-3xl",children:"Track your emotional patterns during therapy sessions to gain insights into your emotional well-being."})]}),Mt.length===0?jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:jsxRuntimeExports.jsx(Card,{className:"bg-blue-50 border-blue-200 shadow-md text-center py-12",children:jsxRuntimeExports.jsxs(CardContent,{children:[jsxRuntimeExports.jsx("p",{className:"text-blue-600 mb-4 text-lg",children:"No emotion data available yet."}),jsxRuntimeExports.jsx("p",{className:"text-blue-500 mb-6",children:"Use the voice or text therapy features to start tracking your emotions."}),jsxRuntimeExports.jsx(Link,{href:"/",children:jsxRuntimeExports.jsx(Button,{className:"bg-blue-600 hover:bg-blue-700",children:"Return to Therapy"})})]})})}):jsxRuntimeExports.jsxs(motion.div,{variants:containerVariants,initial:"hidden",animate:"visible",className:"space-y-6",children:[jsxRuntimeExports.jsx(motion.div,{variants:itemVariants,className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-medium text-gray-800 mb-2",children:"Filter by Session Type"}),jsxRuntimeExports.jsx(Tabs,{defaultValue:"all",value:on,onValueChange:tp=>an(tp),children:jsxRuntimeExports.jsxs(TabsList,{className:"bg-gray-100",children:[jsxRuntimeExports.jsx(TabsTrigger,{value:"all",className:"data-[state=active]:bg-blue-500 data-[state=active]:text-white",children:"All Sessions"}),jsxRuntimeExports.jsx(TabsTrigger,{value:"voice",className:"data-[state=active]:bg-indigo-500 data-[state=active]:text-white",children:"Voice Therapy"}),jsxRuntimeExports.jsx(TabsTrigger,{value:"text",className:"data-[state=active]:bg-green-500 data-[state=active]:text-white",children:"Text Therapy"})]})})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-medium text-gray-800 mb-2",children:"Chart Type"}),jsxRuntimeExports.jsxs("div",{className:"flex space-x-2",children:[jsxRuntimeExports.jsxs(Button,{variant:sn==="distribution"?"default":"outline",size:"sm",onClick:()=>un("distribution"),className:sn==="distribution"?"bg-purple-500":"",children:[jsxRuntimeExports.jsx(ChartPie,{className:"h-4 w-4 mr-1"}),"Distribution"]}),jsxRuntimeExports.jsxs(Button,{variant:sn==="timeline"?"default":"outline",size:"sm",onClick:()=>un("timeline"),className:sn==="timeline"?"bg-blue-500":"",children:[jsxRuntimeExports.jsx(ChartLine,{className:"h-4 w-4 mr-1"}),"Timeline"]}),jsxRuntimeExports.jsxs(Button,{variant:sn==="comparison"?"default":"outline",size:"sm",onClick:()=>un("comparison"),className:sn==="comparison"?"bg-green-500":"",children:[jsxRuntimeExports.jsx(ChartNoAxesColumn,{className:"h-4 w-4 mr-1"}),"Compare"]})]})]})]})}),jsxRuntimeExports.jsx(AnimatePresence,{mode:"wait",children:jsxRuntimeExports.jsxs(motion.div,{initial:"hidden",animate:"visible",exit:"exit",variants:chartAnimVariants,transition:{duration:.2},children:[sn==="distribution"&&jsxRuntimeExports.jsxs(Card,{className:"overflow-hidden bg-white border-gray-200 shadow-md",children:[jsxRuntimeExports.jsxs(CardHeader,{className:"border-b border-gray-100 bg-gradient-to-r from-purple-50 to-blue-50",children:[jsxRuntimeExports.jsxs(CardTitle,{className:"text-gray-800",children:["Emotion Distribution",on!=="all"&&` - ${on==="voice"?"Voice":"Text"} Therapy`]}),jsxRuntimeExports.jsx(CardDescription,{children:"Frequency of each emotion detected during your therapy sessions"})]}),jsxRuntimeExports.jsx(CardContent,{className:"pt-6",children:jsxRuntimeExports.jsx("div",{className:"h-[400px]",children:jsxRuntimeExports.jsx(ResponsiveContainer,{width:"100%",height:"100%",children:jsxRuntimeExports.jsxs(PieChart,{children:[jsxRuntimeExports.jsx(Pie,{data:ho(),cx:"50%",cy:"50%",labelLine:!0,label:({name:tp,percent:ep})=>`${tp.charAt(0).toUpperCase()+tp.slice(1)} (${(ep*100).toFixed(0)}%)`,outerRadius:150,innerRadius:60,paddingAngle:3,fill:"#8884d8",dataKey:"value",animationBegin:200,animationDuration:1500,children:ho().map((tp,ep)=>jsxRuntimeExports.jsx(Cell,{fill:EMOTION_COLORS[tp.name]||"#999999",stroke:"#fff",strokeWidth:2},`cell-${ep}`))}),jsxRuntimeExports.jsx(Tooltip,{formatter:_d,contentStyle:{backgroundColor:"rgba(255, 255, 255, 0.95)",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)",border:"none"}}),jsxRuntimeExports.jsx(Legend,{layout:"horizontal",verticalAlign:"bottom",align:"center",iconType:"circle"})]})})})})]}),sn==="timeline"&&jsxRuntimeExports.jsxs(Card,{className:"overflow-hidden bg-white border-gray-200 shadow-md",children:[jsxRuntimeExports.jsxs(CardHeader,{className:"border-b border-gray-100 bg-gradient-to-r from-blue-50 to-indigo-50",children:[jsxRuntimeExports.jsxs(CardTitle,{className:"text-gray-800",children:["Emotion Timeline",on!=="all"&&` - ${on==="voice"?"Voice":"Text"} Therapy`]}),jsxRuntimeExports.jsx(CardDescription,{children:"Emotional patterns over time during your therapy sessions"})]}),jsxRuntimeExports.jsx(CardContent,{className:"pt-6",children:jsxRuntimeExports.jsx("div",{className:"h-[400px]",children:jsxRuntimeExports.jsx(ResponsiveContainer,{width:"100%",height:"100%",children:jsxRuntimeExports.jsxs(AreaChart,{data:Uo(),margin:{top:10,right:30,left:0,bottom:20},children:[jsxRuntimeExports.jsx(CartesianGrid,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),jsxRuntimeExports.jsx(XAxis,{dataKey:"time",tick:{fontSize:12}}),jsxRuntimeExports.jsx(YAxis,{label:{value:"Intensity",angle:-90,position:"insideLeft",style:{textAnchor:"middle",fill:"#666"}}}),jsxRuntimeExports.jsx(Tooltip,{formatter:_d,contentStyle:{backgroundColor:"rgba(255, 255, 255, 0.95)",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)",border:"none"}}),jsxRuntimeExports.jsx(Legend,{layout:"horizontal",verticalAlign:"top",align:"center",wrapperStyle:{paddingBottom:"20px"}}),Object.keys(EMOTION_COLORS).filter(tp=>Uo().some(ep=>ep[tp]!==void 0)).slice(0,5).map((tp,ep)=>jsxRuntimeExports.jsx(Area,{type:"monotone",dataKey:tp,stackId:"1",stroke:EMOTION_COLORS[tp],fill:`${EMOTION_COLORS[tp]}50`,animationBegin:200+ep*100,animationDuration:1500},tp))]})})})})]}),sn==="comparison"&&jsxRuntimeExports.jsxs(Card,{className:"overflow-hidden bg-white border-gray-200 shadow-md",children:[jsxRuntimeExports.jsxs(CardHeader,{className:"border-b border-gray-100 bg-gradient-to-r from-green-50 to-blue-50",children:[jsxRuntimeExports.jsx(CardTitle,{className:"text-gray-800",children:"Voice vs. Text Therapy Comparison"}),jsxRuntimeExports.jsx(CardDescription,{children:"Compare emotional patterns between voice and text therapy sessions"})]}),jsxRuntimeExports.jsx(CardContent,{className:"pt-6",children:jsxRuntimeExports.jsx("div",{className:"h-[400px]",children:jsxRuntimeExports.jsx(ResponsiveContainer,{width:"100%",height:"100%",children:jsxRuntimeExports.jsxs(BarChart,{data:mo(),margin:{top:10,right:30,left:20,bottom:20},barGap:8,barCategoryGap:20,children:[jsxRuntimeExports.jsx(CartesianGrid,{strokeDasharray:"3 3",stroke:"#f0f0f0",vertical:!1}),jsxRuntimeExports.jsx(XAxis,{dataKey:"emotion",tick:{fontSize:12},tickFormatter:tp=>tp.charAt(0).toUpperCase()+tp.slice(1)}),jsxRuntimeExports.jsx(YAxis,{label:{value:"Frequency",angle:-90,position:"insideLeft",style:{textAnchor:"middle",fill:"#666"}}}),jsxRuntimeExports.jsx(Tooltip,{formatter:_d,contentStyle:{backgroundColor:"rgba(255, 255, 255, 0.95)",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)",border:"none"}}),jsxRuntimeExports.jsx(Legend,{}),jsxRuntimeExports.jsx(Bar,{dataKey:"voice",name:"Voice Therapy",fill:"#5C6BC0",radius:[4,4,0,0],animationBegin:200,animationDuration:1500}),jsxRuntimeExports.jsx(Bar,{dataKey:"text",name:"Text Therapy",fill:"#43A047",radius:[4,4,0,0],animationBegin:400,animationDuration:1500})]})})})})]})]},`${on}-${sn}`)}),jsxRuntimeExports.jsx(motion.div,{variants:itemVariants,className:"mt-8",children:jsxRuntimeExports.jsxs(Card,{className:"overflow-hidden bg-gradient-to-r from-indigo-50 to-blue-50 border-indigo-100 shadow-sm",children:[jsxRuntimeExports.jsx(CardHeader,{children:jsxRuntimeExports.jsx(CardTitle,{className:"text-indigo-800",children:"Therapy Insights"})}),jsxRuntimeExports.jsxs(CardContent,{children:[jsxRuntimeExports.jsx("p",{className:"text-indigo-700 mb-3",children:"Your most frequent emotions:"}),jsxRuntimeExports.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:ho().slice(0,3).map((tp,ep)=>jsxRuntimeExports.jsxs(motion.div,{className:"bg-white px-3 py-2 rounded-full shadow-sm border border-indigo-100 flex items-center",initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},transition:{delay:ep*.1+.5,type:"spring",stiffness:400,damping:15},children:[jsxRuntimeExports.jsx("div",{className:"w-3 h-3 rounded-full mr-2",style:{backgroundColor:EMOTION_COLORS[tp.name]||"#999"}}),jsxRuntimeExports.jsx("span",{className:"capitalize font-medium text-gray-800",children:tp.name}),jsxRuntimeExports.jsxs("span",{className:"ml-2 text-sm text-gray-500",children:["(",tp.value," occurrences)"]})]},tp.name))}),jsxRuntimeExports.jsx("p",{className:"text-indigo-600 text-sm",children:"Continue using both voice and text therapy sessions to build a more complete emotional profile and track your progression over time."})]})]})})]}),jsxRuntimeExports.jsx(motion.div,{className:"mt-8 pb-16",initial:{opacity:0},animate:{opacity:1},transition:{delay:.8},children:jsxRuntimeExports.jsx(Link,{href:"/",children:jsxRuntimeExports.jsx(Button,{className:"bg-indigo-600 hover:bg-indigo-700",children:"Return to Home"})})})]})}function AboutPage(){return jsxRuntimeExports.jsx("div",{className:"max-w-4xl mx-auto",children:jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:jsxRuntimeExports.jsxs(Card,{className:"bg-beige-100 mb-6",children:[jsxRuntimeExports.jsx(CardHeader,{children:jsxRuntimeExports.jsx(CardTitle,{className:"text-beige-700 text-2xl",children:"About Therapeutic AI"})}),jsxRuntimeExports.jsxs(CardContent,{className:"space-y-6",children:[jsxRuntimeExports.jsxs("section",{children:[jsxRuntimeExports.jsxs("h2",{className:"text-xl font-medium text-beige-700 mb-3 flex items-center",children:[jsxRuntimeExports.jsx(Brain,{className:"mr-2 h-5 w-5"}),"Our Mission"]}),jsxRuntimeExports.jsx("p",{className:"text-beige-600",children:"Therapeutic AI was created to provide accessible mental health support through innovative AI technology. Our platform combines cutting-edge emotion recognition with compassionate therapeutic responses, offering a safe space for users to express themselves and receive personalized guidance."})]}),jsxRuntimeExports.jsxs("section",{children:[jsxRuntimeExports.jsxs("h2",{className:"text-xl font-medium text-beige-700 mb-3 flex items-center",children:[jsxRuntimeExports.jsx(BookOpen,{className:"mr-2 h-5 w-5"}),"How It Works"]}),jsxRuntimeExports.jsx("p",{className:"text-beige-600 mb-4",children:"Our AI therapeutic system uses multiple inputs to understand your emotional state:"}),jsxRuntimeExports.jsxs("ul",{className:"list-disc list-inside space-y-2 text-beige-600 ml-4",children:[jsxRuntimeExports.jsx("li",{children:"Facial expression analysis through your camera"}),jsxRuntimeExports.jsx("li",{children:"Vocal tone detection when you speak"}),jsxRuntimeExports.jsx("li",{children:"Text content analysis from your messages"}),jsxRuntimeExports.jsx("li",{children:"Contextual understanding of conversation history"})]})]}),jsxRuntimeExports.jsxs("section",{children:[jsxRuntimeExports.jsxs("h2",{className:"text-xl font-medium text-beige-700 mb-3 flex items-center",children:[jsxRuntimeExports.jsx(Heart,{className:"mr-2 h-5 w-5"}),"Personalized Experience"]}),jsxRuntimeExports.jsx("p",{className:"text-beige-600",children:"We believe in meeting users where they are. Our platform adapts its communication style based on your age group and emotional state, providing responses that are appropriate, supportive, and helpful. Whether you're a child, teenager, or adult, our AI adjusts its language complexity and therapeutic approach to best serve you."})]}),jsxRuntimeExports.jsxs("section",{children:[jsxRuntimeExports.jsxs("h2",{className:"text-xl font-medium text-beige-700 mb-3 flex items-center",children:[jsxRuntimeExports.jsx(Shield,{className:"mr-2 h-5 w-5"}),"Privacy & Ethics"]}),jsxRuntimeExports.jsx("p",{className:"text-beige-600",children:"Your privacy is our priority. All conversations are processed locally in your browser and are not stored on our servers after your session ends. We do not share your data with third parties, and our emotion detection technology is designed with ethics and user dignity at its core."}),jsxRuntimeExports.jsxs("p",{className:"text-beige-600 mt-3",children:[jsxRuntimeExports.jsx("strong",{children:"Important Note:"})," While our AI provides therapeutic-style interactions, it is not a replacement for professional mental health services. If you're experiencing a crisis or need immediate help, please contact a licensed mental health professional."]})]})]})]})})})}var DIALOG_NAME="Dialog",[createDialogContext,createDialogScope]=createContextScope$3(DIALOG_NAME),[DialogProvider,useDialogContext]=createDialogContext(DIALOG_NAME),Dialog$1=Mt=>{const{__scopeDialog:st,children:nn,open:rn,defaultOpen:on,onOpenChange:an,modal:sn=!0}=Mt,un=reactExports.useRef(null),Xr=reactExports.useRef(null),[to=!1,uo]=useControllableState({prop:rn,defaultProp:on,onChange:an});return jsxRuntimeExports.jsx(DialogProvider,{scope:st,triggerRef:un,contentRef:Xr,contentId:useId(),titleId:useId(),descriptionId:useId(),open:to,onOpenChange:uo,onOpenToggle:reactExports.useCallback(()=>uo(hn=>!hn),[uo]),modal:sn,children:nn})};Dialog$1.displayName=DIALOG_NAME;var TRIGGER_NAME="DialogTrigger",DialogTrigger=reactExports.forwardRef((Mt,st)=>{const{__scopeDialog:nn,...rn}=Mt,on=useDialogContext(TRIGGER_NAME,nn),an=useComposedRefs(st,on.triggerRef);return jsxRuntimeExports.jsx(Primitive.button,{type:"button","aria-haspopup":"dialog","aria-expanded":on.open,"aria-controls":on.contentId,"data-state":getState(on.open),...rn,ref:an,onClick:composeEventHandlers(Mt.onClick,on.onOpenToggle)})});DialogTrigger.displayName=TRIGGER_NAME;var PORTAL_NAME="DialogPortal",[PortalProvider,usePortalContext]=createDialogContext(PORTAL_NAME,{forceMount:void 0}),DialogPortal$1=Mt=>{const{__scopeDialog:st,forceMount:nn,children:rn,container:on}=Mt,an=useDialogContext(PORTAL_NAME,st);return jsxRuntimeExports.jsx(PortalProvider,{scope:st,forceMount:nn,children:reactExports.Children.map(rn,sn=>jsxRuntimeExports.jsx(Presence,{present:nn||an.open,children:jsxRuntimeExports.jsx(Portal$2,{asChild:!0,container:on,children:sn})}))})};DialogPortal$1.displayName=PORTAL_NAME;var OVERLAY_NAME="DialogOverlay",DialogOverlay$1=reactExports.forwardRef((Mt,st)=>{const nn=usePortalContext(OVERLAY_NAME,Mt.__scopeDialog),{forceMount:rn=nn.forceMount,...on}=Mt,an=useDialogContext(OVERLAY_NAME,Mt.__scopeDialog);return an.modal?jsxRuntimeExports.jsx(Presence,{present:rn||an.open,children:jsxRuntimeExports.jsx(DialogOverlayImpl,{...on,ref:st})}):null});DialogOverlay$1.displayName=OVERLAY_NAME;var DialogOverlayImpl=reactExports.forwardRef((Mt,st)=>{const{__scopeDialog:nn,...rn}=Mt,on=useDialogContext(OVERLAY_NAME,nn);return jsxRuntimeExports.jsx(ReactRemoveScroll,{as:Slot,allowPinchZoom:!0,shards:[on.contentRef],children:jsxRuntimeExports.jsx(Primitive.div,{"data-state":getState(on.open),...rn,ref:st,style:{pointerEvents:"auto",...rn.style}})})}),CONTENT_NAME="DialogContent",DialogContent$1=reactExports.forwardRef((Mt,st)=>{const nn=usePortalContext(CONTENT_NAME,Mt.__scopeDialog),{forceMount:rn=nn.forceMount,...on}=Mt,an=useDialogContext(CONTENT_NAME,Mt.__scopeDialog);return jsxRuntimeExports.jsx(Presence,{present:rn||an.open,children:an.modal?jsxRuntimeExports.jsx(DialogContentModal,{...on,ref:st}):jsxRuntimeExports.jsx(DialogContentNonModal,{...on,ref:st})})});DialogContent$1.displayName=CONTENT_NAME;var DialogContentModal=reactExports.forwardRef((Mt,st)=>{const nn=useDialogContext(CONTENT_NAME,Mt.__scopeDialog),rn=reactExports.useRef(null),on=useComposedRefs(st,nn.contentRef,rn);return reactExports.useEffect(()=>{const an=rn.current;if(an)return hideOthers(an)},[]),jsxRuntimeExports.jsx(DialogContentImpl,{...Mt,ref:on,trapFocus:nn.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:composeEventHandlers(Mt.onCloseAutoFocus,an=>{var sn;an.preventDefault(),(sn=nn.triggerRef.current)==null||sn.focus()}),onPointerDownOutside:composeEventHandlers(Mt.onPointerDownOutside,an=>{const sn=an.detail.originalEvent,un=sn.button===0&&sn.ctrlKey===!0;(sn.button===2||un)&&an.preventDefault()}),onFocusOutside:composeEventHandlers(Mt.onFocusOutside,an=>an.preventDefault())})}),DialogContentNonModal=reactExports.forwardRef((Mt,st)=>{const nn=useDialogContext(CONTENT_NAME,Mt.__scopeDialog),rn=reactExports.useRef(!1),on=reactExports.useRef(!1);return jsxRuntimeExports.jsx(DialogContentImpl,{...Mt,ref:st,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:an=>{var sn,un;(sn=Mt.onCloseAutoFocus)==null||sn.call(Mt,an),an.defaultPrevented||(rn.current||(un=nn.triggerRef.current)==null||un.focus(),an.preventDefault()),rn.current=!1,on.current=!1},onInteractOutside:an=>{var Xr,to;(Xr=Mt.onInteractOutside)==null||Xr.call(Mt,an),an.defaultPrevented||(rn.current=!0,an.detail.originalEvent.type==="pointerdown"&&(on.current=!0));const sn=an.target;((to=nn.triggerRef.current)==null?void 0:to.contains(sn))&&an.preventDefault(),an.detail.originalEvent.type==="focusin"&&on.current&&an.preventDefault()}})}),DialogContentImpl=reactExports.forwardRef((Mt,st)=>{const{__scopeDialog:nn,trapFocus:rn,onOpenAutoFocus:on,onCloseAutoFocus:an,...sn}=Mt,un=useDialogContext(CONTENT_NAME,nn),Xr=reactExports.useRef(null),to=useComposedRefs(st,Xr);return useFocusGuards(),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(FocusScope,{asChild:!0,loop:!0,trapped:rn,onMountAutoFocus:on,onUnmountAutoFocus:an,children:jsxRuntimeExports.jsx(DismissableLayer,{role:"dialog",id:un.contentId,"aria-describedby":un.descriptionId,"aria-labelledby":un.titleId,"data-state":getState(un.open),...sn,ref:to,onDismiss:()=>un.onOpenChange(!1)})}),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(TitleWarning,{titleId:un.titleId}),jsxRuntimeExports.jsx(DescriptionWarning,{contentRef:Xr,descriptionId:un.descriptionId})]})]})}),TITLE_NAME="DialogTitle",DialogTitle$1=reactExports.forwardRef((Mt,st)=>{const{__scopeDialog:nn,...rn}=Mt,on=useDialogContext(TITLE_NAME,nn);return jsxRuntimeExports.jsx(Primitive.h2,{id:on.titleId,...rn,ref:st})});DialogTitle$1.displayName=TITLE_NAME;var DESCRIPTION_NAME="DialogDescription",DialogDescription$1=reactExports.forwardRef((Mt,st)=>{const{__scopeDialog:nn,...rn}=Mt,on=useDialogContext(DESCRIPTION_NAME,nn);return jsxRuntimeExports.jsx(Primitive.p,{id:on.descriptionId,...rn,ref:st})});DialogDescription$1.displayName=DESCRIPTION_NAME;var CLOSE_NAME="DialogClose",DialogClose=reactExports.forwardRef((Mt,st)=>{const{__scopeDialog:nn,...rn}=Mt,on=useDialogContext(CLOSE_NAME,nn);return jsxRuntimeExports.jsx(Primitive.button,{type:"button",...rn,ref:st,onClick:composeEventHandlers(Mt.onClick,()=>on.onOpenChange(!1))})});DialogClose.displayName=CLOSE_NAME;function getState(Mt){return Mt?"open":"closed"}var TITLE_WARNING_NAME="DialogTitleWarning",[WarningProvider,useWarningContext]=createContext2(TITLE_WARNING_NAME,{contentName:CONTENT_NAME,titleName:TITLE_NAME,docsSlug:"dialog"}),TitleWarning=({titleId:Mt})=>{const st=useWarningContext(TITLE_WARNING_NAME),nn=`\`${st.contentName}\` requires a \`${st.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${st.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${st.docsSlug}`;return reactExports.useEffect(()=>{Mt&&(document.getElementById(Mt)||console.error(nn))},[nn,Mt]),null},DESCRIPTION_WARNING_NAME="DialogDescriptionWarning",DescriptionWarning=({contentRef:Mt,descriptionId:st})=>{const rn=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${useWarningContext(DESCRIPTION_WARNING_NAME).contentName}}.`;return reactExports.useEffect(()=>{var an;const on=(an=Mt.current)==null?void 0:an.getAttribute("aria-describedby");st&&on&&(document.getElementById(st)||console.warn(rn))},[rn,Mt,st]),null},Root=Dialog$1,Trigger=DialogTrigger,Portal=DialogPortal$1,Overlay=DialogOverlay$1,Content=DialogContent$1,Title=DialogTitle$1,Description=DialogDescription$1,Close=DialogClose;const Dialog=Root,DialogPortal=Portal,DialogOverlay=reactExports.forwardRef(({className:Mt,...st},nn)=>jsxRuntimeExports.jsx(Overlay,{ref:nn,className:cn("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",Mt),...st}));DialogOverlay.displayName=Overlay.displayName;const DialogContent=reactExports.forwardRef(({className:Mt,children:st,...nn},rn)=>jsxRuntimeExports.jsxs(DialogPortal,{children:[jsxRuntimeExports.jsx(DialogOverlay,{}),jsxRuntimeExports.jsxs(Content,{ref:rn,className:cn("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",Mt),"aria-describedby":nn["aria-describedby"]||"dialog-description",...nn,children:[!nn["aria-describedby"]&&jsxRuntimeExports.jsx("div",{id:"dialog-description",className:"sr-only",children:"Dialog content"}),st,jsxRuntimeExports.jsxs(Close,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[jsxRuntimeExports.jsx(X$1,{className:"h-4 w-4"}),jsxRuntimeExports.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));DialogContent.displayName=Content.displayName;const DialogHeader=({className:Mt,...st})=>jsxRuntimeExports.jsx("div",{className:cn("flex flex-col space-y-1.5 text-center sm:text-left",Mt),...st});DialogHeader.displayName="DialogHeader";const DialogFooter=({className:Mt,...st})=>jsxRuntimeExports.jsx("div",{className:cn("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",Mt),...st});DialogFooter.displayName="DialogFooter";const DialogTitle=reactExports.forwardRef(({className:Mt,...st},nn)=>jsxRuntimeExports.jsx(Title,{ref:nn,className:cn("text-lg font-semibold leading-none tracking-tight",Mt),...st}));DialogTitle.displayName=Title.displayName;const DialogDescription=reactExports.forwardRef(({className:Mt,...st},nn)=>jsxRuntimeExports.jsx(Description,{ref:nn,className:cn("text-sm text-muted-foreground",Mt),...st}));DialogDescription.displayName=Description.displayName;const modulesContent={"Understanding Emotions":{title:"Understanding Emotions: Your Mind's Messaging System",sections:[{title:"What Are Emotions?",content:`Emotions are biological states associated with thoughts, feelings, behavioral responses, and varying degrees of pleasure or displeasure. They serve as important signals that communicate information about our internal state and help guide our decisions and behaviors.

Emotions are neither good nor bad - they're information. Just like physical pain tells you something is wrong with your body, emotions tell you something about your psychological state.`,type:"text"},{title:"The Purpose of Different Emotions",content:` Happiness: Signals that something is beneficial to us and encourages us to continue engaging with whatever is causing it.

 Sadness: Indicates loss and helps us process it, while also signaling to others that we need support.

 Anger: Alerts us to injustice or boundary violations and mobilizes energy to address threats.

 Fear: Warns us of potential danger and prepares the body for flight or fight responses.

 Surprise: Focuses our attention on new information that may require quick adjustment.

 Disgust: Protects us from potentially harmful or contaminated substances.`,type:"text"},{title:"Reflection Exercise: Emotion Journal",content:`For one week, take a few minutes each day to write down:

1. What emotions you experienced
2. What triggered them
3. How you responded
4. What message the emotion might be trying to send you

At the end of the week, look for patterns in your emotional responses and triggers.`,type:"exercise"}],benefits:["Improved emotional awareness","Better understanding of your reactions","Enhanced communication about feelings","Reduced judgment of emotional experiences"],suitableFor:{emotions:["neutral","calm","happy","sad","angry","fearful","surprised","disgusted"],vocalTones:["neutral","calm","excited","sad","angry","anxious","uncertain"]},relatedModules:["Mindfulness Basics","Managing Anger","Coping with Sadness"]},"Breathing Techniques":{title:"Breathing Techniques: Your Anchor in Emotional Storms",sections:[{title:"The Science of Breath",content:"Your breath is directly connected to your autonomic nervous system - the system that controls your fight-or-flight and rest-and-digest responses. By changing how you breathe, you can directly influence your physiological state and shift from stress to calm.",type:"text"},{title:"4-7-8 Breathing",content:`This technique acts like a natural tranquilizer for your nervous system:

1. Sit or lie in a comfortable position
2. Place the tip of your tongue against the ridge behind your upper front teeth
3. Exhale completely through your mouth, making a whoosh sound
4. Close your mouth and inhale quietly through your nose to a count of 4
5. Hold your breath for a count of 7
6. Exhale completely through your mouth to a count of 8
7. Repeat this cycle 3-4 times`,type:"technique"},{title:"Box Breathing",content:`Used by Navy SEALs to stay calm under pressure:

1. Inhale slowly through your nose for 4 counts
2. Hold your breath for 4 counts
3. Exhale slowly through your mouth for 4 counts
4. Hold your breath for 4 counts
5. Repeat for 5 minutes or until you feel calmer`,type:"technique"},{title:"Belly Breathing",content:`This technique helps activate your parasympathetic nervous system:

1. Sit or lie comfortably with one hand on your chest and the other on your belly
2. Breathe in slowly through your nose, feeling your belly rise while your chest remains relatively still
3. Exhale slowly through pursed lips
4. Focus on the sensation of your breath and the movement of your belly
5. Continue for 3-5 minutes`,type:"technique"}],benefits:["Immediate reduction in anxiety and stress","Lower blood pressure and heart rate","Improved focus and concentration","Better emotional regulation in challenging situations"],suitableFor:{emotions:["angry","fearful","surprised","disgusted"],vocalTones:["angry","anxious","uncertain","excited"]},relatedModules:["Managing Anger","Understanding Anxiety","Mindfulness Basics"]},"Gratitude Practice":{title:"Gratitude Practice: Training Your Brain to Notice the Good",sections:[{title:"The Science of Gratitude",content:"Numerous studies show that practicing gratitude increases happiness, reduces depression, strengthens relationships, improves sleep, and even boosts immune function. When we consciously focus on things we're grateful for, we're training our brain to notice positive aspects of life, which counteracts our natural negativity bias.",type:"text"},{title:"Daily Gratitude Journal",content:`Each evening, write down three specific things you're grateful for that day. They can be small (a delicious meal) or significant (a supportive relationship). For each item, write:

1. What you're grateful for
2. Why you're grateful for it
3. How it made you feel

Being specific and detailed helps activate the positive emotions associated with gratitude.`,type:"exercise"},{title:"Gratitude Letter",content:"Think of someone who has positively impacted your life but whom you've never properly thanked. Write them a letter expressing your gratitude in detail. Explain what they did, why it was meaningful, and how it affected your life. You can choose to send the letter or keep it for yourself - the act of writing it is powerful either way.",type:"exercise"},{title:"Gratitude Meditation",content:`Find a quiet place and sit comfortably. Close your eyes and take a few deep breaths to center yourself. Then:

1. Bring to mind something or someone you're grateful for
2. Notice any sensations in your body as you hold this gratitude in your awareness
3. Silently express thanks, allowing yourself to fully experience the positive feelings
4. Continue with different things you're grateful for

Start with 5 minutes and gradually increase the time.`,type:"technique"}],benefits:["Reduced depressive symptoms","Increased sense of life satisfaction","Improved relationships","Greater resilience during challenging times"],suitableFor:{emotions:["sad","neutral","angry"],vocalTones:["sad","neutral","uncertain"]},relatedModules:["Coping with Sadness","Mindful Happiness"]},"Managing Anger":{title:"Managing Anger: Transforming Fire into Productive Energy",sections:[{title:"Understanding Your Anger",content:"Anger is a natural emotion that serves important purposes - it alerts us to injustice, boundary violations, and threats. The goal isn't to eliminate anger but to express it in healthy, constructive ways. Anger often masks other emotions like hurt, fear, or shame, which is why understanding its triggers is essential.",type:"text"},{title:"Identifying Your Anger Triggers",content:`Keep an anger journal for one week, noting:

1. What situations triggered your anger
2. Physical sensations you experienced (increased heart rate, tension, etc.)
3. Thoughts that accompanied the anger
4. What you did in response
5. The underlying emotions beneath the anger (if any)

Look for patterns to become more aware of your personal triggers.`,type:"exercise"},{title:"The STOP Technique",content:`When you feel anger rising, practice the STOP technique:

S - Stop what you're doing
T - Take a deep breath
O - Observe what's happening in your body and mind
P - Proceed with a more mindful response

This creates a crucial pause between stimulus and response, giving you choice rather than reacting automatically.`,type:"technique"},{title:"Healthy Expression",content:`Constructive ways to express anger include:

 Using 'I' statements: "I feel frustrated when..." instead of "You always..."
 Physical activity: Exercise releases tension and stress hormones
 Writing: Express your feelings in a letter you don't send
 Timeout: Remove yourself temporarily until you can respond calmly
 Creative outlets: Channel anger into art, music, or other creative pursuits`,type:"technique"}],benefits:["Improved relationships","Better problem-solving abilities","Reduced stress and anxiety","Increased emotional intelligence"],suitableFor:{emotions:["angry","disgusted"],vocalTones:["angry","excited"]},relatedModules:["Breathing Techniques","Understanding Emotions"]},"Coping with Sadness":{title:"Coping with Sadness: Finding Light in Dark Times",sections:[{title:"Sadness vs. Depression",content:"Sadness is a normal, healthy emotion that responds to loss, disappointment, or difficult life changes. Unlike depression, sadness usually passes with time and doesn't persistently interfere with daily functioning. While sadness is uncomfortable, it serves important purposes - it helps us process loss, signals to others that we need support, and deepens our capacity for empathy.",type:"text"},{title:"The Emotional Wave Technique",content:`When sadness arises, try this practice:

1. Find a quiet place where you won't be disturbed
2. Close your eyes and notice where you feel sadness in your body
3. Visualize the feeling as a wave - it rises, crests, and eventually subsides
4. Rather than resisting the wave, imagine riding it
5. Breathe deeply and allow the feeling to be present without judgment
6. Notice that the intensity naturally changes over time

This practice helps you build tolerance for difficult emotions.`,type:"technique"},{title:"Behavioral Activation",content:`Sadness often leads to withdrawal, which can worsen our mood. Behavioral activation counters this cycle:

1. Make a list of activities that normally bring you joy or satisfaction
2. When feeling sad, choose one small activity from your list
3. Commit to doing it even if you don't feel motivated
4. Notice how your mood shifts, even slightly, during or after the activity
5. Gradually increase the frequency and variety of activities

The key insight: action often comes before motivation, not after it.`,type:"exercise"},{title:"Self-Compassion Practice",content:`When experiencing sadness, try this three-step practice:

1. Mindfulness: Acknowledge your pain without judgment ("This is a moment of suffering")
2. Common humanity: Remind yourself that suffering is universal ("Many others feel this way too")
3. Self-kindness: Offer yourself comfort ("May I be kind to myself in this difficult time")

Place a hand on your heart as you say these phrases to yourself.`,type:"exercise"}],benefits:["Increased emotional resilience","Better ability to process difficult experiences","Improved self-compassion","Reduced likelihood of depression"],suitableFor:{emotions:["sad"],vocalTones:["sad","uncertain"]},relatedModules:["Gratitude Practice","Understanding Emotions","Mindfulness Basics"]},"Mindful Happiness":{title:"Mindful Happiness: Savoring the Present Moment",sections:[{title:"Beyond Fleeting Pleasure",content:"True happiness isn't just about feeling good momentarily - it's about cultivating a deeper sense of contentment and meaning that persists even when life is challenging. Mindful happiness involves noticing and savoring positive experiences while maintaining awareness that all emotions and states are temporary.",type:"text"},{title:"The Savoring Practice",content:`Savoring helps us extract maximum enjoyment from positive experiences:

1. Choose an everyday pleasant activity (eating a meal, taking a shower, walking outside)
2. Engage all your senses - what do you see, hear, feel, smell, and taste?
3. Slow down and notice details you normally miss
4. Mentally note what you find pleasurable about the experience
5. When your mind wanders, gently bring it back to the sensory experience

Practice daily with different activities.`,type:"technique"},{title:"Three Good Things Exercise",content:`This evidence-based practice boosts happiness and reduces depression:

1. Each night before bed, write down three good things that happened that day
2. They can be significant events or small moments
3. For each good thing, write down:
   - What happened
   - Your role in bringing it about
   - Why it was meaningful to you

Doing this consistently trains your brain to notice and remember positive experiences.`,type:"exercise"},{title:"Loving-Kindness Meditation",content:`This practice cultivates goodwill toward yourself and others:

1. Sit comfortably and take a few deep breaths
2. Bring to mind someone you care about deeply
3. Silently repeat these phrases:
   - May you be happy
   - May you be healthy
   - May you be safe
   - May you live with ease
4. Direct the same wishes toward yourself
5. Gradually extend to acquaintances, difficult people, and all beings

Start with 5 minutes daily and increase gradually.`,type:"technique"}],benefits:["Increased positive emotions","Greater appreciation for everyday experiences","Improved relationship satisfaction","Enhanced psychological resilience"],suitableFor:{emotions:["happy","neutral","calm"],vocalTones:["excited","neutral","calm"]},relatedModules:["Gratitude Practice","Mindfulness Basics"]},"Understanding Anxiety":{title:"Understanding Anxiety: Making Friends with Fear",sections:[{title:"The Anxiety Response",content:"Anxiety is your body's natural response to perceived threats. It involves physical sensations (racing heart, shallow breathing), thoughts (worry, catastrophizing), and behaviors (avoidance, seeking reassurance). While uncomfortable, anxiety is designed to protect you by preparing your body to respond to danger. Problems arise when this system activates too frequently or intensely, or in situations that don't warrant a threat response.",type:"text"},{title:"Anxiety in Your Body",content:`Understanding the physical manifestations of anxiety can help you recognize it earlier:

 Increased heart rate and breathing
 Muscle tension
 Digestive changes (butterflies, nausea)
 Sweating or chills
 Dizziness or lightheadedness
 Difficulty concentrating

These sensations are caused by adrenaline and cortisol - hormones that prepare your body for 'fight or flight'.`,type:"text"},{title:"The Worry Record",content:`When experiencing anxiety, complete this exercise:

1. What am I worried about?
2. How likely is this worry to come true? (0-100%)
3. What's the worst that could happen?
4. Could I cope with that? How?
5. What's most likely to actually happen?
6. What's a more balanced perspective?

Regularly practicing this helps you develop more realistic thought patterns.`,type:"exercise"},{title:"Grounding Technique: 5-4-3-2-1",content:`When anxiety spikes, use this sensory awareness exercise:

5 - Notice FIVE things you can see
4 - Notice FOUR things you can touch/feel
3 - Notice THREE things you can hear
2 - Notice TWO things you can smell
1 - Notice ONE thing you can taste

This technique interrupts the anxiety cycle by anchoring you in your present sensory experience.`,type:"technique"}],benefits:["Reduced physical symptoms of anxiety","Improved ability to distinguish between true and false alarms","Less avoidance of anxiety-provoking situations","Better emotional regulation skills"],suitableFor:{emotions:["fearful","surprised"],vocalTones:["anxious","uncertain"]},relatedModules:["Breathing Techniques","Mindfulness Basics"]},"Mindfulness Basics":{title:"Mindfulness Basics: Training Your Attention Muscle",sections:[{title:"What is Mindfulness?",content:"Mindfulness is the practice of paying attention to your present moment experience with openness, curiosity, and acceptance. It involves observing your thoughts, emotions, and sensations without getting caught up in them or judging them as good or bad. Research shows mindfulness practice changes brain structure and function in areas related to attention, emotional regulation, and self-awareness.",type:"text"},{title:"Basic Breath Awareness",content:`This foundational practice trains attention:

1. Sit comfortably with your back straight but not rigid
2. Close your eyes or lower your gaze
3. Bring your attention to the physical sensations of breathing
4. Notice where you feel your breath most prominently (nose, chest, abdomen)
5. When your mind wanders (which is normal), gently return your attention to the breath

Start with 5 minutes daily and gradually increase.`,type:"technique"},{title:"Mindful Eating Exercise",content:`This practice helps develop sensory awareness:

1. Choose a small piece of food (raisin, berry, nut)
2. Examine it carefully, noticing colors, textures, and shapes
3. Smell it, noticing any aromas and your body's reaction
4. Place it in your mouth without chewing, exploring the sensations
5. Slowly begin chewing, noticing flavors, textures, and how they change
6. Swallow consciously, tracking the sensations

This exercise can be extended to regular meals.`,type:"exercise"},{title:"R.A.I.N. for Difficult Emotions",content:`When challenging emotions arise, try this approach:

R - Recognize what's happening ("I'm feeling anxiety")
A - Allow the experience to be there, without trying to change it
I - Investigate with kindness ("Where do I feel this in my body?")
N - Non-identification ("This is a feeling, not who I am")

This framework helps you relate to emotions with greater balance and compassion.`,type:"technique"}],benefits:["Reduced stress and anxiety","Improved attention and concentration","Greater emotional regulation","Enhanced self-awareness"],suitableFor:{emotions:["calm","neutral","happy","sad","angry","fearful"],vocalTones:["calm","neutral","uncertain","anxious"]},relatedModules:["Breathing Techniques","Body Scan Meditation","Understanding Emotions"]},"Body Scan Meditation":{title:"Body Scan Meditation: Reconnecting with Your Physical Self",sections:[{title:"Mind-Body Connection",content:"The body scan meditation helps rebuild awareness of the mind-body connection, which is often lost in our busy, thought-dominated lives. This practice helps you notice subtle physical sensations, areas of tension, and emotional feelings as they manifest in the body. Regular practice can improve body awareness, reduce stress, enhance sleep quality, and help manage chronic pain.",type:"text"},{title:"Guided Body Scan Practice",content:`Try this 10-minute practice:

1. Lie down in a comfortable position or sit with your back supported
2. Close your eyes and take several deep breaths
3. Bring attention to your feet, noticing any sensations (temperature, pressure, tingling)
4. Slowly move your attention upward through your body - ankles, calves, knees, thighs
5. Continue through your entire body, spending about 30 seconds with each area
6. For each region, first notice sensations, then intentionally relax that area
7. If you notice pain or discomfort, acknowledge it with kindness before moving on
8. End by becoming aware of your body as a whole

Practice regularly, ideally daily.`,type:"technique"},{title:"Mini Body Scan for Stress",content:`This shorter version can be used throughout the day, especially during stressful moments:

1. Pause what you're doing and take a deep breath
2. Quickly scan your body for areas of tension (common spots include jaw, shoulders, neck, hands)
3. As you exhale, imagine sending the breath to those tense areas
4. Consciously release the tension with each exhalation
5. Continue for 3-5 breath cycles

This practice helps prevent stress accumulation throughout the day.`,type:"technique"},{title:"Body Mapping Exercise",content:`This reflective practice deepens body awareness:

1. On a piece of paper, draw a simple outline of a human body
2. After a body scan meditation, note where you felt different sensations
3. Use colors to represent different feelings (e.g., red for tension, blue for relaxation)
4. Add notes about specific sensations in different areas
5. Observe patterns over time by keeping these maps for reference

This visual record helps you recognize how emotions and stress manifest in your unique body.`,type:"exercise"}],benefits:["Increased body awareness","Reduced physical tension","Improved sleep quality","Better stress management"],suitableFor:{emotions:["calm","neutral","fearful"],vocalTones:["calm","neutral","anxious"]},relatedModules:["Mindfulness Basics","Breathing Techniques"]},"Sharing Positivity":{title:"Sharing Positivity: Extending Your Joy to Others",sections:[{title:"The Ripple Effect",content:"Positive emotions are contagious. Research shows that happiness can spread through social networks up to three degrees of separation - affecting friends of friends of friends! When you share your positive emotions and engage in acts of kindness, you not only boost others' wellbeing but also enhance your own happiness, creating a mutually reinforcing cycle of positivity.",type:"text"},{title:"Active-Constructive Responding",content:`When someone shares good news with you, your response can either strengthen or undermine your relationship:

1. Active-Constructive (Best): Enthusiastic, supportive response that asks for details
   Example: "That's amazing! Tell me more about how it happened!"

2. Passive-Constructive: Supportive but understated
   Example: "That's nice."

3. Active-Destructive: Pointing out negatives
   Example: "Sounds like a lot of responsibility. Are you sure you can handle it?"

4. Passive-Destructive: Ignoring or changing the subject
   Example: "By the way, did you see that new movie?"

Practice responding to others' good news with genuine enthusiasm and interest.`,type:"technique"},{title:"Random Acts of Kindness Challenge",content:`For one week, commit to performing three acts of kindness each day. They can be small (complimenting a stranger) or larger (volunteering time). For each act, note:

1. What you did
2. The recipient's reaction (if observable)
3. How it made you feel

At the end of the week, reflect on which acts were most meaningful to you and why.`,type:"exercise"},{title:"Strengths Spotting",content:`This practice helps you recognize and acknowledge others' positive qualities:

1. Each day, identify one strength or positive quality in someone you interact with
2. Share your observation with them specifically ("I really appreciate how thoughtful you are about...")
3. Note how they respond and how the interaction affects your relationship

Making this a habit trains you to notice the good in others and strengthens social connections.`,type:"exercise"}],benefits:["Stronger interpersonal relationships","Increased personal happiness","Creation of positive social environments","Enhanced sense of meaning and purpose"],suitableFor:{emotions:["happy","calm"],vocalTones:["excited","calm"]},relatedModules:["Mindful Happiness","Gratitude Practice"]}};function ModulesPage(){const[Mt,st]=reactExports.useState(null),[nn,rn]=reactExports.useState(!1),[on,an]=reactExports.useState("neutral"),[sn,un]=reactExports.useState(null),[Xr,to]=reactExports.useState(null),[uo,hn]=reactExports.useState([]);reactExports.useEffect(()=>{const ho=getEmotionHistory(),mo=getVocalToneHistory$1(),Uo={};ho.forEach(sp=>{Uo[sp.emotion]=(Uo[sp.emotion]||0)+1});const _d={};mo.forEach(sp=>{_d[sp.tone]=(_d[sp.tone]||0)+1});let tp=0,ep="neutral",np=0,rp=null;Object.entries(Uo).forEach(([sp,up])=>{up>tp?(np=tp,rp=ep,tp=up,ep=sp):up>np&&(np=up,rp=sp)});let ip=0,op=null;Object.entries(_d).forEach(([sp,up])=>{up>ip&&(ip=up,op=sp)}),an(ep),un(rp),to(op);const ap=fn(ep,rp,op);hn(ap)},[]);const fn=(ho,mo,Uo)=>{const _d={};return Object.keys(modulesContent).forEach(ep=>{_d[ep]=0}),Object.entries(modulesContent).forEach(([ep,np])=>{np.suitableFor.emotions.includes(ho)&&(_d[ep]+=3),mo&&np.suitableFor.emotions.includes(mo)&&(_d[ep]+=2),Uo&&np.suitableFor.vocalTones.includes(Uo)&&(_d[ep]+=1)}),Object.entries(_d).sort((ep,np)=>np[1]-ep[1]).map(ep=>ep[0]).slice(0,3)},co=ho=>uo.includes(ho),lo=ho=>{st(modulesContent[ho]),rn(!0)},fo={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.1}}};return jsxRuntimeExports.jsxs("div",{className:"max-w-5xl mx-auto px-4 py-6 animate-fadeIn",children:[jsxRuntimeExports.jsxs(Card,{className:"mb-6 shadow-md",children:[jsxRuntimeExports.jsxs(CardHeader,{children:[jsxRuntimeExports.jsx(CardTitle,{className:"text-2xl",children:"Mental Health Modules"}),jsxRuntimeExports.jsx(CardDescription,{children:"Educational resources and activities tailored to your emotional profile"})]}),jsxRuntimeExports.jsxs(CardContent,{children:[jsxRuntimeExports.jsxs("div",{className:"mb-6 p-4 bg-secondary/30 rounded-lg border border-secondary/50",children:[jsxRuntimeExports.jsxs("h3",{className:"font-medium flex items-center mb-2",children:[jsxRuntimeExports.jsx(Lightbulb,{className:"h-5 w-5 mr-2 text-amber-500"}),"Personalized Recommendation"]}),jsxRuntimeExports.jsxs("p",{children:["Based on your emotional patterns, we've recommended modules that may be most helpful for you.",on&&jsxRuntimeExports.jsxs("span",{className:"inline-flex items-center bg-secondary/50 px-2 py-1 rounded-md ml-2",children:[jsxRuntimeExports.jsx("span",{className:"font-medium mr-1",children:"Primary emotion:"}),jsxRuntimeExports.jsxs("span",{className:"capitalize flex items-center gap-1",children:[jsxRuntimeExports.jsx("span",{children:on}),jsxRuntimeExports.jsx("span",{className:"text-lg ml-1",children:EMOTION_ICONS[on]||""})]})]}),sn&&jsxRuntimeExports.jsxs("span",{className:"inline-flex items-center bg-secondary/50 px-2 py-1 rounded-md ml-2",children:[jsxRuntimeExports.jsx("span",{className:"font-medium mr-1",children:"Secondary:"}),jsxRuntimeExports.jsxs("span",{className:"capitalize flex items-center gap-1",children:[jsxRuntimeExports.jsx("span",{children:sn}),jsxRuntimeExports.jsx("span",{className:"text-lg ml-1",children:EMOTION_ICONS[sn]||""})]})]})]})]}),jsxRuntimeExports.jsxs(Tabs,{defaultValue:on!=="neutral"?on:"all",children:[jsxRuntimeExports.jsxs(TabsList,{className:"mb-4 bg-secondary/30 p-1",children:[jsxRuntimeExports.jsx(TabsTrigger,{value:"all",children:"All Modules"}),jsxRuntimeExports.jsx(TabsTrigger,{value:"happy",children:"Happiness"}),jsxRuntimeExports.jsx(TabsTrigger,{value:"sad",children:"Sadness"}),jsxRuntimeExports.jsx(TabsTrigger,{value:"angry",children:"Anger"}),jsxRuntimeExports.jsx(TabsTrigger,{value:"fearful",children:"Anxiety"}),jsxRuntimeExports.jsx(TabsTrigger,{value:"calm",children:"Mindfulness"})]}),jsxRuntimeExports.jsx(TabsContent,{value:"all",children:jsxRuntimeExports.jsxs(motion.div,{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",variants:fo,initial:"hidden",animate:"show",children:[jsxRuntimeExports.jsx(ModuleCard,{title:"Understanding Emotions",description:"Learn to identify and understand different emotions and their purpose in your life.",icon:jsxRuntimeExports.jsx(Brain,{className:"h-8 w-8 text-purple-500"}),category:"Education",time:"15 min",recommended:co("Understanding Emotions"),onOpenContent:()=>lo("Understanding Emotions")}),jsxRuntimeExports.jsx(ModuleCard,{title:"Breathing Techniques",description:"Simple breathing exercises to help manage stress and anxiety in the moment.",icon:jsxRuntimeExports.jsx(ShieldPlus,{className:"h-8 w-8 text-blue-500"}),category:"Exercise",time:"5 min",recommended:co("Breathing Techniques"),onOpenContent:()=>lo("Breathing Techniques")}),jsxRuntimeExports.jsx(ModuleCard,{title:"Gratitude Practice",description:"Exercises to cultivate gratitude and positive thinking in your daily life.",icon:jsxRuntimeExports.jsx(Heart,{className:"h-8 w-8 text-red-500"}),category:"Exercise",time:"10 min",recommended:co("Gratitude Practice"),onOpenContent:()=>lo("Gratitude Practice")}),jsxRuntimeExports.jsx(ModuleCard,{title:"Managing Anger",description:"Techniques to recognize anger triggers and respond in healthier ways.",icon:jsxRuntimeExports.jsx(Zap,{className:"h-8 w-8 text-amber-500"}),category:"Education",time:"20 min",recommended:co("Managing Anger"),onOpenContent:()=>lo("Managing Anger")}),jsxRuntimeExports.jsx(ModuleCard,{title:"Coping with Sadness",description:"Understand the roots of sadness and learn healthy coping mechanisms.",icon:jsxRuntimeExports.jsx(Frown,{className:"h-8 w-8 text-indigo-500"}),category:"Education",time:"15 min",recommended:co("Coping with Sadness"),onOpenContent:()=>lo("Coping with Sadness")}),jsxRuntimeExports.jsx(ModuleCard,{title:"Mindful Happiness",description:"Learn to cultivate and appreciate moments of joy without attachment.",icon:jsxRuntimeExports.jsx(SmilePlus,{className:"h-8 w-8 text-green-500"}),category:"Exercise",time:"10 min",recommended:co("Mindful Happiness"),onOpenContent:()=>lo("Mindful Happiness")}),jsxRuntimeExports.jsx(ModuleCard,{title:"Understanding Anxiety",description:"Learn about the mechanics of anxiety and fear responses in the body and mind.",icon:jsxRuntimeExports.jsx(Brain,{className:"h-8 w-8 text-purple-500"}),category:"Education",time:"15 min",recommended:co("Understanding Anxiety"),onOpenContent:()=>lo("Understanding Anxiety")}),jsxRuntimeExports.jsx(ModuleCard,{title:"Mindfulness Basics",description:"Introduction to mindfulness practices for everyday mental well-being.",icon:jsxRuntimeExports.jsx(Brain,{className:"h-8 w-8 text-teal-500"}),category:"Education",time:"10 min",recommended:co("Mindfulness Basics"),onOpenContent:()=>lo("Mindfulness Basics")}),jsxRuntimeExports.jsx(ModuleCard,{title:"Body Scan Meditation",description:"A guided practice to bring awareness to each part of your body.",icon:jsxRuntimeExports.jsx(ShieldPlus,{className:"h-8 w-8 text-blue-500"}),category:"Exercise",time:"15 min",recommended:co("Body Scan Meditation"),onOpenContent:()=>lo("Body Scan Meditation")})]})}),jsxRuntimeExports.jsx(TabsContent,{value:"happy",children:jsxRuntimeExports.jsxs(motion.div,{className:"grid md:grid-cols-2 gap-4",variants:fo,initial:"hidden",animate:"show",children:[jsxRuntimeExports.jsx(ModuleCard,{title:"Mindful Happiness",description:"Learn to cultivate and appreciate moments of joy without attachment.",icon:jsxRuntimeExports.jsx(SmilePlus,{className:"h-8 w-8 text-green-500"}),category:"Exercise",time:"10 min",recommended:co("Mindful Happiness"),onOpenContent:()=>lo("Mindful Happiness")}),jsxRuntimeExports.jsx(ModuleCard,{title:"Sharing Positivity",description:"Discover ways to channel your positive energy to help others around you.",icon:jsxRuntimeExports.jsx(Heart,{className:"h-8 w-8 text-red-500"}),category:"Education",time:"12 min",recommended:co("Sharing Positivity"),onOpenContent:()=>lo("Sharing Positivity")})]})}),jsxRuntimeExports.jsx(TabsContent,{value:"sad",children:jsxRuntimeExports.jsxs(motion.div,{className:"grid md:grid-cols-2 gap-4",variants:fo,initial:"hidden",animate:"show",children:[jsxRuntimeExports.jsx(ModuleCard,{title:"Coping with Sadness",description:"Understand the roots of sadness and learn healthy coping mechanisms.",icon:jsxRuntimeExports.jsx(Frown,{className:"h-8 w-8 text-indigo-500"}),category:"Education",time:"15 min",recommended:!0,onOpenContent:()=>lo("Coping with Sadness")}),jsxRuntimeExports.jsx(ModuleCard,{title:"Gratitude Practice",description:"Exercises to cultivate gratitude and positive thinking in your daily life.",icon:jsxRuntimeExports.jsx(Heart,{className:"h-8 w-8 text-red-500"}),category:"Exercise",time:"10 min",recommended:!0,onOpenContent:()=>lo("Gratitude Practice")})]})}),jsxRuntimeExports.jsx(TabsContent,{value:"angry",children:jsxRuntimeExports.jsxs(motion.div,{className:"grid md:grid-cols-2 gap-4",variants:fo,initial:"hidden",animate:"show",children:[jsxRuntimeExports.jsx(ModuleCard,{title:"Managing Anger",description:"Techniques to recognize anger triggers and respond in healthier ways.",icon:jsxRuntimeExports.jsx(Zap,{className:"h-8 w-8 text-amber-500"}),category:"Education",time:"20 min",recommended:!0,onOpenContent:()=>lo("Managing Anger")}),jsxRuntimeExports.jsx(ModuleCard,{title:"Breathing Techniques",description:"Simple breathing exercises to help manage stress and anger in the moment.",icon:jsxRuntimeExports.jsx(ShieldPlus,{className:"h-8 w-8 text-blue-500"}),category:"Exercise",time:"5 min",recommended:!0,onOpenContent:()=>lo("Breathing Techniques")})]})}),jsxRuntimeExports.jsx(TabsContent,{value:"fearful",children:jsxRuntimeExports.jsxs(motion.div,{className:"grid md:grid-cols-2 gap-4",variants:fo,initial:"hidden",animate:"show",children:[jsxRuntimeExports.jsx(ModuleCard,{title:"Understanding Anxiety",description:"Learn about the mechanics of anxiety and fear responses in the body and mind.",icon:jsxRuntimeExports.jsx(Brain,{className:"h-8 w-8 text-purple-500"}),category:"Education",time:"15 min",recommended:!0,onOpenContent:()=>lo("Understanding Anxiety")}),jsxRuntimeExports.jsx(ModuleCard,{title:"Breathing Techniques",description:"Simple breathing exercises to help manage anxiety in the moment.",icon:jsxRuntimeExports.jsx(ShieldPlus,{className:"h-8 w-8 text-blue-500"}),category:"Exercise",time:"5 min",recommended:!0,onOpenContent:()=>lo("Breathing Techniques")})]})}),jsxRuntimeExports.jsx(TabsContent,{value:"calm",children:jsxRuntimeExports.jsxs(motion.div,{className:"grid md:grid-cols-2 gap-4",variants:fo,initial:"hidden",animate:"show",children:[jsxRuntimeExports.jsx(ModuleCard,{title:"Mindfulness Basics",description:"Introduction to mindfulness practices for everyday mental well-being.",icon:jsxRuntimeExports.jsx(Brain,{className:"h-8 w-8 text-teal-500"}),category:"Education",time:"10 min",recommended:on==="calm",onOpenContent:()=>lo("Mindfulness Basics")}),jsxRuntimeExports.jsx(ModuleCard,{title:"Body Scan Meditation",description:"A guided practice to bring awareness to each part of your body.",icon:jsxRuntimeExports.jsx(ShieldPlus,{className:"h-8 w-8 text-blue-500"}),category:"Exercise",time:"15 min",onOpenContent:()=>lo("Body Scan Meditation")})]})})]})]})]}),jsxRuntimeExports.jsx(Dialog,{open:nn,onOpenChange:rn,children:jsxRuntimeExports.jsx(DialogContent,{className:"max-w-3xl max-h-[80vh] overflow-y-auto",children:Mt&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs(DialogHeader,{children:[jsxRuntimeExports.jsx(DialogTitle,{className:"text-xl",children:Mt.title}),jsxRuntimeExports.jsx(DialogDescription,{children:jsxRuntimeExports.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:Mt.benefits.map((ho,mo)=>jsxRuntimeExports.jsxs("span",{className:"inline-flex items-center text-xs bg-secondary/30 px-2 py-1 rounded-full text-secondary-foreground",children:[jsxRuntimeExports.jsx(CheckCheck,{className:"h-3 w-3 mr-1"}),ho]},mo))})})]}),jsxRuntimeExports.jsx("div",{className:"space-y-4 my-4",children:Mt.sections.map((ho,mo)=>jsxRuntimeExports.jsxs("div",{className:"border border-border rounded-lg p-4",children:[jsxRuntimeExports.jsxs("h3",{className:"font-medium flex items-center mb-2",children:[ho.type==="text"&&jsxRuntimeExports.jsx(Sparkles,{className:"h-4 w-4 mr-2 text-blue-500"}),ho.type==="exercise"&&jsxRuntimeExports.jsx(ChartNoAxesColumnIncreasing,{className:"h-4 w-4 mr-2 text-green-500"}),ho.type==="technique"&&jsxRuntimeExports.jsx(CheckCheck,{className:"h-4 w-4 mr-2 text-amber-500"}),ho.type==="reflection"&&jsxRuntimeExports.jsx(Bookmark,{className:"h-4 w-4 mr-2 text-purple-500"}),ho.title]}),jsxRuntimeExports.jsx("div",{className:"whitespace-pre-line text-sm",children:ho.content})]},mo))}),jsxRuntimeExports.jsxs("div",{className:"border-t pt-4",children:[jsxRuntimeExports.jsxs("h4",{className:"text-sm font-medium flex items-center mb-2",children:[jsxRuntimeExports.jsx(List$1,{className:"h-4 w-4 mr-2"}),"Related Modules"]}),jsxRuntimeExports.jsx("div",{className:"flex flex-wrap gap-2",children:Mt.relatedModules.map((ho,mo)=>jsxRuntimeExports.jsx(Button,{variant:"outline",size:"sm",className:"text-xs",onClick:()=>{st(modulesContent[ho])},children:ho},mo))})]}),jsxRuntimeExports.jsx(DialogFooter,{children:jsxRuntimeExports.jsxs("div",{className:"flex justify-between w-full items-center",children:[jsxRuntimeExports.jsxs("div",{className:"text-xs flex items-center",children:[jsxRuntimeExports.jsx(Clock,{className:"h-4 w-4 mr-1"}),"Estimated time: ",Mt.sections.length*3,"-",Mt.sections.length*5," minutes"]}),jsxRuntimeExports.jsx(Button,{onClick:()=>rn(!1),children:"Close"})]})})]})})})]})}const itemVariant={hidden:{opacity:0,y:20},show:{opacity:1,y:0}};function ModuleCard({title:Mt,description:st,icon:nn,category:rn,time:on,recommended:an=!1,onOpenContent:sn}){return jsxRuntimeExports.jsx(motion.div,{variants:itemVariant,children:jsxRuntimeExports.jsxs(Card,{className:`h-full transition-all duration-300 hover:shadow-md ${an?"border-amber-300 border-2":""}`,children:[jsxRuntimeExports.jsxs(CardHeader,{className:"pb-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-start",children:[jsxRuntimeExports.jsx("div",{className:"p-2 bg-secondary/30 rounded-full mb-2",children:nn}),an&&jsxRuntimeExports.jsx("span",{className:"bg-amber-100 text-amber-800 text-xs px-2 py-1 rounded-full font-medium",children:"Recommended"})]}),jsxRuntimeExports.jsx(CardTitle,{className:"text-lg",children:Mt})]}),jsxRuntimeExports.jsx(CardContent,{children:jsxRuntimeExports.jsx("p",{className:"text-sm text-muted-foreground",children:st})}),jsxRuntimeExports.jsxs(CardFooter,{className:"flex justify-between items-center pt-2 border-t",children:[jsxRuntimeExports.jsxs("span",{className:"text-xs text-muted-foreground font-medium",children:[rn,"  ",on]}),jsxRuntimeExports.jsx(Button,{variant:"outline",size:"sm",className:"text-sm",onClick:sn,children:"View"})]})]})})}const Sheet=Root,SheetTrigger=Trigger,SheetClose=Close,SheetPortal=Portal,SheetOverlay=reactExports.forwardRef(({className:Mt,...st},nn)=>jsxRuntimeExports.jsx(Overlay,{className:cn("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",Mt),...st,ref:nn}));SheetOverlay.displayName=Overlay.displayName;const sheetVariants=cva("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),SheetContent=reactExports.forwardRef(({side:Mt="right",className:st,children:nn,...rn},on)=>jsxRuntimeExports.jsxs(SheetPortal,{children:[jsxRuntimeExports.jsx(SheetOverlay,{}),jsxRuntimeExports.jsxs(Content,{ref:on,className:cn(sheetVariants({side:Mt}),st),...rn,children:[nn,jsxRuntimeExports.jsxs(Close,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[jsxRuntimeExports.jsx(X$1,{className:"h-4 w-4"}),jsxRuntimeExports.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));SheetContent.displayName=Content.displayName;const SheetHeader=({className:Mt,...st})=>jsxRuntimeExports.jsx("div",{className:cn("flex flex-col space-y-2 text-center sm:text-left",Mt),...st});SheetHeader.displayName="SheetHeader";const SheetTitle=reactExports.forwardRef(({className:Mt,...st},nn)=>jsxRuntimeExports.jsx(Title,{ref:nn,className:cn("text-lg font-semibold text-foreground",Mt),...st}));SheetTitle.displayName=Title.displayName;const SheetDescription=reactExports.forwardRef(({className:Mt,...st},nn)=>jsxRuntimeExports.jsx(Description,{ref:nn,className:cn("text-sm text-muted-foreground",Mt),...st}));SheetDescription.displayName=Description.displayName;function NavBar(){const[Mt,st]=useLocation(),[nn,rn]=reactExports.useState("/"),[on,an]=reactExports.useState(!1);reactExports.useEffect(()=>{rn(Mt==="/text"?"/text":Mt==="/voice"?"/voice":Mt==="/stats"?"/stats":Mt==="/about"?"/about":Mt==="/modules"?"/modules":"/")},[Mt]);const sn=un=>{st(un),an(!1)};return jsxRuntimeExports.jsx("header",{className:"bg-beige-200 shadow-sm",children:jsxRuntimeExports.jsx("div",{className:"container mx-auto px-4 py-4",children:jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center",children:[jsxRuntimeExports.jsx(Link,{href:"/",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 cursor-pointer",children:[jsxRuntimeExports.jsx(Brain,{className:"text-beige-600 h-6 w-6"}),jsxRuntimeExports.jsx("h1",{className:"text-xl font-semibold text-beige-700",children:"Therapeutic AI"})]})}),jsxRuntimeExports.jsx("nav",{className:"hidden md:block",children:jsxRuntimeExports.jsxs("ul",{className:"flex gap-1 sm:gap-2",children:[jsxRuntimeExports.jsx("li",{children:jsxRuntimeExports.jsxs(Button,{variant:nn==="/"?"secondary":"ghost",onClick:()=>st("/"),className:"px-3 py-2 text-sm",children:[jsxRuntimeExports.jsx(House,{className:"h-4 w-4 inline mr-1"}),"Home"]})}),jsxRuntimeExports.jsx("li",{children:jsxRuntimeExports.jsxs(Button,{variant:nn==="/voice"?"secondary":"ghost",onClick:()=>st("/voice"),className:"px-3 py-2 text-sm",children:[jsxRuntimeExports.jsx(Mic,{className:"h-4 w-4 inline mr-1"}),"Voice Therapy"]})}),jsxRuntimeExports.jsx("li",{children:jsxRuntimeExports.jsxs(Button,{variant:nn==="/text"?"secondary":"ghost",onClick:()=>st("/text"),className:"px-3 py-2 text-sm",children:[jsxRuntimeExports.jsx(MessageCircle,{className:"h-4 w-4 inline mr-1"}),"Text Therapy"]})}),jsxRuntimeExports.jsx("li",{children:jsxRuntimeExports.jsxs(Button,{variant:nn==="/modules"?"secondary":"ghost",onClick:()=>st("/modules"),className:"px-3 py-2 text-sm",children:[jsxRuntimeExports.jsx(Layers,{className:"h-4 w-4 inline mr-1"}),"Modules"]})}),jsxRuntimeExports.jsx("li",{children:jsxRuntimeExports.jsxs(Button,{variant:nn==="/stats"?"secondary":"ghost",onClick:()=>st("/stats"),className:"px-3 py-2 text-sm",children:[jsxRuntimeExports.jsx(ChartNoAxesColumnIncreasing,{className:"h-4 w-4 inline mr-1"}),"Stats"]})}),jsxRuntimeExports.jsx("li",{children:jsxRuntimeExports.jsxs(Button,{variant:nn==="/about"?"secondary":"ghost",onClick:()=>st("/about"),className:"px-3 py-2 text-sm",children:[jsxRuntimeExports.jsx(FileText,{className:"h-4 w-4 inline mr-1"}),"About"]})})]})}),jsxRuntimeExports.jsx("div",{className:"md:hidden",children:jsxRuntimeExports.jsxs(Sheet,{open:on,onOpenChange:an,children:[jsxRuntimeExports.jsx(SheetTrigger,{asChild:!0,children:jsxRuntimeExports.jsx(Button,{variant:"ghost",size:"icon","aria-label":"Menu",children:jsxRuntimeExports.jsx(Menu$1,{className:"h-5 w-5"})})}),jsxRuntimeExports.jsxs(SheetContent,{side:"right",className:"w-[80%] bg-beige-100 p-0",children:[jsxRuntimeExports.jsx(SheetHeader,{className:"p-4 border-b border-beige-200",children:jsxRuntimeExports.jsxs(SheetTitle,{className:"flex items-center gap-2 text-beige-700",children:[jsxRuntimeExports.jsx(Brain,{className:"text-beige-600 h-5 w-5"}),"Therapeutic AI"]})}),jsxRuntimeExports.jsx("div",{className:"py-4",children:jsxRuntimeExports.jsx(AnimatePresence,{children:jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{staggerChildren:.05},children:[jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.05},children:jsxRuntimeExports.jsx(SheetClose,{asChild:!0,children:jsxRuntimeExports.jsxs(Button,{variant:nn==="/"?"secondary":"ghost",className:`w-full justify-start rounded-none px-6 py-6 text-left ${nn==="/"?"bg-beige-200/50":""}`,onClick:()=>sn("/"),children:[jsxRuntimeExports.jsx(House,{className:"h-5 w-5 mr-3"}),"Home"]})})}),jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.1},children:jsxRuntimeExports.jsx(SheetClose,{asChild:!0,children:jsxRuntimeExports.jsxs(Button,{variant:nn==="/voice"?"secondary":"ghost",className:`w-full justify-start rounded-none px-6 py-6 text-left ${nn==="/voice"?"bg-beige-200/50":""}`,onClick:()=>sn("/voice"),children:[jsxRuntimeExports.jsx(Mic,{className:"h-5 w-5 mr-3"}),"Voice Therapy"]})})}),jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.15},children:jsxRuntimeExports.jsx(SheetClose,{asChild:!0,children:jsxRuntimeExports.jsxs(Button,{variant:nn==="/text"?"secondary":"ghost",className:`w-full justify-start rounded-none px-6 py-6 text-left ${nn==="/text"?"bg-beige-200/50":""}`,onClick:()=>sn("/text"),children:[jsxRuntimeExports.jsx(MessageCircle,{className:"h-5 w-5 mr-3"}),"Text Therapy"]})})}),jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.2},children:jsxRuntimeExports.jsx(SheetClose,{asChild:!0,children:jsxRuntimeExports.jsxs(Button,{variant:nn==="/modules"?"secondary":"ghost",className:`w-full justify-start rounded-none px-6 py-6 text-left ${nn==="/modules"?"bg-beige-200/50":""}`,onClick:()=>sn("/modules"),children:[jsxRuntimeExports.jsx(Layers,{className:"h-5 w-5 mr-3"}),"Modules"]})})}),jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.25},children:jsxRuntimeExports.jsx(SheetClose,{asChild:!0,children:jsxRuntimeExports.jsxs(Button,{variant:nn==="/stats"?"secondary":"ghost",className:`w-full justify-start rounded-none px-6 py-6 text-left ${nn==="/stats"?"bg-beige-200/50":""}`,onClick:()=>sn("/stats"),children:[jsxRuntimeExports.jsx(ChartNoAxesColumnIncreasing,{className:"h-5 w-5 mr-3"}),"Stats"]})})}),jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.3},children:jsxRuntimeExports.jsx(SheetClose,{asChild:!0,children:jsxRuntimeExports.jsxs(Button,{variant:nn==="/about"?"secondary":"ghost",className:`w-full justify-start rounded-none px-6 py-6 text-left ${nn==="/about"?"bg-beige-200/50":""}`,onClick:()=>sn("/about"),children:[jsxRuntimeExports.jsx(FileText,{className:"h-5 w-5 mr-3"}),"About"]})})})]})})})]})]})})]})})})}function Footer(){const Mt=new Date().getFullYear();return jsxRuntimeExports.jsx("footer",{className:"bg-beige-200 py-4 mt-6",children:jsxRuntimeExports.jsxs("div",{className:"container mx-auto px-4 text-center text-beige-600 text-sm",children:[jsxRuntimeExports.jsxs("p",{children:[" ",Mt," Therapeutic AI Assistant. All rights reserved."]}),jsxRuntimeExports.jsx("p",{className:"mt-2",children:"This application uses artificial intelligence for conversational therapy. It is not a replacement for professional mental health services."}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center mt-3 text-xs",children:[jsxRuntimeExports.jsx(Lock,{className:"h-3 w-3 mr-1"}),jsxRuntimeExports.jsx("span",{children:"All conversations are encrypted and not stored permanently."})]})]})})}function Router(){return jsxRuntimeExports.jsxs("div",{className:"min-h-screen flex flex-col",children:[jsxRuntimeExports.jsx(NavBar,{}),jsxRuntimeExports.jsx("main",{className:"flex-grow container mx-auto px-4 py-6",children:jsxRuntimeExports.jsxs(Switch,{children:[jsxRuntimeExports.jsx(Route,{path:"/",component:HomePage}),jsxRuntimeExports.jsx(Route,{path:"/voice",component:VoiceTherapy}),jsxRuntimeExports.jsx(Route,{path:"/text",component:TextTherapy}),jsxRuntimeExports.jsx(Route,{path:"/stats",component:StatsPage}),jsxRuntimeExports.jsx(Route,{path:"/about",component:AboutPage}),jsxRuntimeExports.jsx(Route,{path:"/modules",component:ModulesPage}),jsxRuntimeExports.jsx(Route,{component:NotFound})]})}),jsxRuntimeExports.jsx(Footer,{})]})}function App(){return reactExports.useEffect(()=>{loadFaceApiScript().catch(Mt=>{console.warn("Could not preload Face API script:",Mt)})},[]),jsxRuntimeExports.jsxs(QueryClientProvider,{client:queryClient,children:[jsxRuntimeExports.jsx(Router,{}),jsxRuntimeExports.jsx(Toaster,{})]})}const faceApiScript=document.createElement("script");faceApiScript.src="https://cdn.jsdelivr.net/npm/face-api.js@0.22.2/dist/face-api.min.js";document.head.appendChild(faceApiScript);const puterScript=document.createElement("script");puterScript.src="https://js.puter.com/v2/";document.head.appendChild(puterScript);document.title="Therapeutic AI Assistant";createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(App,{}));
